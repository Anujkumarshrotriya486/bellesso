var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jquery={exports:{}},jqueryExports=((()=>{var e,t;e="undefined"!=typeof window?window:commonjsGlobal,t=function(S,X){function v(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item}function D(e){return null!=e&&e===e.window}var t=[],F=Object.getPrototypeOf,s=t.slice,O=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},R=t.push,y=t.indexOf,N={},H=N.toString,B=N.hasOwnProperty,U=B.toString,V=U.call(Object),h={},w=S.document,z={type:!0,src:!0,nonce:!0,noModule:!0};function j(e,t,r){var i,a,o=(r=r||w).createElement("script");if(o.text=e,t)for(i in z)(a=t[i]||t.getAttribute&&t.getAttribute(i))&&o.setAttribute(i,a);r.head.appendChild(o).parentNode.removeChild(o)}function W(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?N[H.call(e)]||"object":typeof e}var e="3.7.1",q=/HTML$/i,b=function(e,t){return new b.fn.init(e,t)};function Z(e){var t=!!e&&"length"in e&&e.length,r=W(e);return!v(e)&&!D(e)&&("array"===r||0===t||"number"==typeof t&&0<t&&t-1 in e)}function P(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}b.fn=b.prototype={jquery:e,constructor:b,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=b.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return b.each(this,e)},map:function(r){return this.pushStack(b.map(this,function(e,t){return r.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(b.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(b.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:R,sort:t.sort,splice:t.splice},b.extend=b.fn.extend=function(){var e,t,r,i,a,o=arguments[0]||{},n=1,s=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[n]||{},n++),"object"==typeof o||v(o)||(o={}),n===s&&(o=this,n--);n<s;n++)if(null!=(e=arguments[n]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(l&&r&&(b.isPlainObject(r)||(i=Array.isArray(r)))?(a=o[t],a=i&&!Array.isArray(a)?[]:i||b.isPlainObject(a)?a:{},i=!1,o[t]=b.extend(l,a,r)):void 0!==r&&(o[t]=r));return o},b.extend({expando:"jQuery"+(e+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==H.call(e)||(e=F(e))&&("function"!=typeof(e=B.call(e,"constructor")&&e.constructor)||U.call(e)!==V))},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e,t,r){j(e,{nonce:t&&t.nonce},r)},each:function(e,t){var r,i=0;if(Z(e))for(r=e.length;i<r&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},text:function(e){var t,r="",i=0,a=e.nodeType;if(!a)for(;t=e[i++];)r+=b.text(t);return 1===a||11===a?e.textContent:9===a?e.documentElement.textContent:3===a||4===a?e.nodeValue:r},makeArray:function(e,t){t=t||[];return null!=e&&(Z(Object(e))?b.merge(t,"string"==typeof e?[e]:e):R.call(t,e)),t},inArray:function(e,t,r){return null==t?-1:y.call(t,e,r)},isXMLDoc:function(e){var t=e&&e.namespaceURI,e=e&&(e.ownerDocument||e).documentElement;return!q.test(t||e&&e.nodeName||"HTML")},merge:function(e,t){for(var r=+t.length,i=0,a=e.length;i<r;i++)e[a++]=t[i];return e.length=a,e},grep:function(e,t,r){for(var i=[],a=0,o=e.length,n=!r;a<o;a++)!t(e[a],a)!=n&&i.push(e[a]);return i},map:function(e,t,r){var i,a,o=0,n=[];if(Z(e))for(i=e.length;o<i;o++)null!=(a=t(e[o],o,r))&&n.push(a);else for(o in e)null!=(a=t(e[o],o,r))&&n.push(a);return O(n)},guid:1,support:h}),"function"==typeof Symbol&&(b.fn[Symbol.iterator]=t[Symbol.iterator]),b.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){N["[object "+t+"]"]=t.toLowerCase()});var K=t.pop,Y=t.sort,Q=t.splice,r="[\\x20\\t\\r\\n\\f]",ee=new RegExp("^"+r+"+|((?:^|[^\\\\])(?:\\\\.)*)"+r+"+$","g"),te=(b.contains=function(e,t){t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(e.contains?e.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))},/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g);function re(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}b.escapeSelector=function(e){return(e+"").replace(te,re)};var ie,C,ae,oe,ne,k,i,T,u,se,a=w,le=R,x=le,A=b.expando,J=0,ce=0,pe=Je(),de=Je(),ue=Je(),ge=Je(),me=function(e,t){return e===t&&(ne=!0),0},he="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",e="(?:\\\\[\\da-fA-F]{1,6}"+r+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",o="\\["+r+"*("+e+")(?:"+r+"*([*^$|!~]?=)"+r+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+e+"))|)"+r+"*\\]",n=":("+e+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+o+")*)|.*)\\)|)",_e=new RegExp(r+"+","g"),fe=new RegExp("^"+r+"*,"+r+"*"),ve=new RegExp("^"+r+"*([>+~]|"+r+")"+r+"*"),ye=new RegExp(r+"|>"),Pe=new RegExp(n),Se=new RegExp("^"+e+"$"),we={ID:new RegExp("^#("+e+")"),CLASS:new RegExp("^\\.("+e+")"),TAG:new RegExp("^("+e+"|[*])"),ATTR:new RegExp("^"+o),PSEUDO:new RegExp("^"+n),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+r+"*(even|odd|(([+-]|)(\\d*)n|)"+r+"*(?:([+-]|)"+r+"*(\\d+)|))"+r+"*\\)|)","i"),bool:new RegExp("^(?:"+he+")$","i"),needsContext:new RegExp("^"+r+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+r+"*((?:-\\d)?\\d*)"+r+"*\\)|)(?=[^-]|$)","i")},be=/^(?:input|select|textarea|button)$/i,Ce=/^h\d$/i,ke=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Te=/[+~]/,d=new RegExp("\\\\[\\da-fA-F]{1,6}"+r+"?|\\\\([^\\r\\n\\f])","g"),g=function(e,t){e="0x"+e.slice(1)-65536;return t||(e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320))},xe=function(){Me()},Ae=Fe(function(e){return!0===e.disabled&&P(e,"fieldset")},{dir:"parentNode",next:"legend"});try{x.apply(t=s.call(a.childNodes),a.childNodes),t[a.childNodes.length].nodeType}catch(e){x={apply:function(e,t){le.apply(e,s.call(t))},call:function(e){le.apply(e,s.call(arguments,1))}}}function G(t,e,r,i){var a,o,n,s,l,c,p=e&&e.ownerDocument,d=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==d&&9!==d&&11!==d)return r;if(!i&&(Me(e),e=e||k,T)){if(11!==d&&(s=ke.exec(t)))if(a=s[1]){if(9===d){if(!(c=e.getElementById(a)))return r;if(c.id===a)return x.call(r,c),r}else if(p&&(c=p.getElementById(a))&&G.contains(e,c)&&c.id===a)return x.call(r,c),r}else{if(s[2])return x.apply(r,e.getElementsByTagName(t)),r;if((a=s[3])&&e.getElementsByClassName)return x.apply(r,e.getElementsByClassName(a)),r}if(!(ge[t+" "]||u&&u.test(t))){if(c=t,p=e,1===d&&(ye.test(t)||ve.test(t))){for((p=Te.test(t)&&Le(e.parentNode)||e)==e&&h.scope||((n=e.getAttribute("id"))?n=b.escapeSelector(n):e.setAttribute("id",n=A)),o=(l=Xe(t)).length;o--;)l[o]=(n?"#"+n:":scope")+" "+De(l[o]);c=l.join(",")}try{return x.apply(r,p.querySelectorAll(c)),r}catch(e){ge(t,!0)}finally{n===A&&e.removeAttribute("id")}}}return Ue(t.replace(ee,"$1"),e,r,i)}function Je(){var r=[];function i(e,t){return r.push(e+" ")>C.cacheLength&&delete i[r.shift()],i[e+" "]=t}return i}function l(e){return e[A]=!0,e}function Ge(e){var t=k.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function $e(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function Ee(n){return l(function(o){return o=+o,l(function(e,t){for(var r,i=n([],e.length,o),a=i.length;a--;)e[r=i[a]]&&(e[r]=!(t[r]=e[r]))})})}function Le(e){return e&&void 0!==e.getElementsByTagName&&e}function Me(e){var e=e?e.ownerDocument||e:a;return e!=k&&9===e.nodeType&&e.documentElement&&(i=(k=e).documentElement,T=!b.isXMLDoc(k),se=i.matches||i.webkitMatchesSelector||i.msMatchesSelector,i.msMatchesSelector&&a!=k&&(e=k.defaultView)&&e.top!==e&&e.addEventListener("unload",xe),h.getById=Ge(function(e){return i.appendChild(e).id=b.expando,!k.getElementsByName||!k.getElementsByName(b.expando).length}),h.disconnectedMatch=Ge(function(e){return se.call(e,"*")}),h.scope=Ge(function(){return k.querySelectorAll(":scope")}),h.cssHas=Ge(function(){try{k.querySelector(":has(*,:jqfake)")}catch(e){return 1}}),h.getById?(C.filter.ID=function(e){var t=e.replace(d,g);return function(e){return e.getAttribute("id")===t}},C.find.ID=function(e,t){if(void 0!==t.getElementById&&T)return(t=t.getElementById(e))?[t]:[]}):(C.filter.ID=function(e){var t=e.replace(d,g);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},C.find.ID=function(e,t){if(void 0!==t.getElementById&&T){var r,i,a,o=t.getElementById(e);if(o){if((r=o.getAttributeNode("id"))&&r.value===e)return[o];for(a=t.getElementsByName(e),i=0;o=a[i++];)if((r=o.getAttributeNode("id"))&&r.value===e)return[o]}return[]}}),C.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},C.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&T)return t.getElementsByClassName(e)},u=[],Ge(function(e){var t;i.appendChild(e).innerHTML="<a id='"+A+"' href='' disabled='disabled'></a><select id='"+A+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||u.push("\\["+r+"*(?:value|"+he+")"),e.querySelectorAll("[id~="+A+"-]").length||u.push("~="),e.querySelectorAll("a#"+A+"+*").length||u.push(".#.+[+~]"),e.querySelectorAll(":checked").length||u.push(":checked"),(t=k.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),i.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&u.push(":enabled",":disabled"),(t=k.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||u.push("\\["+r+"*name"+r+"*="+r+"*(?:''|\"\")")}),h.cssHas||u.push(":has"),u=u.length&&new RegExp(u.join("|")),me=function(e,t){var r;return e===t?(ne=!0,0):(r=!e.compareDocumentPosition-!t.compareDocumentPosition)||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!h.sortDetached&&t.compareDocumentPosition(e)===r?e===k||e.ownerDocument==a&&G.contains(a,e)?-1:t===k||t.ownerDocument==a&&G.contains(a,t)?1:oe?y.call(oe,e)-y.call(oe,t):0:4&r?-1:1)}),k}for(ie in G.matches=function(e,t){return G(e,null,null,t)},G.matchesSelector=function(e,t){if(Me(e),T&&!ge[t+" "]&&(!u||!u.test(t)))try{var r=se.call(e,t);if(r||h.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){ge(t,!0)}return 0<G(t,k,null,[e]).length},G.contains=function(e,t){return(e.ownerDocument||e)!=k&&Me(e),b.contains(e,t)},G.attr=function(e,t){(e.ownerDocument||e)!=k&&Me(e);var r=C.attrHandle[t.toLowerCase()],r=r&&B.call(C.attrHandle,t.toLowerCase())?r(e,t,!T):void 0;return void 0!==r?r:e.getAttribute(t)},G.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},b.uniqueSort=function(e){var t,r=[],i=0,a=0;if(ne=!h.sortStable,oe=!h.sortStable&&s.call(e,0),Y.call(e,me),ne){for(;t=e[a++];)t===e[a]&&(i=r.push(a));for(;i--;)Q.call(e,r[i],1)}return oe=null,e},b.fn.uniqueSort=function(){return this.pushStack(b.uniqueSort(s.apply(this)))},(C=b.expr={cacheLength:50,createPseudo:l,match:we,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(d,g),e[3]=(e[3]||e[4]||e[5]||"").replace(d,g),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||G.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&G.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return we.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&Pe.test(r)&&(t=(t=Xe(r,!0))&&r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(d,g).toLowerCase();return"*"===e?function(){return!0}:function(e){return P(e,t)}},CLASS:function(e){var t=pe[e+" "];return t||(t=new RegExp("(^|"+r+")"+e+"("+r+"|$)"))&&pe(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,r,i){return function(e){e=G.attr(e,t);return null==e?"!="===r:!r||(e+="","="===r?e===i:"!="===r?e!==i:"^="===r?i&&0===e.indexOf(i):"*="===r?i&&-1<e.indexOf(i):"$="===r?i&&e.slice(-i.length)===i:"~="===r?-1<(" "+e.replace(_e," ")+" ").indexOf(i):"|="===r&&(e===i||e.slice(0,i.length+1)===i+"-"))}},CHILD:function(g,e,t,m,h){var _="nth"!==g.slice(0,3),f="last"!==g.slice(-4),v="of-type"===e;return 1===m&&0===h?function(e){return!!e.parentNode}:function(e,t,r){var i,a,o,n,s,l=_!=f?"nextSibling":"previousSibling",c=e.parentNode,p=v&&e.nodeName.toLowerCase(),d=!r&&!v,u=!1;if(c){if(_){for(;l;){for(o=e;o=o[l];)if(v?P(o,p):1===o.nodeType)return!1;s=l="only"===g&&!s&&"nextSibling"}return!0}if(s=[f?c.firstChild:c.lastChild],f&&d){for(u=(n=(i=(a=c[A]||(c[A]={}))[g]||[])[0]===J&&i[1])&&i[2],o=n&&c.childNodes[n];o=++n&&o&&o[l]||(u=n=0,s.pop());)if(1===o.nodeType&&++u&&o===e){a[g]=[J,n,u];break}}else if(!1===(u=d?n=(i=(a=e[A]||(e[A]={}))[g]||[])[0]===J&&i[1]:u))for(;(o=++n&&o&&o[l]||(u=n=0,s.pop()))&&((v?!P(o,p):1!==o.nodeType)||!++u||(d&&((a=o[A]||(o[A]={}))[g]=[J,u]),o!==e)););return(u-=h)===m||u%m==0&&0<=u/m}}},PSEUDO:function(e,o){var t,n=C.pseudos[e]||C.setFilters[e.toLowerCase()]||G.error("unsupported pseudo: "+e);return n[A]?n(o):1<n.length?(t=[e,e,"",o],C.setFilters.hasOwnProperty(e.toLowerCase())?l(function(e,t){for(var r,i=n(e,o),a=i.length;a--;)e[r=y.call(e,i[a])]=!(t[r]=i[a])}):function(e){return n(e,0,t)}):n}},pseudos:{not:l(function(e){var i=[],a=[],s=Be(e.replace(ee,"$1"));return s[A]?l(function(e,t,r,i){for(var a,o=s(e,null,i,[]),n=e.length;n--;)(a=o[n])&&(e[n]=!(t[n]=a))}):function(e,t,r){return i[0]=e,s(i,null,r,a),i[0]=null,!a.pop()}}),has:l(function(t){return function(e){return 0<G(t,e).length}}),contains:l(function(t){return t=t.replace(d,g),function(e){return-1<(e.textContent||b.text(e)).indexOf(t)}}),lang:l(function(r){return Se.test(r||"")||G.error("unsupported lang: "+r),r=r.replace(d,g).toLowerCase(),function(e){var t;do{if(t=T?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===r||0===t.indexOf(r+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=S.location&&S.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===i},focus:function(e){return e===(()=>{try{return k.activeElement}catch(e){}})()&&k.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:$e(!1),disabled:$e(!0),checked:function(e){return P(e,"input")&&!!e.checked||P(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return Ce.test(e.nodeName)},input:function(e){return be.test(e.nodeName)},button:function(e){return P(e,"input")&&"button"===e.type||P(e,"button")},text:function(e){return P(e,"input")&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:Ee(function(){return[0]}),last:Ee(function(e,t){return[t-1]}),eq:Ee(function(e,t,r){return[r<0?r+t:r]}),even:Ee(function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:Ee(function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:Ee(function(e,t,r){for(var i=r<0?r+t:t<r?t:r;0<=--i;)e.push(i);return e}),gt:Ee(function(e,t,r){for(var i=r<0?r+t:r;++i<t;)e.push(i);return e})}}).pseudos.nth=C.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[ie]=(t=>function(e){return P(e,"input")&&e.type===t})(ie);for(ie in{submit:!0,reset:!0})C.pseudos[ie]=(t=>function(e){return(P(e,"input")||P(e,"button"))&&e.type===t})(ie);function Ie(){}function Xe(e,t){var r,i,a,o,n,s,l,c=de[e+" "];if(c)return t?0:c.slice(0);for(n=e,s=[],l=C.preFilter;n;){for(o in r&&!(i=fe.exec(n))||(i&&(n=n.slice(i[0].length)||n),s.push(a=[])),r=!1,(i=ve.exec(n))&&(r=i.shift(),a.push({value:r,type:i[0].replace(ee," ")}),n=n.slice(r.length)),C.filter)!(i=we[o].exec(n))||l[o]&&!(i=l[o](i))||(r=i.shift(),a.push({value:r,type:o,matches:i}),n=n.slice(r.length));if(!r)break}return t?n.length:n?G.error(e):de(e,s).slice(0)}function De(e){for(var t=0,r=e.length,i="";t<r;t++)i+=e[t].value;return i}function Fe(n,e,t){var s=e.dir,l=e.next,c=l||s,p=t&&"parentNode"===c,d=ce++;return e.first?function(e,t,r){for(;e=e[s];)if(1===e.nodeType||p)return n(e,t,r);return!1}:function(e,t,r){var i,a,o=[J,d];if(r){for(;e=e[s];)if((1===e.nodeType||p)&&n(e,t,r))return!0}else for(;e=e[s];)if(1===e.nodeType||p)if(a=e[A]||(e[A]={}),l&&P(e,l))e=e[s]||e;else{if((i=a[c])&&i[0]===J&&i[1]===d)return o[2]=i[2];if((a[c]=o)[2]=n(e,t,r))return!0}return!1}}function Oe(a){return 1<a.length?function(e,t,r){for(var i=a.length;i--;)if(!a[i](e,t,r))return!1;return!0}:a[0]}function Re(e,t,r,i,a){for(var o,n=[],s=0,l=e.length,c=null!=t;s<l;s++)!(o=e[s])||r&&!r(o,i,a)||(n.push(o),c&&t.push(s));return n}function Ne(g,m,h,_,f,e){return _&&!_[A]&&(_=Ne(_)),f&&!f[A]&&(f=Ne(f,e)),l(function(e,t,r,i){var a,o,n,s,l=[],c=[],p=t.length,d=e||((e,t,r)=>{for(var i=0,a=t.length;i<a;i++)G(e,t[i],r);return r})(m||"*",r.nodeType?[r]:r,[]),u=!g||!e&&m?d:Re(d,l,g,r,i);if(h?h(u,s=f||(e?g:p||_)?[]:t,r,i):s=u,_)for(a=Re(s,c),_(a,[],r,i),o=a.length;o--;)(n=a[o])&&(s[c[o]]=!(u[c[o]]=n));if(e){if(f||g){if(f){for(a=[],o=s.length;o--;)(n=s[o])&&a.push(u[o]=n);f(null,s=[],a,i)}for(o=s.length;o--;)(n=s[o])&&-1<(a=f?y.call(e,n):l[o])&&(e[a]=!(t[a]=n))}}else s=Re(s===t?s.splice(p,s.length):s),f?f(null,t,s,i):x.apply(t,s)})}function He(_,f){function e(e,t,r,i,a){var o,n,s,l=0,c="0",p=e&&[],d=[],u=ae,g=e||y&&C.find.TAG("*",a),m=J+=null==u?1:Math.random()||.1,h=g.length;for(a&&(ae=t==k||t||a);c!==h&&null!=(o=g[c]);c++){if(y&&o){for(n=0,t||o.ownerDocument==k||(Me(o),r=!T);s=_[n++];)if(s(o,t||k,r)){x.call(i,o);break}a&&(J=m)}v&&((o=!s&&o)&&l--,e)&&p.push(o)}if(l+=c,v&&c!==l){for(n=0;s=f[n++];)s(p,d,t,r);if(e){if(0<l)for(;c--;)p[c]||d[c]||(d[c]=K.call(i));d=Re(d)}x.apply(i,d),a&&!e&&0<d.length&&1<l+f.length&&b.uniqueSort(i)}return a&&(J=m,ae=u),p}var v=0<f.length,y=0<_.length;return v?l(e):e}function Be(e,t){var r,i=[],a=[],o=ue[e+" "];if(!o){for(r=(t=t||Xe(e)).length;r--;)((o=function e(t){for(var i,r,a,o=t.length,n=C.relative[t[0].type],s=n||C.relative[" "],l=n?1:0,c=Fe(function(e){return e===i},s,!0),p=Fe(function(e){return-1<y.call(i,e)},s,!0),d=[function(e,t,r){return e=!n&&(r||t!=ae)||((i=t).nodeType?c:p)(e,t,r),i=null,e}];l<o;l++)if(r=C.relative[t[l].type])d=[Fe(Oe(d),r)];else{if((r=C.filter[t[l].type].apply(null,t[l].matches))[A]){for(a=++l;a<o&&!C.relative[t[a].type];a++);return Ne(1<l&&Oe(d),1<l&&De(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(ee,"$1"),r,l<a&&e(t.slice(l,a)),a<o&&e(t=t.slice(a)),a<o&&De(t))}d.push(r)}return Oe(d)}(t[r]))[A]?i:a).push(o);(o=ue(e,He(a,i))).selector=e}return o}function Ue(e,t,r,i){var a,o,n,s,l,c="function"==typeof e&&e,p=!i&&Xe(e=c.selector||e);if(r=r||[],1===p.length){if(2<(o=p[0]=p[0].slice(0)).length&&"ID"===(n=o[0]).type&&9===t.nodeType&&T&&C.relative[o[1].type]){if(!(t=(C.find.ID(n.matches[0].replace(d,g),t)||[])[0]))return r;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(a=we.needsContext.test(e)?0:o.length;a--&&(n=o[a],!C.relative[s=n.type]);)if((l=C.find[s])&&(i=l(n.matches[0].replace(d,g),Te.test(o[0].type)&&Le(t.parentNode)||t))){if(o.splice(a,1),e=i.length&&De(o))break;return x.apply(r,i),r}}return(c||Be(e,p))(i,t,!T,r,!t||Te.test(e)&&Le(t.parentNode)||t),r}Ie.prototype=C.filters=C.pseudos,C.setFilters=new Ie,h.sortStable=A.split("").sort(me).join("")===A,Me(),h.sortDetached=Ge(function(e){return 1&e.compareDocumentPosition(k.createElement("fieldset"))}),b.find=G,b.expr[":"]=b.expr.pseudos,b.unique=b.uniqueSort,G.compile=Be,G.select=Ue,G.setDocument=Me,G.tokenize=Xe,G.escape=b.escapeSelector,G.getText=b.text,G.isXML=b.isXMLDoc,G.selectors=b.expr,G.support=b.support,G.uniqueSort=b.uniqueSort;function Ve(e,t,r){for(var i=[],a=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&b(e).is(r))break;i.push(e)}return i}function ze(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r}var je=b.expr.match.needsContext,We=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function qe(e,r,i){return v(r)?b.grep(e,function(e,t){return!!r.call(e,t,e)!==i}):r.nodeType?b.grep(e,function(e){return e===r!==i}):"string"!=typeof r?b.grep(e,function(e){return-1<y.call(r,e)!==i}):b.filter(r,e,i)}b.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?b.find.matchesSelector(i,e)?[i]:[]:b.find.matches(e,b.grep(t,function(e){return 1===e.nodeType}))},b.fn.extend({find:function(e){var t,r,i=this.length,a=this;if("string"!=typeof e)return this.pushStack(b(e).filter(function(){for(t=0;t<i;t++)if(b.contains(a[t],this))return!0}));for(r=this.pushStack([]),t=0;t<i;t++)b.find(e,a[t],r);return 1<i?b.uniqueSort(r):r},filter:function(e){return this.pushStack(qe(this,e||[],!1))},not:function(e){return this.pushStack(qe(this,e||[],!0))},is:function(e){return!!qe(this,"string"==typeof e&&je.test(e)?b(e):e||[],!1).length}});var Ze,Ke=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ye=((b.fn.init=function(e,t,r){if(e){if(r=r||Ze,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==r.ready?r.ready(e):e(b):b.makeArray(e,this);if(!(i="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:Ke.exec(e))||!i[1]&&t)return(!t||t.jquery?t||r:this.constructor(t)).find(e);if(i[1]){if(t=t instanceof b?t[0]:t,b.merge(this,b.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:w,!0)),We.test(i[1])&&b.isPlainObject(t))for(var i in t)v(this[i])?this[i](t[i]):this.attr(i,t[i])}else(r=w.getElementById(i[2]))&&(this[0]=r,this.length=1)}return this}).prototype=b.fn,Ze=b(w),/^(?:parents|prev(?:Until|All))/),Qe={children:!0,contents:!0,next:!0,prev:!0};function et(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}b.fn.extend({has:function(e){var t=b(e,this),r=t.length;return this.filter(function(){for(var e=0;e<r;e++)if(b.contains(this,t[e]))return!0})},closest:function(e,t){var r,i=0,a=this.length,o=[],n="string"!=typeof e&&b(e);if(!je.test(e))for(;i<a;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(n?-1<n.index(r):1===r.nodeType&&b.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(1<o.length?b.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?y.call(b(e),this[0]):y.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(b.uniqueSort(b.merge(this.get(),b(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return Ve(e,"parentNode")},parentsUntil:function(e,t,r){return Ve(e,"parentNode",r)},next:function(e){return et(e,"nextSibling")},prev:function(e){return et(e,"previousSibling")},nextAll:function(e){return Ve(e,"nextSibling")},prevAll:function(e){return Ve(e,"previousSibling")},nextUntil:function(e,t,r){return Ve(e,"nextSibling",r)},prevUntil:function(e,t,r){return Ve(e,"previousSibling",r)},siblings:function(e){return ze((e.parentNode||{}).firstChild,e)},children:function(e){return ze(e.firstChild)},contents:function(e){return null!=e.contentDocument&&F(e.contentDocument)?e.contentDocument:(P(e,"template")&&(e=e.content||e),b.merge([],e.childNodes))}},function(i,a){b.fn[i]=function(e,t){var r=b.map(this,a,e);return(t="Until"!==i.slice(-5)?e:t)&&"string"==typeof t&&(r=b.filter(t,r)),1<this.length&&(Qe[i]||b.uniqueSort(r),Ye.test(i))&&r.reverse(),this.pushStack(r)}});var $=/[^\x20\t\r\n\f]+/g;function tt(e){return e}function rt(e){throw e}function it(e,t,r,i){var a;try{e&&v(a=e.promise)?a.call(e).done(t).fail(r):e&&v(a=e.then)?a.call(e,t,r):t.apply(void 0,[e].slice(i))}catch(e){r.apply(void 0,[e])}}b.Callbacks=function(i){var e,r;i="string"==typeof i?(e=i,r={},b.each(e.match($)||[],function(e,t){r[t]=!0}),r):b.extend({},i);function a(){for(s=s||i.once,n=o=!0;c.length;p=-1)for(t=c.shift();++p<l.length;)!1===l[p].apply(t[0],t[1])&&i.stopOnFalse&&(p=l.length,t=!1);i.memory||(t=!1),o=!1,s&&(l=t?[]:"")}var o,t,n,s,l=[],c=[],p=-1,d={add:function(){return l&&(t&&!o&&(p=l.length-1,c.push(t)),function r(e){b.each(e,function(e,t){v(t)?i.unique&&d.has(t)||l.push(t):t&&t.length&&"string"!==W(t)&&r(t)})}(arguments),t)&&!o&&a(),this},remove:function(){return b.each(arguments,function(e,t){for(var r;-1<(r=b.inArray(t,l,r));)l.splice(r,1),r<=p&&p--}),this},has:function(e){return e?-1<b.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return s=c=[],l=t="",this},disabled:function(){return!l},lock:function(){return s=c=[],t||o||(l=t=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),o)||a(),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},b.extend({Deferred:function(e){var o=[["notify","progress",b.Callbacks("memory"),b.Callbacks("memory"),2],["resolve","done",b.Callbacks("once memory"),b.Callbacks("once memory"),0,"resolved"],["reject","fail",b.Callbacks("once memory"),b.Callbacks("once memory"),1,"rejected"]],a="pending",n={state:function(){return a},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return n.then(null,e)},pipe:function(){var a=arguments;return b.Deferred(function(i){b.each(o,function(e,t){var r=v(a[t[4]])&&a[t[4]];s[t[1]](function(){var e=r&&r.apply(this,arguments);e&&v(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[t[0]+"With"](this,r?[e]:arguments)})}),a=null}).promise()},then:function(t,r,i){var l=0;function c(a,o,n,s){return function(){function e(){var e,t;if(!(a<l)){if((e=n.apply(r,i))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,v(t)?s?t.call(e,c(l,o,tt,s),c(l,o,rt,s)):(l++,t.call(e,c(l,o,tt,s),c(l,o,rt,s),c(l,o,tt,o.notifyWith))):(n!==tt&&(r=void 0,i=[e]),(s||o.resolveWith)(r,i))}}var r=this,i=arguments,t=s?e:function(){try{e()}catch(e){b.Deferred.exceptionHook&&b.Deferred.exceptionHook(e,t.error),l<=a+1&&(n!==rt&&(r=void 0,i=[e]),o.rejectWith(r,i))}};a?t():(b.Deferred.getErrorHook?t.error=b.Deferred.getErrorHook():b.Deferred.getStackHook&&(t.error=b.Deferred.getStackHook()),S.setTimeout(t))}}return b.Deferred(function(e){o[0][3].add(c(0,e,v(i)?i:tt,e.notifyWith)),o[1][3].add(c(0,e,v(t)?t:tt)),o[2][3].add(c(0,e,v(r)?r:rt))}).promise()},promise:function(e){return null!=e?b.extend(e,n):n}},s={};return b.each(o,function(e,t){var r=t[2],i=t[5];n[t[1]]=r.add,i&&r.add(function(){a=i},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),r.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=r.fireWith}),n.promise(s),e&&e.call(s,s),s},when:function(e){function t(t){return function(e){a[t]=this,o[t]=1<arguments.length?s.call(arguments):e,--r||n.resolveWith(a,o)}}var r=arguments.length,i=r,a=Array(i),o=s.call(arguments),n=b.Deferred();if(r<=1&&(it(e,n.done(t(i)).resolve,n.reject,!r),"pending"===n.state()||v(o[i]&&o[i].then)))return n.then();for(;i--;)it(o[i],t(i),n.reject);return n.promise()}});var at=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,ot=(b.Deferred.exceptionHook=function(e,t){S.console&&S.console.warn&&e&&at.test(e.name)&&S.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},b.readyException=function(e){S.setTimeout(function(){throw e})},b.Deferred());function nt(){w.removeEventListener("DOMContentLoaded",nt),S.removeEventListener("load",nt),b.ready()}b.fn.ready=function(e){return ot.then(e).catch(function(e){b.readyException(e)}),this},b.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--b.readyWait:b.isReady)||(b.isReady=!0)!==e&&0<--b.readyWait||ot.resolveWith(w,[b])}}),b.ready.then=ot.then,"complete"===w.readyState||"loading"!==w.readyState&&!w.documentElement.doScroll?S.setTimeout(b.ready):(w.addEventListener("DOMContentLoaded",nt),S.addEventListener("load",nt));function p(e,t,r,i,a,o,n){var s=0,l=e.length,c=null==r;if("object"===W(r))for(s in a=!0,r)p(e,t,s,r[s],!0,o,n);else if(void 0!==i&&(a=!0,v(i)||(n=!0),t=c?n?(t.call(e,i),null):(c=t,function(e,t,r){return c.call(b(e),r)}):t))for(;s<l;s++)t(e[s],r,n?i:i.call(e[s],s,t(e[s],r)));return a?e:c?t.call(e):l?t(e[0],r):o}var st=/^-ms-/,lt=/-([a-z])/g;function ct(e,t){return t.toUpperCase()}function E(e){return e.replace(st,"ms-").replace(lt,ct)}function pt(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function dt(){this.expando=b.expando+dt.uid++}dt.uid=1,dt.prototype={cache:function(e){var t=e[this.expando];return t||(t={},pt(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var i,a=this.cache(e);if("string"==typeof t)a[E(t)]=r;else for(i in t)a[E(i)]=t[i];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][E(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i=e[this.expando];if(void 0!==i){if(void 0!==t){r=(t=Array.isArray(t)?t.map(E):(t=E(t))in i?[t]:t.match($)||[]).length;for(;r--;)delete i[t[r]]}void 0!==t&&!b.isEmptyObject(i)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!b.isEmptyObject(e)}};var f=new dt,c=new dt,ut=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,gt=/[A-Z]/g;function mt(e,t,r){var i,a;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(gt,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(i))){try{r="true"===(a=r)||"false"!==a&&("null"===a?null:a===+a+""?+a:ut.test(a)?JSON.parse(a):a)}catch(e){}c.set(e,t,r)}else r=void 0;return r}b.extend({hasData:function(e){return c.hasData(e)||f.hasData(e)},data:function(e,t,r){return c.access(e,t,r)},removeData:function(e,t){c.remove(e,t)},_data:function(e,t,r){return f.access(e,t,r)},_removeData:function(e,t){f.remove(e,t)}}),b.fn.extend({data:function(r,e){var t,i,a,o=this[0],n=o&&o.attributes;if(void 0!==r)return"object"==typeof r?this.each(function(){c.set(this,r)}):p(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=c.get(o,r))||void 0!==(t=mt(o,r))?t:void 0;this.each(function(){c.set(this,r,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(a=c.get(o),1===o.nodeType)&&!f.get(o,"hasDataAttrs")){for(t=n.length;t--;)n[t]&&0===(i=n[t].name).indexOf("data-")&&(i=E(i.slice(5)),mt(o,i,a[i]));f.set(o,"hasDataAttrs",!0)}return a},removeData:function(e){return this.each(function(){c.remove(this,e)})}}),b.extend({queue:function(e,t,r){var i;if(e)return i=f.get(e,t=(t||"fx")+"queue"),r&&(!i||Array.isArray(r)?i=f.access(e,t,b.makeArray(r)):i.push(r)),i||[]},dequeue:function(e,t){t=t||"fx";var r=b.queue(e,t),i=r.length,a=r.shift(),o=b._queueHooks(e,t);"inprogress"===a&&(a=r.shift(),i--),a&&("fx"===t&&r.unshift("inprogress"),delete o.stop,a.call(e,function(){b.dequeue(e,t)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return f.get(e,r)||f.access(e,r,{empty:b.Callbacks("once memory").add(function(){f.remove(e,[t+"queue",r])})})}}),b.fn.extend({queue:function(t,r){var e=2;return"string"!=typeof t&&(r=t,t="fx",e--),arguments.length<e?b.queue(this[0],t):void 0===r?this:this.each(function(){var e=b.queue(this,t,r);b._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&b.dequeue(this,t)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function r(){--a||o.resolveWith(n,[n])}var i,a=1,o=b.Deferred(),n=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(i=f.get(n[s],e+"queueHooks"))&&i.empty&&(a++,i.empty.add(r));return r(),o.promise(t)}});function ht(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&yt(e)&&"none"===b.css(e,"display")}var e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_t=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),ft=["Top","Right","Bottom","Left"],vt=w.documentElement,yt=function(e){return b.contains(e.ownerDocument,e)},Pt={composed:!0};vt.getRootNode&&(yt=function(e){return b.contains(e.ownerDocument,e)||e.getRootNode(Pt)===e.ownerDocument});function St(e,t,r,i){var a,o,n=20,s=i?function(){return i.cur()}:function(){return b.css(e,t,"")},l=s(),c=r&&r[3]||(b.cssNumber[t]?"":"px"),p=e.nodeType&&(b.cssNumber[t]||"px"!==c&&+l)&&_t.exec(b.css(e,t));if(p&&p[3]!==c){for(c=c||p[3],p=+(l/=2)||1;n--;)b.style(e,t,p+c),(1-o)*(1-(o=s()/l||.5))<=0&&(n=0),p/=o;b.style(e,t,(p*=2)+c),r=r||[]}return r&&(p=+p||+l||0,a=r[1]?p+(r[1]+1)*r[2]:+r[2],i)&&(i.unit=c,i.start=p,i.end=a),a}var wt={};function bt(e,t){for(var r,i,a,o,n,s=[],l=0,c=e.length;l<c;l++)(i=e[l]).style&&(r=i.style.display,t?("none"===r&&(s[l]=f.get(i,"display")||null,s[l]||(i.style.display="")),""===i.style.display&&ht(i)&&(s[l]=(n=o=void 0,o=(a=i).ownerDocument,(n=wt[a=a.nodeName])||(o=o.body.appendChild(o.createElement(a)),n=b.css(o,"display"),o.parentNode.removeChild(o),wt[a]=n="none"===n?"block":n),n))):"none"!==r&&(s[l]="none",f.set(i,"display",r)));for(l=0;l<c;l++)null!=s[l]&&(e[l].style.display=s[l]);return e}b.fn.extend({show:function(){return bt(this,!0)},hide:function(){return bt(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ht(this)?b(this).show():b(this).hide()})}});var Ct=/^(?:checkbox|radio)$/i,kt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Tt=/^$|^module$|\/(?:java|ecma)script/i,m=(o=w.createDocumentFragment().appendChild(w.createElement("div")),(n=w.createElement("input")).setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),o.appendChild(n),h.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,o.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!o.cloneNode(!0).lastChild.defaultValue,o.innerHTML="<option></option>",h.option=!!o.lastChild,{thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]});function _(e,t){var r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&P(e,t)?b.merge([e],r):r}function xt(e,t){for(var r=0,i=e.length;r<i;r++)f.set(e[r],"globalEval",!t||f.get(t[r],"globalEval"))}m.tbody=m.tfoot=m.colgroup=m.caption=m.thead,m.th=m.td,h.option||(m.optgroup=m.option=[1,"<select multiple='multiple'>","</select>"]);var At=/<|&#?\w+;/;function Jt(e,t,r,i,a){for(var o,n,s,l,c,p=t.createDocumentFragment(),d=[],u=0,g=e.length;u<g;u++)if((o=e[u])||0===o)if("object"===W(o))b.merge(d,o.nodeType?[o]:o);else if(At.test(o)){for(n=n||p.appendChild(t.createElement("div")),s=(kt.exec(o)||["",""])[1].toLowerCase(),s=m[s]||m._default,n.innerHTML=s[1]+b.htmlPrefilter(o)+s[2],c=s[0];c--;)n=n.lastChild;b.merge(d,n.childNodes),(n=p.firstChild).textContent=""}else d.push(t.createTextNode(o));for(p.textContent="",u=0;o=d[u++];)if(i&&-1<b.inArray(o,i))a&&a.push(o);else if(l=yt(o),n=_(p.appendChild(o),"script"),l&&xt(n),r)for(c=0;o=n[c++];)Tt.test(o.type||"")&&r.push(o);return p}var Gt=/^([^.]*)(?:\.(.+)|)/;function $t(){return!0}function Et(){return!1}function Lt(e,t,r,i,a,o){var n,s;if("object"==typeof t){for(s in"string"!=typeof r&&(i=i||r,r=void 0),t)Lt(e,s,r,i,t[s],o);return e}if(null==i&&null==a?(a=r,i=r=void 0):null==a&&("string"==typeof r?(a=i,i=void 0):(a=i,i=r,r=void 0)),!1===a)a=Et;else if(!a)return e;return 1===o&&(n=a,(a=function(e){return b().off(e),n.apply(this,arguments)}).guid=n.guid||(n.guid=b.guid++)),e.each(function(){b.event.add(this,t,a,i,r)})}function Mt(e,i,t){t?(f.set(e,i,!1),b.event.add(e,i,{namespace:!1,handler:function(e){var t,r=f.get(this,i);if(1&e.isTrigger&&this[i]){if(r)(b.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),f.set(this,i,r),this[i](),t=f.get(this,i),f.set(this,i,!1),r!==t)return e.stopImmediatePropagation(),e.preventDefault(),t}else r&&(f.set(this,i,b.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=$t)}})):void 0===f.get(e,i)&&b.event.add(e,i,$t)}b.event={global:{},add:function(t,e,r,i,a){var o,n,s,l,c,p,d,u,g,m=f.get(t);if(pt(t))for(r.handler&&(r=(o=r).handler,a=o.selector),a&&b.find.matchesSelector(vt,a),r.guid||(r.guid=b.guid++),s=(s=m.events)||(m.events=Object.create(null)),n=(n=m.handle)||(m.handle=function(e){return void 0!==b&&b.event.triggered!==e.type?b.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match($)||[""]).length;l--;)d=g=(u=Gt.exec(e[l])||[])[1],u=(u[2]||"").split(".").sort(),d&&(c=b.event.special[d]||{},d=(a?c.delegateType:c.bindType)||d,c=b.event.special[d]||{},g=b.extend({type:d,origType:g,data:i,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:u.join(".")},o),(p=s[d])||((p=s[d]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,i,u,n))||t.addEventListener&&t.addEventListener(d,n),c.add&&(c.add.call(t,g),g.handler.guid||(g.handler.guid=r.guid)),a?p.splice(p.delegateCount++,0,g):p.push(g),b.event.global[d]=!0)},remove:function(e,t,r,i,a){var o,n,s,l,c,p,d,u,g,m,h,_=f.hasData(e)&&f.get(e);if(_&&(l=_.events)){for(c=(t=(t||"").match($)||[""]).length;c--;)if(g=h=(s=Gt.exec(t[c])||[])[1],m=(s[2]||"").split(".").sort(),g){for(d=b.event.special[g]||{},u=l[g=(i?d.delegateType:d.bindType)||g]||[],s=s[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),n=o=u.length;o--;)p=u[o],!a&&h!==p.origType||r&&r.guid!==p.guid||s&&!s.test(p.namespace)||i&&i!==p.selector&&("**"!==i||!p.selector)||(u.splice(o,1),p.selector&&u.delegateCount--,d.remove&&d.remove.call(e,p));n&&!u.length&&(d.teardown&&!1!==d.teardown.call(e,m,_.handle)||b.removeEvent(e,g,_.handle),delete l[g])}else for(g in l)b.event.remove(e,g+t[c],r,i,!0);b.isEmptyObject(l)&&f.remove(e,"handle events")}},dispatch:function(e){var t,r,i,a,o,n=new Array(arguments.length),s=b.event.fix(e),e=(f.get(this,"events")||Object.create(null))[s.type]||[],l=b.event.special[s.type]||{};for(n[0]=s,t=1;t<arguments.length;t++)n[t]=arguments[t];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(o=b.event.handlers.call(this,s,e),t=0;(i=o[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,r=0;(a=i.handlers[r++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==a.namespace&&!s.rnamespace.test(a.namespace)||(s.handleObj=a,s.data=a.data,void 0!==(a=((b.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,n))&&!1===(s.result=a)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(e,t){var r,i,a,o,n,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],n={},r=0;r<l;r++)void 0===n[a=(i=t[r]).selector+" "]&&(n[a]=i.needsContext?-1<b(a,this).index(c):b.find(a,this,null,[c]).length),n[a]&&o.push(i);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(t,e){Object.defineProperty(b.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[b.expando]?e:new b.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){e=this||e;return Ct.test(e.type)&&e.click&&P(e,"input")&&Mt(e,"click",!0),!1},trigger:function(e){e=this||e;return Ct.test(e.type)&&e.click&&P(e,"input")&&Mt(e,"click"),!0},_default:function(e){e=e.target;return Ct.test(e.type)&&e.click&&P(e,"input")&&f.get(e,"click")||P(e,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},b.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},b.Event=function(e,t){if(!(this instanceof b.Event))return new b.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?$t:Et,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&b.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[b.expando]=!0},b.Event.prototype={constructor:b.Event,isDefaultPrevented:Et,isPropagationStopped:Et,isImmediatePropagationStopped:Et,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=$t,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=$t,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=$t,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},b.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},b.event.addProp),b.each({focus:"focusin",blur:"focusout"},function(i,a){function o(e){var t,r;w.documentMode?(t=f.get(this,"handle"),(r=b.event.fix(e)).type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,t(e),r.target===r.currentTarget&&t(r)):b.event.simulate(a,e.target,b.event.fix(e))}b.event.special[i]={setup:function(){var e;if(Mt(this,i,!0),!w.documentMode)return!1;(e=f.get(this,a))||this.addEventListener(a,o),f.set(this,a,(e||0)+1)},trigger:function(){return Mt(this,i),!0},teardown:function(){var e;if(!w.documentMode)return!1;(e=f.get(this,a)-1)?f.set(this,a,e):(this.removeEventListener(a,o),f.remove(this,a))},_default:function(e){return f.get(e.target,i)},delegateType:a},b.event.special[a]={setup:function(){var e=this.ownerDocument||this.document||this,t=w.documentMode?this:e,r=f.get(t,a);r||(w.documentMode?this.addEventListener(a,o):e.addEventListener(i,o,!0)),f.set(t,a,(r||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=w.documentMode?this:e,r=f.get(t,a)-1;r?f.set(t,a,r):(w.documentMode?this.removeEventListener(a,o):e.removeEventListener(i,o,!0),f.remove(t,a))}}}),b.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,a){b.event.special[e]={delegateType:a,bindType:a,handle:function(e){var t,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||b.contains(this,r))||(e.type=i.origType,t=i.handler.apply(this,arguments),e.type=a),t}}}),b.fn.extend({on:function(e,t,r,i){return Lt(this,e,t,r,i)},one:function(e,t,r,i){return Lt(this,e,t,r,i,1)},off:function(e,t,r){var i,a;if(e&&e.preventDefault&&e.handleObj)i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler);else{if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=Et),this.each(function(){b.event.remove(this,e,r,t)});for(a in e)this.off(a,t,e[a])}return this}});var It=/<script|<style|<link/i,Xt=/checked\s*(?:[^=]|=\s*.checked.)/i,Dt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ft(e,t){return P(e,"table")&&P(11!==t.nodeType?t:t.firstChild,"tr")&&b(e).children("tbody")[0]||e}function Ot(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Rt(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Nt(e,t){var r,i,a,o;if(1===t.nodeType){if(f.hasData(e)&&(o=f.get(e).events))for(a in f.remove(t,"handle events"),o)for(r=0,i=o[a].length;r<i;r++)b.event.add(t,a,o[a][r]);c.hasData(e)&&(e=c.access(e),e=b.extend({},e),c.set(t,e))}}function Ht(r,i,a,o){i=O(i);var e,t,n,s,l,c,p=0,d=r.length,u=d-1,g=i[0],m=v(g);if(m||1<d&&"string"==typeof g&&!h.checkClone&&Xt.test(g))return r.each(function(e){var t=r.eq(e);m&&(i[0]=g.call(this,e,t.html())),Ht(t,i,a,o)});if(d&&(t=(e=Jt(i,r[0].ownerDocument,!1,r,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(n=b.map(_(e,"script"),Ot)).length;p<d;p++)l=e,p!==u&&(l=b.clone(l,!0,!0),s)&&b.merge(n,_(l,"script")),a.call(r[p],l,p);if(s)for(c=n[n.length-1].ownerDocument,b.map(n,Rt),p=0;p<s;p++)l=n[p],Tt.test(l.type||"")&&!f.access(l,"globalEval")&&b.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?b._evalUrl&&!l.noModule&&b._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):j(l.textContent.replace(Dt,""),l,c))}return r}function Bt(e,t,r){for(var i,a=t?b.filter(t,e):e,o=0;null!=(i=a[o]);o++)r||1!==i.nodeType||b.cleanData(_(i)),i.parentNode&&(r&&yt(i)&&xt(_(i,"script")),i.parentNode.removeChild(i));return e}b.extend({htmlPrefilter:function(e){return e},clone:function(e,t,r){var i,a,o,n,s,l,c,p=e.cloneNode(!0),d=yt(e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(n=_(p),i=0,a=(o=_(e)).length;i<a;i++)s=o[i],l=n[i],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&Ct.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(r)for(o=o||_(e),n=n||_(p),i=0,a=o.length;i<a;i++)Nt(o[i],n[i]);else Nt(e,p);return 0<(n=_(p,"script")).length&&xt(n,!d&&_(e,"script")),p},cleanData:function(e){for(var t,r,i,a=b.event.special,o=0;void 0!==(r=e[o]);o++)if(pt(r)){if(t=r[f.expando]){if(t.events)for(i in t.events)a[i]?b.event.remove(r,i):b.removeEvent(r,i,t.handle);r[f.expando]=void 0}r[c.expando]&&(r[c.expando]=void 0)}}}),b.fn.extend({detach:function(e){return Bt(this,e,!0)},remove:function(e){return Bt(this,e)},text:function(e){return p(this,function(e){return void 0===e?b.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ht(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ft(this,e).appendChild(e)})},prepend:function(){return Ht(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=Ft(this,e)).insertBefore(e,t.firstChild)})},before:function(){return Ht(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ht(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(b.cleanData(_(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return p(this,function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!It.test(e)&&!m[(kt.exec(e)||["",""])[1].toLowerCase()]){e=b.htmlPrefilter(e);try{for(;r<i;r++)1===(t=this[r]||{}).nodeType&&(b.cleanData(_(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var r=[];return Ht(this,arguments,function(e){var t=this.parentNode;b.inArray(this,r)<0&&(b.cleanData(_(this)),t)&&t.replaceChild(e,this)},r)}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,n){b.fn[e]=function(e){for(var t,r=[],i=b(e),a=i.length-1,o=0;o<=a;o++)t=o===a?this:this.clone(!0),b(i[o])[n](t),R.apply(r,t.get());return this.pushStack(r)}});function Ut(e){var t=e.ownerDocument.defaultView;return(t=t&&t.opener?t:S).getComputedStyle(e)}function Vt(e,t,r){var i,a={};for(i in t)a[i]=e.style[i],e.style[i]=t[i];for(i in r=r.call(e),t)e.style[i]=a[i];return r}var zt,jt,Wt,qt,Zt,Kt,Yt,L,Qt=new RegExp("^("+e+")(?!px)[a-z%]+$","i"),er=/^--/,tr=new RegExp(ft.join("|"),"i");function rr(){var e;L&&(Yt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",L.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",vt.appendChild(Yt).appendChild(L),e=S.getComputedStyle(L),zt="1%"!==e.top,Kt=12===ir(e.marginLeft),L.style.right="60%",qt=36===ir(e.right),jt=36===ir(e.width),L.style.position="absolute",Wt=12===ir(L.offsetWidth/3),vt.removeChild(Yt),L=null)}function ir(e){return Math.round(parseFloat(e))}function ar(e,t,r){var i,a=er.test(t),o=e.style;return(r=r||Ut(e))&&(i=r.getPropertyValue(t)||r[t],""!==(i=a?i&&(i.replace(ee,"$1")||void 0):i)||yt(e)||(i=b.style(e,t)),!h.pixelBoxStyles())&&Qt.test(i)&&tr.test(t)&&(a=o.width,e=o.minWidth,t=o.maxWidth,o.minWidth=o.maxWidth=o.width=i,i=r.width,o.width=a,o.minWidth=e,o.maxWidth=t),void 0!==i?i+"":i}function or(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}Yt=w.createElement("div"),(L=w.createElement("div")).style&&(L.style.backgroundClip="content-box",L.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===L.style.backgroundClip,b.extend(h,{boxSizingReliable:function(){return rr(),jt},pixelBoxStyles:function(){return rr(),qt},pixelPosition:function(){return rr(),zt},reliableMarginLeft:function(){return rr(),Kt},scrollboxSize:function(){return rr(),Wt},reliableTrDimensions:function(){var e,t,r;return null==Zt&&(e=w.createElement("table"),t=w.createElement("tr"),r=w.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",r.style.height="9px",r.style.display="block",vt.appendChild(e).appendChild(t).appendChild(r),r=S.getComputedStyle(t),Zt=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,vt.removeChild(e)),Zt}}));var nr=["Webkit","Moz","ms"],sr=w.createElement("div").style,lr={};function cr(e){var t=b.cssProps[e]||lr[e];return t||(e in sr?e:lr[e]=(e=>{for(var t=e[0].toUpperCase()+e.slice(1),r=nr.length;r--;)if((e=nr[r]+t)in sr)return e})(e)||e)}var pr=/^(none|table(?!-c[ea]).+)/,dr={position:"absolute",visibility:"hidden",display:"block"},ur={letterSpacing:"0",fontWeight:"400"};function gr(e,t,r){var i=_t.exec(t);return i?Math.max(0,i[2]-(r||0))+(i[3]||"px"):t}function mr(e,t,r,i,a,o){var n="width"===t?1:0,s=0,l=0,c=0;if(r===(i?"border":"content"))return 0;for(;n<4;n+=2)"margin"===r&&(c+=b.css(e,r+ft[n],!0,a)),i?("content"===r&&(l-=b.css(e,"padding"+ft[n],!0,a)),"margin"!==r&&(l-=b.css(e,"border"+ft[n]+"Width",!0,a))):(l+=b.css(e,"padding"+ft[n],!0,a),"padding"!==r?l+=b.css(e,"border"+ft[n]+"Width",!0,a):s+=b.css(e,"border"+ft[n]+"Width",!0,a));return!i&&0<=o&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l+c}function hr(e,t,r){var i=Ut(e),a=(!h.boxSizingReliable()||r)&&"border-box"===b.css(e,"boxSizing",!1,i),o=a,n=ar(e,t,i),s="offset"+t[0].toUpperCase()+t.slice(1);if(Qt.test(n)){if(!r)return n;n="auto"}return(!h.boxSizingReliable()&&a||!h.reliableTrDimensions()&&P(e,"tr")||"auto"===n||!parseFloat(n)&&"inline"===b.css(e,"display",!1,i))&&e.getClientRects().length&&(a="border-box"===b.css(e,"boxSizing",!1,i),o=s in e)&&(n=e[s]),(n=parseFloat(n)||0)+mr(e,t,r||(a?"border":"content"),o,i,n)+"px"}function M(e,t,r,i,a){return new M.prototype.init(e,t,r,i,a)}b.extend({cssHooks:{opacity:{get:function(e,t){if(t)return""===(t=ar(e,"opacity"))?"1":t}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,o,n,s=E(t),l=er.test(t),c=e.style;if(l||(t=cr(s)),n=b.cssHooks[t]||b.cssHooks[s],void 0===r)return n&&"get"in n&&void 0!==(a=n.get(e,!1,i))?a:c[t];"string"===(o=typeof r)&&(a=_t.exec(r))&&a[1]&&(r=St(e,t,a),o="number"),null==r||r!=r||("number"!==o||l||(r+=a&&a[3]||(b.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==r||0!==t.indexOf("background")||(c[t]="inherit"),n&&"set"in n&&void 0===(r=n.set(e,r,i)))||(l?c.setProperty(t,r):c[t]=r)}},css:function(e,t,r,i){var a,o=E(t);return er.test(t)||(t=cr(o)),"normal"===(a=void 0===(a=(o=b.cssHooks[t]||b.cssHooks[o])&&"get"in o?o.get(e,!0,r):a)?ar(e,t,i):a)&&t in ur&&(a=ur[t]),(""===r||r)&&(o=parseFloat(a),!0===r||isFinite(o))?o||0:a}}),b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,t,r){if(t)return!pr.test(b.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?hr(e,n,r):Vt(e,dr,function(){return hr(e,n,r)})},set:function(e,t,r){var i=Ut(e),a=!h.scrollboxSize()&&"absolute"===i.position,o=(a||r)&&"border-box"===b.css(e,"boxSizing",!1,i),r=r?mr(e,n,r,o,i):0;return o&&a&&(r-=Math.ceil(e["offset"+n[0].toUpperCase()+n.slice(1)]-parseFloat(i[n])-mr(e,n,"border",!1,i)-.5)),r&&(o=_t.exec(t))&&"px"!==(o[3]||"px")&&(e.style[n]=t,t=b.css(e,n)),gr(0,t,r)}}}),b.cssHooks.marginLeft=or(h.reliableMarginLeft,function(e,t){if(t)return(parseFloat(ar(e,"marginLeft"))||e.getBoundingClientRect().left-Vt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),b.each({margin:"",padding:"",border:"Width"},function(a,o){b.cssHooks[a+o]={expand:function(e){for(var t=0,r={},i="string"==typeof e?e.split(" "):[e];t<4;t++)r[a+ft[t]+o]=i[t]||i[t-2]||i[0];return r}},"margin"!==a&&(b.cssHooks[a+o].set=gr)}),b.fn.extend({css:function(e,t){return p(this,function(e,t,r){var i,a,o={},n=0;if(Array.isArray(t)){for(i=Ut(e),a=t.length;n<a;n++)o[t[n]]=b.css(e,t[n],!1,i);return o}return void 0!==r?b.style(e,t,r):b.css(e,t)},e,t,1<arguments.length)}}),((b.Tween=M).prototype={constructor:M,init:function(e,t,r,i,a,o){this.elem=e,this.prop=r,this.easing=a||b.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(b.cssNumber[r]?"":"px")},cur:function(){var e=M.propHooks[this.prop];return(e&&e.get?e:M.propHooks._default).get(this)},run:function(e){var t,r=M.propHooks[this.prop];return this.options.duration?this.pos=t=b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(r&&r.set?r:M.propHooks._default).set(this),this}}).init.prototype=M.prototype,(M.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=b.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):1!==e.elem.nodeType||!b.cssHooks[e.prop]&&null==e.elem.style[cr(e.prop)]?e.elem[e.prop]=e.now:b.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=M.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},b.fx=M.prototype.init,b.fx.step={};var _r,fr,vr=/^(?:toggle|show|hide)$/,yr=/queueHooks$/;function Pr(){fr&&(!1===w.hidden&&S.requestAnimationFrame?S.requestAnimationFrame(Pr):S.setTimeout(Pr,b.fx.interval),b.fx.tick())}function Sr(){return S.setTimeout(function(){_r=void 0}),_r=Date.now()}function wr(e,t){var r,i=0,a={height:e};for(t=t?1:0;i<4;i+=2-t)a["margin"+(r=ft[i])]=a["padding"+r]=e;return t&&(a.opacity=a.width=e),a}function br(e,t,r){for(var i,a=(I.tweeners[t]||[]).concat(I.tweeners["*"]),o=0,n=a.length;o<n;o++)if(i=a[o].call(r,t,e))return i}function I(a,e,t){var r,o,i,n,s,l,c,p=0,d=I.prefilters.length,u=b.Deferred().always(function(){delete g.elem}),g=function(){if(!o){for(var e=_r||Sr(),e=Math.max(0,m.startTime+m.duration-e),t=1-(e/m.duration||0),r=0,i=m.tweens.length;r<i;r++)m.tweens[r].run(t);if(u.notifyWith(a,[m,t,e]),t<1&&i)return e;i||u.notifyWith(a,[m,1,0]),u.resolveWith(a,[m])}return!1},m=u.promise({elem:a,props:b.extend({},e),opts:b.extend(!0,{specialEasing:{},easing:b.easing._default},t),originalProperties:e,originalOptions:t,startTime:_r||Sr(),duration:t.duration,tweens:[],createTween:function(e,t){t=b.Tween(a,m.opts,e,t,m.opts.specialEasing[e]||m.opts.easing);return m.tweens.push(t),t},stop:function(e){var t=0,r=e?m.tweens.length:0;if(!o){for(o=!0;t<r;t++)m.tweens[t].run(1);e?(u.notifyWith(a,[m,1,0]),u.resolveWith(a,[m,e])):u.rejectWith(a,[m,e])}return this}}),h=m.props,_=h,f=m.opts.specialEasing;for(i in _)if(s=f[n=E(i)],l=_[i],Array.isArray(l)&&(s=l[1],l=_[i]=l[0]),i!==n&&(_[n]=l,delete _[i]),(c=b.cssHooks[n])&&"expand"in c)for(i in l=c.expand(l),delete _[n],l)i in _||(_[i]=l[i],f[i]=s);else f[n]=s;for(;p<d;p++)if(r=I.prefilters[p].call(m,a,h,m.opts))return v(r.stop)&&(b._queueHooks(m.elem,m.opts.queue).stop=r.stop.bind(r)),r;return b.map(h,br,m),v(m.opts.start)&&m.opts.start.call(a,m),m.progress(m.opts.progress).done(m.opts.done,m.opts.complete).fail(m.opts.fail).always(m.opts.always),b.fx.timer(b.extend(g,{elem:a,anim:m,queue:m.opts.queue})),m}b.Animation=b.extend(I,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return St(r.elem,e,_t.exec(t),r),r}]},tweener:function(e,t){for(var r,i=0,a=(e=v(e)?(t=e,["*"]):e.match($)).length;i<a;i++)r=e[i],I.tweeners[r]=I.tweeners[r]||[],I.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var i,a,o,n,s,l,c,p="width"in t||"height"in t,d=this,u={},g=e.style,m=e.nodeType&&ht(e),h=f.get(e,"fxshow");for(i in r.queue||(null==(n=b._queueHooks(e,"fx")).unqueued&&(n.unqueued=0,s=n.empty.fire,n.empty.fire=function(){n.unqueued||s()}),n.unqueued++,d.always(function(){d.always(function(){n.unqueued--,b.queue(e,"fx").length||n.empty.fire()})})),t)if(a=t[i],vr.test(a)){if(delete t[i],o=o||"toggle"===a,a===(m?"hide":"show")){if("show"!==a||!h||void 0===h[i])continue;m=!0}u[i]=h&&h[i]||b.style(e,i)}if((l=!b.isEmptyObject(t))||!b.isEmptyObject(u))for(i in p&&1===e.nodeType&&(r.overflow=[g.overflow,g.overflowX,g.overflowY],null==(c=h&&h.display)&&(c=f.get(e,"display")),"none"===(p=b.css(e,"display"))&&(c?p=c:(bt([e],!0),c=e.style.display||c,p=b.css(e,"display"),bt([e]))),"inline"===p||"inline-block"===p&&null!=c)&&"none"===b.css(e,"float")&&(l||(d.done(function(){g.display=c}),null==c&&(p=g.display,c="none"===p?"":p)),g.display="inline-block"),r.overflow&&(g.overflow="hidden",d.always(function(){g.overflow=r.overflow[0],g.overflowX=r.overflow[1],g.overflowY=r.overflow[2]})),l=!1,u)l||(h?"hidden"in h&&(m=h.hidden):h=f.access(e,"fxshow",{display:c}),o&&(h.hidden=!m),m&&bt([e],!0),d.done(function(){for(i in m||bt([e]),f.remove(e,"fxshow"),u)b.style(e,i,u[i])})),l=br(m?h[i]:0,i,d),i in h||(h[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?I.prefilters.unshift(e):I.prefilters.push(e)}}),b.speed=function(e,t,r){var i=e&&"object"==typeof e?b.extend({},e):{complete:r||!r&&t||v(e)&&e,duration:e,easing:r&&t||t&&!v(t)&&t};return b.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in b.fx.speeds?i.duration=b.fx.speeds[i.duration]:i.duration=b.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){v(i.old)&&i.old.call(this),i.queue&&b.dequeue(this,i.queue)},i},b.fn.extend({fadeTo:function(e,t,r,i){return this.filter(ht).css("opacity",0).show().end().animate({opacity:t},e,r,i)},animate:function(t,e,r,i){function a(){var e=I(this,b.extend({},t),n);(o||f.get(this,"finish"))&&e.stop(!0)}var o=b.isEmptyObject(t),n=b.speed(e,r,i);return a.finish=a,o||!1===n.queue?this.each(a):this.queue(n.queue,a)},stop:function(a,e,o){function n(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof a&&(o=e,e=a,a=void 0),e&&this.queue(a||"fx",[]),this.each(function(){var e=!0,t=null!=a&&a+"queueHooks",r=b.timers,i=f.get(this);if(t)i[t]&&i[t].stop&&n(i[t]);else for(t in i)i[t]&&i[t].stop&&yr.test(t)&&n(i[t]);for(t=r.length;t--;)r[t].elem!==this||null!=a&&r[t].queue!==a||(r[t].anim.stop(o),e=!1,r.splice(t,1));!e&&o||b.dequeue(this,a)})},finish:function(n){return!1!==n&&(n=n||"fx"),this.each(function(){var e,t=f.get(this),r=t[n+"queue"],i=t[n+"queueHooks"],a=b.timers,o=r?r.length:0;for(t.finish=!0,b.queue(this,n,[]),i&&i.stop&&i.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===n&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;e<o;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete t.finish})}}),b.each(["toggle","show","hide"],function(e,i){var a=b.fn[i];b.fn[i]=function(e,t,r){return null==e||"boolean"==typeof e?a.apply(this,arguments):this.animate(wr(i,!0),e,t,r)}}),b.each({slideDown:wr("show"),slideUp:wr("hide"),slideToggle:wr("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){b.fn[e]=function(e,t,r){return this.animate(i,e,t,r)}}),b.timers=[],b.fx.tick=function(){var e,t=0,r=b.timers;for(_r=Date.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||b.fx.stop(),_r=void 0},b.fx.timer=function(e){b.timers.push(e),b.fx.start()},b.fx.interval=13,b.fx.start=function(){fr||(fr=!0,Pr())},b.fx.stop=function(){fr=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fn.delay=function(i,e){return i=b.fx&&b.fx.speeds[i]||i,this.queue(e=e||"fx",function(e,t){var r=S.setTimeout(e,i);t.stop=function(){S.clearTimeout(r)}})},n=w.createElement("input"),o=w.createElement("select").appendChild(w.createElement("option")),n.type="checkbox",h.checkOn=""!==n.value,h.optSelected=o.selected,(n=w.createElement("input")).value="t",n.type="radio",h.radioValue="t"===n.value;var Cr,kr=b.expr.attrHandle,Tr=(b.fn.extend({attr:function(e,t){return p(this,b.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})}}),b.extend({attr:function(e,t,r){var i,a,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?b.prop(e,t,r):(1===o&&b.isXMLDoc(e)||(a=b.attrHooks[t.toLowerCase()]||(b.expr.match.bool.test(t)?Cr:void 0)),void 0!==r?null===r?void b.removeAttr(e,t):a&&"set"in a&&void 0!==(i=a.set(e,r,t))?i:(e.setAttribute(t,r+""),r):!(a&&"get"in a&&null!==(i=a.get(e,t)))&&null==(i=b.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){var r;if(!h.radioValue&&"radio"===t&&P(e,"input"))return r=e.value,e.setAttribute("type",t),r&&(e.value=r),t}}},removeAttr:function(e,t){var r,i=0,a=t&&t.match($);if(a&&1===e.nodeType)for(;r=a[i++];)e.removeAttribute(r)}}),Cr={set:function(e,t,r){return!1===t?b.removeAttr(e,r):e.setAttribute(r,r),r}},b.each(b.expr.match.bool.source.match(/\w+/g),function(e,t){var n=kr[t]||b.find.attr;kr[t]=function(e,t,r){var i,a,o=t.toLowerCase();return r||(a=kr[o],kr[o]=i,i=null!=n(e,t,r)?o:null,kr[o]=a),i}}),/^(?:input|select|textarea|button)$/i),xr=/^(?:a|area)$/i;function Ar(e){return(e.match($)||[]).join(" ")}function Jr(e){return e.getAttribute&&e.getAttribute("class")||""}function Gr(e){return Array.isArray(e)?e:"string"==typeof e&&e.match($)||[]}b.fn.extend({prop:function(e,t){return p(this,b.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[b.propFix[e]||e]})}}),b.extend({prop:function(e,t,r){var i,a,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&b.isXMLDoc(e)||(t=b.propFix[t]||t,a=b.propHooks[t]),void 0!==r?a&&"set"in a&&void 0!==(i=a.set(e,r,t))?i:e[t]=r:a&&"get"in a&&null!==(i=a.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=b.find.attr(e,"tabindex");return t?parseInt(t,10):Tr.test(e.nodeName)||xr.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(b.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode)&&e.parentNode.selectedIndex}}),b.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){b.propFix[this.toLowerCase()]=this}),b.fn.extend({addClass:function(t){var e,r,i,a,o,n;return v(t)?this.each(function(e){b(this).addClass(t.call(this,e,Jr(this)))}):(e=Gr(t)).length?this.each(function(){if(i=Jr(this),r=1===this.nodeType&&" "+Ar(i)+" "){for(o=0;o<e.length;o++)a=e[o],r.indexOf(" "+a+" ")<0&&(r+=a+" ");n=Ar(r),i!==n&&this.setAttribute("class",n)}}):this},removeClass:function(t){var e,r,i,a,o,n;return v(t)?this.each(function(e){b(this).removeClass(t.call(this,e,Jr(this)))}):arguments.length?(e=Gr(t)).length?this.each(function(){if(i=Jr(this),r=1===this.nodeType&&" "+Ar(i)+" "){for(o=0;o<e.length;o++)for(a=e[o];-1<r.indexOf(" "+a+" ");)r=r.replace(" "+a+" "," ");n=Ar(r),i!==n&&this.setAttribute("class",n)}}):this:this.attr("class","")},toggleClass:function(t,r){var e,i,a,o,n=typeof t,s="string"==n||Array.isArray(t);return v(t)?this.each(function(e){b(this).toggleClass(t.call(this,e,Jr(this),r),r)}):"boolean"==typeof r&&s?r?this.addClass(t):this.removeClass(t):(e=Gr(t),this.each(function(){if(s)for(o=b(this),a=0;a<e.length;a++)i=e[a],o.hasClass(i)?o.removeClass(i):o.addClass(i);else void 0!==t&&"boolean"!=n||((i=Jr(this))&&f.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",!i&&!1!==t&&f.get(this,"__className__")||""))}))},hasClass:function(e){for(var t,r=0,i=" "+e+" ";t=this[r++];)if(1===t.nodeType&&-1<(" "+Ar(Jr(t))+" ").indexOf(i))return!0;return!1}});function $r(e){e.stopPropagation()}var Er=/\r/g,Lr=(b.fn.extend({val:function(t){var r,e,i,a=this[0];return arguments.length?(i=v(t),this.each(function(e){1!==this.nodeType||(null==(e=i?t.call(this,e,b(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=b.map(e,function(e){return null==e?"":e+""})),(r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,e,"value"))||(this.value=e)})):a?(r=b.valHooks[a.type]||b.valHooks[a.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(a,"value"))?e:"string"==typeof(e=a.value)?e.replace(Er,""):null==e?"":e:void 0}}),b.extend({valHooks:{option:{get:function(e){var t=b.find.attr(e,"value");return null!=t?t:Ar(b.text(e))}},select:{get:function(e){for(var t,r=e.options,i=e.selectedIndex,a="select-one"===e.type,o=a?null:[],n=a?i+1:r.length,s=i<0?n:a?i:0;s<n;s++)if(((t=r[s]).selected||s===i)&&!t.disabled&&(!t.parentNode.disabled||!P(t.parentNode,"optgroup"))){if(t=b(t).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var r,i,a=e.options,o=b.makeArray(t),n=a.length;n--;)((i=a[n]).selected=-1<b.inArray(b.valHooks.option.get(i),o))&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<b.inArray(b(e).val(),t)}},h.checkOn||(b.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),S.location),Mr={guid:Date.now()},Ir=/\?/,Xr=(b.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{t=(new S.DOMParser).parseFromString(e,"text/xml")}catch(e){}return r=t&&t.getElementsByTagName("parsererror")[0],t&&!r||b.error("Invalid XML: "+(r?b.map(r.childNodes,function(e){return e.textContent}).join("\n"):e)),t},/^(?:focusinfocus|focusoutblur)$/),Dr=(b.extend(b.event,{trigger:function(e,t,r,i){var a,o,n,s,l,c,p,d=[r||w],u=B.call(e,"type")?e.type:e,g=B.call(e,"namespace")?e.namespace.split("."):[],m=p=o=r=r||w;if(3!==r.nodeType&&8!==r.nodeType&&!Xr.test(u+b.event.triggered)&&(-1<u.indexOf(".")&&(u=(g=u.split(".")).shift(),g.sort()),s=u.indexOf(":")<0&&"on"+u,(e=e[b.expando]?e:new b.Event(u,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:b.makeArray(t,[e]),c=b.event.special[u]||{},i||!c.trigger||!1!==c.trigger.apply(r,t))){if(!i&&!c.noBubble&&!D(r)){for(n=c.delegateType||u,Xr.test(n+u)||(m=m.parentNode);m;m=m.parentNode)d.push(m),o=m;o===(r.ownerDocument||w)&&d.push(o.defaultView||o.parentWindow||S)}for(a=0;(m=d[a++])&&!e.isPropagationStopped();)p=m,e.type=1<a?n:c.bindType||u,(l=(f.get(m,"events")||Object.create(null))[e.type]&&f.get(m,"handle"))&&l.apply(m,t),(l=s&&m[s])&&l.apply&&pt(m)&&(e.result=l.apply(m,t),!1===e.result)&&e.preventDefault();return e.type=u,i||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(d.pop(),t)||!pt(r)||s&&v(r[u])&&!D(r)&&((o=r[s])&&(r[s]=null),b.event.triggered=u,e.isPropagationStopped()&&p.addEventListener(u,$r),r[u](),e.isPropagationStopped()&&p.removeEventListener(u,$r),b.event.triggered=void 0,o)&&(r[s]=o),e.result}},simulate:function(e,t,r){r=b.extend(new b.Event,r,{type:e,isSimulated:!0});b.event.trigger(r,null,t)}}),b.fn.extend({trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r)return b.event.trigger(e,t,r,!0)}}),/\[\]$/),Fr=/\r?\n/g,Or=/^(?:submit|button|image|reset|file)$/i,Rr=/^(?:input|select|textarea|keygen)/i;b.param=function(e,t){function r(e,t){t=v(t)?t():t,a[a.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var i,a=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){r(this.name,this.value)});else for(i in e)!function r(i,e,a,o){if(Array.isArray(e))b.each(e,function(e,t){a||Dr.test(i)?o(i,t):r(i+"["+("object"==typeof t&&null!=t?e:"")+"]",t,a,o)});else if(a||"object"!==W(e))o(i,e);else for(var t in e)r(i+"["+t+"]",e[t],a,o)}(i,e[i],t,r);return a.join("&")},b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&Rr.test(this.nodeName)&&!Or.test(e)&&(this.checked||!Ct.test(e))}).map(function(e,t){var r=b(this).val();return null==r?null:Array.isArray(r)?b.map(r,function(e){return{name:t.name,value:e.replace(Fr,"\r\n")}}):{name:t.name,value:r.replace(Fr,"\r\n")}}).get()}});var Nr=/%20/g,Hr=/#.*$/,Br=/([?&])_=[^&]*/,Ur=/^(.*?):[ \t]*([^\r\n]*)$/gm,Vr=/^(?:GET|HEAD)$/,zr=/^\/\//,jr={},Wr={},qr="*/".concat("*"),Zr=w.createElement("a");function Kr(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var r,i=0,a=e.toLowerCase().match($)||[];if(v(t))for(;r=a[i++];)"+"===r[0]?(r=r.slice(1)||"*",(o[r]=o[r]||[]).unshift(t)):(o[r]=o[r]||[]).push(t)}}function Yr(t,i,a,o){var n={},s=t===Wr;function l(e){var r;return n[e]=!0,b.each(t[e]||[],function(e,t){t=t(i,a,o);return"string"!=typeof t||s||n[t]?s?!(r=t):void 0:(i.dataTypes.unshift(t),l(t),!1)}),r}return l(i.dataTypes[0])||!n["*"]&&l("*")}function Qr(e,t){var r,i,a=b.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((a[r]?e:i=i||{})[r]=t[r]);return i&&b.extend(!0,e,i),e}Zr.href=Lr.href,b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Lr.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Lr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qr,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Qr(Qr(e,b.ajaxSettings),t):Qr(b.ajaxSettings,e)},ajaxPrefilter:Kr(jr),ajaxTransport:Kr(Wr),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var l,c,p,r,d,u,g,i,m=b.ajaxSetup({},t=t||{}),h=m.context||m,_=m.context&&(h.nodeType||h.jquery)?b(h):b.event,f=b.Deferred(),v=b.Callbacks("once memory"),y=m.statusCode||{},a={},o={},n="canceled",P={readyState:0,getResponseHeader:function(e){var t;if(u){if(!r)for(r={};t=Ur.exec(p);)r[t[1].toLowerCase()+" "]=(r[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=r[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?p:null},setRequestHeader:function(e,t){return null==u&&(e=o[e.toLowerCase()]=o[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==u&&(m.mimeType=e),this},statusCode:function(e){if(e)if(u)P.always(e[P.status]);else for(var t in e)y[t]=[y[t],e[t]];return this},abort:function(e){e=e||n;return l&&l.abort(e),s(0,e),this}};if(f.promise(P),m.url=((e||m.url||Lr.href)+"").replace(zr,Lr.protocol+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match($)||[""],null==m.crossDomain){e=w.createElement("a");try{e.href=m.url,e.href=e.href,m.crossDomain=Zr.protocol+"//"+Zr.host!=e.protocol+"//"+e.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=b.param(m.data,m.traditional)),Yr(jr,m,t,P),!u){for(i in(g=b.event&&m.global)&&0==b.active++&&b.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Vr.test(m.type),c=m.url.replace(Hr,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(Nr,"+")):(e=m.url.slice(c.length),m.data&&(m.processData||"string"==typeof m.data)&&(c+=(Ir.test(c)?"&":"?")+m.data,delete m.data),!1===m.cache&&(c=c.replace(Br,"$1"),e=(Ir.test(c)?"&":"?")+"_="+Mr.guid+++e),m.url=c+e),m.ifModified&&(b.lastModified[c]&&P.setRequestHeader("If-Modified-Since",b.lastModified[c]),b.etag[c])&&P.setRequestHeader("If-None-Match",b.etag[c]),(m.data&&m.hasContent&&!1!==m.contentType||t.contentType)&&P.setRequestHeader("Content-Type",m.contentType),P.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+qr+"; q=0.01":""):m.accepts["*"]),m.headers)P.setRequestHeader(i,m.headers[i]);if(m.beforeSend&&(!1===m.beforeSend.call(h,P,m)||u))return P.abort();if(n="abort",v.add(m.complete),P.done(m.success),P.fail(m.error),l=Yr(Wr,m,t,P)){if(P.readyState=1,g&&_.trigger("ajaxSend",[P,m]),u)return P;m.async&&0<m.timeout&&(d=S.setTimeout(function(){P.abort("timeout")},m.timeout));try{u=!1,l.send(a,s)}catch(e){if(u)throw e;s(-1,e)}}else s(-1,"No Transport")}return P;function s(e,t,r,i){var a,o,n,s=t;u||(u=!0,d&&S.clearTimeout(d),l=void 0,p=i||"",P.readyState=0<e?4:0,i=200<=e&&e<300||304===e,r&&(n=((e,t,r)=>{for(var i,a,o,n,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){l.unshift(a);break}if(l[0]in r)o=l[0];else{for(a in r){if(!l[0]||e.converters[a+" "+l[0]]){o=a;break}n=n||a}o=o||n}if(o)return o!==l[0]&&l.unshift(o),r[o]})(m,P,r)),!i&&-1<b.inArray("script",m.dataTypes)&&b.inArray("json",m.dataTypes)<0&&(m.converters["text script"]=function(){}),n=((e,t,r,i)=>{var a,o,n,s,l,c={},p=e.dataTypes.slice();if(p[1])for(n in e.converters)c[n.toLowerCase()]=e.converters[n];for(o=p.shift();o;)if(e.responseFields[o]&&(r[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=p.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(n=c[l+" "+o]||c["* "+o]))for(a in c)if((s=a.split(" "))[1]===o&&(n=c[l+" "+s[0]]||c["* "+s[0]])){!0===n?n=c[a]:!0!==c[a]&&(o=s[0],p.unshift(s[1]));break}if(!0!==n)if(n&&e.throws)t=n(t);else try{t=n(t)}catch(e){return{state:"parsererror",error:n?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}})(m,n,P,i),i?(m.ifModified&&((r=P.getResponseHeader("Last-Modified"))&&(b.lastModified[c]=r),r=P.getResponseHeader("etag"))&&(b.etag[c]=r),204===e||"HEAD"===m.type?s="nocontent":304===e?s="notmodified":(s=n.state,a=n.data,i=!(o=n.error))):(o=s,!e&&s||(s="error",e<0&&(e=0))),P.status=e,P.statusText=(t||s)+"",i?f.resolveWith(h,[a,s,P]):f.rejectWith(h,[P,s,o]),P.statusCode(y),y=void 0,g&&_.trigger(i?"ajaxSuccess":"ajaxError",[P,m,i?a:o]),v.fireWith(h,[P,s]),g&&(_.trigger("ajaxComplete",[P,m]),--b.active||b.event.trigger("ajaxStop")))}},getJSON:function(e,t,r){return b.get(e,t,r,"json")},getScript:function(e,t){return b.get(e,void 0,t,"script")}}),b.each(["get","post"],function(e,a){b[a]=function(e,t,r,i){return v(t)&&(i=i||r,r=t,t=void 0),b.ajax(b.extend({url:e,type:a,dataType:i,data:t,success:r},b.isPlainObject(e)&&e))}}),b.ajaxPrefilter(function(e){for(var t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),b._evalUrl=function(e,t,r){return b.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){b.globalEval(e,t,r)}})},b.fn.extend({wrapAll:function(e){return this[0]&&(v(e)&&(e=e.call(this[0])),e=b(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(r){return v(r)?this.each(function(e){b(this).wrapInner(r.call(this,e))}):this.each(function(){var e=b(this),t=e.contents();t.length?t.wrapAll(r):e.append(r)})},wrap:function(t){var r=v(t);return this.each(function(e){b(this).wrapAll(r?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){b(this).replaceWith(this.childNodes)}),this}}),b.expr.pseudos.hidden=function(e){return!b.expr.pseudos.visible(e)},b.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},b.ajaxSettings.xhr=function(){try{return new S.XMLHttpRequest}catch(e){}};var ei={0:200,1223:204},ti=b.ajaxSettings.xhr(),ri=(h.cors=!!ti&&"withCredentials"in ti,h.ajax=ti=!!ti,b.ajaxTransport(function(a){var o,n;if(h.cors||ti&&!a.crossDomain)return{send:function(e,t){var r,i=a.xhr();if(i.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(r in a.xhrFields)i[r]=a.xhrFields[r];for(r in a.mimeType&&i.overrideMimeType&&i.overrideMimeType(a.mimeType),a.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)i.setRequestHeader(r,e[r]);o=function(e){return function(){o&&(o=n=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null,"abort"===e?i.abort():"error"===e?"number"!=typeof i.status?t(0,"error"):t(i.status,i.statusText):t(ei[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=o(),n=i.onerror=i.ontimeout=o("error"),void 0!==i.onabort?i.onabort=n:i.onreadystatechange=function(){4===i.readyState&&S.setTimeout(function(){o&&n()})},o=o("abort");try{i.send(a.hasContent&&a.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),b.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),b.ajaxTransport("script",function(r){var i,a;if(r.crossDomain||r.scriptAttrs)return{send:function(e,t){i=b("<script>").attr(r.scriptAttrs||{}).prop({charset:r.scriptCharset,src:r.url}).on("load error",a=function(e){i.remove(),a=null,e&&t("error"===e.type?404:200,e.type)}),w.head.appendChild(i[0])},abort:function(){a&&a()}}}),[]),ii=/(=)\?(?=&|$)|\?\?/,ai=(b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ri.pop()||b.expando+"_"+Mr.guid++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(e,t,r){var i,a,o,n=!1!==e.jsonp&&(ii.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ii.test(e.data)&&"data");if(n||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,n?e[n]=e[n].replace(ii,"$1"+i):!1!==e.jsonp&&(e.url+=(Ir.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||b.error(i+" was not called"),o[0]},e.dataTypes[0]="json",a=S[i],S[i]=function(){o=arguments},r.always(function(){void 0===a?b(S).removeProp(i):S[i]=a,e[i]&&(e.jsonpCallback=t.jsonpCallback,ri.push(i)),o&&v(a)&&a(o[0]),o=a=void 0}),"script"}),h.createHTMLDocument=((e=w.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===e.childNodes.length),b.parseHTML=function(e,t,r){var i;return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(h.createHTMLDocument?((i=(t=w.implementation.createHTMLDocument("")).createElement("base")).href=w.location.href,t.head.appendChild(i)):t=w),i=!r&&[],(r=We.exec(e))?[t.createElement(r[1])]:(r=Jt([e],t,i),i&&i.length&&b(i).remove(),b.merge([],r.childNodes)))},b.fn.load=function(e,t,r){var i,a,o,n=this,s=e.indexOf(" ");return-1<s&&(i=Ar(e.slice(s)),e=e.slice(0,s)),v(t)?(r=t,t=void 0):t&&"object"==typeof t&&(a="POST"),0<n.length&&b.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){o=arguments,n.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).always(r&&function(e,t){n.each(function(){r.apply(this,o||[e.responseText,t,e])})}),this},b.expr.pseudos.animated=function(t){return b.grep(b.timers,function(e){return t===e.elem}).length},b.offset={setOffset:function(e,t,r){var i,a,o,n,s=b.css(e,"position"),l=b(e),c={};"static"===s&&(e.style.position="relative"),o=l.offset(),i=b.css(e,"top"),n=b.css(e,"left"),s=("absolute"===s||"fixed"===s)&&-1<(i+n).indexOf("auto")?(a=(s=l.position()).top,s.left):(a=parseFloat(i)||0,parseFloat(n)||0),null!=(t=v(t)?t.call(e,r,b.extend({},o)):t).top&&(c.top=t.top-o.top+a),null!=t.left&&(c.left=t.left-o.left+s),"using"in t?t.using.call(e,c):l.css(c)}},b.fn.extend({offset:function(t){var e,r;return arguments.length?void 0===t?this:this.each(function(e){b.offset.setOffset(this,t,e)}):(r=this[0])?r.getClientRects().length?(e=r.getBoundingClientRect(),r=r.ownerDocument.defaultView,{top:e.top+r.pageYOffset,left:e.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,i=this[0],a={top:0,left:0};if("fixed"===b.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),r=i.ownerDocument,e=i.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===b.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((a=b(e).offset()).top+=b.css(e,"borderTopWidth",!0),a.left+=b.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-b.css(i,"marginTop",!0),left:t.left-a.left-b.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===b.css(e,"position");)e=e.offsetParent;return e||vt})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,a){var o="pageYOffset"===a;b.fn[t]=function(e){return p(this,function(e,t,r){var i;if(D(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===r)return i?i[a]:e[t];i?i.scrollTo(o?i.pageXOffset:r,o?r:i.pageYOffset):e[t]=r},t,e,arguments.length)}}),b.each(["top","left"],function(e,r){b.cssHooks[r]=or(h.pixelPosition,function(e,t){if(t)return t=ar(e,r),Qt.test(t)?b(e).position()[r]+"px":t})}),b.each({Height:"height",Width:"width"},function(n,s){b.each({padding:"inner"+n,content:s,"":"outer"+n},function(i,o){b.fn[o]=function(e,t){var r=arguments.length&&(i||"boolean"!=typeof e),a=i||(!0===e||!0===t?"margin":"border");return p(this,function(e,t,r){var i;return D(e)?0===o.indexOf("outer")?e["inner"+n]:e.document.documentElement["client"+n]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+n],i["scroll"+n],e.body["offset"+n],i["offset"+n],i["client"+n])):void 0===r?b.css(e,t,a):b.style(e,t,r,a)},s,r?e:void 0,r)}})}),b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,i){return this.on(t,e,r,i)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),b.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,r){b.fn[r]=function(e,t){return 0<arguments.length?this.on(r,null,e,t):this.trigger(r)}}),/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g),oi=(b.proxy=function(e,t){var r,i;if("string"==typeof t&&(i=e[t],t=e,e=i),v(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||b.guid++,i},b.holdReady=function(e){e?b.readyWait++:b.ready(!0)},b.isArray=Array.isArray,b.parseJSON=JSON.parse,b.nodeName=P,b.isFunction=v,b.isWindow=D,b.camelCase=E,b.type=W,b.now=Date.now,b.isNumeric=function(e){var t=b.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},b.trim=function(e){return null==e?"":(e+"").replace(ai,"$1")},S.jQuery),ni=S.$;return b.noConflict=function(e){return S.$===b&&(S.$=ni),e&&S.jQuery===b&&(S.jQuery=oi),b},void 0===X&&(S.jQuery=S.$=b),b},jquery.exports=e.document?t(e,!0):function(e){if(e.document)return t(e);throw new Error("jQuery requires a window with a document")}})(),jquery.exports),mg$$1=getDefaultExportFromCjs(jqueryExports);function noop(){}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return"function"==typeof e}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let src_url_equal_anchor;function src_url_equal(e,t){return e===t||((src_url_equal_anchor=src_url_equal_anchor||document.createElement("a")).href=t,e===src_url_equal_anchor.href)}function is_empty(e){return 0===Object.keys(e).length}function subscribe(e,...t){if(null==e){for(var r of t)r(void 0);return noop}let i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function get_store_value(e){let t;return subscribe(e,e=>t=e)(),t}function null_to_empty(e){return null==e?"":e}function append(e,t){e.appendChild(t)}function append_styles(e,t,r){var i,e=get_root_for_style(e);e.getElementById(t)||((i=element("style")).id=t,i.textContent=r,append_stylesheet(e,i))}function get_root_for_style(e){var t;return e?(t=e.getRootNode?e.getRootNode():e.ownerDocument)&&t.host?t:e.ownerDocument:document}function append_stylesheet(e,t){return append(e.head||e,t),t.sheet}function insert(e,t,r){e.insertBefore(t,r||null)}function detach(e){e.parentNode&&e.parentNode.removeChild(e)}function destroy_each(t,r){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(r)}function element(e){return document.createElement(e)}function svg_element(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function empty(){return text("")}function listen(e,t,r,i){return e.addEventListener(t,r,i),()=>e.removeEventListener(t,r,i)}function prevent_default(t){return function(e){return e.preventDefault(),t.call(this,e)}}function stop_propagation(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function attr(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function set_custom_element_data(e,t,r){var i=t.toLowerCase();i in e?e[i]="boolean"==typeof e[i]&&""===r||r:t in e?e[t]="boolean"==typeof e[t]&&""===r||r:attr(e,t,r)}function children(e){return Array.from(e.childNodes)}function set_data(e,t){e.data!==(t=""+t)&&(e.data=t)}function set_input_value(e,t){e.value=null==t?"":t}function set_style(e,t,r,i){null==r?e.style.removeProperty(t):e.style.setProperty(t,r,i?"important":"")}function toggle_class(e,t,r){e.classList.toggle(t,!!r)}function custom_event(e,t,{bubbles:r=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:i})}class HtmlTag{is_svg=!1;e=void 0;n=void 0;t=void 0;a=void 0;constructor(e=!1){this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,r=null){this.e||(this.is_svg?this.e=svg_element(t.nodeName):this.e=element(11===t.nodeType?"TEMPLATE":t.nodeName),this.t="TEMPLATE"!==t.tagName?t:t.content,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(("TEMPLATE"===this.e.nodeName?this.e.content:this.e).childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)insert(this.t,this.n[e],t)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(detach)}}let current_component;function set_current_component(e){current_component=e}function get_current_component(){if(current_component)return current_component;throw new Error("Function called outside component initialization")}function onMount(e){get_current_component().$$.on_mount.push(e)}function onDestroy(e){get_current_component().$$.on_destroy.push(e)}function createEventDispatcher(){let o=get_current_component();return(e,r,{cancelable:i=!1}={})=>{var a=o.$$.callbacks[e];if(a){let t=custom_event(e,r,{cancelable:i});return a.slice().forEach(e=>{e.call(o,t)}),!t.defaultPrevented}return!0}}function bubble(e,t){e=e.$$.callbacks[t.type];e&&e.slice().forEach(e=>e.call(this,t))}let dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve(),update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(e){render_callbacks.push(e)}function add_flush_callback(e){flush_callbacks.push(e)}let seen_callbacks=new Set,flushidx=0;function flush(){if(0===flushidx){var e=current_component;do{try{for(;flushidx<dirty_components.length;){var t=dirty_components[flushidx];flushidx++,set_current_component(t),update(t.$$)}}catch(e){throw dirty_components.length=0,flushidx=0,e}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){var r=render_callbacks[e];seen_callbacks.has(r)||(seen_callbacks.add(r),r())}}while(render_callbacks.length=0,dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(e)}}function update(e){var t;null!==e.fragment&&(e.update(),run_all(e.before_update),t=e.dirty,e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(add_render_callback))}function flush_render_callbacks(t){let r=[],i=[];render_callbacks.forEach(e=>(-1===t.indexOf(e)?r:i).push(e)),i.forEach(e=>e()),render_callbacks=r}let outroing=new Set,outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}function transition_out(e,t,r,i){e&&e.o?outroing.has(e)||(outroing.add(e),outros.c.push(()=>{outroing.delete(e),i&&(r&&e.d(1),i())}),e.o(t)):i&&i()}function ensure_array_like(e){return void 0!==e?.length?e:Array.from(e)}function destroy_block(e,t){e.d(1),t.delete(e.key)}function update_keyed_each(e,r,i,t,a,o,n,s,l,c,p,d){let u=e.length,g=o.length,m=u;for(var h={};m--;)h[e[m].key]=m;var _=[],f=new Map,v=new Map,y=[];for(m=g;m--;){let e=d(a,o,m);var P=i(e);let t=n.get(P);t?y.push(()=>t.p(e,r)):(t=c(P,e)).c(),f.set(P,_[m]=t),P in h&&v.set(P,Math.abs(m-h[P]))}var S=new Set,w=new Set;function b(e){transition_in(e,1),e.m(s,p),n.set(e.key,e),p=e.first,g--}for(;u&&g;){var C=_[g-1],k=e[u-1],T=C.key,x=k.key;C===k?(p=C.first,u--,g--):f.has(x)?!n.has(T)||S.has(T)?b(C):w.has(x)?u--:v.get(T)>v.get(x)?(w.add(T),b(C)):(S.add(x),u--):(l(k,n),u--)}for(;u--;){var A=e[u];f.has(A.key)||l(A,n)}for(;g;)b(_[g-1]);return run_all(y),_}function bind(e,t,r){t=e.$$.props[t];void 0!==t&&(e.$$.bound[t]=r)(e.$$.ctx[t])}function create_component(e){e&&e.c()}function mount_component(t,e,r){var{fragment:i,after_update:a}=t.$$;i&&i.m(e,r),add_render_callback(()=>{var e=t.$$.on_mount.map(run).filter(is_function);t.$$.on_destroy?t.$$.on_destroy.push(...e):run_all(e),t.$$.on_mount=[]}),a.forEach(add_render_callback)}function destroy_component(e,t){e=e.$$;null!==e.fragment&&(flush_render_callbacks(e.after_update),run_all(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function make_dirty(e,t){-1===e.$$.dirty[0]&&(dirty_components.push(e),schedule_update(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function init(i,e,t,r,a,o,n=null,s=[-1]){var l=current_component;set_current_component(i);let c=i.$$={fragment:null,ctx:[],props:o,update:noop,not_equal:a,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:blank_object(),dirty:s,skip_bound:!1,root:e.target||l.$$.root},p=(n&&n(c.root),!1);c.ctx=t?t(i,e.props||{},(e,t,...r)=>{r=r.length?r[0]:t;return c.ctx&&a(c.ctx[e],c.ctx[e]=r)&&(!c.skip_bound&&c.bound[e]&&c.bound[e](r),p)&&make_dirty(i,e),t}):[],c.update(),p=!0,run_all(c.before_update),c.fragment=!!r&&r(c.ctx),e.target&&(e.hydrate?(o=children(e.target),c.fragment&&c.fragment.l(o),o.forEach(detach)):c.fragment&&c.fragment.c(),e.intro&&transition_in(i.$$.fragment),mount_component(i,e.target,e.anchor),flush()),set_current_component(l)}class SvelteComponent{$$=void 0;$$set=void 0;$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,t){if(!is_function(t))return noop;let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{var e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}let PUBLIC_VERSION="4",subscriber_queue=("undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add(PUBLIC_VERSION),[]);function writable(i,a=noop){let o,n=new Set;function s(e){if(safe_not_equal(i,e)&&(i=e,o)){var t,e=!subscriber_queue.length;for(t of n)t[1](),subscriber_queue.push(t,i);if(e){for(let e=0;e<subscriber_queue.length;e+=2)subscriber_queue[e][0](subscriber_queue[e+1]);subscriber_queue.length=0}}}function l(e){s(e(i))}return{set:s,update:l,subscribe:function(e,t=noop){let r=[e,t];return n.add(r),1===n.size&&(o=a(s,l)||noop),e(i),()=>{n.delete(r),0===n.size&&o&&(o(),o=null)}}}}let rootScope={},Gm={};function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}Gm.activeView=writable(""),Gm.user=writable({}),Gm.accessToken=writable(""),Gm.organization=writable({}),Gm.tours=writable([]),Gm.appOnDomain=writable({}),Gm.loggedIn=writable(!1),Gm.appData=writable([]),Gm.allGuides=writable([]),Gm.activeAppData=writable({}),Gm.activeAppId=writable(""),Gm.allCategories=writable([]),Gm.subCategories=writable({}),Gm.breadCrumb=writable([]),Gm.breadcrumbCategories=writable([]),Gm.validatedSegments=writable({}),Gm.isSidePanelApp=writable(!1),Gm.isPageReloaded=writable(!1),Gm.guidePlayTracker=writable({}),Gm.showPlayer=writable(!1),Gm.accessibility=writable(!1),Gm.playedTour=writable([]),Gm.isMediaPlayerOn=writable(!1),Gm.pageTitle=writable(),Gm.route=writable("Home"),Gm.urlParts=writable({}),Gm.partUrl={},Gm.appList=writable([]),Gm.CurrentPage=writable("currentpage"),Gm.currentTour=writable({}),Gm.dialogBox=writable({}),Gm.showModal=writable({}),Gm.publishedTours=writable({}),Gm.CurrentPageTours=writable([]),Gm.MyGuidePageTours=writable([]),Gm.parent=writable(),Gm.categoryTours=writable([]),Gm.childCategories=writable(),Gm.isNotificationReqd=writable(!0),Gm.dShowAgain=writable(!1),Gm.wLater=writable(!1),Gm.loading=writable(!1),Gm.activeSortFilterStore=writable(),Gm.searchTours=writable([]),Gm.selectedBranch=writable(!1),Gm.selectedLang=writable("default"),Gm.lanDropDownVisible=writable(!1),Gm.miniPlayer=writable(!1),Gm.showNoTour=writable(!1),Gm.isTaskListVisible=writable(!1),Gm.isStepFrame=writable(!1),Gm.params=writable({}),Gm.routeAction=writable({}),Gm.filters=writable({}),Gm.statusBar=writable(""),Gm.labels=writable(rootScope.labels),Gm.slideState=writable({}),Gm.slideshowInstance=writable({}),Gm.isTourListRefresh=writable(!1),Gm.allTaskList=writable([]),Gm.taskListCount=writable(0),Gm.searchTerm=writable("");var localforage$1={exports:{}},localforageExports=(localforage$1.exports=function i(a,o,n){function s(r,e){if(!o[r]){if(!a[r]){var t="function"==typeof commonjsRequire&&commonjsRequire;if(!e&&t)return t(r,!0);if(l)return l(r,!0);e=new Error("Cannot find module '"+r+"'");throw e.code="MODULE_NOT_FOUND",e}t=o[r]={exports:{}};a[r][0].call(t.exports,function(e){var t=a[r][1][e];return s(t||e)},t,t.exports,i,a,o,n)}return o[r].exports}for(var l="function"==typeof commonjsRequire&&commonjsRequire,e=0;e<n.length;e++)s(n[e]);return s}({1:[function(e,c,t){!function(t){var e,r,i,a,o=t.MutationObserver||t.WebKitMutationObserver,n=o?(e=0,o=new o(l),r=t.document.createTextNode(""),o.observe(r,{characterData:!0}),function(){r.data=e=++e%2}):t.setImmediate||void 0===t.MessageChannel?"document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)}:((i=new t.MessageChannel).port1.onmessage=l,function(){i.port2.postMessage(0)}),s=[];function l(){a=!0;for(var e,t,r=s.length;r;){for(t=s,s=[],e=-1;++e<r;)t[e]();r=s.length}a=!1}c.exports=function(e){1!==s.push(e)||a||n()}}.call(this,void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){var a=e(1);function l(){}var c={},o=["REJECTED"],n=["FULFILLED"],i=["PENDING"];function s(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=i,this.queue=[],this.outcome=void 0,e!==l&&g(this,e)}function p(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function d(t,r,i){a(function(){var e;try{e=r(i)}catch(e){return c.reject(t,e)}e===t?c.reject(t,new TypeError("Cannot resolve promise with itself")):c.resolve(t,e)})}function u(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function g(t,e){var r=!1;function i(e){r||(r=!0,c.reject(t,e))}function a(e){r||(r=!0,c.resolve(t,e))}var o=m(function(){e(a,i)});"error"===o.status&&i(o.value)}function m(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=s).prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var r;return"function"!=typeof e&&this.state===n||"function"!=typeof t&&this.state===o?this:(r=new this.constructor(l),this.state!==i?d(r,this.state===n?e:t,this.outcome):this.queue.push(new p(r,e,t)),r)},p.prototype.callFulfilled=function(e){c.resolve(this.promise,e)},p.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},p.prototype.callRejected=function(e){c.reject(this.promise,e)},p.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},c.resolve=function(e,t){var r=m(u,t);if("error"===r.status)return c.reject(e,r.value);r=r.value;if(r)g(e,r);else{e.state=n,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},c.reject=function(e,t){e.state=o,e.outcome=t;for(var r=-1,i=e.queue.length;++r<i;)e.queue[r].callRejected(t);return e},s.resolve=function(e){if(e instanceof this)return e;return c.resolve(new this(l),e)},s.reject=function(e){var t=new this(l);return c.reject(t,e)},s.all=function(e){var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,a=!1;if(!i)return this.resolve([]);var o=new Array(i),n=0,t=-1,s=new this(l);for(;++t<i;)((e,t)=>{r.resolve(e).then(function(e){o[t]=e,++n!==i||a||(a=!0,c.resolve(s,o))},function(e){a||(a=!0,c.reject(s,e))})})(e[t],t);return s},s.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);var a=-1,o=new this(l);for(;++a<r;)(e=>{t.resolve(e).then(function(e){i||(i=!0,c.resolve(o,e))},function(e){i||(i=!0,c.reject(o,e))})})(e[a]);return o}},{1:1}],3:[function(t,e,r){!function(e){"function"!=typeof e.Promise&&(e.Promise=t(2))}.call(this,void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,X,D){var F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var s=(()=>{try{return"undefined"!=typeof indexedDB?indexedDB:"undefined"!=typeof webkitIndexedDB?webkitIndexedDB:"undefined"!=typeof mozIndexedDB?mozIndexedDB:"undefined"!=typeof OIndexedDB?OIndexedDB:"undefined"!=typeof msIndexedDB?msIndexedDB:void 0}catch(e){}})();function o(t,r){t=t||[],r=r||{};try{return new Blob(t,r)}catch(e){if("TypeError"!==e.name)throw e;for(var i=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),a=0;a<t.length;a+=1)i.append(t[a]);return i.getBlob(r.type)}}"undefined"==typeof Promise&&e(3);var g=Promise;function m(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function l(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function p(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function c(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var n="local-forage-detect-blob-support",t=void 0,d={},O=Object.prototype.toString,r="readonly",u="readwrite";function R(e){return"boolean"==typeof t?g.resolve(t):(i=e,new g(function(r){var e=i.transaction(n,u),t=o([""]);e.objectStore(n).put(t,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),r(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);r(t||!e||43<=parseInt(e[1],10))}}).catch(function(){return!1}).then(function(e){return t=e}));var i}function h(e){var e=d[e.name],r={};r.promise=new g(function(e,t){r.resolve=e,r.reject=t}),e.deferredOperations.push(r),e.dbReady?e.dbReady=e.dbReady.then(function(){return r.promise}):e.dbReady=r.promise}function _(e){e=d[e.name].deferredOperations.pop();e&&(e.resolve(),e.promise)}function f(e,t){e=d[e.name].deferredOperations.pop();if(e)return e.reject(t),e.promise}function i(a,o){return new g(function(t,r){if(d[a.name]=d[a.name]||U(),a.db){if(!o)return t(a.db);h(a),a.db.close()}var e=[a.name],i=(o&&e.push(a.version),s.open.apply(s,e));o&&(i.onupgradeneeded=function(t){var e=i.result;try{e.createObjectStore(a.storeName),t.oldVersion<=1&&e.createObjectStore(n)}catch(e){if("ConstraintError"!==e.name)throw e;console.warn('The database "'+a.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+a.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){var e=i.result;e.onversionchange=function(e){e.target.close()},t(e),_(a)}})}function v(e){return i(e,!1)}function y(e){return i(e,!0)}function P(e,t){var r,i,a;return!e.db||(r=!e.db.objectStoreNames.contains(e.storeName),a=e.version<e.db.version,i=e.version>e.db.version,a&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),(i||r)&&(r&&(a=e.db.version+1,e.version<a)&&(e.version=a),1))}function N(e){return o([(e=>{for(var t=e.length,r=new ArrayBuffer(t),i=new Uint8Array(r),a=0;a<t;a++)i[a]=e.charCodeAt(a);return r})(atob(e.data))],{type:e.type})}function H(e){return e&&e.__local_forage_encoded_blob}function B(e){var t=this,r=t._initReady().then(function(){var e=d[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return l(r,e,e),r}function S(t,r,i,a){void 0===a&&(a=1);try{var e=t.db.transaction(t.storeName,r);i(null,e)}catch(e){if(0<a&&(!t.db||"InvalidStateError"===e.name||"NotFoundError"===e.name))return g.resolve().then(function(){if(!t.db||"NotFoundError"===e.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),y(t)}).then(function(){return(r=>{h(r);for(var i=d[r.name],a=i.forages,e=0;e<a.length;e++){var t=a[e];t._dbInfo.db&&(t._dbInfo.db.close(),t._dbInfo.db=null)}return r.db=null,v(r).then(function(e){return r.db=e,P(r)?y(r):e}).then(function(e){r.db=i.db=e;for(var t=0;t<a.length;t++)a[t]._dbInfo.db=e}).catch(function(e){throw f(r,e),e})})(t).then(function(){S(t,r,i,a-1)})}).catch(i);i(e)}}function U(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}e={_driver:"asyncStorage",_initStorage:function(e){var i=this,a={db:null};if(e)for(var t in e)a[t]=e[t];var o=d[a.name],r=(o||(o=U(),d[a.name]=o),o.forages.push(i),i._initReady||(i._initReady=i.ready,i.ready=B),[]);function n(){return g.resolve()}for(var s=0;s<o.forages.length;s++){var l=o.forages[s];l!==i&&r.push(l._initReady().catch(n))}var c=o.forages.slice(0);return g.all(r).then(function(){return a.db=o.db,v(a)}).then(function(e){return a.db=e,P(a,i._defaultConfig.version)?y(a):e}).then(function(e){a.db=o.db=e,i._dbInfo=a;for(var t=0;t<c.length;t++){var r=c[t];r!==i&&(r._dbInfo.db=a.db,r._dbInfo.version=a.version)}})},_support:(()=>{try{var e,t;return s&&s.open?(e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code"),(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange):!1}catch(e){return!1}})(),iterate:function(n,e){var s=this,t=new g(function(a,o){s.ready().then(function(){S(s._dbInfo,r,function(e,t){if(e)return o(e);try{var r=t.objectStore(s._dbInfo.storeName).openCursor(),i=1;r.onsuccess=function(){var e,t=r.result;t?(H(e=t.value)&&(e=N(e)),void 0!==(e=n(e,t.key,i++))?a(e):t.continue()):a()},r.onerror=function(){o(r.error)}}catch(e){o(e)}})}).catch(o)});return m(t,e),t},getItem:function(o,e){var n=this,t=(o=p(o),new g(function(i,a){n.ready().then(function(){S(n._dbInfo,r,function(e,t){if(e)return a(e);try{var r=t.objectStore(n._dbInfo.storeName).get(o);r.onsuccess=function(){var e=r.result;H(e=void 0===e?null:e)&&(e=N(e)),i(e)},r.onerror=function(){a(r.error)}}catch(e){a(e)}})}).catch(a)}));return m(t,e),t},setItem:function(s,t,e){var l=this,r=(s=p(s),new g(function(o,n){var e;l.ready().then(function(){return e=l._dbInfo,"[object Blob]"===O.call(t)?R(e.db).then(function(e){return e?t:(i=t,new g(function(t,e){var r=new FileReader;r.onerror=e,r.onloadend=function(e){e=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:e,type:i.type})},r.readAsBinaryString(i)}));var i}):t}).then(function(a){S(l._dbInfo,u,function(e,t){if(e)return n(e);try{var r=t.objectStore(l._dbInfo.storeName),i=(null===a&&(a=void 0),r.put(a,s));t.oncomplete=function(){o(a=void 0===a?null:a)},t.onabort=t.onerror=function(){var e=i.error||i.transaction.error;n(e)}}catch(e){n(e)}})}).catch(n)}));return m(r,e),r},removeItem:function(o,e){var n=this,t=(o=p(o),new g(function(i,a){n.ready().then(function(){S(n._dbInfo,u,function(e,t){if(e)return a(e);try{var r=t.objectStore(n._dbInfo.storeName).delete(o);t.oncomplete=function(){i()},t.onerror=function(){a(r.error)},t.onabort=function(){var e=r.error||r.transaction.error;a(e)}}catch(e){a(e)}})}).catch(a)}));return m(t,e),t},clear:function(e){var o=this,t=new g(function(i,a){o.ready().then(function(){S(o._dbInfo,u,function(e,t){if(e)return a(e);try{var r=t.objectStore(o._dbInfo.storeName).clear();t.oncomplete=function(){i()},t.onabort=t.onerror=function(){var e=r.error||r.transaction.error;a(e)}}catch(e){a(e)}})}).catch(a)});return m(t,e),t},length:function(e){var o=this,t=new g(function(i,a){o.ready().then(function(){S(o._dbInfo,r,function(e,t){if(e)return a(e);try{var r=t.objectStore(o._dbInfo.storeName).count();r.onsuccess=function(){i(r.result)},r.onerror=function(){a(r.error)}}catch(e){a(e)}})}).catch(a)});return m(t,e),t},key:function(s,e){var l=this,t=new g(function(o,n){s<0?o(null):l.ready().then(function(){S(l._dbInfo,r,function(e,t){if(e)return n(e);try{var r=t.objectStore(l._dbInfo.storeName),i=!1,a=r.openKeyCursor();a.onsuccess=function(){var e=a.result;e?0===s||i?o(e.key):(i=!0,e.advance(s)):o(null)},a.onerror=function(){n(a.error)}}catch(e){n(e)}})}).catch(n)});return m(t,e),t},keys:function(e){var n=this,t=new g(function(a,o){n.ready().then(function(){S(n._dbInfo,r,function(e,t){if(e)return o(e);try{var r=t.objectStore(n._dbInfo.storeName).openKeyCursor(),i=[];r.onsuccess=function(){var e=r.result;e?(i.push(e.key),e.continue()):a(i)},r.onerror=function(){o(r.error)}}catch(e){o(e)}})}).catch(o)});return m(t,e),t},dropInstance:function(n,e){e=c.apply(this,arguments);var t=this.config();return(n="function"!=typeof n&&n||{}).name||(n.name=n.name||t.name,n.storeName=n.storeName||t.storeName),m(t=n.name?(t=n.name===t.name&&this._dbInfo.db?g.resolve(this._dbInfo.db):v(n).then(function(e){var t=d[n.name],r=t.forages;t.db=e;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=e;return e}),n.storeName?t.then(function(e){if(e.objectStoreNames.contains(n.storeName)){var a=e.version+1,i=(h(n),d[n.name]),o=i.forages;e.close();for(var t=0;t<o.length;t++){var r=o[t];r._dbInfo.db=null,r._dbInfo.version=a}return new g(function(t,r){var i=s.open(n.name,a);i.onerror=function(e){i.result.close(),r(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(n.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}}).then(function(e){i.db=e;for(var t=0;t<o.length;t++){var r=o[t];r._dbInfo.db=e,_(r._dbInfo)}}).catch(function(e){throw(f(n,e)||g.resolve()).catch(function(){}),e})}}):t.then(function(e){h(n);var r=d[n.name],i=r.forages;e.close();for(var t=0;t<i.length;t++)i[t]._dbInfo.db=null;return new g(function(t,r){var i=s.deleteDatabase(n.name);i.onerror=function(){var e=i.result;e&&e.close(),r(i.error)},i.onblocked=function(){console.warn('dropInstance blocked for database "'+n.name+'" until all open connections are closed')},i.onsuccess=function(){var e=i.result;e&&e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<i.length;t++)_(i[t]._dbInfo)}).catch(function(e){throw(f(n,e)||g.resolve()).catch(function(){}),e})})):g.reject("Invalid arguments"),e),t}};var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",V=/^~~local_forage_type~([^~]+)~/,b="__lfsc__:",C=b.length,k="arbf",T="blob",z=C+k.length,j=Object.prototype.toString;function W(e){for(var t,r,i,a,o=.75*e.length,n=e.length,s=0,o=("="===e[e.length-1]&&(o--,"="===e[e.length-2])&&o--,new ArrayBuffer(o)),l=new Uint8Array(o),c=0;c<n;c+=4)t=w.indexOf(e[c]),r=w.indexOf(e[c+1]),i=w.indexOf(e[c+2]),a=w.indexOf(e[c+3]),l[s++]=t<<2|r>>4,l[s++]=(15&r)<<4|i>>2,l[s++]=(3&i)<<6|63&a;return o}function x(e){for(var t=new Uint8Array(e),r="",i=0;i<t.length;i+=3)r=(r=(r=(r+=w[t[i]>>2])+w[(3&t[i])<<4|t[i+1]>>4])+w[(15&t[i+1])<<2|t[i+2]>>6])+w[63&t[i+2]];return t.length%3==2?r=r.substring(0,r.length-1)+"=":t.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var A={serialize:function(t,r){var e="";if(t&&(e=j.call(t)),t&&("[object ArrayBuffer]"===e||t.buffer&&"[object ArrayBuffer]"===j.call(t.buffer))){var i,a=b;t instanceof ArrayBuffer?(i=t,a+=k):(i=t.buffer,"[object Int8Array]"===e?a+="si08":"[object Uint8Array]"===e?a+="ui08":"[object Uint8ClampedArray]"===e?a+="uic8":"[object Int16Array]"===e?a+="si16":"[object Uint16Array]"===e?a+="ur16":"[object Int32Array]"===e?a+="si32":"[object Uint32Array]"===e?a+="ui32":"[object Float32Array]"===e?a+="fl32":"[object Float64Array]"===e?a+="fl64":r(new Error("Failed to get type for BinaryArray"))),r(a+x(i))}else if("[object Blob]"===e){a=new FileReader;a.onload=function(){var e="~~local_forage_type~"+t.type+"~"+x(this.result);r(b+T+e)},a.readAsArrayBuffer(t)}else try{r(JSON.stringify(t))}catch(e){console.error("Couldn't convert value into a JSON string: ",t),r(null,e)}},deserialize:function(e){if(e.substring(0,C)!==b)return JSON.parse(e);var t,r=e.substring(z),i=e.substring(C,z),a=(i===T&&V.test(r)&&(t=(e=r.match(V))[1],r=r.substring(e[0].length)),W(r));switch(i){case k:return a;case T:return o([a],{type:t});case"si08":return new Int8Array(a);case"ui08":return new Uint8Array(a);case"uic8":return new Uint8ClampedArray(a);case"si16":return new Int16Array(a);case"ur16":return new Uint16Array(a);case"si32":return new Int32Array(a);case"ui32":return new Uint32Array(a);case"fl32":return new Float32Array(a);case"fl64":return new Float64Array(a);default:throw new Error("Unkown type: "+i)}},stringToBuffer:W,bufferToString:x};function q(e,t,r,i){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,i)}function J(e,i,a,o,n,s){e.executeSql(a,o,n,function(e,r){r.code===r.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[i.storeName],function(e,t){t.rows.length?s(e,r):q(e,i,function(){e.executeSql(a,o,n,s)},s)},s):s(e,r)},s)}function Z(n,e,s,l){var c=this,t=(n=p(n),new g(function(a,o){c.ready().then(function(){var r=e=void 0===e?null:e,i=c._dbInfo;i.serializer.serialize(e,function(t,e){e?o(e):i.db.transaction(function(e){J(e,i,"INSERT OR REPLACE INTO "+i.storeName+" (key, value) VALUES (?, ?)",[n,t],function(){a(r)},function(e,t){o(t)})},function(e){e.code===e.QUOTA_ERR&&(0<l?a(Z.apply(c,[n,r,s,l-1])):o(e))})})}).catch(o)}));return m(t,s),t}var a={_driver:"webSQLStorage",_initStorage:function(e){var i=this,a={db:null};if(e)for(var t in e)a[t]="string"!=typeof e[t]?e[t].toString():e[t];var r=new g(function(t,r){try{a.db=openDatabase(a.name,String(a.version),a.description,a.size)}catch(e){return r(e)}a.db.transaction(function(e){q(e,a,function(){i._dbInfo=a,t()},function(e,t){r(t)})},r)});return a.serializer=A,r},_support:"function"==typeof openDatabase,iterate:function(c,e){var t=this,r=new g(function(l,r){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(e){J(e,s,"SELECT * FROM "+s.storeName,[],function(e,t){for(var r=t.rows,i=r.length,a=0;a<i;a++){var o=r.item(a),n=(n=o.value)&&s.serializer.deserialize(n);if(void 0!==(n=c(n,o.key,a+1)))return void l(n)}l()},function(e,t){r(t)})})}).catch(r)});return m(r,e),r},getItem:function(t,e){var o=this,r=(t=p(t),new g(function(i,a){o.ready().then(function(){var r=o._dbInfo;r.db.transaction(function(e){J(e,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[t],function(e,t){t=(t=t.rows.length?t.rows.item(0).value:null)&&r.serializer.deserialize(t);i(t)},function(e,t){a(t)})})}).catch(a)}));return m(r,e),r},setItem:function(e,t,r){return Z.apply(this,[e,t,r,1])},removeItem:function(a,e){var o=this,t=(a=p(a),new g(function(r,i){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){J(e,t,"DELETE FROM "+t.storeName+" WHERE key = ?",[a],function(){r()},function(e,t){i(t)})})}).catch(i)}));return m(t,e),t},clear:function(e){var a=this,t=new g(function(r,i){a.ready().then(function(){var t=a._dbInfo;t.db.transaction(function(e){J(e,t,"DELETE FROM "+t.storeName,[],function(){r()},function(e,t){i(t)})})}).catch(i)});return m(t,e),t},length:function(e){var a=this,t=new g(function(r,i){a.ready().then(function(){var t=a._dbInfo;t.db.transaction(function(e){J(e,t,"SELECT COUNT(key) as c FROM "+t.storeName,[],function(e,t){t=t.rows.item(0).c;r(t)},function(e,t){i(t)})})}).catch(i)});return m(t,e),t},key:function(a,e){var o=this,t=new g(function(r,i){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){J(e,t,"SELECT key FROM "+t.storeName+" WHERE id = ? LIMIT 1",[a+1],function(e,t){t=t.rows.length?t.rows.item(0).key:null;r(t)},function(e,t){i(t)})})}).catch(i)});return m(t,e),t},keys:function(e){var i=this,t=new g(function(a,r){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){J(e,t,"SELECT key FROM "+t.storeName,[],function(e,t){for(var r=[],i=0;i<t.rows.length;i++)r.push(t.rows.item(i).key);a(r)},function(e,t){r(t)})})}).catch(r)});return m(t,e),t},dropInstance:function(r,e){e=c.apply(this,arguments);var i=this.config(),a=((r="function"!=typeof r&&r||{}).name||(r.name=r.name||i.name,r.storeName=r.storeName||i.storeName),this),t=r.name?new g(function(e){var o,t=r.name===i.name?a._dbInfo.db:openDatabase(r.name,"","",0);r.storeName?e({db:t,storeNames:[r.storeName]}):e((o=t,new g(function(a,r){o.transaction(function(e){e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(e,t){for(var r=[],i=0;i<t.rows.length;i++)r.push(t.rows.item(i).name);a({db:o,storeNames:r})},function(e,t){r(t)})},function(e){r(e)})})))}).then(function(n){return new g(function(a,o){n.db.transaction(function(i){for(var e=[],t=0,r=n.storeNames.length;t<r;t++)e.push((t=>new g(function(e,r){i.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(e,t){r(t)})}))(n.storeNames[t]));g.all(e).then(function(){a()}).catch(function(e){o(e)})},function(e){o(e)})})}):g.reject("Invalid arguments");return m(t,e),t}};function K(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function Y(){return!(()=>{var e="_localforage_support_test";try{localStorage.setItem(e,!0),localStorage.removeItem(e)}catch(e){return 1}})()||0<localStorage.length}function Q(e,t){for(var r,i,a=e.length,o=0;o<a;){if((r=e[o])===(i=t)||"number"==typeof r&&"number"==typeof i&&isNaN(r)&&isNaN(i))return 1;o++}}var ee={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=K(e,this._defaultConfig),Y()?((this._dbInfo=t).serializer=A,g.resolve()):g.reject()},_support:(()=>{try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}})(),iterate:function(l,e){var c=this,t=c.ready().then(function(){for(var e=c._dbInfo,t=e.keyPrefix,r=t.length,i=localStorage.length,a=1,o=0;o<i;o++){var n=localStorage.key(o);if(0===n.indexOf(t)){var s=(s=localStorage.getItem(n))&&e.serializer.deserialize(s);if(void 0!==(s=l(s,n.substring(r),a++)))return s}}});return m(t,e),t},getItem:function(r,e){var i=this,t=(r=p(r),i.ready().then(function(){var e=i._dbInfo,t=localStorage.getItem(e.keyPrefix+r);return t=t&&e.serializer.deserialize(t)}));return m(t,e),t},setItem:function(n,e,t){var s=this,r=(n=p(n),s.ready().then(function(){var o=e=void 0===e?null:e;return new g(function(r,i){var a=s._dbInfo;a.serializer.serialize(e,function(e,t){if(t)i(t);else try{localStorage.setItem(a.keyPrefix+n,e),r(o)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}})})}));return m(r,t),r},removeItem:function(t,e){var r=this,i=(t=p(t),r.ready().then(function(){var e=r._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return m(i,e),i},clear:function(e){var i=this,t=i.ready().then(function(){for(var e=i._dbInfo.keyPrefix,t=localStorage.length-1;0<=t;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}});return m(t,e),t},length:function(e){var t=this.keys().then(function(e){return e.length});return m(t,e),t},key:function(r,e){var i=this,t=i.ready().then(function(){var t,e=i._dbInfo;try{t=localStorage.key(r)}catch(e){t=null}return t=t&&t.substring(e.keyPrefix.length)});return m(t,e),t},keys:function(e){var o=this,t=o.ready().then(function(){for(var e=o._dbInfo,t=localStorage.length,r=[],i=0;i<t;i++){var a=localStorage.key(i);0===a.indexOf(e.keyPrefix)&&r.push(a.substring(e.keyPrefix.length))}return r});return m(t,e),t},dropInstance:function(t,e){e=c.apply(this,arguments),(t="function"!=typeof t&&t||{}).name||(i=this.config(),t.name=t.name||i.name,t.storeName=t.storeName||i.storeName);var r=this,i=t.name?new g(function(e){t.storeName?e(K(t,r._defaultConfig)):e(t.name+"/")}).then(function(e){for(var t=localStorage.length-1;0<=t;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}}):g.reject("Invalid arguments");return m(i,e),i}},te=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},G={},re={},$={INDEXEDDB:e,WEBSQL:a,LOCALSTORAGE:ee},e=[$.INDEXEDDB._driver,$.WEBSQL._driver,$.LOCALSTORAGE._driver],E=["dropInstance"],L=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(E),ie={description:"",driver:e.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function M(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var i in r)r.hasOwnProperty(i)&&(te(r[i])?e[i]=r[i].slice():e[i]=r[i])}return e}function I(e){var t,r,i;if(!(this instanceof I))throw new TypeError("Cannot call a class as a function");for(t in $)$.hasOwnProperty(t)&&(i=(r=$[t])._driver,this[t]=i,G[i]||this.defineDriver(r));this._defaultConfig=M({},ie),this._config=M({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}I.prototype.config=function(e){if("object"!==(void 0===e?"undefined":F(e)))return"string"==typeof e?this._config[e]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)},I.prototype.defineDriver=function(u,e,t){var r=new g(function(t,r){try{var i=u._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(u._driver){for(var a=L.concat("_initStorage"),o=0,n=a.length;o<n;o++){var s=a[o];if((!Q(E,s)||u[s])&&"function"!=typeof u[s])return void r(e)}for(var l=0,c=E.length;l<c;l++){var p=E[l];u[p]||(u[p]=(t=>function(){var e=new Error("Method "+t+" is not implemented by the current driver"),e=g.reject(e);return m(e,arguments[arguments.length-1]),e})(p))}var d=function(e){G[i]&&console.info("Redefining LocalForage driver: "+i),G[i]=u,re[i]=e,t()};"_support"in u?u._support&&"function"==typeof u._support?u._support().then(d,r):d(!!u._support):d(!0)}else r(e)}catch(e){r(e)}});return l(r,e,t),r},I.prototype.driver=function(){return this._driver||null},I.prototype.getDriver=function(e,t,r){e=G[e]?g.resolve(G[e]):g.reject(new Error("Driver not found."));return l(e,t,r),e},I.prototype.getSerializer=function(e){var t=g.resolve(A);return l(t,e),t},I.prototype.ready=function(e){var t=this,r=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return l(r,e,e),r},I.prototype.setDriver=function(e,t,r){var o=this,i=(te(e)||(e=[e]),this._getSupportedDrivers(e));function n(){o._config.driver=o.driver()}function s(e){return o._extend(e),n(),o._ready=o._initStorage(o._config),o._ready}function a(a){return function(){var i=0;return function e(){for(;i<a.length;){var t=a[i];return i++,o._dbInfo=null,o._ready=null,o.getDriver(t).then(s).catch(e)}n();var r=new Error("No available storage method found.");return o._driverSet=g.reject(r),o._driverSet}()}}e=null!==this._driverSet?this._driverSet.catch(function(){return g.resolve()}):g.resolve();return this._driverSet=e.then(function(){var e=i[0];return o._dbInfo=null,o._ready=null,o.getDriver(e).then(function(e){o._driver=e._driver,n(),o._wrapLibraryMethodsWithReady(),o._initDriver=a(i)})}).catch(function(){n();var e=new Error("No available storage method found.");return o._driverSet=g.reject(e),o._driverSet}),l(this._driverSet,t,r),this._driverSet},I.prototype.supports=function(e){return!!re[e]},I.prototype._extend=function(e){M(this,e)},I.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];this.supports(a)&&t.push(a)}return t},I.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=L.length;e<t;e++)((t,r)=>{t[r]=function(){var e=arguments;return t.ready().then(function(){return t[r].apply(t,e)})}})(this,L[e])},I.prototype.createInstance=function(e){return new I(e)};a=new I;X.exports=a},{3:3}]},{},[4])(4),localforage$1.exports),localforage=getDefaultExportFromCjs(localforageExports);let storage={},str=(GmCXt.storageService=function(){function n(e){let t;return t=e&&GmCXt.isDefined(e)&&!isNaN(e)?Date.now()+1e3*e:Date.now()+864e6}function o(e){e={action:"mgPlayerJSPreview_action:save_user_info",data:e};GmCXt.sendToParentWindow(e),GmCXt.sendMessageToBackgroundService(e)}function s(e){e={action:"mgPlayerJSPreview_action:save_org",data:e};GmCXt.sendToParentWindow(e),GmCXt.sendMessageToBackgroundService(e)}let l=function(r){return new Promise(function(e,t){"user"===r?o(!1):"organization"===r&&s(!1),r=GmCXt.addStoragePrefix(r),localStorage.removeItem(r),localStorage.getItem(r+"_time")&&localStorage.removeItem(r+"_time"),e(!0)})};function e(){return new Promise(function(e,t){Object.keys(localStorage).forEach(function(e){l(e)}),o(!1),s(!1),e(!0)})}function c(i){return new Promise(function(e,t){var r=[],r=(r.push(i),{action:"mgPlayerJSPreview_action:remove_lxp_storage",data:r});GmCXt.sendToParentWindow(r),GmCXt.sendMessageToBackgroundService(r),e()})}var t={};return GmCXt.isLXP()?(t.get=function(n){return new Promise(function(o,e){try{let i=[],e=(i.push(n),"id"+Math.random());var t={action:"mgPlayerJSPreview_action:get_lxp_storage",data:{id:e,key:i}};let a=function(t){var r,t=GmCXt.parseMsg(t);if("mgPlayerJSPreview_action:receive_lxp_storage"===(t=GmCXt.convertMgdata(t)).action&&t.data.id===e){window.removeEventListener("message",a);let e=!1;GmCXt.isEmpty(t.data)?e=!1:(t=t.data.data[i[0]])&&(r=t.expires,t=t.val,r&&void 0!==r?r<Date.now()&&(c(n),e=!1):o(!1),t)&&void 0!==t&&GmCXt.isDefined(t)&&(e=t),o(e)}};window.addEventListener("message",a),GmCXt.sendToParentWindow(t),GmCXt.sendMessageToBackgroundService(t)}catch(e){GmCXt.showCookieDisabledPopup()}})},t.save=function(i,a,o){return new Promise(function(e,t){var r={},r=(r.key=i,r.data={},r.data.expires=n(o),r.data.val=a,{action:"mgPlayerJSPreview_action:set_lxp_storage",data:r});GmCXt.sendToParentWindow(r),GmCXt.sendMessageToBackgroundService(r),e()})},t.remove=c,t.reset=function(){return new Promise(function(e,t){var r={action:"mgPlayerJSPreview_action:reset_lxp_storage",data:{}};GmCXt.sendToParentWindow(r),GmCXt.sendMessageToBackgroundService(r),e()})},t.getString=function(n){return new Promise(function(t,e){let r=[],i=(r.push(n),"id"+Math.random());var a={action:"mgPlayerJSPreview_action:get_lxp_storage",data:{id:i,key:r}};let o=function(e){var e=GmCXt.parseMsg(e);"mgPlayerJSPreview_action:receive_lxp_storage"===(e=GmCXt.convertMgdata(e)).action&&e.data.id===i&&(window.removeEventListener("message",o),e=e.data.data[r[0]],GmCXt.isEmpty(e)?t(!1):t(e))};window.addEventListener("message",o),GmCXt.sendToParentWindow(a),GmCXt.sendMessageToBackgroundService(a)})},t.saveString=function(i,a){return new Promise(function(e,t){var r={},r=(r.key=i,r.data=a,{action:"mgPlayerJSPreview_action:set_lxp_storage",data:r});GmCXt.sendToParentWindow(r),GmCXt.sendMessageToBackgroundService(r),e()})}):(t.get=function(a){return new Promise(function(e,t){try{a=GmCXt.addStoragePrefix(a);var r=localStorage.getItem(a),i=localStorage.getItem(a+"_time");i&&void 0!==i?i<Date.now()&&(l(a),e(!1)):e(!1),r&&void 0!==r&&(r=GmCXt.parseJSON(r),GmCXt.isDefined(r))&&e(r),e(!1)}catch(e){GmCXt.showCookieDisabledPopup(),t(!1)}})},t.save=function(r,i,a){return new Promise(function(e,t){"user"===r?o(i):"organization"===r&&s(i),i=JSON.stringify(i),r=GmCXt.addStoragePrefix(r),localStorage.setItem(r,i),localStorage.setItem(r+"_time",n(a)),e(!0)})},t.remove=l,t.reset=e,t.getString=function(i){return new Promise(function(e,t){i=GmCXt.addStoragePrefix(i);var r=localStorage.getItem(i);e(!(!r||void 0===r)&&r)})},t.saveString=function(r,i){return new Promise(function(e,t){r=GmCXt.addStoragePrefix(r),localStorage.setItem(r,i),e(!0)})}),t},GmCXt.notifTours={get:function(){return new Promise(function(t,e){GmCXt.storage().get(["toursClosed","tourIdArray"]).then(function(e){GmCXt.log(10,"LOADED notifTours from storage",e),t(e)})})},set:function(r){return new Promise(function(e,t){GmCXt.storage().set({toursClosed:r.toursClosed,tourIdArray:r.tourIdArray}).then(function(){e()})})}},GmCXt.stepsPlayed={get:function(){return new Promise(function(t,e){GmCXt.storage().get(["stepsPlayed"]).then(function(e){t(e)})})},set:function(r){return new Promise(function(e,t){GmCXt.storage().set({stepsPlayed:r}).then(function(){e()})})}},storage.user={},storage.userList={},storage.organization={},storage.activeView={},storage.activeTab={},storage.appData={},storage.activeAppId={},storage.category={},storage.videosInProgress={},storage.activeLang={},storage.activeOrgKeys={},storage.activeVoice={},storage.userPrefLang={},storage.dual_auth_token={},storage.storageSyncTime={},storage.trackerSecrets={},storage.tour={},storage.breadCrumbItems={},storage.breadCrumb={},storage.currentPage={},storage.activeTourId={},storage.activeScreenCastTourId={},storage.edcastTermsAccepted={},storage.lastSsoRedirectTime={},storage.activeTaskTab={},storage.currentTour={},storage.testAuto={},storage.loginTime={},storage.notifTours={},storage.stepsPlayed={},storage.refreshTime={},storage.lastTimeStampSync={},storage.segmentData={},storage.segmentGroupData={},storage.edcastLogin={},storage.debugMode={},storage.allTourList={},storage.serverUpdates={},storage.activeSortFilter={},storage.refreshCache={},storage.currentStep={},storage.serverDeletes={},storage.taskList={},storage.pinnedToursList={},storage.toursModifiedTime={},storage.accessibility={},storage.otpCounter={},storage.confirmLinkGuidePub={},storage.languageList={},GmCXt.storageService()),dbName=GmCXt.conf.appName+GmCXt.conf.env+"DB",currentURL,dapStore=(GmCXt.isLXP()&&document.referrer&&(currentURL=GmCXt.filterUrlScheme(document.referrer).replaceAll(".",""),dbName+=currentURL),storage.getIndexedDbInstance=function(){return localforage.createInstance({name:dbName,storeName:"mgStore"})},storage.getIndexedDbInstance());function remove$1(e){str.remove(e)}function set(e,t,r){str.save(e,t,r)}function setString(e,t,r){str.saveString(e,t,r)}storage.clearIndexedDb=function(t){try{dapStore.clear()}catch(e){GmCXt.log(1,"ERROR: IndexedDb not cleared, "+t)}},storage.reset=function(){dapStore.clear(),str.reset()},GmCXt.FT.creatorApp&&(storage.showPlayer={},storage.showPlayer.set=function(e){(rootScope.showPlayer=e)&&(GmCXt.FT.creatorApp=!0,rootScope.FT.creatorApp=!0),set("playerMode",e)},storage.showPlayer.get=function(){return new Promise(function(e,t){str.get("playerMode").then(function(e){e?(rootScope.showPlayer=e,GmCXt.FT.creatorApp=!0,rootScope.FT.creatorApp=!0):rootScope.showPlayer=!1}),e()})}),storage.activeSortFilter.set=function(e){return rootScope.descOrder=e.descOrder,rootScope.activeSortFilter=e.activeSfilter,set("activeSortFilter",e)},storage.activeSortFilter.get=function(){return new Promise(function(t,e){str.get("activeSortFilter").then(function(e){Gm.activeSortFilterStore.set(e),t(e)})})},storage.activeSortFilter.remove=function(){remove$1("activeSortFilter")},storage.testAuto.set=function(){setString("testAuto",rootScope.testAuto=!0)},storage.refreshCache.set=function(e){return rootScope.refreshCache=e,set("refreshCache",JSON.stringify(e))},storage.refreshCache.get=function(){return new Promise(function(t,e){str.get("refreshCache").then(function(e){e&&!GmCXt.isEmpty(e)?rootScope.refreshCache=GmCXt.parseJSON(e):rootScope.refreshCache={},t(e)})})},storage.refreshCache.remove=function(){rootScope.refreshCache={},remove$1("refreshCache")},storage.testAuto.get=function(){return new Promise(function(e,t){str.getString("testAuto").then(function(e){rootScope.testAuto="true"===e}),e()})},storage.testAuto.remove=function(){rootScope.testAuto=null,remove$1("testAuto")},storage.userList.get=function(){return new Promise(function(t,e){str.get("userList").then(function(e){e?(rootScope.userList=e,t(e)):(rootScope.userList={},t({}))})})},storage.userList.set=function(e){e&&set("userList",rootScope.userList=e)},storage.userList.remove=function(){rootScope.userList={},remove$1("userList")},storage.user.get=function(){return new Promise(function(t,e){str.get("user").then(function(e){e?(GmCXt.updateGlobalUser(e),GmCXt.user=e,rootScope.user=e,rootScope.syncUser(),t(e)):(GmCXt.user={},rootScope.user=!1,t({})),e&&e.organization&&rootScope.saveOrganization(e.organization)})})},storage.user.set=function(e){e&&(GmCXt.updateGlobalUser(e),e=GmCXt.user,set("user",rootScope.user=e))},storage.user.remove=function(){GmCXt.user={},GmCXt.updateGlobalUser({}),remove$1("user")},storage.accessibility.get=function(){return new Promise(function(t,e){str.get("accessibility").then(function(e){rootScope.accessibility=e||!1,Gm.accessibility.set(rootScope.accessibility),rootScope.syncAccessibility(rootScope.accessibility),t(rootScope.accessibility)})})},storage.accessibility.set=function(e){rootScope.accessibility=e,Gm.accessibility.set(rootScope.accessibility),rootScope.syncAccessibility(rootScope.accessibility),set("accessibility",e)},storage.accessibility.remove=function(){rootScope.accessibility=!1,Gm.accessibility.set(rootScope.accessibility),rootScope.syncAccessibility(rootScope.accessibility),remove$1("accessibility")},storage.organization.get=function(){return new Promise(function(r,i){str.get("organization").then(function(e){var t=GmCXt.user;e?(GmCXt.updateGlobalOrg(e),rootScope.organization=e,r(e)):GmCXt.isEmpty(t)?(GmCXt.organization={},rootScope.organization=!1,r({})):t.organization?(rootScope.saveOrganization(t.organization),r(t.organization)):rootScope.fetchOrgFromAPI().then(function(){r(!0)}).catch(function(e){i(e)})})})},storage.organization.set=function(e){e&&(GmCXt.updateGlobalOrg(e),set("organization",rootScope.organization=e))},storage.organization.remove=function(){GmCXt.updateGlobalOrg({});var e=GmCXt.organization;rootScope.organization=e,remove$1("organization")},storage.activeView.set=function(e){e&&setString("activeView",e)},storage.activeView.get=function(){return new Promise(function(t,e){str.getString("activeView").then(function(e){e&&Gm.activeView.set(e),t(e)})})},storage.activeView.remove=function(){remove$1("activeView")},storage.activeTab.set=function(e){e&&setString("activeTab",rootScope.activeTab=e)},storage.activeTab.get=function(){return new Promise(function(t,e){str.getString("activeTab").then(function(e){rootScope.activeTab=e,t(e)})})},storage.activeTab.remove=function(){rootScope.activeTab=!1,remove$1("activeTab")},GmCXt.inPlayer?(storage.appData.set=function(e,t){rootScope.appList=e,GmCXt.appList=e,dapStore.setItem("appData",e)},storage.appData.get=function(){return new Promise(function(t,e){function r(e){rootScope.appList=e||{},GmCXt.appList=e||{},t(rootScope.appList),rootScope.syncApps(rootScope.appList)}dapStore.getItem("appData").then(function(e){r(e)}).catch(function(e){console.dir(e),r({})})})},storage.appData.remove=function(){rootScope.appList={},GmCXt.appList.set={},dapStore.removeItem("appData")}):(storage.appData.set=function(e){rootScope.appList=e,GmCXt.appList=e,rootScope.syncApps(e),set("appData",e)},storage.appData.get=function(){return new Promise(function(t,e){str.get("appData").then(function(e){rootScope.appList=e||{},GmCXt.appList=e||{},rootScope.syncApps(e),t(rootScope.appList)})})},storage.appData.remove=function(){rootScope.appList={},GmCXt.appList={},remove$1("appData")}),storage.activeAppId.set=function(e){e&&(rootScope.activeAppId=e,set("activeAppId",GmCXt.activeAppId=e),rootScope.syncAppId())},storage.activeAppId.get=function(){return new Promise(function(t,e){str.get("activeAppId").then(function(e){rootScope.activeAppId=e||null,GmCXt.activeAppId=rootScope.activeAppId,rootScope.syncAppId(),t(e)})})},storage.activeAppId.remove=function(){rootScope.activeAppId=!1,GmCXt.activeAppId=!1,remove$1("activeAppId"),rootScope.syncAppId()},GmCXt.inPlayer||(storage.category.get=function(e){return new Promise(function(e,t){dapStore.getItem("categories").then(function(e){e=e||{},rootScope.allCategories=e,rootScope.processCategories()}),e()})},storage.category.reset=function(e){return rootScope.allCategories=e,dapStore.setItem("categories",e)},storage.category.remove=function(){dapStore.removeItem("categories")}),storage.videosInProgress.get=function(){return new Promise(function(t,e){str.get("videosInProgress").then(function(e){e&&(rootScope.tourVideoInProgressArr=e),t(e)})})},storage.videosInProgress.set=function(e){set("videosInProgress",e)},storage.activeLang.set=function(e){rootScope.language=e,setString("activeLang",GmCXt.language=e)},storage.activeLang.get=function(){return new Promise(function(t,e){str.getString("activeLang").then(function(e){GmCXt.isFalse(e)||(rootScope.language=e,GmCXt.language=e),t(e)})})},storage.activeLang.remove=function(){rootScope.language=!1,GmCXt.language=!1,remove$1("activeLang")},storage.activeOrgKeys.set=function(e){setString("activeOrgKeys",e)},storage.activeOrgKeys.get=function(){return new Promise(function(t,e){str.getString("activeOrgKeys").then(function(e){t(e)})})},storage.activeOrgKeys.remove=function(){remove$1("activeOrgKeys")},storage.activeVoice.set=function(e){rootScope.languageVoice=e,str.saveString("activeVoice",e)},storage.activeVoice.get=function(){return new Promise(function(t,e){str.getString("activeVoice").then(function(e){GmCXt.isFalse(e)||(rootScope.languageVoice=e),t(e)})})},storage.userPrefLang.set=function(e){rootScope.userPrefLang=e,str.saveString("userPrefLang",e)},storage.userPrefLang.get=function(){return new Promise(function(t,e){str.getString("userPrefLang").then(function(e){GmCXt.isFalse(e)||(rootScope.userPrefLang=e),t(e)})})},storage.activeVoice.remove=function(){rootScope.languageVoice=!1,remove$1("activeVoice")},storage.dual_auth_token.set=function(e,t){set("dual_auth_token",e,t)},storage.dual_auth_token.get=function(){return new Promise(function(t,e){str.get("dual_auth_token").then(function(e){t(e)})})},storage.storageSyncTime.set=function(e){set("storageSyncTime",e)},storage.storageSyncTime.get=function(){return new Promise(function(t,e){str.get("storageSyncTime").then(function(e){t(e)})})},storage.storageSyncTime.remove=function(){remove$1("storageSyncTime")},storage.trackerSecrets.set=function(e){rootScope.trackerSecrets=e,set("trackerSecrets",GmCXt.trackerUtil.secrets=e);e={action:"mgPlayerJSPreview_action:update_secrets",data:{secrets:GmCXt.trackerUtil.secrets}};rootScope.isClientJs?GmCXt.sendToParentWindow(e):GmCXt.sendMessageToBackgroundService(e)},storage.trackerSecrets.get=function(){return new Promise(function(r,e){str.get("trackerSecrets").then(function(e){rootScope.trackerSecrets=e||{},GmCXt.trackerUtil.secrets=e||{};var t={action:"mgPlayerJSPreview_action:update_secrets",data:{secrets:GmCXt.trackerUtil.secrets}};rootScope.isClientJs?GmCXt.sendToParentWindow(t):GmCXt.sendMessageToBackgroundService(t),r(e)})})},storage.segmentData.set=function(e){rootScope.segmentData=e.list,set("segmentData",e)},storage.segmentData.get=function(){return new Promise(function(r,e){str.get("segmentData").then(function(e){var t;e?(t=e.time+GmCXt.t.syncSegment,Date.now()<t?(rootScope.segmentData=e.list,r(e.list)):rootScope.getSegmentsList().then(function(){r(rootScope.segmentData)})):(rootScope.segmentData=[],r(rootScope.segmentData))})})},storage.segmentData.remove=function(){rootScope.segmentData=[],remove$1("segmentData")},storage.segmentGroupData.set=function(e){rootScope.allSegments=e.list,set("segmentGroupData",e),rootScope.syncSegmentData()},storage.segmentGroupData.get=function(){return new Promise(function(r,e){function i(){rootScope.allSegments=[],r([])}str.get("segmentGroupData").then(function(e){var t;e&&(t=e.time+GmCXt.t.syncSegment,Date.now()<t)?(r(e.list),rootScope.allSegments=e.list,rootScope.syncSegmentData()):i()})})},storage.segmentGroupData.remove=function(){rootScope.allSegments=[],rootScope.syncSegmentData(),remove$1("segmentGroupData")},storage.breadCrumb.set=function(e){set("breadCrumb",e)},storage.breadCrumb.get=function(){return new Promise(function(t,e){str.get("breadCrumb").then(function(e){Gm.breadCrumb.set(e),t(e)})})},storage.breadCrumb.remove=function(){remove$1("breadCrumb")},storage.breadCrumbItems.set=function(e){set("breadCrumbItems",rootScope.breadCrumbItems=e)},storage.breadCrumbItems.get=function(){return new Promise(function(t,e){str.get("breadCrumbItems").then(function(e){rootScope.breadCrumbItems=e,t(e)})})},storage.breadCrumbItems.remove=function(){remove$1("breadCrumbItems")},storage.currentPage.set=function(e){setString("currentPage",e)},storage.currentPage.get=function(){return new Promise(function(t,e){str.getString("currentPage").then(function(e){Gm.CurrentPage.set(e),t(e)})})},storage.currentPage.remove=function(){rootScope.setCurrentPage(""),remove$1("currentPage")},storage.activeTourId.set=function(e){set("activeTourId",rootScope.activeTourId=e)},storage.activeTourId.get=function(){return new Promise(function(t,e){str.get("activeTourId").then(function(e){rootScope.activeTourId=e,t(e)})})},storage.activeTourId.remove=function(){rootScope.activeTourId=0,remove$1("activeTourId")},storage.activeScreenCastTourId.set=function(e){set("activeScreenCastTourId",rootScope.activeScreenCastTourId=e)},storage.activeScreenCastTourId.get=function(){return new Promise(function(t,e){str.get("activeScreenCastTourId").then(function(e){rootScope.activeScreenCastTourId=e,t(e)})})},storage.activeScreenCastTourId.remove=function(){rootScope.activeScreenCastTourId=0,remove$1("activeScreenCastTourId")},storage.edcastTermsAccepted.set=function(e){set("edcastTermsAccepted",e)},storage.edcastTermsAccepted.get=function(){return new Promise(function(t,e){str.get("edcastTermsAccepted").then(function(e){t(e)})})},storage.lastSsoRedirectTime.set=function(e){set("lastSsoRedirectTime",e)},storage.lastSsoRedirectTime.get=function(){return new Promise(function(t,e){str.get("lastSsoRedirectTime").then(function(e){t(e)})})},storage.confirmLinkGuidePub.set=function(e){set("confirmLinkGuidePub",e)},storage.confirmLinkGuidePub.get=function(){return new Promise(function(t,e){str.get("confirmLinkGuidePub").then(function(e){t(e)})})},storage.confirmLinkGuidePub.remove=function(){remove$1("confirmLinkGuidePub")},storage.activeTaskTab.set=function(e){set("activeTaskTab",e)},storage.activeTaskTab.get=function(){return new Promise(function(t,e){str.get("activeTaskTab").then(function(e){t(e)})})},storage.currentTour.set=function(e){rootScope.currentTour=e,dapStore.setItem("currentTour",e)},storage.currentTour.get=function(){return new Promise(function(t,e){dapStore.getItem("currentTour").then(function(e){rootScope.currentTour=e||{},Gm.currentTour.set(e),t(e)})})},storage.currentTour.remove=function(){rootScope.currentTour={},dapStore.removeItem("currentTour")},storage.currentStep.set=function(e){set("currentStep",rootScope.currentStep=e)},storage.currentStep.get=function(){return new Promise(function(t,e){str.get("currentStep").then(function(e){rootScope.currentStep=e,t(e)})})},storage.currentStep.remove=function(){rootScope.currentStep=!1,remove$1("currentStep")},storage.loginTime.set=function(e){set("loginTime",rootScope.loginTime=e)},storage.loginTime.get=function(){return new Promise(function(t,e){str.get("loginTime").then(function(e){rootScope.loginTime=e,t(e)})})},storage.loginTime.remove=function(){rootScope.loginTime=!1,remove$1("loginTime")},storage.refreshTime.set=function(e){set("refreshTime",rootScope.refreshTime=e)},storage.refreshTime.get=function(){return new Promise(function(t,e){str.get("refreshTime").then(function(e){rootScope.refreshTime=e||0,t(e)})})},storage.refreshTime.remove=function(){rootScope.refreshTime=null,remove$1("refreshTime")},storage.lastTimeStampSync.set=function(e){set("lastTimeStampSync",rootScope.lastTimeStampSync=e)},storage.lastTimeStampSync.get=function(){return new Promise(function(t,e){str.get("lastTimeStampSync").then(function(e){rootScope.lastTimeStampSync=e||0,t(e)})})},storage.lastTimeStampSync.remove=function(){rootScope.lastTimeStampSync=null,remove$1("lastTimeStampSync")},storage.edcastLogin.set=function(e){rootScope.edLogin=e,set("edcastLogin",GmCXt.edcastLogin=e)},storage.edcastLogin.get=function(){return new Promise(function(t,e){str.get("edcastLogin").then(function(e){rootScope.edLogin=e,GmCXt.edcastLogin=rootScope.edLogin,t(rootScope.edLogin)})})},storage.edcastLogin.remove=function(){rootScope.edLogin=null,remove$1("edcastLogin")},storage.debugMode.set=function(e){rootScope.debugMode=e,GmCXt.debugMode=e,set(GmCXt.getDebugKey(),e)},storage.debugMode.get=function(){return new Promise(function(t,e){str.get(GmCXt.getDebugKey()).then(function(e){rootScope.debugMode=e,GmCXt.debugMode=rootScope.debugMode,t(rootScope.debugMode)})})},storage.debugMode.remove=function(){rootScope.debugMode=null,remove$1(GmCXt.getDebugKey())},storage.toursModifiedTime.set=function(e){set("toursModifiedTime",rootScope.toursModifiedTime=e)},storage.toursModifiedTime.get=function(){return new Promise(function(t,e){str.get("toursModifiedTime").then(function(e){rootScope.toursModifiedTime=e||{},t(e)})})},storage.notifTours.get=GmCXt.notifTours.get,storage.notifTours.set=GmCXt.notifTours.set,storage.allTourList.get=function(){return new Promise(function(t,e){dapStore.getItem("allTourList").then(function(e){rootScope.allTourList=e||{},t(rootScope.allTourList)}).catch(function(e){console.dir(e)})})},storage.allTourList.set=function(r){return new Promise(function(e,t){rootScope.allTourList=r||{},dapStore.setItem("allTourList",rootScope.allTourList)})},storage.allTourList.remove=function(){rootScope.allTourList={},dapStore.removeItem("allTourList")},storage.languageList.get=function(){return new Promise(function(t,e){dapStore.getItem("languageList").then(function(e){rootScope.languageList=e||{},t(rootScope.languageList)}).catch(function(e){console.dir(e)})})},storage.languageList.set=function(r){return new Promise(function(e,t){rootScope.languageList=r||{},dapStore.setItem("languageList",rootScope.languageList)})},storage.languageList.remove=function(){rootScope.languageList={},dapStore.removeItem("languageList")},storage.serverUpdates.set=function(e){rootScope.serverUpdates=e||{},dapStore.setItem("serverUpdates",e)},storage.serverUpdates.get=function(){return new Promise(function(t,e){dapStore.getItem("serverUpdates").then(function(e){rootScope.serverUpdates=e||{},t()})})},storage.serverUpdates.remove=function(){rootScope.serverUpdates={},dapStore.removeItem("serverUpdates")},storage.serverDeletes.set=function(e){rootScope.serverDeletes=e,dapStore.setItem("serverDeletes",e)},storage.serverDeletes.get=function(){return new Promise(function(e,t){dapStore.getItem("serverDeletes").then(function(e){rootScope.serverDeletes=e||{categories:[],tours:[]}}),e()})},storage.serverDeletes.remove=function(){rootScope.serverDeletes={categories:[],tours:[]},dapStore.removeItem("serverDeletes")},storage.taskList.set=function(e,t){var r=GmCXt.getBaseAppId(),t={list:e,time:t=GmCXt.isEmpty(t)?Date.now():t};rootScope.taskList=e,dapStore.setItem("taskList_"+r,t)},storage.taskList.get=function(){return new Promise(function(t,e){var r=GmCXt.getBaseAppId();dapStore.getItem("taskList_"+r).then(function(e){!e||GmCXt.isEmpty(e)?(rootScope.taskList=null,t(null)):(e=rootScope.syncTaskList(e),rootScope.taskList=e.list,t(e))}).catch(function(e){rootScope.taskList=null,t(null)})})},storage.taskList.remove=function(){rootScope.taskList=[],dapStore.removeItem("taskList_"+GmCXt.getBaseAppId())},storage.pinnedToursList.set=function(e){rootScope.pinnedToursList=e,dapStore.setItem("pinnedToursList",e)},storage.pinnedToursList.get=function(){return new Promise(function(t,e){dapStore.getItem("pinnedToursList").then(function(e){rootScope.pinnedToursList=e||{},t(e)})})},storage.pinnedToursList.remove=function(){rootScope.pinnedToursList={},dapStore.removeItem("pinnedToursList")},storage.stepsPlayed.get=GmCXt.stepsPlayed.get,storage.stepsPlayed.set=GmCXt.stepsPlayed.set;let setChromeStorage=function(e,t){chrome.storage.local.set(t,function(){e()})},setFirefoxStorage=function(t,e){browser.storage.local.set(e).then(function(e){t()}).catch(onError)},setSafariStorage=function(e,t){for(var r in t)localStorage.setItem(r,t[r]);e()},getChromeStorage=function(i,e){chrome.storage.local.get(e,function(e){var t,r={};for(t in e)r[GmCXt.removeStoragePrefix(t)]=e[t];i(r)})},getFirefoxStorage=function(t,e){browser.storage.local.get(e).then(function(e){t(e)}).catch(onError)},getSafariExtStorage=function(t,r){for(let e=0;e<k.length;e++){var i,a={};for(i in r)a[GmCXt.removeStoragePrefix(i)]=localStorage.getItem(i);t(a)}},setExtStorage=function(a){return new Promise(function(e,t){var r,i={};for(r in a)i[GmCXt.addStoragePrefix(r)]=a[r];switch(rootScope.browserApp){case"chrome":setChromeStorage(e,i);break;case"firefox":setFirefoxStorage(e,i);break;case"safari":setSafariStorage(e,i);break;default:t()}},501)},getExtStorage=function(r){return new Promise(function(e,t){for(let e=0;e<r.length;e++)r[e]=GmCXt.addStoragePrefix(r[e]);switch(rootScope.browserApp){case"chrome":getChromeStorage(e,r);break;case"firefox":getFirefoxStorage(e,r);break;case"safari":getSafariExtStorage(res,r);break;default:t()}})},mgError$1=(storage.get=function(e){if(GmCXt.isExtension())return getExtStorage(e)},storage.set=function(e){if(GmCXt.isExtension())return setExtStorage(e)},{});function isContextError(e){return!(!(e=e.toString())||-1===e.indexOf("Extension context invalidated"))}function showErrorMsg(e,t){Gm.loading.set(!1),rootScope.settingsLoader=!1,t&&(e=e+" (Error: "+t+")"),rootScope.showPopup(e,"","alert")}mgError$1.show=function(e,t){e=(e=isContextError(e)?rootScope.labels.extensionContextError:e)+(t?" (Error: "+t+") ":"");rootScope.showPopup(e,"","error")},mgError$1.try=function(e,t){try{return e()}catch(e){mgError$1.show(e,t)}},mgError$1.on=function(t,r){if(rootScope.isApiCallOn=!1,null!=t){var i=parseInt(t.code);if(2036===i&&(0<t.url.indexOf("user/signout")||0<t.url.indexOf("user/token")))return rootScope.clearSession(),rootScope.showWidget(),!1;let e="";switch(!0){case 3044===i:showErrorMsg(rootScope.labels.segmentationRequired,i);break;case 1001===i:showErrorMsg(rootScope.labels.notAutorised,i);break;case 1003===i:e=rootScope.labels[1003]+"(Error:"+i+")",rootScope.showPopup(e,function(){rootScope.clearSession("1003: Access token invalid")},"error");break;case 1007===i:rootScope.getAccessTokenFromRefreshToken(r,t);break;case 1005===i:"Organization not found"===t.message[0]?showErrorMsg(rootScope.labels.orgError,i):showErrorMsg(rootScope.labels[i],i);break;case 1009===i:showErrorMsg(rootScope.labels.signInVerifyYourEmail,i);break;case 2001===i:rootScope.loginInvalidCred=!0;break;case 3045===i:break;case 3061===i:showErrorMsg(rootScope.labels[i]);break;case 2004===i:e=rootScope.labels[2004]+"(Error:"+i+")",rootScope.showPopup(e,function(){rootScope.clearSession("2004: Session Expired")},"error");break;case 3063===i:t&&-1===t.url.indexOf("task_list")&&showErrorMsg(rootScope.labels.applicationJsonError,i);break;case 2200===i:case 405===i:case 3008===i:case 1019===i:case 2044===i:case 3068===i:case 1017===i:case 1018===i:case 2e3===i:case 429===i:case 2002<=i&&i<=2099:case 3e3<=i&&i<=3099:case 4e3<=i&&i<=4099:showErrorMsg(rootScope.labels[i],i);break;case 1014===i:GmCXt.redirect("#/maintenance");break;case 403===i&&t.message[0]===GmCXt.unknownError:showErrorMsg(rootScope.labels.lostInternetConnection,i);break;default:rootScope.showPopup(rootScope.labels.apiError,function(){(GmCXt.user||GmCXt.onPrem())&&GmCXt.redirect("#/home/currentpage")},"error")}}else showErrorMsg(rootScope.labels.lostInternetConnection,c)};let api$1={};function processApi(e,t){let r=e.url.replace(GmCXt.conf.webServiceUrl,"");var i={serviceName:r=-1!==r.indexOf("?")?r.split("?")[0]:r,method:e.method_type,data:e.params,onSuccess:t};"GET"===e.method_type?api$1.get_(i).then(e=>{t&&t(e)}):api$1.post_(i)}function addCdnUrl(e){var e=GmCXt.conf.jsonStorageUrl+GmCXt.orgBucket+"/"+e,t=api$1.user();return t?e+t.cdn_signature+"&v="+Date():e}api$1.user=function(){return GmCXt.user},api$1.orgId=function(){return api$1.user().organization_id},api$1.appId=function(){return GmCXt.activeAppId},api$1.getHeaders=function(e){let t="";var r={"Content-Type":"application/json","x-mg-host":t=GmCXt.isEmpty(GmCXt.urlParts)?t:GmCXt.urlParts.host,"x-mg-source":GmCXt.conf.appName,"x-mg-orgId":""};let i="",a="";var o=GmCXt.user;return o&&o.accesstoken&&(i=o.accesstoken),o&&o.refreshtoken&&(a=o.refreshtoken),!e.serviceName||-1===e.serviceName.indexOf("user/signout")&&-1===e.serviceName.indexOf("user/token")?e.serviceName&&-1!==e.serviceName.indexOf("user/sso/login")||"user/sso/autologin"===e.serviceName?(r.Authorization=e.data.myGuideOrgKey,delete e.data.myGuideOrgKey):"user/signin/edcast"===e.serviceName?(r.EdcastToken=e.data.EdcastToken,delete e.data.EdcastToken):r.AccessToken=i:r.RefreshToken=a,r.appType=GmCXt.conf.appType,o&&(r.userId=o.user_id,r.orgId=o.organization_id,r["x-mg-orgId"]=o.organization_id),r},api$1.fetch=function(e){return new Promise(function(t,r){fetch(e.url,{method:e.method,headers:e.headers,body:JSON.stringify(e.data)}).then(e=>{t(e.json())}).catch(function(e){e.stack&&(e.data=GmCXt.getCodeError()),r(e.data)})})},api$1.xhrDesktopApp=function(e){return new Promise(function(t,r){mg$$1.ajax({url:e.url,data:e.data,method:e.method,success:function(e){e&&t(e)},error:function(e){r(e)}})})},api$1.get_=function(a){let o={url:GmCXt.conf.webServiceUrl+a.serviceName,method:a.method,headers:api$1.getHeaders(a),params:a.data};function r(e){processApi(e,a.cb)}function n(e){var t;e=e||GmCXt.getDefaultError(),(t=e).url=o.url,t.params=o.params,t.method_type=o.method,a.onSuccess&&(t.successCb=a.onSuccess),e=t,Gm.loading.set(!1),1007===e.code?mgError$1.on(e,r):3033!==e.code&&mgError$1.on(e)}return new Promise(function(r,i){o.url=GmCXt.getSearchURL(o.url,a.data),api$1.fetch(o).then(function(e){rootScope.isAppJsonCalling||Gm.loading.set(!1);var t=e;t&&(t.error?(n(t),i(t)):(GmCXt.validateDataModel(t,GmCXt.model.api),a.onSuccess?r(a.onSuccess(e)):r(e)))}).catch(function(e){e&&e.stack?(e.data=GmCXt.getCodeError(),n(e.data)):n()})})},api$1.get=function(e){return e.data.isDeskReq?(delete e.data.isDeskReq,api$1.get_(e)):(rootScope.isFetchingCdn=!1,rootScope.checkCdnSignature().then(function(){return api$1.get_(e)}))},api$1.getCDN=function(e){return rootScope.checkCdnSignature().then(function(){return GmCXt.onPrem()||(e=addCdnUrl(e)),new Promise(function(t,r){fetch(e).then(e=>{if(e.ok)return e.json();throw new Error("Network response was not ok")}).then(e=>{t(e)}).catch(e=>{r(e)})})})},api$1.post_=function(r){let i={url:GmCXt.conf.webServiceUrl+r.serviceName,method:r.method,headers:api$1.getHeaders(r),data:r.data};function a(e){processApi(e,r.onSuccess)}function o(e){var t;e=e||GmCXt.getDefaultError(),(t=e).url=i.url,t.params=i.data,t.method_type=i.method,1007===(e=t).code?mgError$1.on(e,a):3033!==e.code&&mgError$1.on(e),r.onFail&&r.onFail(e)}api$1.fetch(i).then(function(e){Gm.loading.set(!1),rootScope.uploadInProgress=!1;var t=e;t.error?o(t):r.onSuccess&&(!0===r.signIn&&(e=e.data.token?GmCXt.validateDataModel(e.data.token,GmCXt.model.token):e.data.orgs?e.data:GmCXt.validateDataModel(e.data.user,GmCXt.model.user)),r.onSuccess(e))}).catch(function(e){e?(e.stack&&(e.data=GmCXt.getCodeError()),o(e.data)):console.error("Error in api.post")})},api$1.post=function(e){rootScope.checkCdnSignature().then(function(){api$1.post_(e)})},api$1.userApiKeySignin=function(e,t,r){e={serviceName:GmCXt.getCustomerSpecificURL("user/sso/login")+"?mg_source_name="+GmCXt.conf.appConfig.customer,method:"POST",data:e,onSuccess:t,onFail:r,signIn:!0};api$1.post(e)},api$1.userOrgKeySignin=function(e,t,r){e={serviceName:"user/sso/autologin",method:"POST",data:e,onSuccess:t,onFail:r,signIn:!0};api$1.post(e)},api$1.userTranscation=function(e,t,r){e={serviceName:"user/transaction",method:"POST",data:e,onSuccess:t,onFail:r};api$1.post(e)},api$1.userSignIn=function(e,t,r){e={serviceName:"user/signin",method:"POST",data:e,onSuccess:t,onFail:r,signIn:!0};api$1.post(e)},api$1.userSignOut=function(e){e={serviceName:"user/signout?mg_source_name="+GmCXt.conf.appConfig.customer,method:"POST",serviceType:"",data:{},onSuccess:e};api$1.post(e)},api$1.verifyUser=function(e,t,r){e={serviceName:"user/verify",method:"POST",data:e,onSuccess:t,onFail:r,signIn:!0};api$1.post(e)},api$1.forgetPassword=function(e,t,r){e={serviceName:"user/password/reset",method:"GET",data:e,cb:t};api$1.get(e).then(t)},api$1.changePassword=function(e,t){e={serviceName:"user/password",method:"PUT",data:e,onSuccess:t};api$1.post(e)},api$1.resetPassword=function(e,t){e={serviceName:"user/resetpassword",method:"POST",data:e,onSuccess:t};api$1.post(e)},api$1.resendOTP=function(e,t){e={serviceName:"user/otp/resend",method:"POST",data:e,serviceType:"",onSuccess:t,signIn:!0};return api$1.post_(e)},api$1.getAccessToken=function(r){var e={serviceName:GmCXt.getCustomerSpecificURL("user/token"),method:"GET",serviceType:"",data:{force_update:!0,mg_source_name:GmCXt.conf.appConfig.customer}};function t(e){let t={};t=e.data.data||e.data;e=GmCXt.validateDataModel(t,GmCXt.model.userToken);r(e)}e.cb=t,api$1.get_(e).then(t)},api$1.callGetCdnSignature=function(e,t){e={serviceName:"organization/signature",method:"GET",serviceType:"",data:e,cb:t};api$1.get_(e).then(t)},api$1.getUserList=function(e,t){e.organization_id=api$1.orgId();e={serviceName:"user/list",method:"GET",data:e,serviceType:"",cb:t};Gm.loading.set(!0),api$1.get_(e).then(t)},api$1.getOrganization=function(t,e){let r={serviceName:"organization",method:"GET",data:{organization_id:api$1.orgId()},serviceType:""};function i(e){GmCXt.validateApiResp(t,r.serviceName,e.data.organization,GmCXt.model.organization)}Gm.loading.set(e),r.cb=i,api$1.get_(r).then(i)},api$1.getDomains=function(e){var t={serviceName:"organization/domain",method:"GET",data:{organization_id:api$1.orgId()},serviceType:"",cb:e};api$1.get_(t).then(e)},api$1.sendMsgToMyBot=function(e){var t={url:"http://localhost:11311/"+e.url,data:"",method:"GET"};return e.method&&(t.method=e.method),e.info&&(t.data={info:JSON.stringify(e.info)}),api$1.xhrDesktopApp(t).catch(function(e){GmCXt.log(1,"ERROR: failed to connect Desktop app",e)})},api$1.postUserProfile=function(e,t){e.organization_id=api$1.orgId();e={serviceName:"user",method:"PUT",serviceType:"",data:e,onSuccess:t};api$1.post(e)},api$1.getTourCDN=function(e,t,r){e="tours/tour-"+e+".json";api$1.getCDN(e).then(function(e){e&&(e=GmCXt.validateDataModel(e,GmCXt.model.guide),e=GmCXt.migrateTour(e),rootScope.updateTourToStorage(e),t)&&t(e)}).catch(function(e){r&&r()})},api$1.getCategoryListStorage=function(i,e){new Promise(function(t,e){function r(e){(e=!GmCXt.inPlayer&&i.is_publish?rootScope.filterPublished(e):e)&&e.length&&(e=(e=e.sort(function(e,t){return e.category_order-t.category_order})).slice(i.offset,i.limit+i.offset)),t(e)}if(i.parent_id){let e=[];r(e=GmCXt.isEmpty(rootScope.subCategoryStore)?e:rootScope.subCategoryStore["cat_"+i.parent_id])}else r(rootScope.categoryStore)}).then(e)},api$1.getCategoryDetails=function(e,t,r){function i(e){GmCXt.validateApiResp(n,o.serviceName,e,GmCXt.model.category)}function a(){api$1.get(o).then(function(e){i(e.data.category)})}let o={serviceName:"category",method:"GET",serviceType:"",data:e},n=function(e){api$1.appId()||(GmCXt.log(70,"ADD CATEGORY TO GLOBLE: "+GmCXt.categoryLog(e)),rootScope.addCategory(e),rootScope.updateCategoryInStorgae(e)),t(e)};if(GmCXt.inPlayer)return e="json/categories/"+e.category_id+".json",api$1.getJSONFromCDN(e,a).then(i).catch(function(){a()});a()},api$1.getCategoryDetailsStorage=function(i,e,t,r){t?api$1.getCategoryDetails(i,e,r):new Promise(function(e,t){var r=rootScope.categoryStore.filter(function(e){return parseInt(e.category_id)===parseInt(i.category_id)});if(r.length)e(r[0]);else{let t=[];rootScope.subCategoryStore.forEach(function(e){e.forEach(function(e){parseInt(e.category_id)===parseInt(i.category_id)&&t.push(e)})}),e(t[0])}}).then(e)},api$1.getTourList=function(r,i,a){r.application_id=a||api$1.appId(),GmCXt.isMirrorApp()&&(r.application_id=GmCXt.getBaseAppId()),r.organization_id=api$1.orgId(),rootScope.notDefaultLang()&&(r.language=rootScope.language),GmCXt.getLXPLang()&&(r.language=GmCXt.getLXPLang());let t={serviceName:"tour/list",method:"GET",serviceType:"",data:r};function o(e,t){a||(e=rootScope.filterGuideByEnv(e),GmCXt.log(70,"ADD TOURS TO VARIABLE: ",e),rootScope.addTourList(r.category_id,e),rootScope.updateToursInCategoryStorage(category_id,e)),i(e,t)}function e(e){GmCXt.validateApiResp(o,t.serviceName,e.data.tours,GmCXt.model.guides,e.data.pin_tours)}t.cb=e,api$1.get(t).then(e).catch(function(){})},api$1.getTourListStorage=function(s,e,t,r){t?api$1.getTourList(s,e,r):new Promise(function(t,e){function r(e){e=e&&(e=e.sort(function(e,t){return e.tour_order-t.tour_order})).slice(s.offset,s.limit+s.offset),t(e)}var i=[];if(s.category_id){var a,o=rootScope.allTourList["cat_"+s.category_id];for(a in o)i.push(o[a])}var n=i;if(GmCXt.inPlayer?n=rootScope.filterGuideByEnv(n):"1"===s.published_guides?n=rootScope.filterPublished(n):"0"===s.published_guides&&(n=rootScope.filterUnpublished(n)),s.search_text){let i=s.search_text.toLowerCase();n=rootScope.publishedTours.filter(function(r){if(r.application_id===s.app_id){let e=r.tour_title,t=r.tour_description;return r.language_data&&r.language_data[rootScope.language]&&rootScope.notDefaultLang()&&(e=r.language_data[rootScope.language].tour_title,t=r.language_data[rootScope.language].tour_description),rootScope.filterGuide(e,i,r.tour_id,t)}})}r(n)}).then(e)},api$1.getContextualTourStorage=function(e,t){return new Promise(function(e,t){setTimeout(function(){e(rootScope.validateAllRulesExceptSelectEl(rootScope.publishedTours).tours)},1e3)}).then(t)},api$1.getContextualTour=function(t,r){function i(e){rootScope.FT.isPlayer&&(e=rootScope.filterGuideByEnv(e)),rootScope.addTourList(!1,e),GmCXt.contextualApiParams={},r(e)}function a(e){GmCXt.validateApiResp(i,"tour/contextual",e.data.tours,GmCXt.model.guides)}GmCXt.getLXPLang()?t.language=GmCXt.getLXPLang():rootScope.language&&-1===rootScope.language.indexOf("en-")&&!GmCXt.isFalse(rootScope.language)&&(t.language=rootScope.language),t.organization_id=api$1.orgId(),t.application_id=api$1.appId(),GmCXt.isMirrorApp()&&(t.application_id=GmCXt.getBaseAppId()),api$1.getContextualTourStorage(t,function(e){e&&e.length||GmCXt.inPlayer?r(e):!GmCXt.isEmpty(GmCXt.contextualApiParams)&&Object.values(t).toString()===Object.values(GmCXt.contextualApiParams).toString()||(e={serviceName:"tour/contextual",method:"POST",serviceType:"",data:t,onSuccess:a},api$1.post_(e),GmCXt.contextualApiParams=t)})},api$1.getJSONFromCDN=function(e,t){return api$1.getCDN(e).catch(function(e){Gm.loading.set(!1),404===e.status?rootScope.cdn404=!0:403===e.status&&(rootScope.cdn403=!0),t&&t()})},api$1.getTours=function(e,t){e.organization_id=api$1.orgId();let r={serviceName:"tours",method:"GET",serviceType:"",data:e};function i(e){rootScope.FT.isPlayer&&(e=rootScope.filterGuideByEnv(e)),t(e)}function a(e){GmCXt.validateApiResp(i,r.serviceName,e.data.tours,GmCXt.model.guides)}r.cb=a,api$1.get(r).then(a)},api$1.getTaskList=function(){rootScope.taskListApiCalled=!0;let i={application_id:api$1.appId(),organization_id:api$1.orgId(),limit:10,offset:0,search:""},a={serviceName:"task_list/json",method:"GET",data:i};return new Promise(function(t,e){var r;GmCXt.inPlayer?(r="json/task_list/app-"+i.application_id+".json",api$1.getJSONFromCDN(r).then(function(e){e?t(e):api$1.get(a).then(function(e){t(e.data)})}).catch(function(){api$1.get(a).then(function(e){t(e.data)})})):api$1.get(a).then(function(e){t(e.data)})})},api$1.getTaskDetails=function(e){e={serviceName:"task_list/user/stats",method:"GET",data:{id:e}};return api$1.get(e)},api$1.getTaskListDetails=function(){var e={serviceName:"task_list/user/stats/list",method:"GET",data:{application_id:api$1.appId(),organization_id:api$1.orgId()}};return api$1.get(e)},api$1.getTaskFolderDetails=function(e){e={serviceName:"task_list/content",method:"GET",data:{folder_id:e}};return api$1.get(e)},api$1.markTaskGuideComplete=function(e,t){e={serviceName:"task_list/task/complete",method:"POST",serviceType:"",data:{task_list_id:e.task_id,user_id:api$1.user().user_id,guide_id:e.guide_id},onSuccess:t};return api$1.post(e)},api$1.getAllLanguages=function(){let e=GmCXt.conf.staticContentPath+"json/languages.json";return new Promise(function(t,r){fetch(e).then(e=>{if(e.ok)return e.json();throw new Error("Network response was not ok")}).then(e=>{t(e)}).catch(e=>{r(e)})})},api$1.getAppDetails=function(e,t){let r={serviceName:"application",method:"GET",data:{application_id:e}};function i(e){GmCXt.validateApiResp(t,r.serviceName,e.data.application,GmCXt.model.application)}r.cb=i,api$1.get(r).then(i)},api$1.getOrgJson=function(){var e;return Gm.loading.set(!0),GmCXt.cdnPlayer?api$1.getJSONFromCDN("json/org_info.json"):(e={serviceName:"organization/info/json",method:"GET",data:{organization_id:api$1.orgId()},serviceType:""},api$1.get_(e))},api$1.getAppJson=function(e){var t;return Gm.loading.set(!0),GmCXt.cdnPlayer?(t="json/app-"+e+".json",api$1.getJSONFromCDN(t)):(t={serviceName:"application/json",method:"GET",data:{application_id:e},serviceType:""},api$1.get_(t))},api$1.getSearchTourList=function(n,e,t){new Promise(function(e,t){var r=n.search_text,i=[],a=n.category_id;for(let e=0;e<rootScope.publishedTours.length;e++){var o=rootScope.publishedTours[e];void 0!==a&&a!==o.category_id||!(o.tour_title&&o.tour_title.toLowerCase().includes(r.toLowerCase())||o.keywords&&-1<o.keywords.toLowerCase().indexOf(r.toLowerCase()))||i.push(o)}i.sort(function(e,t){return e.tour_title.localeCompare(t.tour_title)}),e(i)}).then(e).catch(function(){rootScope.goBack()})};let api={};function add_css$4(e){append_styles(e,"svelte-uxsb5s","dialog.svelte-uxsb5s{width:460px;height:276px;border-radius:6px 6px 6px 6px;border:none;inset:unset;top:58px;right:20px;padding:0;overflow:hidden}dialog.svelte-uxsb5s::backdrop{background:rgba(0, 0, 0, 0.3)}dialog[open].svelte-uxsb5s{animation:svelte-uxsb5s-zoom 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)}@keyframes svelte-uxsb5s-zoom{from{transform:scale(0.95)}to{transform:scale(1)}}dialog[open].svelte-uxsb5s::backdrop{animation:svelte-uxsb5s-fade 0.2s ease-out}@keyframes svelte-uxsb5s-fade{from{opacity:0}to{opacity:1}}.mgPlayerJSPreview_push-notification-info-wrapper.svelte-uxsb5s{background:#FFFFFF;border-radius:6px;&:hover {\n\t\t& .mgPlayerJSPreview_title-tooltip-wrapper {\n\t\t\tdisplay: none !important;\n\t\t}\n\t};&.mgPlayerJSPreview_push-notification-info-micro-player {\n\t\twidth: 370px;\n\t\ttop: 38px;\n\n\t\t& .mgPlayerJSPreview_notification-info-tabs-wrapper {\n\t\t\t& .mgPlayerJSPreview_notification-info-tab {\n\t\t\t\t&:hover {\n\t\t\t\t\t& .mgPlayerJSPreview_title-tooltip-wrapper {\n\t\t\t\t\t\tmax-width: 350px !important;\n\t\t\t\t\t\tmax-height: 119px;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\tright: -175px;\n\t\t\t\t\t\tfont-weight: normal !important;\n\t\t\t\t\t\tdisplay: block !important;\n\n\t\t\t\t\t\t&.mgPlayerJSPreview_title-tooltip-align-left {\n\t\t\t\t\t\t\tleft: -175px;\n\t\t\t\t\t\t\tright: initial;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t& .mgPlayerJSPreview_tooltip-title {\n\t\t\t\t\t\t\twhite-space: initial;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};& .mgPlayerJSPreview_push-dropdown-pointer {\n\t\tcontent: '';\n\t\tposition: fixed;\n\t\ttop: 52px;\n\t\tleft: 429px;\n\t\tbox-sizing: border-box;\n\t\tborder: 9px solid #ffffff;\n\t\tborder-color: transparent transparent #ffffff #ffffff;\n\t\ttransform: rotate(135deg);\n\t\tbox-shadow: -2px 1px 5px -1px rgba(0, 0, 0, 0.4);\n\t\tz-index: -1;\n\t};& .mgPlayerJSPreview_push-pointer-positon{\n\t\tleft: 394px !important;\n\t};& .mgPlayerJSPreview_notification-overlay-wrapper {\n\t\tposition: fixed;\n\t\ttop: 62px;\n\t\tleft: 0px;\n\t\tz-index: -1;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground: rgba(10, 10, 10, 0.3);\n\t\tcursor: default;\n\t};& .mgPlayerJSPreview_notification-info-header-wrapper {\n\t\theight: 61px;\n\t\tbackground: #FFFFFF;\n\t\tborder-radius: 6px 6px 0px 0px;\n\t\tborder-bottom: 1px solid #E6E6E6;\n\n\t\t& .mgPlayerJSPreview_notification-close {\n\t\t\twidth: 15px;\n\t\t\theight: 15px;\n\t\t}\n\t};& .mgPlayerJSPreview_notification-info-tabs-wrapper {\n\t\twidth: 100%;\n\t\theight: 50px;\n\t\tbackground: #ffffff;\n\t\tpadding: 3px;\n\n\t\t& .mgPlayerJSPreview_notification-info-tab {\n\t\t\twidth: 50%;\n\t\t\tcolor: #555555;\n\t\t\ttext-transform: uppercase;\n\t\t\tborder-bottom: 1px solid transparent;\n\t\t\tfont-size: 12px;\n\t\t\tmargin: 0 15px;\n\n\t\t\t&:hover {\n\t\t\t\t& .mgPlayerJSPreview_title-tooltip-wrapper {\n\t\t\t\t\tmax-width: 435px !important;\n\t\t\t\t\tmax-height: 119px;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\tright: -215px;\n\t\t\t\t\tfont-weight: normal !important;\n\t\t\t\t\tdisplay: block !important;\n\t\t\t\t\ttext-transform: none;\n\n\t\t\t\t\t&.mgPlayerJSPreview_title-tooltip-align-left {\n\t\t\t\t\t\tleft: -220px;\n\t\t\t\t\t\tright: initial;\n\t\t\t\t\t}\n\n\t\t\t\t\t& .mgPlayerJSPreview_tooltip-title {\n\t\t\t\t\t\twhite-space: initial;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t&:hover, &.mgPlayerJSPreview_notification-active-tab {\n\t\t\t\tborder-bottom: 1px solid var(--mg-primary);\n\t\t\t}\n\t\t}\n\t};& .mgPlayerJSPreview_notification-guide-details-wrapper {\n\t\theight: 170px;\n\t\tbackground: #FFFFFF;\n\t\tborder-radius: 0px 0px 6px 6px;\n\t\tpadding-bottom: 30px;\n\n\t\t& .mgPlayerJSPreview_notification-guide-details {\n\t\t\theight: 42px;\n\t\t\tbox-shadow: rgba(0, 0, 0, 0.0980392) 0px 2px 3px -2px;\n\n\t\t\t& .mgPlayerJSPreview_title-tooltip-wrapper {\n\t\t\t\tfont-weight: normal !important;\n\t\t\t\tdisplay: none !important;\n\t\t\t\tmax-width: 90% !important;\n\n\t\t\t\t& .mgPlayerJSPreview_tooltip-title {\n\t\t\t\t\twhite-space: normal;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t&:hover {\n\t\t\t\t& .mgPlayerJSPreview_notification-guide-details-overlay {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t}\n\n\t\t\t\t& .mgPlayerJSPreview_title-tooltip-wrapper {\n\t\t\t\t\tfont-weight: normal !important;\n\t\t\t\t\tdisplay: block !important;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t& .mgPlayerJSPreview_notification-guide-details-overlay {\n\t\t\t\tdisplay: none;\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0px;\n\t\t\t\tleft: 0px;\n\t\t\t\tjustify-content: flex-end;\n\t\t\t\talign-items: center;\n\n\t\t\t\t& .mgPlayerJSPreview_details-overlay-wrapper {\n\t\t\t\t\tbackground: #E7F5FF;\n\t\t\t\t\topacity: 0.3;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0px;\n\t\t\t\t\tleft: 0px;\n\t\t\t\t}\n\n\t\t\t\t& .mgPlayerJSPreview_details-overlay-action-wrapper {\n\t\t\t\t\tmax-width: 170px;\n\n\t\t\t\t\t& .mgPlayerJSPreview_action-show-again-icon {\n\t\t\t\t\t\twidth: 17px;\n\t\t\t\t\t\theight: 20px;\n\t\t\t\t\t}\n\n\t\t\t\t\t& .mgPlayerJSPreview_action-show-again-btn {\n\t\t\t\t\t\tmin-width: 84px;\n\t\t\t\t\t\theight: 20px;\n\t\t\t\t\t\tborder-radius: 30px;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\t\tpadding: 0px 10px;\n\t\t\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t& .mgPlayerJSPreview_notification-guide-icon {\n\t\t\t\twidth: 24px;\n\t\t\t\theight: 24px;\n\n\t\t\t\t& svg {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\n\t\t\t\t\t& rect {\n\t\t\t\t\t\tstroke: var(--mg-primary);\n\t\t\t\t\t\tfill: var(--mg-primary-hover) !important;\n\t\t\t\t\t}\n\n\t\t\t\t\t& path {\n\t\t\t\t\t\tfill: var(--mg-primary);\n\t\t\t\t\t\tstroke: var(--mg-primary);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t& .mgPlayerJSPreview_notification-guide-title {\n\t\t\t\twidth: 250px;\n\n\t\t\t\t& .mgPlayerJSPreview_not-guide-title {\n\t\t\t\t\twidth: 70% !important\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t& .mgPlayerJSPreview_no-guide-msg-wrapper {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tbackground: #ffffff;\n\t\t\tposition: absolute;\n\t\t\ttop: 0px;\n\t\t\tleft: 0px;\n\n\t\t\t& .mgPlayerJSPreview_icon-oops {\n\t\t\t\tmargin-bottom: 10px;\n\n\t\t\t\t& svg {\n\t\t\t\t\twidth: 80px;\n\t\t\t\t\theight: 80px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}}")}function get_each_context$b(e,t,r){e=e.slice();return e[21]=t[r],e[23]=r,e}function get_each_context_1$5(e,t,r){e=e.slice();return e[21]=t[r],e[23]=r,e}function create_if_block$q(r){let i,a,o,n,s,l,c,p,d,u,g,m=rootScope.svgs.close_push+"",h,_,f,e=rootScope.labels.dontShowAgain+"",v,y,P,S,w,b,t=rootScope.labels.watchLater+"",C,k,T,x,A,J,G,$,E=r[2]&&create_if_block_4$h(r),L=r[3]&&create_if_block_1$l(r);return{c(){i=element("dialog"),a=element("div"),o=element("div"),n=element("div"),s=space(),l=element("div"),c=space(),p=element("div"),(d=element("h3")).textContent=""+rootScope.labels.pushNotification,u=space(),g=element("button"),h=space(),_=element("div"),f=element("button"),v=text(e),y=space(),P=element("div"),(S=element("div")).textContent=""+rootScope.labels.tooltipDontShowAgain,w=space(),b=element("button"),C=text(t),k=space(),T=element("div"),(x=element("div")).textContent=`${rootScope.labels.tooltipWatchLater1} ${GmCXt.getSleepTime(rootScope.labels)} `+rootScope.labels.tooltipWatchLater2,A=space(),E&&E.c(),J=space(),L&&L.c(),attr(n,"class","mgPlayerJSPreview_push-dropdown-pointer"),toggle_class(n,"mgPlayerJSPreview_push-pointer-positon",!GmCXt.isLXP()),attr(l,"class","mgPlayerJSPreview_notification-overlay-wrapper"),attr(d,"class","mgPlayerJSPreview_notification-title mgPlayerJSPreview_text-color-dark mgPlayerJSPreview_font-weight-550 mgPlayerJSPreview_font-size-18 mgPlayerJSPreview_no-margin"),attr(d,"aria-label",rootScope.labels.pushNotification),attr(d,"tabindex","0"),attr(g,"id","mgPlayerJSPreview_icon-close-push-notif-dropdown"),attr(g,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_notification-close mgPlayerJSPreview_position-relative mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer"),attr(g,"aria-label","close push notification dropdown"),attr(p,"class","mgPlayerJSPreview_notification-info-header-wrapper mgPlayerJSPreview_width-100 mgPlayerJSPreview_padding-20 mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between"),attr(S,"class","mgPlayerJSPreview_tooltip-title"),attr(P,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-left mgPlayerJSPreview_notification-tabs-tooltip mgPlayerJSPreview_margin-tb-10"),attr(f,"id","mgPlayerJSPreview_label-notification-list-dshow-again"),attr(f,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_notification-info-tab mgPlayerJSPreview_height-100 mgPlayerJSPreview_font-weight-700 mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_position-relative"),toggle_class(f,"mgPlayerJSPreview_notification-active-tab",r[2]),attr(x,"class","mgPlayerJSPreview_tooltip-title"),attr(T,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-left mgPlayerJSPreview_notification-tabs-tooltip mgPlayerJSPreview_margin-tb-10 mgPlayerJSPreview_title-tooltip-align-left"),attr(b,"id","mgPlayerJSPreview_label-notification-list-wlater"),attr(b,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_notification-info-tab mgPlayerJSPreview_height-100 mgPlayerJSPreview_font-weight-700 mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_position-relative"),toggle_class(b,"mgPlayerJSPreview_notification-active-tab",r[3]),attr(_,"class","mgPlayerJSPreview_notification-info-tabs-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between"),attr(o,"class","mgPlayerJSPreview_push-notification-info-wrapper mgPlayerJSPreview_z-index mgPlayerJSPreview_z-index-max mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-default "+(rootScope.isMicroPlayer?"mgPlayerJSPreview_push-notification-info-micro-player":"")+" svelte-uxsb5s"),attr(i,"id","svelte-notification-modal"),attr(i,"role","region"),attr(i,"aria-labelledby",rootScope.labels.pushNotification),attr(i,"class","svelte-uxsb5s")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),append(o,s),append(o,l),append(o,c),append(o,p),append(p,d),append(p,u),append(p,g),g.innerHTML=m,append(o,h),append(o,_),append(_,f),append(f,v),append(f,y),append(f,P),append(P,S),append(_,w),append(_,b),append(b,C),append(b,k),append(b,T),append(T,x),append(o,A),E&&E.m(o,null),append(o,J),L&&L.m(o,null),r[14](i),G||($=[listen(g,"click",r[9]),listen(f,"click",r[10]),listen(b,"click",r[11]),listen(a,"click",stop_propagation(r[8])),listen(i,"close",r[15])],G=!0)},p(e,t){4&t&&toggle_class(f,"mgPlayerJSPreview_notification-active-tab",e[2]),8&t&&toggle_class(b,"mgPlayerJSPreview_notification-active-tab",e[3]),e[2]?E?E.p(e,t):((E=create_if_block_4$h(e)).c(),E.m(o,J)):E&&(E.d(1),E=null),e[3]?L?L.p(e,t):((L=create_if_block_1$l(e)).c(),L.m(o,null)):L&&(L.d(1),L=null)},d(e){e&&detach(i),E&&E.d(),L&&L.d(),r[14](null),G=!1,run_all($)}}}function create_if_block_4$h(e){let r,i,a=e[4]?.doNotShowTour&&create_if_block_6$g(e),o=(!e[4]||0===e[4]?.doNotShowTour?.length)&&create_if_block_5$g();return{c(){r=element("div"),a&&a.c(),i=space(),o&&o.c(),attr(r,"class","mgPlayerJSPreview_notification-guide-details-wrapper mgPlayerJSPreview_width-100 mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y mgPlayerJSPreview_position-relative")},m(e,t){insert(e,r,t),a&&a.m(r,null),append(r,i),o&&o.m(r,null)},p(e,t){e[4]?.doNotShowTour?a?a.p(e,t):((a=create_if_block_6$g(e)).c(),a.m(r,i)):a&&(a.d(1),a=null),e[4]&&0!==e[4]?.doNotShowTour?.length?o&&(o.d(1),o=null):o||((o=create_if_block_5$g()).c(),o.m(r,null))},d(e){e&&detach(r),a&&a.d(),o&&o.d()}}}function create_if_block_6$g(t){let a,o=ensure_array_like(t[4].doNotShowTour),n=[];for(let e=0;e<o.length;e+=1)n[e]=create_each_block_1$5(get_each_context_1$5(t,o,e));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();a=empty()},m(t,r){for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,r);insert(t,a,r)},p(t,r){if(80&r){o=ensure_array_like(t[4].doNotShowTour);let e;for(e=0;e<o.length;e+=1){var i=get_each_context_1$5(t,o,e);n[e]?n[e].p(i,r):(n[e]=create_each_block_1$5(i),n[e].c(),n[e].m(a.parentNode,a))}for(;e<n.length;e+=1)n[e].d(1);n.length=o.length}},d(e){e&&detach(a),destroy_each(n,e)}}}function create_each_block_1$5(r){let i,a,o=rootScope.svgs.default_guide+"",n,s,l,c=r[21].tour_title+"",p,d,u,g,m=r[21].tour_title+"",h,_,f,v,y,P,S,w,b,C;function k(){return r[12](r[21],r[23])}return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),l=element("div"),p=text(c),d=space(),u=element("div"),g=element("div"),h=text(m),_=space(),f=element("div"),v=element("div"),y=space(),P=element("div"),(S=element("button")).textContent=""+rootScope.labels.showAgain,w=space(),attr(a,"class","mgPlayerJSPreview_notification-guide-icon mgPlayerJSPreview_position-relative"),attr(l,"class","mgPlayerJSPreview_text-overflow-ellipsis mgPlayerJSPreview_text-color-dark "+(rootScope.isMicroPlayer?"mgPlayerJSPreview_not-guide-title":"")),attr(s,"class","mgPlayerJSPreview_notification-guide-title mgPlayerJSPreview_margin-lr-10"),attr(g,"class","mgPlayerJSPreview_tooltip-title"),attr(u,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-right mgPlayerJSPreview_margin-lr-10"),attr(v,"class","mgPlayerJSPreview_details-overlay-wrapper mgPlayerJSPreview_width-100 mgPlayerJSPreview_height-100 mgPlayerJSPreview_z-index mgPlayerJSPreview_z-index-1"),attr(S,"id","mgPlayerJSPreview_label-show-again"),attr(S,"class","mgPlayerJSPreview_action-show-again-btn mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_theme-background mgPlayerJSPreview_text-color-white mgPlayerJSPreview_font-size-12 mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_lbl-btn"),attr(P,"class","mgPlayerJSPreview_details-overlay-action-wrapper mgPlayerJSPreview_height-100 mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between mgPlayerJSPreview_z-index mgPlayerJSPreview_z-index-2"),attr(f,"class","mgPlayerJSPreview_notification-guide-details-overlay mgPlayerJSPreview_width-100 mgPlayerJSPreview_height-100 mgPlayerJSPreview_padding-lr-20"),attr(i,"class","mgPlayerJSPreview_notification-guide-details mgPlayerJSPreview_width-100 mgPlayerJSPreview_padding-lr-20 mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-start mgPlayerJSPreview_position-relative"),attr(i,"tabindex","0")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,l),append(l,p),append(i,d),append(i,u),append(u,g),append(g,h),append(i,_),append(i,f),append(f,v),append(f,y),append(f,P),append(P,S),append(i,w),b||(C=listen(S,"click",k),b=!0)},p(e,t){r=e,16&t&&c!==(c=r[21].tour_title+"")&&set_data(p,c),16&t&&m!==(m=r[21].tour_title+"")&&set_data(h,m)},d(e){e&&detach(i),b=!1,C()}}}function create_if_block_5$g(e){let r,i,a,o=rootScope.svgs.no_guides_image+"",n,s,l,c;return{c(){r=element("div"),i=element("div"),a=element("div"),n=space(),(s=element("div")).textContent="Oops!",l=space(),(c=element("div")).textContent=""+rootScope.labels.noGuidesOnThisTab,attr(a,"class","mgPlayerJSPreview_icon-oops mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_text-align-center"),attr(s,"class","mgPlayerJSPreview_icon-text mgPlayerJSPreview_text-align-center mgPlayerJSPreview_font-weight-550"),attr(s,"tabindex","0"),attr(c,"class","mgPlayerJSPreview_text-align-center mgPlayerJSPreview_margin-tb-5"),attr(c,"tabindex","0"),attr(i,"class","mgPlayerJSPreview_oops-wrapper mgPlayerJSPreview_text-align-center"),attr(r,"class","mgPlayerJSPreview_no-guide-msg-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center")},m(e,t){insert(e,r,t),append(r,i),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(i,l),append(i,c)},d(e){e&&detach(r)}}}function create_if_block_1$l(e){let r,i,a=e[4]?.snoozeTour&&create_if_block_3$i(e),o=(!e[4]||0===e[4]?.snoozeTour?.length)&&create_if_block_2$k();return{c(){r=element("div"),a&&a.c(),i=space(),o&&o.c(),attr(r,"class","mgPlayerJSPreview_notification-guide-details-wrapper mgPlayerJSPreview_width-100 mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y mgPlayerJSPreview_position-relative")},m(e,t){insert(e,r,t),a&&a.m(r,null),append(r,i),o&&o.m(r,null)},p(e,t){e[4]?.snoozeTour?a?a.p(e,t):((a=create_if_block_3$i(e)).c(),a.m(r,i)):a&&(a.d(1),a=null),e[4]&&0!==e[4]?.snoozeTour?.length?o&&(o.d(1),o=null):o||((o=create_if_block_2$k()).c(),o.m(r,null))},d(e){e&&detach(r),a&&a.d(),o&&o.d()}}}function create_if_block_3$i(t){let a,o=ensure_array_like(t[4].snoozeTour),n=[];for(let e=0;e<o.length;e+=1)n[e]=create_each_block$b(get_each_context$b(t,o,e));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();a=empty()},m(t,r){for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,r);insert(t,a,r)},p(t,r){if(144&r){o=ensure_array_like(t[4].snoozeTour);let e;for(e=0;e<o.length;e+=1){var i=get_each_context$b(t,o,e);n[e]?n[e].p(i,r):(n[e]=create_each_block$b(i),n[e].c(),n[e].m(a.parentNode,a))}for(;e<n.length;e+=1)n[e].d(1);n.length=o.length}},d(e){e&&detach(a),destroy_each(n,e)}}}function create_each_block$b(r){let i,a,o=rootScope.svgs.default_guide+"",n,s,l,c=r[21].tour_title+"",p,d,u,g,m=r[21].tour_title+"",h,_,f,v,y,P,S,w,b,C;function k(){return r[13](r[21],r[23])}return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),l=element("div"),p=text(c),d=space(),u=element("div"),g=element("div"),h=text(m),_=space(),f=element("div"),v=element("div"),y=space(),P=element("div"),(S=element("button")).textContent=""+rootScope.labels.showAgain,w=space(),attr(a,"class","mgPlayerJSPreview_notification-guide-icon mgPlayerJSPreview_position-relative"),attr(l,"class","mgPlayerJSPreview_text-overflow-ellipsis mgPlayerJSPreview_text-color-dark "+(rootScope.isMicroPlayer?"mgPlayerJSPreview_not-guide-title":"")),attr(s,"class","mgPlayerJSPreview_notification-guide-title mgPlayerJSPreview_margin-lr-10"),attr(g,"class","mgPlayerJSPreview_tooltip-title"),attr(u,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-right mgPlayerJSPreview_margin-lr-10"),attr(v,"class","mgPlayerJSPreview_details-overlay-wrapper mgPlayerJSPreview_width-100 mgPlayerJSPreview_height-100 mgPlayerJSPreview_z-index mgPlayerJSPreview_z-index-1"),attr(S,"id","mgPlayerJSPreview_label-watch-again"),attr(S,"class","mgPlayerJSPreview_action-show-again-btn mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_theme-background mgPlayerJSPreview_text-color-white mgPlayerJSPreview_font-size-12 mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_primary-color mgPlayerJSPreview_bg-color mgPlayerJSPreview_lbl-btn"),attr(P,"class","mgPlayerJSPreview_details-overlay-action-wrapper mgPlayerJSPreview_height-100 mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between mgPlayerJSPreview_z-index mgPlayerJSPreview_z-index-2"),attr(f,"class","mgPlayerJSPreview_notification-guide-details-overlay mgPlayerJSPreview_width-100 mgPlayerJSPreview_height-100 mgPlayerJSPreview_padding-lr-20"),attr(i,"class","mgPlayerJSPreview_notification-guide-details mgPlayerJSPreview_width-100 mgPlayerJSPreview_padding-lr-20 mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-start mgPlayerJSPreview_position-relative"),attr(i,"tabindex","0")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,l),append(l,p),append(i,d),append(i,u),append(u,g),append(g,h),append(i,_),append(i,f),append(f,v),append(f,y),append(f,P),append(P,S),append(i,w),b||(C=listen(S,"click",k),b=!0)},p(e,t){r=e,16&t&&c!==(c=r[21].tour_title+"")&&set_data(p,c),16&t&&m!==(m=r[21].tour_title+"")&&set_data(h,m)},d(e){e&&detach(i),b=!1,C()}}}function create_if_block_2$k(e){let r,i,a,o=rootScope.svgs.no_guides_image+"",n,s,l,c;return{c(){r=element("div"),i=element("div"),a=element("div"),n=space(),(s=element("div")).textContent="Oops!",l=space(),(c=element("div")).textContent=""+rootScope.labels.noGuidesOnThisTab,attr(a,"class","mgPlayerJSPreview_icon-oops mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_text-align-center"),attr(s,"class","mgPlayerJSPreview_icon-text mgPlayerJSPreview_text-align-center mgPlayerJSPreview_font-weight-550"),attr(s,"tabindex","0"),attr(c,"class","mgPlayerJSPreview_text-align-center mgPlayerJSPreview_margin-tb-5"),attr(c,"tabindex","0"),attr(i,"class","mgPlayerJSPreview_oops-wrapper mgPlayerJSPreview_text-align-center"),attr(r,"class","mgPlayerJSPreview_no-guide-msg-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center")},m(e,t){insert(e,r,t),append(r,i),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(i,l),append(i,c)},d(e){e&&detach(r)}}}function create_fragment$u(e){let r,i=e[0]&&create_if_block$q(e);return{c(){i&&i.c(),r=empty()},m(e,t){i&&i.m(e,t),insert(e,r,t)},p(e,[t]){e[0]?i?i.p(e,t):((i=create_if_block$q(e)).c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},i:noop,o:noop,d(e){e&&detach(r),i&&i.d(e)}}}function instance$t(t,e,o){let n,r=e.pushNotificationDropdown,i,a,s,l,c=(get_store_value(Gm.notificationsGuides),Gm.dShowAgain.subscribe(e=>{o(2,a=e)})),p=Gm.wLater.subscribe(e=>{o(3,s=e)});function d(e){Gm.dShowAgain.set(!1),Gm.wLater.set(!1),Gm[e].set(!0)}function u(i,a){storage.notifTours.get().then(function(e){var t={};function r(e){rootScope.saveUser(GmCXt.user)}(t=GmCXt.isAnonymousUser()?e.tourIdArray||{}:GmCXt.createDeepCopy(GmCXt.user).settings.viewed_guide_notifications||{})[i]&&(GmCXt.isAnonymousUser()?GmCXt.updateNotiDoNotShow(i):(delete t[i],GmCXt.user.settings.viewed_guide_notifications=t,GmCXt.user.signin_user_email?(e={email_id:GmCXt.user.signin_user_email,settings:JSON.stringify(l.settings),organization_id:GmCXt.user.organization_id},GmCXt.setAnonymousUserPrefrence(e).then(r)):(l.settings=JSON.stringify(l.settings),api.postUserProfile(l,r))),n.doNotShowTour.splice(a,1),o(4,n={...n}))})}function g(e,t){n.snoozeTour.splice(t,1),o(4,n={...n}),GmCXt.updateNotiWatchLater(e)}l=rootScope.user,GmCXt.updateNotiWatchLater=function(r){GmCXt.storage().get(["tourIdArray","toursClosed"]).then(function(e){var t=GmCXt.parseJSON(e.toursClosed),e=(t[r]&&(delete t[r],GmCXt.storage().set({toursClosed:t})),GmCXt.parseJSON(e.tourIdArray));GmCXt.updNotifDataSidePanel(t,e)})},GmCXt.updateNotiDoNotShow=function(r){GmCXt.storage().get(["tourIdArray","toursClosed"]).then(function(e){var t=GmCXt.parseJSON(e.tourIdArray),e=(t[r]&&(delete t[r],GmCXt.storage().set({tourIdArray:t})),GmCXt.parseJSON(e.toursClosed));GmCXt.updNotifDataSidePanel(e,t)})},d("wLater"),onDestroy(()=>{c(),p()});return t.$$set=e=>{"pushNotificationDropdown"in e&&o(0,r=e.pushNotificationDropdown)},t.$$.update=()=>{3&t.$$.dirty&&i&&r&&i.showModal()},o(4,n=rootScope.notifications),[r,i,a,s,n,d,u,g,function(e){bubble.call(this,t,e)},()=>i.close(),()=>d("dShowAgain"),()=>d("wLater"),(e,t)=>u(e.tour_id,t),(e,t)=>g(e.tour_id,t),function(e){binding_callbacks[e?"unshift":"push"](()=>{i=e,o(1,i)})},()=>o(0,r=!1)]}api.user=api$1.user,api.orgId=api$1.orgId,api.appId=api$1.appId,api.getHeaders=api$1.getHeaders,api.fetch=api$1.fetch,api.xhrDesktopApp=api$1.xhrDesktopApp,api.get_=api$1.get_,api.get=api$1.get,api.getCDN=api$1.getCDN,api.post_=api$1.post_,api.post=api$1.post,api.userSignIn=api$1.userSignIn,api.userApiKeySignin=api$1.userApiKeySignin,api.userOrgKeySignin=api$1.userOrgKeySignin,api.userSignOut=api$1.userSignOut,api.verifyUser=api$1.verifyUser,api.forgetPassword=api$1.forgetPassword,api.changePassword=api$1.changePassword,api.resetPassword=api$1.resetPassword,api.getCdnSignature=api$1.callGetCdnSignature,api.getAccessToken=api$1.getAccessToken,api.getOrganization=api$1.getOrganization,api.getDomains=api$1.getDomains,api.sendMsgToMyBot=api$1.sendMsgToMyBot,api.postUserProfile=api$1.postUserProfile,api.getCategoryList=api$1.getCategoryListStorage,api.getCategoryDetails=api$1.getCategoryDetails,api.getTourList=api$1.getTourListStorage,api.searchTours=api$1.getSearchTourList,api.getContextualTour=api$1.getContextualTour,api.getOrgJson=api$1.getOrgJson,api.getAppJson=api$1.getAppJson,api.resendOTP=api$1.resendOTP,api.getTours=api$1.getTours,api.getTaskList=api$1.getTaskList,api.getTaskDetails=api$1.getTaskDetails,api.getTaskFolderDetails=api$1.getTaskFolderDetails,api.getTaskListDetails=api$1.getTaskListDetails,api.markTaskGuideComplete=api$1.markTaskGuideComplete,api.getAllLanguages=api$1.getAllLanguages,api.getAppDetails=api$1.getAppDetails,api.getUserList=api$1.getUserList,api.getTourFromCDNorJSON=function(t,r,i){api.getTourCDN(t.tour_id,function(e){GmCXt.isEmpty(e)?api.getTourJson(t.tour_id,r,i):r(e)},function(){api.getTourJson(t.tour_id,r,i)})},api.getTour=function(e,t,r,i,a){var o=rootScope.getTourFromId(e.tour_id,e.category_id);o&&!GmCXt.isEmpty(o.steps)?t(o):(GmCXt.cdnPlayer||GmCXt.apiPlayer)&&api.getTourFromCDNorJSON(e,t,r)},api.getTourJson=function(t,r,i){var e={serviceName:"tour/json",method:"GET",data:{tour_id:t},serviceType:"",onSuccess:function(e){e.data?(e=GmCXt.validateDataModel(e.data,GmCXt.model.guide),rootScope.updateTourToStorage(e),r(e)):i&&i()},onFail:function(e){GmCXt.log(1,"Tour not found"+t),i()}};Gm.loading.set(!0),api.get(e)},api.getTourCDN=function(e,t,r){e="tours/tour-"+e+".json";api.getCDN(e).then(function(e){e&&(e=GmCXt.validateDataModel(e,GmCXt.model.guide),e=GmCXt.migrateTour(e),rootScope.updateTourToStorage(e),t)&&t(e)}).catch(function(e){r&&r()})},api.updateUser=function(e,t){var r=GmCXt.organization,r=(e.organization_id=r.organization_id,e),e=("string"!=typeof r.settings&&(r.settings=JSON.stringify(e.settings)),{serviceName:"user",method:"PUT",serviceType:"",data:r,onSuccess:t});api.post(e)};class NotificationModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$t,create_fragment$u,safe_not_equal,{pushNotificationDropdown:0},add_css$4)}}var logAll=[];let logLog=function(){console.log(JSON.stringify(logAll))},stopCapture=function(e){e=e||logAll;var e=JSON.stringify(e,null,2),e=new Blob([e],{type:"text/plain"}),e=URL.createObjectURL(e),t=document.createElement("a");t.href=e,t.download="console_logs.txt",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(e)},logoutServ={};function get_each_context$a(e,t,r){e=e.slice();return e[46]=t[r],e}function create_if_block_28$2(e){let r;function i(e){return e[0].isMicroPlayer?create_else_block_1$4:create_if_block_29$2}let a=i(e),o=a(e);return{c(){o.c(),r=empty()},m(e,t){o.m(e,t),insert(e,r,t)},p(e,t){a===(a=i(e))&&o?o.p(e,t):(o.d(1),(o=a(e))&&(o.c(),o.m(r.parentNode,r)))},d(e){e&&detach(r),o.d(e)}}}function create_else_block_1$4(e){let r,i=e[0].labels.miniPlayerHelp+"",a;return{c(){r=element("h4"),a=text(i),attr(r,"class","mgPlayerJSPreview_theme-mplayer-header-title mgPlayerJSPreview_font-size-16 mgPlayerJSPreview_float-left mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_text-overflow-ellipsis mgPlayerJSPreview_no-margin")},m(e,t){insert(e,r,t),append(r,a)},p(e,t){1&t[0]&&i!==(i=e[0].labels.miniPlayerHelp+"")&&set_data(a,i)},d(e){e&&detach(r)}}}function create_if_block_29$2(r){let i,a,o,n,s,l,c;return{c(){i=element("div"),a=element("div"),attr(o=element("img"),"id","mgPlayerJSPreview_header-brand-logo"),attr(o,"class","mgPlayerJSPreview_logo-image mgPlayerJSPreview_width-height-auto mgPlayerJSPreview_max-width-height-100 mgPlayerJSPreview_custom-image"),src_url_equal(o.src,n=r[3])||attr(o,"src",n),attr(o,"alt",s=r[0].labels.brandLogo),attr(a,"class","mgPlayerJSPreview_logo-wrapper mgPlayerJSPreview_inline-block-vm"),attr(i,"class","mgPlayerJSPreview_panel-brand-logo-wrapper mgPlayerJSPreview_float-left"),set_style(i,"margin-left","10px")},m(e,t){insert(e,i,t),append(i,a),append(a,o),l||(c=listen(o,"error",r[17]),l=!0)},p(e,t){8&t[0]&&!src_url_equal(o.src,n=e[3])&&attr(o,"src",n),1&t[0]&&s!==(s=e[0].labels.brandLogo)&&attr(o,"alt",s)},d(e){e&&detach(i),l=!1,c()}}}function create_if_block_27$2(r){let i,a,o=r[0].svgs.refresh+"",n,s,l,c,p=r[0].labels.refresh+"",d,u,g,m;return{c(){i=element("div"),a=element("button"),s=space(),l=element("div"),c=element("div"),d=text(p),attr(a,"id","mgPlayerJSPreview_icon-refresh-alldata"),attr(a,"aria-label",n=r[0].labels.refresh),attr(a,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_refresh-btn mgPlayerJSPreview_position-center"),attr(c,"class","mgPlayerJSPreview_tooltip-title"),attr(l,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-center mgPlayerJSPreview_margin-tb-10"),attr(i,"class",u="mgPlayerJSPreview_refresh-btn-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_show-text-tooltip "+(r[0].isMicroPlayer?"mgPlayerJSPreview_header-icon-micro-wrapper":""))},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,s),append(i,l),append(l,c),append(c,d),g||(m=listen(a,"click",r[14]),g=!0)},p(e,t){1&t[0]&&o!==(o=e[0].svgs.refresh+"")&&(a.innerHTML=o),1&t[0]&&n!==(n=e[0].labels.refresh)&&attr(a,"aria-label",n),1&t[0]&&p!==(p=e[0].labels.refresh+"")&&set_data(d,p),1&t[0]&&u!==(u="mgPlayerJSPreview_refresh-btn-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_show-text-tooltip "+(e[0].isMicroPlayer?"mgPlayerJSPreview_header-icon-micro-wrapper":""))&&attr(i,"class",u)},d(e){e&&detach(i),g=!1,m()}}}function create_if_block_26$2(e){let r,i,a,o=e[0].svgs.help_center+"",n,s,l,c,p=e[0].labels.helpCenter+"",d,u;return{c(){r=element("div"),i=element("a"),a=element("button"),s=space(),l=element("div"),c=element("div"),d=text(p),attr(a,"id","mgPlayerJSPreview_icon-help-center"),attr(a,"aria-label",n=e[0].labels.helpCenter),attr(a,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_help-center-btn mgPlayerJSPreview_position-center"),attr(i,"href",getHelpCenterUrl()),attr(i,"target","_blank"),attr(i,"rel","noopener noreferrer"),attr(i,"tabindex","-1"),attr(c,"class","mgPlayerJSPreview_tooltip-title"),attr(l,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-center mgPlayerJSPreview_margin-tb-10"),attr(r,"class",u="mgPlayerJSPreview_help-center-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_show-text-tooltip "+(e[0].isMicroPlayer?"mgPlayerJSPreview_header-icon-micro-wrapper":""))},m(e,t){insert(e,r,t),append(r,i),append(i,a),a.innerHTML=o,append(r,s),append(r,l),append(l,c),append(c,d)},p(e,t){1&t[0]&&o!==(o=e[0].svgs.help_center+"")&&(a.innerHTML=o),1&t[0]&&n!==(n=e[0].labels.helpCenter)&&attr(a,"aria-label",n),1&t[0]&&p!==(p=e[0].labels.helpCenter+"")&&set_data(d,p),1&t[0]&&u!==(u="mgPlayerJSPreview_help-center-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_show-text-tooltip "+(e[0].isMicroPlayer?"mgPlayerJSPreview_header-icon-micro-wrapper":""))&&attr(r,"class",u)},d(e){e&&detach(r)}}}function create_if_block_25$3(r){let i,a,o=r[0].svgs.bell+"",n,s,l,c,p=r[0].labels.pushNotification+"",d,u,g,m;return{c(){i=element("div"),a=element("button"),s=space(),l=element("div"),c=element("div"),d=text(p),attr(a,"id","mgPlayerJSPreview_icon-show-push-notif-dropdown"),attr(a,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_bell-btn mgPlayerJSPreview_position-center"),attr(a,"aria-label",n=r[0].labels.pushNotification),attr(c,"class","mgPlayerJSPreview_tooltip-title"),attr(l,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-center mgPlayerJSPreview_margin-tb-10"),attr(i,"class",u="mgPlayerJSPreview_bell-btn-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_show-text-tooltip "+(r[0].isMicroPlayer?"mgPlayerJSPreview_header-icon-micro-wrapper":""))},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,s),append(i,l),append(l,c),append(c,d),g||(m=listen(a,"click",r[8]),g=!0)},p(e,t){1&t[0]&&o!==(o=e[0].svgs.bell+"")&&(a.innerHTML=o),1&t[0]&&n!==(n=e[0].labels.pushNotification)&&attr(a,"aria-label",n),1&t[0]&&p!==(p=e[0].labels.pushNotification+"")&&set_data(d,p),1&t[0]&&u!==(u="mgPlayerJSPreview_bell-btn-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_show-text-tooltip "+(e[0].isMicroPlayer?"mgPlayerJSPreview_header-icon-micro-wrapper":""))&&attr(i,"class",u)},d(e){e&&detach(i),g=!1,m()}}}function create_if_block_24$3(r){let i,a,o=r[0].svgs.navbar+"",n,s,l,c,p=r[0].labels.navigationMenu+"",d,u,g,m;return{c(){i=element("div"),a=element("button"),s=space(),l=element("div"),c=element("div"),d=text(p),attr(a,"id","mgPlayerJSPreview_icon-open-navbar"),attr(a,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_navigation-btn mgPlayerJSPreview_position-center"),attr(a,"aria-label",n=r[0].labels.navigationMenu),attr(c,"class","mgPlayerJSPreview_tooltip-title"),attr(l,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-center mgPlayerJSPreview_margin-tb-10"),attr(i,"class",u="mgPlayerJSPreview_navigation-btn-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_show-text-tooltip "+(r[0].isMicroPlayer?"mgPlayerJSPreview_header-icon-micro-wrapper":""))},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,s),append(i,l),append(l,c),append(c,d),g||(m=listen(a,"click",r[7]),g=!0)},p(e,t){1&t[0]&&o!==(o=e[0].svgs.navbar+"")&&(a.innerHTML=o),1&t[0]&&n!==(n=e[0].labels.navigationMenu)&&attr(a,"aria-label",n),1&t[0]&&p!==(p=e[0].labels.navigationMenu+"")&&set_data(d,p),1&t[0]&&u!==(u="mgPlayerJSPreview_navigation-btn-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_show-text-tooltip "+(e[0].isMicroPlayer?"mgPlayerJSPreview_header-icon-micro-wrapper":""))&&attr(i,"class",u)},d(e){e&&detach(i),g=!1,m()}}}function create_if_block$p(r){let i,F,a,o=r[0].svgs.navBar+"",O,n,s,R=0<=r[1].image_url.indexOf("guest_icon")||-1==r[1].image_url.indexOf("png"),N,H=-1==r[1].image_url.indexOf("guest_icon")&&0<=r[1].image_url.indexOf("png"),B,l,U=-1==r[1].user_email.indexOf("anonymous"),V,c,p,d=r[1].role+"",z,j,u,W=!GmCXt.isPlayer(),q,Z,K=!GmCXt.isPlayer(),Y,Q,g,ee=r[0].showLogoutBtn()&&!r[1].signedInWithSso,te,m,h,_=r[0].labels.versionText+"",re,ie,e=GmCXt.conf.version+"",ae,oe,f,v,y,P=r[0].labels.availableOn+"",ne,se,S,w,b,C=r[0].svgs.apple+"",le,k,T,ce=r[0].svgs.playStore+"",pe,x,A,de=r[0].svgs.desktop+"",ue,ge,me,he,J=r[4]&&create_if_block_23$3(r),G=R&&create_if_block_22$3(r),$=H&&create_if_block_21$3(r),E=U&&create_if_block_19$5(r),L=W&&create_if_block_15$6(r),M=!r[0].maintenance&&create_if_block_9$d(r),I=K&&create_if_block_3$h(r),X=r[0].jsonEditor&&create_if_block_2$j(r),D=ee&&create_if_block_1$k(r);return{c(){i=element("div"),J&&J.c(),F=space(),a=element("button"),O=space(),n=element("div"),s=element("div"),G&&G.c(),N=space(),$&&$.c(),B=space(),l=element("div"),E&&E.c(),V=space(),c=element("div"),p=element("div"),z=text(d),j=space(),u=element("div"),L&&L.c(),q=space(),M&&M.c(),Z=space(),I&&I.c(),Y=space(),X&&X.c(),Q=space(),g=element("div"),D&&D.c(),te=space(),m=element("div"),h=element("div"),re=text(_),ie=space(),ae=text(e),oe=space(),f=element("div"),v=element("div"),y=element("div"),ne=text(P),se=space(),S=element("div"),w=element("a"),b=element("div"),le=space(),k=element("a"),T=element("div"),pe=space(),x=element("a"),A=element("div"),ue=space(),ge=element("div"),attr(a,"id","mgPlayerJSPreview_icon-close-navbar"),attr(a,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_navbar-close mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_cursor-pointer"),attr(a,"aria-label","Close NavBar"),attr(s,"class","mgPlayerJSPreview_profile-picture mgPlayerJSPreview_position-relative mgPlayerJSPreview_border-radius-50 mgPlayerJSPreview_inline-block-vm"),attr(p,"class","mgPlayerJSPreview_user-role mgPlayerJSPreview_text-color-light mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_text-capitalize mgPlayerJSPreview_float-left mgPlayerJSPreview_text-overflow-ellipsis"),attr(p,"tabindex","0"),attr(c,"class","mgPlayerJSPreview_user-role-wrapper mgPlayerJSPreview_margin-tb-5"),attr(l,"class","mgPlayerJSPreview_user-info-wrapper mgPlayerJSPreview_inline-block-vm"),attr(n,"class","mgPlayerJSPreview_manage-user-profile-wrapper mgPlayerJSPreview_width-100 mgPlayerJSPreview_primary-color mgPlayerJSPreview_border-color"),attr(h,"class","mgPlayerJSPreview_version-text mgPlayerJSPreview_text-color-light"),attr(h,"tabindex","0"),attr(m,"class","mgPlayerJSPreview_product-details-wrapper"),attr(g,"class","mgPlayerJSPreview_manage-settings-wrapper mgPlayerJSPreview_logout-wrapper mgPlayerJSPreview_width-100"),attr(u,"class","mgPlayerJSPreview_player-nav-menu mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y"),attr(y,"class","mgPlayerJSPreview_footer-text mgPlayerJSPreview_font-weight-550"),attr(y,"tabindex","0"),attr(b,"class","mgPlayerJSPreview_app-logo mgPlayerJSPreview_position-relative mgPlayerJSPreview_float-left mgPlayerJSPreview_cursor-pointer"),attr(w,"id","mgPlayerJSPreview_icon-apple"),attr(w,"class","mgPlayerJSPreview_float-left"),attr(w,"href",GmCXt.conf.websiteUrl),attr(w,"target","_blank"),attr(w,"rel","noopener noreferrer"),attr(T,"class","mgPlayerJSPreview_app-logo mgPlayerJSPreview_position-relative mgPlayerJSPreview_float-left mgPlayerJSPreview_cursor-pointer"),attr(k,"id","mgPlayerJSPreview_icon-play-store"),attr(k,"class","mgPlayerJSPreview_float-left"),attr(k,"href",GmCXt.conf.websiteUrl),attr(k,"target","_blank"),attr(k,"rel","noopener noreferrer"),attr(A,"class","mgPlayerJSPreview_app-logo mgPlayerJSPreview_position-relative mgPlayerJSPreview_float-left mgPlayerJSPreview_cursor-pointer"),attr(x,"id","mgPlayerJSPreview_icon-desktop"),attr(x,"class","mgPlayerJSPreview_float-left"),attr(x,"href",GmCXt.conf.websiteUrl),attr(x,"target","_blank"),attr(x,"rel","noopener noreferrer"),attr(ge,"class","mgPlayerJSPreview_clear"),attr(S,"class","mgPlayerJSPreview_app-logo-wrapper"),attr(v,"class","mgPlayerJSPreview_download-apps-wrapper mgPlayerJSPreview_width-100"),attr(f,"class","mgPlayerJSPreview_footer-wrapper mgPlayerJSPreview_width-100"),attr(i,"id","mgPlayerJSPreview_side-navbar-container"),attr(i,"class","mgPlayerJSPreview_side-navbar-container"),attr(i,"role","region"),attr(i,"aria-label","Menu")},m(e,t){insert(e,i,t),J&&J.m(i,null),append(i,F),append(i,a),a.innerHTML=o,append(i,O),append(i,n),append(n,s),G&&G.m(s,null),append(s,N),$&&$.m(s,null),append(n,B),append(n,l),E&&E.m(l,null),append(l,V),append(l,c),append(c,p),append(p,z),append(i,j),append(i,u),L&&L.m(u,null),append(u,q),M&&M.m(u,null),append(u,Z),I&&I.m(u,null),append(u,Y),X&&X.m(u,null),append(u,Q),append(u,g),D&&D.m(g,null),append(g,te),append(g,m),append(m,h),append(h,re),append(h,ie),append(h,ae),append(i,oe),append(i,f),append(f,v),append(v,y),append(y,ne),append(v,se),append(v,S),append(S,w),append(w,b),b.innerHTML=C,append(S,le),append(S,k),append(k,T),T.innerHTML=ce,append(S,pe),append(S,x),append(x,A),A.innerHTML=de,append(S,ue),append(S,ge),me||(he=listen(a,"click",r[7]),me=!0)},p(e,t){e[4]?J?J.p(e,t):((J=create_if_block_23$3(e)).c(),J.m(i,F)):J&&(J.d(1),J=null),1&t[0]&&o!==(o=e[0].svgs.navBar+"")&&(a.innerHTML=o),(R=2&t[0]?0<=e[1].image_url.indexOf("guest_icon")||-1==e[1].image_url.indexOf("png"):R)?G?G.p(e,t):((G=create_if_block_22$3(e)).c(),G.m(s,N)):G&&(G.d(1),G=null),(H=2&t[0]?-1==e[1].image_url.indexOf("guest_icon")&&0<=e[1].image_url.indexOf("png"):H)?$?$.p(e,t):(($=create_if_block_21$3(e)).c(),$.m(s,null)):$&&($.d(1),$=null),(U=2&t[0]?-1==e[1].user_email.indexOf("anonymous"):U)?E?E.p(e,t):((E=create_if_block_19$5(e)).c(),E.m(l,V)):E&&(E.d(1),E=null),2&t[0]&&d!==(d=e[1].role+"")&&set_data(z,d),W&&L.p(e,t),e[0].maintenance?M&&(M.d(1),M=null):M?M.p(e,t):((M=create_if_block_9$d(e)).c(),M.m(u,Z)),K&&I.p(e,t),e[0].jsonEditor?X?X.p(e,t):((X=create_if_block_2$j(e)).c(),X.m(u,Q)):X&&(X.d(1),X=null),(ee=3&t[0]?e[0].showLogoutBtn()&&!e[1].signedInWithSso:ee)?D?D.p(e,t):((D=create_if_block_1$k(e)).c(),D.m(g,te)):D&&(D.d(1),D=null),1&t[0]&&_!==(_=e[0].labels.versionText+"")&&set_data(re,_),1&t[0]&&P!==(P=e[0].labels.availableOn+"")&&set_data(ne,P),1&t[0]&&C!==(C=e[0].svgs.apple+"")&&(b.innerHTML=C),1&t[0]&&ce!==(ce=e[0].svgs.playStore+"")&&(T.innerHTML=ce),1&t[0]&&de!==(de=e[0].svgs.desktop+"")&&(A.innerHTML=de)},d(e){e&&detach(i),J&&J.d(),G&&G.d(),$&&$.d(),E&&E.d(),L&&L.d(),M&&M.d(),I&&I.d(),X&&X.d(),D&&D.d(),me=!1,he()}}}function create_if_block_23$3(e){let r,i,a,o;return{c(){r=element("div"),i=element("div"),attr(a=element("img"),"class","mgPlayerJSPreview_loader-image"),src_url_equal(a.src,o=e[0].loader())||attr(a,"src",o),attr(a,"alt","loader"),attr(i,"class","ege-loader-wrapper-spinner"),attr(r,"id","ege-spinner"),attr(r,"class","ege-loader-wrapper")},m(e,t){insert(e,r,t),append(r,i),append(i,a)},p(e,t){1&t[0]&&!src_url_equal(a.src,o=e[0].loader())&&attr(a,"src",o)},d(e){e&&detach(r)}}}function create_if_block_22$3(e){let r,t,i;return{c(){attr(r=element("img"),"class","mgPlayerJSPreview_position-center mgPlayerJSPreview_border-radius-50"),src_url_equal(r.src,t=GmCXt.conf.staticContentPath+"user_admin.png")||attr(r,"src",t),attr(r,"alt",i=e[1].first_name)},m(e,t){insert(e,r,t)},p(e,t){2&t[0]&&i!==(i=e[1].first_name)&&attr(r,"alt",i)},d(e){e&&detach(r)}}}function create_if_block_21$3(e){let r,i,a;return{c(){attr(r=element("img"),"class","mgPlayerJSPreview_position-center mgPlayerJSPreview_custom-image mgPlayerJSPreview_border-radius-50"),src_url_equal(r.src,i=e[1].image_url+GmCXt.getCdnSign())||attr(r,"src",i),attr(r,"alt",a=e[1].first_name),attr(r,"tabindex","0")},m(e,t){insert(e,r,t)},p(e,t){2&t[0]&&!src_url_equal(r.src,i=e[1].image_url+GmCXt.getCdnSign())&&attr(r,"src",i),2&t[0]&&a!==(a=e[1].first_name)&&attr(r,"alt",a)},d(e){e&&detach(r)}}}function create_if_block_19$5(e){let r;function i(e){return 15<(e[1].first_name+e[1].last_name).length?create_if_block_20$4:create_else_block$b}let a=i(e),o=a(e);return{c(){r=element("div"),o.c(),attr(r,"class","mgPlayerJSPreview_user-name mgPlayerJSPreview_text-capitalize mgPlayerJSPreview_theme-color mgPlayerJSPreview_font-size-16 mgPlayerJSPreview_line-clamp mgPlayerJSPreview_line-clamp-1"),attr(r,"tabindex","0")},m(e,t){insert(e,r,t),o.m(r,null)},p(e,t){a===(a=i(e))&&o?o.p(e,t):(o.d(1),(o=a(e))&&(o.c(),o.m(r,null)))},d(e){e&&detach(r),o.d()}}}function create_else_block$b(e){let r=e[1].first_name+"",i,a,o=e[1].last_name+"",n;return{c(){i=text(r),a=text("Â "),n=text(o)},m(e,t){insert(e,i,t),insert(e,a,t),insert(e,n,t)},p(e,t){2&t[0]&&r!==(r=e[1].first_name+"")&&set_data(i,r),2&t[0]&&o!==(o=e[1].last_name+"")&&set_data(n,o)},d(e){e&&(detach(i),detach(a),detach(n))}}}function create_if_block_20$4(e){let r=e[1].first_name+"",i,a,o=e[1].last_name+"",n,s,l,c,p=e[1].first_name+"",d,u,g=e[1].last_name+"",m;return{c(){i=text(r),a=text("Â "),n=text(o),s=text("...\n              \n              "),l=element("div"),c=element("div"),d=text(p),u=text("Â "),m=text(g),attr(c,"class","mgPlayerJSPreview_tooltip-title"),attr(l,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-center mgPlayerJSPreview_margin-tb-10")},m(e,t){insert(e,i,t),insert(e,a,t),insert(e,n,t),insert(e,s,t),insert(e,l,t),append(l,c),append(c,d),append(c,u),append(c,m)},p(e,t){2&t[0]&&r!==(r=e[1].first_name+"")&&set_data(i,r),2&t[0]&&o!==(o=e[1].last_name+"")&&set_data(n,o),2&t[0]&&p!==(p=e[1].first_name+"")&&set_data(d,p),2&t[0]&&g!==(g=e[1].last_name+"")&&set_data(m,g)},d(e){e&&(detach(i),detach(a),detach(n),detach(s),detach(l))}}}function create_if_block_15$6(e){let r,i,a,o,n=e[0].svgs.manageAccount+"",s,l,c=e[0].labels.account+"",p,d,u=e[0].guideSegmentation&&e[0].isOwner()&&!e[0].isWestpac&&!e[0].hideMirrorAppCtrl(),g,m=e[0].isOwnerOrAppAdmin()&&!e[0].hideMirrorAppCtrl(),h,_=u&&create_if_block_18$5(e),f=m&&create_if_block_17$5(e),v=!e[0].FT.smbApp&&create_if_block_16$5(e);return{c(){r=element("div"),i=element("div"),a=element("div"),o=element("div"),s=space(),l=element("h4"),p=text(c),d=space(),_&&_.c(),g=space(),f&&f.c(),h=space(),v&&v.c(),attr(o,"class","mgPlayerJSPreview_settings-section-header-icon"),attr(l,"class","mgPlayerJSPreview_settings-section-header-title mgPlayerJSPreview_no-margin"),attr(l,"tabindex","0"),attr(a,"class","mgPlayerJSPreview_settings-section-header"),attr(i,"class","mgPlayerJSPreview_manage-settings-wrapper mgPlayerJSPreview_width-100"),attr(r,"class","mgPlayerJSPreview_settings-outer-wrapper")},m(e,t){insert(e,r,t),append(r,i),append(i,a),append(a,o),o.innerHTML=n,append(a,s),append(a,l),append(l,p),append(i,d),_&&_.m(i,null),append(i,g),f&&f.m(i,null),append(i,h),v&&v.m(i,null)},p(e,t){1&t[0]&&n!==(n=e[0].svgs.manageAccount+"")&&(o.innerHTML=n),1&t[0]&&c!==(c=e[0].labels.account+"")&&set_data(p,c),(u=1&t[0]?e[0].guideSegmentation&&e[0].isOwner()&&!e[0].isWestpac&&!e[0].hideMirrorAppCtrl():u)?_?_.p(e,t):((_=create_if_block_18$5(e)).c(),_.m(i,g)):_&&(_.d(1),_=null),(m=1&t[0]?e[0].isOwnerOrAppAdmin()&&!e[0].hideMirrorAppCtrl():m)?f?f.p(e,t):((f=create_if_block_17$5(e)).c(),f.m(i,h)):f&&(f.d(1),f=null),e[0].FT.smbApp?v&&(v.d(1),v=null):v?v.p(e,t):((v=create_if_block_16$5(e)).c(),v.m(i,null))},d(e){e&&detach(r),_&&_.d(),f&&f.d(),v&&v.d()}}}function create_if_block_18$5(r){let i,a,o=r[0].labels.manageSegments+"",n,s,l,c=r[0].svgs.externalLink+"",p,d,u;return{c(){i=element("button"),a=element("div"),n=text(o),s=space(),l=element("div"),attr(a,"class","mgPlayerJSPreview_item-label mgPlayerJSPreview_text-color-light mgPlayerJSPreview_inline-block-vm"),attr(l,"class","mgPlayerJSPreview_item-icon mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm"),attr(i,"id","mgPlayerJSPreview_icon-change-pass"),attr(i,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_setting-item mgPlayerJSPreview_cursor-pointer"),attr(i,"aria-label",p=r[0].labels.manageSegments)},m(e,t){insert(e,i,t),append(i,a),append(a,n),append(i,s),append(i,l),l.innerHTML=c,d||(u=listen(i,"click",function(){is_function(r[0].openManageSegments)&&r[0].openManageSegments.apply(this,arguments)}),d=!0)},p(e,t){r=e,1&t[0]&&o!==(o=r[0].labels.manageSegments+"")&&set_data(n,o),1&t[0]&&c!==(c=r[0].svgs.externalLink+"")&&(l.innerHTML=c),1&t[0]&&p!==(p=r[0].labels.manageSegments)&&attr(i,"aria-label",p)},d(e){e&&detach(i),d=!1,u()}}}function create_if_block_17$5(r){let i,a,o=r[0].labels.manageSurvey+"",n,s,l,c=r[0].svgs.externalLink+"",p,d,u,g,m=r[0].labels.manageKeywords+"",h,_,f,v=r[0].svgs.externalLink+"",y,P,S,w,b=r[0].labels.findAndReplace+"",C,k,T,x;return{c(){i=element("button"),a=element("div"),n=text(o),s=space(),l=element("div"),d=space(),u=element("button"),g=element("div"),h=text(m),_=space(),f=element("div"),P=space(),S=element("button"),w=element("div"),C=text(b),attr(a,"class","mgPlayerJSPreview_item-label mgPlayerJSPreview_text-color-light mgPlayerJSPreview_inline-block-vm"),attr(l,"class","mgPlayerJSPreview_item-icon mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm"),attr(i,"id","mgPlayerJSPreview_icon-change-pass"),attr(i,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_setting-item mgPlayerJSPreview_cursor-pointer"),attr(i,"aria-label",p=r[0].labels.manageSurvey),attr(g,"class","mgPlayerJSPreview_item-label mgPlayerJSPreview_text-color-light mgPlayerJSPreview_inline-block-vm"),attr(f,"class","mgPlayerJSPreview_item-icon mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm"),attr(u,"id","mgPlayerJSPreview_icon-change-pass"),attr(u,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_setting-item mgPlayerJSPreview_cursor-pointer"),attr(u,"aria-label",y=r[0].labels.manageKeywords),attr(w,"class","mgPlayerJSPreview_item-label mgPlayerJSPreview_text-color-light mgPlayerJSPreview_inline-block-vm"),attr(S,"id","mgPlayerJSPreview_icon-find-n-replace"),attr(S,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_setting-item mgPlayerJSPreview_cursor-pointer"),attr(S,"aria-label",k=r[0].labels.findAndReplace)},m(e,t){insert(e,i,t),append(i,a),append(a,n),append(i,s),append(i,l),l.innerHTML=c,insert(e,d,t),insert(e,u,t),append(u,g),append(g,h),append(u,_),append(u,f),f.innerHTML=v,insert(e,P,t),insert(e,S,t),append(S,w),append(w,C),T||(x=[listen(i,"click",function(){is_function(r[0].openSurveyAnalyticsPortal)&&r[0].openSurveyAnalyticsPortal.apply(this,arguments)}),listen(u,"click",function(){is_function(r[0].openManageKeywords)&&r[0].openManageKeywords.apply(this,arguments)}),listen(S,"click",r[18])],T=!0)},p(e,t){r=e,1&t[0]&&o!==(o=r[0].labels.manageSurvey+"")&&set_data(n,o),1&t[0]&&c!==(c=r[0].svgs.externalLink+"")&&(l.innerHTML=c),1&t[0]&&p!==(p=r[0].labels.manageSurvey)&&attr(i,"aria-label",p),1&t[0]&&m!==(m=r[0].labels.manageKeywords+"")&&set_data(h,m),1&t[0]&&v!==(v=r[0].svgs.externalLink+"")&&(f.innerHTML=v),1&t[0]&&y!==(y=r[0].labels.manageKeywords)&&attr(u,"aria-label",y),1&t[0]&&b!==(b=r[0].labels.findAndReplace+"")&&set_data(C,b),1&t[0]&&k!==(k=r[0].labels.findAndReplace)&&attr(S,"aria-label",k)},d(e){e&&(detach(i),detach(d),detach(u),detach(P),detach(S)),T=!1,run_all(x)}}}function create_if_block_16$5(r){let i,a,o=r[0].labels.changePassword+"",n,s,l,c;return{c(){i=element("button"),a=element("div"),n=text(o),attr(a,"class","mgPlayerJSPreview_item-label mgPlayerJSPreview_text-color-light mgPlayerJSPreview_inline-block-vm"),attr(i,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_setting-item mgPlayerJSPreview_cursor-pointer"),attr(i,"aria-label",s=r[0].labels.changePassword)},m(e,t){insert(e,i,t),append(i,a),append(a,n),l||(c=listen(i,"click",r[19]),l=!0)},p(e,t){1&t[0]&&o!==(o=e[0].labels.changePassword+"")&&set_data(n,o),1&t[0]&&s!==(s=e[0].labels.changePassword)&&attr(i,"aria-label",s)},d(e){e&&detach(i),l=!1,c()}}}function create_if_block_9$d(e){let r,i,a,o=e[0].svgs.settings+"",n,s,l=e[0].labels.userPref+"",c,p,d=e[9](),u,g=d&&create_if_block_11$b(e),m=(GmCXt.FT.creatorApp||e[0].playerMode)&&create_if_block_10$c(e);return{c(){r=element("div"),i=element("div"),a=element("div"),n=space(),s=element("h4"),c=text(l),p=space(),g&&g.c(),u=space(),m&&m.c(),attr(a,"class","mgPlayerJSPreview_settings-section-header-icon mgPlayerJSPreview_settings-icon"),attr(s,"class","mgPlayerJSPreview_settings-section-header-title mgPlayerJSPreview_no-margin"),attr(s,"tabindex","0"),attr(i,"class","mgPlayerJSPreview_settings-section-header"),attr(r,"class","mgPlayerJSPreview_manage-settings-wrapper mgPlayerJSPreview_width-100")},m(e,t){insert(e,r,t),append(r,i),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,c),append(r,p),g&&g.m(r,null),append(r,u),m&&m.m(r,null)},p(e,t){1&t[0]&&o!==(o=e[0].svgs.settings+"")&&(a.innerHTML=o),1&t[0]&&l!==(l=e[0].labels.userPref+"")&&set_data(c,l),d&&g.p(e,t),GmCXt.FT.creatorApp||e[0].playerMode?m?m.p(e,t):((m=create_if_block_10$c(e)).c(),m.m(r,null)):m&&(m.d(1),m=null)},d(e){e&&detach(r),g&&g.d(),m&&m.d()}}}function create_if_block_11$b(r){let i,a,o,e=r[0].selectedLanguage+"",n,s,l,c=r[0].svgs.langExpand+"",p,d,u,g,m,h,_,f=r[0].browserLang+"",v,y,P,S=r[0].selectLanguage(),w,b,C,k,T,x=S&&create_if_block_14$6(r),A=ensure_array_like(r[0].languages),J=[];for(let e=0;e<A.length;e+=1)J[e]=create_each_block$a(get_each_context$a(r,A,e));return{c(){i=element("div"),a=element("button"),o=element("div"),n=text(e),s=space(),l=element("div"),u=space(),g=element("div"),m=element("button"),h=element("div"),_=text("Browser Default ("),v=text(f),y=text(")"),P=space(),x&&x.c(),C=space();for(let e=0;e<J.length;e+=1)J[e].c();attr(o,"class","mgPlayerJSPreview_item-label mgPlayerJSPreview_text-color-light mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_text-overflow-ellipsis"),attr(l,"class",p="mgPlayerJSPreview_dropdown-collapse-expand mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm "+r[5]),attr(a,"id","mgPlayerJSPreview_label-navbar-lang-selection"),attr(a,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_setting-item mgPlayerJSPreview_dropdown-item mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_lang-selection"),attr(a,"aria-label",d=r[0].selectedLanguage),attr(h,"class","mgPlayerJSPreview_lang-name mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_font-size-14"),attr(m,"id","mgPlayerJSPreview_label-navbar-lang-dropdown"),attr(m,"class",w="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_lang-item mgPlayerJSPreview_cursor-pointer lang-active mgPlayerJSPreview_width-100 "+r[6]),attr(m,"aria-label",b="Browser Default ("+r[0].browserLang+")"),attr(g,"class","mgPlayerJSPreview_lang-dropdown-wrapper mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y mgPlayerJSPreview_z-index mgPlayerJSPreview_z-index-max"),attr(i,"class","mgPlayerJSPreview_manage-lang-setting-wrapper mgPlayerJSPreview_position-relative")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),append(a,s),append(a,l),l.innerHTML=c,append(i,u),append(i,g),append(g,m),append(m,h),append(h,_),append(h,v),append(h,y),append(m,P),x&&x.m(m,null),append(g,C);for(let e=0;e<J.length;e+=1)J[e]&&J[e].m(g,null);k||(T=[listen(a,"click",r[11]),listen(m,"click",r[20])],k=!0)},p(t,r){if(1&r[0]&&e!==(e=t[0].selectedLanguage+"")&&set_data(n,e),1&r[0]&&c!==(c=t[0].svgs.langExpand+"")&&(l.innerHTML=c),32&r[0]&&p!==(p="mgPlayerJSPreview_dropdown-collapse-expand mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm "+t[5])&&attr(l,"class",p),1&r[0]&&d!==(d=t[0].selectedLanguage)&&attr(a,"aria-label",d),1&r[0]&&f!==(f=t[0].browserLang+"")&&set_data(v,f),(S=1&r[0]?t[0].selectLanguage():S)?x?x.p(t,r):((x=create_if_block_14$6(t)).c(),x.m(m,null)):x&&(x.d(1),x=null),64&r[0]&&w!==(w="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_lang-item mgPlayerJSPreview_cursor-pointer lang-active mgPlayerJSPreview_width-100 "+t[6])&&attr(m,"class",w),1&r[0]&&b!==(b="Browser Default ("+t[0].browserLang+")")&&attr(m,"aria-label",b),4097&r[0]){A=ensure_array_like(t[0].languages);let e;for(e=0;e<A.length;e+=1){var i=get_each_context$a(t,A,e);J[e]?J[e].p(i,r):(J[e]=create_each_block$a(i),J[e].c(),J[e].m(g,null))}for(;e<J.length;e+=1)J[e].d(1);J.length=A.length}},d(e){e&&detach(i),x&&x.d(),destroy_each(J,e),k=!1,run_all(T)}}}function create_if_block_14$6(e){let r,i=e[0].svgs.langSelect+"";return{c(){attr(r=element("div"),"class","mgPlayerJSPreview_lang-select mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm")},m(e,t){insert(e,r,t),r.innerHTML=i},p(e,t){1&t[0]&&i!==(i=e[0].svgs.langSelect+"")&&(r.innerHTML=i)},d(e){e&&detach(r)}}}function create_if_block_12$a(r){let i,a,o=r[46].name+"",n,s,l,c,p,d,u,g=r[0].selectedLanguage==r[46].name&&r[0].userPrefLang&&create_if_block_13$9(r);return{c(){i=element("button"),a=element("div"),n=text(o),s=space(),g&&g.c(),l=space(),attr(a,"class","mgPlayerJSPreview_lang-name mgPlayerJSPreview_inline-block-vm"),attr(i,"id","mgPlayerJSPreview_label-change-lang"),attr(i,"class",c="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_lang-item mgPlayerJSPreview_cursor-pointer lang-active "+(r[0].selectedLanguage==r[46].name&&r[0].userPrefLang?"mgPlayerJSPreview_lang-selected":"")),attr(i,"aria-label",p=r[46].name)},m(e,t){insert(e,i,t),append(i,a),append(a,n),append(i,s),g&&g.m(i,null),append(i,l),d||(u=listen(i,"click",function(){is_function(r[12](r[46]))&&r[12](r[46]).apply(this,arguments)}),d=!0)},p(e,t){r=e,1&t[0]&&o!==(o=r[46].name+"")&&set_data(n,o),r[0].selectedLanguage==r[46].name&&r[0].userPrefLang?g?g.p(r,t):((g=create_if_block_13$9(r)).c(),g.m(i,l)):g&&(g.d(1),g=null),1&t[0]&&c!==(c="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_lang-item mgPlayerJSPreview_cursor-pointer lang-active "+(r[0].selectedLanguage==r[46].name&&r[0].userPrefLang?"mgPlayerJSPreview_lang-selected":""))&&attr(i,"class",c),1&t[0]&&p!==(p=r[46].name)&&attr(i,"aria-label",p)},d(e){e&&detach(i),g&&g.d(),d=!1,u()}}}function create_if_block_13$9(e){let r,i=e[0].svgs.langSelect+"";return{c(){attr(r=element("div"),"class","mgPlayerJSPreview_lang-select mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_margin-lr-10")},m(e,t){insert(e,r,t),r.innerHTML=i},p(e,t){1&t[0]&&i!==(i=e[0].svgs.langSelect+"")&&(r.innerHTML=i)},d(e){e&&detach(r)}}}function create_each_block$a(e){let r,i=0!=e[46].language.length&&create_if_block_12$a(e);return{c(){i&&i.c(),r=empty()},m(e,t){i&&i.m(e,t),insert(e,r,t)},p(e,t){0!=e[46].language.length?i?i.p(e,t):((i=create_if_block_12$a(e)).c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(e){e&&detach(r),i&&i.d(e)}}}function create_if_block_10$c(r){let i,a,o=r[0].labels.playerMode+"",n,s,l,c,p,d,u,g,m,h;return{c(){i=element("div"),a=element("div"),n=text(o),s=space(),l=element("div"),c=element("label"),p=element("input"),d=space(),u=element("button"),attr(a,"id","mgPlayerJSPreview_label-player-mode"),attr(a,"class","mgPlayerJSPreview_item-label mgPlayerJSPreview_text-color-light mgPlayerJSPreview_player-mode-setting mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_text-overflow-ellipsis"),attr(a,"tabindex","0"),attr(p,"class","mgPlayerJSPreview_user-pref-scope"),attr(p,"type","checkbox"),attr(p,"aria-labelledby","mgPlayerJSPreview_label-player-mode"),attr(u,"class","mgPlayerJSPreview_custom-slider mgPlayerJSPreview_user-pref-scope mgPlayerJSPreview_lbl-btn"),attr(u,"aria-label",g=r[0].labels.playerMode),attr(c,"class","mgPlayerJSPreview_custom-checkbox"),attr(l,"class","mgPlayerJSPreview_option-checkbox"),attr(i,"class","mgPlayerJSPreview_setting-item")},m(e,t){insert(e,i,t),append(i,a),append(a,n),append(i,s),append(i,l),append(l,c),append(c,p),p.checked=r[0].showPlayer,append(c,d),append(c,u),m||(h=[listen(p,"change",r[21]),listen(p,"change",r[22]),listen(u,"click",r[23])],m=!0)},p(e,t){1&t[0]&&o!==(o=e[0].labels.playerMode+"")&&set_data(n,o),1&t[0]&&(p.checked=e[0].showPlayer),1&t[0]&&g!==(g=e[0].labels.playerMode)&&attr(u,"aria-label",g)},d(e){e&&detach(i),m=!1,run_all(h)}}}function create_if_block_3$h(e){let r,i,a,o=e[0].svgs.iconMore+"",n,s,l=e[0].labels.more+"",c,p,d,u=e[0].hasCreatorAccess()&&e[0].FT.manageAccount&&!e[0].isCreator(),g,m=e[0].hasCreatorAccess()&&!e[0].isCreator(),h,_=(e[0].isOwnerOrAppAdmin()||e[0].isCreator())&&e[0].checkInsightEnabled()&&!e[0].FT.smbApp,f,v=e[0].hasCreatorAccess()&&!e[0].isCreator(),y=e[0].FT.taskStatus&&create_if_block_8$e(e),P=u&&create_if_block_7$e(e),S=m&&create_if_block_6$f(e),w=_&&create_if_block_5$f(e),b=v&&create_if_block_4$g(e);return{c(){r=element("div"),i=element("div"),a=element("div"),n=space(),s=element("h4"),c=text(l),p=space(),y&&y.c(),d=space(),P&&P.c(),g=space(),S&&S.c(),h=space(),w&&w.c(),f=space(),b&&b.c(),attr(a,"class","mgPlayerJSPreview_settings-section-header-icon"),attr(s,"class","mgPlayerJSPreview_settings-section-header-title mgPlayerJSPreview_no-margin"),attr(s,"tabindex","0"),attr(i,"class","mgPlayerJSPreview_settings-section-header"),attr(r,"class","mgPlayerJSPreview_manage-settings-wrapper mgPlayerJSPreview_width-100")},m(e,t){insert(e,r,t),append(r,i),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,c),append(r,p),y&&y.m(r,null),append(r,d),P&&P.m(r,null),append(r,g),S&&S.m(r,null),append(r,h),w&&w.m(r,null),append(r,f),b&&b.m(r,null)},p(e,t){1&t[0]&&o!==(o=e[0].svgs.iconMore+"")&&(a.innerHTML=o),1&t[0]&&l!==(l=e[0].labels.more+"")&&set_data(c,l),e[0].FT.taskStatus?y?y.p(e,t):((y=create_if_block_8$e(e)).c(),y.m(r,d)):y&&(y.d(1),y=null),(u=1&t[0]?e[0].hasCreatorAccess()&&e[0].FT.manageAccount&&!e[0].isCreator():u)?P?P.p(e,t):((P=create_if_block_7$e(e)).c(),P.m(r,g)):P&&(P.d(1),P=null),(m=1&t[0]?e[0].hasCreatorAccess()&&!e[0].isCreator():m)?S?S.p(e,t):((S=create_if_block_6$f(e)).c(),S.m(r,h)):S&&(S.d(1),S=null),(_=1&t[0]?(e[0].isOwnerOrAppAdmin()||e[0].isCreator())&&e[0].checkInsightEnabled()&&!e[0].FT.smbApp:_)?w?w.p(e,t):((w=create_if_block_5$f(e)).c(),w.m(r,f)):w&&(w.d(1),w=null),(v=1&t[0]?e[0].hasCreatorAccess()&&!e[0].isCreator():v)?b?b.p(e,t):((b=create_if_block_4$g(e)).c(),b.m(r,null)):b&&(b.d(1),b=null)},d(e){e&&detach(r),y&&y.d(),P&&P.d(),S&&S.d(),w&&w.d(),b&&b.d()}}}function create_if_block_8$e(r){let i,a,o=r[0].labels.taskStatus+"",n,s,l,c;return{c(){i=element("button"),a=element("div"),n=text(o),attr(a,"class","mgPlayerJSPreview_item-label mgPlayerJSPreview_text-color-light mgPlayerJSPreview_inline-block-vm"),attr(i,"id","mgPlayerJSPreview_label-task-status"),attr(i,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_setting-item mgPlayerJSPreview_cursor-pointer"),attr(i,"aria-label",s=r[0].labels.taskStatus)},m(e,t){insert(e,i,t),append(i,a),append(a,n),l||(c=listen(i,"click",r[24]),l=!0)},p(e,t){1&t[0]&&o!==(o=e[0].labels.taskStatus+"")&&set_data(n,o),1&t[0]&&s!==(s=e[0].labels.taskStatus)&&attr(i,"aria-label",s)},d(e){e&&detach(i),l=!1,c()}}}function create_if_block_7$e(r){let i,a,o,n=r[0].labels.manageAccount+"",s,l,c,p=r[0].svgs.externalLink+"",d,u,g;return{c(){i=element("div"),a=element("button"),o=element("div"),s=text(n),l=space(),c=element("div"),attr(o,"class","mgPlayerJSPreview_item-label mgPlayerJSPreview_text-color-light mgPlayerJSPreview_inline-block-vm"),attr(c,"class","mgPlayerJSPreview_item-icon mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm"),attr(a,"id","mgPlayerJSPreview_label-analytics-portal"),attr(a,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_setting-item mgPlayerJSPreview_cursor-pointer"),attr(a,"aria-label",d=r[0].labels.manageAccount),attr(i,"class","mgPlayerJSPreview_manage-settings-wrapper mgPlayerJSPreview_width-100")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,s),append(a,l),append(a,c),c.innerHTML=p,u||(g=listen(a,"click",function(){is_function(r[0].openAdminPortal())&&r[0].openAdminPortal().apply(this,arguments)}),u=!0)},p(e,t){r=e,1&t[0]&&n!==(n=r[0].labels.manageAccount+"")&&set_data(s,n),1&t[0]&&p!==(p=r[0].svgs.externalLink+"")&&(c.innerHTML=p),1&t[0]&&d!==(d=r[0].labels.manageAccount)&&attr(a,"aria-label",d)},d(e){e&&detach(i),u=!1,g()}}}function create_if_block_6$f(r){let i,a,o,n=r[0].labels.customizationCenter+"",s,l,c,p=r[0].svgs.externalLink+"",d,u,g;return{c(){i=element("div"),a=element("button"),o=element("div"),s=text(n),l=space(),c=element("div"),attr(o,"class","mgPlayerJSPreview_item-label mgPlayerJSPreview_text-color-light mgPlayerJSPreview_inline-block-vm"),attr(c,"class","mgPlayerJSPreview_item-icon mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm"),attr(a,"id","mgPlayerJSPreview_label-analytics-portal"),attr(a,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_setting-item mgPlayerJSPreview_cursor-pointer"),attr(a,"aria-label",d=r[0].labels.customizationCenter),attr(i,"class","mgPlayerJSPreview_manage-settings-wrapper mgPlayerJSPreview_width-100")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,s),append(a,l),append(a,c),c.innerHTML=p,u||(g=listen(a,"click",function(){is_function(r[0].openCustCenter())&&r[0].openCustCenter().apply(this,arguments)}),u=!0)},p(e,t){r=e,1&t[0]&&n!==(n=r[0].labels.customizationCenter+"")&&set_data(s,n),1&t[0]&&p!==(p=r[0].svgs.externalLink+"")&&(c.innerHTML=p),1&t[0]&&d!==(d=r[0].labels.customizationCenter)&&attr(a,"aria-label",d)},d(e){e&&detach(i),u=!1,g()}}}function create_if_block_5$f(r){let i,a,o,n=r[0].labels.analyticsPortal+"",s,l,c,p=r[0].svgs.externalLink+"",d,u,g;return{c(){i=element("div"),a=element("button"),o=element("div"),s=text(n),l=space(),c=element("div"),attr(o,"class","mgPlayerJSPreview_item-label mgPlayerJSPreview_text-color-light mgPlayerJSPreview_inline-block-vm"),attr(c,"class","mgPlayerJSPreview_item-icon mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm"),attr(a,"id","mgPlayerJSPreview_label-analytics-portal"),attr(a,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_setting-item mgPlayerJSPreview_cursor-pointer"),attr(a,"aria-label",d=r[0].labels.analyticsPortal),attr(i,"class","mgPlayerJSPreview_manage-settings-wrapper mgPlayerJSPreview_width-100")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,s),append(a,l),append(a,c),c.innerHTML=p,u||(g=listen(a,"click",r[25]),u=!0)},p(e,t){1&t[0]&&n!==(n=e[0].labels.analyticsPortal+"")&&set_data(s,n),1&t[0]&&p!==(p=e[0].svgs.externalLink+"")&&(c.innerHTML=p),1&t[0]&&d!==(d=e[0].labels.analyticsPortal)&&attr(a,"aria-label",d)},d(e){e&&detach(i),u=!1,g()}}}function create_if_block_4$g(e){let r,i,a,o=e[0].labels.defaultMiniPlayerHelp+"",n,s,l,c=e[0].svgs.externalLink+"",p;return{c(){r=element("div"),i=element("a"),a=element("div"),n=text(o),s=space(),l=element("div"),attr(a,"class","mgPlayerJSPreview_item-label mgPlayerJSPreview_text-color-light mgPlayerJSPreview_inline-block-vm"),attr(l,"id","mgPlayerJSPreview_icon-help-center"),attr(l,"aria-label",p=e[0].labels.defaultMiniPlayerHelp),attr(l,"class","mgPlayerJSPreview_item-icon mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm"),attr(i,"class","mgPlayerJSPreview_setting-item mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_text-decoration-none mgPlayerJSPreview_box-sizing mgPlayerJSPreview_border-box"),attr(i,"href",getHelpCenterUrl()),attr(i,"target","_blank"),attr(i,"rel","noopener noreferrer"),attr(r,"class","mgPlayerJSPreview_manage-settings-wrapper mgPlayerJSPreview_width-100")},m(e,t){insert(e,r,t),append(r,i),append(i,a),append(a,n),append(i,s),append(i,l),l.innerHTML=c},p(e,t){1&t[0]&&o!==(o=e[0].labels.defaultMiniPlayerHelp+"")&&set_data(n,o),1&t[0]&&c!==(c=e[0].svgs.externalLink+"")&&(l.innerHTML=c),1&t[0]&&p!==(p=e[0].labels.defaultMiniPlayerHelp)&&attr(l,"aria-label",p)},d(e){e&&detach(r)}}}function create_if_block_2$j(r){let i,a,o,n=r[0].svgs.edit+"",s,l,c,p;return{c(){i=element("div"),a=element("div"),o=element("div"),s=space(),(l=element("h4")).textContent="Edit Org JSON",attr(o,"class","mgPlayerJSPreview_json-editor-icon mgPlayerJSPreview_settings-section-header-icon"),attr(l,"class","mgPlayerJSPreview_settings-section-header-title mgPlayerJSPreview_no-margin"),attr(a,"class","mgPlayerJSPreview_settings-section-header"),attr(i,"id","mgPlayerJSPreview_icon-edit-org-json"),attr(i,"class","mgPlayerJSPreview_manage-settings-wrapper mgPlayerJSPreview_width-100 mgPlayerJSPreview_cursor-pointer")},m(e,t){insert(e,i,t),append(i,a),append(a,o),o.innerHTML=n,append(a,s),append(a,l),c||(p=listen(i,"click",function(){is_function(r[0].editJson(r[2],"org"))&&r[0].editJson(r[2],"org").apply(this,arguments)}),c=!0)},p(e,t){r=e,1&t[0]&&n!==(n=r[0].svgs.edit+"")&&(o.innerHTML=n)},d(e){e&&detach(i),c=!1,p()}}}function create_if_block_1$k(e){let r,i,a=e[0].labels.logoutBtn+"",o,n,s,l;return{c(){r=element("button"),i=element("div"),o=text(a),attr(i,"class","mgPlayerJSPreview_item-label mgPlayerJSPreview_text-color-light mgPlayerJSPreview_inline-block-vm"),attr(r,"id","mgPlayerJSPreview_label-logout-btn"),attr(r,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_setting-item mgPlayerJSPreview_cursor-pointer"),attr(r,"aria-label",n=e[0].labels.logoutBtn)},m(e,t){insert(e,r,t),append(r,i),append(i,o),s||(l=listen(r,"click",logoutServ.logout),s=!0)},p(e,t){1&t[0]&&a!==(a=e[0].labels.logoutBtn+"")&&set_data(o,a),1&t[0]&&n!==(n=e[0].labels.logoutBtn)&&attr(r,"aria-label",n)},d(e){e&&detach(r),s=!1,l()}}}function create_fragment$t(r){let i,a="signin"!==get_store_value(Gm.activeView),o,n,s,l,c=r[0].svgs.accessibility+"",p,d,u,g,m,h=r[0].labels.accessibility+"",_,f,v,F="signin"!==get_store_value(Gm.activeView)&&"forgotpwd"!==get_store_value(Gm.activeView)&&"chatbot"!==get_store_value(Gm.activeView)&&"taskList"!==get_store_value(Gm.activeView),O,R="signin"!==get_store_value(Gm.activeView)&&"forgotpwd"!==get_store_value(Gm.activeView),N,H="signin"!==get_store_value(Gm.activeView)&&"forgotpwd"!==get_store_value(Gm.activeView)&&GmCXt.isPlayer(),B,U="signin"!==get_store_value(Gm.activeView)&&"forgotpwd"!==get_store_value(Gm.activeView)&&!GmCXt.isLXP()&&!r[10](),V,y,P,S=r[0].svgs.close_panel+"",w,z,b,C,k=r[0].labels.closePanel+"",T,x,A,J=r[0].navBarVisible&&"signin"!==get_store_value(Gm.activeView),G,$,j,E=a&&create_if_block_28$2(r),L=F&&create_if_block_27$2(r),M=R&&create_if_block_26$2(r),I=H&&create_if_block_25$3(r),X=U&&create_if_block_24$3(r),D=J&&create_if_block$p(r);return{c(){i=element("div"),E&&E.c(),o=space(),n=element("div"),s=element("div"),l=element("button"),u=space(),g=element("div"),m=element("div"),_=text(h),v=space(),L&&L.c(),O=space(),M&&M.c(),N=space(),I&&I.c(),B=space(),X&&X.c(),V=space(),y=element("div"),P=element("button"),z=space(),b=element("div"),C=element("div"),T=text(k),A=space(),D&&D.c(),G=empty(),attr(l,"id","mgPlayerJSPreview_icon-accessibility"),attr(l,"class",p="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_accessibility-btn mgPlayerJSPreview_position-center "+(r[0].accessibility?"mgPlayerJSPreview_accessibility-btn-active":"")),attr(l,"aria-label",d=r[0].labels.accessibility),attr(m,"class","mgPlayerJSPreview_tooltip-title"),attr(g,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-center mgPlayerJSPreview_margin-tb-10"),attr(s,"class",f="mgPlayerJSPreview_accessibility-btn-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_show-text-tooltip "+(r[0].isMicroPlayer?"mgPlayerJSPreview_header-icon-micro-wrapper":"")),attr(P,"id","mgPlayerJSPreview_icon-close-app-panel"),attr(P,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_close-panel-btn mgPlayerJSPreview_position-center"),attr(P,"aria-label",w=r[0].labels.closePanel),attr(P,"type","button"),attr(C,"class","mgPlayerJSPreview_tooltip-title"),attr(b,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-center mgPlayerJSPreview_margin-tb-10"),attr(y,"class",x="mgPlayerJSPreview_close-panel-btn-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_show-text-tooltip "+(r[0].isMicroPlayer?"mgPlayerJSPreview_header-icon-micro-wrapper":"")),attr(n,"class","mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_float-right"),attr(i,"class","mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_width-100")},m(e,t){insert(e,i,t),E&&E.m(i,null),append(i,o),append(i,n),append(n,s),append(s,l),l.innerHTML=c,append(s,u),append(s,g),append(g,m),append(m,_),append(n,v),L&&L.m(n,null),append(n,O),M&&M.m(n,null),append(n,N),I&&I.m(n,null),append(n,B),X&&X.m(n,null),append(n,V),append(n,y),append(y,P),P.innerHTML=S,append(y,z),append(y,b),append(b,C),append(C,T),insert(e,A,t),D&&D.m(e,t),insert(e,G,t),$||(j=[listen(l,"click",function(){is_function(r[0].setAccessibility)&&r[0].setAccessibility.apply(this,arguments)}),listen(P,"click",function(){is_function(r[0].closeAppPanel)&&r[0].closeAppPanel.apply(this,arguments)})],$=!0)},p(e,t){r=e,a&&E.p(r,t),1&t[0]&&c!==(c=r[0].svgs.accessibility+"")&&(l.innerHTML=c),1&t[0]&&p!==(p="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_accessibility-btn mgPlayerJSPreview_position-center "+(r[0].accessibility?"mgPlayerJSPreview_accessibility-btn-active":""))&&attr(l,"class",p),1&t[0]&&d!==(d=r[0].labels.accessibility)&&attr(l,"aria-label",d),1&t[0]&&h!==(h=r[0].labels.accessibility+"")&&set_data(_,h),1&t[0]&&f!==(f="mgPlayerJSPreview_accessibility-btn-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_show-text-tooltip "+(r[0].isMicroPlayer?"mgPlayerJSPreview_header-icon-micro-wrapper":""))&&attr(s,"class",f),F&&L.p(r,t),R&&M.p(r,t),H&&I.p(r,t),U&&X.p(r,t),1&t[0]&&S!==(S=r[0].svgs.close_panel+"")&&(P.innerHTML=S),1&t[0]&&w!==(w=r[0].labels.closePanel)&&attr(P,"aria-label",w),1&t[0]&&k!==(k=r[0].labels.closePanel+"")&&set_data(T,k),1&t[0]&&x!==(x="mgPlayerJSPreview_close-panel-btn-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_show-text-tooltip "+(r[0].isMicroPlayer?"mgPlayerJSPreview_header-icon-micro-wrapper":""))&&attr(y,"class",x),(J=1&t[0]?r[0].navBarVisible&&"signin"!==get_store_value(Gm.activeView):J)?D?D.p(r,t):((D=create_if_block$p(r)).c(),D.m(G.parentNode,G)):D&&(D.d(1),D=null)},i:noop,o:noop,d(e){e&&(detach(i),detach(A),detach(G)),E&&E.d(),L&&L.d(),M&&M.d(),I&&I.d(),X&&X.d(),D&&D.d(e),$=!1,run_all(j)}}}function getHelpCenterUrl(){var e=GmCXt.getOrgSettings();let t;return(t=GmCXt.isEmpty(e)||GmCXt.isEmpty(e.helpUrl)?t:GmCXt.addHttpIfMissing(e.helpUrl))||GmCXt.model.organization.settings._obj.helpUrl._default}function instance$s(e,t,r){let i={},a={},o=!1,n="",s=!1,{unique:l={}}=t,c=Gm.CurrentPage.subscribe(e=>{}),p=Gm.selectedLang.subscribe(e=>{});function d(){rootScope.navBarVisible&&mg$$1(".mgPlayerJSPreview_player-nav-menu").css({height:window.innerHeight-mg$$1(".mgPlayerJSPreview_manage-user-profile-wrapper").innerHeight()-mg$$1(".mgPlayerJSPreview_logout-wrapper").innerHeight()-mg$$1(".mgPlayerJSPreview_footer-wrapper").innerHeight()-30})}function u(){rootScope.addPanelOverlay(),r(0,rootScope.navBarVisible=mg$$1("#mgPlayerJSPreview_side-navbar-container").is(":visible"),rootScope),rootScope.navBarVisible?(r(0,rootScope.navBarVisible=!1,rootScope),rootScope.hidePanelOverlay()):(r(0,rootScope.navBarVisible=!0,rootScope),rootScope.showPanelOverlay(),GmCXt.timeout(function(){d()},500))}Gm.lanDropDownVisible.subscribe(e=>{r(16,o=e)}),Gm.loading.subscribe(e=>{r(4,s=e)}),rootScope.setAccessibility=function(){r(0,rootScope.accessibility=!rootScope.accessibility,rootScope),Gm.accessibility.set(rootScope.accessibility),storage.accessibility.set(rootScope.accessibility)},rootScope.showLogoutBtn(),mg$$1(window).on("resize",d),onMount(()=>{get_store_value(Gm.activeView),r(2,a=rootScope.organization),p(),rootScope.language}),i=rootScope.user;function g(e){var t=GmCXt.user;GmCXt.isEmpty(t)||(rootScope.checkAppList().then(function(){!GmCXt.isEmpty(rootScope.appList)&&rootScope.activeAppId&&r(0,rootScope.selectedApp=rootScope.appList["app:"+rootScope.activeAppId].title,rootScope)}),r(3,n=GmCXt.brandLogo()),r(3,n=rootScope.currBrandLogo||n))}let m=t=>{r(0,rootScope.contextTours=[],rootScope),t?Gm.selectedLang.set(t.language):Gm.selectedLang.set("default"),t&&t.name?storage.userPrefLang.set(t.language):(t=rootScope.defaultLang,rootScope.languages.filter(function(e){e.language===rootScope.browserLang&&(t=e)}),storage.userPrefLang.set(!1)),r(0,rootScope.language=t.language,rootScope),storage.activeLang.set(t.language),storage.activeVoice.set(t.voice),r(0,rootScope.selectedLanguage=t.name,rootScope),rootScope.updateLabels(),rootScope.resetNotificationData(),rootScope.setNotifTours(),g(),r(16,o=!1),mg$$1(".mgPlayerJSPreview_lang-dropdown-wrapper").slideUp(100),GmCXt.refreshView=!0,r(15,l={}),Gm.labels.set(rootScope.labels),u(),rootScope.FT.creatorApp&&(rootScope.setCurrentPage("allguides"),Gm.breadCrumb.set([]),r(0,rootScope.refreshAllGuides=!0,rootScope))},h=(e,t)=>{Gm.loading.set(!0),u(),"findNReplace"===e&&(e=t,Gm.activeView.set("findNReplace"),e)&&e.step_settings&&e.step_settings.element&&Gm.routeAction.set({action:"findNReplace",data:{auto_jquery:e.step_settings.element.criteria.auto_jquery,jquery_selector:e.step_settings.element.criteria.jquery_selector}}),mg$$1(".ege-login-logout-wrapper").slideUp(200),mg$$1(".ege-user-image-wrapper").removeClass("active")};Gm.routeAction.subscribe(e=>{e&&"stepFindNReplace"===e.action&&e.data&&h("findNReplace",e.data.step)});onMount(g),onDestroy(()=>{c()});let _="",f="";return e.$$set=e=>{"unique"in e&&r(15,l=e.unique)},e.$$.update=()=>{65536&e.$$.dirty[0]&&r(5,_=o?"mgPlayerJSPreview_rotate-180":""),1&e.$$.dirty[0]&&r(6,f=rootScope.userPrefLang?"":"mgPlayerJSPreview_lang-selected")},[rootScope,i,a,n,s,_,f,u,function(){new NotificationModal({target:document.body,props:{pushNotificationDropdown:!0}})},function(){return!!(rootScope.enableTranslation&&1<rootScope.languages.length)},function(){return!(!GmCXt.isPlayer()||!i||-1===i.user_email.indexOf("anonymous")||(()=>{if(GmCXt.organization){var e=GmCXt.organization.admin_settings;if(e.guide_translation&&e.language_settings&&e.language_settings.translations.length)return!0}return!1})())},function(e){e.stopPropagation(),o?(e.stopPropagation(),r(16,o=!1),mg$$1(".mgPlayerJSPreview_lang-dropdown-wrapper").slideUp(100)):(r(16,o=!0),mg$$1(".mgPlayerJSPreview_lang-dropdown-wrapper").slideDown(200)),e.stopPropagation(),mg$$1(".mgPlayerJSPreview_setting-dropdown-userPref").slideUp(100),d()},m,h,()=>{Gm.loading.set(!0),"taskStatus"===get_store_value(Gm.activeView)?rootScope.setActivePage("taskStatus"):(g(),rootScope.refreshAllData())},l,o,e=>{e.target.src=rootScope.staticContentPath+rootScope.appConfig.defaultIcon},()=>h("findNReplace"),()=>{Gm.loading.set(!0),Gm.activeView.set("changePw"),u()},()=>m(""),function(){rootScope.showPlayer=this.checked,r(0,rootScope)},()=>{Gm.loading.set(!0),rootScope.togglePlayerMode(),u()},()=>{Gm.loading.set(!0),r(0,rootScope.showPlayer=!rootScope.showPlayer,rootScope),rootScope.togglePlayerMode(),u()},()=>{Gm.loading.set(!0),Gm.activeView.set("taskStatus"),u()},()=>rootScope.isCreator()?rootScope.openSurveyAnalyticsPortal():rootScope.openAppAnalyticsPortal()]}logoutServ.logout=function(t){Gm.loading.set(!0),t=t||"user",GmCXt.log(1,"User logged out: "+t),rootScope.videoUploadMessage=!1,rootScope.uploadProgressBar=!1,Gm.statusBar.set("logoutServ"),rootScope.uploadInProgress=!1,rootScope.closeAppPopup(),rootScope.isElectron?GmCXt.stopVideoStep_():(e={action:"mgPlayerJSPreview_action:stop_video_upload_in_background"},GmCXt.sendMessageToBackgroundService(e));var e={action:"mgPlayerJSPreview_action:stop_screencast"};function r(e){logoutServ.clearSession(t),rootScope.showWidget(),rootScope.removeChatIcon(),rootScope.hideCurrentPageGuidesIndicator(),Gm.loading.set(!1)}GmCXt.sendMessageToBackgroundService(e),"logout_button_click"===t?api.userSignOut(r):r()},logoutServ.clearSession=function(e){let t=!1;var r=GmCXt.user;GmCXt.isEmpty(r)||(rootScope.showPlayer=!1,rootScope.initPlayerMode(!0),storage.clearIndexedDb(GmCXt.conf.appName+GmCXt.conf.env+"DB"),"user"!==e&&(t=!0)),storage.dual_auth_token.get().then(function(t){storage.lastSsoRedirectTime.get().then(function(e){storage.reset(),t&&storage.dual_auth_token.set(t,rootScope.thirtyDaysInSeconds),e&&storage.lastSsoRedirectTime.set(e)})}),storage.confirmLinkGuidePub.remove(),storage.taskList.remove(),rootScope.updateLabels(),rootScope.copiedStep=!1,rootScope.copiedTour=!1,rootScope.edLogin=!1,Gm.loading.set(!1),Gm.miniPlayer.set(!1),rootScope.chatBot=!1,rootScope.chatBotMin=!1,rootScope.user=!1,rootScope.organization=!1,rootScope.enableTranslation=!1,rootScope.activeSortFilter="",rootScope.descOrder=!1,rootScope.contextTours={},rootScope.uploadStepProgressBar=!1,rootScope.pendingStepCount=-1,GmCXt.enableTranslation=!1,rootScope.publishedTours=[],rootScope.resetCreatorData(),GmCXt.edCandidates=null,rootScope.uploadProgressBar=!1,Gm.statusBar.set("logout"),rootScope.videoUploadMessage=!1,GmCXt.user={},GmCXt.organization={},rootScope.updateWidgetIconSendMsg(),rootScope.resetAppData(),GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:user_logout",data:{startInterval:t}}),rootScope.navBarVisible=!1,rootScope.hidePanelOverlay();GmCXt.sendMessageToBackgroundService({action:"mgPlayerJSPreview_action:stop_sync_interval"}),GmCXt.isExtension()&&GmCXt.storage().set({login_state:!1}),rootScope.clearStorage().then(function(){rootScope.setCurrentPage(""),rootScope.setActivePage("signin"),Gm.user.set({}),Gm.accessToken.set(""),Gm.organization.set({}),Gm.tours.set([]),Gm.appOnDomain.set({}),Gm.loggedIn.set(!1),Gm.appData.set([]),Gm.allGuides.set([]),Gm.activeAppData.set({}),Gm.activeAppId.set(""),Gm.allCategories.set([]),Gm.subCategories.set({}),Gm.breadCrumb.set([]),Gm.breadcrumbCategories.set([]),Gm.validatedSegments.set({}),Gm.isPageReloaded.set(!1),Gm.guidePlayTracker.set({}),Gm.showPlayer.set(!1),Gm.accessibility.set(!1),Gm.playedTour.set([]),Gm.isMediaPlayerOn.set(!1),Gm.appList.set([]),Gm.currentTour.set({}),Gm.dialogBox.set({}),Gm.showModal.set({}),Gm.publishedTours.set({}),Gm.CurrentPageTours.set([]),Gm.MyGuidePageTours.set([]),Gm.parent.set(),Gm.categoryTours.set([]),Gm.childCategories.set(),Gm.isNotificationReqd.set(!0),Gm.dShowAgain.set(!1),Gm.wLater.set(!1),Gm.loading.set(!1),Gm.activeSortFilterStore.set(),Gm.searchTours.set([]),Gm.selectedBranch.set(!1),Gm.selectedLang.set("default"),Gm.lanDropDownVisible.set(!1),Gm.miniPlayer.set(!1),Gm.showNoTour.set(!1),Gm.isTaskListVisible.set(!1),Gm.isStepFrame.set(!1),Gm.params.set({}),Gm.routeAction.set({}),Gm.filters.set({}),Gm.statusBar.set(""),Gm.labels.set(rootScope.labels),Gm.slideState.set({}),Gm.slideshowInstance.set({}),Gm.isTourListRefresh.set(!1),Gm.allTaskList.set([]),Gm.taskListCount.set(0),Gm.searchTerm.set("")}),t&&(rootScope.appConfig.login.SSO||GmCXt.isMyGuide())&&GmCXt.isPlayer()&&rootScope.isAllowedDomain()&&GmCXt.urlParts&&rootScope.signInWithSso()};class UserMenu extends SvelteComponent{constructor(e){super(),init(this,e,instance$s,create_fragment$t,safe_not_equal,{unique:15},null,[-1,-1])}}function create_if_block$o(r){let i,a,o,n,e;return{c(){i=element("div"),a=element("div"),o=space(),n=element("img"),attr(a,"class","mgPlayerJSPreview_inline-block-vm"),attr(n,"id","mgPlayerJSPreview_header-widget-icon"),attr(n,"class","mgPlayerJSPreview_header-widget-icon"),attr(n,"alt","Cornerstone"),src_url_equal(n.src,e=rootScope.getBasePath("common/img/logo-admin.png"))||attr(n,"src",e),attr(i,"class","mgPlayerJSPreview_header-banner-wrapper mgPlayerJSPreview_position-relative")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=r[0],append(i,o),append(i,n)},p(e,t){1&t&&(a.innerHTML=e[0])},d(e){e&&detach(i)}}}function create_fragment$s(e){let r,i,a,o,n,s,l=(o=new UserMenu({}),("login-view"==rootScope.currentView||"forgot-password-view"==rootScope.currentView)&&create_if_block$o(e));return{c(){r=element("div"),i=element("div"),a=element("div"),create_component(o.$$.fragment),n=space(),l&&l.c(),attr(a,"class","mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_width-100"),attr(i,"class","mgPlayerJSPreview_panel-header-wrapper mgPlayerJSPreview_width-100 mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between"),toggle_class(i,"mgPlayerJSPreview_bg-white",rootScope.isMicroPlayer),toggle_class(i,"mgPlayerJSPreview_panel-header-micro-wrapper",rootScope.isMicroPlayer),attr(r,"id","ege-header"),attr(r,"class","ege-panel-header")},m(e,t){insert(e,r,t),append(r,i),append(i,a),mount_component(o,a,null),append(r,n),l&&l.m(r,null),s=!0},p(e,[t]){"login-view"!=rootScope.currentView&&"forgot-password-view"!=rootScope.currentView||l.p(e,t)},i(e){s||(transition_in(o.$$.fragment,e),s=!0)},o(e){transition_out(o.$$.fragment,e),s=!1},d(e){e&&detach(r),destroy_component(o),l&&l.d()}}}function instance$r(e,t,r){let i="";return onMount(()=>{fetch(rootScope.getBasePath("common/img/login_header.svg")).then(e=>e.text()).then(e=>{r(0,i=e)})}),[i]}class Header extends SvelteComponent{constructor(e){super(),init(this,e,instance$r,create_fragment$s,safe_not_equal,{})}}function create_if_block$n(e){let r;return{c(){(r=element("div")).textContent=""+rootScope.labels.captchaError,attr(r,"id","mgPlayerJSPreview_input-captcha-error"),attr(r,"class","error-input-wrapper captcha-error-wrapper active")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_fragment$r(r){let i,a,o,n,s,l,c=rootScope.svgs.refresh+"",p,d,u,g,m,h=r[0]&&create_if_block$n();return{c(){i=element("div"),a=element("div"),o=element("i"),n=text(r[3]),s=space(),l=element("button"),p=space(),d=element("input"),u=space(),h&&h.c(),attr(o,"id","mgPlayerJSPreview_captcha-image"),attr(o,"selectable","False"),attr(l,"id","autorenew"),attr(l,"aria-label",rootScope.labels.refresh),attr(l,"class","mgPlayerJSPreview_captcha-refresh-btn mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_lbl-btn-refresh mgPlayerJSPreview_refresh-btn"),attr(l,"type","button"),attr(d,"id","mgPlayerJSPreview_input-captcha"),attr(d,"class","mgPlayerJSPreview_input-captcha-text mgPlayerJSPreview_font-size-16 ege-inline-block-vm"),attr(d,"placeholder",rootScope.labels.placeholderEnterCaptcha),d.required=!0,attr(a,"class","mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center"),attr(i,"class","mgPlayerJSPreview_input-captcha mgPlayerJSPreview_margin-tb-10 mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_flex-direction-column")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),append(a,s),append(a,l),l.innerHTML=c,append(a,p),append(a,d),set_input_value(d,r[2]),r[8](d),append(i,u),h&&h.m(i,null),g||(m=[listen(l,"click",r[4]),listen(d,"input",r[7]),listen(d,"change",r[5]),listen(d,"focus",r[9])],g=!0)},p(e,[t]){8&t&&set_data(n,e[3]),4&t&&d.value!==e[2]&&set_input_value(d,e[2]),e[0]?h||((h=create_if_block$n()).c(),h.m(i,null)):h&&(h.d(1),h=null)},i:noop,o:noop,d(e){e&&detach(i),r[8](null),h&&h.d(),g=!1,run_all(m)}}}function instance$q(e,t,i){let{captchaValid:a=!1}=t,r=t.showCaptchaError,o=t.inputCaptchaRef,n,s;function l(){i(2,n=""),i(6,a=!1),i(3,s="");let e="";for(var t="0123456789ABCDEFGHJKLMNOPQRSTUVWXYZabdfghijkmnopqrstuvwxyz",r=0;r<6;r++)e+=t.charAt(Math.random()*t.length);i(3,s=e)}l();return e.$$set=e=>{"captchaValid"in e&&i(6,a=e.captchaValid),"showCaptchaError"in e&&i(0,r=e.showCaptchaError),"inputCaptchaRef"in e&&i(1,o=e.inputCaptchaRef)},[r,o,n,s,l,function(){i(6,a=!1),s===n&&(i(6,a=!0),Gm.loading.set(!1))},a,function(){n=this.value,i(2,n)},function(e){binding_callbacks[e?"unshift":"push"](()=>{o=e,i(1,o)})},()=>i(0,r=!1)]}class Captcha extends SvelteComponent{constructor(e){super(),init(this,e,instance$q,create_fragment$r,safe_not_equal,{captchaValid:6,showCaptchaError:0,inputCaptchaRef:1})}}function create_if_block_10$b(e){let r,i,a,o,n,s,l=(e[3]?.privacyPolicy||rootScope.labels.privacyPolicy)+"",c,p,d,u,g,m,h=(e[3]?.termsOfService||rootScope.labels.termsOfService)+"",_,f;return{c(){r=element("div"),(i=element("span")).textContent="Â© "+rootScope.brandName,a=space(),(o=element("span")).textContent="|",n=space(),s=element("a"),c=text(l),d=space(),(u=element("span")).textContent="|",g=space(),m=element("a"),_=text(h),attr(o,"class","footer-text-separator"),attr(s,"id","mgPlayerJSPreview_footer-privacy-policy"),attr(s,"href",rootScope.config.privacyPolicyUrl),attr(s,"target","_blank"),attr(s,"aria-label",p=e[3]?.privacyPolicy||rootScope.labels.privacyPolicy),attr(s,"rel","noopener noreferrer"),attr(u,"class","footer-text-separator"),attr(m,"id","mgPlayerJSPreview_footer-terms-of-service"),attr(m,"href",rootScope.config.termsURL),attr(m,"target","_blank"),attr(m,"aria-label",f=e[3]?.termsOfService||rootScope.labels.termsOfService),attr(m,"rel","noopener noreferrer"),attr(r,"class","footer-panel-copyright-text")},m(e,t){insert(e,r,t),append(r,i),append(r,a),append(r,o),append(r,n),append(r,s),append(s,c),append(r,d),append(r,u),append(r,g),append(r,m),append(m,_)},p(e,t){8&t&&l!==(l=(e[3]?.privacyPolicy||rootScope.labels.privacyPolicy)+"")&&set_data(c,l),8&t&&p!==(p=e[3]?.privacyPolicy||rootScope.labels.privacyPolicy)&&attr(s,"aria-label",p),8&t&&h!==(h=(e[3]?.termsOfService||rootScope.labels.termsOfService)+"")&&set_data(_,h),8&t&&f!==(f=e[3]?.termsOfService||rootScope.labels.termsOfService)&&attr(m,"aria-label",f)},d(e){e&&detach(r)}}}function create_if_block_6$e(e){let r;var t=!GmCXt.isMicroPlayer();let i,a=t&&create_if_block_9$c();function o(e){return"email"==e[0].feedback_type?create_if_block_7$d:"url"==e[0].feedback_type?create_if_block_8$d:void 0}let n=o(e),s=n&&n(e);return{c(){r=element("div"),a&&a.c(),i=space(),s&&s.c(),attr(r,"class","footer-panel-copyright-text mgPlayerJSPreview_footer-send-feedback"),toggle_class(r,"mgPlayerJSPreview_footer-send-feedback-mp",GmCXt.isMicroPlayer())},m(e,t){insert(e,r,t),a&&a.m(r,null),append(r,i),s&&s.m(r,null)},p(e,t){n===(n=o(e))&&s?s.p(e,t):(s&&s.d(1),(s=n&&n(e))&&(s.c(),s.m(r,null)))},d(e){e&&detach(r),a&&a.d(),s&&s.d()}}}function create_if_block_9$c(e){let r;return{c(){(r=element("span")).textContent="|",attr(r,"class","footer-text-separator")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block_8$d(e){let r,i=(e[3]?.sendFeedback||rootScope.labels.sendFeedback)+"",a;return{c(){r=element("button"),a=text(i),attr(r,"href",e[1]),attr(r,"target","_blank"),attr(r,"rel","noopener noreferrer"),attr(r,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_cursor-pointer"),attr(r,"aria-label",rootScope.labels.sendFeedback)},m(e,t){insert(e,r,t),append(r,a)},p(e,t){8&t&&i!==(i=(e[3]?.sendFeedback||rootScope.labels.sendFeedback)+"")&&set_data(a,i),2&t&&attr(r,"href",e[1])},d(e){e&&detach(r)}}}function create_if_block_7$d(r){let i,a=(r[3]?.sendFeedback||rootScope.labels.sendFeedback)+"",o,n,s;return{c(){i=element("button"),o=text(a),attr(i,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_cursor-pointer"),attr(i,"aria-label",rootScope.labels.sendFeedback)},m(e,t){insert(e,i,t),append(i,o),n||(s=listen(i,"click",r[4]),n=!0)},p(e,t){8&t&&a!==(a=(e[3]?.sendFeedback||rootScope.labels.sendFeedback)+"")&&set_data(o,a)},d(e){e&&detach(i),n=!1,s()}}}function create_if_block_2$i(e){let r,i,a,o=!rootScope.currentPageOnly&&create_if_block_5$e(),n=("currentpage"===e[2]||"currentPageSearchPage"===e[2])&&!rootScope.currentPageOnly&&create_if_block_4$f(e),s=("allguides"===e[2]||"allguidesSearchPage"===e[2])&&create_if_block_3$g(e);return{c(){r=element("div"),o&&o.c(),i=space(),n&&n.c(),a=space(),s&&s.c(),attr(r,"class","footer-panel-copyright-text")},m(e,t){insert(e,r,t),o&&o.m(r,null),append(r,i),n&&n.m(r,null),append(r,a),s&&s.m(r,null)},p(e,t){"currentpage"!==e[2]&&"currentPageSearchPage"!==e[2]||rootScope.currentPageOnly?n&&(n.d(1),n=null):n||((n=create_if_block_4$f(e)).c(),n.m(r,a)),"allguides"===e[2]||"allguidesSearchPage"===e[2]?s||((s=create_if_block_3$g(e)).c(),s.m(r,null)):s&&(s.d(1),s=null)},d(e){e&&detach(r),o&&o.d(),n&&n.d(),s&&s.d()}}}function create_if_block_5$e(e){let r;return{c(){(r=element("span")).textContent="|",attr(r,"class","footer-text-separator")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block_4$f(r){let i,a,o;return{c(){(i=element("button")).textContent=""+rootScope.labels.allGuides,attr(i,"id","mgPlayerJSPreview_go-to-all-guides"),attr(i,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_cursor-pointer"),attr(i,"aria-label",rootScope.labels.allGuides)},m(e,t){insert(e,i,t),a||(o=listen(i,"click",r[5]),a=!0)},d(e){e&&detach(i),a=!1,o()}}}function create_if_block_3$g(r){let i,a,o;return{c(){(i=element("button")).textContent=""+rootScope.labels.currentPage,attr(i,"id","mgPlayerJSPreview_go-to-current-page"),attr(i,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_cursor-pointer"),attr(i,"aria-label",rootScope.labels.currentPage)},m(e,t){insert(e,i,t),a||(o=listen(i,"click",r[6]),a=!0)},d(e){e&&detach(i),a=!1,o()}}}function create_if_block_1$j(e){let r;return{c(){(r=element("div")).textContent=""+rootScope.labels.wbFooterText,attr(r,"class","footer-panel-copyright-text")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block$m(e){let r;return{c(){(r=element("div")).textContent=rootScope.labels.versionText+" "+rootScope.appVersion,attr(r,"class","footer-panel-copyright-text mgPlayerJSPreview_float-right")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_fragment$q(e){let r,i=!GmCXt.isMicroPlayer()&&!GmCXt.isWB(),a,o=GmCXt.isPlayer()&&!GmCXt.isWB()&&enableSendFeedback()&&!GmCXt.isWBC(),n,s=GmCXt.isMicroPlayer()&&!GmCXt.isWBC(),l;var t=GmCXt.isWB();let c;var p=GmCXt.isWB();let d,u,g=i&&create_if_block_10$b(e),m=o&&create_if_block_6$e(e),h=s&&create_if_block_2$i(e),_=t&&create_if_block_1$j(),f=p&&create_if_block$m();return{c(){r=element("div"),g&&g.c(),a=space(),m&&m.c(),n=space(),h&&h.c(),l=space(),_&&_.c(),c=space(),f&&f.c(),d=space(),attr(u=element("div"),"class","ege-clear"),attr(r,"id","footer"),attr(r,"class","footer-panel "+(GmCXt.isMicroPlayer()?"mgPlayerJSPreview_z-index mgPlayerJSPreview_z-index-max":"")+" "+(GmCXt.isWBMicroPlayer()?"mgPlayerJSPreview_display-none":""))},m(e,t){insert(e,r,t),g&&g.m(r,null),append(r,a),m&&m.m(r,null),append(r,n),h&&h.m(r,null),append(r,l),_&&_.m(r,null),append(r,c),f&&f.m(r,null),append(r,d),append(r,u)},p(e,[t]){i&&g.p(e,t),o&&m.p(e,t),s&&h.p(e,t)},i:noop,o:noop,d(e){e&&detach(r),g&&g.d(),m&&m.d(),h&&h.d(),_&&_.d(),f&&f.d()}}}function enableSendFeedback(){return!!GmCXt.getAppSetting("enable_send_feedback")}function instance$p(e,t,r){let i={},a="",o=!1,n=get_store_value(Gm.labels);let s=Gm.labels.subscribe(e=>{r(3,n=e)}),l=Gm.CurrentPage.subscribe(e=>{r(2,o=e)});onMount(()=>{r(0,i=GmCXt.getBrandingSetting()),i.feedback_url&&-1===i.feedback_url.indexOf("http")?r(1,a="https://"+i.feedback_url):r(1,a=i.feedback_url)}),onDestroy(()=>{l(),s()});return[i,a,o,n,function(){var e={action:"mgPlayerJSPreview_action:send_feedback",mgdata:{feedback_email:i.feedback_email}};GmCXt.sendToParentWindow(e)},()=>{rootScope.setCurrentPage("allguides"),Gm.breadCrumb.set([])},()=>{rootScope.setCurrentPage("currentpage"),Gm.breadCrumb.set([])}]}class Footer extends SvelteComponent{constructor(e){super(),init(this,e,instance$p,create_fragment$q,safe_not_equal,{})}}let modal={};function getGuideActiveEnvs(){var e=[];if(rootScope.guideEnvs&&rootScope.guideEnvs.length)for(var t=0;t<rootScope.guideEnvs.length;t++){var r=rootScope.guideEnvs[t];rootScope.appEnvs&&rootScope.appEnvs.includes(r)&&e.push(r)}return e}function reselectElem(){GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:reselect_edit_step_element,task:edit_step"})}function reselectBeacon(){GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:reselect_beacon_element"})}function close(){mg$$1(".mgPlayerJSPreview_overlay-container").remove(),mg$$1(".ege-popup").remove(),mg$$1(".ege-popup-link-guide").remove(),mg$$1(".mgPlayerJSPreview_category-delete-popup").remove()}function getDefaultScheduleOptions(){var e={},t=new Date,r=t.getMonth()+1,i=(r<10&&(r="0"+r),t.getDate(),t.getFullYear()),a=9<t.getDate()?t.getDate():"0"+t.getDate(),t=(9<t.getHours()?t.getHours():"0"+t.getHours())+":"+(9<t.getMinutes()?t.getMinutes():"0"+t.getMinutes());return e.default_date=i+"-"+r+"-"+a,e.default_time=t,e}function getSchedulePubHTML(){var e=getDefaultScheduleOptions();return"<div class='mgPlayerJSPreview_pub-schedule-checkbox-container mgPlayerJSPreview_process-msg mgPlayerJSPreview_width-100 mgPlayerJSPreview_text-align-center mgPlayerJSPreview_padding-lr-15'><input id='mgPlayerJSPreview_checkbox-tour-schedule-pub' class='mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_input-checkbox-custom' type='checkbox' name='pub-schedule-enable'><label class='mgPlayerJSPreview_inline-block-vm'>"+rootScope.labels.schedulePublishCheckbox+"</label></div><div class='mgPlayerJSPreview_pub-date-container'><div class='mgPlayerJSPreview_pub-date-label'> "+rootScope.labels.date+"</div><div><input min='"+e.default_date+"' type='date' id='mgPlayerJSPreview_pub-schedule-date' name='mgPlayerJSPreview_pub-schedule-date' value='"+e.default_date+"'  class='mgPlayerJSPreview_input-text mgPlayerJSPreview_input-type-text'></div><div class='mgPlayerJSPreview_pub-date-label'> "+rootScope.labels.time+"</div><div><input min='"+e.default_time+"' type='time' id='mgPlayerJSPreview_pub-schedule-time' name='mgPlayerJSPreview_pub-schedule-date' value='"+e.default_time+"'  class='mgPlayerJSPreview_input-text mgPlayerJSPreview_input-type-text'></div><div class='mgPlayerJSPreview_invalid-pub-time error-input-wrapper'> "+rootScope.labels.invalidTimeLabel+" </div></div>"}function checkTimeValidity(){var e=mg$$1("#mgPlayerJSPreview_pub-schedule-date").val()+"T"+mg$$1("#mgPlayerJSPreview_pub-schedule-time").val();Date.parse(e)<Date.now()?mg$$1(".mgPlayerJSPreview_invalid-pub-time").show():mg$$1(".mgPlayerJSPreview_invalid-pub-time").hide()}function isPublishedOnTopEnv(){return!(!rootScope.guideEnvs||mg$$1(".mgPlayerJSPreview_active-progress").length!==rootScope.guideEnvs.length)}function get_each_context$9(e,t,r){e=e.slice();return e[52]=t[r],e}function create_if_block_8$c(e){let r,i,a,o,n,s,l,c,p=e[17]&&create_if_block_12$9(e),d=1===e[0].appConfig.login.guideme&&create_if_block_10$a(e),u=1===e[0].appConfig.login.SSO&&create_if_block_9$b(e);return{c(){r=element("div"),p&&p.c(),i=space(),a=element("div"),o=element("form"),(n=element("h2")).textContent="Cornerstone Guide",s=space(),d&&d.c(),l=space(),u&&u.c(),attr(n,"class","mgPlayerJSPreview_font-size-26 mgPlayerJSPreview_text-align-center mgPlayerJSPreview_margin-30"),attr(o,"name","form.signin"),attr(o,"method","post"),attr(a,"class","mgPlayerJSPreview_signin-page-wrapper"),attr(r,"class","ege-panel-main-container mgPlayerJSPreview_signin-page-container mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y mgPlayerJSPreview_no-padding")},m(e,t){insert(e,r,t),p&&p.m(r,null),append(r,i),append(r,a),append(a,o),append(o,n),append(o,s),d&&d.m(o,null),append(o,l),u&&u.m(o,null),c=!0},p(e,t){e[17]?p?p.p(e,t):((p=create_if_block_12$9(e)).c(),p.m(r,i)):p&&(p.d(1),p=null),1===e[0].appConfig.login.guideme?d?(d.p(e,t),1&t[0]&&transition_in(d,1)):((d=create_if_block_10$a(e)).c(),transition_in(d,1),d.m(o,l)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros()),1===e[0].appConfig.login.SSO?u?u.p(e,t):((u=create_if_block_9$b(e)).c(),u.m(o,null)):u&&(u.d(1),u=null)},i(e){c||(transition_in(d),c=!0)},o(e){transition_out(d),c=!1},d(e){e&&detach(r),p&&p.d(),d&&d.d(),u&&u.d()}}}function create_if_block_12$9(e){let r,i,a=e[0].labels.invalidLoginCred+"",o;return{c(){r=element("div"),i=element("div"),o=text(a),attr(i,"class","mgPlayerJSPreview_invalid-log-error-wrapper mgPlayerJSPreview_font-size-14 mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center"),attr(r,"class","mgPlayerJSPreview_width-100 mgPlayerJSPreview_text-align-center mgPlayerJSPreview_margin-tb-15")},m(e,t){insert(e,r,t),append(r,i),append(i,o)},p(e,t){1&t[0]&&a!==(a=e[0].labels.invalidLoginCred+"")&&set_data(o,a)},d(e){e&&detach(r)}}}function create_if_block_10$a(r){let i,a,o,n,s=r[0].labels.placeholderEmail+"",l,c,p,d,u,g,m=r[0].labels.emailError+"",h,F,_,f,v=r[0].labels.placeholderPassword+"",y,O,P,S,R,w,b=r[0].labels.passwordError+"",C,N,H,k,B,T,x,A=r[0].labels.loginTitle+"",J,U,G,$,E=r[0].labels.forgotPass+"",L,V,M,I,X,z,D=!r[0].config.hideCaptcha&&create_if_block_11$a(r);return{c(){i=element("div"),a=element("div"),o=element("div"),n=element("div"),l=text(s),c=space(),p=element("input"),u=space(),g=element("div"),h=text(m),F=space(),_=element("div"),f=element("div"),y=text(v),O=space(),P=element("input"),R=space(),w=element("div"),C=text(b),N=space(),D&&D.c(),H=space(),k=element("div"),B=space(),T=element("div"),x=element("button"),J=text(A),U=space(),G=element("div"),$=element("button"),L=text(E),V=space(),M=element("div"),attr(n,"id","mgPlayerJSPreview_input-login-email-label"),attr(n,"class","mgPlayerJSPreview_text-align-left mgPlayerJSPreview_login-field-label"),attr(p,"id","mgPlayerJSPreview_input-login-email"),attr(p,"class","mgPlayerJSPreview_input-type-text mgPlayerJSPreview_font-size-16 mgPlayerJSPreview_inline-block-vm"),attr(p,"maxlength","50"),attr(p,"spellcheck","true"),attr(p,"type","email"),attr(p,"placeholder",d=r[0].labels.placeholderEmail),attr(p,"aria-describedby","mgPlayerJSPreview_input-login-email-err"),attr(p,"aria-labelledby","mgPlayerJSPreview_input-login-email-label"),attr(p,"autocomplete","email"),attr(p,"aria-label","Email ID"),p.required=!0,attr(g,"id","mgPlayerJSPreview_input-login-email-err"),attr(g,"class","error-input-wrapper emailid-error-wrapper"),toggle_class(g,"active",r[3]),attr(o,"class","mgPlayerJSPreview_input-email-wrapper mgPlayerJSPreview_margin-tb-10"),attr(f,"class","mgPlayerJSPreview_text-align-left mgPlayerJSPreview_login-field-label"),attr(P,"id","mgPlayerJSPreview_input-login-pass"),attr(P,"autocomplete","off"),attr(P,"class","mgPlayerJSPreview_input-type-text mgPlayerJSPreview_font-size-16 ege-inline-block-vm"),attr(P,"minlength","6"),attr(P,"maxlength","20"),attr(P,"spellcheck","true"),attr(P,"type","password"),attr(P,"placeholder",S=r[0].labels.placeholderPassword),attr(P,"name","password"),P.required=!0,attr(P,"aria-describedby","mgPlayerJSPreview_input-login-pass-err"),attr(P,"aria-label","Password"),attr(w,"id","mgPlayerJSPreview_input-login-pass-err"),attr(w,"class","error-input-wrapper password-error-wrapper"),toggle_class(w,"active",r[4]),attr(_,"class","mgPlayerJSPreview_input-password-wrapper mgPlayerJSPreview_margin-tb-10"),attr(a,"class","mgPlayerJSPreview_signin-form-input"),attr(k,"class","mgPlayerJSPreview_clear"),attr(x,"id","mgPlayerJSPreview_btn-login-title"),attr(x,"class","mgPlayerJSPreview_btn-default mgPlayerJSPreview_font-size-15"),attr(x,"aria-label","Login"),attr(x,"type","button"),attr(T,"class","mgPlayerJSPreview_btn-login-wrapper mgPlayerJSPreview_text-align-center"),attr($,"id","mgPlayerJSPreview_label-login-forgot-pass"),attr($,"type","button"),attr($,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_options-label mgPlayerJSPreview_text-align-center mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_font-weight-550"),attr(G,"class","mgPlayerJSPreview_float-right mgPlayerJSPreview_options-wrapper mgPlayerJSPreview_single-option-wrapper"),attr(M,"class","mgPlayerJSPreview_clear"),attr(i,"class","mgPlayerJSPreview_signin-form-container")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),append(n,l),append(o,c),append(o,p),set_input_value(p,r[1]),r[30](p),append(o,u),append(o,g),append(g,h),append(a,F),append(a,_),append(_,f),append(f,y),append(_,O),append(_,P),set_input_value(P,r[2]),r[32](P),append(_,R),append(_,w),append(w,C),append(a,N),D&&D.m(a,null),append(i,H),append(i,k),append(i,B),append(i,T),append(T,x),append(x,J),append(i,U),append(i,G),append(G,$),append($,L),append(i,V),append(i,M),I=!0,X||(z=[listen(p,"input",r[29]),listen(P,"input",r[31]),listen(x,"click",r[22]),listen($,"click",r[23])],X=!0)},p(e,t){(!I||1&t[0])&&s!==(s=e[0].labels.placeholderEmail+"")&&set_data(l,s),(!I||1&t[0]&&d!==(d=e[0].labels.placeholderEmail))&&attr(p,"placeholder",d),2&t[0]&&p.value!==e[1]&&set_input_value(p,e[1]),(!I||1&t[0])&&m!==(m=e[0].labels.emailError+"")&&set_data(h,m),(!I||8&t[0])&&toggle_class(g,"active",e[3]),(!I||1&t[0])&&v!==(v=e[0].labels.placeholderPassword+"")&&set_data(y,v),(!I||1&t[0]&&S!==(S=e[0].labels.placeholderPassword))&&attr(P,"placeholder",S),4&t[0]&&P.value!==e[2]&&set_input_value(P,e[2]),(!I||1&t[0])&&b!==(b=e[0].labels.passwordError+"")&&set_data(C,b),(!I||16&t[0])&&toggle_class(w,"active",e[4]),e[0].config.hideCaptcha?D&&(group_outros(),transition_out(D,1,1,()=>{D=null}),check_outros()):D?(D.p(e,t),1&t[0]&&transition_in(D,1)):((D=create_if_block_11$a(e)).c(),transition_in(D,1),D.m(a,null)),(!I||1&t[0])&&A!==(A=e[0].labels.loginTitle+"")&&set_data(J,A),(!I||1&t[0])&&E!==(E=e[0].labels.forgotPass+"")&&set_data(L,E)},i(e){I||(transition_in(D),I=!0)},o(e){transition_out(D),I=!1},d(e){e&&detach(i),r[30](null),r[32](null),D&&D.d(),X=!1,run_all(z)}}}function create_if_block_11$a(t){let r,i,a=t[0].labels.captchaLbl+"",o,n,s,l,c,p,d;function e(e){t[33](e)}function u(e){t[34](e)}function g(e){t[35](e)}var m={};return void 0!==t[18]&&(m.captchaValid=t[18]),void 0!==t[19]&&(m.showCaptchaError=t[19]),void 0!==t[20]&&(m.inputCaptchaRef=t[20]),s=new Captcha({props:m}),binding_callbacks.push(()=>bind(s,"captchaValid",e)),binding_callbacks.push(()=>bind(s,"showCaptchaError",u)),binding_callbacks.push(()=>bind(s,"inputCaptchaRef",g)),{c(){r=element("div"),i=element("div"),o=text(a),n=space(),create_component(s.$$.fragment),attr(i,"class","mgPlayerJSPreview_text-align-left mgPlayerJSPreview_login-field-label"),attr(r,"class","mgPlayerJSPreview_margin-tb-10")},m(e,t){insert(e,r,t),append(r,i),append(i,o),append(r,n),mount_component(s,r,null),d=!0},p(e,t){(!d||1&t[0])&&a!==(a=e[0].labels.captchaLbl+"")&&set_data(o,a);var r={};!l&&262144&t[0]&&(l=!0,r.captchaValid=e[18],add_flush_callback(()=>l=!1)),!c&&524288&t[0]&&(c=!0,r.showCaptchaError=e[19],add_flush_callback(()=>c=!1)),!p&&1048576&t[0]&&(p=!0,r.inputCaptchaRef=e[20],add_flush_callback(()=>p=!1)),s.$set(r)},i(e){d||(transition_in(s.$$.fragment,e),d=!0)},o(e){transition_out(s.$$.fragment,e),d=!1},d(e){e&&detach(r),destroy_component(s)}}}function create_if_block_9$b(r){let i,a,o,n=r[0].labels.logInWithSSO+"",s,l,c;return{c(){i=element("div"),a=element("div"),o=element("button"),s=text(n),attr(o,"type","button"),attr(o,"id","mgPlayerJSPreview_label-login-with-sso"),attr(o,"class","mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-large mgPlayerJSPreview_font-size-16 mgPlayerJSPreview_text-align-center mgPlayerJSPreview_margin-t-50"),attr(a,"class","mgPlayerJSPreview_margin-tb-20"),attr(i,"class","mgPlayerJSPreview_signin-form-container")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,s),l||(c=listen(o,"click",r[26]),l=!0)},p(e,t){1&t[0]&&n!==(n=e[0].labels.logInWithSSO+"")&&set_data(s,n)},d(e){e&&detach(i),l=!1,c()}}}function create_if_block_3$f(e){let r,i,a,o,n=e[0].labels.loginOtpScreenTitle+"",s,l,c,p,d=1===e[0].appConfig.login.guideme&&create_if_block_4$e(e);return{c(){r=element("div"),i=element("div"),a=element("form"),o=element("h2"),s=text(n),l=space(),d&&d.c(),c=space(),p=element("div"),attr(o,"class","mgPlayerJSPreview_font-size-24 mgPlayerJSPreview_text-align-center mgPlayerJSPreview_margin-25"),attr(p,"class","ege-clear"),attr(a,"name","form.verifyOtp"),attr(a,"autocomplete","off"),attr(i,"class","mgPlayerJSPreview_signin-page-wrapper"),attr(r,"class","ege-panel-main-container mgPlayerJSPreview_signin-page-container mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y")},m(e,t){insert(e,r,t),append(r,i),append(i,a),append(a,o),append(o,s),append(a,l),d&&d.m(a,null),append(a,c),append(a,p)},p(e,t){1&t[0]&&n!==(n=e[0].labels.loginOtpScreenTitle+"")&&set_data(s,n),1===e[0].appConfig.login.guideme?d?d.p(e,t):((d=create_if_block_4$e(e)).c(),d.m(a,c)):d&&(d.d(1),d=null)},d(e){e&&detach(r),d&&d.d()}}}function create_if_block_4$e(r){let i,a,o,n,s=r[0].labels.placeholderOtp+"",l,c,p,d,u,g,m=r[0].labels.otpError+"",h,_,f,v,y,P=r[0].labels.btnOtpVerify+"",S,w,b,C,k,T,x,A,J,G;function $(e){return e[9]?create_if_block_7$c:create_else_block$a}let E=$(r),L=E(r),M=r[10]&&create_if_block_6$d(r),I=r[12]&&create_if_block_5$d(r);return{c(){i=element("div"),a=element("div"),o=element("div"),n=element("div"),l=text(s),c=space(),p=element("input"),u=space(),g=element("div"),h=text(m),f=space(),v=element("div"),y=element("button"),S=text(P),k=space(),T=element("div"),L.c(),x=space(),M&&M.c(),A=space(),I&&I.c(),attr(n,"id","mgPlayerJSPreview_input-otp-label"),attr(n,"class","mgPlayerJSPreview_text-align-left mgPlayerJSPreview_login-field-label"),attr(p,"id","mgPlayerJSPreview_input-otp"),attr(p,"class","mgPlayerJSPreview_input-type-text mgPlayerJSPreview_font-size-13 mgPlayerJSPreview_inline-block-vm"),attr(p,"maxlength","6"),attr(p,"spellcheck","true"),attr(p,"type","text"),attr(p,"placeholder",d=r[0].labels.placeholderOtp),p.required=!0,attr(p,"name","otp"),attr(p,"pattern","^[0-9]*$"),attr(p,"aria-describedby","mgPlayerJSPreview_input-otp-err"),attr(p,"aria-labelledby","mgPlayerJSPreview_input-otp-label"),attr(g,"id","mgPlayerJSPreview_input-otp-err"),attr(g,"class",_="error-input-wrapper emailid-error-wrapper "+(r[11].otpRequired?"active":"")),attr(o,"class","mgPlayerJSPreview_input-email-wrapper mgPlayerJSPreview_margin-tb-10"),attr(a,"class","mgPlayerJSPreview_signin-form-input"),attr(y,"id","mgPlayerJSPreview_btn-verify-otp"),attr(y,"class",w="mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-large mgPlayerJSPreview_font-size-16 "+(r[11].otpRequired?"mgPlayerJSPreview_disabled":"")),attr(y,"type","button"),attr(y,"aria-disabled",b=r[11].otpRequired),attr(y,"aria-label",C=r[0].labels.btnOtpVerify),attr(v,"class","mgPlayerJSPreview_margin-tb-25 mgPlayerJSPreview_text-align-center"),attr(T,"class","mgPlayerJSPreview_options-wrapper"),attr(i,"class","mgPlayerJSPreview_signin-form-container")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),append(n,l),append(o,c),append(o,p),set_input_value(p,r[8]),append(o,u),append(o,g),append(g,h),append(i,f),append(i,v),append(v,y),append(y,S),append(i,k),append(i,T),L.m(T,null),append(i,x),M&&M.m(i,null),append(i,A),I&&I.m(i,null),J||(G=[listen(p,"input",r[36]),listen(p,"focus",r[37]),listen(y,"click",r[21])],J=!0)},p(e,t){1&t[0]&&s!==(s=e[0].labels.placeholderOtp+"")&&set_data(l,s),1&t[0]&&d!==(d=e[0].labels.placeholderOtp)&&attr(p,"placeholder",d),256&t[0]&&p.value!==e[8]&&set_input_value(p,e[8]),1&t[0]&&m!==(m=e[0].labels.otpError+"")&&set_data(h,m),2048&t[0]&&_!==(_="error-input-wrapper emailid-error-wrapper "+(e[11].otpRequired?"active":""))&&attr(g,"class",_),1&t[0]&&P!==(P=e[0].labels.btnOtpVerify+"")&&set_data(S,P),2048&t[0]&&w!==(w="mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-large mgPlayerJSPreview_font-size-16 "+(e[11].otpRequired?"mgPlayerJSPreview_disabled":""))&&attr(y,"class",w),2048&t[0]&&b!==(b=e[11].otpRequired)&&attr(y,"aria-disabled",b),1&t[0]&&C!==(C=e[0].labels.btnOtpVerify)&&attr(y,"aria-label",C),E===(E=$(e))&&L?L.p(e,t):(L.d(1),(L=E(e))&&(L.c(),L.m(T,null))),e[10]?M?M.p(e,t):((M=create_if_block_6$d(e)).c(),M.m(i,A)):M&&(M.d(1),M=null),e[12]?I?I.p(e,t):((I=create_if_block_5$d(e)).c(),I.m(i,null)):I&&(I.d(1),I=null)},d(e){e&&detach(i),L.d(),M&&M.d(),I&&I.d(),J=!1,run_all(G)}}}function create_else_block$a(r){let i,a=r[0].labels.resendOTP+"",o,n,s,l,c=r[0].labels.backToLogin+"",p,d,u,g;return{c(){i=element("button"),o=text(a),s=space(),l=element("button"),p=text(c),attr(i,"id","mgPlayerJSPreview_label-resend-otp"),attr(i,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_options-label mgPlayerJSPreview_text-align-center mgPlayerJSPreview_font-size-15 mgPlayerJSPreview_cursor-pointer"),attr(i,"type","button"),attr(i,"aria-label",n=r[0].labels.resendOTP),attr(l,"id","mgPlayerJSPreview_label-back-to-login"),attr(l,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_options-label mgPlayerJSPreview_text-align-center mgPlayerJSPreview_back-to-login mgPlayerJSPreview_text-align-center mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_font-size-15 mgPlayerJSPreview_inline-block-vm"),attr(l,"aria-label",d=r[0].labels.backToLogin),attr(l,"type","button")},m(e,t){insert(e,i,t),append(i,o),insert(e,s,t),insert(e,l,t),append(l,p),u||(g=[listen(i,"click",r[25]),listen(l,"click",r[24])],u=!0)},p(e,t){1&t[0]&&a!==(a=e[0].labels.resendOTP+"")&&set_data(o,a),1&t[0]&&n!==(n=e[0].labels.resendOTP)&&attr(i,"aria-label",n),1&t[0]&&c!==(c=e[0].labels.backToLogin+"")&&set_data(p,c),1&t[0]&&d!==(d=e[0].labels.backToLogin)&&attr(l,"aria-label",d)},d(e){e&&(detach(i),detach(s),detach(l)),u=!1,run_all(g)}}}function create_if_block_7$c(e){let r,i=e[0].labels.otpTimer+"",a,o,n=e[0].labels.seconds+"",s;return{c(){r=element("div"),a=text(i),o=text(e[7]),s=text(n),attr(r,"class","mgPlayerJSPreview_text-align-center mgPlayerJSPreview_font-size-13 mgPlayerJSPreview_margin-tb-5 mgPlayerJSPreview_theme-color")},m(e,t){insert(e,r,t),append(r,a),append(r,o),append(r,s)},p(e,t){1&t[0]&&i!==(i=e[0].labels.otpTimer+"")&&set_data(a,i),128&t[0]&&set_data(o,e[7]),1&t[0]&&n!==(n=e[0].labels.seconds+"")&&set_data(s,n)},d(e){e&&detach(r)}}}function create_if_block_6$d(e){let r,i=e[0].labels.otpSent+"",a;return{c(){r=element("div"),a=text(i),attr(r,"class","mgPlayerJSPreview_text-align-center mgPlayerJSPreview_font-size-13 mgPlayerJSPreview_margin-tb-5 mgPlayerJSPreview_theme-color")},m(e,t){insert(e,r,t),append(r,a)},p(e,t){1&t[0]&&i!==(i=e[0].labels.otpSent+"")&&set_data(a,i)},d(e){e&&detach(r)}}}function create_if_block_5$d(e){let r,i=e[0].labels.limitWarning+"",a;return{c(){r=element("div"),a=text(i),attr(r,"class","mgPlayerJSPreview_text-align-center mgPlayerJSPreview_font-size-13 mgPlayerJSPreview_margin-tb-5 mgPlayerJSPreview_error-text-color")},m(e,t){insert(e,r,t),append(r,a)},p(e,t){1&t[0]&&i!==(i=e[0].labels.limitWarning+"")&&set_data(a,i)},d(e){e&&detach(r)}}}function create_if_block$l(e){let r,i,a=void 0!==e[0].labels.selectOrganization&&create_if_block_2$h(e),o=e[13]&&create_if_block_1$i(e);return{c(){r=element("div"),a&&a.c(),i=space(),o&&o.c(),attr(r,"class","mgPlayerJSPreview_multiple-org-list-container mgPlayerJSPreview_margin-tb-15")},m(e,t){insert(e,r,t),a&&a.m(r,null),append(r,i),o&&o.m(r,null)},p(e,t){void 0!==e[0].labels.selectOrganization?a?a.p(e,t):((a=create_if_block_2$h(e)).c(),a.m(r,i)):a&&(a.d(1),a=null),e[13]?o?o.p(e,t):((o=create_if_block_1$i(e)).c(),o.m(r,null)):o&&(o.d(1),o=null)},d(e){e&&detach(r),a&&a.d(),o&&o.d()}}}function create_if_block_2$h(e){let r,i=e[0].labels.selectOrganization+"",a;return{c(){r=element("h2"),a=text(i),attr(r,"class","mgPlayerJSPreview_font-size-24 mgPlayerJSPreview_text-align-center mgPlayerJSPreview_margin-25")},m(e,t){insert(e,r,t),append(r,a)},p(e,t){1&t[0]&&i!==(i=e[0].labels.selectOrganization+"")&&set_data(a,i)},d(e){e&&detach(r)}}}function create_if_block_1$i(t){let a,o=ensure_array_like(t[14]),n=[];for(let e=0;e<o.length;e+=1)n[e]=create_each_block$9(get_each_context$9(t,o,e));return{c(){a=element("div");for(let e=0;e<n.length;e+=1)n[e].c();attr(a,"class","mgPlayerJSPreview_multiple-org-list-wrapper mgPlayerJSPreview_margin-tb-15 mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y mgPlayerJSPreview_scrollbar-thin")},m(e,t){insert(e,a,t);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(a,null)},p(t,r){if(134234112&r[0]){o=ensure_array_like(t[14]);let e;for(e=0;e<o.length;e+=1){var i=get_each_context$9(t,o,e);n[e]?n[e].p(i,r):(n[e]=create_each_block$9(i),n[e].c(),n[e].m(a,null))}for(;e<n.length;e+=1)n[e].d(1);n.length=o.length}},d(e){e&&detach(a),destroy_each(n,e)}}}function create_each_block$9(r){let i,a,o=r[52].name+"",n,s,l,c,p;function d(){return r[38](r[52])}return{c(){i=element("div"),a=element("button"),n=text(o),l=space(),attr(a,"class","mgPlayerJSPreview_btn-default"),attr(a,"aria-label",s=r[52].name),attr(i,"class","mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_margin-tb-25")},m(e,t){insert(e,i,t),append(i,a),append(a,n),append(i,l),c||(p=listen(a,"click",d),c=!0)},p(e,t){r=e,16384&t[0]&&o!==(o=r[52].name+"")&&set_data(n,o),16384&t[0]&&s!==(s=r[52].name)&&attr(a,"aria-label",s)},d(e){e&&detach(i),c=!1,p()}}}function create_fragment$p(e){let r,i,a,o,n,s,l,c=(r=new Header({}),e[5]&&!e[13]&&create_if_block_8$c(e)),p=e[6]&&!e[13]&&create_if_block_3$f(e),d=e[13]&&create_if_block$l(e);return s=new Footer({}),{c(){create_component(r.$$.fragment),i=space(),c&&c.c(),a=space(),p&&p.c(),o=space(),d&&d.c(),n=space(),create_component(s.$$.fragment)},m(e,t){mount_component(r,e,t),insert(e,i,t),c&&c.m(e,t),insert(e,a,t),p&&p.m(e,t),insert(e,o,t),d&&d.m(e,t),insert(e,n,t),mount_component(s,e,t),l=!0},p(e,t){e[5]&&!e[13]?c?(c.p(e,t),8224&t[0]&&transition_in(c,1)):((c=create_if_block_8$c(e)).c(),transition_in(c,1),c.m(a.parentNode,a)):c&&(group_outros(),transition_out(c,1,1,()=>{c=null}),check_outros()),e[6]&&!e[13]?p?p.p(e,t):((p=create_if_block_3$f(e)).c(),p.m(o.parentNode,o)):p&&(p.d(1),p=null),e[13]?d?d.p(e,t):((d=create_if_block$l(e)).c(),d.m(n.parentNode,n)):d&&(d.d(1),d=null)},i(e){l||(transition_in(r.$$.fragment,e),transition_in(c),transition_in(s.$$.fragment,e),l=!0)},o(e){transition_out(r.$$.fragment,e),transition_out(c),transition_out(s.$$.fragment,e),l=!1},d(e){e&&(detach(i),detach(a),detach(o),detach(n)),destroy_component(r,e),c&&c.d(e),p&&p.d(e),d&&d.d(e),destroy_component(s,e)}}}function getSignInUser(){}function isValidOtp(e){return""!==e&&6===e.length&&/^[0-9]*$/.test(e)}function instance$o(e,t,r){let a="",i="",o,n,s=!0,l=!1,c=30,p=0,d,u=!1,g=!1,m={otpRequired:!1},h=!1,_=[],f,v,y,P=!1,S;rootScope.currentView="login-view";let w,b;function C(t){for(let e=0;e<_.length;e++)if(_[e].email===t)if((new Date).getTime()<_[e].expiry)return _[e].token}get_store_value(Gm.appList),onMount(()=>{});let k=!1;function T(){r(17,k=!0),Gm.loading.set(!1)}async function x(e){if(Gm.loading.set(!1),"string"==typeof e)return L(e,a),modal.open(rootScope.labels.signInVerifyYourAccount,"success",function(){r(5,s=!1),r(6,l=!0),setTimeout(function(){mg$$1("#mgPlayerJSPreview_input-otp").focus()},500)}),mg$$1("#mgPlayerJSPreview_btn-ok-common-popup").focus(),!0;e&&e.orgs?(r(13,P=!0),r(14,S=e.orgs)):(mg$$1("#mgPlayerJSPreview_btn-verify-otp").addClass("mgPlayerJSPreview_disabled"),rootScope.onUserSignin(e,!1))}let A=!1,J=!1,G;function $(){return""!==a.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(a)}function E(){mg$$1(".mgPlayerJSPreview_signin-page-container").css({height:window.innerHeight-mg$$1("#ege-header").innerHeight()-mg$$1("#footer").innerHeight()-50}),mg$$1(".mgPlayerJSPreview_signin-page-container").innerHeight()<60?mg$$1(".mgPlayerJSPreview_header-banner-wrapper").hide():mg$$1(".mgPlayerJSPreview_header-banner-wrapper").removeAttr("style")}function L(t,r){let i=!0;for(let e=0;e<_.length;e++)if(_[e].email===r){f=t,_[e].token=t,_[e].expiry=(new Date).getTime()+rootScope.thirtyDaysInMSeconds,i=!1;break}var e;i&&((e={}).email=a,e.token=t,e.expiry=(new Date).getTime()+rootScope.thirtyDaysInMSeconds,_.push(e),f=t),storage.dual_auth_token.set(_,rootScope.thirtyDaysInSeconds)}function M(t){mgError$1.try(function(){var e={email_id:a,password:i,keep_login:1};t&&(e.org_id=t),(f=C(a))&&(e.token=f),api.userSignIn(e,x,T)},700)}mg$$1(window).off("resize").on("resize",E),onDestroy(()=>{clearTimeout(v),clearInterval(y)}),setTimeout(function(){E()},500);return[rootScope,a,i,!1,!1,s,l,c,d,u,g,m,h,P,S,w,b,k,A,J,G,function(){var e;Gm.loading.set(!0),isValidOtp(d)?(e={email:a,code:d,token:f},r(10,g=!1),api.verifyUser(e,x,T)):(Gm.loading.set(!1),r(11,m.otpRequired=!0,m))},function(){var e;Gm.loading.set(!0),r(3,o=!1),r(4,n=!1),A||GmCXt.conf.hideCaptcha||(r(19,J=!0),G?.focus(),Gm.loading.set(!1)),$()?((e=6<=i.length&&i.length<=20)||(r(4,!0),b?.focus(),Gm.loading.set(!1)),(A||GmCXt.conf.hideCaptcha)&&$()&&e&&(e={email_id:a,password:i,keep_login:1},(f=C(a))&&(e.token=f),api.userSignIn(e,x,T))):(r(3,!0),w?.focus(),Gm.loading.set(!1))},function(){Gm.activeView.set("forgotpwd")},function(){r(6,l=!1),r(5,s=!0),r(8,d=""),p=0,r(12,h=!1),E()},function(){var e;r(7,c=30),r(9,u=!0),3<(p+=1)?(r(9,u=!1),r(12,h=!0),setTimeout(function(){p=0,r(12,h=!1)},3e5)):(r(10,g=!0),(e={email:a}).token=f,api.resendOTP(e,function(e){L(e,a)}),y=setInterval(function(){r(7,c--,c),c<=0&&clearInterval(y)},1e3),v=setTimeout(()=>{r(9,u=!1),r(10,g=!1),clearInterval(y)},3e4))},function(){r(0,rootScope.ssoHitCount=0,rootScope),GmCXt.isMyGuide()?rootScope.getSsoId().then(function(e){e&&e.id&&rootScope.openSsoTab()}).catch(function(){}):rootScope.openSsoTab()},M,getSignInUser,function(){a=this.value,r(1,a)},function(e){binding_callbacks[e?"unshift":"push"](()=>{w=e,r(15,w)})},function(){i=this.value,r(2,i)},function(e){binding_callbacks[e?"unshift":"push"](()=>{b=e,r(16,b)})},function(e){A=e,r(18,A)},function(e){J=e,r(19,J)},function(e){G=e,r(20,G)},function(){d=this.value,r(8,d)},()=>{r(11,m.otpRequired=!1,m)},e=>M(e.organization_id)]}modal.addPublishActions=function(t){var i=modal,o=rootScope.appEnvs;function e(e){var r,i,t=o.indexOf(e.currentTarget.id);if(mg$$1("#mgPlayerJSPreview_checkbox-tour-schedule-pub").prop("checked",!1),mg$$1(".mgPlayerJSPreview_pub-date-container").hide(),mg$$1(e.currentTarget).hasClass("mgPlayerJSPreview_active-progress")){mg$$1(e.currentTarget).removeClass("mgPlayerJSPreview_active-progress"),mg$$1(".mgPlayerJSPreview_pub-schedule-checkbox-container").hide(),0===t?mg$$1(".ege-publish").addClass("mgPlayerJSPreview_disabled"):mg$$1(".ege-publish").removeClass("mgPlayerJSPreview_disabled");for(var a=t+1;a<o.length;)mg$$1("#"+o[a]).removeClass("mgPlayerJSPreview_active-progress"),a++}else{if(mg$$1(e.currentTarget).addClass("mgPlayerJSPreview_active-progress"),mg$$1(".ege-publish").removeClass("mgPlayerJSPreview_disabled"),0<t)for(a=0;a<t;)mg$$1("#"+o[a]).addClass("mgPlayerJSPreview_active-progress"),a++;o[t]===o[o.length-1]&&mg$$1(".mgPlayerJSPreview_pub-schedule-checkbox-container").show()}isPublishedOnTopEnv()&&mg$$1(".ege-publish").addClass("mgPlayerJSPreview_disabled"),e=rootScope.labels.guideWillPubIn,r=!1,i="",mg$$1(".mgPlayerJSPreview_active-progress").each(function(e,t){r=!0;t=mg$$1(t).text();i=i?i+", "+t:t}),isPublishedOnTopEnv()?mg$$1("#publishMsg").text(rootScope.labels.guideIsPubIn+i):r?mg$$1("#publishMsg").text(e+i):mg$$1("#publishMsg").text("")}for(var r=0;r<o.length;r++)mg$$1("#"+o[r]).on("click",e);mg$$1(".ege-publish").off("click").on("click",function(){var r=[],e=(mg$$1(".mgPlayerJSPreview_active-progress").each(function(e,t){r.push(mg$$1(t).attr("id"))}),getGuideActiveEnvs());if(!rootScope.guideEnvs||r.length>e.length){if(!r.length&&"publish"===rootScope.publishStatus)return;t(r,"publish")}else{var e=r[r.length-1],e=rootScope.appEnvs.indexOf(e);0<=e&&(e=rootScope.appEnvs.slice(e+1)).length&&t(e,"unpublish")}i.close(),localStorage.setItem(GmCXt.prevEnv,r)}),mg$$1(".ege-cancel-btn").off("click").on("click",function(){i.close()}),mg$$1(".mgPlayerJSPreview_popup-close").off("click").on("click",function(){i.close()})},modal.attachPopupActions=function(a,t,r){var o=modal;mg$$1(".mgPlayerJSPreview_overlay-container").off("click").on("click",function(e){o.close(),t&&t()}),mg$$1(".ege-ok-btn").off("click").on("click",function(){var e=document.getElementById("mgPlayerJSPreview_donot-show-cb");e&&storage.confirmLinkGuidePub.set(e.checked),o.close(),a&&a()}),mg$$1(".ege-ok-json-update").off("click").on("click",function(){a()}),mg$$1(".ege-ok-btn-radio").off("click").on("click",function(){var e="";(e=mg$$1(".env")?mg$$1(".env:checked").val():e)&&(a(e),o.close())}),mg$$1(".ege-option-btn").off("click").on("click",function(){r&&r(),o.close()}),mg$$1(".ege-cancel-btn").off("click").on("click",function(){t&&t(),o.close()}),mg$$1(".ege-popup-close").off("click").on("click",function(){t&&t(),o.close()}),mg$$1("#mgPlayerJSPreview_resusme-guide-close-button").off("click").on("click",function(){o.close()}),mg$$1(".ege-update-btn").off("click").on("click",function(){var e=mg$$1("#audio-text-area").val();if(!(e=e.trim()).length)return mg$$1("#audio-text-area").addClass("empty-textarea"),!0;a&&a(e),o.close()}),mg$$1(".ege-email-submit-btn").off("click").on("click",function(){var e=mg$$1(".ege-popup-email-input").val().trim();if(!e.length)return mg$$1(".ege-popup-error-msg").show(),!0;a&&a(e),o.close()}),mg$$1(".ege-otp-submit-btn").off("click").on("click",function(){var e=mg$$1(".ege-popup-email-input-confirm").val().trim(),t=mg$$1(".ege-popup-confirm-otp").val().trim();if(!t.length)return mg$$1(".ege-popup-error-msg").show(),!0;a&&a(e,t),o.close()}),mg$$1("#audio-text-area").length&&mg$$1("#audio-text-area").on("focus",function(e){mg$$1(e.target).removeClass("empty-textarea")}),mg$$1("#preview-link").length&&mg$$1("#preview-link").off("click").on("click",function(){var e=(e=mg$$1("#audio-text-area").val()).trim();r&&e.length&&r(e)}),mg$$1(".ege-link-guide").off("click").on("click",function(){if(!mg$$1("#ruleTypeGuide").val().trim().length)return mg$$1(".ege-popup-error-msg").show(),!0;rootScope.step.step_screen=mg$$1("#ruleTypeGuide option:selected").attr("data-image"),rootScope.step.step_description=mg$$1("#ruleTypeGuide option:selected").attr("data-description"),rootScope.step.step_screen||(rootScope.step.step_screen="1"),rootScope.step.step_description||(rootScope.step.step_description=" "),rootScope.step.step_title=mg$$1("#ruleTypeGuide option:selected").text(),rootScope.step.step_settings="{'tour_id' :"+mg$$1("#ruleTypeGuide").val()+"}";var e={};e.tour_id=mg$$1("#ruleTypeGuide").val(),rootScope.step.step_settings=JSON.stringify(e);Object.assign({},rootScope.step).step_screen=rootScope.step.step_screen,rootScope.step.step_order}),mg$$1(".mgPlayerJSPreview_modal-view-more").off("click").on("click",function(){mg$$1(".mgPlayerJSPreview_info-msg").show(),mg$$1(".mgPlayerJSPreview_modal-view-more").hide()}),mg$$1(".ege-csv-ok-btn").off("click").on("click",function(){var e,t=mg$$1("#mgPlayerJSPreview_input-csv")[0].files,i=[];t&&t[0]?(t=t[0],(e=new FileReader).onload=function(e){for(var t=e.target.result.split("\n"),r=0;r<t.length;r++)""!==t[r]&&i.push(t[r].split(","));a(i)},e.readAsBinaryString(t)):a(),o.close()})},modal.createStep=function(i,a){var o=modal;api.stepCreate(rootScope.step,function(e){var t=e.data.data,r=(o.close(),Gm.loading.set(!1),{});r.stepIndex=rootScope.step.step_order-1,r.step=t.step,i.createStepCompleted(r),a&&a(e.data.data)})},modal.editStepOptions=function(e){var t=rootScope.labels.lblNotFoundInPage,r="",i="",a=rootScope.labels.ok,o=rootScope.svgs.popupWarning,n="<div class='mgPlayerJSPreview_popup-btn-close ege-cancel-btn'>"+rootScope.svgs.popupClose+"</div>",e=("Reselect element"===e?(t=rootScope.labels.lblReselectElem,i="<div id='mgPlayerJSPreview_btn-ok-edit-step-popup' class='ege-ok-btn mgPlayerJSPreview_btn-default ege-inline-block-vt ege-redirect-btn'>"+e+"</div>",r=reselectElem,a=rootScope.labels.btnCancel):"Reselect beacon"===e&&(t=rootScope.labels.lblReselectBeacon,i="<div id='mgPlayerJSPreview_btn-ok-edit-step-popup' class='ege-ok-btn mgPlayerJSPreview_btn-default ege-inline-block-vt ege-redirect-btn'>"+e+"</div>",r=reselectBeacon,a=rootScope.labels.btnCancel),"<div class='mgPlayerJSPreview_overlay-container'></div> \t<div class='ege-popup mgPlayerJSPreview_popup-warning'>        <div class='mgPlayerJSPreview_popup-header-wrapper'>\t"+n+"\t\t       <div class='mgPlayerJSPreview_popup-header-icon-wrapper'><div class='mgPlayerJSPreview_popup-header-icon'>"+o+"</div></div>       </div>\t\t<div style='display:none;' class='ege-popup-title-wrapper'>\t\t{{data.title}}</div>\t\t<div class='ege-popup-content-wrapper mgPlayerJSPreview_font-size-17'>"+t+"</div>\t\t<div class='ege-popup-btn-wrapper'>"+i+"\t\t\t<div id='mgPlayerJSPreview_btn-cancel-edit-step-popup' class='mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-large ege-ok-btn ege-inline-block-vt'>"+a+"\t\t</div>\t</div> </div> ");mg$$1(".ege-panel").append(e),modal.attachPopupActions(r,!1)},modal.open=function(e,t,r,i,a,o,n){"string"!=typeof e&&(e="Unknown error!");var s="",l=rootScope.labels.ok,c=rootScope.labels.btnCancel,p="",d="",u="",g="",m="<div class='mgPlayerJSPreview_popup-btn-close ege-cancel-btn'>"+rootScope.svgs.popupClose+"</div>",h="",_="",a=(a&&(u="<span class='mgPlayerJSPreview_info-msg-container'><span class='mgPlayerJSPreview_modal-view-more'>"+rootScope.labels.viewMore+"</span><br><label class='mgPlayerJSPreview_info-msg'>"+a+"</label></span>"),rootScope.labels.guidePublishWarning===e&&(h="<div class= 'mgPlayerJSPreview_donot-show-popup'><input id='mgPlayerJSPreview_donot-show-cb' type= 'checkbox' class='mgPlayerJSPreview_input-checkbox-custom' /><label class='mgPlayerJSPreview_info-msg-donot-show-popup'>Do not show this pop up again</label></div>"),"yesno"===t&&(l="Yes",c="No"),"tourPlay"===t&&(l=rootScope.labels.startOver,c=rootScope.labels.yesResume,m="<button id='mgPlayerJSPreview_resusme-guide-close-button' class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_popup-upload-close ege-popup-close mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_display-flex mgPlayerJSPreview_justify-content-flex-end mgPlayerJSPreview_padding-15' aria-label='Close' >"+rootScope.svgs.popupClose+"</button>"),"tourPlay"!==t&&"info"!==t&&""!==t||(p="mgPlayerJSPreview_popup-info",d=rootScope.svgs.popupInfo),"alert"===t&&(p="mgPlayerJSPreview_popup-error",d=rootScope.svgs.popupError),"success"===t&&(p="mgPlayerJSPreview_popup-success",d=rootScope.svgs.popupSuccess),"warning"===t&&(p="mgPlayerJSPreview_popup-warning",d=rootScope.svgs.popupWarning),"confirm"!==t&&"copy"!==t&&"yesno"!==t&&"domain"!==t||(p="mgPlayerJSPreview_popup-warning",d=rootScope.svgs.popupWarning),"tourPlay"===t&&(s="<button id='mgPlayerJSPreview_btn-cancel-tour-play-popup' class='ege-cancel-btn mgPlayerJSPreview_btn-default ege-inline-block-vt' aria-label='"+c+"' >"+c+"</button>"),"<button id='mgPlayerJSPreview_btn-ok-common-popup' class='ege-ok-btn mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-large ege-inline-block-vt' aria-label='"+l+"' >"+l+"</button>");if("domain"===t){var f=[],v=GmCXt.getActiveAppSetting().app_env||rootScope.defaultAppEnv;for(S in v)v[S].checked&&f.push(S);if(f.length){for(var y,P=[],S=0;S<f.length;S++)y=rootScope.highestEnv===f[S]?"checked":"",P.push('<div class="mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_padding-5"><input type="radio" name="env" value='+f[S]+' class="env ege-popup-radio mgPlayerJSPreview_inline-block-vt mgPlayerJSPreview_input-radio-custom"'+y+'/><span class="ege-popup-radio-text">'+rootScope.updateEnvNames(f[S])+"</span></div>");g='<br><div class="ege-inline-block-vm mgPlayerJSPreview_display-flex mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-wrap mgPlayerJSPreview_padding-lr-15">'+P.join("")+" </div><br>",a="<button class='ege-ok-btn-radio mgPlayerJSPreview_btn-default ege-inline-block-vt' aria-label='"+l+"' >"+l+"</button>"}}"copy"===t&&(l=rootScope.labels.copy);c="",rootScope.categoryIsUnPublished&&(c="<div class='mgPlayerJSPreview_popup-content-info'>"+(e===(t=rootScope.labels).tourpublishMsg2?t.tooltipPublishWarningMessage:t.guidePublishWarningMessage)+"</div>",rootScope.categoryIsUnPublished=!1),l=" <div class='mgPlayerJSPreview_overlay-container'></div> <div class='ege-popup "+p+"'>    <div class='mgPlayerJSPreview_popup-header-wrapper'>\t"+m+"\t\t   <div class='mgPlayerJSPreview_popup-header-icon-wrapper'><div class='mgPlayerJSPreview_popup-header-icon'>"+d+"</div></div>   </div>"+(_=GmCXt.isDefined(n)?"<div class='ege-popup-title-wrapper'>"+n+"</div>":_)+"\t<div class='ege-popup-content-wrapper mgPlayerJSPreview_font-size-17'>"+e+u+"</div> "+c+" "+g+h+"\t<div class='ege-popup-btn-wrapper'>"+a+s+"\t</div> </div> ";(rootScope.isAutoConfigPanelOpen?mg$$1(".ege-panel-auto"):mg$$1(".ege-panel")).append(l),modal.attachPopupActions(r,i,!1),setTimeout(function(){mg$$1("#mgPlayerJSPreview_btn-ok-common-popup").focus()},500),o&&setTimeout(function(){mg$$1(".mgPlayerJSPreview_overlay-container").remove(),mg$$1(".ege-popup").remove()},o)},modal.openCategoryDelete=function(e,t,r){var i=rootScope.svgs.popupWarning,i=" <div class='mgPlayerJSPreview_overlay-container'></div> <div class='ege-popup mgPlayerJSPreview_popup-warning'>    <div class='mgPlayerJSPreview_popup-header-wrapper'>\t"+("<div id='mgPlayerJSPreview_btn-cancel-cat-del-popup' class='mgPlayerJSPreview_popup-btn-close ege-cancel-btn'>"+rootScope.svgs.popupClose+"</div>")+"\t\t   <div class='mgPlayerJSPreview_popup-header-icon-wrapper'><div class='mgPlayerJSPreview_popup-header-icon'>"+i+"</div></div>   </div>\t<div class='ege-popup-content-wrapper mgPlayerJSPreview_font-size-17'>"+rootScope.labels.deleteFolder+": <b>"+e.name+"</b></div>   <div class='mgPlayerJSPreview_popup-content-info'>"+e.msg+"</div>\t<div class='ege-popup-btn-wrapper'>\t\t<div id='mgPlayerJSPreview_btn-ok-cat-del-popup' class='ege-ok-btn mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-large ege-inline-block-vt'>OK</div>\t</div> </div> ";mg$$1(".ege-panel").append(i),modal.attachPopupActions(t,r,!1)},modal.openJsonEdit=function(e,t,r,i){mg$$1(".ege-panel").append("<div class='ege-popup mgPlayerJSPreview_popup-warning'> \t<pre id='mgPlayerJSPreview_json-editor'></pre>\t<div class='ege-popup-btn-wrapper'>\t\t<div id='mgPlayerJSPreview_btn-ok-json-edit-popup' class='ege-ok-json-update mgPlayerJSPreview_btn-default ege-inline-block-vt'>Save</div>       <div id='mgPlayerJSPreview_btn-cancel-json-edit-popup' class='ege-cancel-btn mgPlayerJSPreview_btn-default ege-inline-block-vt'>Cancel</div>\t</div> </div> "),modal.attachPopupActions(r,i,!1)},modal.openGuideLink=function(e,t,i,a){rootScope.step={};var o=e.data,e=(Gm.loading.set(!0),{tour_id:o.tour.tour_id,step_title:"",step_description:"",step_type:"guide",step_target_type:"na",step_target_name:"na",step_settings:"na",step_image:"0",step_screen:"0",step_url:"na",step_audio_text:"na",step_video_id:"0",step_audio:"0",step_order:parseInt(o.order)}),n=(rootScope.step=e,modal),e=(setTimeout(function(){Gm.loading.set(!1)},200),{category_id:o.tour.category_id,limit:100,offset:0}),s=" <div class='mgPlayerJSPreview_overlay-container'></div>";api.getTourList(e,function(e){var r="";e.forEach(function(e,t){e.tour_id!==o.tour.tour_id&&0<parseInt(e.step_count)&&e.tour_type===o.tour_type&&(r+='<option value="'+e.tour_id+'" data-category_id="'+e.category_id+'"  data-description="'+e.tour_description+'" data-image="'+e.tour_image+'" data-screenImage="'+e.tour_image+'">'+e.tour_title+"</option>")}),s+=" <div class='ege-popup-link-guide'> \t<div class='ege-popup-header'>"+rootScope.labels.guideLinkMessage+'</div>\t<div class=\'ege-popup-close\'><svg version="1.1" id="Capa_1" x="0px" y="0px"viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve"><g><g><path d="M46,4C44.9,3,43.2,3,42.1,4L25,21.2L7.9,4C6.8,3,5.1,3,4,4S3,6.8,4,7.9L21.2,25L4,42.1C3,43.2,3,44.9,4,46c0.5,0.5,1.2,0.8,1.9,0.8s1.4-0.3,1.9-0.8L25,28.8L42.1,46c0.5,0.5,1.2,0.8,1.9,0.8c0.7,0,1.4-0.3,1.9-0.8c1.1-1.1,1.1-2.8,0-3.8L28.8,25L46,7.9C47,6.8,47,5.1,46,4z"/></g></g></svg>\t</div>\t<div class=\'selectbox-wrapper\'>      \t<select class=\'create-step-selectbox-select\' id=\'ruleTypeGuide\'>      \t\t<option value=\'\'>'+rootScope.labels.select+"</option>     \t\t"+r+"      \t</select>\t</div>\t<div class='ege-popup-error-msg'>"+rootScope.labels.selectGuideBeforeSubmit+"</div>\t<div class='ege-popup-btn-wrapper'>       <div class='mgPlayerJSPreview_btn-default ege-inline-block-vt'>"+rootScope.labels.btnLink+"</div>       <div class='mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-neutral ege-inline-block-vt'>"+rootScope.labels.btnCancel+"</div>\t</div> </div> ",mg$$1(".ege-panel").append(s),n.attachPopupActions(i,"",a)})},modal.openDoItPopup=function(e,t){var r="<div class='mgPlayerJSPreview_popup-btn-close ege-cancel-btn'>"+rootScope.svgs.popupClose+"</div>",i="",t=(GmCXt.isDefined(t)&&(i="<div class='ege-popup-title-wrapper'>"+t+"</div>")," <div class='mgPlayerJSPreview_overlay-container'></div>\t<div class='ege-popup mgPlayerJSPreview_popup-info'>    \t<div class='mgPlayerJSPreview_popup-header-wrapper'>\t\t"+r+"\t\t  \t \t<div class='mgPlayerJSPreview_popup-header-icon-wrapper'><div class='mgPlayerJSPreview_popup-header-icon'>"+rootScope.svgs.popupInfo+"</div></div>   \t</div>"+i+"\t\t<div class='mgPlayerJSPreview_image-file-input-wrapper'>\t\t\t<input id='mgPlayerJSPreview_input-csv' title='Upload CSV' type='file' tabindex='-1' name='inputData' accept='.csv'>\t\t</div> \t\t<div class='ege-popup-btn-wrapper'>\t\t\t<div id='mgPlayerJSPreview_btn-ok-doit-popup' class='ege-csv-ok-btn mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-large ege-inline-block-vt'>"+rootScope.labels.ok+"</div>\t\t</div> \t</div> ");mg$$1(".ege-panel").append(t),modal.attachPopupActions(e)},modal.close=function(){close()},modal.publishNoEnv=function(e,t,r){rootScope.guideEnvs=e.tour_settings.app_publish_env,rootScope.guideEnvs,void 0===rootScope.guideEnvs&&e.is_published&&rootScope.appEnvs,e.is_published||localStorage.getItem(GmCXt.prevEnv),rootScope.appEnvs;var e="<div class='mgPlayerJSPreview_popup-btn-close ege-cancel-btn'>"+rootScope.svgs.popupClose+"</div>",i="",r=(GmCXt.isDefined(r)&&(i="<div class='ege-popup-title-wrapper'>"+r+"</div>")," <div class='mgPlayerJSPreview_overlay-container'></div> <div class='ege-popup mgPlayerJSPreview_popup-info'>    <div class='mgPlayerJSPreview_popup-header-wrapper'>\t"+e+"\t\t   <div class='mgPlayerJSPreview_popup-header-icon-wrapper'><div class='mgPlayerJSPreview_popup-header-icon'>"+rootScope.svgs.popupInfo+"</div></div>   </div>"+i+getSchedulePubHTML()+"<div class='ege-popup-btn-wrapper'><button id='mgPlayerJSPreview_btn-ok-publish-popup' class='ege-publish mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-large ege-inline-block-vt'>"+rootScope.labels.publish+"</button></div></div> ");mg$$1(".ege-panel").append(r),mg$$1(".mgPlayerJSPreview_pub-schedule-checkbox-container").show(),mg$$1("#mgPlayerJSPreview_pub-schedule-date").change(function(e){checkTimeValidity()}),mg$$1("#mgPlayerJSPreview_pub-schedule-time").change(function(e){checkTimeValidity()}),mg$$1("#mgPlayerJSPreview_checkbox-tour-schedule-pub").off("click").on("click",function(){mg$$1("#mgPlayerJSPreview_checkbox-tour-schedule-pub").is(":checked")?mg$$1(".mgPlayerJSPreview_pub-date-container").show():mg$$1(".mgPlayerJSPreview_pub-date-container").hide()}),mg$$1("#mgPlayerJSPreview_btn-ok-publish-popup").off("click").on("click",function(){t(),close()}),mg$$1(".mgPlayerJSPreview_popup-btn-close").off("click").on("click",function(e){close()}),Gm.loading.set(!1)},modal.publish=function(e,t,r){rootScope.guideEnvs=e.tour_settings.app_publish_env;var i=rootScope.guideEnvs||[],a=(void 0===rootScope.guideEnvs&&e.is_published&&(i=rootScope.appEnvs),e.is_published||(i=localStorage.getItem(GmCXt.prevEnv)),rootScope.appEnvs),o=[],e="<div class='mgPlayerJSPreview_popup-btn-close ege-cancel-btn'>"+rootScope.svgs.popupClose+"</div>";for(o.push('<div class="mgPlayerJSPreview_guide-progress-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-flex-end"><div id='+a[0]+' class="mgPlayerJSPreview_guide-progress-val"><div class="mgPlayerJSPreview_guide-progress-label mgPlayerJSPreview_text-align-center mgPlayerJSPreview_font-size-13">'+rootScope.updateEnvNames(a[0])+"</div></div></div> "),l=1;l<a.length;l++)o.push("<div class='mgPlayerJSPreview_hr'></div><div class=\"mgPlayerJSPreview_guide-progress-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-flex-end mgPlayerJSPreview_ele-width\"><div id="+a[l]+' class="mgPlayerJSPreview_guide-progress-val"><div class="mgPlayerJSPreview_guide-progress-label mgPlayerJSPreview_text-align-center mgPlayerJSPreview_font-size-13">'+rootScope.updateEnvNames(a[l])+"</div></div></div> ");var n="",s="",r=(GmCXt.isDefined(r)&&(s="<div class='ege-popup-title-wrapper'>"+r+"</div>")," <div class='mgPlayerJSPreview_overlay-container'></div> <div class='ege-popup mgPlayerJSPreview_popup-info'>    <div class='mgPlayerJSPreview_popup-header-wrapper'>\t"+e+"\t\t   <div class='mgPlayerJSPreview_popup-header-icon-wrapper'><div class='mgPlayerJSPreview_popup-header-icon'>"+rootScope.svgs.popupInfo+"</div></div>   </div>"+s+"<div class='mgPlayerJSPreview_guide-progress-container mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-start mgPlayerJSPreview_justify-content-center'>"+o.join("")+"</div><div class='mgPlayerJSPreview_process-msg mgPlayerJSPreview_width-100 mgPlayerJSPreview_text-align-center mgPlayerJSPreview_padding-lr-15' id='publishMsg'>"+n+"</div>"+getSchedulePubHTML()+"<div class='ege-popup-btn-wrapper'><button id='mgPlayerJSPreview_btn-ok-publish-popup' class='ege-publish mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-large ege-inline-block-vt mgPlayerJSPreview_disabled'>"+rootScope.labels.publish+"</button></div></div> ");mg$$1(".ege-panel").append(r);for(var l=0;l<a.length;l++)if(-1!==i.indexOf(a[l])){mg$$1(".ege-publish").removeClass("mgPlayerJSPreview_disabled"),mg$$1("#"+a[l]).addClass("mgPlayerJSPreview_active-progress");for(var c=l-1;0<=c;c--)mg$$1(".ege-publish").removeClass("mgPlayerJSPreview_disabled"),mg$$1("#"+a[c]).addClass("mgPlayerJSPreview_active-progress")}for(var p,l=0;l<i.length;l++)-1!==rootScope.appEnvs.indexOf(i[l])&&(p=rootScope.updateEnvNames(i[l]),n?n+=", "+p:n=rootScope.labels.guideIsPubIn+p);n&&mg$$1("#publishMsg").text(n);e=i;(e="string"==typeof i?i.split(","):e).length===a.length?mg$$1(".mgPlayerJSPreview_pub-schedule-checkbox-container").show():mg$$1(".mgPlayerJSPreview_pub-schedule-checkbox-container").hide(),mg$$1("#mgPlayerJSPreview_pub-schedule-date").change(function(e){checkTimeValidity()}),mg$$1("#mgPlayerJSPreview_pub-schedule-time").change(function(e){checkTimeValidity()}),mg$$1("#mgPlayerJSPreview_checkbox-tour-schedule-pub").off("click").on("click",function(){mg$$1("#mgPlayerJSPreview_checkbox-tour-schedule-pub").is(":checked")?mg$$1(".mgPlayerJSPreview_pub-date-container").show():mg$$1(".mgPlayerJSPreview_pub-date-container").hide()}),Gm.loading.set(!1),isPublishedOnTopEnv()&&mg$$1(".ege-publish").addClass("mgPlayerJSPreview_disabled"),modal.addPublishActions(t)},modal.scheduled=function(t,e,r){rootScope.guideEnvs=t.tour_settings.app_publish_env,rootScope.guideEnvs,void 0===rootScope.guideEnvs&&t.is_published&&rootScope.appEnvs,t.is_published||localStorage.getItem(GmCXt.prevEnv);var i=rootScope.appEnvs,a="<div class='mgPlayerJSPreview_popup-btn-close ege-cancel-btn'>"+rootScope.svgs.popupClose+"</div>",o=new Date(t.tour_settings.visibilitytimestamp),n=o.getMonth()+1,s=(n<10&&(n="0"+n),o.getDate()),l=o.getFullYear(),s=(o.getHours(),o.getHours(),o.getMinutes(),o.getMinutes(),s+"/"+n+"/"+l),n=o.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),l="",o=(GmCXt.isDefined(r)&&(l="<div class='ege-popup-title-wrapper'>"+r+"</div>")," <div class='mgPlayerJSPreview_overlay-container'></div><div class='ege-popup mgPlayerJSPreview_popup-info'> <div class='mgPlayerJSPreview_popup-header-wrapper'>"+a+"<div class='mgPlayerJSPreview_popup-header-icon-wrapper'><div class='mgPlayerJSPreview_popup-header-icon'>"+rootScope.svgs.popupInfo+"</div></div></div>"+l+"<div class='mgPlayerJSPreview_schedule-popup-container'><div class='mgPlayerJSPreview_schedule-popup-container-inner'><div class='mgPlayerJSPreview_schedule-popup-header-title'>"+rootScope.updateEnvNames(i[i.length-1])+"</div><div class='mgPlayerJSPreview_padding-10'><div class='mgPlayerJSPreview_padding-5 mgPlayerJSPreview_display-inline-block'>"+rootScope.labels.scheduleDateLabel+"</div><div class='mgPlayerJSPreview_padding-5 mgPlayerJSPreview_display-inline-block mgPlayerJSPreview_float-right'>"+s+"</div></div><div class='mgPlayerJSPreview_hr'></div><div class='mgPlayerJSPreview_padding-10'><div class='mgPlayerJSPreview_padding-5 mgPlayerJSPreview_display-inline-block'>"+rootScope.labels.scheduleTimeLabel+"</div><div class='mgPlayerJSPreview_padding-5 mgPlayerJSPreview_display-inline-block mgPlayerJSPreview_float-right'>"+n+"</div></div><div class='mgPlayerJSPreview_hr'></div><div class='mgPlayerJSPreview_padding-10'><div class='mgPlayerJSPreview_padding-5 mgPlayerJSPreview_display-inline-block'>"+rootScope.labels.status+"</div><div class='mgPlayerJSPreview_padding-5 mgPlayerJSPreview_display-inline-block mgPlayerJSPreview_float-right'> "+rootScope.labels.scheduleLabel+"</div></div><div class='mgPlayerJSPreview_hr'></div><div class='mgPlayerJSPreview_cancel-schedule'><button type='button' class='mgPlayerJSPreview_cancel-schedule-btn mgPlayerJSPreview_lbl-btn'>"+rootScope.labels.cancelSchedule+"</button></div></div></div></div>");mg$$1(".ege-panel").append(o),mg$$1(".mgPlayerJSPreview_cancel-schedule-btn").off("click").on("click",function(e){rootScope.changeStatus(t,"unpublish"),close()}),mg$$1(".mgPlayerJSPreview_popup-btn-close").off("click").on("click",function(e){close()}),Gm.loading.set(!1)};class SignIn extends SvelteComponent{constructor(e){super(),init(this,e,instance$o,create_fragment$p,safe_not_equal,{getSignInUser:28},null,[-1,-1])}get getSignInUser(){return getSignInUser}}class Empty extends SvelteComponent{constructor(e){super(),init(this,e,null,null,safe_not_equal,{})}}function create_fragment$o(r){let i,a,o=r[1].svgs.search+"",n,s,l,c,p,d=r[1].svgs.search_close+"",u,g,m,h;return{c(){i=element("div"),a=element("div"),n=space(),s=element("input"),c=space(),p=element("button"),attr(a,"class","mgPlayerJSPreview_search-icon mgPlayerJSPreview_inline-block-vm"),attr(s,"id","search-text-input"),attr(s,"class",l="mgPlayerJSPreview_search-input mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_height-100 ng-pristine ng-untouched ng-valid ng-empty ng-valid-maxlength "+(r[1].isMicroPlayer?"mgPlayerJSPreview_width-100 mgPlayerJSPreview_no-trans":"")),attr(s,"maxlength","100"),attr(s,"placeholder",r[4]),attr(s,"autocomplete","off"),attr(s,"aria-label",r[4]),toggle_class(s,"mgPlayerJSPreview_search-input-wd-task",r[1].FT.isPlayer&&r[3]),toggle_class(s,"mgPlayerJSPreview_search-input-player",r[1].FT.isPlayer&&!r[3]),toggle_class(s,"mgPlayerJSPreview_search-input-active",r[1].FT.isPlayer&&(r[1].currentPageOnly||r[2])),toggle_class(s,"mgPlayerJSPreview_search-input-creator-active",r[1].FT.creatorApp&&r[0].length),attr(p,"id","mgPlayerJSPreview_icon-search-close-current-page"),attr(p,"class",u="mgPlayerJSPreview_search-close-icon mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_lbl-btn "+(0<r[0].length?"mgPlayerJSPreview_active":"")),attr(i,"class",g="mgPlayerJSPreview_search-input-wrapper mgPlayerJSPreview_position-relative "+(r[1].isMicroPlayer?"mgPlayerJSPreview_width-100":""))},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),set_input_value(s,r[0]),append(i,c),append(i,p),p.innerHTML=d,m||(h=[listen(s,"input",r[7]),listen(s,"input",r[6]),listen(p,"click",r[5])],m=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.search+"")&&(a.innerHTML=o),2&t[0]&&l!==(l="mgPlayerJSPreview_search-input mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_height-100 ng-pristine ng-untouched ng-valid ng-empty ng-valid-maxlength "+(e[1].isMicroPlayer?"mgPlayerJSPreview_width-100 mgPlayerJSPreview_no-trans":""))&&attr(s,"class",l),16&t[0]&&attr(s,"placeholder",e[4]),16&t[0]&&attr(s,"aria-label",e[4]),1&t[0]&&s.value!==e[0]&&set_input_value(s,e[0]),10&t[0]&&toggle_class(s,"mgPlayerJSPreview_search-input-wd-task",e[1].FT.isPlayer&&e[3]),10&t[0]&&toggle_class(s,"mgPlayerJSPreview_search-input-player",e[1].FT.isPlayer&&!e[3]),6&t[0]&&toggle_class(s,"mgPlayerJSPreview_search-input-active",e[1].FT.isPlayer&&(e[1].currentPageOnly||e[2])),3&t[0]&&toggle_class(s,"mgPlayerJSPreview_search-input-creator-active",e[1].FT.creatorApp&&e[0].length),2&t[0]&&d!==(d=e[1].svgs.search_close+"")&&(p.innerHTML=d),1&t[0]&&u!==(u="mgPlayerJSPreview_search-close-icon mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_lbl-btn "+(0<e[0].length?"mgPlayerJSPreview_active":""))&&attr(p,"class",u),2&t[0]&&g!==(g="mgPlayerJSPreview_search-input-wrapper mgPlayerJSPreview_position-relative "+(e[1].isMicroPlayer?"mgPlayerJSPreview_width-100":""))&&attr(i,"class",g)},i:noop,o:noop,d(e){e&&detach(i),m=!1,run_all(h)}}}let limit$3=50,offset=0;function debounce(t,r){let i;return function(...e){clearTimeout(i),i=setTimeout(()=>{t.apply(this,e)},r)}}function instance$n(e,t,r){let i,a,o,n,s,l,c=!1,p,d=[],u,g=[],m=[],h=0,_="",f=Gm.CurrentPageTours.subscribe(e=>{n=e}),v=Gm.labels.subscribe(e=>{GmCXt.isEmpty(e)||r(1,rootScope.labels=e,rootScope)}),y=Gm.filters.subscribe(e=>{C()}),P=(Gm.searchTerm.subscribe(e=>{e!==a&&r(0,a=e)}),mg$$1(document).on("keyup","#search-text-input",function(e){[27,20,16,17,18,91,93,37,38,39,40,45,46].indexOf(e.keyCode)}),Gm.breadCrumb.subscribe(e=>{s=e,J()})),S=Gm.CurrentPage.subscribe(e=>{o=e,J()});let w=function(e){if(0===a.length&&rootScope.setCurrentPage("allguides"),a&&1<a.length){Gm.loading.set(!0),Gm.searchTours.set([]),"allguidesSearchPage"!==get_store_value(Gm.CurrentPage)&&rootScope.setCurrentPage("allguidesSearchPage");let e="",t=(0<s.length&&s[s.length-1].has_tour&&(e=s[s.length-1].category_id),mg$$1("#search-text-input").focus(),"tour_id");var r;(p=rootScope.sortByProperty?rootScope.sortByProperty:p)===rootScope.labels.name&&(t="tour_title"),r={limit:limit$3,offset:offset,search_text:i,sort_by:t},rootScope.myGuidesFilter&&(r.my_guides=rootScope.user.user_id),rootScope.currentUserFilter&&0!==rootScope.currentUserFilter.user_id&&(r.creator_id=rootScope.currentUserFilter.user_id),rootScope.filterByPublishedGuides===rootScope.labels.published?r.is_published="1":rootScope.filterByPublishedGuides===rootScope.labels.unpublished&&(r.is_published="0"),rootScope.currentAssigneeFilter&&0!==rootScope.currentAssigneeFilter.user_id&&(r.locked_user_id=rootScope.currentAssigneeFilter.user_id),rootScope.FT.publishedGuides&&(r.is_published="1"),e&&(r.category_id=e),GmCXt.inPlayer||GmCXt.onPrem()?api.searchTours(r,function(e){k(e,a)}):api.getTourList(r,function(e){k(e,a)})}};function b(e){return e&&-1<e.toLowerCase().indexOf(i.toLowerCase())}function C(){if(a&&1<a.length&&Gm.searchTerm.set(i),"allguides"===o||"allguidesSearchPage"===o||"myguides"===o)w();else if("currentpage"===o||"currentPageSearchPage"===o){0===a.length&&rootScope.setCurrentPage("currentpage");let t=[];var e;0<n.length&&1<a.length&&("currentPageSearchPage"!==get_store_value(Gm.CurrentPage)&&rootScope.setCurrentPage("currentPageSearchPage"),n.filter(function(e){(b(e.tour_title)||e.tour_id===i||b(e.keywords)||b(e.tour_description))&&t.push(e)}),e=t,u=(new Date).getTime(),h&&5e3<=u-h&&rootScope.trackCurrentPageSearchEvent(!1),h=u,r(1,rootScope.trackCurrentPageSearch={keyword:i,results_returned:e.length,track:!0,startTime:(new Date).getTime()},rootScope),Gm.searchTours.set(t),k(t,i));return}}function k(e,t){d=[],e=e.filter(function(e){if(GmCXt.isGuide(e)||GmCXt.isOnboarding(e))return e}),u=(new Date).getTime(),(g=e.length)&&(m=mg$$1.merge(m,e),m=GmCXt.removeDuplicateGuides(m),rootScope.notDefaultLang()&&(m=rootScope.getTranslatedTours(m)),rootScope.FT.isPlayer&&(m=m.filter(function(e){if(GmCXt.isGuide(e)||GmCXt.isOnboarding(e))return e})).length,h)&&rootScope.trackSearch&&!rootScope.trackSearch.filters&&5e3<=u-h&&rootScope.trackSearchEvent(!1),r(1,rootScope.trackSearch={keyword:t,results_returned:g,track:!0,startTime:(new Date).getTime()},rootScope),m.length||g||rootScope.trackSearchEvent(!1),rootScope.trackSearch.filters||(h=u),rootScope.guideSegmentation&&rootScope.FT.isPlayer?(Gm.loading.set(!0),GmCXt.checkGuidesBasedOnSegment(e,T,"searchSeg")):(Gm.loading.set(!1),Gm.searchTours.set(e))}function T(e){GmCXt.isEmpty(e)||d.push(e),d=GmCXt.removeDuplicateGuides(d),Gm.loading.set(!1),Gm.searchTours.set(d)}var x=debounce(C,1e3);let A=Gm.isTaskListVisible.subscribe(e=>{r(3,c=e)});function J(){"currentpage"===o?r(4,_=rootScope.labels.currentPageSearchPlaceholder):"allguides"===o&&!s.length||"myguides"===o?r(4,_=rootScope.labels.inputPlaceHolderSearch):r(4,_=rootScope.labels.searchInFolder)}return onDestroy(()=>{A(),f(),v(),y(),P(),S()}),e.$$.update=()=>{1&e.$$.dirty[0]&&(i=a.toLowerCase()),1&e.$$.dirty[0]&&(0<a.trim().length?r(2,l=!0):r(2,l=!1))},[a,rootScope,l,c,_,()=>{r(0,a=""),Gm.searchTerm.set(""),r(1,rootScope.currentUserFilter="",rootScope),r(1,rootScope.filterByPublishedGuides="",rootScope),r(1,rootScope.currentAssigneeFilter="",rootScope),r(1,rootScope.sortByProperty="",rootScope),"allguidesSearchPage"===o?rootScope.setCurrentPage("allguides"):"currentPageSearchPage"===o&&rootScope.setCurrentPage("currentpage")},x,function(){a=this.value,r(0,a)}]}class Search extends SvelteComponent{constructor(e){super(),init(this,e,instance$n,create_fragment$o,safe_not_equal,{},null,[-1,-1])}}function get_each_context$8(e,t,r){e=e.slice();return e[55]=t[r],e}function get_each_context_1$4(e,t,r){e=e.slice();return e[55]=t[r],e}function create_else_block_1$3(e){let r,i,a=e[0].labels.selectFromCategories+"",o,n,s,l=e[0].automationGuideSelectCount+"",c,p,d=e[0].labels.selectedGuides+"",u;return{c(){r=element("div"),i=element("div"),o=text(a),n=space(),s=element("div"),c=text(l),p=space(),u=text(d),attr(r,"class","mgPlayerJSPreview_auto-header-bar-container")},m(e,t){insert(e,r,t),append(r,i),append(i,o),append(r,n),append(r,s),append(s,c),append(s,p),append(s,u)},p(e,t){1&t[0]&&a!==(a=e[0].labels.selectFromCategories+"")&&set_data(o,a),1&t[0]&&l!==(l=e[0].automationGuideSelectCount+"")&&set_data(c,l),1&t[0]&&d!==(d=e[0].labels.selectedGuides+"")&&set_data(u,d)},i:noop,o:noop,d(e){e&&detach(r)}}}function create_if_block$k(e){let r,i,a,o,n,s,l,c,p,d=e[0].FT.isPlayer&&e[8]&&create_if_block_13$8(e),u=(o=new Search({}),e[0].FT.isPlayer&&create_if_block_11$9(e)),g=!e[0].isMicroPlayer&&create_if_block_9$a(e),m="allguidesSearchPage"===e[1]&&create_if_block_1$h(e);return{c(){r=element("div"),i=element("div"),d&&d.c(),a=space(),create_component(o.$$.fragment),n=space(),u&&u.c(),l=space(),g&&g.c(),c=space(),m&&m.c(),attr(i,"class",s="mgPlayerJSPreview_search-bar-container mgPlayerJSPreview_display-flex "+(e[0].isMicroPlayer?"mgPlayerJSPreview_bg-white mgPlayerJSPreview_mplayer-search-view":"")+" "+(e[0].isMicroPlayer?"":"mgPlayerJSPreview_search-bar-collapse")),attr(r,"class","list-page-header-wrapper mgPlayerJSPreview_no-padding mgPlayerJSPreview_position-relative")},m(e,t){insert(e,r,t),append(r,i),d&&d.m(i,null),append(i,a),mount_component(o,i,null),append(i,n),u&&u.m(i,null),append(r,l),g&&g.m(r,null),append(r,c),m&&m.m(r,null),p=!0},p(e,t){e[0].FT.isPlayer&&e[8]?d?d.p(e,t):((d=create_if_block_13$8(e)).c(),d.m(i,a)):d&&(d.d(1),d=null),e[0].FT.isPlayer?u?u.p(e,t):((u=create_if_block_11$9(e)).c(),u.m(i,null)):u&&(u.d(1),u=null),(!p||1&t[0]&&s!==(s="mgPlayerJSPreview_search-bar-container mgPlayerJSPreview_display-flex "+(e[0].isMicroPlayer?"mgPlayerJSPreview_bg-white mgPlayerJSPreview_mplayer-search-view":"")+" "+(e[0].isMicroPlayer?"":"mgPlayerJSPreview_search-bar-collapse")))&&attr(i,"class",s),e[0].isMicroPlayer?g&&(g.d(1),g=null):g?g.p(e,t):((g=create_if_block_9$a(e)).c(),g.m(r,c)),"allguidesSearchPage"===e[1]?m?m.p(e,t):((m=create_if_block_1$h(e)).c(),m.m(r,null)):m&&(m.d(1),m=null)},i(e){p||(transition_in(o.$$.fragment,e),p=!0)},o(e){transition_out(o.$$.fragment,e),p=!1},d(e){e&&detach(r),d&&d.d(),destroy_component(o),u&&u.d(),g&&g.d(),m&&m.d()}}}function create_if_block_13$8(r){let i,a,o=r[0].taskListCount+"",n,s,l,c=r[0].svgs.iconTaskList+"",p,d;return{c(){i=element("div"),a=element("div"),n=text(o),s=space(),l=element("button"),attr(a,"class","mgPlayerJSPreview_task-list-count mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center"),attr(l,"class","mgPlayerJSPreview_task-list-icon mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_position-relative"),attr(i,"class","mgPlayerJSPreview_task-list-icon-container mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_position-relative"),toggle_class(i,"mgPlayerJSPreview_task-list-icon-mplayer",r[0]?.isMicroPlayer)},m(e,t){insert(e,i,t),append(i,a),append(a,n),append(i,s),append(i,l),l.innerHTML=c,p||(d=listen(l,"click",r[24]),p=!0)},p(e,t){1&t[0]&&o!==(o=e[0].taskListCount+"")&&set_data(n,o),1&t[0]&&c!==(c=e[0].svgs.iconTaskList+"")&&(l.innerHTML=c),1&t[0]&&toggle_class(i,"mgPlayerJSPreview_task-list-icon-mplayer",e[0]?.isMicroPlayer)},d(e){e&&detach(i),p=!1,d()}}}function create_if_block_11$9(r){let i,a,o=r[0].svgs.filter_mplayer+"",n,s,l,c,p,d=(r[11]?.recent||r[0].labels.recent)+"",u,g,m,h,_=(r[11]?.older||r[0].labels.older)+"",f,v,y,P,S,w=(r[11]?.clear||r[0].labels.clear)+"",b,C,k,T,x=(!r[0].enableTranslation||r[0].defaultLang.language===r[0].language)&&create_if_block_12$8(r);return{c(){i=element("div"),a=element("button"),n=space(),s=element("div"),l=element("div"),x&&x.c(),c=space(),p=element("button"),u=text(d),m=space(),h=element("button"),f=text(_),y=space(),P=element("div"),S=element("button"),b=text(w),attr(a,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_filter-sort-icon mgPlayerJSPreview_position-relative mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer"),attr(a,"aria-label","Sort By"),attr(a,"aria-expanded","false"),attr(p,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_filter-dropdown-item mgPlayerJSPreview_padding-tb-10 mgPlayerJSPreview_padding-lr-25 mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer"),attr(p,"aria-label",g=r[11]?.recent||r[0].labels.recent),toggle_class(p,"mgPlayerJSPreview_active-sort-filter","recent"===r[6]),attr(h,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_filter-dropdown-item mgPlayerJSPreview_padding-tb-10 mgPlayerJSPreview_padding-lr-25 mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer"),attr(h,"aria-label",v=r[11]?.older||r[0].labels.older),toggle_class(h,"mgPlayerJSPreview_active-sort-filter","older"===r[6]),attr(l,"class","mgPlayerJSPreview_padding-tb-5"),attr(S,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_filter-common-btn mgPlayerJSPreview_margin-lr-5 mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_text-color-white mgPlayerJSPreview_theme-background mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_no-border mgPlayerJSPreview_no-border-all mgPlayerJSPreview_disabled"),attr(S,"aria-label",C=r[11]?.clear||r[0].labels.clear),attr(S,"aria-disabled","true"),toggle_class(S,"mgPlayerJSPreview_disabled",!r[6]),attr(P,"class","mgPlayerJSPreview_filter-btn-wrapper mgPlayerJSPreview_width-100 mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center"),attr(s,"class","mgPlayerJSPreview_filter-sorting-dropdown-wrapper mgPlayerJSPreview_z-index mgPlayerJSPreview_z-index-max"),attr(s,"role","region"),attr(s,"aria-label","Sort"),toggle_class(s,"mgPlayerJSPreview_display-block",r[7]),attr(i,"class","mgPlayerJSPreview_filter-sorting-wrapper mgPlayerJSPreview_position-relative")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,l),x&&x.m(l,null),append(l,c),append(l,p),append(p,u),append(l,m),append(l,h),append(h,f),append(s,y),append(s,P),append(P,S),append(S,b),k||(T=[listen(a,"click",r[12]),listen(p,"click",r[27]),listen(h,"click",r[28]),listen(S,"click",r[29])],k=!0)},p(e,t){1&t[0]&&o!==(o=e[0].svgs.filter_mplayer+"")&&(a.innerHTML=o),e[0].enableTranslation&&e[0].defaultLang.language!==e[0].language?x&&(x.d(1),x=null):x?x.p(e,t):((x=create_if_block_12$8(e)).c(),x.m(l,c)),2049&t[0]&&d!==(d=(e[11]?.recent||e[0].labels.recent)+"")&&set_data(u,d),2049&t[0]&&g!==(g=e[11]?.recent||e[0].labels.recent)&&attr(p,"aria-label",g),64&t[0]&&toggle_class(p,"mgPlayerJSPreview_active-sort-filter","recent"===e[6]),2049&t[0]&&_!==(_=(e[11]?.older||e[0].labels.older)+"")&&set_data(f,_),2049&t[0]&&v!==(v=e[11]?.older||e[0].labels.older)&&attr(h,"aria-label",v),64&t[0]&&toggle_class(h,"mgPlayerJSPreview_active-sort-filter","older"===e[6]),2049&t[0]&&w!==(w=(e[11]?.clear||e[0].labels.clear)+"")&&set_data(b,w),2049&t[0]&&C!==(C=e[11]?.clear||e[0].labels.clear)&&attr(S,"aria-label",C),64&t[0]&&toggle_class(S,"mgPlayerJSPreview_disabled",!e[6]),128&t[0]&&toggle_class(s,"mgPlayerJSPreview_display-block",e[7])},d(e){e&&detach(i),x&&x.d(),k=!1,run_all(T)}}}function create_if_block_12$8(r){let i,a=r[0].labels.atoz+"",o,n,s,l,c=r[0].labels.ztoa+"",p,d,u,g;return{c(){i=element("button"),o=text(a),s=space(),l=element("button"),p=text(c),attr(i,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_filter-dropdown-item mgPlayerJSPreview_padding-tb-10 mgPlayerJSPreview_padding-lr-25 mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer"),attr(i,"aria-label",n=r[0].labels.atoz),toggle_class(i,"mgPlayerJSPreview_active-sort-filter","atoz"===r[6]),attr(l,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_filter-dropdown-item mgPlayerJSPreview_padding-tb-10 mgPlayerJSPreview_padding-lr-25 mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer"),attr(l,"aria-label",d=r[0].labels.ztoa),toggle_class(l,"mgPlayerJSPreview_active-sort-filter","ztoa"===r[6])},m(e,t){insert(e,i,t),append(i,o),insert(e,s,t),insert(e,l,t),append(l,p),u||(g=[listen(i,"click",r[25]),listen(l,"click",r[26])],u=!0)},p(e,t){1&t[0]&&a!==(a=e[0].labels.atoz+"")&&set_data(o,a),1&t[0]&&n!==(n=e[0].labels.atoz)&&attr(i,"aria-label",n),64&t[0]&&toggle_class(i,"mgPlayerJSPreview_active-sort-filter","atoz"===e[6]),1&t[0]&&c!==(c=e[0].labels.ztoa+"")&&set_data(p,c),1&t[0]&&d!==(d=e[0].labels.ztoa)&&attr(l,"aria-label",d),64&t[0]&&toggle_class(l,"mgPlayerJSPreview_active-sort-filter","ztoa"===e[6])},d(e){e&&(detach(i),detach(s),detach(l)),u=!1,run_all(g)}}}function create_if_block_9$a(r){let i,a,o,n=(r[11]?.currentPage||r[0].labels.currentPage)+"",s,l,c,p,d;function u(e){return e[0].FT.isPlayer?create_if_block_10$9:create_else_block$9}let g=u(r),m=g(r);return{c(){i=element("div"),a=element("div"),o=element("button"),s=text(n),c=space(),m.c(),attr(o,"id","mgPlayerJSPreview_filter-tab-current-page"),attr(o,"class",l="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_filter-tab mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_text-align-center mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_margin-lr-5 mgPlayerJSPreview_text-overflow-ellipsis "+("currentpage"===r[1]?"mgPlayerJSPreview_filter-active-tab":"")),attr(a,"class","mgPlayerJSPreview_library-filter-wrapper mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_margin-lr-10"),attr(i,"class","ege-inline-block-div all-guides-filters-tab mgPlayerJSPreview_width-100 mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,s),append(a,c),m.m(a,null),p||(d=listen(o,"click",r[14]),p=!0)},p(e,t){2049&t[0]&&n!==(n=(e[11]?.currentPage||e[0].labels.currentPage)+"")&&set_data(s,n),2&t[0]&&l!==(l="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_filter-tab mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_text-align-center mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_margin-lr-5 mgPlayerJSPreview_text-overflow-ellipsis "+("currentpage"===e[1]?"mgPlayerJSPreview_filter-active-tab":""))&&attr(o,"class",l),g===(g=u(e))&&m?m.p(e,t):(m.d(1),(m=g(e))&&(m.c(),m.m(a,null)))},d(e){e&&detach(i),m.d(),p=!1,d()}}}function create_else_block$9(r){let i,a=(r[11]?.myGuides||r[0].labels.myGuides)+"",o,n,s,l;return{c(){i=element("button"),o=text(a),attr(i,"id","mgPlayerJSPreview_filter-tab-go-to-lib"),attr(i,"class",n="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_filter-tab mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_text-align-center mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_margin-lr-5 mgPlayerJSPreview_text-overflow-ellipsis "+("myguides"===r[1]?"mgPlayerJSPreview_filter-active-tab":""))},m(e,t){insert(e,i,t),append(i,o),s||(l=listen(i,"click",r[15]),s=!0)},p(e,t){2049&t[0]&&a!==(a=(e[11]?.myGuides||e[0].labels.myGuides)+"")&&set_data(o,a),2&t[0]&&n!==(n="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_filter-tab mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_text-align-center mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_margin-lr-5 mgPlayerJSPreview_text-overflow-ellipsis "+("myguides"===e[1]?"mgPlayerJSPreview_filter-active-tab":""))&&attr(i,"class",n)},d(e){e&&detach(i),s=!1,l()}}}function create_if_block_10$9(r){let i,a=(r[11]?.allGuides||r[0].labels.allGuides)+"",o,n,s,l;return{c(){i=element("button"),o=text(a),attr(i,"id","mgPlayerJSPreview_filter-tab-go-to-lib"),attr(i,"class",n="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_filter-tab mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_text-align-center mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_margin-lr-5 mgPlayerJSPreview_text-overflow-ellipsis "+("allguides"===r[1]?"mgPlayerJSPreview_filter-active-tab":""))},m(e,t){insert(e,i,t),append(i,o),s||(l=listen(i,"click",r[14]),s=!0)},p(e,t){2049&t[0]&&a!==(a=(e[11]?.allGuides||e[0].labels.allGuides)+"")&&set_data(o,a),2&t[0]&&n!==(n="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_filter-tab mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_text-align-center mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_margin-lr-5 mgPlayerJSPreview_text-overflow-ellipsis "+("allguides"===e[1]?"mgPlayerJSPreview_filter-active-tab":""))&&attr(i,"class",n)},d(e){e&&detach(i),s=!1,l()}}}function create_if_block_1$h(e){let r,i,a,o,n=e[0].labels.searchResult+"",s,l=!e[0].isMicroPlayer&&e[0].FT.creatorApp&&create_if_block_2$g(e);return{c(){r=element("div"),i=space(),l&&l.c(),a=space(),o=element("div"),s=text(n),attr(r,"class","ege-clear"),attr(o,"class","mgPlayerJSPreview_search-result-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_font-size-15 mgPlayerJSPreview_padding-lr-20")},m(e,t){insert(e,r,t),insert(e,i,t),l&&l.m(e,t),insert(e,a,t),insert(e,o,t),append(o,s)},p(e,t){!e[0].isMicroPlayer&&e[0].FT.creatorApp?l?l.p(e,t):((l=create_if_block_2$g(e)).c(),l.m(a.parentNode,a)):l&&(l.d(1),l=null),1&t[0]&&n!==(n=e[0].labels.searchResult+"")&&set_data(s,n)},d(e){e&&(detach(r),detach(i),detach(a),detach(o)),l&&l.d(e)}}}function create_if_block_2$g(e){let r,i,a,o,n="allguidesSearchPage"===e[1]&&create_if_block_7$b(e),s="allguidesSearchPage"===e[1]&&create_if_block_6$c(e),l="allguidesSearchPage"===e[1]&&create_if_block_4$d(e),c="allguidesSearchPage"===e[1]&&create_if_block_3$e(e);return{c(){r=element("div"),n&&n.c(),i=space(),s&&s.c(),a=space(),l&&l.c(),o=space(),c&&c.c(),attr(r,"class","ege-inline-block-div all-guides-filters-tab mgPlayerJSPreview_width-100 mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center")},m(e,t){insert(e,r,t),n&&n.m(r,null),append(r,i),s&&s.m(r,null),append(r,a),l&&l.m(r,null),append(r,o),c&&c.m(r,null)},p(e,t){"allguidesSearchPage"===e[1]?n?n.p(e,t):((n=create_if_block_7$b(e)).c(),n.m(r,i)):n&&(n.d(1),n=null),"allguidesSearchPage"===e[1]?s?s.p(e,t):((s=create_if_block_6$c(e)).c(),s.m(r,a)):s&&(s.d(1),s=null),"allguidesSearchPage"===e[1]?l?l.p(e,t):((l=create_if_block_4$d(e)).c(),l.m(r,o)):l&&(l.d(1),l=null),"allguidesSearchPage"===e[1]?c?c.p(e,t):((c=create_if_block_3$e(e)).c(),c.m(r,null)):c&&(c.d(1),c=null)},d(e){e&&detach(r),n&&n.d(),s&&s.d(),l&&l.d(),c&&c.d()}}}function create_if_block_7$b(r){let i,a=r[0].labels.creator+":",o,n,s=r[3]?.first_name+"",l,c,p,d=r[0].svgs.down_arrow_icon+"",u,g,m,h=r[0].labels.currentUser+"",_,f,v,y=r[0].labels.allUser+"",P,S,w,b,C,k,T=0<r[10].length&&create_if_block_8$b(r);return{c(){i=element("div"),o=text(a),n=element("span"),l=text(s),c=space(),p=element("div"),u=space(),g=element("div"),m=element("div"),_=text(h),f=space(),v=element("div"),P=text(y),S=space(),w=element("div"),b=space(),T&&T.c(),attr(n,"class","mgPlayerJSPreview_all-guides-search-filters-label"),attr(p,"class","mgPlayerJSPreview_all-guides-search-filters-icon ege-inline-block-vt"),attr(m,"id","mgPlayerJSPreview_filter-search-by-current-user"),attr(m,"class","mgPlayerJSPreview_all-guides-search-filters-dropdown-item"),attr(v,"id","mgPlayerJSPreview_filter-search-by-all-user"),attr(v,"class","mgPlayerJSPreview_all-guides-search-filters-dropdown-item"),attr(w,"class","horizontal-line margin-none"),attr(g,"class","mgPlayerJSPreview_all-guides-search-filters-dropdown-user"),attr(i,"id","mgPlayerJSPreview_filter-search-by"),attr(i,"class","ege-inline-block-div mgPlayerJSPreview_all-guides-search-filters")},m(e,t){insert(e,i,t),append(i,o),append(i,n),append(n,l),append(i,c),append(i,p),p.innerHTML=d,append(i,u),append(i,g),append(g,m),append(m,_),append(g,f),append(g,v),append(v,P),append(g,S),append(g,w),append(g,b),T&&T.m(g,null),C||(k=[listen(m,"click",r[30]),listen(v,"click",r[31]),listen(i,"click",r[33])],C=!0)},p(e,t){1&t[0]&&a!==(a=e[0].labels.creator+":")&&set_data(o,a),8&t[0]&&s!==(s=e[3]?.first_name+"")&&set_data(l,s),1&t[0]&&d!==(d=e[0].svgs.down_arrow_icon+"")&&(p.innerHTML=d),1&t[0]&&h!==(h=e[0].labels.currentUser+"")&&set_data(_,h),1&t[0]&&y!==(y=e[0].labels.allUser+"")&&set_data(P,y),0<e[10].length?T?T.p(e,t):((T=create_if_block_8$b(e)).c(),T.m(g,null)):T&&(T.d(1),T=null)},d(e){e&&detach(i),T&&T.d(),C=!1,run_all(k)}}}function create_if_block_8$b(t){let i=[],r=new Map,a,o=ensure_array_like(t[10].sort(func)),n=e=>e[55].user_id;for(let e=0;e<o.length;e+=1){var s=get_each_context_1$4(t,o,e),l=n(s);r.set(l,i[e]=create_each_block_1$4(l,s))}return{c(){for(let e=0;e<i.length;e+=1)i[e].c();a=empty()},m(t,r){for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,r);insert(t,a,r)},p(e,t){132104&t[0]&&(o=ensure_array_like(e[10].sort(func)),i=update_keyed_each(i,t,n,1,e,o,r,a.parentNode,destroy_block,create_each_block_1$4,a,get_each_context_1$4))},d(t){t&&detach(a);for(let e=0;e<i.length;e+=1)i[e].d(t)}}}function create_each_block_1$4(e,r){let i,a=r[55].first_name+" "+r[55].last_name,o,n,s,l,c;function p(){return r[32](r[55])}return{key:e,first:null,c(){i=element("div"),o=text(a),n=space(),attr(i,"id",s="mgPlayerJSPreview_filter-search-by-user-"+r[55].user_id),attr(i,"class","mgPlayerJSPreview_all-guides-search-filters-dropdown-item"),toggle_class(i,"mgPlayerJSPreview_selected-filter-dropdown-item",r[3].user_id===r[55].user_id),this.first=i},m(e,t){insert(e,i,t),append(i,o),append(i,n),l||(c=listen(i,"click",p),l=!0)},p(e,t){r=e,1024&t[0]&&a!==(a=r[55].first_name+" "+r[55].last_name)&&set_data(o,a),1024&t[0]&&s!==(s="mgPlayerJSPreview_filter-search-by-user-"+r[55].user_id)&&attr(i,"id",s),1032&t[0]&&toggle_class(i,"mgPlayerJSPreview_selected-filter-dropdown-item",r[3].user_id===r[55].user_id)},d(e){e&&detach(i),l=!1,c()}}}function create_if_block_6$c(r){let i,a=r[0].labels.status+":",o,n,s,l,c,p=r[0].svgs.down_arrow_icon+"",d,u,g,m=r[0].labels.all+"",h,_,f,v=r[0].labels.published+"",y,P,S,w=r[0].labels.unpublished+"",b,C,k,T;return{c(){i=element("div"),o=text(a),n=element("span"),s=text(r[5]),l=space(),c=element("div"),d=space(),u=element("div"),g=element("div"),h=text(m),_=space(),f=element("div"),y=text(v),P=space(),S=element("div"),b=text(w),attr(n,"class","mgPlayerJSPreview_all-guides-search-filters-label"),attr(c,"class","mgPlayerJSPreview_all-guides-search-filters-icon ege-inline-block-vt"),attr(g,"class","mgPlayerJSPreview_all-guides-search-filters-dropdown-item"),attr(f,"class","mgPlayerJSPreview_all-guides-search-filters-dropdown-item"),attr(S,"class","mgPlayerJSPreview_all-guides-search-filters-dropdown-item"),attr(u,"class",C="mgPlayerJSPreview_all-guides-search-filters-dropdown-published mgPlayerJSPreview_all-guides-search-filters-dropdown-"+r[0].labels.published),attr(i,"id","mgPlayerJSPreview_filter-search-by-status"),attr(i,"class","ege-inline-block-div mgPlayerJSPreview_all-guides-search-filters")},m(e,t){insert(e,i,t),append(i,o),append(i,n),append(n,s),append(i,l),append(i,c),c.innerHTML=p,append(i,d),append(i,u),append(u,g),append(g,h),append(u,_),append(u,f),append(f,y),append(u,P),append(u,S),append(S,b),k||(T=[listen(g,"click",r[21]),listen(f,"click",r[22]),listen(S,"click",r[23]),listen(i,"click",r[34])],k=!0)},p(e,t){1&t[0]&&a!==(a=e[0].labels.status+":")&&set_data(o,a),32&t[0]&&set_data(s,e[5]),1&t[0]&&p!==(p=e[0].svgs.down_arrow_icon+"")&&(c.innerHTML=p),1&t[0]&&m!==(m=e[0].labels.all+"")&&set_data(h,m),1&t[0]&&v!==(v=e[0].labels.published+"")&&set_data(y,v),1&t[0]&&w!==(w=e[0].labels.unpublished+"")&&set_data(b,w),1&t[0]&&C!==(C="mgPlayerJSPreview_all-guides-search-filters-dropdown-published mgPlayerJSPreview_all-guides-search-filters-dropdown-"+e[0].labels.published)&&attr(u,"class",C)},d(e){e&&detach(i),k=!1,run_all(T)}}}function create_if_block_4$d(r){let i,a=r[0].labels.assignee+":",o,n,s=r[4]?.first_name+"",l,c,p,d=r[0].svgs.down_arrow_icon+"",u,g,m,h=r[0].labels.currentUser+"",_,f,v,y=r[0].labels.allUser+"",P,S,w,b,C,k,T=0<r[10].length&&create_if_block_5$c(r);return{c(){i=element("div"),o=text(a),n=element("span"),l=text(s),c=space(),p=element("div"),u=space(),g=element("div"),m=element("div"),_=text(h),f=space(),v=element("div"),P=text(y),S=space(),w=element("div"),b=space(),T&&T.c(),attr(n,"class","mgPlayerJSPreview_all-guides-search-filters-label"),attr(p,"class","mgPlayerJSPreview_all-guides-search-filters-icon ege-inline-block-vt"),attr(m,"id","mgPlayerJSPreview_filter-search-locked-by-current-user"),attr(m,"class","mgPlayerJSPreview_all-guides-search-filters-dropdown-item"),attr(v,"id","mgPlayerJSPreview_filter-search-locked-by-all-user"),attr(v,"class","mgPlayerJSPreview_all-guides-search-filters-dropdown-item"),attr(w,"class","horizontal-line margin-none"),attr(g,"class","mgPlayerJSPreview_all-guides-search-filters-dropdown-assignee"),attr(i,"id","mgPlayerJSPreview_filter-search-by-assignee"),attr(i,"class","ege-inline-block-div mgPlayerJSPreview_all-guides-search-filters")},m(e,t){insert(e,i,t),append(i,o),append(i,n),append(n,l),append(i,c),append(i,p),p.innerHTML=d,append(i,u),append(i,g),append(g,m),append(m,_),append(g,f),append(g,v),append(v,P),append(g,S),append(g,w),append(g,b),T&&T.m(g,null),C||(k=[listen(m,"click",r[35]),listen(v,"click",r[36]),listen(i,"click",r[38])],C=!0)},p(e,t){1&t[0]&&a!==(a=e[0].labels.assignee+":")&&set_data(o,a),16&t[0]&&s!==(s=e[4]?.first_name+"")&&set_data(l,s),1&t[0]&&d!==(d=e[0].svgs.down_arrow_icon+"")&&(p.innerHTML=d),1&t[0]&&h!==(h=e[0].labels.currentUser+"")&&set_data(_,h),1&t[0]&&y!==(y=e[0].labels.allUser+"")&&set_data(P,y),0<e[10].length?T?T.p(e,t):((T=create_if_block_5$c(e)).c(),T.m(g,null)):T&&(T.d(1),T=null)},d(e){e&&detach(i),T&&T.d(),C=!1,run_all(k)}}}function create_if_block_5$c(t){let a,o=ensure_array_like(t[10].sort(func_1)),n=[];for(let e=0;e<o.length;e+=1)n[e]=create_each_block$8(get_each_context$8(t,o,e));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();a=empty()},m(t,r){for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,r);insert(t,a,r)},p(t,r){if(263176&r[0]){o=ensure_array_like(t[10].sort(func_1));let e;for(e=0;e<o.length;e+=1){var i=get_each_context$8(t,o,e);n[e]?n[e].p(i,r):(n[e]=create_each_block$8(i),n[e].c(),n[e].m(a.parentNode,a))}for(;e<n.length;e+=1)n[e].d(1);n.length=o.length}},d(e){e&&detach(a),destroy_each(n,e)}}}function create_each_block$8(r){let i,a=r[55].first_name+" "+r[55].last_name,o,n,s,l,c,p;function d(){return r[37](r[55])}return{c(){i=element("div"),o=text(a),n=space(),attr(i,"id",s="mgPlayerJSPreview_filter-search-locked-by-user-"+r[55].user_id),attr(i,"class",l="mgPlayerJSPreview_all-guides-search-filters-dropdown-item "+(r[3].user_id===r[55].user_id?"mgPlayerJSPreview_selected-filter-dropdown-item":""))},m(e,t){insert(e,i,t),append(i,o),append(i,n),c||(p=listen(i,"click",d),c=!0)},p(e,t){r=e,1024&t[0]&&a!==(a=r[55].first_name+" "+r[55].last_name)&&set_data(o,a),1024&t[0]&&s!==(s="mgPlayerJSPreview_filter-search-locked-by-user-"+r[55].user_id)&&attr(i,"id",s),1032&t[0]&&l!==(l="mgPlayerJSPreview_all-guides-search-filters-dropdown-item "+(r[3].user_id===r[55].user_id?"mgPlayerJSPreview_selected-filter-dropdown-item":""))&&attr(i,"class",l)},d(e){e&&detach(i),c=!1,p()}}}function create_if_block_3$e(r){let i,a=r[0].labels.sortBy+":",o,n,s,l,c,p=r[0].svgs.down_arrow_icon+"",d,u,g,m=r[0].labels.latest+"",h,_,f,v=r[0].labels.name+"",y,P,S;return{c(){i=element("div"),o=text(a),n=element("span"),s=text(r[9]),l=space(),c=element("div"),d=space(),u=element("div"),g=element("div"),h=text(m),_=space(),f=element("div"),y=text(v),attr(n,"class","mgPlayerJSPreview_all-guides-search-filters-label"),attr(c,"class","mgPlayerJSPreview_all-guides-search-filters-icon ege-inline-block-vt"),attr(g,"id","mgPlayerJSPreview_filter-search-by-sort-latest"),attr(g,"class","mgPlayerJSPreview_all-guides-search-filters-dropdown-item"),attr(f,"id","mgPlayerJSPreview_filter-search-by-sort-name"),attr(f,"class","mgPlayerJSPreview_all-guides-search-filters-dropdown-item"),attr(u,"class","mgPlayerJSPreview_all-guides-search-filters-dropdown-sort"),attr(i,"id","mgPlayerJSPreview_filter-search-by-sort"),attr(i,"class","ege-inline-block-div mgPlayerJSPreview_all-guides-search-filters")},m(e,t){insert(e,i,t),append(i,o),append(i,n),append(n,s),append(i,l),append(i,c),c.innerHTML=p,append(i,d),append(i,u),append(u,g),append(g,h),append(u,_),append(u,f),append(f,y),P||(S=[listen(g,"click",r[19]),listen(f,"click",r[20]),listen(i,"click",r[39])],P=!0)},p(e,t){1&t[0]&&a!==(a=e[0].labels.sortBy+":")&&set_data(o,a),512&t[0]&&set_data(s,e[9]),1&t[0]&&p!==(p=e[0].svgs.down_arrow_icon+"")&&(c.innerHTML=p),1&t[0]&&m!==(m=e[0].labels.latest+"")&&set_data(h,m),1&t[0]&&v!==(v=e[0].labels.name+"")&&set_data(y,v)},d(e){e&&detach(i),P=!1,run_all(S)}}}function create_fragment$n(e){let i,a,o,r,n=[create_if_block$k,create_else_block_1$3],s=[];function l(e){return e[0].automationSelectionMode?1:0}return a=l(e),o=s[a]=n[a](e),{c(){i=element("div"),o.c(),attr(i,"class","list-page-header")},m(e,t){insert(e,i,t),s[a].m(i,null),r=!0},p(e,t){let r=a;(a=l(e))===r?s[a].p(e,t):(group_outros(),transition_out(s[r],1,1,()=>{s[r]=null}),check_outros(),(o=s[a])?o.p(e,t):(o=s[a]=n[a](e)).c(),transition_in(o,1),o.m(i,null))},i(e){r||(transition_in(o),r=!0)},o(e){transition_out(o),r=!1},d(e){e&&detach(i),s[a].d()}}}let func=(e,t)=>e.first_name.localeCompare(t.first_name),func_1=(e,t)=>e.first_name.localeCompare(t.first_name);function instance$m(e,t,r){let i,a,o,n,s,l,c="",p=!1,d=!1,u=rootScope.labels.latest,g=[],m=Gm.CurrentPage.subscribe(e=>{r(1,i=e)}),h=get_store_value(Gm.labels),_=(Gm.activeSortFilterStore.subscribe(e=>{r(6,c=e)}),Gm.isTaskListVisible.subscribe(e=>{r(8,d=e)}),Gm.taskListCount.subscribe(e=>{}),Gm.routeAction.subscribe(e=>{e&&"updateAutomationCount"===e.action&&(r(0,rootScope.automationGuideSelectCount=e.data,rootScope),Gm.routeAction.set(null))}));a={user_id:0,first_name:rootScope.labels.all},rootScope.currentUserFilter||(o=a),rootScope.currentAssigneeFilter||(n=a),rootScope.filterByPublishedGuides||(s=rootScope.labels.all);function f(){r(7,p=!1),Gm.activeSortFilterStore.set(c),rootScope.hidePanelOverlay(),mg$$1(".mgPlayerJSPreview_filter-sort-icon").removeClass("mgPlayerJSPreview_z-index mgPlayerJSPreview_z-index-max"),mg$$1(".mgPlayerJSPreview_filter-sort-icon").removeClass("mgPlayerJSPreview_filter-active-state")}function v(e){r(7,p=!1),r(6,c=e),Gm.activeSortFilterStore.set(c),storage.activeSortFilter.set(c),f()}function y(e){rootScope.hideFiltersDropdown();e=mg$$1(".mgPlayerJSPreview_all-guides-search-filters-dropdown-"+e);e&&!e.is(":visible")&&e.slideDown(200)}function P(){rootScope.getUserList(function(e){0<e.length&&(r(10,g=e),rootScope.currentUserFilter||r(3,o=a),rootScope.currentAssigneeFilter||r(4,n=a))})}function S(){var e;(rootScope.currentUserFilter||rootScope.filterByPublishedGuides||rootScope.currentAssigneeFilter||rootScope.sortByProperty)&&(e={currentUserFilter:rootScope.currentUserFilter,filterByPublishedGuides:rootScope.filterByPublishedGuides,currentAssigneeFilter:rootScope.currentAssigneeFilter,sortByProperty:rootScope.sortByProperty},Gm.filters.set(e))}function w(e){r(3,o=e),r(0,rootScope.currentUserFilter=e,rootScope),S()}function b(e){r(4,n=e),r(0,rootScope.currentAssigneeFilter=e,rootScope),S()}!rootScope.isUserRole()&&GmCXt.FT.quickFilters&&(o=rootScope.myGuidesFilter?{...rootScope.user}:rootScope.currentUserFilter||a,s=rootScope.filterByPublishedGuides||rootScope.labels.all,n=rootScope.currentAssigneeFilter||a);let C=Gm.labels.subscribe(e=>{r(11,h=e)});onMount(()=>{rootScope.FT.creatorApp&&!rootScope.isUserRole()&&P()}),onDestroy(()=>{m(),C(),f(),_()});return[rootScope,i,a,o,n,s,c,p,d,u,g,h,function(){p?f():(r(7,p=!p),r(7,p=!0),rootScope.addPanelOverlay(),rootScope.showPanelOverlay(),mg$$1(".mgPlayerJSPreview_theme-mplayer-header").append("<div class='ege-panel-overlay'></div>"),mg$$1(".mgPlayerJSPreview_filter-sort-icon").addClass("mgPlayerJSPreview_z-index mgPlayerJSPreview_z-index-max"),mg$$1(".mgPlayerJSPreview_filter-sort-icon").addClass("mgPlayerJSPreview_filter-active-state"))},v,function(){"allguides"===i||"myguides"===i?(Gm.loading.set(!0),rootScope.setCurrentPage("currentpage")):(Gm.loading.set(!0),rootScope.setCurrentPage("allguides")),Gm.breadCrumb.set([])},function(){l="allguides"===i||"currentpage"===i?(Gm.loading.set(!0),rootScope.setCurrentPage("myguides"),!0):(Gm.loading.set(!0),rootScope.setCurrentPage("allguides"),!1),Gm.breadCrumb.set([]),r(0,rootScope.myGuidesFilter=!!l,rootScope)},y,w,b,function(){r(9,u=rootScope.labels.latest),r(0,rootScope.sortByProperty=rootScope.labels.latest,rootScope),S()},function(){r(9,u=rootScope.labels.name),r(0,rootScope.sortByProperty=rootScope.labels.name,rootScope),S()},function(){r(0,rootScope.filterByPublishedGuides=rootScope.labels.all,rootScope),r(5,s=rootScope.labels.all),S()},function(){r(5,s=rootScope.labels.published),r(0,rootScope.filterByPublishedGuides=rootScope.labels.published,rootScope),S()},function(){r(0,rootScope.filterByPublishedGuides=rootScope.labels.unpublished,rootScope),r(5,s=rootScope.labels.unpublished),S()},()=>rootScope.openTaskList(),()=>v("atoz"),()=>v("ztoa"),()=>v("recent"),()=>v("older"),()=>v(""),()=>w(rootScope.user),()=>w(a),e=>w(e),e=>y("user"),e=>y(rootScope.labels.published),()=>b(rootScope.user),()=>b(a),e=>b(e),e=>y("assignee"),e=>y("sort")]}class Filter extends SvelteComponent{constructor(e){super(),init(this,e,instance$m,create_fragment$n,safe_not_equal,{},null,[-1,-1])}}function add_css$3(e){append_styles(e,"svelte-dxvvbl","dialog.svelte-dxvvbl::backdrop{background:rgba(0, 0, 0, 0.3)}dialog[open].svelte-dxvvbl{animation:svelte-dxvvbl-zoom 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)}@keyframes svelte-dxvvbl-zoom{from{transform:scale(0.95)}to{transform:scale(1)}}dialog[open].svelte-dxvvbl::backdrop{animation:svelte-dxvvbl-fade 0.2s ease-out}@keyframes svelte-dxvvbl-fade{from{opacity:0}to{opacity:1}}button.svelte-dxvvbl{display:block}")}function create_if_block$j(r){let i,a,o,n,s,l,c,p,F=rootScope.svgs.iconSearchClose+"",O,d,u,R,g,m,h,_,N,f=r[1].tour_title+"",v,H,y,P,S,e=rootScope.labels.firstStep+"",B,U,w,b=r[4][0].step_title+"",V,C,k,T,z,x,A,t=rootScope.labels.lastStep+"",j,W,J,G=r[4][r[6]-1].step_title+"",q,$,E,L,Z,M,I,K,X,D,Y;return{c(){i=element("dialog"),a=element("div"),o=element("div"),n=element("div"),s=text(r[3]),l=space(),c=element("button"),p=element("div"),O=space(),d=element("div"),(u=element("div")).textContent=""+rootScope.labels.close,R=space(),g=element("div"),m=element("div"),h=element("div"),(_=element("div")).innerHTML='<svg width="24px" height="30px" viewBox="0 0 24 30" version="1.1"><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd"><g id="clipboard" fill-rule="nonzero"><path d="M21.0913898,3.4972619 L18.2461695,3.4972619 L18.2461695,2.99767857 C18.2461695,2.44809524 17.7340339,1.99845238 17.1080678,1.99845238 L15.4009492,1.99845238 L15.4009492,1.49880952 C15.4009492,0.699404762 14.6612203,0 13.6938305,0 L10.2795254,0 C9.31213559,0 8.57240678,0.649464286 8.57240678,1.49880952 L8.57240678,1.99839286 L6.86528814,1.99839286 C6.23932203,1.99839286 5.72718644,2.44803571 5.72718644,2.99761905 L5.72718644,3.49720238 L2.8819661,3.49720238 C1.28861017,3.49720238 0.0367457627,4.59636905 0.0367457627,5.9952381 L0.0367457627,27.4784524 C0.0367457627,28.877381 1.28867797,29.9764881 2.8819661,29.9764881 L21.0914576,29.9764881 C22.6848136,29.9764881 23.936678,28.8773214 23.936678,27.4784524 L23.936678,5.99529762 C23.936678,4.64636905 22.6847458,3.4972619 21.0913898,3.4972619 Z M6.86522034,3.99690476 L6.86522034,2.99767857 L9.14142373,2.99767857 C9.48284746,2.99767857 9.71044068,2.79785714 9.71044068,2.49809524 L9.71044068,1.49880952 C9.71044068,1.19904762 9.9380339,0.99922619 10.2794576,0.99922619 L13.6937627,0.99922619 C14.0351864,0.99922619 14.2627797,1.19904762 14.2627797,1.49880952 L14.2627797,2.49803571 C14.2627797,2.79779762 14.4903729,2.99761905 14.8317966,2.99761905 L17.108,2.99761905 L17.108,6.49488095 L6.86522034,6.49488095 L6.86522034,3.99690476 Z M18.2461695,25.480119 L5.72711864,25.480119 C5.38569492,25.480119 5.15810169,25.2802976 5.15810169,24.9805357 C5.15810169,24.6807738 5.38569492,24.4809524 5.72711864,24.4809524 L18.2461695,24.4809524 C18.5875932,24.4809524 18.8151864,24.6807738 18.8151864,24.9805357 C18.8151864,25.2802976 18.5875932,25.480119 18.2461695,25.480119 Z M18.2461695,20.983631 L5.72711864,20.983631 C5.38569492,20.983631 5.15810169,20.7838095 5.15810169,20.4840476 C5.15810169,20.1842857 5.38569492,19.9844643 5.72711864,19.9844643 L18.2461695,19.9844643 C18.5875932,19.9844643 18.8151864,20.1842857 18.8151864,20.4840476 C18.8152542,20.78375 18.5875932,20.983631 18.2461695,20.983631 Z M18.2461695,16.4871429 L5.72711864,16.4871429 C5.38569492,16.4871429 5.15810169,16.2873214 5.15810169,15.9875595 C5.15810169,15.6877976 5.38569492,15.4879762 5.72711864,15.4879762 L18.2461695,15.4879762 C18.5875932,15.4879762 18.8151864,15.6877976 18.8151864,15.9875595 C18.8151864,16.2873214 18.5875932,16.4871429 18.2461695,16.4871429 Z M18.2461695,11.9906548 L5.72711864,11.9906548 C5.38569492,11.9906548 5.15810169,11.7908333 5.15810169,11.4910714 C5.15810169,11.1913095 5.38569492,10.9914881 5.72711864,10.9914881 L18.2461695,10.9914881 C18.5875932,10.9914881 18.8151864,11.1913095 18.8151864,11.4910714 C18.8151864,11.7908333 18.5875932,11.9906548 18.2461695,11.9906548 Z" class="shape"></path></g></g></svg>',N=space(),v=text(f),H=space(),y=element("div"),P=element("div"),S=element("div"),B=text(e),U=text(": "),w=new HtmlTag(!1),V=space(),C=element("div"),k=element("img"),z=space(),x=element("div"),A=element("div"),j=text(t),W=text(": "),J=new HtmlTag(!1),q=space(),$=element("div"),E=element("img"),Z=space(),M=element("div"),(I=element("button")).textContent=""+rootScope.labels.startTest,K=space(),(X=element("button")).textContent=""+rootScope.labels.close,attr(n,"class","popup-test-me-title"),attr(p,"class","ege-inline-block-vt"),attr(u,"class","mgPlayerJSPreview_tooltip-title"),attr(d,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-left"),attr(c,"class","mgPlayerJSPreview_lbl-btn popup-test-me-close svelte-dxvvbl"),attr(o,"class","popup-test-me-header"),attr(_,"class","tour-play-icon-test-me ege-inline-block-vm"),attr(h,"class","tour-title-wrapper ege-inline-block-vt"),set_style(h,"padding","20px"),attr(m,"class","tour-details-container"),w.a=null,attr(S,"class","preview-step-first-title"),attr(k,"class","step-image mgPlayerJSPreview_custom-image"),src_url_equal(k.src,T=r[4][0].screen_url+GmCXt.getCdnSign())||attr(k,"src",T),attr(k,"alt","test"),attr(C,"class","image-preview-step-first"),attr(P,"class","preview-step-first-wrapper"),J.a=null,attr(A,"class","preview-step-last-title"),attr(E,"class","step-image mgPlayerJSPreview_custom-image"),src_url_equal(E.src,L=r[4][r[6]-1].screen_url+GmCXt.getCdnSign())||attr(E,"src",L),attr(E,"alt","test"),attr($,"class","image-preview-step-last"),attr(x,"class","preview-step-last-wrapper"),attr(y,"class","step-preview-container"),attr(I,"class","mgPlayerJSPreview_btn-default mgPlayerJSPreview_inline-block-vt svelte-dxvvbl"),attr(X,"class","mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-neutral mgPlayerJSPreview_inline-block-vt svelte-dxvvbl"),attr(M,"class","test-me-btn-action"),set_style(M,"display","flex"),set_style(M,"justify-content","center"),set_style(M,"padding","15px 0px"),attr(g,"class","popup-test-me-container"),attr(a,"class","popup-test-me-preview"),toggle_class(a,"mgPlayerJSPreview_accessibility-theme",rootScope.accessibility),attr(i,"id","svelte-notification-modal"),attr(i,"class","svelte-dxvvbl")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),append(n,s),append(o,l),append(o,c),append(c,p),p.innerHTML=F,append(c,O),append(c,d),append(d,u),append(a,R),append(a,g),append(g,m),append(m,h),append(h,_),append(h,N),append(h,v),append(g,H),append(g,y),append(y,P),append(P,S),append(S,B),append(S,U),w.m(b,S),append(P,V),append(P,C),append(C,k),append(y,z),append(y,x),append(x,A),append(A,j),append(A,W),J.m(G,A),append(x,q),append(x,$),append($,E),append(g,Z),append(g,M),append(M,I),append(M,K),append(M,X),r[11](i),D||(Y=[listen(c,"click",r[9]),listen(I,"click",r[10]),listen(X,"click",r[8]),listen(i,"close",r[12])],D=!0)},p(e,t){8&t&&set_data(s,e[3]),2&t&&f!==(f=e[1].tour_title+"")&&set_data(v,f),16&t&&b!==(b=e[4][0].step_title+"")&&w.p(b),16&t&&!src_url_equal(k.src,T=e[4][0].screen_url+GmCXt.getCdnSign())&&attr(k,"src",T),16&t&&G!==(G=e[4][e[6]-1].step_title+"")&&J.p(G),16&t&&!src_url_equal(E.src,L=e[4][e[6]-1].screen_url+GmCXt.getCdnSign())&&attr(E,"src",L)},d(e){e&&detach(i),r[11](null),D=!1,run_all(Y)}}}function create_fragment$m(e){let r,i=e[0]&&create_if_block$j(e);return{c(){i&&i.c(),r=empty()},m(e,t){i&&i.m(e,t),insert(e,r,t)},p(e,[t]){e[0]?i?i.p(e,t):((i=create_if_block$j(e)).c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},i:noop,o:noop,d(e){e&&detach(r),i&&i.d(e)}}}function instance$l(e,t,r){let i=t.showTestMe,a=t.tour,o,n;var t=a.steps.filter(function(e){return"inline"===e.step_type}),s=t.length;t[0].step_title=mg$$1("<span />").html(t[0].step_title).text(),t[s-1].step_title=mg$$1("<span />").html(t[s-1].step_title).text();let l={};l.tour=a;var c=GmCXt.getAppSetting();n=c&&c.userLabels&&c.userLabels.testMe?c.userLabels.testMe:"TestMe";function p(e){rootScope.closeAppPopup(),r(0,i=!1),GmCXt.isMicroPlayer()&&(mg$$1(".ege-panel").removeAttr("style"),GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:reset_micro_player_position"})),GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:start_tool;testMe",data:e})}GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:increase_side_panel_width"});return e.$$set=e=>{"showTestMe"in e&&r(0,i=e.showTestMe),"tour"in e&&r(1,a=e.tour)},e.$$.update=()=>{5&e.$$.dirty&&o&&i&&o.showModal()},[i,a,o,n,t,l,s,p,function(){r(0,i=!1),o.close()},()=>o.close(),()=>p(l),function(e){binding_callbacks[e?"unshift":"push"](()=>{o=e,r(2,o)})},()=>r(0,i=!1)]}class TestMeWidget extends SvelteComponent{constructor(e){super(),init(this,e,instance$l,create_fragment$m,safe_not_equal,{showTestMe:0,tour:1},add_css$3)}}function create_if_block$i(r){let i,a,o=r[1].svgs.guideViewDownload+"",n,s,l,c=r[0].media_files&&r[0].media_files.length&&create_if_block_1$g(r);return{c(){i=element("button"),a=element("div"),n=space(),c&&c.c(),attr(a,"class","mgPlayerJSPreview_download-icon mgPlayerJSPreview_inline-block-vm"),attr(i,"id","mgPlayerJSPreview_icon-tour-download"),attr(i,"class","mgPlayerJSPreview_lbl-btn header-detail-view-tour-download-wrapper mgPlayerJSPreview_header-icon-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center "),attr(i,"aria-label","tour download dropdown"),toggle_class(i,"disabled",!r[0].is_published)},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),c&&c.m(i,null),s||(l=listen(i,"click",stop_propagation(r[4])),s=!0)},p(e,t){2&t&&o!==(o=e[1].svgs.guideViewDownload+"")&&(a.innerHTML=o),e[0].media_files&&e[0].media_files.length?c?c.p(e,t):((c=create_if_block_1$g(e)).c(),c.m(i,null)):c&&(c.d(1),c=null),1&t&&toggle_class(i,"disabled",!e[0].is_published)},d(e){e&&detach(i),c&&c.d(),s=!1,l()}}}function create_if_block_1$g(e){let r,i,a,o,n,s,l=e[0].media_files[0].gify&&e[0].tour_settings.downloadGuideFiles.gif_file&&e[2](e[0])&&!GmCXt.isOnboarding(e[0]),c,p,d=e[0].media_files[0].doc&&e[0].tour_settings.downloadGuideFiles.word_file&&e[2](e[0]),u,g,m=e[0].media_files[0].blog&&e[0].tour_settings.downloadGuideFiles.blog_file&&e[2](e[0])&&!GmCXt.isOnboarding(e[0]),h,_,f=e[0].media_files[0].text&&e[0].tour_settings.downloadGuideFiles.text_file&&e[2](e[0])&&!GmCXt.isOnboarding(e[0]),v=(!e[0].media_files[0].video||"0"==e[0].media_files[0].video)&&(!e[0].media_files[0].pdf||"0"==e[0].media_files[0].pdf)&&(!e[0].media_files[0].pdf||"0"==e[0].media_files[0].pdf)&&(!e[0].media_files[0].ppt||"0"==e[0].media_files[0].ppt)&&(!e[0].media_files[0].gify||"0"==e[0].media_files[0].gify)&&(!e[0].media_files[0].doc||"0"==e[0].media_files[0].doc)&&(!e[0].media_files[0].blog||"0"==e[0].media_files[0].blog)&&(!e[0].media_files[0].text||"0"==e[0].media_files[0].text)&&create_if_block_19$4(e),y=e[0].media_files[0].pdf&&e[0].tour_settings.downloadGuideFiles.pdf_file&&create_if_block_17$4(e),P=e[0].tour_settings.downloadGuideFiles.pdf_file&&create_if_block_16$4(),S=e[0].media_files[0].ppt&&e[0].tour_settings.downloadGuideFiles.pptx_file&&create_if_block_14$5(e),w=e[0].tour_settings.downloadGuideFiles.pptx_file&&create_if_block_13$7(),b=l&&create_if_block_11$8(e),C=e[0].tour_settings.downloadGuideFiles.gif_file&&create_if_block_10$8(),k=d&&create_if_block_8$a(e),T=e[0].tour_settings.downloadGuideFiles.word_file&&create_if_block_7$a(),x=m&&create_if_block_5$b(e),A=e[0].tour_settings.downloadGuideFiles.blog_fil&&create_if_block_4$c(),J=f&&create_if_block_2$f(e);return{c(){r=element("div"),v&&v.c(),i=space(),y&&y.c(),a=space(),P&&P.c(),o=space(),S&&S.c(),n=space(),w&&w.c(),s=space(),b&&b.c(),c=space(),C&&C.c(),p=space(),k&&k.c(),u=space(),T&&T.c(),g=space(),x&&x.c(),h=space(),A&&A.c(),_=space(),J&&J.c(),attr(r,"id","detail-view-download-options"),attr(r,"class","detail-download-action-options-dropdown")},m(e,t){insert(e,r,t),v&&v.m(r,null),append(r,i),y&&y.m(r,null),append(r,a),P&&P.m(r,null),append(r,o),S&&S.m(r,null),append(r,n),w&&w.m(r,null),append(r,s),b&&b.m(r,null),append(r,c),C&&C.m(r,null),append(r,p),k&&k.m(r,null),append(r,u),T&&T.m(r,null),append(r,g),x&&x.m(r,null),append(r,h),A&&A.m(r,null),append(r,_),J&&J.m(r,null)},p(e,t){e[0].media_files[0].video&&"0"!=e[0].media_files[0].video||e[0].media_files[0].pdf&&"0"!=e[0].media_files[0].pdf||e[0].media_files[0].pdf&&"0"!=e[0].media_files[0].pdf||e[0].media_files[0].ppt&&"0"!=e[0].media_files[0].ppt||e[0].media_files[0].gify&&"0"!=e[0].media_files[0].gify||e[0].media_files[0].doc&&"0"!=e[0].media_files[0].doc||e[0].media_files[0].blog&&"0"!=e[0].media_files[0].blog||e[0].media_files[0].text&&"0"!=e[0].media_files[0].text?v&&(v.d(1),v=null):v?v.p(e,t):((v=create_if_block_19$4(e)).c(),v.m(r,i)),e[0].media_files[0].pdf&&e[0].tour_settings.downloadGuideFiles.pdf_file?y?y.p(e,t):((y=create_if_block_17$4(e)).c(),y.m(r,a)):y&&(y.d(1),y=null),e[0].tour_settings.downloadGuideFiles.pdf_file?P||((P=create_if_block_16$4()).c(),P.m(r,o)):P&&(P.d(1),P=null),e[0].media_files[0].ppt&&e[0].tour_settings.downloadGuideFiles.pptx_file?S?S.p(e,t):((S=create_if_block_14$5(e)).c(),S.m(r,n)):S&&(S.d(1),S=null),e[0].tour_settings.downloadGuideFiles.pptx_file?w||((w=create_if_block_13$7()).c(),w.m(r,s)):w&&(w.d(1),w=null),(l=1&t?e[0].media_files[0].gify&&e[0].tour_settings.downloadGuideFiles.gif_file&&e[2](e[0])&&!GmCXt.isOnboarding(e[0]):l)?b?b.p(e,t):((b=create_if_block_11$8(e)).c(),b.m(r,c)):b&&(b.d(1),b=null),e[0].tour_settings.downloadGuideFiles.gif_file?C||((C=create_if_block_10$8()).c(),C.m(r,p)):C&&(C.d(1),C=null),(d=1&t?e[0].media_files[0].doc&&e[0].tour_settings.downloadGuideFiles.word_file&&e[2](e[0]):d)?k?k.p(e,t):((k=create_if_block_8$a(e)).c(),k.m(r,u)):k&&(k.d(1),k=null),e[0].tour_settings.downloadGuideFiles.word_file?T||((T=create_if_block_7$a()).c(),T.m(r,g)):T&&(T.d(1),T=null),(m=1&t?e[0].media_files[0].blog&&e[0].tour_settings.downloadGuideFiles.blog_file&&e[2](e[0])&&!GmCXt.isOnboarding(e[0]):m)?x?x.p(e,t):((x=create_if_block_5$b(e)).c(),x.m(r,h)):x&&(x.d(1),x=null),e[0].tour_settings.downloadGuideFiles.blog_fil?A||((A=create_if_block_4$c()).c(),A.m(r,_)):A&&(A.d(1),A=null),(f=1&t?e[0].media_files[0].text&&e[0].tour_settings.downloadGuideFiles.text_file&&e[2](e[0])&&!GmCXt.isOnboarding(e[0]):f)?J?J.p(e,t):((J=create_if_block_2$f(e)).c(),J.m(r,null)):J&&(J.d(1),J=null)},d(e){e&&detach(r),v&&v.d(),y&&y.d(),P&&P.d(),S&&S.d(),w&&w.d(),b&&b.d(),C&&C.d(),k&&k.d(),T&&T.d(),x&&x.d(),A&&A.d(),J&&J.d()}}}function create_if_block_19$4(r){let i,a,o,n,s,l,c,p=r[1].labels.pleaseWait+"",d,u,g,m=r[1].labels.mediaDownloadMsg+"",h,_,f,v=r[1].labels.close+"",y,P,S;return{c(){i=element("div"),a=element("div"),o=element("div"),n=element("img"),l=space(),c=element("div"),d=text(p),u=space(),g=element("div"),h=text(m),_=space(),f=element("a"),y=text(v),attr(n,"class","mgPlayerJSPreview_max-width-height-100"),src_url_equal(n.src,s=r[1].staticContentPath+"loader_hourglass.gif")||attr(n,"src",s),attr(o,"class","mgPlayerJSPreview_media-progress-loader-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center"),attr(c,"class","mgPlayerJSPreview_font-size-18 mgPlayerJSPreview_margin-tb-20"),attr(g,"class","mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_text-align-center"),attr(a,"class","mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-direction-column mgPlayerJSPreview_margin-tb-15"),attr(f,"class","mgPlayerJSPreview_lbl-link mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-neutral"),attr(i,"class","mgPlayerJSPreview_media-progress-container mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between mgPlayerJSPreview_flex-direction-column mgPlayerJSPreview_width-100 mgPlayerJSPreview_height-100 mgPlayerJSPreview_position-absolute mgPlayerJSPreview_bg-white mgPlayerJSPreview_z-index mgPlayerJSPreview_z-index-2 mgPlayerJSPreview_padding-15")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),append(a,l),append(a,c),append(c,d),append(a,u),append(a,g),append(g,h),append(i,_),append(i,f),append(f,y),P||(S=listen(f,"click",stop_propagation(r[5])),P=!0)},p(e,t){2&t&&!src_url_equal(n.src,s=e[1].staticContentPath+"loader_hourglass.gif")&&attr(n,"src",s),2&t&&p!==(p=e[1].labels.pleaseWait+"")&&set_data(d,p),2&t&&m!==(m=e[1].labels.mediaDownloadMsg+"")&&set_data(h,m),2&t&&v!==(v=e[1].labels.close+"")&&set_data(y,v)},d(e){e&&detach(i),P=!1,S()}}}function create_if_block_17$4(r){let i,a,o,n,s,l,c=(!r[0].media_files[0].pdf||"0"==r[0].media_files[0].pdf)&&create_if_block_18$4(r);return{c(){i=element("div"),a=element("input"),n=space(),c&&c.c(),attr(a,"type","button"),attr(a,"class","mgPlayerJSPreview_lbl-btn detail-download-action-options-dropdown-item download-link ege-inline-block-div mgPlayerJSPreview_width-100"),a.value=o=r[1].labels.pdf+" (.pdf)",attr(i,"id","mgPlayerJSPreview_tour-download-pdf"),attr(i,"class","mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between")},m(e,t){insert(e,i,t),append(i,a),append(i,n),c&&c.m(i,null),s||(l=listen(a,"click",stop_propagation(function(){is_function(r[3]("tour_pdf_download",r[0].media_files[0].pdf,r[0]))&&r[3]("tour_pdf_download",r[0].media_files[0].pdf,r[0]).apply(this,arguments)})),s=!0)},p(e,t){r=e,2&t&&o!==(o=r[1].labels.pdf+" (.pdf)")&&(a.value=o),r[0].media_files[0].pdf&&"0"!=r[0].media_files[0].pdf?c&&(c.d(1),c=null):c?c.p(r,t):((c=create_if_block_18$4(r)).c(),c.m(i,null))},d(e){e&&detach(i),c&&c.d(),s=!1,l()}}}function create_if_block_18$4(e){let r,i,a;return{c(){r=element("div"),attr(i=element("img"),"class","mgPlayerJSPreview_max-width-height-100"),src_url_equal(i.src,a=e[1].staticContentPath+"loader_hourglass.gif")||attr(i,"src",a),attr(r,"class","mgPlayerJSPreview_media-progress-loader mgPlayerJSPreview_margin-r-20")},m(e,t){insert(e,r,t),append(r,i)},p(e,t){2&t&&!src_url_equal(i.src,a=e[1].staticContentPath+"loader_hourglass.gif")&&attr(i,"src",a)},d(e){e&&detach(r)}}}function create_if_block_16$4(e){let r;return{c(){(r=element("div")).innerHTML="",attr(r,"class","horizontal-line")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block_14$5(r){let i,a,o,n,s,l,c=(!r[0].media_files[0].ppt||"0"==r[0].media_files[0].ppt)&&create_if_block_15$5(r);return{c(){i=element("div"),a=element("input"),n=space(),c&&c.c(),attr(a,"type","button"),attr(a,"class","mgPlayerJSPreview_lbl-btn detail-download-action-options-dropdown-item download-link ege-inline-block-div mgPlayerJSPreview_width-100"),a.value=o=r[1].labels.downloadPptx+" (.pptx)",attr(i,"id","mgPlayerJSPreview_tour-download-pptx"),attr(i,"class","mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between")},m(e,t){insert(e,i,t),append(i,a),append(i,n),c&&c.m(i,null),s||(l=listen(a,"click",stop_propagation(function(){is_function(r[3]("tour_ppt_download",r[0].media_files[0].ppt,r[0]))&&r[3]("tour_ppt_download",r[0].media_files[0].ppt,r[0]).apply(this,arguments)})),s=!0)},p(e,t){r=e,2&t&&o!==(o=r[1].labels.downloadPptx+" (.pptx)")&&(a.value=o),r[0].media_files[0].ppt&&"0"!=r[0].media_files[0].ppt?c&&(c.d(1),c=null):c?c.p(r,t):((c=create_if_block_15$5(r)).c(),c.m(i,null))},d(e){e&&detach(i),c&&c.d(),s=!1,l()}}}function create_if_block_15$5(e){let r,i,a;return{c(){r=element("div"),attr(i=element("img"),"class","mgPlayerJSPreview_max-width-height-100"),src_url_equal(i.src,a=e[1].staticContentPath+"loader_hourglass.gif")||attr(i,"src",a),attr(r,"class","mgPlayerJSPreview_media-progress-loader mgPlayerJSPreview_margin-r-20")},m(e,t){insert(e,r,t),append(r,i)},p(e,t){2&t&&!src_url_equal(i.src,a=e[1].staticContentPath+"loader_hourglass.gif")&&attr(i,"src",a)},d(e){e&&detach(r)}}}function create_if_block_13$7(e){let r;return{c(){(r=element("div")).innerHTML="",attr(r,"class","horizontal-line")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block_11$8(r){let i,a,o,n,s,l,c=(!r[0].media_files[0].gify||"0"==r[0].media_files[0].gify)&&create_if_block_12$7(r);return{c(){i=element("div"),a=element("input"),n=space(),c&&c.c(),attr(a,"type","button"),attr(a,"class","mgPlayerJSPreview_lbl-btn detail-download-action-options-dropdown-item download-link ege-inline-block-div mgPlayerJSPreview_width-100"),a.value=o=r[1].labels.giphy+" (.gif)",attr(i,"id","mgPlayerJSPreview_tour-download-gif"),attr(i,"class","mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between")},m(e,t){insert(e,i,t),append(i,a),append(i,n),c&&c.m(i,null),s||(l=listen(a,"click",stop_propagation(function(){is_function(r[3]("tour_gif_download",r[0].media_files[0].gify,r[0]))&&r[3]("tour_gif_download",r[0].media_files[0].gify,r[0]).apply(this,arguments)})),s=!0)},p(e,t){r=e,2&t&&o!==(o=r[1].labels.giphy+" (.gif)")&&(a.value=o),r[0].media_files[0].gify&&"0"!=r[0].media_files[0].gify?c&&(c.d(1),c=null):c?c.p(r,t):((c=create_if_block_12$7(r)).c(),c.m(i,null))},d(e){e&&detach(i),c&&c.d(),s=!1,l()}}}function create_if_block_12$7(e){let r,i,a;return{c(){r=element("div"),attr(i=element("img"),"class","mgPlayerJSPreview_max-width-height-100"),src_url_equal(i.src,a=e[1].staticContentPath+"loader_hourglass.gif")||attr(i,"src",a),attr(r,"class","mgPlayerJSPreview_media-progress-loader mgPlayerJSPreview_margin-r-20")},m(e,t){insert(e,r,t),append(r,i)},p(e,t){2&t&&!src_url_equal(i.src,a=e[1].staticContentPath+"loader_hourglass.gif")&&attr(i,"src",a)},d(e){e&&detach(r)}}}function create_if_block_10$8(e){let r;return{c(){(r=element("div")).innerHTML="",attr(r,"class","horizontal-line")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block_8$a(r){let i,a,o,n,s,l,c=(!r[0].media_files[0].doc||"0"==r[0].media_files[0].doc)&&create_if_block_9$9(r);return{c(){i=element("div"),a=element("input"),n=space(),c&&c.c(),attr(a,"type","button"),attr(a,"class","mgPlayerJSPreview_lbl-btn detail-download-action-options-dropdown-item download-link ege-inline-block-div mgPlayerJSPreview_width-100"),a.value=o=r[1].labels.downloadWord+" (.docx)",attr(i,"id","mgPlayerJSPreview_tour-download-docx"),attr(i,"class","mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between")},m(e,t){insert(e,i,t),append(i,a),append(i,n),c&&c.m(i,null),s||(l=listen(a,"click",stop_propagation(function(){is_function(r[3]("tour_word_download",r[0].media_files[0].doc,r[0]))&&r[3]("tour_word_download",r[0].media_files[0].doc,r[0]).apply(this,arguments)})),s=!0)},p(e,t){r=e,2&t&&o!==(o=r[1].labels.downloadWord+" (.docx)")&&(a.value=o),r[0].media_files[0].doc&&"0"!=r[0].media_files[0].doc?c&&(c.d(1),c=null):c?c.p(r,t):((c=create_if_block_9$9(r)).c(),c.m(i,null))},d(e){e&&detach(i),c&&c.d(),s=!1,l()}}}function create_if_block_9$9(e){let r,i,a;return{c(){r=element("div"),attr(i=element("img"),"class","mgPlayerJSPreview_max-width-height-100"),src_url_equal(i.src,a=e[1].staticContentPath+"loader_hourglass.gif")||attr(i,"src",a),attr(r,"class","mgPlayerJSPreview_media-progress-loader mgPlayerJSPreview_margin-r-20")},m(e,t){insert(e,r,t),append(r,i)},p(e,t){2&t&&!src_url_equal(i.src,a=e[1].staticContentPath+"loader_hourglass.gif")&&attr(i,"src",a)},d(e){e&&detach(r)}}}function create_if_block_7$a(e){let r;return{c(){(r=element("div")).innerHTML="",attr(r,"class","horizontal-line")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block_5$b(r){let i,a,o,n,s,l,c=(!r[0].media_files[0].blog||"0"==r[0].media_files[0].blog)&&create_if_block_6$b(r);return{c(){i=element("div"),a=element("input"),n=space(),c&&c.c(),attr(a,"type","button"),attr(a,"class","mgPlayerJSPreview_lbl-btn detail-download-action-options-dropdown-item download-link ege-inline-block-div mgPlayerJSPreview_width-100"),a.value=o=r[1].labels.downloadBlog+" (.html)",attr(i,"id","mgPlayerJSPreview_tour-download-html"),attr(i,"class","mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between")},m(e,t){insert(e,i,t),append(i,a),append(i,n),c&&c.m(i,null),s||(l=listen(a,"click",stop_propagation(function(){is_function(r[3]("tour_blog_download",r[0].media_files[0].blog,r[0]))&&r[3]("tour_blog_download",r[0].media_files[0].blog,r[0]).apply(this,arguments)})),s=!0)},p(e,t){r=e,2&t&&o!==(o=r[1].labels.downloadBlog+" (.html)")&&(a.value=o),r[0].media_files[0].blog&&"0"!=r[0].media_files[0].blog?c&&(c.d(1),c=null):c?c.p(r,t):((c=create_if_block_6$b(r)).c(),c.m(i,null))},d(e){e&&detach(i),c&&c.d(),s=!1,l()}}}function create_if_block_6$b(e){let r,i,a;return{c(){r=element("div"),attr(i=element("img"),"class","mgPlayerJSPreview_max-width-height-100"),src_url_equal(i.src,a=e[1].staticContentPath+"loader_hourglass.gif")||attr(i,"src",a),attr(r,"class","mgPlayerJSPreview_media-progress-loader mgPlayerJSPreview_margin-r-20")},m(e,t){insert(e,r,t),append(r,i)},p(e,t){2&t&&!src_url_equal(i.src,a=e[1].staticContentPath+"loader_hourglass.gif")&&attr(i,"src",a)},d(e){e&&detach(r)}}}function create_if_block_4$c(e){let r;return{c(){(r=element("div")).innerHTML="",attr(r,"class","horizontal-line")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block_2$f(r){let i,a,o,n,s,l,c=(!r[0].media_files[0].text||"0"==r[0].media_files[0].text)&&create_if_block_3$d(r);return{c(){i=element("div"),a=element("input"),n=space(),c&&c.c(),attr(a,"type","button"),attr(a,"class","mgPlayerJSPreview_lbl-btn detail-download-action-options-dropdown-item download-link ege-inline-block-div mgPlayerJSPreview_width-100"),a.value=o=r[1].labels.downloadTxt+" (.txt)",attr(i,"id","mgPlayerJSPreview_tour-download-txt"),attr(i,"class","mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between")},m(e,t){insert(e,i,t),append(i,a),append(i,n),c&&c.m(i,null),s||(l=listen(a,"click",stop_propagation(function(){is_function(r[3]("",r[0].media_files[0].text,r[0]))&&r[3]("",r[0].media_files[0].text,r[0]).apply(this,arguments)})),s=!0)},p(e,t){r=e,2&t&&o!==(o=r[1].labels.downloadTxt+" (.txt)")&&(a.value=o),r[0].media_files[0].text&&"0"!=r[0].media_files[0].text?c&&(c.d(1),c=null):c?c.p(r,t):((c=create_if_block_3$d(r)).c(),c.m(i,null))},d(e){e&&detach(i),c&&c.d(),s=!1,l()}}}function create_if_block_3$d(e){let r,i,a;return{c(){r=element("div"),attr(i=element("img"),"class","mgPlayerJSPreview_max-width-height-100"),src_url_equal(i.src,a=e[1].staticContentPath+"loader_hourglass.gif")||attr(i,"src",a),attr(r,"class","mgPlayerJSPreview_media-progress-loader mgPlayerJSPreview_margin-r-20")},m(e,t){insert(e,r,t),append(r,i)},p(e,t){2&t&&!src_url_equal(i.src,a=e[1].staticContentPath+"loader_hourglass.gif")&&attr(i,"src",a)},d(e){e&&detach(r)}}}function create_fragment$l(e){let r,i=e[6](e[0]),a=i&&create_if_block$i(e);return{c(){r=element("div"),a&&a.c()},m(e,t){insert(e,r,t),a&&a.m(r,null)},p(e,[t]){(i=1&t?e[6](e[0]):i)?a?a.p(e,t):((a=create_if_block$i(e)).c(),a.m(r,null)):a&&(a.d(1),a=null)},i:noop,o:noop,d(e){e&&detach(r),a&&a.d()}}}function instance$k(e,t,r){let i=t.tour;let n=function(e){switch(e){case"tour_video_download":GmCXt.trackerV1.trackGuideDownload(i,"video");break;case"tour_pdf_download":GmCXt.trackerV1.trackGuideDownload(i,"pdf");break;case"tour_ppt_download":GmCXt.trackerV1.trackGuideDownload(i,"ppt");break;case"tour_gif_download":GmCXt.trackerV1.trackGuideDownload(i,"gif");break;case"tour_word_download":GmCXt.trackerV1.trackGuideDownload(i,"docx");break;case"tour_blog_download":GmCXt.trackerV1.trackGuideDownload(i,"html");break;default:GmCXt.trackerV1.trackGuideDownload(i,"txt")}};function a(){mg$$1(".detail-download-action-options-dropdown").slideUp(200),mg$$1(".tour-item").removeClass("mgPlayerJSPreview_z-index mgPlayerJSPreview_z-index-10"),mg$$1(".header-detail-view-tour-download-wrapper").removeClass("mgPlayerJSPreview_dropdown-active")}function o(e){mg$$1(e.target).closest(".detail-download-action-options-dropdown").length||(mg$$1(".detail-download-action-options-dropdown").slideUp(200),r(1,rootScope.isMediaFileDropdown=!1,rootScope),document.removeEventListener("click",o))}return onMount(()=>{document.addEventListener("click",o)}),onDestroy(()=>{document.removeEventListener("click",o)}),e.$$set=e=>{"tour"in e&&r(0,i=e.tour)},[i,rootScope,function(e){if(!e)return!1;let t=!0;return t=GmCXt.branchStepExist(e)?!1:t},function(a,o,e){function t(r){r&&(o=r);{var i=a;r=o;let t=document.createElement("a");t.setAttribute("href",r),t.setAttribute("target","_blank"),t.style.display="none",document.body.appendChild(t);let e;document&&document.createEvent&&window?(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null):e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}),t.addEventListener("click",function(e){e.stopPropagation(),document.body.removeChild(t),n(i)},!1),t.dispatchEvent(e)}}var r=GmCXt.getUrlWithLang(o);o+=GmCXt.getCdnSign(),e&&!e.tour_settings.translationEnable?GmCXt.checkAssetUrl(o,o,t):GmCXt.checkAssetUrl(r,o,t)},function(e){r(1,rootScope.isMediaFileDropdown=!1,rootScope),mg$$1(".detail-view-action-options-dropdown").slideUp(200),mg$$1(".step-action-menu-options-dropdown").slideUp(200),rootScope.hideTourActionDropdown(),a(),r(1,rootScope.isMediaFileDropdown=mg$$1(e.target).children(".detail-download-action-options-dropdown").is(":visible"),rootScope),rootScope.isMediaFileDropdown?(mg$$1(e.target).children(".detail-download-action-options-dropdown").slideUp(200),r(1,rootScope.isMediaFileDropdown=!1,rootScope)):(mg$$1(e.target).children(".detail-download-action-options-dropdown").slideDown(200),r(1,rootScope.isMediaFileDropdown=!0,rootScope),mg$$1(e.target).addClass("mgPlayerJSPreview_dropdown-active"),mg$$1(e.target).parents(".tour-item").addClass("mgPlayerJSPreview_z-index mgPlayerJSPreview_z-index-10")),document.addEventListener("click",o)},a,function(e){return(GmCXt.isGuide(e)||rootScope.isTooltip(e)&&rootScope.createTooltipMediaFile||rootScope.isCADGuide(e)||GmCXt.isOnboarding(e)&&"tutorial"===e.tour_settings.tutorial_tour_type)&&(e=e,!(rootScope.FT.isPlayer&&"humana"===rootScope.appConfig.customer||GmCXt.isFalseObj(e.tour_settings.downloadGuideFiles)))&&rootScope.mediafileCreation&&!(rootScope.accessibility&&rootScope.FT.isPlayer)}]}class DownloadMedia extends SvelteComponent{constructor(e){super(),init(this,e,instance$k,create_fragment$l,safe_not_equal,{tour:0})}}function create_if_block_33$1(e){let r,i,a,o,t=rootScope.labels.draftGuide+"",n,s,l;return{c(){r=element("div"),i=element("div"),a=space(),o=element("div"),n=text(t),attr(i,"class","mgPlayerJSPreview_tour-draft-highlight"),attr(o,"class",s="mgPlayerJSPreview_tour-draft "+(e[0].pin?"mgPlayerJSPreview_tour-draft-pin":"")),attr(r,"id",l="tour-draft-"+e[0].tour_id),attr(r,"class","mgPlayerJSPreview_tour-draft-wrapper")},m(e,t){insert(e,r,t),append(r,i),append(r,a),append(r,o),append(o,n)},p(e,t){1&t[0]&&s!==(s="mgPlayerJSPreview_tour-draft "+(e[0].pin?"mgPlayerJSPreview_tour-draft-pin":""))&&attr(o,"class",s),1&t[0]&&l!==(l="tour-draft-"+e[0].tour_id)&&attr(r,"id",l)},d(e){e&&detach(r)}}}function create_if_block_15$4(r){let i,a,o,n,s,l,c,p,d,u,g,m=!r[6]&&!r[7]&&!r[8]&&create_if_block_28$1(r),h=(r[13]||r[14]||r[5]||r[6]||r[15])&&!r[7]&&create_if_block_21$2(r),_=(r[13]||r[14])&&r[7]&&create_if_block_20$3(),f=r[12]&&create_if_block_17$3(r),v=-1!==r[18]&&create_if_block_16$3();return{c(){i=element("div"),m&&m.c(),a=space(),o=element("div"),h&&h.c(),n=space(),_&&_.c(),s=space(),f&&f.c(),l=space(),v&&v.c(),attr(o,"id",c="mgPlayerJSPreview_icon-tour-play-"+r[0].tour_id),attr(o,"class",p="ege-inline-block-vm tour-play-icon playTourBtn active "+(r[0].is_published?"published-tour-icon":"")+" "+("currentpage"!=get_store_value(Gm.CurrentPage)&&"allguidesSearchPage"!=get_store_value(Gm.CurrentPage)&&"findNReplace"!==get_store_value(Gm.activeView)&&!r[26]?.is_published&&r[0]?.is_published?"mgPlayerJSPreview_published-category-tour-icon":"")),attr(i,"class",d="tour-play-action-wrapper ege-inline-block-vm mgPlayerJSPreview_position-relative "+(r[0].is_published?"activePublishedTourPlay":""))},m(e,t){insert(e,i,t),m&&m.m(i,null),append(i,a),append(i,o),h&&h.m(o,null),append(o,n),_&&_.m(o,null),append(o,s),f&&f.m(o,null),append(o,l),v&&v.m(o,null),u||(g=listen(o,"click",r[38]),u=!0)},p(e,t){e[6]||e[7]||e[8]?m&&(m.d(1),m=null):m?m.p(e,t):((m=create_if_block_28$1(e)).c(),m.m(i,a)),(e[13]||e[14]||e[5]||e[6]||e[15])&&!e[7]?h?h.p(e,t):((h=create_if_block_21$2(e)).c(),h.m(o,n)):h&&(h.d(1),h=null),(e[13]||e[14])&&e[7]?_||((_=create_if_block_20$3()).c(),_.m(o,s)):_&&(_.d(1),_=null),e[12]?f?f.p(e,t):((f=create_if_block_17$3(e)).c(),f.m(o,l)):f&&(f.d(1),f=null),-1!==e[18]?v||((v=create_if_block_16$3()).c(),v.m(o,null)):v&&(v.d(1),v=null),1&t[0]&&c!==(c="mgPlayerJSPreview_icon-tour-play-"+e[0].tour_id)&&attr(o,"id",c),1&t[0]&&p!==(p="ege-inline-block-vm tour-play-icon playTourBtn active "+(e[0].is_published?"published-tour-icon":"")+" "+("currentpage"!=get_store_value(Gm.CurrentPage)&&"allguidesSearchPage"!=get_store_value(Gm.CurrentPage)&&"findNReplace"!==get_store_value(Gm.activeView)&&!e[26]?.is_published&&e[0]?.is_published?"mgPlayerJSPreview_published-category-tour-icon":""))&&attr(o,"class",p),1&t[0]&&d!==(d="tour-play-action-wrapper ege-inline-block-vm mgPlayerJSPreview_position-relative "+(e[0].is_published?"activePublishedTourPlay":""))&&attr(i,"class",d)},d(e){e&&detach(i),m&&m.d(),h&&h.d(),_&&_.d(),f&&f.d(),v&&v.d(),u=!1,g()}}}function create_if_block_28$1(r){let i,a,o,n,s,l,c,p=(r[9]===rootScope.playGuideMe||"Default"===r[0].tour_settings.defaultPlayAction&&r[3]===rootScope.playGuideMe)&&!r[11]&&!r[12]&&create_if_block_32$1(),d=(r[9]===rootScope.playSlideshow||"Default"===r[0].tour_settings.defaultPlayAction&&r[3]===rootScope.playSlideshow||r[11]||r[12])&&create_if_block_31$1(),u=(r[9]===rootScope.playVLab||"Default"===r[0].tour_settings.defaultPlayAction&&r[3]===rootScope.playVLab)&&!r[11]&&!r[12]&&create_if_block_30$1(),g=(r[9]===rootScope.playAuto||"Default"===r[0].tour_settings.defaultPlayAction&&r[3]===rootScope.playAuto)&&!r[11]&&!r[12]&&create_if_block_29$1();return{c(){i=element("div"),p&&p.c(),a=space(),d&&d.c(),o=space(),u&&u.c(),n=space(),g&&g.c(),attr(i,"id",s="mgPlayerJSPreview_title-tooltip-wrapper-"+r[0].tour_id),attr(i,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-right")},m(e,t){insert(e,i,t),p&&p.m(i,null),append(i,a),d&&d.m(i,null),append(i,o),u&&u.m(i,null),append(i,n),g&&g.m(i,null),l||(c=listen(i,"click",r[35]),l=!0)},p(e,t){e[9]!==rootScope.playGuideMe&&("Default"!==e[0].tour_settings.defaultPlayAction||e[3]!==rootScope.playGuideMe)||e[11]||e[12]?p&&(p.d(1),p=null):p||((p=create_if_block_32$1()).c(),p.m(i,a)),e[9]===rootScope.playSlideshow||"Default"===e[0].tour_settings.defaultPlayAction&&e[3]===rootScope.playSlideshow||e[11]||e[12]?d||((d=create_if_block_31$1()).c(),d.m(i,o)):d&&(d.d(1),d=null),e[9]!==rootScope.playVLab&&("Default"!==e[0].tour_settings.defaultPlayAction||e[3]!==rootScope.playVLab)||e[11]||e[12]?u&&(u.d(1),u=null):u||((u=create_if_block_30$1()).c(),u.m(i,n)),e[9]!==rootScope.playAuto&&("Default"!==e[0].tour_settings.defaultPlayAction||e[3]!==rootScope.playAuto)||e[11]||e[12]?g&&(g.d(1),g=null):g||((g=create_if_block_29$1()).c(),g.m(i,null)),1&t[0]&&s!==(s="mgPlayerJSPreview_title-tooltip-wrapper-"+e[0].tour_id)&&attr(i,"id",s)},d(e){e&&detach(i),p&&p.d(),d&&d.d(),u&&u.d(),g&&g.d(),l=!1,c()}}}function create_if_block_32$1(e){let r;return{c(){(r=element("div")).textContent=""+rootScope.labels.guideMe,attr(r,"class","mgPlayerJSPreview_tooltip-title mgPlayerJSPreview_text-align-center")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block_31$1(e){let r;return{c(){(r=element("div")).textContent=""+rootScope.labels.showMe,attr(r,"class","mgPlayerJSPreview_tooltip-title mgPlayerJSPreview_text-align-center")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block_30$1(e){let r;return{c(){(r=element("div")).textContent=""+rootScope.labels.vLab,attr(r,"class","mgPlayerJSPreview_tooltip-title mgPlayerJSPreview_text-align-center")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block_29$1(e){let r;return{c(){(r=element("div")).textContent=""+rootScope.labels.doItForMe,attr(r,"class","mgPlayerJSPreview_tooltip-title mgPlayerJSPreview_text-align-center")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block_21$2(e){let r,i=!e[6]&&!e[5]&&0<=e[0].image_url.indexOf("default_icon")&&!e[15],a,o=e[16]&&0<=e[0].image_url.indexOf("default_icon"),n,s=e[6]&&0<=e[0].image_url.indexOf("default_icon"),l,c=e[15]&&0<=e[0].image_url.indexOf("default_icon"),p,d,u=e[0].image_url&&-1===e[0].image_url.indexOf("default_icon"),g=i&&create_if_block_27$1(e),m=o&&create_if_block_26$1(e),h=s&&create_if_block_25$2(),_=c&&create_if_block_24$2(),f=e[5]&&create_if_block_23$2(),v=u&&create_if_block_22$2(e);return{c(){r=element("button"),g&&g.c(),a=space(),m&&m.c(),n=space(),h&&h.c(),l=space(),_&&_.c(),p=space(),f&&f.c(),d=space(),v&&v.c(),attr(r,"class","mgPlayerJSPreview_guide-icon-wrapper mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_lbl-btn")},m(e,t){insert(e,r,t),g&&g.m(r,null),append(r,a),m&&m.m(r,null),append(r,n),h&&h.m(r,null),append(r,l),_&&_.m(r,null),append(r,p),f&&f.m(r,null),append(r,d),v&&v.m(r,null)},p(e,t){(i=32865&t[0]?!e[6]&&!e[5]&&0<=e[0].image_url.indexOf("default_icon")&&!e[15]:i)?g?g.p(e,t):((g=create_if_block_27$1(e)).c(),g.m(r,a)):g&&(g.d(1),g=null),(o=65537&t[0]?e[16]&&0<=e[0].image_url.indexOf("default_icon"):o)?m?m.p(e,t):((m=create_if_block_26$1(e)).c(),m.m(r,n)):m&&(m.d(1),m=null),(s=65&t[0]?e[6]&&0<=e[0].image_url.indexOf("default_icon"):s)?h||((h=create_if_block_25$2()).c(),h.m(r,l)):h&&(h.d(1),h=null),(c=32769&t[0]?e[15]&&0<=e[0].image_url.indexOf("default_icon"):c)?_||((_=create_if_block_24$2()).c(),_.m(r,p)):_&&(_.d(1),_=null),e[5]?f||((f=create_if_block_23$2()).c(),f.m(r,d)):f&&(f.d(1),f=null),(u=1&t[0]?e[0].image_url&&-1===e[0].image_url.indexOf("default_icon"):u)?v?v.p(e,t):((v=create_if_block_22$2(e)).c(),v.m(r,null)):v&&(v.d(1),v=null)},d(e){e&&detach(r),g&&g.d(),m&&m.d(),h&&h.d(),_&&_.d(),f&&f.d(),v&&v.d()}}}function create_if_block_27$1(e){let r,i,a=e[33]()+"";return{c(){r=element("div"),attr(i=svg_element("svg"),"width","40"),attr(i,"height","40"),attr(i,"viewBox","0 0 40 40"),attr(i,"fill","none"),attr(r,"class","mgPlayerJSPreview_inline-block-vm")},m(e,t){insert(e,r,t),append(r,i),i.innerHTML=a},p:noop,d(e){e&&detach(r)}}}function create_if_block_26$1(r){let i;return{c(){attr(i=element("div"),"class","mgPlayerJSPreview_inline-block-vm")},m(e,t){insert(e,i,t),i.innerHTML=r[16]},p(e,t){65536&t[0]&&(i.innerHTML=e[16])},d(e){e&&detach(i)}}}function create_if_block_25$2(e){let r,i=rootScope.svgs.mobileGuide+"";return{c(){attr(r=element("div"),"class","mgPlayerJSPreview_inline-block-vm")},m(e,t){insert(e,r,t),r.innerHTML=i},d(e){e&&detach(r)}}}function create_if_block_24$2(e){let r,i=rootScope.svgs.insight+"";return{c(){attr(r=element("div"),"class","mgPlayerJSPreview_inline-block-vm")},m(e,t){insert(e,r,t),r.innerHTML=i},d(e){e&&detach(r)}}}function create_if_block_23$2(e){let r,i=rootScope.svgs.guide_bot_icon+"";return{c(){attr(r=element("div"),"class","mgPlayerJSPreview_inline-block-vm")},m(e,t){insert(e,r,t),r.innerHTML=i},d(e){e&&detach(r)}}}function create_if_block_22$2(r){let i,a,o,n,s;return{c(){i=element("div"),attr(a=element("img"),"class","mgPlayerJSPreview_guide-upld-img mgPlayerJSPreview_custom-image mgPlayerJSPreview_width-height-100 mgPlayerJSPreview_position-center mgPlayerJSPreview_border-radius-50"),src_url_equal(a.src,o=r[0].image_url+r[25])||attr(a,"src",o),attr(i,"class","mgPlayerJSPreview_guide-upld-img-wrapper mgPlayerJSPreview_guide-pub-img-border mgPlayerJSPreview_position-relative mgPlayerJSPreview_border-radius-50")},m(e,t){insert(e,i,t),append(i,a),n||(s=listen(a,"error",r[36]),n=!0)},p(e,t){33554433&t[0]&&!src_url_equal(a.src,o=e[0].image_url+e[25])&&attr(a,"src",o)},d(e){e&&detach(i),n=!1,s()}}}function create_if_block_20$3(e){let r,i=rootScope.svgs.wb+"";return{c(){attr(r=element("div"),"class","ege-inline-block-vm")},m(e,t){insert(e,r,t),r.innerHTML=i},d(e){e&&detach(r)}}}function create_if_block_17$3(e){let r,i=0<=e[0].image_url.indexOf("default_icon"),a,o=e[0].image_url&&-1==e[0].image_url.indexOf("default_icon"),n=i&&create_if_block_19$3(),s=o&&create_if_block_18$3(e);return{c(){r=element("div"),n&&n.c(),a=space(),s&&s.c(),attr(r,"class","mgPlayerJSPreview_guide-icon-wrapper mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm")},m(e,t){insert(e,r,t),n&&n.m(r,null),append(r,a),s&&s.m(r,null)},p(e,t){(i=1&t[0]?0<=e[0].image_url.indexOf("default_icon"):i)?n||((n=create_if_block_19$3()).c(),n.m(r,a)):n&&(n.d(1),n=null),(o=1&t[0]?e[0].image_url&&-1==e[0].image_url.indexOf("default_icon"):o)?s?s.p(e,t):((s=create_if_block_18$3(e)).c(),s.m(r,null)):s&&(s.d(1),s=null)},d(e){e&&detach(r),n&&n.d(),s&&s.d()}}}function create_if_block_19$3(e){let r,i=rootScope.svgs.guide_onboarding+"";return{c(){attr(r=element("div"),"class","mgPlayerJSPreview_inline-block-vm")},m(e,t){insert(e,r,t),r.innerHTML=i},d(e){e&&detach(r)}}}function create_if_block_18$3(r){let i,a,o,n,s;return{c(){i=element("div"),attr(a=element("img"),"class","mgPlayerJSPreview_guide-upld-img mgPlayerJSPreview_custom-image mgPlayerJSPreview_width-height-100 mgPlayerJSPreview_position-center mgPlayerJSPreview_border-radius-50"),src_url_equal(a.src,o=r[0].image_url+r[25])||attr(a,"src",o),attr(i,"class","mgPlayerJSPreview_guide-upld-img-wrapper mgPlayerJSPreview_guide-pub-img-border mgPlayerJSPreview_position-relative mgPlayerJSPreview_border-radius-50")},m(e,t){insert(e,i,t),append(i,a),n||(s=listen(a,"error",r[37]),n=!0)},p(e,t){33554433&t[0]&&!src_url_equal(a.src,o=e[0].image_url+e[25])&&attr(a,"src",o)},d(e){e&&detach(i),n=!1,s()}}}function create_if_block_16$3(e){let r,i=rootScope.svgs.guide_beacon+"";return{c(){attr(r=element("div"),"class","guide-beacon")},m(e,t){insert(e,r,t),r.innerHTML=i},d(e){e&&detach(r)}}}function create_if_block_14$4(e){let r,i,a=rootScope.svgs.tooltipIcon+"",o;return{c(){r=element("div"),attr(i=element("div"),"class",o="mgPlayerJSPreview_inline-block-vt tour-play-icon active "+(e[0].is_published?"published-tour":"")+" "+("currentpage"!=get_store_value(Gm.CurrentPage)&&"allguidesSearchPage"!=get_store_value(Gm.CurrentPage)&&"findNReplace"!==get_store_value(Gm.activeView)&&!e[26]?.is_published&&e[0]?.is_published?"mgPlayerJSPreview_published-category-tour-icon":"")),attr(r,"class","mgPlayerJSPreview_guide-icon-wrapper mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm")},m(e,t){insert(e,r,t),append(r,i),i.innerHTML=a},p(e,t){1&t[0]&&o!==(o="mgPlayerJSPreview_inline-block-vt tour-play-icon active "+(e[0].is_published?"published-tour":"")+" "+("currentpage"!=get_store_value(Gm.CurrentPage)&&"allguidesSearchPage"!=get_store_value(Gm.CurrentPage)&&"findNReplace"!==get_store_value(Gm.activeView)&&!e[26]?.is_published&&e[0]?.is_published?"mgPlayerJSPreview_published-category-tour-icon":""))&&attr(i,"class",o)},d(e){e&&detach(r)}}}function create_if_block_13$6(e){let r,i,a=e[0].tour_title+"",o,n,s,l=e[0].tour_description+"",c;return{c(){r=element("div"),i=element("div"),o=text(a),n=space(),s=element("div"),c=text(l),attr(i,"class","mgPlayerJSPreview_tooltip-title"),attr(s,"class","mgPlayerJSPreview_tooltip-title"),attr(r,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-right mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y")},m(e,t){insert(e,r,t),append(r,i),append(i,o),append(r,n),append(r,s),append(s,c)},p(e,t){1&t[0]&&a!==(a=e[0].tour_title+"")&&set_data(o,a),1&t[0]&&l!==(l=e[0].tour_description+"")&&set_data(c,l)},d(e){e&&detach(r)}}}function create_if_block_12$6(e){let r,i,a,o,n=e[0].category_title+"",s;return{c(){r=element("div"),(i=element("button")).innerHTML="",a=space(),o=element("div"),s=text(n),attr(i,"class","mgPlayerJSPreview_guide-category-title-icon mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_lbl-btn"),attr(o,"class","mgPlayerJSPreview_guide-category-title mgPlayerJSPreview_inline-block-vm"),attr(r,"class","mgPlayerJSPreview_guide-description-wrapper")},m(e,t){insert(e,r,t),append(r,i),append(r,a),append(r,o),append(o,s)},p(e,t){1&t[0]&&n!==(n=e[0].category_title+"")&&set_data(s,n)},d(e){e&&detach(r)}}}function create_if_block_5$a(e){let r,i=e[28]()||e[29](),a,o,n,s,l,c=i&&create_if_block_11$7(e),p=e[19]&&create_if_block_10$7(e),d=e[20]&&create_if_block_9$8(e),u=e[21]&&create_if_block_8$9(e),g=e[22]&&create_if_block_7$9(e),m=e[23]&&create_if_block_6$a(e);return{c(){r=element("div"),c&&c.c(),a=space(),p&&p.c(),o=space(),d&&d.c(),n=space(),u&&u.c(),s=space(),g&&g.c(),l=space(),m&&m.c(),attr(r,"class","mgPlayerJSPreview_guide-play-action-wrapper mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-flex-end mgPlayerJSPreview_float-right mgPlayerJSPreview_border-radius mgPlayerJSPreview_border-radius-4px mgPlayerJSPreview_border-rounded "+(rootScope.isMicroPlayer?"mgPlayerJSPreview_no-margin mgPlayerJSPreview_border-rounded-left":""))},m(e,t){insert(e,r,t),c&&c.m(r,null),append(r,a),p&&p.m(r,null),append(r,o),d&&d.m(r,null),append(r,n),u&&u.m(r,null),append(r,s),g&&g.m(r,null),append(r,l),m&&m.m(r,null)},p(e,t){i&&c.p(e,t),e[19]?p?p.p(e,t):((p=create_if_block_10$7(e)).c(),p.m(r,o)):p&&(p.d(1),p=null),e[20]?d?d.p(e,t):((d=create_if_block_9$8(e)).c(),d.m(r,n)):d&&(d.d(1),d=null),e[21]?u?u.p(e,t):((u=create_if_block_8$9(e)).c(),u.m(r,s)):u&&(u.d(1),u=null),e[22]?g?g.p(e,t):((g=create_if_block_7$9(e)).c(),g.m(r,l)):g&&(g.d(1),g=null),e[23]?m?m.p(e,t):((m=create_if_block_6$a(e)).c(),m.m(r,null)):m&&(m.d(1),m=null)},d(e){e&&detach(r),c&&c.d(),p&&p.d(),d&&d.d(),u&&u.d(),g&&g.d(),m&&m.d()}}}function create_if_block_11$7(r){let i,a,o=(r[28]()?rootScope.svgs.replay_guide:rootScope.svgs.resume_guide)+"",n,s,l,c=(r[28]()?rootScope.labels.replay:rootScope.labels.yesResume)+"",p,d;return{c(){i=element("button"),a=element("div"),n=space(),s=element("div"),l=element("div"),attr(a,"class","mgPlayerJSPreview_action-icon mgPlayerJSPreview_position-center "+(r[28]()?"mgPlayerJSPreview_action-icon-replay":"mgPlayerJSPreview_action-icon-resume")),attr(l,"class","mgPlayerJSPreview_tooltip-title"),attr(s,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-left mgPlayerJSPreview_margin-tb-15"),attr(i,"id","mgPlayerJSPreview_guide-replay-resume-wrapper"),attr(i,"class","mgPlayerJSPreview_guide-action-icon-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_border-radius-50 mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_lbl-btn")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,l),l.innerHTML=c,p||(d=listen(i,"click",function(){is_function(r[28]?rootScope.play(r[0],!1):rootScope.play(r[0],!0))&&(r[28]?rootScope.play(r[0],!1):rootScope.play(r[0],!0)).apply(this,arguments)}),p=!0)},p(e,t){r=e},d(e){e&&detach(i),p=!1,d()}}}function create_if_block_10$7(r){let i,a,o=rootScope.svgs.guidePlayIcon+"",n,s,l,c,p;return{c(){i=element("button"),a=element("div"),n=space(),s=element("div"),(l=element("div")).textContent=""+rootScope.labels.guideMe,attr(a,"class","mgPlayerJSPreview_action-icon mgPlayerJSPreview_position-center"),attr(l,"class","mgPlayerJSPreview_tooltip-title"),attr(s,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-left mgPlayerJSPreview_margin-tb-15"),attr(i,"id","mgPlayerJSPreview_icon-guide-action-guideme"),attr(i,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_guide-action-icon-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_border-radius-50 mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,l),c||(p=listen(i,"click",function(){is_function(rootScope.guideAction(rootScope.playGuideMe,null,r[0],rootScope.currentView))&&rootScope.guideAction(rootScope.playGuideMe,null,r[0],rootScope.currentView).apply(this,arguments)}),c=!0)},p(e,t){r=e},d(e){e&&detach(i),c=!1,p()}}}function create_if_block_9$8(r){let i,a,o=rootScope.svgs.play_showme+"",n,s,l,c,p;return{c(){i=element("button"),a=element("div"),n=space(),s=element("div"),(l=element("div")).textContent=""+rootScope.labels.showMe,attr(a,"class","mgPlayerJSPreview_action-icon mgPlayerJSPreview_position-center"),attr(l,"class","mgPlayerJSPreview_tooltip-title"),attr(s,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-left mgPlayerJSPreview_margin-tb-15"),attr(i,"id","mgPlayerJSPreview_icon-guide-action-showme"),attr(i,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_guide-action-icon-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_border-radius-50 mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_lbl-btn")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,l),c||(p=listen(i,"click",function(){is_function(rootScope.guideAction(rootScope.playSlideshow,null,r[0],rootScope.currentView))&&rootScope.guideAction(rootScope.playSlideshow,null,r[0],rootScope.currentView).apply(this,arguments)}),c=!0)},p(e,t){r=e},d(e){e&&detach(i),c=!1,p()}}}function create_if_block_8$9(r){let i,a,o=rootScope.svgs.play_testme+"",n,s,l,c,p;return{c(){i=element("button"),a=element("div"),n=space(),s=element("div"),(l=element("div")).textContent=""+rootScope.labels.testMe,attr(a,"class","mgPlayerJSPreview_action-icon mgPlayerJSPreview_position-center"),attr(l,"class","mgPlayerJSPreview_tooltip-title"),attr(s,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-left mgPlayerJSPreview_margin-tb-15"),attr(i,"id","mgPlayerJSPreview_icon-guide-action-testMe"),attr(i,"class","mgPlayerJSPreview_guide-action-icon-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_border-radius-50 mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_lbl-btn")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,l),c||(p=listen(i,"click",function(){is_function(r[31](r[0]))&&r[31](r[0]).apply(this,arguments)}),c=!0)},p(e,t){r=e},d(e){e&&detach(i),c=!1,p()}}}function create_if_block_7$9(r){let i,a,o=rootScope.svgs.play_teachme+"",n,s,l,c,p;return{c(){i=element("button"),a=element("div"),n=space(),s=element("div"),(l=element("div")).textContent=""+rootScope.labels.vLab,attr(a,"class","mgPlayerJSPreview_action-icon mgPlayerJSPreview_position-center"),attr(l,"class","mgPlayerJSPreview_tooltip-title"),attr(s,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-left mgPlayerJSPreview_margin-tb-15"),attr(i,"id","mgPlayerJSPreview_icon-guide-action-vlab"),attr(i,"class","mgPlayerJSPreview_guide-action-icon-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_border-radius-50 mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_lbl-btn")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,l),c||(p=listen(i,"click",function(){is_function(rootScope.guideAction(rootScope.playVLab,null,r[0],rootScope.currentView))&&rootScope.guideAction(rootScope.playVLab,null,r[0],rootScope.currentView).apply(this,arguments)}),c=!0)},p(e,t){r=e},d(e){e&&detach(i),c=!1,p()}}}function create_if_block_6$a(r){let i,a,o=rootScope.svgs.doItForMeIcon+"",n,s,l,c,p;return{c(){i=element("button"),a=element("div"),n=space(),s=element("div"),(l=element("div")).textContent=""+rootScope.labels.doItForMe,attr(a,"class","mgPlayerJSPreview_action-icon mgPlayerJSPreview_position-center"),attr(l,"class","mgPlayerJSPreview_tooltip-title"),attr(s,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-left mgPlayerJSPreview_margin-tb-15"),attr(i,"id","mgPlayerJSPreview_icon-guide-action-doitforme"),attr(i,"class","mgPlayerJSPreview_guide-action-icon-wrapper mgPlayerJSPreview_float-left mgPlayerJSPreview_position-relative mgPlayerJSPreview_border-radius-50 mgPlayerJSPreview_cursor mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_lbl-btn")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,l),c||(p=listen(i,"click",function(){is_function(rootScope.guideAction(rootScope.playAuto,null,r[0],rootScope.currentView))&&rootScope.guideAction(rootScope.playAuto,null,r[0],rootScope.currentView).apply(this,arguments)}),c=!0)},p(e,t){r=e},d(e){e&&detach(i),c=!1,p()}}}function create_if_block_4$b(e){let r,i,a;return i=new DownloadMedia({props:{tour:e[0]}}),{c(){r=element("div"),create_component(i.$$.fragment),attr(r,"class","mgPlayerJSPreview_guide-row-download-wrapper mgPlayerJSPreview_float-right mgPlayerJSPreview_border-radius mgPlayerJSPreview_border-radius-4px mgPlayerJSPreview_border-rounded mgPlayerJSPreview_border-rounded-right")},m(e,t){insert(e,r,t),mount_component(i,r,null),a=!0},p(e,t){var r={};1&t[0]&&(r.tour=e[0]),i.$set(r)},i(e){a||(transition_in(i.$$.fragment,e),a=!0)},o(e){transition_out(i.$$.fragment,e),a=!1},d(e){e&&detach(r),destroy_component(i)}}}function create_if_block_3$c(r){let i,a,o=rootScope.svgs.pin+"",n,s,l,c,p;return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),(l=element("div")).textContent=""+rootScope.labels.btnPin,attr(l,"class","mgPlayerJSPreview_info-hover-text"),attr(s,"class","mgPlayerJSPreview_info-hover"),attr(i,"class","mgPlayerJSPreview_pin-guide-icon-wrapper mgPlayerJSPreview_icon-unpin-guide mgPlayerJSPreview_border-radius-50")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,l),c||(p=listen(i,"click",r[39]),c=!0)},p:noop,d(e){e&&detach(i),c=!1,p()}}}function create_if_block_2$e(r){let i,a,o=rootScope.svgs.pin_filled+"",n,s,l,c,p;return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),(l=element("div")).textContent=""+rootScope.labels.btnUnpin,attr(l,"class","mgPlayerJSPreview_info-hover-text"),attr(s,"class","mgPlayerJSPreview_info-hover"),attr(i,"class","mgPlayerJSPreview_pin-guide-icon-wrapper mgPlayerJSPreview_icon-pin-guide mgPlayerJSPreview_border-radius-50")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,l),c||(p=listen(i,"click",r[40]),c=!0)},p:noop,d(e){e&&detach(i),c=!1,p()}}}function create_if_block$h(e){let i,a="stepview"!==get_store_value(Gm.CurrentPage)&&rootScope.FT.creatorApp&&!rootScope.automationSelectionMode&&(rootScope.hasTourAccess(e[0])||!e[0].is_published||rootScope.isOwnerOrAppAdmin())&&!rootScope.isUserRole()&&!rootScope.exportEnabled&&!rootScope.hideMirrorAppCtrl(),o,n,r,s=a&&create_if_block_1$f(e);return n=new Empty({props:{tour:e[0]}}),{c(){i=element("div"),s&&s.c(),o=space(),create_component(n.$$.fragment),attr(i,"class","mgPlayerJSPreview_guide-user-action-wrapper")},m(e,t){insert(e,i,t),s&&s.m(i,null),append(i,o),mount_component(n,i,null),r=!0},p(e,t){(a=1&t[0]?"stepview"!==get_store_value(Gm.CurrentPage)&&rootScope.FT.creatorApp&&!rootScope.automationSelectionMode&&(rootScope.hasTourAccess(e[0])||!e[0].is_published||rootScope.isOwnerOrAppAdmin())&&!rootScope.isUserRole()&&!rootScope.exportEnabled&&!rootScope.hideMirrorAppCtrl():a)?s?(s.p(e,t),1&t[0]&&transition_in(s,1)):((s=create_if_block_1$f(e)).c(),transition_in(s,1),s.m(i,o)):s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros());var r={};1&t[0]&&(r.tour=e[0]),n.$set(r)},i(e){r||(transition_in(s),transition_in(n.$$.fragment,e),r=!0)},o(e){transition_out(s),transition_out(n.$$.fragment,e),r=!1},d(e){e&&detach(i),s&&s.d(),destroy_component(n)}}}function create_if_block_1$f(e){let i,a,o,n,s;return o=new Empty({props:{tour:e[0]}}),{c(){i=element("div"),a=element("div"),create_component(o.$$.fragment),attr(a,"class","mgPlayerJSPreview_add-step-wrapper tour-action-dropdown-wrapper"),toggle_class(a,"published-tour",e[0].is_published),attr(i,"id",n=`tour-pencil-icon-${e[0].tour_id} `+(e[0].is_published?"":"tour-pencil-icon-unpublish")),attr(i,"class","ege-inline-block-div tour-pencil-icon")},m(e,t){insert(e,i,t),append(i,a),mount_component(o,a,null),s=!0},p(e,t){var r={};1&t[0]&&(r.tour=e[0]),o.$set(r),(!s||1&t[0])&&toggle_class(a,"published-tour",e[0].is_published),(!s||1&t[0]&&n!==(n=`tour-pencil-icon-${e[0].tour_id} `+(e[0].is_published?"":"tour-pencil-icon-unpublish")))&&attr(i,"id",n)},i(e){s||(transition_in(o.$$.fragment,e),s=!0)},o(e){transition_out(o.$$.fragment,e),s=!1},d(e){e&&detach(i),destroy_component(o)}}}function create_fragment$k(r){let i,a,o=r[10]&&!rootScope.hideMirrorAppCtrl(),n,s,l,c,p,d,u=r[34](r[0].tour_title,r[1],r[2])+"",F,g,m,h=r[0].tour_description+"",_,f,O,v,R,N="allguidesSearchPage"===get_store_value(GmCXt.CurrentPage),y,H,P,B,U,V,S,w,b=0<r[24].length&&rootScope.isOwnerOrAppAdmin()&&rootScope.FT.creatorApp&&!rootScope.automationSelectionMode&&!rootScope.hideMirrorAppCtrl()&&!rootScope.isDesktopApp(),C,z=0<r[24].length&&rootScope.isOwnerOrAppAdmin()&&rootScope.FT.creatorApp&&!rootScope.automationSelectionMode&&!rootScope.hideMirrorAppCtrl()&&r[0].pin,k,j=!rootScope.FT.isPlayer&&!rootScope.isDesktopApp()&&"findNReplace"!==get_store_value(Gm.activeView),W,T,x,q,Z,A=o&&create_if_block_33$1(r),J=!r[4]&&create_if_block_15$4(r),G=r[4]&&create_if_block_14$4(r),$=(0<r[0].tour_title.length||0<r[0].tour_description.length)&&create_if_block_13$6(r),E=N&&create_if_block_12$6(r),L=rootScope.FT.isPlayer&&create_if_block_5$a(r),M=r[0].media_files[0]&&rootScope.isMicroPlayer&&create_if_block_4$b(r),I=b&&create_if_block_3$c(r),X=z&&create_if_block_2$e(r),D=j&&create_if_block$h(r);return{c(){i=element("div"),a=element("div"),A&&A.c(),n=space(),J&&J.c(),s=space(),G&&G.c(),l=space(),c=element("div"),p=element("div"),d=element("button"),F=space(),g=element("div"),m=element("div"),_=text(h),O=space(),$&&$.c(),R=space(),E&&E.c(),H=space(),P=element("div"),B=element("div"),U=space(),L&&L.c(),V=space(),M&&M.c(),w=space(),I&&I.c(),C=space(),X&&X.c(),k=space(),D&&D.c(),W=space(),T=element("div"),attr(d,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_guide-title mgPlayerJSPreview_text-overflow-ellipsis"),attr(m,"class","mgPlayerJSPreview_tour-desc"),attr(g,"id",f="mgPlayerJSPreview_tour-desc-"+r[0].tour_id),attr(g,"class","mgPlayerJSPreview_guide-desc-wrapper mgPlayerJSPreview_text-overflow-ellipsis"),attr(g,"tabindex","0"),attr(p,"id",v="mgPlayerJSPreview_tour-title-"+r[0].tour_id),attr(p,"class","mgPlayerJSPreview_guide-title-wrapper ege-inline-block-vm"),attr(c,"class",y="mgPlayerJSPreview_guide-details-wrapper ege-inline-block-vm "+(rootScope.exportEnabled?"mgPlayerJSPreview_disable-tour-play-action":"")+" "+(rootScope.isWBMicroPlayer?"mgPlayerJSPreview_wb-guide-title-wrapper":"")+" "+(rootScope.automationSelectionMode?"mgPlayerJSPreview_width-80":"")+" "+(rootScope.FT.creatorApp&&!r[10]?"mgPlayerJSPreview_guide-details-creator":"")+" "+(rootScope.FT.creatorApp&&r[10]?"mgPlayerJSPreview_guide-details-draft-guide":"")+" "+(rootScope.FT.creatorApp&&r[10]&&r[0].pin?"mgPlayerJSPreview_guide-details-draft-pin":"")),attr(P,"id",S="mgPlayerJSPreview_guide-row-action-wrapper_"+r[0].tour_id),attr(P,"class","mgPlayerJSPreview_guide-row-action-wrapper"),attr(i,"class","ege-inline-block-vm tour-title-description-wrapper"),attr(T,"class","ege-clear")},m(e,t){insert(e,i,t),append(i,a),A&&A.m(a,null),append(a,n),J&&J.m(a,null),append(a,s),G&&G.m(a,null),append(a,l),append(a,c),append(c,p),append(p,d),d.innerHTML=u,append(p,F),append(p,g),append(g,m),append(m,_),append(p,O),$&&$.m(p,null),append(c,R),E&&E.m(c,null),append(i,H),append(i,P),append(P,B),append(P,U),L&&L.m(P,null),append(P,V),M&&M.m(P,null),insert(e,w,t),I&&I.m(e,t),insert(e,C,t),X&&X.m(e,t),insert(e,k,t),D&&D.m(e,t),insert(e,W,t),insert(e,T,t),x=!0,q||(Z=listen(p,"click",stop_propagation(function(){is_function("manage-keywords"==rootScope.currentView?"":r[32](r[0]))&&("manage-keywords"==rootScope.currentView?"":r[32](r[0])).apply(this,arguments)})),q=!0)},p(e,t){r=e,(o=1024&t[0]?r[10]&&!rootScope.hideMirrorAppCtrl():o)?A?A.p(r,t):((A=create_if_block_33$1(r)).c(),A.m(a,n)):A&&(A.d(1),A=null),r[4]?J&&(J.d(1),J=null):J?J.p(r,t):((J=create_if_block_15$4(r)).c(),J.m(a,s)),r[4]?G?G.p(r,t):((G=create_if_block_14$4(r)).c(),G.m(a,l)):G&&(G.d(1),G=null),(!x||7&t[0])&&u!==(u=r[34](r[0].tour_title,r[1],r[2])+"")&&(d.innerHTML=u),(!x||1&t[0])&&h!==(h=r[0].tour_description+"")&&set_data(_,h),(!x||1&t[0]&&f!==(f="mgPlayerJSPreview_tour-desc-"+r[0].tour_id))&&attr(g,"id",f),0<r[0].tour_title.length||0<r[0].tour_description.length?$?$.p(r,t):(($=create_if_block_13$6(r)).c(),$.m(p,null)):$&&($.d(1),$=null),(!x||1&t[0]&&v!==(v="mgPlayerJSPreview_tour-title-"+r[0].tour_id))&&attr(p,"id",v),N&&E.p(r,t),(!x||1025&t[0]&&y!==(y="mgPlayerJSPreview_guide-details-wrapper ege-inline-block-vm "+(rootScope.exportEnabled?"mgPlayerJSPreview_disable-tour-play-action":"")+" "+(rootScope.isWBMicroPlayer?"mgPlayerJSPreview_wb-guide-title-wrapper":"")+" "+(rootScope.automationSelectionMode?"mgPlayerJSPreview_width-80":"")+" "+(rootScope.FT.creatorApp&&!r[10]?"mgPlayerJSPreview_guide-details-creator":"")+" "+(rootScope.FT.creatorApp&&r[10]?"mgPlayerJSPreview_guide-details-draft-guide":"")+" "+(rootScope.FT.creatorApp&&r[10]&&r[0].pin?"mgPlayerJSPreview_guide-details-draft-pin":"")))&&attr(c,"class",y),rootScope.FT.isPlayer&&L.p(r,t),r[0].media_files[0]&&rootScope.isMicroPlayer?M?(M.p(r,t),1&t[0]&&transition_in(M,1)):((M=create_if_block_4$b(r)).c(),transition_in(M,1),M.m(P,null)):M&&(group_outros(),transition_out(M,1,1,()=>{M=null}),check_outros()),(!x||1&t[0]&&S!==(S="mgPlayerJSPreview_guide-row-action-wrapper_"+r[0].tour_id))&&attr(P,"id",S),(b=16777216&t[0]?0<r[24].length&&rootScope.isOwnerOrAppAdmin()&&rootScope.FT.creatorApp&&!rootScope.automationSelectionMode&&!rootScope.hideMirrorAppCtrl()&&!rootScope.isDesktopApp():b)?I?I.p(r,t):((I=create_if_block_3$c(r)).c(),I.m(C.parentNode,C)):I&&(I.d(1),I=null),(z=16777217&t[0]?0<r[24].length&&rootScope.isOwnerOrAppAdmin()&&rootScope.FT.creatorApp&&!rootScope.automationSelectionMode&&!rootScope.hideMirrorAppCtrl()&&r[0].pin:z)?X?X.p(r,t):((X=create_if_block_2$e(r)).c(),X.m(k.parentNode,k)):X&&(X.d(1),X=null),j&&D.p(r,t)},i(e){x||(transition_in(M),transition_in(D),x=!0)},o(e){transition_out(M),transition_out(D),x=!1},d(e){e&&(detach(i),detach(w),detach(C),detach(k),detach(W),detach(T)),A&&A.d(),J&&J.d(),G&&G.d(),$&&$.d(),E&&E.d(),L&&L.d(),M&&M.d(),I&&I.d(e),X&&X.d(e),D&&D.d(e),q=!1,Z()}}}function getCircle(e,t,r,i,a){t=parseInt(t),r=parseInt(r),i=parseInt(i);var o,n,s,l,c=3,p=19*Math.PI*2,d=(p-(c=p-10*t<1?p/t/1.2:c)*t)/t;return`<circle class="${e}" cx="20" cy="20" r="19" fill="#F8F8FB" stroke="#ACADC1" stroke-width="1.4" stroke-dashoffset="${p/4-c/2+i*(c+d)}" stroke-dasharray="${1!==t?(o=r,n=d,s=p,l=c,new Array(o).fill(void 0).map(function(e,t){return"".concat(n," ").concat(t===o-1?s-o*(l+n)+l:l)}).join(" ")):void 0}"></circle>`}function instance$j(e,t,r){let i=t.tour,a=t.searchKeyword,o=t.replaceKeyword,n=rootScope.isTooltip(i),s=GmCXt.isBotGuide(i),l=rootScope.isHelpArticle(i),c=GmCXt.isWBC(),p=GmCXt.getAppSetting("defaultPlayAction"),d=GmCXt.isFalse(p),u=rootScope.getDefaultPlayAction(i),g=rootScope.FT.creatorApp&&!rootScope.isUserRole()&&!rootScope.exportEnabled&&i.parent_tour_id,m=rootScope.isDesktopApp(),h=GmCXt.isOnboarding(i),_=GmCXt.isGuide(i),f=rootScope.isCADGuide(i),v=rootScope.isTrackingGuide(i),y=rootScope.isMobileGuide(i),P=GmCXt.getDefaultGuideIcon(),S=i.tour_type.indexOf("beacon_tour"),w=rootScope.showPlayOption(rootScope.playGuideMe,i),b=rootScope.showPlayOption(rootScope.playSlideshow,i),C=rootScope.showPlayOption(rootScope.playTestMe,i)&&!GmCXt.branchStepExist(i),k=rootScope.showPlayOption(rootScope.playVLab,i)&&!GmCXt.isOnboarding(i)&&!GmCXt.branchStepExist(i),T=rootScope.showPlayOption(rootScope.playAuto,i)&&!GmCXt.isOnboarding(i),x=createEventDispatcher(),A,J=[],G=GmCXt.getCdnSign();t=rootScope.getCategory(i.category_id);let $=Gm.breadCrumb.subscribe(e=>{r(24,J=e)});function E(e,t,r){"pin"===t?rootScope.pinTourToTop(e,t,(e,t)=>{x("updatePinnedTours",{tour:e,action:t})}):rootScope.pinTourToTop(e,t,(e,t)=>{x("updatePinnedTours",{tour:e,action:t})})}function L(e){var t,r;return!!GmCXt.tourActivity&&(r=GmCXt.tourActivity["t:"+e.tour_id],t=e.tour_settings.play_structure||GmCXt.getGuidePlayStructure(e),r=GmCXt.getTail(r,t,null,e),rootScope.getStepFromTour(r,e))}onDestroy(()=>{$()});function M(e){return rootScope.isOnlySurveyGuide(i)||GmCXt.isBotGuide(i)||d?"":void rootScope.play(i,!1)}return e.$$set=e=>{"tour"in e&&r(0,i=e.tour),"searchKeyword"in e&&r(1,a=e.searchKeyword),"replaceKeyword"in e&&r(2,o=e.replaceKeyword)},e.$$.update=()=>{9&e.$$.dirty[0]&&(r(4,n=rootScope.isTooltip(i)),r(5,s=GmCXt.isBotGuide(i)),r(6,l=rootScope.isHelpArticle(i)),r(7,c=GmCXt.isWBC()),r(3,p=GmCXt.getAppSetting("defaultPlayAction")),r(8,d=GmCXt.isFalse(p)),r(9,u=rootScope.getDefaultPlayAction(i)),r(10,g=rootScope.FT.creatorApp&&!rootScope.isUserRole()&&!rootScope.exportEnabled&&i.parent_tour_id),r(11,m=rootScope.isDesktopApp()),r(12,h=GmCXt.isOnboarding(i)),r(13,_=GmCXt.isGuide(i)),r(14,f=rootScope.isCADGuide(i)),r(15,v=rootScope.isTrackingGuide(i)),r(16,y=rootScope.isMobileGuide(i)),r(17,P=GmCXt.getDefaultGuideIcon()),r(18,S=i.tour_type.indexOf("beacon_tour")),r(25,G=GmCXt.getCdnSign()),r(19,w=rootScope.showPlayOption(rootScope.playGuideMe,i)),r(20,b=rootScope.showPlayOption(rootScope.playSlideshow,i)),r(21,C=rootScope.showPlayOption(rootScope.playTestMe,i)&&!GmCXt.branchStepExist(i)),r(22,k=rootScope.showPlayOption(rootScope.playVLab,i)&&!GmCXt.isOnboarding(i)&&!GmCXt.branchStepExist(i)),r(23,T=rootScope.showPlayOption(rootScope.playAuto,i)&&!GmCXt.isOnboarding(i)))},[i,a,o,p,n,s,l,c,d,u,g,m,h,_,f,v,y,P,S,w,b,C,k,T,J,G,t,E,()=>{if(!GmCXt.isEmpty(i)&&rootScope.isPlayedTour(i.tour_id)&&!1===L(i))return!0},()=>{if(!GmCXt.isEmpty(i)&&!1!==L(i)&&rootScope.getDefaultPlayAction(i)===rootScope.playGuideMe)return!0},M,e=>{e.steps.filter(function(e){return"inline"===e.step_type}).length?new TestMeWidget({target:document.body,props:{showTestMe:!0,tour:e}}):rootScope.showPopup(rootScope.labels.noInappStepInGuide)},e=>{e=JSON.parse(JSON.stringify(e));"bot"===e.tour_type||rootScope.automationSelectionMode||("help_article"===e.tour_type?window.open(e.tour_settings.articleUrl,"_blank"):rootScope.isMicroPlayer||rootScope.isWBMicroPlayer?rootScope.play(e):(rootScope.trackSearchActivity(!0),rootScope.clearSearchInput(),rootScope.getBreadcrumsCategories(e),rootScope.FT.creatorApp&&(e.steps=[]),Gm.currentTour.set(e),rootScope.setCurrentPage("stepview")))},function(){var e,t="";if(GmCXt.FT.isPlayer){if(GmCXt.branchStepExist(i)?t+='<circle cx="20" cy="20" r="19" fill="#F8F8FB" stroke="#ACADC1" stroke-width="1.4"></circle>':(e=parseInt(i.step_count),A=rootScope.playedSteps?rootScope.getPlayedStepCount(i):0,e&&!A&&(t=getCircle("mgPlayerJSPreview_dashes-green",e,e,e),1===e)&&(t='<circle class="mgPlayerJSPreview_dashes-green" cx="20" cy="20" r="19" fill="#F8F8FB" stroke="#ACADC1" stroke-width="1.4"></circle>'),e&&A&&(A===e&&(t=getCircle("mgPlayerJSPreview_dashes-gray",A,A,A),1===A)&&(t='<circle class="mgPlayerJSPreview_dashes-gray" cx="20" cy="20" r="19" fill="#F8F8FB" stroke="#ACADC1" stroke-width="1.4"></circle>'),A!==e)&&(t=(t+=getCircle("mgPlayerJSPreview_dashes-green",e,e-A,e-A))+getCircle("mgPlayerJSPreview_dashes-gray",e,A,e))),u===rootScope.playSlideshow||"Default"===i.tour_settings.defaultPlayAction&&p===rootScope.playSlideshow||m)return t+'<path d="M25.1375 15.9427H23.1482C22.5161 15.359 21.3251 15 19.9999 15C18.6747 15 17.4837 15.359 16.8516 15.9427H14.8623C12.1812 15.9427 10 18.1985 10 20.9713C10 23.7441 12.1812 26 14.8623 26C17.5434 26 19.7246 23.7441 19.7246 20.9713C19.7246 20.9346 19.7242 20.8979 19.7235 20.8611H20.2764C20.2756 20.8979 20.2753 20.9346 20.2753 20.9713C20.2753 23.7441 22.4566 26 25.1377 26C27.8188 26 30 23.7441 30 20.9713C29.9999 18.1985 27.8186 15.9427 25.1375 15.9427ZM14.8623 23.9552C13.2715 23.9552 11.9772 22.6166 11.9772 20.9713C11.9772 19.3261 13.2715 17.9875 14.8623 17.9875C16.4532 17.9875 17.7475 19.3261 17.7475 20.9713C17.7475 22.6166 16.4532 23.9552 14.8623 23.9552ZM21.3065 17.89H18.6926C18.3824 17.89 18.1303 17.6286 18.1303 17.3077C18.1303 16.9869 18.3824 16.7254 18.6926 16.7254H21.3065C21.6173 16.7254 21.8695 16.9869 21.8695 17.3077C21.8695 17.6285 21.6173 17.89 21.3065 17.89ZM25.1375 23.9552C23.5466 23.9552 22.2523 22.6166 22.2523 20.9713C22.2523 19.3261 23.5466 17.9875 25.1375 17.9875C26.7282 17.9875 28.0226 19.3261 28.0226 20.9713C28.0226 22.6166 26.7283 23.9552 25.1375 23.9552Z" fill="#ACADC1" stroke-width="0" />';if(u===rootScope.playAuto||"Default"===i.tour_settings.defaultPlayAction&&p===rootScope.playAuto&&!m)return t+'<path d="M15.8441 24.4972C14.4834 24.4972 13.3803 25.652 13.3803 27.0765V29H14.6452V27.6678C14.6452 26.5993 15.4726 25.7332 16.4931 25.7332H23.5081C24.5287 25.7332 25.356 26.5993 25.356 27.6678V29H26.6211V27.0765C26.6211 25.652 25.518 24.4972 24.1573 24.4972H15.8441Z" fill="#ACADC1" stroke-width="0" /><path d="M12 18.8136C12 18.1065 12.5475 17.5333 13.2229 17.5333H13.6867V20.0938H13.2229C12.5475 20.0938 12 19.5206 12 18.8136Z" fill="#ACADC1" stroke-width="0" /><path d="M28 18.8136C28 18.1065 27.4525 17.5333 26.7771 17.5333H26.3133V20.0938H26.7771C27.4525 20.0938 28 19.5206 28 18.8136Z" fill="#ACADC1" stroke-width="0" /><path d="M19.7887 18.8136C19.7887 19.5206 19.2412 20.0938 18.5659 20.0938C17.8905 20.0938 17.343 19.5206 17.343 18.8136C17.343 18.1065 17.8905 17.5333 18.5659 17.5333C19.2412 17.5333 19.7887 18.1065 19.7887 18.8136Z" fill="#ACADC1" stroke-width="0" /><path d="M22.7414 18.8136C22.7414 19.5206 22.1939 20.0938 21.5186 20.0938C20.8432 20.0938 20.2957 19.5206 20.2957 18.8136C20.2957 18.1065 20.8432 17.5333 21.5186 17.5333C22.1939 17.5333 22.7414 18.1065 22.7414 18.8136Z" fill="#ACADC1" stroke-width="0" /><path d="M19.494 13.1606C19.494 13.0894 19.5492 13.0317 19.6172 13.0317H20.7202C20.7882 13.0317 20.8434 13.0894 20.8434 13.1606V15.6804H19.494V13.1606Z" fill="#ACADC1" stroke-width="0" /><path d="M18.4948 14.6198H17.279C15.9182 14.6198 14.8151 15.7746 14.8151 17.1992V20.5163C14.8151 21.9409 15.9182 23.0957 17.279 23.0957H22.7247C24.0855 23.0957 25.1886 21.9409 25.1886 20.5163V17.1992C25.1886 15.7746 24.0855 14.6198 22.7247 14.6198H21.8448V15.592H22.2026C23.2232 15.592 24.0505 16.4581 24.0505 17.5265V20.191C24.0505 21.2594 23.2232 22.1255 22.2026 22.1255H17.802C16.7815 22.1255 15.9541 21.2594 15.9541 20.191V17.5265C15.9541 16.4581 16.7815 15.592 17.802 15.592H18.4948V14.6198Z" fill="#ACADC1" stroke-width="0" /><path d="M20.8434 11.7063C20.8434 12.0964 20.5413 12.4127 20.1687 12.4127C19.7961 12.4127 19.494 12.0964 19.494 11.7063C19.494 11.3162 19.7961 11 20.1687 11C20.5413 11 20.8434 11.3162 20.8434 11.7063Z" fill="#ACADC1" stroke-width="0" />';if(!GmCXt.branchStepExist(i)&&u===rootScope.playVLab||"Default"===i.tour_settings.defaultPlayAction&&p===rootScope.playVLab&&!m)return t+'<path d="M13 15C13 15.3956 13.1173 15.7822 13.3371 16.1111C13.5568 16.44 13.8692 16.6964 14.2346 16.8478C14.6001 16.9991 15.0022 17.0387 15.3902 16.9616C15.7781 16.8844 16.1345 16.6939 16.4142 16.4142C16.6939 16.1345 16.8844 15.7781 16.9616 15.3902C17.0387 15.0022 16.9991 14.6001 16.8478 14.2346C16.6964 13.8692 16.44 13.5568 16.1111 13.3371C15.7822 13.1173 15.3956 13 15 13C14.4697 13.0004 13.9613 13.2113 13.5863 13.5863C13.2113 13.9613 13.0005 14.4697 13 15ZM16.1554 15C16.1554 15.2285 16.0876 15.4519 15.9607 15.6419C15.8337 15.8319 15.6533 15.98 15.4422 16.0675C15.231 16.1549 14.9987 16.1778 14.7746 16.1332C14.5505 16.0886 14.3446 15.9786 14.183 15.817C14.0214 15.6554 13.9114 15.4495 13.8668 15.2254C13.8222 15.0013 13.8451 14.769 13.9325 14.5578C14.02 14.3467 14.1681 14.1663 14.3581 14.0393C14.5481 13.9124 14.7715 13.8446 15 13.8446C15.3063 13.845 15.5999 13.9669 15.8165 14.1835C16.0331 14.4001 16.155 14.6937 16.1554 15Z" fill="#ACADC1" stroke-width="0.2" /><path d="M13 15C13 15.3956 13.1173 15.7822 13.3371 16.1111C13.5568 16.44 13.8692 16.6964 14.2346 16.8478C14.6001 16.9991 15.0022 17.0387 15.3902 16.9616C15.7781 16.8844 16.1345 16.6939 16.4142 16.4142C16.6939 16.1345 16.8844 15.7781 16.9616 15.3902C17.0387 15.0022 16.9991 14.6001 16.8478 14.2346C16.6964 13.8692 16.44 13.5568 16.1111 13.3371C15.7822 13.1173 15.3956 13 15 13C14.4697 13.0004 13.9613 13.2113 13.5863 13.5863C13.2113 13.9613 13.0005 14.4697 13 15ZM16.1554 15C16.1554 15.2285 16.0876 15.4519 15.9607 15.6419C15.8337 15.8319 15.6533 15.98 15.4422 16.0675C15.231 16.1549 14.9987 16.1778 14.7746 16.1332C14.5505 16.0886 14.3446 15.9786 14.183 15.817C14.0214 15.6554 13.9114 15.4495 13.8668 15.2254C13.8222 15.0013 13.8451 14.769 13.9325 14.5578C14.02 14.3467 14.1681 14.1663 14.3581 14.0393C14.5481 13.9124 14.7715 13.8446 15 13.8446C15.3063 13.845 15.5999 13.9669 15.8165 14.1835C16.0331 14.4001 16.155 14.6937 16.1554 15Z" stroke="#ACADC1" stroke-width="0.2" /><path d="M12.3543 21.6855C12.3779 21.9178 12.452 22.1407 12.5706 22.3356C12.6891 22.5306 12.8486 22.692 13.036 22.8066L13.5899 27.214C13.6125 27.4302 13.7076 27.6298 13.8568 27.7748C14.0061 27.9197 14.1992 27.9999 14.3994 28H15.3197C15.52 27.9998 15.7133 27.9195 15.8626 27.7742C16.012 27.6289 16.1069 27.4289 16.1292 27.2124L16.4019 24.5115L16.9444 20.0023L17.5522 20.5474C17.7246 20.7022 17.9405 20.7881 18.164 20.7909C18.3875 20.7937 18.6051 20.7132 18.7807 20.5628L20.6128 18.9923C20.805 18.8312 20.9364 18.5992 20.9821 18.3401C21.0279 18.081 20.985 17.8126 20.8613 17.5855C20.7892 17.4573 20.6929 17.3471 20.5788 17.2622C20.4648 17.1774 20.3354 17.1198 20.1993 17.0932C20.0633 17.0667 19.9236 17.0718 19.7895 17.1082C19.6553 17.1446 19.5298 17.2115 19.4212 17.3044L18.1885 18.3607L16.9444 17.2442C16.7693 17.087 16.5494 17.0007 16.3223 17.0002H15.7543C15.6912 16.9981 15.6285 17.0116 15.5709 17.0397C15.5133 17.0677 15.4624 17.1097 15.4219 17.1624L14.8538 17.9252L14.3 17.1701C14.2614 17.1169 14.2122 17.074 14.1561 17.0446C14.1 17.0151 14.0384 17 13.9762 17.0002H13.5402C13.3226 17.0003 13.1076 17.0505 12.9092 17.1475C12.7108 17.2444 12.5336 17.386 12.3891 17.5628C12.2446 17.7396 12.1362 17.9476 12.0709 18.1733C12.0057 18.3989 11.9851 18.637 12.0106 18.8719L12.3543 21.6855ZM12.9224 18.075C12.9994 17.9782 13.0947 17.9004 13.2018 17.8471C13.3088 17.7938 13.4252 17.7662 13.543 17.7662H13.8356L14.4718 18.6294C14.5185 18.6931 14.5778 18.7446 14.6453 18.7799C14.7128 18.8153 14.7867 18.8337 14.8617 18.8337C14.9366 18.8337 15.0105 18.8153 15.078 18.7799C15.1455 18.7446 15.2048 18.6931 15.2515 18.6294L15.8892 17.7646H16.3238C16.386 17.7642 16.4463 17.7878 16.4942 17.831L17.9641 19.1545C18.0273 19.2099 18.1059 19.2401 18.1871 19.2401C18.2682 19.2401 18.3469 19.2099 18.41 19.1545L19.8686 17.9052C19.9159 17.8647 19.9745 17.8429 20.0347 17.8434C20.081 17.8434 20.1264 17.8564 20.1667 17.881C20.207 17.9056 20.2408 17.941 20.2648 17.9839C20.2975 18.0499 20.307 18.1265 20.2916 18.1995C20.2762 18.2725 20.2369 18.3369 20.181 18.3808L18.3404 19.9559C18.2924 19.9966 18.2331 20.0187 18.1722 20.0187C18.1112 20.0187 18.052 19.9966 18.0038 19.9559L16.9018 18.9661C16.8529 18.9222 16.7941 18.8933 16.7315 18.8825C16.6689 18.8717 16.6048 18.8792 16.5458 18.9045C16.4869 18.9297 16.4352 18.9716 16.3961 19.0259C16.3571 19.0802 16.3321 19.1448 16.3238 19.2132L15.6918 24.4204L15.4248 27.1275C15.422 27.1553 15.4099 27.1811 15.3908 27.1999C15.3717 27.2187 15.3469 27.2292 15.3211 27.2294H14.3994C14.3724 27.2287 14.3467 27.2171 14.3273 27.1968C14.3078 27.1765 14.296 27.149 14.2943 27.1198L13.7134 22.4947C13.7046 22.4256 13.6786 22.3603 13.6383 22.3059C13.5981 22.2515 13.545 22.21 13.4848 22.1859C13.3697 22.1404 13.2687 22.0608 13.1934 21.9559C13.118 21.851 13.0714 21.7252 13.0587 21.5929L12.7093 18.7777C12.6962 18.6506 12.7083 18.5221 12.7448 18.4006C12.7813 18.2791 12.8414 18.1675 12.9209 18.0735L12.9224 18.075Z" fill="#ACADC1" stroke-width="0.2" /><path d="M12.3543 21.6855C12.3779 21.9178 12.452 22.1407 12.5706 22.3356C12.6891 22.5306 12.8486 22.692 13.036 22.8066L13.5899 27.214C13.6125 27.4302 13.7076 27.6298 13.8568 27.7748C14.0061 27.9197 14.1992 27.9999 14.3994 28H15.3197C15.52 27.9998 15.7133 27.9195 15.8626 27.7742C16.012 27.6289 16.1069 27.4289 16.1292 27.2124L16.4019 24.5115L16.9444 20.0023L17.5522 20.5474C17.7246 20.7022 17.9405 20.7881 18.164 20.7909C18.3875 20.7937 18.6051 20.7132 18.7807 20.5628L20.6128 18.9923C20.805 18.8312 20.9364 18.5992 20.9821 18.3401C21.0279 18.081 20.985 17.8126 20.8613 17.5855C20.7892 17.4573 20.6929 17.3471 20.5788 17.2622C20.4648 17.1774 20.3354 17.1198 20.1993 17.0932C20.0633 17.0667 19.9236 17.0718 19.7895 17.1082C19.6553 17.1446 19.5298 17.2115 19.4212 17.3044L18.1885 18.3607L16.9444 17.2442C16.7693 17.087 16.5494 17.0007 16.3223 17.0002H15.7543C15.6912 16.9981 15.6285 17.0116 15.5709 17.0397C15.5133 17.0677 15.4624 17.1097 15.4219 17.1624L14.8538 17.9252L14.3 17.1701C14.2614 17.1169 14.2122 17.074 14.1561 17.0446C14.1 17.0151 14.0384 17 13.9762 17.0002H13.5402C13.3226 17.0003 13.1076 17.0505 12.9092 17.1475C12.7108 17.2444 12.5336 17.386 12.3891 17.5628C12.2446 17.7396 12.1362 17.9476 12.0709 18.1733C12.0057 18.3989 11.9851 18.637 12.0106 18.8719L12.3543 21.6855ZM12.9224 18.075C12.9994 17.9782 13.0947 17.9004 13.2018 17.8471C13.3088 17.7938 13.4252 17.7662 13.543 17.7662H13.8356L14.4718 18.6294C14.5185 18.6931 14.5778 18.7446 14.6453 18.7799C14.7128 18.8153 14.7867 18.8337 14.8617 18.8337C14.9366 18.8337 15.0105 18.8153 15.078 18.7799C15.1455 18.7446 15.2048 18.6931 15.2515 18.6294L15.8892 17.7646H16.3238C16.386 17.7642 16.4463 17.7878 16.4942 17.831L17.9641 19.1545C18.0273 19.2099 18.1059 19.2401 18.1871 19.2401C18.2682 19.2401 18.3469 19.2099 18.41 19.1545L19.8686 17.9052C19.9159 17.8647 19.9745 17.8429 20.0347 17.8434C20.081 17.8434 20.1264 17.8564 20.1667 17.881C20.207 17.9056 20.2408 17.941 20.2648 17.9839C20.2975 18.0499 20.307 18.1265 20.2916 18.1995C20.2762 18.2725 20.2369 18.3369 20.181 18.3808L18.3404 19.9559C18.2924 19.9966 18.2331 20.0187 18.1722 20.0187C18.1112 20.0187 18.052 19.9966 18.0038 19.9559L16.9018 18.9661C16.8529 18.9222 16.7941 18.8933 16.7315 18.8825C16.6689 18.8717 16.6048 18.8792 16.5458 18.9045C16.4869 18.9297 16.4352 18.9716 16.3961 19.0259C16.3571 19.0802 16.3321 19.1448 16.3238 19.2132L15.6918 24.4204L15.4248 27.1275C15.422 27.1553 15.4099 27.1811 15.3908 27.1999C15.3717 27.2187 15.3469 27.2292 15.3211 27.2294H14.3994C14.3724 27.2287 14.3467 27.2171 14.3273 27.1968C14.3078 27.1765 14.296 27.149 14.2943 27.1198L13.7134 22.4947C13.7046 22.4256 13.6786 22.3603 13.6383 22.3059C13.5981 22.2515 13.545 22.21 13.4848 22.1859C13.3697 22.1404 13.2687 22.0608 13.1934 21.9559C13.118 21.851 13.0714 21.7252 13.0587 21.5929L12.7093 18.7777C12.6962 18.6506 12.7083 18.5221 12.7448 18.4006C12.7813 18.2791 12.8414 18.1675 12.9209 18.0735L12.9224 18.075Z" stroke="#ACADC1" stroke-width="0.2" /><path d="M18 14.3542V16.9043C18 16.9982 18.0395 17.0883 18.1098 17.1547C18.18 17.2212 18.2754 17.2585 18.3747 17.2585C18.4741 17.2585 18.5695 17.2212 18.6397 17.1547C18.71 17.0883 18.7495 16.9982 18.7495 16.9043V14.707H26.2565V21.6617H18.3747C18.2754 21.6617 18.18 21.699 18.1098 21.7654C18.0395 21.8319 18 21.9219 18 22.0159C18 22.1098 18.0395 22.1999 18.1098 22.2663C18.18 22.3328 18.2754 22.3701 18.3747 22.3701H22.1223V24.7275H19.7808C19.6812 24.7275 19.5834 24.7532 19.4981 24.8019C19.4127 24.8506 19.343 24.9204 19.2966 25.0038L18.4617 26.48C18.4387 26.5211 18.4244 26.5661 18.4198 26.6124C18.4152 26.6587 18.4202 26.7055 18.4347 26.7499C18.4492 26.7944 18.4728 26.8357 18.5042 26.8716C18.5355 26.9074 18.5741 26.9371 18.6176 26.9589C18.6611 26.9806 18.7087 26.9941 18.7577 26.9984C18.8067 27.0028 18.8562 26.998 18.9032 26.9844C18.9503 26.9707 18.994 26.9484 19.0319 26.9187C19.0698 26.889 19.1012 26.8526 19.1243 26.8115L19.8947 25.4373H25.1038L25.8742 26.8115C25.8973 26.8526 25.9287 26.889 25.9666 26.9187C26.0045 26.9484 26.0482 26.9707 26.0953 26.9844C26.1423 26.998 26.1918 27.0028 26.2408 26.9984C26.2898 26.9941 26.3374 26.9806 26.3809 26.9589C26.4244 26.9371 26.463 26.9074 26.4943 26.8716C26.5257 26.8357 26.5493 26.7944 26.5638 26.7499C26.5783 26.7055 26.5833 26.6587 26.5787 26.6124C26.5741 26.5661 26.5598 26.5211 26.5368 26.48L25.7094 25.0038C25.6629 24.9204 25.5933 24.8506 25.508 24.8019C25.4227 24.7532 25.3248 24.7275 25.2252 24.7275H22.8777V22.3701H26.6252C26.7246 22.3701 26.82 22.3328 26.8902 22.2663C26.9605 22.1999 27 22.1098 27 22.0159V14.3542C27 14.2602 26.9605 14.1702 26.8902 14.1037C26.82 14.0373 26.7246 14 26.6252 14H18.3747C18.2754 14 18.18 14.0373 18.1098 14.1037C18.0395 14.1702 18 14.2602 18 14.3542Z" fill="#ACADC1" stroke-width="0.2" /><path d="M18 14.3542V16.9043C18 16.9982 18.0395 17.0883 18.1098 17.1547C18.18 17.2212 18.2754 17.2585 18.3747 17.2585C18.4741 17.2585 18.5695 17.2212 18.6397 17.1547C18.71 17.0883 18.7495 16.9982 18.7495 16.9043V14.707H26.2565V21.6617H18.3747C18.2754 21.6617 18.18 21.699 18.1098 21.7654C18.0395 21.8319 18 21.9219 18 22.0159C18 22.1098 18.0395 22.1999 18.1098 22.2663C18.18 22.3328 18.2754 22.3701 18.3747 22.3701H22.1223V24.7275H19.7808C19.6812 24.7275 19.5834 24.7532 19.4981 24.8019C19.4127 24.8506 19.343 24.9204 19.2966 25.0038L18.4617 26.48C18.4387 26.5211 18.4244 26.5661 18.4198 26.6124C18.4152 26.6587 18.4202 26.7055 18.4347 26.7499C18.4492 26.7944 18.4728 26.8357 18.5042 26.8716C18.5355 26.9074 18.5741 26.9371 18.6176 26.9589C18.6611 26.9806 18.7087 26.9941 18.7577 26.9984C18.8067 27.0028 18.8562 26.998 18.9032 26.9844C18.9503 26.9707 18.994 26.9484 19.0319 26.9187C19.0698 26.889 19.1012 26.8526 19.1243 26.8115L19.8947 25.4373H25.1038L25.8742 26.8115C25.8973 26.8526 25.9287 26.889 25.9666 26.9187C26.0045 26.9484 26.0482 26.9707 26.0953 26.9844C26.1423 26.998 26.1918 27.0028 26.2408 26.9984C26.2898 26.9941 26.3374 26.9806 26.3809 26.9589C26.4244 26.9371 26.463 26.9074 26.4943 26.8716C26.5257 26.8357 26.5493 26.7944 26.5638 26.7499C26.5783 26.7055 26.5833 26.6587 26.5787 26.6124C26.5741 26.5661 26.5598 26.5211 26.5368 26.48L25.7094 25.0038C25.6629 24.9204 25.5933 24.8506 25.508 24.8019C25.4227 24.7532 25.3248 24.7275 25.2252 24.7275H22.8777V22.3701H26.6252C26.7246 22.3701 26.82 22.3328 26.8902 22.2663C26.9605 22.1999 27 22.1098 27 22.0159V14.3542C27 14.2602 26.9605 14.1702 26.8902 14.1037C26.82 14.0373 26.7246 14 26.6252 14H18.3747C18.2754 14 18.18 14.0373 18.1098 14.1037C18.0395 14.1702 18 14.2602 18 14.3542Z" stroke="#ACADC1" stroke-width="0.2" />'}else t+='<circle cx="20" cy="20" r="19" fill="#F8F8FB" stroke="#ACADC1" stroke-width="1.4"></circle>';return t+='<path d="M12 27.555C12 27.555 20.838 24.372 22.606 22.606C24.374 20.838 27.555 12 27.555 12C27.555 12 18.717 15.183 16.95 16.95C15.183 18.717 12 27.555 12 27.555ZM18.364 18.364L21.192 21.192C21.899 21.899 14.829 24.727 14.829 24.727C14.829 24.727 17.657 17.657 18.364 18.364Z" fill="#ACADC1" stroke="#ACADC1" stroke-width="0" />'},function(e,t,r){var i;return t?([t,i]=(t=t.trim()).split(","),t=new RegExp(t,"gi"),e.replace(t,e=>`<span class="mgPlayerJSPreview_text-highlighted">${r||e}</span>`)):e},()=>M(),e=>{e.target.src=P},e=>{e.target.src=P},()=>M(rootScope.FT.isPlayer),e=>E(i,"pin"),e=>E(i,"unpin")]}class TourView extends SvelteComponent{constructor(e){super(),init(this,e,instance$j,create_fragment$k,safe_not_equal,{tour:0,searchKeyword:1,replaceKeyword:2},null,[-1,-1])}}function get_each_context$7(e,t,r){e=e.slice();return e[35]=t[r],e}function create_else_block$8(t){let a,i,o=ensure_array_like(t[0].sortDataByActiveFilter(t[1],"tour_title",t[3])),n=[];for(let e=0;e<o.length;e+=1)n[e]=create_each_block$7(get_each_context$7(t,o,e));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();a=empty()},m(t,r){for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,r);insert(t,a,r),i=!0},p(t,r){if(11&r[0]){o=ensure_array_like(t[0].sortDataByActiveFilter(t[1],"tour_title",t[3]));let e;for(e=0;e<o.length;e+=1){var i=get_each_context$7(t,o,e);n[e]?(n[e].p(i,r),transition_in(n[e],1)):(n[e]=create_each_block$7(i),n[e].c(),transition_in(n[e],1),n[e].m(a.parentNode,a))}for(group_outros(),e=o.length;e<n.length;e+=1)(e=>transition_out(n[e],1,1,()=>{n[e]=null}))(e);check_outros()}},i(e){if(!i){for(let e=0;e<o.length;e+=1)transition_in(n[e]);i=!0}},o(e){n=n.filter(Boolean);for(let e=0;e<n.length;e+=1)transition_out(n[e]);i=!1},d(e){e&&detach(a),destroy_each(n,e)}}}function create_if_block$g(e){let r,i,a,o=e[0].svgs.no_guides_image+"",n,s,l=!e[0].search&&create_if_block_2$d(e),c=e[0].search&&create_if_block_1$e(e);return{c(){r=element("div"),i=element("div"),a=element("div"),n=space(),l&&l.c(),s=space(),c&&c.c(),attr(a,"class","mgPlayerJSPreview_no-guide-image-cartoon"),attr(i,"class","mgPlayerJSPreview_no-guide-image-wrapper mgPlayerJSPreview_no-margin"),attr(r,"class","no-tour-message-wrapper mgPlayerJSPreview_position-center"),toggle_class(r,"mgPlayerJSPreview_margin-t-50",!e[0].isMicroPlayer)},m(e,t){insert(e,r,t),append(r,i),append(i,a),a.innerHTML=o,append(r,n),l&&l.m(r,null),append(r,s),c&&c.m(r,null)},p(e,t){1&t[0]&&o!==(o=e[0].svgs.no_guides_image+"")&&(a.innerHTML=o),e[0].search?l&&(l.d(1),l=null):l?l.p(e,t):((l=create_if_block_2$d(e)).c(),l.m(r,s)),e[0].search?c?c.p(e,t):((c=create_if_block_1$e(e)).c(),c.m(r,null)):c&&(c.d(1),c=null),1&t[0]&&toggle_class(r,"mgPlayerJSPreview_margin-t-50",!e[0].isMicroPlayer)},i:noop,o:noop,d(e){e&&detach(r),l&&l.d(),c&&c.d()}}}function create_each_block$7(e){let i,a,r,o,n;return a=new TourView({props:{tour:e[35]}}),{c(){i=element("div"),create_component(a.$$.fragment),r=space(),attr(i,"class",o="tour-item mgPlayerJSPreview_guide-list-view "+(e[0].isMicroPlayer?"mgPlayerJSPreview_guide-list-view-mplayer":""))},m(e,t){insert(e,i,t),mount_component(a,i,null),append(i,r),n=!0},p(e,t){var r={};11&t[0]&&(r.tour=e[35]),a.$set(r),(!n||1&t[0]&&o!==(o="tour-item mgPlayerJSPreview_guide-list-view "+(e[0].isMicroPlayer?"mgPlayerJSPreview_guide-list-view-mplayer":"")))&&attr(i,"class",o)},i(e){n||(transition_in(a.$$.fragment,e),n=!0)},o(e){transition_out(a.$$.fragment,e),n=!1},d(e){e&&detach(i),destroy_component(a)}}}function create_if_block_2$d(e){let r,i,a=e[0].labels.noGuidesOnThisPage+"",o;return{c(){r=element("div"),i=element("div"),o=text(a),attr(i,"class","mgPlayerJSPreview_no-guide-msg"),attr(i,"tabindex","0"),attr(r,"class","mgPlayerJSPreview_no-guide-text-wrapper")},m(e,t){insert(e,r,t),append(r,i),append(i,o)},p(e,t){1&t[0]&&a!==(a=e[0].labels.noGuidesOnThisPage+"")&&set_data(o,a)},d(e){e&&detach(r)}}}function create_if_block_1$e(e){let r,i,a=e[0].labels.noGuideAvailableFor+"",o,n,s,l=e[0].labels.tryModifyingYourSearch+"",c;return{c(){r=element("div"),i=element("div"),o=text(a),n=space(),s=element("div"),c=text(l),attr(i,"class","mgPlayerJSPreview_no-guide-msg"),attr(i,"tabindex","0"),attr(s,"class","mgPlayerJSPreview_instruction-add-category"),attr(s,"tabindex","0"),attr(r,"class","mgPlayerJSPreview_no-guide-text-wrapper mgPlayerJSPreview_no-guide-text-search-wrapper")},m(e,t){insert(e,r,t),append(r,i),append(i,o),append(r,n),append(r,s),append(s,c)},p(e,t){1&t[0]&&a!==(a=e[0].labels.noGuideAvailableFor+"")&&set_data(o,a),1&t[0]&&l!==(l=e[0].labels.tryModifyingYourSearch+"")&&set_data(c,l)},d(e){e&&detach(r)}}}function create_fragment$j(e){let i,a,o,r,n=[create_if_block$g,create_else_block$8],s=[];function l(e){return e[2]&&e[1].length<1&&e[4]?0:1}return a=l(e),o=s[a]=n[a](e),{c(){i=element("div"),o.c(),attr(i,"class","category-list")},m(e,t){insert(e,i,t),s[a].m(i,null),r=!0},p(e,t){let r=a;(a=l(e))===r?s[a].p(e,t):(group_outros(),transition_out(s[r],1,1,()=>{s[r]=null}),check_outros(),(o=s[a])?o.p(e,t):(o=s[a]=n[a](e)).c(),transition_in(o,1),o.m(i,null))},i(e){r||(transition_in(o),r=!0)},o(e){transition_out(o),r=!1},d(e){e&&detach(i),s[a].d()}}}let limit$2=50;function instance$i(e,t,r){let i=[],a,o=[],n=[],s,l="",c,p=!1,d=!1,u=!1,g=writable(!1),m,h=Gm.CurrentPageTours.subscribe(e=>{r(1,o=e)}),_=Gm.selectedLang.subscribe(e=>{GmCXt.getLXPLang()||k()});function f(){var e=mg$$1("#ege-header").innerHeight()||0,t=mg$$1("#footer").innerHeight()||0,r=mg$$1(".list-page-header").innerHeight()||0,t=window.innerHeight-t-e-r+5;mg$$1(".category-list").css({height:t})}function v(e){if(e=GmCXt.removeDuplicateGuides(e),g.set(!0),e.length?(Gm.showNoTour.set(!1),e=rootScope.getTranslatedTours(e),r(1,o=e),f(),Gm.CurrentPageTours.set(o),u||(rootScope.showCurrentPageGuidesIndicator(!0),u=!0),rootScope.getBotGuideCount(o),rootScope.displayChatIcon()):d||(Gm.showNoTour.set(!0),w()),rootScope.search&&0<rootScope.search.length){let t=[];o.filter(function(e){(checkValueExist(e.tour_title)||e.tour_id===rootScope.search||checkValueExist(e.keywords)||checkValueExist(e.tour_description))&&t.push(e)}),Gm.CurrentPageTours.set(o),t.length&&scope.setHeight()}}function y(e){GmCXt.isEmpty(e)||(o.push(e),Gm.CurrentPageTours.set(o),rootScope.cTours.push(e.tour_id)),v(o)}function P(e){var t=e.tour;a!==t.timestamp?GmCXt.log(30,"REJECT, having old timestamp"):(e.valid&&n.push(t),rootScope.guideSegmentation&&GmCXt.isPlayer()?e.valid?GmCXt.checkGuidesBasedOnSegment([t],y,"currPageSeg"):y():setTimeout(function(){v(n)},0))}function S(){try{var t=i.length;e=GmCXt.t.currentPageSpinner+1e3,setTimeout(()=>{0===o.length&&GmCXt.log(30,"NO GUIDE rules matched")},e);for(let e=0;e<t;e++){var r=i[c];c++,i.length>=c&&rootScope.queueRuleForCP(r,c,P,l,"currentPage")}}catch(e){802===e.code?console.error("Error with code 802 occurred:",e):console.error("An unexpected error occurred:",e)}var e}function w(){GmCXt.log(30,"NO GUIDES on this page"),rootScope.hideCurrentPageGuidesIndicator(),r(1,o=[]),Gm.CurrentPageTours.set(o),rootScope.getBotGuideCount(o),rootScope.displayChatIcon()}function b(t){if(GmCXt.log(30,"FETCHED tours",t),a=Date.now(),r(1,o=[]),Gm.CurrentPageTours.set(o),n=[],s=t.length,GmCXt.isPlayer()&&!GmCXt.isEmpty(t)&&(t=GmCXt.filterScheduleTours(t)),(t=GmCXt.inPlayer&&!GmCXt.isWestpac()?GmCXt.sortToursByModifcationDate(t):t).length){Gm.loading.set(!1),Gm.showNoTour.set(!1);for(let e=0;e<t.length;e++)t[e].tour_sequence=e,t[e].timestamp=a;i=[...t],c=0,S()}else Gm.loading.set(!1),g.set(!0),Gm.showNoTour.set(!0),w()}function C(e){let t=GmCXt.parseMsg(e);if(t&&t.action&&0===t.action.indexOf("mgPlayerJSPreview_action:")){if("mgPlayerJSPreview_action:get_page_url_response"===(t=GmCXt.convertMgdata(t)).action){rootScope.updatePageUrl(t.data);{let t={url:rootScope.pageUrl};GmCXt.getLXPLang()&&(t.language=GmCXt.getLXPLang()),GmCXt.isDomainInActiveApp()?(e=rootScope.readLocalCT(t.url,GmCXt.pageTitle))&&e.length&&!p?(GmCXt.log(30,"FETCHED tours from CACHE"),b(rootScope.filterCurrentPageTourTypes(e))):api.getContextualTour(t,function(e){p=!1;e=rootScope.processContextualGuide(e,t.url);b(rootScope.filterCurrentPageTourTypes(e))}):(GmCXt.log(30,"INVALID domain, NOT present in Org"),b([]))}window.removeEventListener("message",C)}return!0}}function k(e){"page_click"===e?l="page_click":(l="",r(0,rootScope.cTours=[],rootScope)),i=[],Gm.showNoTour.set(!1),u=!1;var t=GmCXt.user;if(t||GmCXt.isEmpty(t)||!rootScope.noLogin())e=e||null,GmCXt.log(30,"REFRESH current page. Event: "+e),window.addEventListener("message",C),GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:get_page_url"}),f();else{GmCXt.log(30,"SHOWING Box Player guides");let e=0;rootScope.publishedTours||(e=1e3),setTimeout(function(){let e=rootScope.filterCurrentPageTourTypes(rootScope.publishedTours);GmCXt.isPlayer()&&(e=GmCXt.filterScheduleTours(e)),b(e=rootScope.validateAllRulesExceptSelectEl(e).tours)},e)}}return onDestroy(()=>{h(),_()}),Gm.showNoTour.subscribe(e=>{r(2,d=e)}),Gm.activeSortFilterStore.subscribe(e=>{r(3,m=e)}),mg$$1(window).off("resize").on("resize",f),mg$$1(".category-list").off("scroll").on("scroll",function(){if(!isPreviousEventComplete)return!0;mg$$1(this).scrollTop()+mg$$1(this).innerHeight()>=mg$$1(this)[0].scrollHeight-20&&mg$$1(this)[0].scrollHeight+20>mg$$1(this).innerHeight()&&(isPreviousEventComplete=!1,s===limit$2)&&k()}),k(),[rootScope,o,d,m,g]}class CurrentPage extends SvelteComponent{constructor(e){super(),init(this,e,instance$i,create_fragment$j,safe_not_equal,{},null,[-1,-1])}}function create_if_block_25$1(e){let r,i=rootScope.svgs.drag_dots+"";return{c(){attr(r=element("div"),"class","mgPlayerJSPreview_drag-guide-icon-wrapper mgPlayerJSPreview_icon-update-margin ege-inline-block-vm")},m(e,t){insert(e,r,t),r.innerHTML=i},d(e){e&&detach(r)}}}function create_if_block_22$1(e){let r=!e[0]?.image_url||0<=e[0]?.image_url.indexOf("default"),i,a=e[0]?.image_url&&-1==e[0]?.image_url.indexOf("default"),o,n=r&&create_if_block_24$1(e),s=a&&create_if_block_23$1(e);return{c(){n&&n.c(),i=space(),s&&s.c(),o=empty()},m(e,t){n&&n.m(e,t),insert(e,i,t),s&&s.m(e,t),insert(e,o,t)},p(e,t){(r=1&t?!e[0]?.image_url||0<=e[0]?.image_url.indexOf("default"):r)?n?n.p(e,t):((n=create_if_block_24$1(e)).c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null),(a=1&t?e[0]?.image_url&&-1==e[0]?.image_url.indexOf("default"):a)?s?s.p(e,t):((s=create_if_block_23$1(e)).c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(e){e&&(detach(i),detach(o)),n&&n.d(e),s&&s.d(e)}}}function create_if_block_24$1(e){let r,i=rootScope.svgs.folder+"",a;return{c(){attr(r=element("div"),"class",a="mgPlayerJSPreview_category-icon "+(!e[4]?.is_published&&e[2]?"mgPlayerJSPreview_published-category-subfolder-icon":""))},m(e,t){insert(e,r,t),r.innerHTML=i},p(e,t){20&t&&a!==(a="mgPlayerJSPreview_category-icon "+(!e[4]?.is_published&&e[2]?"mgPlayerJSPreview_published-category-subfolder-icon":""))&&attr(r,"class",a)},d(e){e&&detach(r)}}}function create_if_block_23$1(r){let i,a,o,n;return{c(){attr(i=element("img"),"class","category-image mgPlayerJSPreview_custom-image mgPlayerJSPreview_category-uploaded-img-view mgPlayerJSPreview_published-category"),src_url_equal(i.src,a=r[0]?.image_url+r[5])||attr(i,"src",a)},m(e,t){insert(e,i,t),o||(n=listen(i,"error",r[10]),o=!0)},p(e,t){1&t&&!src_url_equal(i.src,a=e[0]?.image_url+e[5])&&attr(i,"src",a)},d(e){e&&detach(i),o=!1,n()}}}function create_if_block_19$2(e){let r=!e[0]?.image_url||0<=e[0]?.image_url.indexOf("default"),i,a=e[0]?.image_url&&-1==e[0]?.image_url.indexOf("default"),o,n=r&&create_if_block_21$1(e),s=a&&create_if_block_20$2(e);return{c(){n&&n.c(),i=space(),s&&s.c(),o=empty()},m(e,t){n&&n.m(e,t),insert(e,i,t),s&&s.m(e,t),insert(e,o,t)},p(e,t){(r=1&t?!e[0]?.image_url||0<=e[0]?.image_url.indexOf("default"):r)?n?n.p(e,t):((n=create_if_block_21$1(e)).c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null),(a=1&t?e[0]?.image_url&&-1==e[0]?.image_url.indexOf("default"):a)?s?s.p(e,t):((s=create_if_block_20$2(e)).c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(e){e&&(detach(i),detach(o)),n&&n.d(e),s&&s.d(e)}}}function create_if_block_21$1(e){let r,i=rootScope.svgs.subfolder+"",a;return{c(){attr(r=element("div"),"class",a="mgPlayerJSPreview_category-icon "+(!e[4]?.is_published&&e[2]?"mgPlayerJSPreview_published-category-subfolder-icon":""))},m(e,t){insert(e,r,t),r.innerHTML=i},p(e,t){20&t&&a!==(a="mgPlayerJSPreview_category-icon "+(!e[4]?.is_published&&e[2]?"mgPlayerJSPreview_published-category-subfolder-icon":""))&&attr(r,"class",a)},d(e){e&&detach(r)}}}function create_if_block_20$2(r){let i,a,o,n;return{c(){attr(i=element("img"),"class","category-image mgPlayerJSPreview_custom-image mgPlayerJSPreview_category-uploaded-img-view mgPlayerJSPreview_published-category"),src_url_equal(i.src,a=r[0]?.image_url+r[5])||attr(i,"src",a)},m(e,t){insert(e,i,t),o||(n=listen(i,"error",r[11]),o=!0)},p(e,t){1&t&&!src_url_equal(i.src,a=e[0]?.image_url+e[5])&&attr(i,"src",a)},d(e){e&&detach(i),o=!1,n()}}}function create_if_block_16$2(e){let r=!e[0]?.image_url||0<=e[0]?.image_url.indexOf("default"),i,a=e[0]?.image_url&&-1==e[0]?.image_url.indexOf("default"),o,n=r&&create_if_block_18$2(),s=a&&create_if_block_17$2(e);return{c(){n&&n.c(),i=space(),s&&s.c(),o=empty()},m(e,t){n&&n.m(e,t),insert(e,i,t),s&&s.m(e,t),insert(e,o,t)},p(e,t){(r=1&t?!e[0]?.image_url||0<=e[0]?.image_url.indexOf("default"):r)?n||((n=create_if_block_18$2()).c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null),(a=1&t?e[0]?.image_url&&-1==e[0]?.image_url.indexOf("default"):a)?s?s.p(e,t):((s=create_if_block_17$2(e)).c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(e){e&&(detach(i),detach(o)),n&&n.d(e),s&&s.d(e)}}}function create_if_block_18$2(e){let r,i=rootScope.svgs.folder+"";return{c(){r=element("div")},m(e,t){insert(e,r,t),r.innerHTML=i},d(e){e&&detach(r)}}}function create_if_block_17$2(e){let r,i;return{c(){attr(r=element("img"),"class","category-image mgPlayerJSPreview_custom-image mgPlayerJSPreview_category-uploaded-img-view"),src_url_equal(r.src,i=e[0]?.image_url+e[5])||attr(r,"src",i)},m(e,t){insert(e,r,t)},p(e,t){1&t&&!src_url_equal(r.src,i=e[0]?.image_url+e[5])&&attr(r,"src",i)},d(e){e&&detach(r)}}}function create_if_block_13$5(e){let r=!e[0]?.image_url||0<=e[0]?.image_url.indexOf("default"),i,a=e[0]?.image_url&&-1==e[0]?.image_url.indexOf("default"),o,n=r&&create_if_block_15$3(),s=a&&create_if_block_14$3(e);return{c(){n&&n.c(),i=space(),s&&s.c(),o=empty()},m(e,t){n&&n.m(e,t),insert(e,i,t),s&&s.m(e,t),insert(e,o,t)},p(e,t){(r=1&t?!e[0]?.image_url||0<=e[0]?.image_url.indexOf("default"):r)?n||((n=create_if_block_15$3()).c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null),(a=1&t?e[0]?.image_url&&-1==e[0]?.image_url.indexOf("default"):a)?s?s.p(e,t):((s=create_if_block_14$3(e)).c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(e){e&&(detach(i),detach(o)),n&&n.d(e),s&&s.d(e)}}}function create_if_block_15$3(e){let r,i=rootScope.svgs.subfolder+"";return{c(){r=element("div")},m(e,t){insert(e,r,t),r.innerHTML=i},d(e){e&&detach(r)}}}function create_if_block_14$3(e){let r,i;return{c(){attr(r=element("img"),"class","category-image mgPlayerJSPreview_custom-image mgPlayerJSPreview_category-uploaded-img-view"),src_url_equal(r.src,i=e[0]?.image_url+e[5])||attr(r,"src",i)},m(e,t){insert(e,r,t)},p(e,t){1&t&&!src_url_equal(r.src,i=e[0]?.image_url+e[5])&&attr(r,"src",i)},d(e){e&&detach(r)}}}function create_if_block_12$5(e){let r,i=rootScope.svgs.folder+"";return{c(){r=element("div")},m(e,t){insert(e,r,t),r.innerHTML=i},d(e){e&&detach(r)}}}function create_if_block_4$a(e){let r,i,a,o,n,s,t=rootScope.labels.unpublishedGuides+"",l,c,p=e[0]?.total_unpublish_tour+"",d,u,g,m,h,_,f=rootScope.labels.publishedGuides+"",v,y,P=e[0]?.total_publish_tour+"",S,w=rootScope.automationSelectionMode&&create_if_block_9$7(e),b=e[0]?.total_unpublish_tour<=rootScope.countLimit&&create_if_block_8$8(e),C=e[0]?.total_unpublish_tour>rootScope.countLimit&&create_if_block_7$8(),k=e[0]?.total_publish_tour<=rootScope.countLimit&&create_if_block_6$9(e),T=e[0]?.total_publish_tour>rootScope.countLimit&&create_if_block_5$9();return{c(){r=element("div"),w&&w.c(),i=space(),a=element("div"),b&&b.c(),o=space(),C&&C.c(),n=space(),s=element("div"),l=text(t),c=space(),d=text(p),u=space(),g=element("div"),k&&k.c(),m=space(),T&&T.c(),h=space(),_=element("div"),v=text(f),y=space(),S=text(P),attr(s,"class","tour-count-tooltip"),attr(a,"class","ege-inline-block-div unpublish-tour-count"),attr(_,"class","tour-count-tooltip"),attr(g,"class","ege-inline-block-div publish-tour-count"),attr(r,"class","tour-count-wrapper")},m(e,t){insert(e,r,t),w&&w.m(r,null),append(r,i),append(r,a),b&&b.m(a,null),append(a,o),C&&C.m(a,null),append(a,n),append(a,s),append(s,l),append(s,c),append(s,d),append(r,u),append(r,g),k&&k.m(g,null),append(g,m),T&&T.m(g,null),append(g,h),append(g,_),append(_,v),append(_,y),append(_,S)},p(e,t){rootScope.automationSelectionMode&&w.p(e,t),e[0]?.total_unpublish_tour<=rootScope.countLimit?b?b.p(e,t):((b=create_if_block_8$8(e)).c(),b.m(a,o)):b&&(b.d(1),b=null),e[0]?.total_unpublish_tour>rootScope.countLimit?C||((C=create_if_block_7$8()).c(),C.m(a,n)):C&&(C.d(1),C=null),1&t&&p!==(p=e[0]?.total_unpublish_tour+"")&&set_data(d,p),e[0]?.total_publish_tour<=rootScope.countLimit?k?k.p(e,t):((k=create_if_block_6$9(e)).c(),k.m(g,m)):k&&(k.d(1),k=null),e[0]?.total_publish_tour>rootScope.countLimit?T||((T=create_if_block_5$9()).c(),T.m(g,h)):T&&(T.d(1),T=null),1&t&&P!==(P=e[0]?.total_publish_tour+"")&&set_data(S,P)},d(e){e&&detach(r),w&&w.d(),b&&b.d(),C&&C.d(),k&&k.d(),T&&T.d()}}}function create_if_block_9$7(e){let r,i,a,o,t=rootScope.labels.selectGuideForAuto+"",n,s,l=e[0]?.automationTours+"",c,p=e[0]?.total_publish_tour<=rootScope.countLimit&&rootScope.automationSelectionMode&&create_if_block_11$6(e),d=e[0]?.total_publish_tour>rootScope.countLimit&&rootScope.automationSelectionMode&&create_if_block_10$6();return{c(){r=element("div"),p&&p.c(),i=space(),d&&d.c(),a=space(),o=element("div"),n=text(t),s=space(),c=text(l),attr(o,"class","tour-count-tooltip"),attr(r,"class","ege-inline-block-div automation-tour-count")},m(e,t){insert(e,r,t),p&&p.m(r,null),append(r,i),d&&d.m(r,null),append(r,a),append(r,o),append(o,n),append(o,s),append(o,c)},p(e,t){e[0]?.total_publish_tour<=rootScope.countLimit&&rootScope.automationSelectionMode?p?p.p(e,t):((p=create_if_block_11$6(e)).c(),p.m(r,i)):p&&(p.d(1),p=null),e[0]?.total_publish_tour>rootScope.countLimit&&rootScope.automationSelectionMode?d||((d=create_if_block_10$6()).c(),d.m(r,a)):d&&(d.d(1),d=null),1&t&&l!==(l=e[0]?.automationTours+"")&&set_data(c,l)},d(e){e&&detach(r),p&&p.d(),d&&d.d()}}}function create_if_block_11$6(e){let r,i=e[0]?.automationTours+"",a;return{c(){r=element("div"),a=text(i),attr(r,"class","mgPlayerJSPreview_automation-count-label")},m(e,t){insert(e,r,t),append(r,a)},p(e,t){1&t&&i!==(i=e[0]?.automationTours+"")&&set_data(a,i)},d(e){e&&detach(r)}}}function create_if_block_10$6(e){let r;return{c(){(r=element("div")).textContent=""+rootScope.labels.countLimit,attr(r,"class","mgPlayerJSPreview_automation-count-label")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block_8$8(e){let r,i=e[0]?.total_unpublish_tour+"",a;return{c(){r=element("div"),a=text(i),attr(r,"class","mgPlayerJSPreview_unpublish-count-label")},m(e,t){insert(e,r,t),append(r,a)},p(e,t){1&t&&i!==(i=e[0]?.total_unpublish_tour+"")&&set_data(a,i)},d(e){e&&detach(r)}}}function create_if_block_7$8(e){let r;return{c(){(r=element("div")).textContent=""+rootScope.labels.countLimit,attr(r,"class","mgPlayerJSPreview_unpublish-count-label")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block_6$9(e){let r,i=e[0]?.total_publish_tour+"",a;return{c(){r=element("div"),a=text(i),attr(r,"class","mgPlayerJSPreview_publish-count-label")},m(e,t){insert(e,r,t),append(r,a)},p(e,t){1&t&&i!==(i=e[0]?.total_publish_tour+"")&&set_data(a,i)},d(e){e&&detach(r)}}}function create_if_block_5$9(e){let r;return{c(){(r=element("div")).textContent=""+rootScope.labels.countLimit,attr(r,"class","mgPlayerJSPreview_publish-count-label")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block_1$d(e){let r,i,a=rootScope.svgs.guide_category_title+"",o,n,s,l,c,p,d,u=e[0]?.total_sub_category+"",g,m=e[0]?.total_sub_category<=rootScope.countLimit&&create_if_block_3$b(e),h=e[0]?.total_sub_category>rootScope.countLimit&&create_if_block_2$c();return{c(){r=element("div"),i=element("div"),n=space(),s=element("div"),m&&m.c(),l=space(),h&&h.c(),c=space(),p=element("div"),d=text("Sub Folders: "),g=text(u),attr(i,"class",o="sub-cat-count-icon ege-inline-block-div "+(e[0]?.is_published?"mgPlayerJSPreview_published-category":"")),attr(p,"class","tour-count-tooltip"),attr(s,"class","sub-cat-count ege-inline-block-div"),attr(r,"class","sub-cat-count-wrapper")},m(e,t){insert(e,r,t),append(r,i),i.innerHTML=a,append(r,n),append(r,s),m&&m.m(s,null),append(s,l),h&&h.m(s,null),append(s,c),append(s,p),append(p,d),append(p,g)},p(e,t){1&t&&o!==(o="sub-cat-count-icon ege-inline-block-div "+(e[0]?.is_published?"mgPlayerJSPreview_published-category":""))&&attr(i,"class",o),e[0]?.total_sub_category<=rootScope.countLimit?m?m.p(e,t):((m=create_if_block_3$b(e)).c(),m.m(s,l)):m&&(m.d(1),m=null),e[0]?.total_sub_category>rootScope.countLimit?h||((h=create_if_block_2$c()).c(),h.m(s,c)):h&&(h.d(1),h=null),1&t&&u!==(u=e[0]?.total_sub_category+"")&&set_data(g,u)},d(e){e&&detach(r),m&&m.d(),h&&h.d()}}}function create_if_block_3$b(e){let r,i=e[0]?.total_sub_category+"",a;return{c(){r=element("div"),a=text(i),attr(r,"class","mgPlayerJSPreview_sub-cat-count-label")},m(e,t){insert(e,r,t),append(r,a)},p(e,t){1&t&&i!==(i=e[0]?.total_sub_category+"")&&set_data(a,i)},d(e){e&&detach(r)}}}function create_if_block_2$c(e){let r;return{c(){(r=element("div")).textContent=""+rootScope.labels.countLimit,attr(r,"class","mgPlayerJSPreview_sub-cat-count-label")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block$f(e){let i,r;return i=new Empty({props:{category:e[0]}}),{c(){create_component(i.$$.fragment)},m(e,t){mount_component(i,e,t),r=!0},p(e,t){var r={};1&t&&(r.category=e[0]),i.$set(r)},i(e){r||(transition_in(i.$$.fragment,e),r=!0)},o(e){transition_out(i.$$.fragment,e),r=!1},d(e){destroy_component(i,e)}}}function create_fragment$i(r){let i,a=!r[1]&&rootScope.isOwnerOrAppAdmin()&&rootScope.FT.creatorApp&&!rootScope.isPublicApp&&!rootScope.automationSelectionMode&&!rootScope.isDesktopApp()&&!rootScope.hideMirrorAppCtrl(),o,n,s,l,c,p,d,u,F,g,m,h,_=(r[0]?.category_title||"")+"",f,O,v,y,P=(r[0]?.category_title||"")+"",R,N,S,w,b=(r[0]?.category_description||"")+"",H,B,C,k,T=(r[0]?.category_description||"")+"",U,V,z,j,x,A,W,q,J=a&&create_if_block_25$1(),G=r[0]?.is_published&&!r[0]?.has_child&&create_if_block_22$1(r),$=r[0]?.is_published&&r[0]?.has_child&&create_if_block_19$2(r),E=!r[0]?.is_published&&!r[0]?.has_child&&r[0]?.image_url&&create_if_block_16$2(r),L=!r[0]?.is_published&&r[0]?.has_child&&r[0]?.image_url&&create_if_block_13$5(r),M=!r[0]?.image_url&&!r[0]?.is_published&&create_if_block_12$5(),I=!r[0]?.has_child&&rootScope.FT.creatorApp&&create_if_block_4$a(r),X=r[0]?.has_child&&rootScope.FT.creatorApp&&create_if_block_1$d(r),D=(r[3]||r[1])&&create_if_block$f(r);return{c(){i=element("div"),J&&J.c(),o=space(),n=element("dnd-nodrag"),s=element("div"),l=element("div"),G&&G.c(),c=space(),$&&$.c(),p=space(),E&&E.c(),d=space(),L&&L.c(),u=space(),M&&M.c(),F=space(),g=element("div"),m=element("div"),h=element("button"),f=text(_),O=space(),v=element("div"),y=element("div"),R=text(P),N=space(),S=element("div"),w=element("div"),H=text(b),B=space(),C=element("div"),k=element("div"),U=text(T),V=space(),I&&I.c(),z=space(),X&&X.c(),j=space(),D&&D.c(),attr(l,"class","category-image-wrapper ege-inline-block-vm"),attr(h,"class","category-title-wrapper mgPlayerJSPreview_lbl-btn"),attr(y,"class","mgPlayerJSPreview_tooltip-title"),attr(v,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-right mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y"),attr(m,"class","mgPlayerJSPreview_category-title-container mgPlayerJSPreview_text-overflow-ellipsis"),attr(w,"class","category-description-wrapper"),attr(k,"class","mgPlayerJSPreview_tooltip-title"),attr(C,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-right mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y"),attr(S,"class","mgPlayerJSPreview_category-desc-container mgPlayerJSPreview_text-overflow-ellipsis"),attr(g,"class","category-title-description-wrapper ege-inline-block-vm mgPlayerJSPreview_position-relative"),attr(s,"class","category-list-item-wrapper"),attr(i,"class",x="category-list-item "+(r[1]?"active":"")+" "+(r[2]?"sub-category-list-item":"")+" "+(rootScope.isMicroPlayer&&r[1]?"mgPlayerJSPreview_no-margin":"")+" "+(!rootScope.FT.isPlayer||r[0]?.has_child||r[0]?.has_tour?"":"mgPlayerJSPreview_display-none")+" "+(rootScope.automationSelectionMode?"mgPlayerJSPreview_auto-selection-cat-list":"")+" "+(rootScope.automationSelectionMode&&!r[0]?.is_published?"mgPlayerJSPreview_disabled":""))},m(e,t){insert(e,i,t),J&&J.m(i,null),append(i,o),append(i,n),append(n,s),append(s,l),G&&G.m(l,null),append(l,c),$&&$.m(l,null),append(l,p),E&&E.m(l,null),append(l,d),L&&L.m(l,null),append(l,u),M&&M.m(l,null),append(s,F),append(s,g),append(g,m),append(m,h),append(h,f),append(m,O),append(m,v),append(v,y),append(y,R),append(g,N),append(g,S),append(S,w),append(w,H),append(S,B),append(S,C),append(C,k),append(k,U),append(n,V),I&&I.m(n,null),append(n,z),X&&X.m(n,null),append(i,j),D&&D.m(i,null),A=!0,W||(q=[listen(i,"click",prevent_default(r[12])),listen(i,"mouseenter",r[7]),listen(i,"mouseleave",r[8])],W=!0)},p(e,[t]){(a=2&t?!e[1]&&rootScope.isOwnerOrAppAdmin()&&rootScope.FT.creatorApp&&!rootScope.isPublicApp&&!rootScope.automationSelectionMode&&!rootScope.isDesktopApp()&&!rootScope.hideMirrorAppCtrl():a)?J||((J=create_if_block_25$1()).c(),J.m(i,o)):J&&(J.d(1),J=null),e[0]?.is_published&&!e[0]?.has_child?G?G.p(e,t):((G=create_if_block_22$1(e)).c(),G.m(l,c)):G&&(G.d(1),G=null),e[0]?.is_published&&e[0]?.has_child?$?$.p(e,t):(($=create_if_block_19$2(e)).c(),$.m(l,p)):$&&($.d(1),$=null),e[0]?.is_published||e[0]?.has_child||!e[0]?.image_url?E&&(E.d(1),E=null):E?E.p(e,t):((E=create_if_block_16$2(e)).c(),E.m(l,d)),!e[0]?.is_published&&e[0]?.has_child&&e[0]?.image_url?L?L.p(e,t):((L=create_if_block_13$5(e)).c(),L.m(l,u)):L&&(L.d(1),L=null),e[0]?.image_url||e[0]?.is_published?M&&(M.d(1),M=null):M||((M=create_if_block_12$5()).c(),M.m(l,null)),(!A||1&t)&&_!==(_=(e[0]?.category_title||"")+"")&&set_data(f,_),(!A||1&t)&&P!==(P=(e[0]?.category_title||"")+"")&&set_data(R,P),(!A||1&t)&&b!==(b=(e[0]?.category_description||"")+"")&&set_data(H,b),(!A||1&t)&&T!==(T=(e[0]?.category_description||"")+"")&&set_data(U,T),!e[0]?.has_child&&rootScope.FT.creatorApp?I?I.p(e,t):((I=create_if_block_4$a(e)).c(),I.m(n,z)):I&&(I.d(1),I=null),e[0]?.has_child&&rootScope.FT.creatorApp?X?X.p(e,t):((X=create_if_block_1$d(e)).c(),X.m(n,null)):X&&(X.d(1),X=null),e[3]||e[1]?D?(D.p(e,t),10&t&&transition_in(D,1)):((D=create_if_block$f(e)).c(),transition_in(D,1),D.m(i,null)):D&&(group_outros(),transition_out(D,1,1,()=>{D=null}),check_outros()),(!A||7&t&&x!==(x="category-list-item "+(e[1]?"active":"")+" "+(e[2]?"sub-category-list-item":"")+" "+(rootScope.isMicroPlayer&&e[1]?"mgPlayerJSPreview_no-margin":"")+" "+(!rootScope.FT.isPlayer||e[0]?.has_child||e[0]?.has_tour?"":"mgPlayerJSPreview_display-none")+" "+(rootScope.automationSelectionMode?"mgPlayerJSPreview_auto-selection-cat-list":"")+" "+(rootScope.automationSelectionMode&&!e[0]?.is_published?"mgPlayerJSPreview_disabled":"")))&&attr(i,"class",x)},i(e){A||(transition_in(D),A=!0)},o(e){transition_out(D),A=!1},d(e){e&&detach(i),J&&J.d(),G&&G.d(),$&&$.d(),E&&E.d(),L&&L.d(),M&&M.d(),I&&I.d(),X&&X.d(),D&&D.d(),W=!1,run_all(q)}}}function handleImageError(e){e.target.src=GmCXt.conf.staticContentPath+"folder_green.png"}function instance$h(e,t,r){let i=t.category,a=t.parent,o=t.subCategory;createEventDispatcher();let n;var s=GmCXt.getCdnSign();let l=!1,c=!1,{onFolderClick:p=()=>{}}=(o&&(c=rootScope.getCategory(i.parent_id)),t),d=async(e,t)=>{t={detail:n=t&&t?.has_tour?{parent:t,hasTour:!0}:{parent:t,hasTour:t.has_tour,hasChild:t.has_child}};p(t)};return e.$$set=e=>{"category"in e&&r(0,i=e.category),"parent"in e&&r(1,a=e.parent),"subCategory"in e&&r(2,o=e.subCategory),"onFolderClick"in e&&r(9,p=e.onFolderClick)},[i,a,o,l,c,s,d,function(){r(3,l=!0)},function(){r(3,l=!1)},p,e=>{e.target.src=handleImageError},e=>{e.target.src=GmCXt.conf.staticContentPath+"subfolder_green.png"},e=>!a&&d(0,i)]}class FolderView extends SvelteComponent{constructor(e){super(),init(this,e,instance$h,create_fragment$i,safe_not_equal,{category:0,parent:1,subCategory:2,onFolderClick:9})}}function get_each_context$6(e,t,r){e=e.slice();return e[8]=t[r],e[10]=r,e}function create_if_block_2$b(e){let r,i=e[0].svgs.iconBreadcrumArrow+"";return{c(){attr(r=element("div"),"class","ege-inline-block-div breadcrum-arrow-icon")},m(e,t){insert(e,r,t),r.innerHTML=i},p(e,t){1&t&&i!==(i=e[0].svgs.iconBreadcrumArrow+"")&&(r.innerHTML=i)},d(e){e&&detach(r)}}}function create_if_block_1$c(e){let r=e[8]+"",i;return{c(){i=text(r)},m(e,t){insert(e,i,t)},p(e,t){2&t&&r!==(r=e[8]+"")&&set_data(i,r)},d(e){e&&detach(i)}}}function create_if_block$e(e){let r=e[8]?.category_title+"",i;return{c(){i=text(r)},m(e,t){insert(e,i,t)},p(e,t){2&t&&r!==(r=e[8]?.category_title+"")&&set_data(i,r)},d(e){e&&detach(i)}}}function create_each_block$6(r){let i,a,o,n,s,l,c,p,d=0<r[10]&&create_if_block_2$b(r);function u(e){return e[8]?.category_title?create_if_block$e:"All Guides"===e[8]?create_if_block_1$c:void 0}let g=u(r),m=g&&g(r);function h(){return r[3](r[8])}return{c(){i=element("li"),d&&d.c(),a=space(),o=element("button"),m&&m.c(),l=space(),attr(o,"class",n="mgPlayerJSPreview_lbl-btn ege-inline-block-div breadcrum-title "+(r[10]===r[1].length-1?"active-breadcrum":"")),attr(o,"aria-label",s=r[8]?.category_title?r[8].category_title:"All Guides"===r[8]?r[8]:""),attr(i,"class","ege-inline-block-div breadcrum-item")},m(e,t){insert(e,i,t),d&&d.m(i,null),append(i,a),append(i,o),m&&m.m(o,null),append(i,l),c||(p=listen(o,"click",h),c=!0)},p(e,t){0<(r=e)[10]&&d.p(r,t),g===(g=u(r))&&m?m.p(r,t):(m&&m.d(1),(m=g&&g(r))&&(m.c(),m.m(o,null))),2&t&&n!==(n="mgPlayerJSPreview_lbl-btn ege-inline-block-div breadcrum-title "+(r[10]===r[1].length-1?"active-breadcrum":""))&&attr(o,"class",n),2&t&&s!==(s=r[8]?.category_title?r[8].category_title:"All Guides"===r[8]?r[8]:"")&&attr(o,"aria-label",s)},d(e){e&&detach(i),d&&d.d(),m&&m.d(),c=!1,p()}}}function create_fragment$h(r){let i,a,o,n=r[0].svgs.btnBackBreadcrumb+"",s,l,c,p,e,d,u,g=ensure_array_like(r[1]),m=[];for(let e=0;e<g.length;e+=1)m[e]=create_each_block$6(get_each_context$6(r,g,e));return{c(){i=element("div"),a=element("div"),o=element("button"),s=space(),(l=element("div")).innerHTML='<div class="mgPlayerJSPreview_tooltip-title">Back</div>',c=space(),p=element("ol");for(let e=0;e<m.length;e+=1)m[e].c();attr(o,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_back-btn mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm"),attr(o,"aria-label","back"),attr(l,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-right"),attr(a,"class","mgPlayerJSPreview_back-btn-wrapper mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_show-text-tooltip mgPlayerJSPreview_position-relative mgPlayerJSPreview_cursor-pointer"),attr(p,"class",e="breadcrums-container mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_no-margin "+(r[0].isMicroPlayer?"mgPlayerJSPreview_breadcrums-container-mPlayer":"")),attr(i,"id","mgPlayerJSPreview_breadcrums-main-container"),attr(i,"class","mgPlayerJSPreview_padding-lr-20")},m(e,t){insert(e,i,t),append(i,a),append(a,o),o.innerHTML=n,append(a,s),append(a,l),append(i,c),append(i,p);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(p,null);d||(u=listen(o,"click",r[2]),d=!0)},p(t,[r]){if(1&r&&n!==(n=t[0].svgs.btnBackBreadcrumb+"")&&(o.innerHTML=n),3&r){g=ensure_array_like(t[1]);let e;for(e=0;e<g.length;e+=1){var i=get_each_context$6(t,g,e);m[e]?m[e].p(i,r):(m[e]=create_each_block$6(i),m[e].c(),m[e].m(p,null))}for(;e<m.length;e+=1)m[e].d(1);m.length=g.length}1&r&&e!==(e="breadcrums-container mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_no-margin "+(t[0].isMicroPlayer?"mgPlayerJSPreview_breadcrums-container-mPlayer":""))&&attr(p,"class",e)},i:noop,o:noop,d(e){e&&detach(i),destroy_each(m,e),d=!1,u()}}}function instance$g(e,t,r){let i,a=createEventDispatcher(),o=get_store_value(Gm.breadCrumb),n=Gm.breadCrumb.subscribe(e=>{r(1,o=e)});rootScope.onClickBreadCrumbHandler=async e=>{i=e?"All Guides"===e?{parent:"All Guides"}:{parent:e,hasTour:e.has_tour,hasChild:e.has_child}:{parent:void 0,hasChild:!1},a("breadcrumbChanged",i)},onDestroy(()=>{n(),s()});let s=Gm.routeAction.subscribe(async e=>{e&&"goToAllGuides"===e.action&&e.app&&(await rootScope.onClickBreadCrumbHandler("All Guides"),await rootScope.onClickBreadCrumbHandler("All Guides"),Gm.routeAction.set(null))});return[rootScope,o,()=>{let e;1<o.length&&(e=o[o.length-2]),rootScope.onClickBreadCrumbHandler(e)},e=>rootScope.onClickBreadCrumbHandler(e)]}class BreadCrumb extends SvelteComponent{constructor(e){super(),init(this,e,instance$g,create_fragment$h,safe_not_equal,{})}}function create_else_block$7(e){let t=rootScope.labels.noCategoryCreatedYet+"",r;return{c(){r=text(t)},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_if_block$d(e){let t=rootScope.labels.noGuideCreatedYet+"",r;return{c(){r=text(t)},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_fragment$g(e){let r,i,a,o=rootScope.svgs.no_guides_image+"",n,s,l;let c=(get_store_value(Gm.breadCrumb).length?create_if_block$d:create_else_block$7)(e);return{c(){r=element("div"),i=element("div"),a=element("div"),n=space(),s=element("div"),l=element("div"),c.c(),attr(a,"class","mgPlayerJSPreview_no-guide-image-cartoon"),attr(i,"class","mgPlayerJSPreview_no-guide-image-wrapper mgPlayerJSPreview_no-margin"),attr(l,"class","mgPlayerJSPreview_no-guide-msg"),attr(l,"tabindex","0"),attr(s,"class","mgPlayerJSPreview_no-guide-text-wrapper"),attr(r,"class","no-tour-message-wrapper mgPlayerJSPreview_position-center"),toggle_class(r,"mgPlayerJSPreview_margin-t-50",!rootScope.isMicroPlayer)},m(e,t){insert(e,r,t),append(r,i),append(i,a),a.innerHTML=o,append(r,n),append(r,s),append(s,l),c.m(l,null)},p:noop,i:noop,o:noop,d(e){e&&detach(r),c.d()}}}class NoGuide extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$g,safe_not_equal,{})}}function get_each_context_2$2(e,t,r){e=e.slice();return e[89]=t[r],e[90]=t,e[87]=r,e}function get_each_context_3$1(e,t,r){e=e.slice();return e[89]=t[r],e[91]=t,e[92]=r,e}function get_each_context_1$3(e,t,r){e=e.slice();return e[15]=t[r],e[87]=r,e}function get_each_context$5(e,t,r){e=e.slice();return e[15]=t[r],e[87]=r,e}function create_if_block_15$2(e){let r,i,a;return(i=new BreadCrumb({})).$on("breadcrumbChanged",e[17]),{c(){r=element("div"),create_component(i.$$.fragment)},m(e,t){insert(e,r,t),mount_component(i,r,null),a=!0},p:noop,i(e){a||(transition_in(i.$$.fragment,e),a=!0)},o(e){transition_out(i.$$.fragment,e),a=!1},d(e){e&&detach(r),destroy_component(i)}}}function create_if_block_4$9(e){let a,r,i,o,n,s,l,c=((a=new FolderView({props:{category:e[7],parent:!0,onFolderClick:e[22]}})).$on("forwardTraversal",e[16]),[create_if_block_5$8,create_if_block_7$7,create_if_block_14$2]),p=[];function d(e,t){return 8&t[0]&&(i=null),e[2]&&0<e[2].length?0:(i=null==i?!GmCXt.isEmpty(e[3]):i)?1:e[10]?-1:2}return~(o=d(e,[-1,-1,-1]))&&(n=p[o]=c[o](e)),{c(){create_component(a.$$.fragment),r=space(),n&&n.c(),s=empty()},m(e,t){mount_component(a,e,t),insert(e,r,t),~o&&p[o].m(e,t),insert(e,s,t),l=!0},p(e,t){var r={};128&t[0]&&(r.category=e[7]),a.$set(r);let i=o;(o=d(e,t))===i?~o&&p[o].p(e,t):(n&&(group_outros(),transition_out(p[i],1,1,()=>{p[i]=null}),check_outros()),~o?((n=p[o])?n.p(e,t):(n=p[o]=c[o](e)).c(),transition_in(n,1),n.m(s.parentNode,s)):n=null)},i(e){l||(transition_in(a.$$.fragment,e),transition_in(n),l=!0)},o(e){transition_out(a.$$.fragment,e),transition_out(n),l=!1},d(e){e&&(detach(r),detach(s)),destroy_component(a,e),~o&&p[o].d(e)}}}function create_if_block_2$a(t){let a,i,o=ensure_array_like(t[0]),n=[];for(let e=0;e<o.length;e+=1)n[e]=create_each_block$5(get_each_context$5(t,o,e));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();a=empty()},m(t,r){for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,r);insert(t,a,r),i=!0},p(t,r){if(5339249&r[0]){o=ensure_array_like(t[0]);let e;for(e=0;e<o.length;e+=1){var i=get_each_context$5(t,o,e);n[e]?(n[e].p(i,r),transition_in(n[e],1)):(n[e]=create_each_block$5(i),n[e].c(),transition_in(n[e],1),n[e].m(a.parentNode,a))}for(group_outros(),e=o.length;e<n.length;e+=1)(e=>transition_out(n[e],1,1,()=>{n[e]=null}))(e);check_outros()}},i(e){if(!i){for(let e=0;e<o.length;e+=1)transition_in(n[e]);i=!0}},o(e){n=n.filter(Boolean);for(let e=0;e<n.length;e+=1)transition_out(n[e]);i=!1},d(e){e&&detach(a),destroy_each(n,e)}}}function create_if_block_14$2(e){let r,i;return r=new NoGuide({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},p:noop,i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_7$7(t){let a,o,i,n=t[8]&&!t[6].exportEnabled&&t[6].FT.creatorApp&&create_if_block_11$5(t),s=ensure_array_like(t[3]),l=[];for(let e=0;e<s.length;e+=1)l[e]=create_each_block_2$2(get_each_context_2$2(t,s,e));return{c(){n&&n.c(),a=space();for(let e=0;e<l.length;e+=1)l[e].c();o=empty()},m(t,r){n&&n.m(t,r),insert(t,a,r);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,r);insert(t,o,r),i=!0},p(t,r){if(t[8]&&!t[6].exportEnabled&&t[6].FT.creatorApp?n?(n.p(t,r),320&r[0]&&transition_in(n,1)):((n=create_if_block_11$5(t)).c(),transition_in(n,1),n.m(a.parentNode,a)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros()),2914424&r[0]){s=ensure_array_like(t[3]);let e;for(e=0;e<s.length;e+=1){var i=get_each_context_2$2(t,s,e);l[e]?(l[e].p(i,r),transition_in(l[e],1)):(l[e]=create_each_block_2$2(i),l[e].c(),transition_in(l[e],1),l[e].m(o.parentNode,o))}for(group_outros(),e=s.length;e<l.length;e+=1)(e=>transition_out(l[e],1,1,()=>{l[e]=null}))(e);check_outros()}},i(e){if(!i){transition_in(n);for(let e=0;e<s.length;e+=1)transition_in(l[e]);i=!0}},o(e){transition_out(n),l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)transition_out(l[e]);i=!1},d(e){e&&(detach(a),detach(o)),n&&n.d(e),destroy_each(l,e)}}}function create_if_block_5$8(t){let a,i,o=ensure_array_like(t[2]),n=[];for(let e=0;e<o.length;e+=1)n[e]=create_each_block_1$3(get_each_context_1$3(t,o,e));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();a=empty()},m(t,r){for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,r);insert(t,a,r),i=!0},p(t,r){if(5339252&r[0]){o=ensure_array_like(t[2]);let e;for(e=0;e<o.length;e+=1){var i=get_each_context_1$3(t,o,e);n[e]?(n[e].p(i,r),transition_in(n[e],1)):(n[e]=create_each_block_1$3(i),n[e].c(),transition_in(n[e],1),n[e].m(a.parentNode,a))}for(group_outros(),e=o.length;e<n.length;e+=1)(e=>transition_out(n[e],1,1,()=>{n[e]=null}))(e);check_outros()}},i(e){if(!i){for(let e=0;e<o.length;e+=1)transition_in(n[e]);i=!0}},o(e){n=n.filter(Boolean);for(let e=0;e<n.length;e+=1)transition_out(n[e]);i=!1},d(e){e&&detach(a),destroy_each(n,e)}}}function create_if_block_11$5(t){let a,i,o=ensure_array_like(t[8]),n=[];for(let e=0;e<o.length;e+=1)n[e]=create_each_block_3$1(get_each_context_3$1(t,o,e));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();a=empty()},m(t,r){for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,r);insert(t,a,r),i=!0},p(t,r){if(786752&r[0]){o=ensure_array_like(t[8]);let e;for(e=0;e<o.length;e+=1){var i=get_each_context_3$1(t,o,e);n[e]?(n[e].p(i,r),transition_in(n[e],1)):(n[e]=create_each_block_3$1(i),n[e].c(),transition_in(n[e],1),n[e].m(a.parentNode,a))}for(group_outros(),e=o.length;e<n.length;e+=1)(e=>transition_out(n[e],1,1,()=>{n[e]=null}))(e);check_outros()}},i(e){if(!i){for(let e=0;e<o.length;e+=1)transition_in(n[e]);i=!0}},o(e){n=n.filter(Boolean);for(let e=0;e<n.length;e+=1)transition_out(n[e]);i=!1},d(e){e&&detach(a),destroy_each(n,e)}}}function create_if_block_12$4(e){let i,a,o,r,n,s,l=e[6].FT.creatorApp&&e[6].automationSelectionMode&&create_if_block_13$4(e);return(o=new TourView({props:{tour:e[89]}})).$on("updatePinnedTours",e[19]),{c(){i=element("div"),l&&l.c(),a=space(),create_component(o.$$.fragment),r=space(),attr(i,"class",n="tour-item mgPlayerJSPreview_guide-list-view "+(e[6].isMicroPlayer?"mgPlayerJSPreview_guide-list-view-mplayer":""))},m(e,t){insert(e,i,t),l&&l.m(i,null),append(i,a),mount_component(o,i,null),append(i,r),s=!0},p(e,t){e[6].FT.creatorApp&&e[6].automationSelectionMode?l?l.p(e,t):((l=create_if_block_13$4(e)).c(),l.m(i,a)):l&&(l.d(1),l=null);var r={};256&t[0]&&(r.tour=e[89]),o.$set(r),(!s||64&t[0]&&n!==(n="tour-item mgPlayerJSPreview_guide-list-view "+(e[6].isMicroPlayer?"mgPlayerJSPreview_guide-list-view-mplayer":"")))&&attr(i,"class",n)},i(e){s||(transition_in(o.$$.fragment,e),s=!0)},o(e){transition_out(o.$$.fragment,e),s=!1},d(e){e&&detach(i),l&&l.d(),destroy_component(o)}}}function create_if_block_13$4(r){let i,a,o,n;function s(){r[32].call(a,r[91],r[92])}function l(){return r[33](r[89])}return{c(){i=element("div"),attr(a=element("input"),"class","mgPlayerJSPreview_input-checkbox-custom"),attr(a,"type","checkbox"),attr(i,"class","mgPlayerJSPreview_icon-update-margin ege-inline-block-vm")},m(e,t){insert(e,i,t),append(i,a),a.checked=r[89].automate,o||(n=[listen(a,"change",s),listen(a,"change",l)],o=!0)},p(e,t){r=e,256&t[0]&&(a.checked=r[89].automate)},d(e){e&&detach(i),o=!1,run_all(n)}}}function create_each_block_3$1(e){let r=e[18](e[89])&&!e[6].guideHideForPlayer(e[89].tour_settings)&&e[89].pin,i,a,o=r&&create_if_block_12$4(e);return{c(){o&&o.c(),i=empty()},m(e,t){o&&o.m(e,t),insert(e,i,t),a=!0},p(e,t){(r=320&t[0]?e[18](e[89])&&!e[6].guideHideForPlayer(e[89].tour_settings)&&e[89].pin:r)?o?(o.p(e,t),320&t[0]&&transition_in(o,1)):((o=create_if_block_12$4(e)).c(),transition_in(o,1),o.m(i.parentNode,i)):o&&(group_outros(),transition_out(o,1,1,()=>{o=null}),check_outros())},i(e){a||(transition_in(o),a=!0)},o(e){transition_out(o),a=!1},d(e){e&&detach(i),o&&o.d(e)}}}function create_if_block_8$7(e){let i,r,a,o,n,s,l,c=[create_if_block_9$6,create_else_block_2$2],p=[];function d(e,t){return(r=null==(r=64&t[0]?null:r)?!(!e[6].isOwnerOrAppAdmin()||!e[6].FT.creatorApp||e[6].isDesktopApp()||e[6].hideMirrorAppCtrl()||e[6].exportEnabled||e[6].automationSelectionMode):r)?0:1}return a=d(e,[-1,-1,-1]),o=p[a]=c[a](e),{c(){i=element("div"),o.c(),n=space(),attr(i,"class",s="tour-item mgPlayerJSPreview_guide-list-view "+(e[6].isMicroPlayer?"mgPlayerJSPreview_guide-list-view-mplayer":"")+" "+(!e[89].is_locked||e[89].user_id==e[6].user.user_id||e[6].isOwnerOrAppAdmin()?"unlocked-guide":"")+" "+(e[6].automationSelectionMode&&!e[89].is_published?"mgPlayerJSPreview_disabled":""))},m(e,t){insert(e,i,t),p[a].m(i,null),append(i,n),l=!0},p(e,t){let r=a;(a=d(e,t))===r?p[a].p(e,t):(group_outros(),transition_out(p[r],1,1,()=>{p[r]=null}),check_outros(),(o=p[a])?o.p(e,t):(o=p[a]=c[a](e)).c(),transition_in(o,1),o.m(i,n)),(!l||72&t[0]&&s!==(s="tour-item mgPlayerJSPreview_guide-list-view "+(e[6].isMicroPlayer?"mgPlayerJSPreview_guide-list-view-mplayer":"")+" "+(!e[89].is_locked||e[89].user_id==e[6].user.user_id||e[6].isOwnerOrAppAdmin()?"unlocked-guide":"")+" "+(e[6].automationSelectionMode&&!e[89].is_published?"mgPlayerJSPreview_disabled":"")))&&attr(i,"class",s)},i(e){l||(transition_in(o),l=!0)},o(e){transition_out(o),l=!1},d(e){e&&detach(i),p[a].d()}}}function create_else_block_2$2(e){let i,a,r,o=e[6].FT.creatorApp&&e[6].automationSelectionMode&&create_if_block_10$5(e);return(a=new TourView({props:{tour:e[89]}})).$on("updatePinnedTours",e[19]),{c(){o&&o.c(),i=space(),create_component(a.$$.fragment)},m(e,t){o&&o.m(e,t),insert(e,i,t),mount_component(a,e,t),r=!0},p(e,t){e[6].FT.creatorApp&&e[6].automationSelectionMode?o?o.p(e,t):((o=create_if_block_10$5(e)).c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null);var r={};8&t[0]&&(r.tour=e[89]),a.$set(r)},i(e){r||(transition_in(a.$$.fragment,e),r=!0)},o(e){transition_out(a.$$.fragment,e),r=!1},d(e){e&&detach(i),o&&o.d(e),destroy_component(a,e)}}}function create_if_block_9$6(r){let i,a,o=r[6].svgs.drag_dots+"",n,s,l,c,p;function d(...e){return r[34](r[89],r[87],...e)}function u(...e){return r[36](r[87],...e)}return(s=new TourView({props:{tour:r[89]}})).$on("updatePinnedTours",r[19]),{c(){i=element("div"),a=element("div"),n=space(),create_component(s.$$.fragment),attr(a,"class","mgPlayerJSPreview_drag-guide-icon-wrapper ege-inline-block-vm"),attr(i,"draggable","true")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),mount_component(s,i,null),l=!0,c||(p=[listen(i,"dragstart",d),listen(i,"drag",r[35]),listen(i,"dragover",u),listen(i,"dragend",r[37])],c=!0)},p(e,t){r=e,(!l||64&t[0])&&o!==(o=r[6].svgs.drag_dots+"")&&(a.innerHTML=o);e={};8&t[0]&&(e.tour=r[89]),s.$set(e)},i(e){l||(transition_in(s.$$.fragment,e),l=!0)},o(e){transition_out(s.$$.fragment,e),l=!1},d(e){e&&detach(i),destroy_component(s),c=!1,run_all(p)}}}function create_if_block_10$5(r){let i,a,o,n;function s(){r[38].call(a,r[90],r[87])}function l(){return r[39](r[89])}return{c(){i=element("div"),attr(a=element("input"),"class","mgPlayerJSPreview_input-checkbox-custom"),attr(a,"type","checkbox"),attr(i,"class","mgPlayerJSPreview_icon-update-margin ege-inline-block-vm")},m(e,t){insert(e,i,t),append(i,a),a.checked=r[89].automate,o||(n=[listen(a,"change",s),listen(a,"change",l)],o=!0)},p(e,t){r=e,8&t[0]&&(a.checked=r[89].automate)},d(e){e&&detach(i),o=!1,run_all(n)}}}function create_each_block_2$2(e){let r=e[18](e[89])&&!e[6].guideHideForPlayer(e[89].tour_settings),i,a,o=r&&create_if_block_8$7(e);return{c(){o&&o.c(),i=empty()},m(e,t){o&&o.m(e,t),insert(e,i,t),a=!0},p(e,t){(r=72&t[0]?e[18](e[89])&&!e[6].guideHideForPlayer(e[89].tour_settings):r)?o?(o.p(e,t),72&t[0]&&transition_in(o,1)):((o=create_if_block_8$7(e)).c(),transition_in(o,1),o.m(i.parentNode,i)):o&&(group_outros(),transition_out(o,1,1,()=>{o=null}),check_outros())},i(e){a||(transition_in(o),a=!0)},o(e){transition_out(o),a=!1},d(e){e&&detach(i),o&&o.d(e)}}}function create_else_block_1$2(e){let i,r;return(i=new FolderView({props:{category:e[15],parent:!1,subCategory:!0,onFolderClick:e[22]}})).$on("forwardTraversal",e[16]),{c(){create_component(i.$$.fragment)},m(e,t){mount_component(i,e,t),r=!0},p(e,t){var r={};4&t[0]&&(r.category=e[15]),i.$set(r)},i(e){r||(transition_in(i.$$.fragment,e),r=!0)},o(e){transition_out(i.$$.fragment,e),r=!1},d(e){destroy_component(i,e)}}}function create_if_block_6$8(r){let i,a,o,n,s,l;function c(...e){return r[28](r[15],r[87],...e)}function p(...e){return r[30](r[87],...e)}return(a=new FolderView({props:{category:r[15],parent:!1,subCategory:!0,onFolderClick:r[22]}})).$on("forwardTraversal",r[16]),{c(){i=element("div"),create_component(a.$$.fragment),o=space(),attr(i,"draggable","true")},m(e,t){insert(e,i,t),mount_component(a,i,null),append(i,o),n=!0,s||(l=[listen(i,"dragstart",c),listen(i,"drag",r[29]),listen(i,"dragover",p),listen(i,"dragend",r[31])],s=!0)},p(e,t){r=e;e={};4&t[0]&&(e.category=r[15]),a.$set(e)},i(e){n||(transition_in(a.$$.fragment,e),n=!0)},o(e){transition_out(a.$$.fragment,e),n=!1},d(e){e&&detach(i),destroy_component(a),s=!1,run_all(l)}}}function create_each_block_1$3(e){let r,i,a,o,n,s=[create_if_block_6$8,create_else_block_1$2],l=[];function c(e,t){return(r=null==(r=64&t[0]?null:r)?!(!e[6].isOwnerOrAppAdmin()||!e[6].FT.creatorApp||e[6].isDesktopApp()||e[6].hideMirrorAppCtrl()):r)?0:1}return i=c(e,[-1,-1,-1]),a=l[i]=s[i](e),{c(){a.c(),o=empty()},m(e,t){l[i].m(e,t),insert(e,o,t),n=!0},p(e,t){let r=i;(i=c(e,t))===r?l[i].p(e,t):(group_outros(),transition_out(l[r],1,1,()=>{l[r]=null}),check_outros(),(a=l[i])?a.p(e,t):(a=l[i]=s[i](e)).c(),transition_in(a,1),a.m(o.parentNode,o))},i(e){n||(transition_in(a),n=!0)},o(e){transition_out(a),n=!1},d(e){e&&detach(o),l[i].d(e)}}}function create_else_block$6(e){let i,r;return(i=new FolderView({props:{category:e[15],parent:!1,onFolderClick:e[22]}})).$on("forwardTraversal",e[16]),{c(){create_component(i.$$.fragment)},m(e,t){mount_component(i,e,t),r=!0},p(e,t){var r={};1&t[0]&&(r.category=e[15]),i.$set(r)},i(e){r||(transition_in(i.$$.fragment,e),r=!0)},o(e){transition_out(i.$$.fragment,e),r=!1},d(e){destroy_component(i,e)}}}function create_if_block_3$a(r){let i,a,o,n,s,l;function c(...e){return r[24](r[15],r[87],...e)}function p(...e){return r[26](r[87],...e)}return(a=new FolderView({props:{category:r[15],parent:!1,onFolderClick:r[22]}})).$on("forwardTraversal",r[16]),{c(){i=element("div"),create_component(a.$$.fragment),o=space(),attr(i,"draggable","true")},m(e,t){insert(e,i,t),mount_component(a,i,null),append(i,o),n=!0,s||(l=[listen(i,"dragstart",c),listen(i,"drag",r[25]),listen(i,"dragover",p),listen(i,"dragend",r[27])],s=!0)},p(e,t){r=e;e={};1&t[0]&&(e.category=r[15]),a.$set(e)},i(e){n||(transition_in(a.$$.fragment,e),n=!0)},o(e){transition_out(a.$$.fragment,e),n=!1},d(e){e&&detach(i),destroy_component(a),s=!1,run_all(l)}}}function create_each_block$5(e){let r,i,a,o,n,s=[create_if_block_3$a,create_else_block$6],l=[];function c(e,t){return(r=null==(r=64&t[0]?null:r)?!(!e[6].isOwnerOrAppAdmin()||!e[6].FT.creatorApp||e[6].isDesktopApp()||e[6].hideMirrorAppCtrl()):r)?0:1}return i=c(e,[-1,-1,-1]),a=l[i]=s[i](e),{c(){a.c(),o=empty()},m(e,t){l[i].m(e,t),insert(e,o,t),n=!0},p(e,t){let r=i;(i=c(e,t))===r?l[i].p(e,t):(group_outros(),transition_out(l[r],1,1,()=>{l[r]=null}),check_outros(),(a=l[i])?a.p(e,t):(a=l[i]=s[i](e)).c(),transition_in(a,1),a.m(o.parentNode,o))},i(e){n||(transition_in(a),n=!0)},o(e){transition_out(a),n=!1},d(e){e&&detach(o),l[i].d(e)}}}function create_if_block_1$b(e){let r,i;return r=new Empty({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block$c(e){let r,i;return r=new NoGuide({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_fragment$f(r){let i,a,o,n,s,l,c,p=0<r[1].length&&create_if_block_15$2(r),d=[create_if_block_2$a,create_if_block_4$9],u=[];function g(e){return e[1].length<1?0:0<e[1].length?1:-1}~(o=g(r))&&(n=u[o]=d[o](r));let m=r[6].automationSelectionMode&&create_if_block_1$b(),h=0==r[0].length&&create_if_block$c();return{c(){p&&p.c(),i=space(),a=element("div"),n&&n.c(),s=space(),m&&m.c(),l=space(),h&&h.c(),attr(a,"class","category-list"),set_style(a,"height","682px")},m(e,t){p&&p.m(e,t),insert(e,i,t),insert(e,a,t),~o&&u[o].m(a,null),append(a,s),m&&m.m(a,null),append(a,l),h&&h.m(a,null),r[40](a),c=!0},p(e,t){0<e[1].length?p?(p.p(e,t),2&t[0]&&transition_in(p,1)):((p=create_if_block_15$2(e)).c(),transition_in(p,1),p.m(i.parentNode,i)):p&&(group_outros(),transition_out(p,1,1,()=>{p=null}),check_outros());let r=o;(o=g(e))===r?~o&&u[o].p(e,t):(n&&(group_outros(),transition_out(u[r],1,1,()=>{u[r]=null}),check_outros()),~o?((n=u[o])?n.p(e,t):(n=u[o]=d[o](e)).c(),transition_in(n,1),n.m(a,s)):n=null),e[6].automationSelectionMode?m?64&t[0]&&transition_in(m,1):((m=create_if_block_1$b()).c(),transition_in(m,1),m.m(a,l)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros()),0==e[0].length?h?1&t[0]&&transition_in(h,1):((h=create_if_block$c()).c(),transition_in(h,1),h.m(a,null)):h&&(group_outros(),transition_out(h,1,1,()=>{h=null}),check_outros())},i(e){c||(transition_in(p),transition_in(n),transition_in(m),transition_in(h),c=!0)},o(e){transition_out(p),transition_out(n),transition_out(m),transition_out(h),c=!1},d(e){e&&(detach(i),detach(a)),p&&p.d(e),~o&&u[o].d(),m&&m.d(),h&&h.d(),r[40](null)}}}let limit$1=50;function instance$f(e,X,o){function t(){var e=mg$$1(".list-page-header").innerHeight()?mg$$1(".list-page-header").innerHeight():0,t=mg$$1("#ege-header").innerHeight()?mg$$1("#ege-header").innerHeight():0,r=mg$$1(".ege-panel-header-sub-menu-urls").innerHeight()?mg$$1(".ege-panel-header-sub-menu-urls").innerHeight():0,i=mg$$1("#mgPlayerJSPreview_breadcrums-main-container").innerHeight()?mg$$1("#mgPlayerJSPreview_breadcrums-main-container").innerHeight():0,a=mg$$1("#footer").innerHeight()?mg$$1("#footer").innerHeight():0;mg$$1(".category-list").css({height:window.innerHeight-a-r-e-t-i})}let n=[],i=[],s=[],l=[],c,r=[],a=[],p,d,u=!1,g=0,m,h=[],_=[],f=[],v=[],y=0,P=!0,S=!0,w=!0,D=0,F=0,O=0,R,N,b=!1,C=rootScope.activeTourId,H=(C=C||0,d=GmCXt.getLXPLang()?GmCXt.getLXPLang():get_store_value(Gm.selectedLang),Gm.selectedLang.subscribe(e=>{o(6,rootScope.language=e,rootScope),GmCXt.getLXPLang()||(d=e),o(0,n=rootScope.prepCatLangJson(get_store_value(Gm.allCategories),d)),f=rootScope.prepCatLangJson(get_store_value(Gm.subCategories),d),o(3,a=B(get_store_value(Gm.categoryTours))),o(2,r=rootScope.prepCatLangJson(get_store_value(Gm.childCategories),d)),c&&(o(7,c=rootScope.prepSingCatLang(c,d)),s.pop(),s.push(c),Gm.breadCrumb.set(s))}));function B(e){return e=e&&e.map(e=>e=rootScope.getTranslatedTourAndSteps(e,d))}let U=Gm.categoryTours.subscribe(e=>{if(o(3,a=B(e)),rootScope.FT.creatorApp&&a&&0<a.length&&!GmCXt.isEmpty(rootScope.pinnedToursList)){let t=rootScope.pinnedToursList.toString(),r=(o(23,h=a.filter(function(e){return e.pin=t.includes(e.tour_id),t.includes(e.tour_id)})),h.map(e=>e.tour_id));e=a.filter(e=>!r.includes(e.tour_id));o(3,a=e),Z()}});function k(a){Gm.loading.set(!0),0===a&&(y=0,o(10,b=!0));var e={category_id:g,limit:limit$1,offset:y};function r(e,r){GmCXt.isPlayer()&&!GmCXt.isEmpty(e)&&(e=GmCXt.filterScheduleTours(e)),storage.pinnedToursList.set(r);var t=a,i=e;if(i&&0<i.length){if(u=!1,_=t?mg$$1.merge(_,i):i,_=rootScope.filterDefaultGuides(_),_=GmCXt.removeDuplicateGuides(_),rootScope.FT.creatorApp)if(_=rootScope.getTranslatedTours(_),GmCXt.isEmpty(r))o(23,h=[]);else{let t=r.toString();o(23,h=_.filter(function(e){return e.pin=t.includes(e.tour_id),t.includes(e.tour_id)})),_.filter(function(e){return e.pin=t.includes(e.tour_id),!t.includes(e.tour_id)})}O=i.length,o(6,rootScope.totalTours=_.length,rootScope),C&&GmCXt.isDefined(i[C])&&(i[C].screencastInProgress=!0)}else u=!t;S=!0,_=rootScope.getTranslatedTours(_),e.forEach(function(e,t){e.automate=!1,e.tour_order=parseInt(e.tour_order)}),rootScope.categoryDataForAutomation.forEach(function(t,e){t.category_id===m?.category_id&&(t.tours.length,parseInt(t.total_publish_tour),_.forEach(function(r,e){t.tours.forEach(function(e,t){e.tour_id===r.tour_id&&(r.automate=!0)})}))}),Gm.loading.set(!1),o(6,rootScope.isApiCallOn=!1,rootScope),GmCXt.isPlayer()&&(_=_.filter(function(e){return!GmCXt.isFeatureTags(e)})),rootScope.guideSegmentation&&rootScope.FT.isPlayer?GmCXt.checkGuidesBasedOnSegment(_,W,"guideListSeg"):Gm.categoryTours.set(_),Gm.childCategories.set(void 0),o(10,b=!1),GmCXt.FT.creatorApp&&rootScope.checkCurrentViewForUpdate()}if(rootScope.FT.publishedGuides&&(e.published_guides="1"),rootScope.isUserLoggedIn()||GmCXt.onPrem()){let t=rootScope.allTourList["cat_"+g];!rootScope.hasUserEditedTour||GmCXt.isEmpty(t)?api.getTourList(e,r):r(Object.keys(t).map(function(e){return t[e]}),rootScope.pinnedToursList)}rootScope.hasUserEditedTour||Gm.loading.set(!0)}function T(t){Gm.loading.set(!0),0===t&&(y=0);var e={parent_id:g,limit:limit$1,offset:y};rootScope.FT.publishedCat&&(e.is_publish="1"),rootScope.getCategoryListApi(e,function(e){z(e,t),Gm.loading.set(!1),o(6,rootScope.isApiCallOn=!1,rootScope)})}let V=Gm.childCategories.subscribe(e=>{GmCXt.inPlayer&&e?o(2,r=rootScope.prepCatLangJson(e,d)):o(2,r=e)}),z=function(e,r){if(e&&0<e.length){let t=[];F=e.length,e.forEach(function(r,e){t.push(r),r.automationTours=0,rootScope.categoryDataForAutomation.forEach(function(e,t){e.category_id===r.category_id&&(r.automationTours=e.tours.length)})}),rootScope.subCategoryStore&&GmCXt.isEmpty(rootScope.subCategoryStore["cat_"+g])&&rootScope.addMultiCategory(t,g),f=r?mg$$1.merge(f,t):e,f=GmCXt.removeDuplicateCategories(f),(f=GmCXt.inPlayer?rootScope.prepCatLangJson(f,rootScope.language):f).length||(u=!0)}else f.length||(u=!0);Gm.childCategories.set(f),rootScope.checkCurrentViewForUpdate(),Gm.loading.set(!1),w=!0};function x(e){var t;Gm.childCategories.set(void 0),Gm.categoryTours.set(void 0),Gm.parent.set(e.detail.parent),s.length<1&&s.push("All Guides"),s.some(e=>"object"==typeof e&&e.category_id===c.category_id)||s.push(c),Gm.breadCrumb.set(s),e.detail.hasChild?(t=[],GmCXt.isEmpty(c.sub_categories)&&!GmCXt.inPlayer?(g=e.detail.parent.category_id,T(0)):(t=c.sub_categories.filter(e=>!e.has_tour||0<rootScope.filterGuideByEnv(e.tours).length),Gm.childCategories.set(t)),Gm.categoryTours.set(void 0)):e.detail.hasTour&&(Gm.categoryTours.set([]),GmCXt.isEmpty(c.tours)&&!GmCXt.inPlayer?(g=e.detail.parent.category_id,k(0)):setTimeout(()=>{let e=rootScope.filterGuideByEnv(c.tours);GmCXt.isPlayer()&&!GmCXt.isEmpty(e)&&(e=(e=GmCXt.filterScheduleTours(e)).filter(function(e){return!GmCXt.isFeatureTags(e)})),GmCXt.checkGuidesBasedOnSegment(e,W,"guideListSeg"),Gm.childCategories.set(void 0)},1)),o(15,m=c)}function j(e){Gm.loading.set(!0),Gm.categoryTours.set([]),Gm.childCategories.set([]);let t=-1;var r,e=e.detail;let i,a=e.parent;if(Gm.loading.set(!0),(i=n.find(e=>e.category_id===a.category_id))||!a.category_id||GmCXt.isEmpty(l)?a.category_id&&!GmCXt.inPlayer&&(i=a):i=l.find(e=>e.category_id===a.category_id),Gm.parent.set(i),-1===(t=c&&"All Guides"!==c?s.findIndex(e=>e.category_id===c.category_id):t))o(1,s=[]),Gm.breadCrumb.set(s),GmCXt.inPlayer?Gm.loading.set(!1):A();else if(o(1,s=s.slice(0,t+1)),Gm.breadCrumb.set(s),e.hasChild&&(r=[],GmCXt.isEmpty(c.sub_categories)&&!GmCXt.inPlayer?(g=e.parent.category_id,T(0)):(r=c.sub_categories.filter(e=>!e.has_tour||0<rootScope.filterGuideByEnv(e.tours).length),Gm.childCategories.set(r),Gm.loading.set(!1)),Gm.categoryTours.set(void 0)),e.hasTour){if(Gm.categoryTours.set([]),GmCXt.isEmpty(c.tours)&&!GmCXt.inPlayer)g=e.parent.category_id,k(0);else{let e=rootScope.filterGuideByEnv(c.tours);GmCXt.isPlayer()&&!GmCXt.isEmpty(e)&&(e=GmCXt.filterScheduleTours(e)),GmCXt.checkGuidesBasedOnSegment(e,W,"guideListSeg"),Gm.loading.set(!1)}Gm.childCategories.set(void 0)}}function W(t){if(!GmCXt.isEmpty(t)){let e=get_store_value(Gm.categoryTours);e.push(t),e=GmCXt.removeDuplicateGuides(e),Gm.categoryTours.set(e)}}function q(e,t,r){o(6,rootScope.refreshAllGuides=!1,rootScope),GmCXt.isEmpty(e)&&GmCXt.isEmpty(i)?u=!0:(u=!1,e&&(D=e.length,e.forEach(function(t,e){1===t.category_image&&(t.category_image=0),t.automationTours=0,rootScope.categoryDataForAutomation.forEach(function(e){e.category_id===t?.category_id&&(t.automationTours=e.tours.length)}),t.category_order=parseInt(t?.category_order)})),i=(e=>{let r=[],i=[];return mg$$1.each(e,function(e,t){-1===mg$$1.inArray(t.category_id,r)&&(r.push(t.category_id),i.push(t))}),i})(i=t?mg$$1.merge(i,e):e),P=!0,!GmCXt.isEmpty(rootScope.categoryStore)&&GmCXt.isEmpty(rootScope.refreshCache)||(GmCXt.isEmpty(rootScope.refreshCache)&&o(6,rootScope.categoryStore=[],rootScope),rootScope.addMultiCategory(i)),GmCXt.inPlayer&&(i=rootScope.prepCatLangJson(i,r))),GmCXt.isPlayer()||storage.refreshCache.remove(),Gm.allCategories.set(i),o(6,rootScope.isApiCallOn=!1,rootScope),rootScope.isAppJsonCalling||Gm.loading.set(!1),rootScope.checkCurrentViewForUpdate()}function A(r){if(!rootScope.isApiCallOn){rootScope.resetOffset&&(y=0,o(6,rootScope.resetOffset=!1,rootScope)),0===r&&(y=y=0);let e=limit$1;var t;rootScope.categoryStore&&(t=Object.keys(rootScope.categoryStore).length,e=rootScope.getApiLimit(t)),mgError$1.try(function(){let t={parent_id:0,limit:rootScope.refreshAllGuides?e:limit$1,offset:r?y:0};GmCXt.getLXPLang()?t.language=GmCXt.getLXPLang():rootScope.language&&-1===rootScope.language.indexOf("en-")&&!GmCXt.isFalse(rootScope.language)&&(t.language=rootScope.language),rootScope.FT.publishedCat&&(t.is_publish="1"),Gm.loading.set(!0),o(6,rootScope.isApiCallOn=!0,rootScope),api.getCategoryList(t,function(e){q(e,r,t.language)})},804)}}function Z(){let r=rootScope.automationSelectionMode?"is_published":p||"tour_order";o(8,v=[...h]),o(8,v=v.sort((e,t)=>{e=e[r],t=t[r];return e<t?-1:t<e?1:0})),rootScope.descOrder&&o(8,v=v.reverse())}function K(t){mgError$1.try(function(){let r=[];t.filter(function(e,t){r.push({category_id:e.category_id,category_order:t+1}),e.category_order=t+1,rootScope.updateCategory(e,"category_order",parseInt(t+1))}),r=GmCXt.removeDuplicates(r);var e={organization_id:rootScope.organization.organization_id,json:r};api.categoriesDrag(e,function(e){rootScope.showPopup(e.message)})},803)}function Y(e){let r=[];e.filter(function(e,t){r.push({tour_id:e.tour_id,tour_order:t+1}),e.tour_order=t+1,rootScope.setTour(e,!1)}),r=GmCXt.removeDuplicates(r),e={category_id:e[0].category_id,json:r},api.toursDrag(e,function(e){rootScope.showPopup(e.message[0])})}let Q=Gm.breadCrumb.subscribe(e=>{o(1,s=e)}),ee=Gm.activeSortFilterStore.subscribe(e=>{p=e,o(0,n=rootScope.sortDataByActiveFilter(n,"category_title",p)),o(2,r=rootScope.sortDataByActiveFilter(r,"category_title",p)),o(3,a=rootScope.sortDataByActiveFilter(a,"tour_title",p))}),te=Gm.allCategories.subscribe(e=>{o(0,n=rootScope.prepCatLangJson(e,d)),t()}),re=(Gm.subCategories.subscribe(e=>{l=e}),Gm.parent.subscribe(e=>{o(7,c=e),t()})),ie=Gm.routeAction.subscribe(e=>{var t,r;e&&"createGuideCompleted"===e.action&&e.data?(t=e.data,(r=get_store_value(Gm.categoryTours)).push(t.tour),Gm.categoryTours.set(r),Gm.routeAction.set(null)):e&&"createCategoryCompleted"===e.action&&e.data?(e.data,Gm.routeAction.set(null)):e&&"on_app_select"===e.action&&e.app&&(Gm.breadCrumb.set([]),Gm.allCategories.set([]),o(6,rootScope.myGuidesFilter=!1,rootScope),o(6,rootScope.currentUserFilter=!1,rootScope),o(6,rootScope.filterByPublishedGuides="",rootScope),A(),Gm.routeAction.set(null))}),J,G=(J=Gm.isTourListRefresh.subscribe(e=>{e&&(e=get_store_value(Gm.parent))&&(g=e.category_id,k(0),Gm.isTourListRefresh.set(!1)),J&&J()}),onMount(()=>{var e=get_store_value(Gm.routeAction);e&&"backwardTraversal"===e.action&&e.data?(j(e.data),Gm.routeAction.set(null)):e&&"forwardTraversal"===e.action&&e.data&&(x(e.data),Gm.routeAction.set(null)),GmCXt.inPlayer&&Gm.loading.set(!1),GmCXt.inPlayer||setTimeout(()=>{A()},100),t(),mg$$1(".category-list").off("scroll").on("scroll",function(){var e=a&&0<a.length&&0<s.length?"tour":r&&0<r.length&&0<s.length?"subcategory":0<n.length||s.length<1?"category":null;if(N!=e&&(y=0,mg$$1(this).scrollTop(0)),"tour"===(N=e)){if(!S)return!0;mg$$1(this).scrollTop()+mg$$1(this).innerHeight()>=mg$$1(this)[0].scrollHeight-20&&mg$$1(this)[0].scrollHeight+20>mg$$1(this).innerHeight()&&(S=!1,O===limit$1)&&(y+=limit$1,k(1))}else if("category"===e){if(!P)return!0;mg$$1(this).scrollTop()+mg$$1(this).innerHeight()>=mg$$1(this)[0].scrollHeight-20&&mg$$1(this)[0].scrollHeight+20>mg$$1(this).innerHeight()&&(P=!1,D===limit$1)&&(y+=limit$1,A(1))}else if("subcategory"===e){if(!w)return!0;mg$$1(this).scrollTop()+mg$$1(this).innerHeight()>=mg$$1(this)[0].scrollHeight-20&&mg$$1(this)[0].scrollHeight+20>mg$$1(this).innerHeight()&&(w=!1,F===limit$1)&&(y+=limit$1,T(1))}})}),mg$$1(window).off("resize").on("resize",t),onDestroy(()=>{document.removeEventListener("forwardTraversal",x),o(6,rootScope.isForwardListenerAttached=!1,rootScope),te(),Q(),U(),V(),re(),ie(),ee(),J(),H()}),null),$=null,E=null,L=null,M=null,I=null;n=rootScope.sortDataByActiveFilter(n,"category_title",p),r=rootScope.sortDataByActiveFilter(r,"category_title",p),a=rootScope.sortDataByActiveFilter(a,"tour_title",p);return e.$$.update=()=>{63&e.$$.dirty[0]&&null!=M&&null!=I&&M!=I&&(s.length<1?o(0,[n[M],n[I]]=[n[I],n[M]],n):r&&0<r.length?o(2,[r[M],r[I]]=[r[I],r[M]],r):a&&o(3,[a[M],a[I]]=[a[I],a[M]],a),o(4,M=I)),8388608&e.$$.dirty[0]&&0<=h.length&&Z()},[n,s,r,a,M,I,rootScope,c,v,void 0,b,G,$,E,L,m,x,j,function(e){return!u&&!("smartTip"===e.tour_type&&"desktop"===e.tour_settings.tour_type||"bot"===e.tour_type&&GmCXt.isPlayer())&&("smartTip"!==e.tour_type||rootScope.FT.creatorApp)},function(e){if("pin"==e.detail.action){let t=e.detail.tour;t.pin=!0,o(23,h=[...h,t]),o(3,a=a.filter(e=>e.tour_id!==t.tour_id))}else if("unpin"==e.detail.action){let t=e.detail.tour;o(23,h=h.filter(e=>e.tour_id!==t.tour_id)),t.pin=!1,o(3,a=[...a,t])}},K,Y,function(e){x(e)},h,(e,t,r)=>{o(11,G=r.clientY),o(13,E=e),o(4,M=t),o(14,L=e.category_id),o(12,$=r.target.getBoundingClientRect().y-r.clientY)},e=>{o(11,G=e.clientY)},(e,t)=>{o(5,I=e)},e=>{K(n),o(14,L=null),o(5,I=null)},(e,t,r)=>{o(11,G=r.clientY),o(13,E=e),o(4,M=t),o(14,L=e.category_id),o(12,$=r.target.getBoundingClientRect().y-r.clientY)},e=>{o(11,G=e.clientY)},(e,t)=>{o(5,I=e)},e=>{K(r),o(14,L=null),o(5,I=null)},function(e,t){e[t].automate=this.checked,o(8,v)},e=>rootScope.onChangeSelectedTourForAutomation(e),(e,t,r)=>{o(11,G=r.clientY),o(13,E=e),o(4,M=t),o(14,L=e.tour_id),o(12,$=r.target.getBoundingClientRect().y-r.clientY)},e=>{o(11,G=e.clientY)},(e,t)=>{o(5,I=e)},e=>{Y(a),o(14,L=null),o(5,I=null)},function(e,t){e[t].automate=this.checked,o(3,a),o(4,M),o(5,I),o(1,s),o(0,n),o(2,r)},e=>rootScope.onChangeSelectedTourForAutomation(e),function(e){binding_callbacks[e?"unshift":"push"](()=>{R=e,o(9,R)})}]}class AllGuide extends SvelteComponent{constructor(e){super(),init(this,e,instance$f,create_fragment$f,safe_not_equal,{},null,[-1,-1,-1])}}function create_if_block_13$3(r){let i,a,o=rootScope.svgs.myGuide+"",n,s,l,c;return{c(){i=element("div"),a=element("button"),n=space(),(s=element("div")).textContent=""+rootScope.labels.preview,attr(a,"id","mgPlayerJSPreview_btn-tour-action-preview"),attr(a,"class","mgPlayerJSPreview_lbl-btn guide-view-header-panel-icons mgPlayerJSPreview_header-icon-preview mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center"),attr(a,"aria-label","preview smartTip"),attr(s,"class","guide-view-header-panel-icons-text"),attr(i,"id","mgPlayerJSPreview_guide-play-mode-preview-container"),attr(i,"class","guide-view-header-panel mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-direction-column")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),l||(c=listen(a,"click",r[10]),l=!0)},p:noop,d(e){e&&detach(i),l=!1,c()}}}function create_if_block_10$4(r){let i,a,o,n=rootScope.svgs.myGuide+"",s,l=r[2](r[0])!==rootScope.playGuideMe&&!rootScope.FT.isPlayer&&!r[0].is_published&&!rootScope.hideMirrorAppCtrl(),c,p=r[2](r[0])===rootScope.playGuideMe&&rootScope.FT.creatorApp&&!r[0].is_published,d,u,g,m,h,_=l&&create_if_block_12$3(r),f=p&&create_if_block_11$4();return{c(){i=element("div"),a=element("div"),o=element("button"),s=space(),_&&_.c(),c=space(),f&&f.c(),d=space(),(u=element("div")).textContent=""+rootScope.labels.guideMe,attr(o,"id","mgPlayerJSPreview_btn-tour-action-guideme"),attr(o,"class","mgPlayerJSPreview_lbl-btn guide-view-header-panel-icons mgPlayerJSPreview_header-icon-guideme mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_active-play-mode"),attr(o,"aria-label","GuideMe"),toggle_class(o,"mgPlayerJSPreview_active-play-mode","guideMe"===r[2](r[0])),attr(a,"class","mgPlayerJSPreview_guide-play-mode-wrapper mgPlayerJSPreview_position-relative"),attr(u,"class","guide-view-header-panel-icons-text ng-binding"),attr(i,"id","mgPlayerJSPreview_guide-play-mode-guide-container"),attr(i,"class",g="guide-view-header-panel mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-direction-column "+(r[0].is_published?"published-tour":""))},m(e,t){insert(e,i,t),append(i,a),append(a,o),o.innerHTML=n,append(a,s),_&&_.m(a,null),append(a,c),f&&f.m(a,null),append(i,d),append(i,u),m||(h=listen(o,"click",r[11]),m=!0)},p(e,t){5&t&&toggle_class(o,"mgPlayerJSPreview_active-play-mode","guideMe"===e[2](e[0])),(l=1&t?e[2](e[0])!==rootScope.playGuideMe&&!rootScope.FT.isPlayer&&!e[0].is_published&&!rootScope.hideMirrorAppCtrl():l)?_?_.p(e,t):((_=create_if_block_12$3(e)).c(),_.m(a,c)):_&&(_.d(1),_=null),(p=1&t?e[2](e[0])===rootScope.playGuideMe&&rootScope.FT.creatorApp&&!e[0].is_published:p)?f?f.p(e,t):((f=create_if_block_11$4()).c(),f.m(a,null)):f&&(f.d(1),f=null),1&t&&g!==(g="guide-view-header-panel mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-direction-column "+(e[0].is_published?"published-tour":""))&&attr(i,"class",g)},d(e){e&&detach(i),_&&_.d(),f&&f.d(),m=!1,h()}}}function create_if_block_12$3(r){let i,a,o;return{c(){attr(i=element("input"),"type","radio"),attr(i,"class","mgPlayerJSPreview_input-radio-custom mgPlayerJSPreview_opacity mgPlayerJSPreview_opacity-2"),attr(i,"name","mgPlayerJSPreview_guide-play-mode")},m(e,t){insert(e,i,t),a||(o=listen(i,"click",r[12]),a=!0)},p:noop,d(e){e&&detach(i),a=!1,o()}}}function create_if_block_11$4(e){let r,i,a=GmCXt.svgs.doubleTick+"",o,n,s;return{c(){r=element("div"),i=element("div"),o=space(),n=element("div"),(s=element("div")).textContent=""+rootScope.labels.defaultGuidePlayAction,attr(s,"class","mgPlayerJSPreview_tooltip-title"),attr(n,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-top-right mgPlayerJSPreview_margin-tb-5"),attr(r,"class","mgPlayerJSPreview_selected-mode-tick mgPlayerJSPreview_position-relative")},m(e,t){insert(e,r,t),append(r,i),i.innerHTML=a,append(r,o),append(r,n),append(n,s)},p:noop,d(e){e&&detach(r)}}}function create_if_block_7$6(r){let i,a,o,n=rootScope.svgs.myShow+"",s,l=!(r[2](r[0])===rootScope.playSlideshow||rootScope.FT.isPlayer||r[0].is_published||rootScope.hideMirrorAppCtrl()||rootScope.isDesktopApp()),c,p=r[2](r[0])===rootScope.playSlideshow&&rootScope.FT.creatorApp&&!r[0].is_published,d,u,g,m,h,_=l&&create_if_block_9$5(r),f=p&&create_if_block_8$6();return{c(){i=element("div"),a=element("div"),o=element("button"),s=space(),_&&_.c(),c=space(),f&&f.c(),d=space(),(u=element("div")).textContent=""+rootScope.labels.showMe,attr(o,"id","mgPlayerJSPreview_btn-tour-action-showme"),attr(o,"class","mgPlayerJSPreview_lbl-btn guide-view-header-panel-icons mgPlayerJSPreview_header-icon-showme mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center"),toggle_class(o,"mgPlayerJSPreview_active-play-mode","slideshow"===r[2](r[0])),attr(a,"class","mgPlayerJSPreview_guide-play-mode-wrapper mgPlayerJSPreview_position-relative"),attr(u,"class","guide-view-header-panel-icons-text ng-binding"),attr(i,"id","mgPlayerJSPreview_guide-play-mode-showme-container"),attr(i,"class",g="guide-view-header-panel mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-direction-column "+(r[0].is_published?"published-tour":""))},m(e,t){insert(e,i,t),append(i,a),append(a,o),o.innerHTML=n,append(a,s),_&&_.m(a,null),append(a,c),f&&f.m(a,null),append(i,d),append(i,u),m||(h=listen(o,"click",r[13]),m=!0)},p(e,t){5&t&&toggle_class(o,"mgPlayerJSPreview_active-play-mode","slideshow"===e[2](e[0])),(l=1&t?!(e[2](e[0])===rootScope.playSlideshow||rootScope.FT.isPlayer||e[0].is_published||rootScope.hideMirrorAppCtrl()||rootScope.isDesktopApp()):l)?_?_.p(e,t):((_=create_if_block_9$5(e)).c(),_.m(a,c)):_&&(_.d(1),_=null),(p=1&t?e[2](e[0])===rootScope.playSlideshow&&rootScope.FT.creatorApp&&!e[0].is_published:p)?f?f.p(e,t):((f=create_if_block_8$6()).c(),f.m(a,null)):f&&(f.d(1),f=null),1&t&&g!==(g="guide-view-header-panel mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-direction-column "+(e[0].is_published?"published-tour":""))&&attr(i,"class",g)},d(e){e&&detach(i),_&&_.d(),f&&f.d(),m=!1,h()}}}function create_if_block_9$5(r){let i,a,o;return{c(){attr(i=element("input"),"type","radio"),attr(i,"class","mgPlayerJSPreview_input-radio-custom mgPlayerJSPreview_opacity mgPlayerJSPreview_opacity-2"),attr(i,"name","mgPlayerJSPreview_guide-play-mode")},m(e,t){insert(e,i,t),a||(o=listen(i,"click",r[14]),a=!0)},p:noop,d(e){e&&detach(i),a=!1,o()}}}function create_if_block_8$6(e){let r,i,a=GmCXt.svgs.doubleTick+"",o,n,s;return{c(){r=element("div"),i=element("div"),o=space(),n=element("div"),(s=element("div")).textContent=""+rootScope.labels.defaultGuidePlayAction,attr(s,"class","mgPlayerJSPreview_tooltip-title"),attr(n,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-top-right mgPlayerJSPreview_margin-tb-5"),attr(r,"class","mgPlayerJSPreview_selected-mode-tick mgPlayerJSPreview_position-relative")},m(e,t){insert(e,r,t),append(r,i),i.innerHTML=a,append(r,o),append(r,n),append(n,s)},p:noop,d(e){e&&detach(r)}}}function create_if_block_4$8(r){let i,a,o,n=rootScope.svgs.myBot+"",s,l=r[2](r[0])!==rootScope.playAuto&&!rootScope.FT.isPlayer&&!r[0].is_published&&!rootScope.hideMirrorAppCtrl(),c,p=r[2](r[0])===rootScope.playAuto&&rootScope.FT.creatorApp&&!r[0].is_published,d,u,g,m,h,_=l&&create_if_block_6$7(r),f=p&&create_if_block_5$7();return{c(){i=element("div"),a=element("div"),o=element("button"),s=space(),_&&_.c(),c=space(),f&&f.c(),d=space(),(u=element("div")).textContent=""+rootScope.labels.doItForMe,attr(o,"id","mgPlayerJSPreview_btn-tour-action-doitforme"),attr(o,"class","mgPlayerJSPreview_lbl-btn guide-view-header-panel-icons mgPlayerJSPreview_header-icon-doit mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center"),toggle_class(o,"mgPlayerJSPreview_active-play-mode","doitforme"===r[2](r[0])),attr(a,"class","mgPlayerJSPreview_guide-play-mode-wrapper mgPlayerJSPreview_position-relative"),attr(u,"class","guide-view-header-panel-icons-text ng-binding"),attr(i,"id","mgPlayerJSPreview_guide-play-mode-doitforme-container"),attr(i,"class",g="guide-view-header-panel mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-direction-column "+(r[0].is_published?"published-tour":""))},m(e,t){insert(e,i,t),append(i,a),append(a,o),o.innerHTML=n,append(a,s),_&&_.m(a,null),append(a,c),f&&f.m(a,null),append(i,d),append(i,u),m||(h=listen(o,"click",r[15]),m=!0)},p(e,t){5&t&&toggle_class(o,"mgPlayerJSPreview_active-play-mode","doitforme"===e[2](e[0])),(l=1&t?e[2](e[0])!==rootScope.playAuto&&!rootScope.FT.isPlayer&&!e[0].is_published&&!rootScope.hideMirrorAppCtrl():l)?_?_.p(e,t):((_=create_if_block_6$7(e)).c(),_.m(a,c)):_&&(_.d(1),_=null),(p=1&t?e[2](e[0])===rootScope.playAuto&&rootScope.FT.creatorApp&&!e[0].is_published:p)?f?f.p(e,t):((f=create_if_block_5$7()).c(),f.m(a,null)):f&&(f.d(1),f=null),1&t&&g!==(g="guide-view-header-panel mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-direction-column "+(e[0].is_published?"published-tour":""))&&attr(i,"class",g)},d(e){e&&detach(i),_&&_.d(),f&&f.d(),m=!1,h()}}}function create_if_block_6$7(r){let i,a,o;return{c(){attr(i=element("input"),"type","radio"),attr(i,"class","mgPlayerJSPreview_input-radio-custom mgPlayerJSPreview_opacity mgPlayerJSPreview_opacity-2"),attr(i,"name","mgPlayerJSPreview_guide-play-mode")},m(e,t){insert(e,i,t),a||(o=listen(i,"click",r[16]),a=!0)},p:noop,d(e){e&&detach(i),a=!1,o()}}}function create_if_block_5$7(e){let r,i,a=GmCXt.svgs.doubleTick+"",o,n,s;return{c(){r=element("div"),i=element("div"),o=space(),n=element("div"),(s=element("div")).textContent=""+rootScope.labels.defaultGuidePlayAction,attr(s,"class","mgPlayerJSPreview_tooltip-title"),attr(n,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-top-right mgPlayerJSPreview_margin-tb-5"),attr(r,"class","mgPlayerJSPreview_selected-mode-tick mgPlayerJSPreview_position-relative")},m(e,t){insert(e,r,t),append(r,i),i.innerHTML=a,append(r,o),append(r,n),append(n,s)},p:noop,d(e){e&&detach(r)}}}function create_if_block_3$9(r){let i,a,o=rootScope.svgs.myTest+"",n,s,l,c,p;return{c(){i=element("div"),a=element("button"),n=space(),(s=element("div")).textContent=""+rootScope.labels.testMe,attr(a,"id","mgPlayerJSPreview_btn-tour-action-testme"),attr(a,"class","mgPlayerJSPreview_lbl-btn guide-view-header-panel-icons mgPlayerJSPreview_header-icon-doit mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center"),attr(a,"aria-label","TestMe"),toggle_class(a,"mgPlayerJSPreview_active-play-mode","testMe"===r[2](r[0])),attr(s,"class","guide-view-header-panel-icons-text ng-binding"),attr(i,"id","mgPlayerJSPreview_guide-play-mode-testme-container"),attr(i,"class",l="guide-view-header-panel mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-direction-column "+(r[0].is_published?"published-tour":"disabled"))},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),c||(p=listen(a,"click",r[17]),c=!0)},p(e,t){5&t&&toggle_class(a,"mgPlayerJSPreview_active-play-mode","testMe"===e[2](e[0])),1&t&&l!==(l="guide-view-header-panel mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-direction-column "+(e[0].is_published?"published-tour":"disabled"))&&attr(i,"class",l)},d(e){e&&detach(i),c=!1,p()}}}function create_if_block$b(r){let i,a,o,n=rootScope.svgs.vlab+"",s,l=r[2](r[0])!==rootScope.playVLab&&!rootScope.FT.isPlayer&&!r[0].is_published&&!rootScope.hideMirrorAppCtrl(),c,p=r[2](r[0])===rootScope.playVLab&&rootScope.FT.creatorApp&&!r[0].is_published,d,u,g,m,h,_=l&&create_if_block_2$9(r),f=p&&create_if_block_1$a();return{c(){i=element("div"),a=element("div"),o=element("button"),s=space(),_&&_.c(),c=space(),f&&f.c(),d=space(),(u=element("div")).textContent=""+rootScope.labels.vLab,attr(o,"id","mgPlayerJSPreview_btn-tour-action-vlab"),attr(o,"class","mgPlayerJSPreview_lbl-btn guide-view-header-panel-icons mgPlayerJSPreview_header-icon-doit mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center"),attr(o,"aria-label","TeachMe"),toggle_class(o,"mgPlayerJSPreview_active-play-mode","vLab"===r[2](r[0])),attr(a,"class","mgPlayerJSPreview_guide-play-mode-wrapper mgPlayerJSPreview_position-relative"),attr(u,"class","guide-view-header-panel-icons-text ng-binding"),attr(i,"id","mgPlayerJSPreview_guide-play-mode-teachme-container"),attr(i,"class",g="guide-view-header-panel mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-direction-column "+(r[0].is_published?"published-tour":""))},m(e,t){insert(e,i,t),append(i,a),append(a,o),o.innerHTML=n,append(a,s),_&&_.m(a,null),append(a,c),f&&f.m(a,null),append(i,d),append(i,u),m||(h=listen(o,"click",r[18]),m=!0)},p(e,t){5&t&&toggle_class(o,"mgPlayerJSPreview_active-play-mode","vLab"===e[2](e[0])),(l=1&t?e[2](e[0])!==rootScope.playVLab&&!rootScope.FT.isPlayer&&!e[0].is_published&&!rootScope.hideMirrorAppCtrl():l)?_?_.p(e,t):((_=create_if_block_2$9(e)).c(),_.m(a,c)):_&&(_.d(1),_=null),(p=1&t?e[2](e[0])===rootScope.playVLab&&rootScope.FT.creatorApp&&!e[0].is_published:p)?f?f.p(e,t):((f=create_if_block_1$a()).c(),f.m(a,null)):f&&(f.d(1),f=null),1&t&&g!==(g="guide-view-header-panel mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-direction-column "+(e[0].is_published?"published-tour":""))&&attr(i,"class",g)},d(e){e&&detach(i),_&&_.d(),f&&f.d(),m=!1,h()}}}function create_if_block_2$9(r){let i,a,o;return{c(){attr(i=element("input"),"type","radio"),attr(i,"class","mgPlayerJSPreview_input-radio-custom mgPlayerJSPreview_opacity mgPlayerJSPreview_opacity-2"),attr(i,"name","mgPlayerJSPreview_guide-play-mode")},m(e,t){insert(e,i,t),a||(o=listen(i,"click",r[19]),a=!0)},p:noop,d(e){e&&detach(i),a=!1,o()}}}function create_if_block_1$a(e){let r,i,a=GmCXt.svgs.doubleTick+"",o,n,s;return{c(){r=element("div"),i=element("div"),o=space(),n=element("div"),(s=element("div")).textContent=""+rootScope.labels.defaultGuidePlayAction,attr(s,"class","mgPlayerJSPreview_tooltip-title"),attr(n,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-top-right mgPlayerJSPreview_margin-tb-5"),attr(r,"class","mgPlayerJSPreview_selected-mode-tick mgPlayerJSPreview_position-relative")},m(e,t){insert(e,r,t),append(r,i),i.innerHTML=a,append(r,o),append(r,n),append(n,s)},p:noop,d(e){e&&detach(r)}}}function create_fragment$e(e){let r,i,a=rootScope.isTooltip(e[0])&&0<e[0].step_count,o,n=e[4](),s,l=e[5](),c,p=e[6](),d,u=e[7](),g,m=e[8](),h=a&&create_if_block_13$3(e),_=n&&create_if_block_10$4(e),f=l&&create_if_block_7$6(e),v=p&&create_if_block_4$8(e),y=u&&create_if_block_3$9(e),P=m&&create_if_block$b(e);return{c(){r=element("div"),i=element("div"),h&&h.c(),o=space(),_&&_.c(),s=space(),f&&f.c(),c=space(),v&&v.c(),d=space(),y&&y.c(),g=space(),P&&P.c(),attr(i,"class","mgPlayerJSPreview_inline-block-vm"),attr(r,"class","guide-view-header-panel-container mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between")},m(e,t){insert(e,r,t),append(r,i),h&&h.m(i,null),append(i,o),_&&_.m(i,null),append(i,s),f&&f.m(i,null),append(i,c),v&&v.m(i,null),append(i,d),y&&y.m(i,null),append(i,g),P&&P.m(i,null)},p(e,[t]){(a=1&t?rootScope.isTooltip(e[0])&&0<e[0].step_count:a)?h?h.p(e,t):((h=create_if_block_13$3(e)).c(),h.m(i,o)):h&&(h.d(1),h=null),n&&_.p(e,t),l&&f.p(e,t),p&&v.p(e,t),u&&y.p(e,t),m&&P.p(e,t)},i:noop,o:noop,d(e){e&&detach(r),h&&h.d(),_&&_.d(),f&&f.d(),v&&v.d(),y&&y.d(),P&&P.d()}}}function instance$e(e,t,r){let i=get_store_value(Gm.currentTour),a=Gm.currentTour.subscribe(e=>{r(0,i=e)}),o=(onDestroy(()=>{a()}),(e,t,r)=>{if(e.stopPropagation(),"doitforme"===t&&GmCXt.disableDoItForMe)return modal.open(rootScope.labels.doitForMeWarning,"warning"),!1;rootScope.guideAction(t,r,i,get_store_value(Gm.CurrentPage),"")});let n=()=>{var e=get_store_value(Gm.currentTour);if(e.steps.filter(function(e){return"inline"===e.step_type}).length)new TestMeWidget({target:document.body,props:{showTestMe:!0,tour:e}});else{let e=new Modal({target:document.body,props:{popupType:"info",msg:rootScope.labels.noInappStepInGuide,onConfirm:()=>e.$destroy()}})}};function s(){(e=JSON.parse(JSON.stringify(i))).is_published=!0;var e={action:"mgPlayerJSPreview_action:preview_smarttip",data:[e]};GmCXt.sendToParentWindow(e)}return[i,o,e=>{e=e.tour_settings.defaultPlayAction;return e="Default"===e?GmCXt.getAppSetting("defaultPlayAction"):e},n,()=>{var e,t,r,i=get_store_value(Gm.currentTour);return!!i&&(e=rootScope.existsOrUndefined(GmCXt.getAppSetting("guideMeSetting")),t=!0,void 0!==(r=GmCXt.createDeepCopy(i.tour_settings)).defaultPlayAction&&"Default"!==r.defaultPlayAction||(r.defaultPlayAction=GmCXt.getAppSetting("defaultPlayAction")),GmCXt.FT.isPlayer&&(t=r.defaultPlayAction===rootScope.playGuideMe||r.defaultPlayAction===rootScope.playSlideshow&&rootScope.enableGuidemeMode),r=GmCXt.isGuide(i)&&!rootScope.isDesktopGuide(i)&&!rootScope.isMobileGuide(i),!!((r=window.matchMedia("(max-width: 480px)").matches&&!GmCXt.isMiniPlayer?GmCXt.isGuide(i)&&rootScope.isDesktopGuide(i)&&!rootScope.isMobileGuide(i):r)&&e&&t))},()=>{var e,t,r,i=get_store_value(Gm.currentTour);return!rootScope.isOnlySurveyGuide(i)&&(e=rootScope.existsOrUndefined(GmCXt.getAppSetting("showMeSetting")),t=!0,void 0!==(r=GmCXt.createDeepCopy(i.tour_settings)).defaultPlayAction&&"Default"!==r.defaultPlayAction||(r.defaultPlayAction=GmCXt.getAppSetting("defaultPlayAction")),GmCXt.FT.isPlayer&&(t=r.defaultPlayAction===rootScope.playGuideMe||r.defaultPlayAction===rootScope.playSlideshow),r=GmCXt.isGuide(i)||rootScope.isCADGuide(i)||rootScope.isDesktopGuide(i)||rootScope.isMobileGuide(i)||GmCXt.isOnboarding(i),GmCXt.FT.showMe)&&e&&t&&r},()=>{var e,t,r=get_store_value(Gm.currentTour);return!rootScope.isOnlySurveyGuide(r)&&(e=!0,void 0!==(t=GmCXt.createDeepCopy(r.tour_settings)).defaultPlayAction&&"Default"!==t.defaultPlayAction||(t.defaultPlayAction=GmCXt.getAppSetting("defaultPlayAction")),GmCXt.FT.isPlayer&&(e=t.defaultPlayAction===rootScope.playAuto),rootScope._doitforme)&&!rootScope.isCADGuide(r)&&GmCXt.isGuide(r)&&!rootScope.isDesktopGuide(r)&&!rootScope.isMobileGuide(r)&&e},()=>{var e,t,r,i=get_store_value(Gm.currentTour);return!rootScope.isOnlySurveyGuide(i)&&(e=rootScope.existsOrUndefined(GmCXt.getAppSetting("testMeSetting")),t=!0,void 0!==(r=GmCXt.createDeepCopy(i.tour_settings)).defaultPlayAction&&"Default"!==r.defaultPlayAction||(r.defaultPlayAction=GmCXt.getAppSetting("defaultPlayAction")),GmCXt.FT.isPlayer&&(t=r.defaultPlayAction===rootScope.playGuideMe),r=GmCXt.isGuide(i)&&!rootScope.isDesktopGuide(i)&&!rootScope.isMobileGuide(i)&&!GmCXt.containBranchStep(i),GmCXt.FT.testme)&&e&&t&&r},()=>{var e,t,r,i=get_store_value(Gm.currentTour);return!rootScope.isOnlySurveyGuide(i)&&(e=rootScope.existsOrUndefined(GmCXt.getAppSetting("vLab")),t=!0,void 0!==(r=GmCXt.createDeepCopy(i.tour_settings)).defaultPlayAction&&"Default"!==r.defaultPlayAction||(r.defaultPlayAction=GmCXt.getAppSetting("defaultPlayAction")),GmCXt.FT.isPlayer&&(t=r.defaultPlayAction===rootScope.playGuideMe||r.defaultPlayAction===rootScope.playVLab),GmCXt.isGuide(i))&&!rootScope.isDesktopGuide(i)&&!rootScope.isMobileGuide(i)&&!GmCXt.containBranchStep(i)&&e&&t&&rootScope.enableMyteacher},s,()=>s(),e=>o(e,"",""),()=>{r(0,i.tour_settings.defaultPlayAction="guideMe",i),rootScope.updateTourData(i)},e=>o(e,"slideshow"),()=>{r(0,i.tour_settings.defaultPlayAction="slideshow",i),rootScope.updateTourData(i)},e=>o(e,"doitforme"),()=>{r(0,i.tour_settings.defaultPlayAction="doitforme",i),rootScope.updateTourData(i)},e=>n(),e=>o(e,"vLab"),()=>{r(0,i.tour_settings.defaultPlayAction="vLab",i),rootScope.updateTourData(i)}]}class StepModes extends SvelteComponent{constructor(e){super(),init(this,e,instance$e,create_fragment$e,safe_not_equal,{})}}function add_css$2(e){append_styles(e,"svelte-hv9a3t",".mgPlayerJSPreview_tg-img.svelte-hv9a3t{width:100%;height:100%}")}function create_else_block_1$1(e){let r,i,a,o,n,s,l,c=[create_if_block_10$3,create_else_block_2$1],p=[];function d(e,t){return(a=null==(a=66&t[0]?null:a)?!!e[1].isTrackingGuide(e[6]):a)?0:1}return o=d(e,[-1,-1]),n=p[o]=c[o](e),{c(){r=element("div"),i=element("div"),n.c(),attr(i,"id",s="step-"+e[2].step_id),attr(i,"class","step-title-description-wrapper"),attr(r,"class","step-item")},m(e,t){insert(e,r,t),append(r,i),p[o].m(i,null),l=!0},p(e,t){let r=o;(o=d(e,t))===r?p[o].p(e,t):(group_outros(),transition_out(p[r],1,1,()=>{p[r]=null}),check_outros(),(n=p[o])?n.p(e,t):(n=p[o]=c[o](e)).c(),transition_in(n,1),n.m(i,null)),(!l||4&t[0]&&s!==(s="step-"+e[2].step_id))&&attr(i,"id",s)},i(e){l||(transition_in(n),l=!0)},o(e){transition_out(n),l=!1},d(e){e&&detach(r),p[o].d()}}}function create_if_block$a(r){let i,a,o=r[0]+1+"",n,s,l,c,p=r[1].FT.creatorApp&&r[1].hasTourAccess(r[6])&&!r[1].hideMirrorAppCtrl()&&!(r[6].is_published&&"video"==r[2].step_type),d,u=0<r[2].step_video||-1==r[2].screen_url.indexOf("default_icon"),g,m=r[1].isUploadTutorial(r[6]),h,_,f=getTutorialDesc(r[2])+"",v,y,P,S,w=r[1].labels.showMe+"",b,C,k,T=r[1].svgs.guidePlayIconShowme+"",x,A=!(r[1].isUploadTutorial(r[6])&&!r[1].hideMirrorAppCtrl()),J,G,$,E=p&&create_if_block_6$6(r),L=u&&create_if_block_4$7(r),M=m&&create_if_block_3$8(r),I=A&&create_if_block_1$9(r);return{c(){i=element("div"),a=element("div"),n=text(o),s=space(),l=element("dnd-nodrag"),c=element("div"),E&&E.c(),d=space(),L&&L.c(),g=space(),M&&M.c(),h=space(),_=element("div"),y=space(),P=element("div"),S=element("div"),b=text(w),C=space(),k=element("div"),x=space(),I&&I.c(),attr(a,"class","mgPlayerJSPreview_font-size-15 mgPlayerJSPreview_font-weight-550"),attr(c,"class","mgPlayerJSPreview_tg-btn-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between"),set_custom_element_data(l,"class","mgPlayerJSPreview_dnd-nodrag-inline-block mgPlayerJSPreview_step-action-menu-wrapper"),attr(i,"class","mgPlayerJSPreview_tg-view-header mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between mgPlayerJSPreview_padding-20"),attr(_,"class",v="mgPlayerJSPreview_tg-content-wrapper "+(0==r[2].step_video&&0<=r[2].screen_url.indexOf("default_icon")?"mgPlayerJSPreview_min-tg-content-wrapper":"")),attr(k,"class","mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_margin-lr-10"),attr(S,"class","mgPlayerJSPreview_play-step-icon-wrapper mgPlayerJSPreview_position-center mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_font-size-16"),attr(P,"class","mgPlayerJSPreview_step-overlay")},m(e,t){insert(e,i,t),append(i,a),append(a,n),append(i,s),append(i,l),append(l,c),E&&E.m(c,null),insert(e,d,t),L&&L.m(e,t),insert(e,g,t),M&&M.m(e,t),insert(e,h,t),insert(e,_,t),_.innerHTML=f,insert(e,y,t),insert(e,P,t),append(P,S),append(S,b),append(S,C),append(S,k),k.innerHTML=T,append(P,x),I&&I.m(P,null),J=!0,G||($=listen(S,"click",r[28]),G=!0)},p(e,t){(!J||1&t[0])&&o!==(o=e[0]+1+"")&&set_data(n,o),(p=70&t[0]?e[1].FT.creatorApp&&e[1].hasTourAccess(e[6])&&!e[1].hideMirrorAppCtrl()&&!(e[6].is_published&&"video"==e[2].step_type):p)?E?E.p(e,t):((E=create_if_block_6$6(e)).c(),E.m(c,null)):E&&(E.d(1),E=null),(u=4&t[0]?0<e[2].step_video||-1==e[2].screen_url.indexOf("default_icon"):u)?L?L.p(e,t):((L=create_if_block_4$7(e)).c(),L.m(g.parentNode,g)):L&&(L.d(1),L=null),(m=66&t[0]?e[1].isUploadTutorial(e[6]):m)?M?M.p(e,t):((M=create_if_block_3$8(e)).c(),M.m(h.parentNode,h)):M&&(M.d(1),M=null),(!J||4&t[0])&&f!==(f=getTutorialDesc(e[2])+"")&&(_.innerHTML=f),(!J||4&t[0]&&v!==(v="mgPlayerJSPreview_tg-content-wrapper "+(0==e[2].step_video&&0<=e[2].screen_url.indexOf("default_icon")?"mgPlayerJSPreview_min-tg-content-wrapper":"")))&&attr(_,"class",v),(!J||2&t[0])&&w!==(w=e[1].labels.showMe+"")&&set_data(b,w),(!J||2&t[0])&&T!==(T=e[1].svgs.guidePlayIconShowme+"")&&(k.innerHTML=T),(A=66&t[0]?!(e[1].isUploadTutorial(e[6])&&!e[1].hideMirrorAppCtrl()):A)?I?(I.p(e,t),66&t[0]&&transition_in(I,1)):((I=create_if_block_1$9(e)).c(),transition_in(I,1),I.m(P,null)):I&&(group_outros(),transition_out(I,1,1,()=>{I=null}),check_outros())},i(e){J||(transition_in(I),J=!0)},o(e){transition_out(I),J=!1},d(e){e&&(detach(i),detach(d),detach(g),detach(h),detach(_),detach(y),detach(P)),E&&E.d(),L&&L.d(e),M&&M.d(e),I&&I.d(),G=!1,$()}}}function create_else_block_2$1(e){let r,i,a,o,n=e[0]+1+"",s,D,F,l,c=truncate(htmlToPlaintext$2(e[2].step_title),110)+"",p,d=1<e[6].filteredSteps.length&&!e[6].is_published&&e[1].hasTourAccess(e[6])&&!e[2].step_screen_temp&&!e[1].isDesktopApp()&&!e[1].hideMirrorAppCtrl(),u,g,m=e[1].isUserLoggedIn()&&e[1].FT.creatorApp&&e[1].hasTourAccess(e[6])&&!e[1].hideMirrorAppCtrl()&&!(e[6].is_published&&"video"===e[2].step_type),h,_,f,v=truncate(htmlToPlaintext$2(e[2].step_description),120)+"",y,P,S,w,b,O=e[9](),R,C=e[10]()&&"survey"!==e[2].step_type,N,H=e[13]()&&("inline"==e[2].step_type||"message"==e[2].step_type),B,U=e[16](),V,z=e[17](e[2])&&!e[6].is_published,j,k,T,x=e[2].step_settings.startPoint&&create_if_block_39(e),A=d&&create_if_block_38(e),J=m&&create_if_block_29(e),G=O&&create_if_block_28(e),$=C&&create_if_block_27(e),E=H&&create_if_block_26(e),L=U&&create_if_block_25(e),M=z&&create_if_block_24(e);function W(e,t){return(k=null==(k=64&t[0]?null:k)?!!GmCXt.isOnboarding(e[6]):k)?create_if_block_19$1:e[2].step_type===GmCXt.STEP_TYPE_VIDEO?create_if_block_23:create_else_block_3}let I=W(e,[-1,-1]),X=I(e);return{c(){r=element("div"),x&&x.c(),i=space(),a=element("dnd-nodrag"),o=element("span"),s=text(n),D=text("."),F=text("\n\t\t\t\t\t\tÂ \n\t\t\t\t\t\t"),l=element("span"),p=space(),A&&A.c(),u=space(),g=element("dnd-nodrag"),J&&J.c(),h=space(),_=element("dnd-nodrag"),f=element("div"),y=space(),P=element("dnd-nodrag"),S=element("div"),w=element("div"),b=element("div"),G&&G.c(),R=space(),$&&$.c(),N=space(),E&&E.c(),B=space(),L&&L.c(),V=space(),M&&M.c(),j=space(),X.c(),attr(o,"class","ng-binding"),attr(l,"class","ng-binding"),set_custom_element_data(a,"class","mgPlayerJSPreview_dnd-nodrag-inline-block"),attr(r,"class","ege-inline-block-vt step-title-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center"),set_custom_element_data(g,"class","mgPlayerJSPreview_dnd-nodrag-inline-block mgPlayerJSPreview_step-action-menu-wrapper"),attr(f,"class","step-description-wrapper"),set_custom_element_data(_,"class","mgPlayerJSPreview_dnd-nodrag-block"),attr(b,"class","mgPlayerJSPreview_position-center mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_font-size-16"),attr(w,"class","step-image-overlay"),attr(S,"class","step-image-wrapper"),set_custom_element_data(P,"class","mgPlayerJSPreview_dnd-nodrag-block"),set_custom_element_data(P,"draggable","true")},m(e,t){insert(e,r,t),x&&x.m(r,null),append(r,i),append(r,a),append(a,o),append(o,s),append(o,D),append(a,F),append(a,l),l.innerHTML=c,insert(e,p,t),A&&A.m(e,t),insert(e,u,t),insert(e,g,t),J&&J.m(g,null),insert(e,h,t),insert(e,_,t),append(_,f),f.innerHTML=v,insert(e,y,t),insert(e,P,t),append(P,S),append(S,w),append(w,b),G&&G.m(b,null),append(b,R),$&&$.m(b,null),append(b,N),E&&E.m(b,null),append(b,B),L&&L.m(b,null),append(w,V),M&&M.m(w,null),append(S,j),X.m(S,null),T=!0},p(e,t){e[2].step_settings.startPoint?x?x.p(e,t):((x=create_if_block_39(e)).c(),x.m(r,i)):x&&(x.d(1),x=null),(!T||1&t[0])&&n!==(n=e[0]+1+"")&&set_data(s,n),(!T||4&t[0])&&c!==(c=truncate(htmlToPlaintext$2(e[2].step_title),110)+"")&&(l.innerHTML=c),(d=70&t[0]?1<e[6].filteredSteps.length&&!e[6].is_published&&e[1].hasTourAccess(e[6])&&!e[2].step_screen_temp&&!e[1].isDesktopApp()&&!e[1].hideMirrorAppCtrl():d)?A?A.p(e,t):((A=create_if_block_38(e)).c(),A.m(u.parentNode,u)):A&&(A.d(1),A=null),(m=70&t[0]?e[1].isUserLoggedIn()&&e[1].FT.creatorApp&&e[1].hasTourAccess(e[6])&&!e[1].hideMirrorAppCtrl()&&!(e[6].is_published&&"video"===e[2].step_type):m)?J?J.p(e,t):((J=create_if_block_29(e)).c(),J.m(g,null)):J&&(J.d(1),J=null),(!T||4&t[0])&&v!==(v=truncate(htmlToPlaintext$2(e[2].step_description),120)+"")&&(f.innerHTML=v),O&&G.p(e,t),(C=4&t[0]?e[10]()&&"survey"!==e[2].step_type:C)?$?$.p(e,t):(($=create_if_block_27(e)).c(),$.m(b,N)):$&&($.d(1),$=null),(H=4&t[0]?e[13]()&&("inline"==e[2].step_type||"message"==e[2].step_type):H)?E?E.p(e,t):((E=create_if_block_26(e)).c(),E.m(b,B)):E&&(E.d(1),E=null),U&&L.p(e,t),(z=68&t[0]?e[17](e[2])&&!e[6].is_published:z)?M?(M.p(e,t),68&t[0]&&transition_in(M,1)):((M=create_if_block_24(e)).c(),transition_in(M,1),M.m(w,null)):M&&(group_outros(),transition_out(M,1,1,()=>{M=null}),check_outros()),I===(I=W(e,t))&&X?X.p(e,t):(X.d(1),(X=I(e))&&(X.c(),X.m(S,null)))},i(e){T||(transition_in(M),T=!0)},o(e){transition_out(M),T=!1},d(e){e&&(detach(r),detach(p),detach(u),detach(g),detach(h),detach(_),detach(y),detach(P)),x&&x.d(),A&&A.d(e),J&&J.d(),G&&G.d(),$&&$.d(),E&&E.d(),L&&L.d(),M&&M.d(),X.d()}}}function create_if_block_10$3(r){let i,a,o,n,s=r[1].svgs.iconAddStepInline+"",l,c,p=r[1].svgs.endTracking+"",d,u,g=r[1].svgs.terminate+"",m,h,_=r[1].svgs.captureEvents+"",f,v,y,P,S,w=r[1].isUserLoggedIn()&&r[1].FT.creatorApp&&r[1].hasTourAccess(r[6])&&!r[1].hideMirrorAppCtrl()&&!(r[6].is_published&&"video"==r[2].step_type),b,C,k=r[12](),T,x,A,J="smartTip"!==!r[2].step_type&&create_if_block_18$1(r),G=w&&create_if_block_15$1(r),$=k&&create_if_block_11$3(r);return{c(){i=element("div"),a=element("dnd-nodrag"),o=element("div"),n=element("div"),l=space(),c=element("div"),d=space(),u=element("div"),m=space(),h=element("div"),f=space(),v=element("dnd-nodrag"),y=text("Â \n\t\t\t\t\t\t"),J&&J.c(),P=space(),S=element("dnd-nodrag"),G&&G.c(),b=space(),C=element("dnd-nodrag"),$&&$.c(),set_style(n,"display",r[2].step_settings&&"start"===r[2].step_settings.trackerType?"":"none"),attr(n,"class","mgPlayerJSPreview_inline-block-vm"),set_style(c,"display",r[2].step_settings&&"cancel"===r[2].step_settings.trackerType?"":"none"),attr(c,"class","mgPlayerJSPreview_inline-block-vm"),set_style(u,"display",r[2].step_settings&&"end"===r[2].step_settings.trackerType?"":"none"),attr(u,"class","mgPlayerJSPreview_inline-block-vm"),set_style(h,"display","tag"===r[2].step_type?"":"none"),attr(h,"class","mgPlayerJSPreview_inline-block-vm"),attr(o,"class","mgPlayerJSPreview_icon-step-insights mgPlayerJSPreview_inline-block-vm"),set_custom_element_data(a,"class","mgPlayerJSPreview_dnd-nodrag-inline-block"),set_custom_element_data(v,"class","mgPlayerJSPreview_dnd-nodrag-inline-block"),attr(i,"class","ege-inline-block-vt step-title-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center"),set_custom_element_data(S,"class","mgPlayerJSPreview_dnd-nodrag-inline-block mgPlayerJSPreview_step-action-menu-wrapper"),set_custom_element_data(C,"class","mgPlayerJSPreview_dnd-nodrag-block")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),n.innerHTML=s,append(o,l),append(o,c),c.innerHTML=p,append(o,d),append(o,u),u.innerHTML=g,append(o,m),append(o,h),h.innerHTML=_,append(i,f),append(i,v),append(v,y),J&&J.m(v,null),insert(e,P,t),insert(e,S,t),G&&G.m(S,null),insert(e,b,t),insert(e,C,t),$&&$.m(C,null),T=!0,x||(A=listen(i,"click",r[29]),x=!0)},p(e,t){(!T||2&t[0])&&s!==(s=e[1].svgs.iconAddStepInline+"")&&(n.innerHTML=s),(!T||4&t[0])&&set_style(n,"display",e[2].step_settings&&"start"===e[2].step_settings.trackerType?"":"none"),(!T||2&t[0])&&p!==(p=e[1].svgs.endTracking+"")&&(c.innerHTML=p),(!T||4&t[0])&&set_style(c,"display",e[2].step_settings&&"cancel"===e[2].step_settings.trackerType?"":"none"),(!T||2&t[0])&&g!==(g=e[1].svgs.terminate+"")&&(u.innerHTML=g),(!T||4&t[0])&&set_style(u,"display",e[2].step_settings&&"end"===e[2].step_settings.trackerType?"":"none"),(!T||2&t[0])&&_!==(_=e[1].svgs.captureEvents+"")&&(h.innerHTML=_),(!T||4&t[0])&&set_style(h,"display","tag"===e[2].step_type?"":"none"),"smartTip"!==!e[2].step_type?J?J.p(e,t):((J=create_if_block_18$1(e)).c(),J.m(v,null)):J&&(J.d(1),J=null),(w=70&t[0]?e[1].isUserLoggedIn()&&e[1].FT.creatorApp&&e[1].hasTourAccess(e[6])&&!e[1].hideMirrorAppCtrl()&&!(e[6].is_published&&"video"==e[2].step_type):w)?G?G.p(e,t):((G=create_if_block_15$1(e)).c(),G.m(S,null)):G&&(G.d(1),G=null),k&&$.p(e,t)},i(e){T||(transition_in($),T=!0)},o(e){transition_out($),T=!1},d(e){e&&(detach(i),detach(P),detach(S),detach(b),detach(C)),J&&J.d(),G&&G.d(),$&&$.d(),x=!1,A()}}}function create_if_block_39(e){let r,i=e[1].svgs.startPoint+"";return{c(){r=element("div")},m(e,t){insert(e,r,t),r.innerHTML=i},p(e,t){2&t[0]&&i!==(i=e[1].svgs.startPoint+"")&&(r.innerHTML=i)},d(e){e&&detach(r)}}}function create_if_block_38(e){let r,i=e[1].svgs.dragStep+"";return{c(){attr(r=element("div"),"class","mgPlayerJSPreview_drag-step-icon-wrapper")},m(e,t){insert(e,r,t),r.innerHTML=i},p(e,t){2&t[0]&&i!==(i=e[1].svgs.dragStep+"")&&(r.innerHTML=i)},d(e){e&&detach(r)}}}function create_if_block_29(r){let i,a,o,n,s,l="image"!==r[2].step_type&&"video"!==r[2].step_type&&"guide"!==r[2].step_type&&!r[1].isDesktopGuide(r[6])&&!r[1].isMobileGuide(r[6])&&!r[1].isElectron,c,p=!GmCXt.isOnboarding(r[6]),d,u=!GmCXt.isOnboarding(r[6])&&r[1].isOwnerOrAppAdmin()&&"inline"===r[2].step_type,g,m,h,_,f=r[1].svgs.historyIcon+"",v,y,P=r[1].labels.history+"",S,w,b,C,k,T,x=0===r[1].pendingStepCount&&r[1].showAddAutomationOption(r[6])&&"guide"!==r[2].step_type,A,J,F,G=!("video"===r[2].step_type&&r[6].is_published)&&create_if_block_37(r),$=!r[6].is_published&&"guide"!==r[2].step_type&&create_if_block_36(r),E=!r[6].is_published&&"inline"===r[2].step_type&&"guide"!==r[2].step_type&&create_if_block_35(r),L=l&&create_if_block_34(r),M=p&&create_if_block_33(r),I=u&&create_if_block_32(r),X=!r[6].is_published&&create_if_block_31(r),D=x&&create_if_block_30(r);return{c(){i=element("div"),G&&G.c(),a=space(),o=element("div"),$&&$.c(),n=space(),E&&E.c(),s=space(),L&&L.c(),c=space(),M&&M.c(),d=space(),I&&I.c(),g=space(),X&&X.c(),m=space(),h=element("div"),_=element("div"),v=space(),y=element("div"),S=text(P),C=space(),k=element("div"),T=space(),D&&D.c(),attr(_,"class","step-action-menu-options-dropdown-item-icon ege-inline-block-div"),attr(y,"class","step-action-menu-options-dropdown-item-label ege-inline-block-div"),attr(h,"id",w="mgPlayerJSPreview_option-step-history-"+r[2].step_id),attr(h,"class",b="step-action-menu-options-dropdown-item "+(r[2].step_screen_temp?"mgPlayerJSPreview_disabled":"")),attr(k,"class","horizontal-line"),attr(o,"id",A="step-menu-options-"+r[2].step_id),attr(o,"class","step-action-menu-options-dropdown"),attr(i,"class","step-action-menu-container")},m(e,t){insert(e,i,t),G&&G.m(i,null),append(i,a),append(i,o),$&&$.m(o,null),append(o,n),E&&E.m(o,null),append(o,s),L&&L.m(o,null),append(o,c),M&&M.m(o,null),append(o,d),I&&I.m(o,null),append(o,g),X&&X.m(o,null),append(o,m),append(o,h),append(h,_),_.innerHTML=f,append(h,v),append(h,y),append(y,S),append(o,C),append(o,k),append(o,T),D&&D.m(o,null),J||(F=listen(h,"click",r[42]),J=!0)},p(e,t){"video"===e[2].step_type&&e[6].is_published?G&&(G.d(1),G=null):G?G.p(e,t):((G=create_if_block_37(e)).c(),G.m(i,a)),e[6].is_published||"guide"===e[2].step_type?$&&($.d(1),$=null):$?$.p(e,t):(($=create_if_block_36(e)).c(),$.m(o,n)),e[6].is_published||"inline"!==e[2].step_type||"guide"===e[2].step_type?E&&(E.d(1),E=null):E?E.p(e,t):((E=create_if_block_35(e)).c(),E.m(o,s)),(l=70&t[0]?"image"!==e[2].step_type&&"video"!==e[2].step_type&&"guide"!==e[2].step_type&&!e[1].isDesktopGuide(e[6])&&!e[1].isMobileGuide(e[6])&&!e[1].isElectron:l)?L?L.p(e,t):((L=create_if_block_34(e)).c(),L.m(o,c)):L&&(L.d(1),L=null),(p=64&t[0]?!GmCXt.isOnboarding(e[6]):p)?M?M.p(e,t):((M=create_if_block_33(e)).c(),M.m(o,d)):M&&(M.d(1),M=null),(u=70&t[0]?!GmCXt.isOnboarding(e[6])&&e[1].isOwnerOrAppAdmin()&&"inline"===e[2].step_type:u)?I?I.p(e,t):((I=create_if_block_32(e)).c(),I.m(o,g)):I&&(I.d(1),I=null),e[6].is_published?X&&(X.d(1),X=null):X?X.p(e,t):((X=create_if_block_31(e)).c(),X.m(o,m)),2&t[0]&&f!==(f=e[1].svgs.historyIcon+"")&&(_.innerHTML=f),2&t[0]&&P!==(P=e[1].labels.history+"")&&set_data(S,P),4&t[0]&&w!==(w="mgPlayerJSPreview_option-step-history-"+e[2].step_id)&&attr(h,"id",w),4&t[0]&&b!==(b="step-action-menu-options-dropdown-item "+(e[2].step_screen_temp?"mgPlayerJSPreview_disabled":""))&&attr(h,"class",b),(x=70&t[0]?0===e[1].pendingStepCount&&e[1].showAddAutomationOption(e[6])&&"guide"!==e[2].step_type:x)?D?D.p(e,t):((D=create_if_block_30(e)).c(),D.m(o,null)):D&&(D.d(1),D=null),4&t[0]&&A!==(A="step-menu-options-"+e[2].step_id)&&attr(o,"id",A)},d(e){e&&detach(i),G&&G.d(),$&&$.d(),E&&E.d(),L&&L.d(),M&&M.d(),I&&I.d(),X&&X.d(),D&&D.d(),J=!1,F()}}}function create_if_block_37(r){let i,a,o,n,s,l,c,p,d,u,g;return{c(){i=element("div"),a=svg_element("svg"),o=svg_element("defs"),n=svg_element("g"),s=svg_element("g"),l=svg_element("g"),attr(c=svg_element("path"),"d","M3.5,9 C2.125,9 1,10.125 1,11.5 C1,12.875 2.125,14 3.5,14 C4.875,14 6,12.875 6,11.5 C6,10.125 4.875,9 3.5,9 L3.5,9 Z M18.5,9 C17.125,9 16,10.125 16,11.5 C16,12.875 17.125,14 18.5,14 C19.875,14 21,12.875 21,11.5 C21,10.125 19.875,9 18.5,9 L18.5,9 Z M11,9 C9.625,9 8.5,10.125 8.5,11.5 C8.5,12.875 9.625,14 11,14 C12.375,14 13.5,12.875 13.5,11.5 C13.5,10.125 12.375,9 11,9 L11,9 Z"),attr(c,"id","Shape"),attr(l,"id","more-actions"),attr(s,"id","step-action-icons"),attr(s,"fill","#757575"),attr(n,"id","Page-1"),attr(n,"stroke","none"),attr(n,"stroke-width","1"),attr(n,"fill","none"),attr(n,"fill-rule","evenodd"),attr(a,"width","18px"),attr(a,"height","18px"),attr(a,"viewBox","0 0 22 22"),attr(a,"version","1.2"),attr(a,"xmlns","http://www.w3.org/2000/svg"),attr(a,"xmlns:xlink","http://www.w3.org/1999/xlink"),attr(i,"class",p="step-pencil-icon "+(0<r[1].pendingStepCount?"mgPlayerJSPreview_disable-edit":"")),attr(i,"id",d="step-pencil-icon-"+r[2].step_id)},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(a,n),append(n,s),append(s,l),append(l,c),u||(g=listen(i,"click",r[35]),u=!0)},p(e,t){2&t[0]&&p!==(p="step-pencil-icon "+(0<e[1].pendingStepCount?"mgPlayerJSPreview_disable-edit":""))&&attr(i,"class",p),4&t[0]&&d!==(d="step-pencil-icon-"+e[2].step_id)&&attr(i,"id",d)},d(e){e&&detach(i),u=!1,g()}}}function create_if_block_36(r){let i,a,o=r[1].svgs.iconEdit+"",n,s,l=r[1].labels.btnEdit+"",c,p,d,u,g,m,h;return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),c=text(l),u=space(),g=element("div"),attr(a,"class","step-action-menu-options-dropdown-item-icon ege-inline-block-div"),attr(s,"class","step-action-menu-options-dropdown-item-label ege-inline-block-div"),attr(i,"id",p="mgPlayerJSPreview_option-step-edit-"+r[2].step_id),attr(i,"class",d="step-action-menu-options-dropdown-item "+(r[2].step_screen_temp?"mgPlayerJSPreview_disabled":"")),attr(g,"class","horizontal-line")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,c),insert(e,u,t),insert(e,g,t),m||(h=listen(i,"click",r[36]),m=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.iconEdit+"")&&(a.innerHTML=o),2&t[0]&&l!==(l=e[1].labels.btnEdit+"")&&set_data(c,l),4&t[0]&&p!==(p="mgPlayerJSPreview_option-step-edit-"+e[2].step_id)&&attr(i,"id",p),4&t[0]&&d!==(d="step-action-menu-options-dropdown-item "+(e[2].step_screen_temp?"mgPlayerJSPreview_disabled":""))&&attr(i,"class",d)},d(e){e&&(detach(i),detach(u),detach(g)),m=!1,h()}}}function create_if_block_35(r){let i,a,o=r[1].svgs.iconEdit+"",n,s,l=r[1].labels.editOnImg+"",c,p,d,u,g,m,h;return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),c=text(l),u=space(),g=element("div"),attr(a,"class","step-action-menu-options-dropdown-item-icon ege-inline-block-div"),attr(s,"class","step-action-menu-options-dropdown-item-label ege-inline-block-div"),attr(i,"id",p="mgPlayerJSPreview_option-step-edit-img-"+r[2].step_id),attr(i,"class",d="step-action-menu-options-dropdown-item "+(r[2].step_screen_temp?"mgPlayerJSPreview_disabled":"")),attr(g,"class","horizontal-line")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,c),insert(e,u,t),insert(e,g,t),m||(h=listen(i,"click",r[37]),m=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.iconEdit+"")&&(a.innerHTML=o),2&t[0]&&l!==(l=e[1].labels.editOnImg+"")&&set_data(c,l),4&t[0]&&p!==(p="mgPlayerJSPreview_option-step-edit-img-"+e[2].step_id)&&attr(i,"id",p),4&t[0]&&d!==(d="step-action-menu-options-dropdown-item "+(e[2].step_screen_temp?"mgPlayerJSPreview_disabled":""))&&attr(i,"class",d)},d(e){e&&(detach(i),detach(u),detach(g)),m=!1,h()}}}function create_if_block_34(r){let i,a,o=r[1].svgs.iconGoToStepUrl+"",n,s,l=r[1].labels.btnGoToStepUrl+"",c,p,d,u,g,m;return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),c=text(l),d=space(),u=element("div"),attr(a,"class","step-action-menu-options-dropdown-item-icon ege-inline-block-div"),attr(s,"class","step-action-menu-options-dropdown-item-label ege-inline-block-div"),attr(i,"id",p="mgPlayerJSPreview_option-step-goto-step-url-"+r[2].step_id),attr(i,"class","step-action-menu-options-dropdown-item"),attr(u,"class","horizontal-line")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,c),insert(e,d,t),insert(e,u,t),g||(m=listen(i,"click",r[38]),g=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.iconGoToStepUrl+"")&&(a.innerHTML=o),2&t[0]&&l!==(l=e[1].labels.btnGoToStepUrl+"")&&set_data(c,l),4&t[0]&&p!==(p="mgPlayerJSPreview_option-step-goto-step-url-"+e[2].step_id)&&attr(i,"id",p)},d(e){e&&(detach(i),detach(d),detach(u)),g=!1,m()}}}function create_if_block_33(r){let i,a,o=r[1].svgs.copyGuideIcon+"",n,s,l=r[1].labels.btnCopyStep+"",c,p,d,u,g,m,h;return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),c=text(l),u=space(),g=element("div"),attr(a,"class","step-action-menu-options-dropdown-item-icon ege-inline-block-div"),attr(s,"class","step-action-menu-options-dropdown-item-label ege-inline-block-div"),attr(i,"id",p="mgPlayerJSPreview_option-step-copy-"+r[2].step_id),attr(i,"class",d="step-action-menu-options-dropdown-item "+(r[2].step_screen_temp?"mgPlayerJSPreview_disabled":"")),attr(g,"class","horizontal-line")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,c),insert(e,u,t),insert(e,g,t),m||(h=listen(i,"click",r[39]),m=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.copyGuideIcon+"")&&(a.innerHTML=o),2&t[0]&&l!==(l=e[1].labels.btnCopyStep+"")&&set_data(c,l),4&t[0]&&p!==(p="mgPlayerJSPreview_option-step-copy-"+e[2].step_id)&&attr(i,"id",p),4&t[0]&&d!==(d="step-action-menu-options-dropdown-item "+(e[2].step_screen_temp?"mgPlayerJSPreview_disabled":""))&&attr(i,"class",d)},d(e){e&&(detach(i),detach(u),detach(g)),m=!1,h()}}}function create_if_block_32(r){let i,a,o=r[1].svgs.copyGuideIcon+"",n,s,l=r[1].labels.findAndReplace+"",c,p,d,u,g,m,h;return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),c=text(l),u=space(),g=element("div"),attr(a,"class","step-action-menu-options-dropdown-item-icon ege-inline-block-div"),attr(s,"class","step-action-menu-options-dropdown-item-label ege-inline-block-div"),attr(i,"id",p="mgPlayerJSPreview_option-step-find-replace-"+r[2].step_id),attr(i,"class",d="step-action-menu-options-dropdown-item "+(r[2].step_screen_temp?"mgPlayerJSPreview_disabled":"")),attr(g,"class","horizontal-line")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,c),insert(e,u,t),insert(e,g,t),m||(h=listen(i,"click",r[40]),m=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.copyGuideIcon+"")&&(a.innerHTML=o),2&t[0]&&l!==(l=e[1].labels.findAndReplace+"")&&set_data(c,l),4&t[0]&&p!==(p="mgPlayerJSPreview_option-step-find-replace-"+e[2].step_id)&&attr(i,"id",p),4&t[0]&&d!==(d="step-action-menu-options-dropdown-item "+(e[2].step_screen_temp?"mgPlayerJSPreview_disabled":""))&&attr(i,"class",d)},d(e){e&&(detach(i),detach(u),detach(g)),m=!1,h()}}}function create_if_block_31(r){let i,a,o=r[1].svgs.iconDelete+"",n,s,l=r[1].labels.btnDelete+"",c,p,d,u,g,m,h;return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),c=text(l),u=space(),g=element("div"),attr(a,"class","step-action-menu-options-dropdown-item-icon ege-inline-block-div"),attr(s,"class","step-action-menu-options-dropdown-item-label ege-inline-block-div"),attr(i,"id",p="mgPlayerJSPreview_option-step-delete-"+r[2].step_id),attr(i,"class",d="step-action-menu-options-dropdown-item "+(r[2].step_screen_temp?"mgPlayerJSPreview_disabled":"")),attr(g,"class","horizontal-line")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,c),insert(e,u,t),insert(e,g,t),m||(h=listen(i,"click",r[41]),m=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.iconDelete+"")&&(a.innerHTML=o),2&t[0]&&l!==(l=e[1].labels.btnDelete+"")&&set_data(c,l),4&t[0]&&p!==(p="mgPlayerJSPreview_option-step-delete-"+e[2].step_id)&&attr(i,"id",p),4&t[0]&&d!==(d="step-action-menu-options-dropdown-item "+(e[2].step_screen_temp?"mgPlayerJSPreview_disabled":""))&&attr(i,"class",d)},d(e){e&&(detach(i),detach(u),detach(g)),m=!1,h()}}}function create_if_block_30(r){let i,a,o=r[1].svgs.start_guide_automation_icon+"",n,s,l=r[1].labels.btnConfigAutomation+"",c,p,d;return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),c=text(l),attr(a,"class","step-action-menu-options-dropdown-item-icon ege-inline-block-div"),attr(s,"class","step-action-menu-options-dropdown-item-label ege-inline-block-div"),attr(i,"class","step-action-menu-options-dropdown-item")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,c),p||(d=listen(i,"click",r[43]),p=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.start_guide_automation_icon+"")&&(a.innerHTML=o),2&t[0]&&l!==(l=e[1].labels.btnConfigAutomation+"")&&set_data(c,l)},d(e){e&&detach(i),p=!1,d()}}}function create_if_block_28(r){let i,a,o=r[1].svgs.myGuide+"",n,s;return{c(){i=element("div"),attr(a=element("div"),"id","mgPlayerJSPreview_playback-mode-guideme"),attr(a,"class","mgPlayerJSPreview_playback-mode-icon mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center"),attr(i,"class","mgPlayerJSPreview_guide-view-playback-modes-container mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-direction-column published-tour")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,n||(s=listen(a,"click",r[44]),n=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.myGuide+"")&&(a.innerHTML=o)},d(e){e&&detach(i),n=!1,s()}}}function create_if_block_27(r){let i,a,o=r[1].svgs.myShow+"",n,s;return{c(){i=element("div"),attr(a=element("div"),"id","mgPlayerJSPreview_playback-mode-showme"),attr(a,"class","mgPlayerJSPreview_playback-mode-icon mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center"),attr(i,"class","mgPlayerJSPreview_guide-view-playback-modes-container mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-direction-column")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,n||(s=listen(a,"click",r[45]),n=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.myShow+"")&&(a.innerHTML=o)},d(e){e&&detach(i),n=!1,s()}}}function create_if_block_26(r){let i,a,o=r[1].svgs.myBot+"",n,s;return{c(){i=element("div"),attr(a=element("div"),"id","mgPlayerJSPreview_playback-mode-doitforme"),attr(a,"class","mgPlayerJSPreview_playback-mode-icon mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center"),attr(i,"class","mgPlayerJSPreview_guide-view-playback-modes-container mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-direction-column published-tour")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,n||(s=listen(a,"click",r[46]),n=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.myBot+"")&&(a.innerHTML=o)},d(e){e&&detach(i),n=!1,s()}}}function create_if_block_25(r){let i,a,o=r[1].svgs.vlab+"",n,s;return{c(){i=element("div"),attr(a=element("div"),"id","mgPlayerJSPreview_playback-mode-vlab"),attr(a,"class","mgPlayerJSPreview_playback-mode-icon mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center"),attr(i,"class","mgPlayerJSPreview_guide-view-playback-modes-container mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_flex-direction-column published-tour")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,n||(s=listen(a,"click",r[47]),n=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.vlab+"")&&(a.innerHTML=o)},d(e){e&&detach(i),n=!1,s()}}}function create_if_block_24(e){let i,r;return i=new Empty({props:{step:e[2]}}),{c(){create_component(i.$$.fragment)},m(e,t){mount_component(i,e,t),r=!0},p(e,t){var r={};4&t[0]&&(r.step=e[2]),i.$set(r)},i(e){r||(transition_in(i.$$.fragment,e),r=!0)},o(e){transition_out(i.$$.fragment,e),r=!1},d(e){destroy_component(i,e)}}}function create_else_block_3(r){let i,a,o,n;return{c(){attr(i=element("img"),"class","step-image mgPlayerJSPreview_custom-image"),src_url_equal(i.src,a=r[2].step_screen_temp||r[5])||attr(i,"src",a)},m(e,t){insert(e,i,t),o||(n=listen(i,"error",r[50]),o=!0)},p(e,t){36&t[0]&&!src_url_equal(i.src,a=e[2].step_screen_temp||e[5])&&attr(i,"src",a)},d(e){e&&detach(i),o=!1,n()}}}function create_if_block_23(r){let i,a,o,n;return{c(){attr(i=element("img"),"class","step-image mgPlayerJSPreview_custom-image"),src_url_equal(i.src,a=r[2].image_url?r[5]:r[2].step_screen_temp)||attr(i,"src",a)},m(e,t){insert(e,i,t),o||(n=listen(i,"error",r[49]),o=!0)},p(e,t){36&t[0]&&!src_url_equal(i.src,a=e[2].image_url?e[5]:e[2].step_screen_temp)&&attr(i,"src",a)},d(e){e&&detach(i),o=!1,n()}}}function create_if_block_19$1(e){let r;function i(e){return"upload"===e[6].tour_settings.tutorial_tour_type?create_if_block_20$1:0==e[2].step_video?create_if_block_21:0!=e[2].step_video?create_if_block_22:void 0}let a=i(e),o=a&&a(e);return{c(){o&&o.c(),r=empty()},m(e,t){o&&o.m(e,t),insert(e,r,t)},p(e,t){a===(a=i(e))&&o?o.p(e,t):(o&&o.d(1),(o=a&&a(e))&&(o.c(),o.m(r.parentNode,r)))},d(e){e&&detach(r),o&&o.d(e)}}}function create_if_block_22(e){let r,i,a;return{c(){r=element("video"),src_url_equal((i=element("source")).src,a=e[2].step_screen_temp||e[5])||attr(i,"src",a),attr(i,"type","video/mp4"),attr(r,"class","mgPlayerJSPreview_tg-img svelte-hv9a3t"),r.controls=!0,attr(r,"controlslist","nodownload"),attr(r,"disablepictureinpicture",""),r.muted=!0},m(e,t){insert(e,r,t),append(r,i)},p(e,t){36&t[0]&&!src_url_equal(i.src,a=e[2].step_screen_temp||e[5])&&attr(i,"src",a)},d(e){e&&detach(r)}}}function create_if_block_21(r){let i,a,o,n;return{c(){attr(i=element("img"),"class","step-image mgPlayerJSPreview_custom-image"),set_style(i,"object-fit","contain"),set_style(i,"height","250px"),src_url_equal(i.src,a=r[2].step_screen_temp||r[5])||attr(i,"src",a)},m(e,t){insert(e,i,t),o||(n=listen(i,"error",r[48]),o=!0)},p(e,t){36&t[0]&&!src_url_equal(i.src,a=e[2].step_screen_temp||e[5])&&attr(i,"src",a)},d(e){e&&detach(i),o=!1,n()}}}function create_if_block_20$1(e){let r,i=e[1].svgs.pdf+"";return{c(){attr(r=element("div"),"class","mgPlayerJSPreview_document-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_margin-lr-10")},m(e,t){insert(e,r,t),r.innerHTML=i},p(e,t){2&t[0]&&i!==(i=e[1].svgs.pdf+"")&&(r.innerHTML=i)},d(e){e&&detach(r)}}}function create_if_block_18$1(e){let r,i=truncate(htmlToPlaintext$2(e[2].step_title),110)+"";return{c(){r=element("span")},m(e,t){insert(e,r,t),r.innerHTML=i},p(e,t){4&t[0]&&i!==(i=truncate(htmlToPlaintext$2(e[2].step_title),110)+"")&&(r.innerHTML=i)},d(e){e&&detach(r)}}}function create_if_block_15$1(r){let i,a,o,n,s,l,c,p,d,u,g,m,h,_,f,v="tag"!==r[2].step_type&&!r[6].is_published&&create_if_block_17$1(r),y="inline"!==r[2].step_type&&!r[6].is_published&&create_if_block_16$1(r);return{c(){i=element("div"),a=element("div"),o=svg_element("svg"),n=svg_element("defs"),s=svg_element("g"),l=svg_element("g"),c=svg_element("g"),p=svg_element("path"),u=space(),g=element("div"),v&&v.c(),m=space(),y&&y.c(),attr(p,"d","M3.5,9 C2.125,9 1,10.125 1,11.5 C1,12.875 2.125,14 3.5,14 C4.875,14 6,12.875 6,11.5 C6,10.125 4.875,9 3.5,9 L3.5,9 Z M18.5,9 C17.125,9 16,10.125 16,11.5 C16,12.875 17.125,14 18.5,14 C19.875,14 21,12.875 21,11.5 C21,10.125 19.875,9 18.5,9 L18.5,9 Z M11,9 C9.625,9 8.5,10.125 8.5,11.5 C8.5,12.875 9.625,14 11,14 C12.375,14 13.5,12.875 13.5,11.5 C13.5,10.125 12.375,9 11,9 L11,9 Z"),attr(p,"class","shape"),attr(c,"id","more-actions"),attr(l,"id","step-action-icons"),attr(l,"fill","#757575"),attr(s,"id","Page-1"),attr(s,"stroke","none"),attr(s,"stroke-width","1"),attr(s,"fill","none"),attr(s,"fill-rule","evenodd"),attr(o,"width","18px"),attr(o,"height","18px"),attr(o,"viewBox","0 0 22 22"),attr(o,"version","1.1"),attr(a,"class","step-pencil-icon"),attr(a,"id",d="step-pencil-icon-"+r[2].step_id),attr(g,"id",h="step-menu-options-"+r[2].step_id),attr(g,"class","step-action-menu-options-dropdown"),attr(i,"class","step-action-menu-container")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),append(o,s),append(s,l),append(l,c),append(c,p),append(i,u),append(i,g),v&&v.m(g,null),append(g,m),y&&y.m(g,null),_||(f=listen(a,"click",r[30]),_=!0)},p(e,t){4&t[0]&&d!==(d="step-pencil-icon-"+e[2].step_id)&&attr(a,"id",d),"tag"===e[2].step_type||e[6].is_published?v&&(v.d(1),v=null):v?v.p(e,t):((v=create_if_block_17$1(e)).c(),v.m(g,m)),"inline"===e[2].step_type||e[6].is_published?y&&(y.d(1),y=null):y?y.p(e,t):((y=create_if_block_16$1(e)).c(),y.m(g,null)),4&t[0]&&h!==(h="step-menu-options-"+e[2].step_id)&&attr(g,"id",h)},d(e){e&&detach(i),v&&v.d(),y&&y.d(),_=!1,f()}}}function create_if_block_17$1(r){let i,a,o=r[1].svgs.iconEdit+"",n,s,l=r[1].labels.btnEdit+"",c,p,d,u,g,m,h,_,f=r[1].svgs.iconDelete+"",v,y,P=r[1].labels.btnDelete+"",S,w,b,C,k;return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),c=text(l),u=space(),g=element("div"),m=space(),h=element("div"),_=element("div"),v=space(),y=element("div"),S=text(P),attr(a,"class","step-action-menu-options-dropdown-item-icon ege-inline-block-div"),attr(s,"class","step-action-menu-options-dropdown-item-label ege-inline-block-div"),attr(i,"id",p="mgPlayerJSPreview_option-step-edit-"+r[2].step_id),attr(i,"class",d="step-action-menu-options-dropdown-item "+(r[2].step_screen_temp?"mgPlayerJSPreview_disabled":"")),attr(g,"class","horizontal-line"),attr(_,"class","step-action-menu-options-dropdown-item-icon ege-inline-block-div"),attr(y,"class","step-action-menu-options-dropdown-item-label ege-inline-block-div"),attr(h,"id",w="mgPlayerJSPreview_option-step-delete-"+r[2].step_id),attr(h,"class",b="step-action-menu-options-dropdown-item "+(r[2].step_screen_temp?"mgPlayerJSPreview_disabled":""))},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,c),insert(e,u,t),insert(e,g,t),insert(e,m,t),insert(e,h,t),append(h,_),_.innerHTML=f,append(h,v),append(h,y),append(y,S),C||(k=[listen(i,"click",r[31]),listen(h,"click",r[32])],C=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.iconEdit+"")&&(a.innerHTML=o),2&t[0]&&l!==(l=e[1].labels.btnEdit+"")&&set_data(c,l),4&t[0]&&p!==(p="mgPlayerJSPreview_option-step-edit-"+e[2].step_id)&&attr(i,"id",p),4&t[0]&&d!==(d="step-action-menu-options-dropdown-item "+(e[2].step_screen_temp?"mgPlayerJSPreview_disabled":""))&&attr(i,"class",d),2&t[0]&&f!==(f=e[1].svgs.iconDelete+"")&&(_.innerHTML=f),2&t[0]&&P!==(P=e[1].labels.btnDelete+"")&&set_data(S,P),4&t[0]&&w!==(w="mgPlayerJSPreview_option-step-delete-"+e[2].step_id)&&attr(h,"id",w),4&t[0]&&b!==(b="step-action-menu-options-dropdown-item "+(e[2].step_screen_temp?"mgPlayerJSPreview_disabled":""))&&attr(h,"class",b)},d(e){e&&(detach(i),detach(u),detach(g),detach(m),detach(h)),C=!1,run_all(k)}}}function create_if_block_16$1(r){let i,a,o=r[1].svgs.iconEdit+"",n,s,l=r[1].labels.btnEdit+"",c,p,d,u,g;return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),c=text(l),attr(a,"class","step-action-menu-options-dropdown-item-icon ege-inline-block-div"),attr(s,"class","step-action-menu-options-dropdown-item-label ege-inline-block-div"),attr(i,"id",p="mgPlayerJSPreview_option-step-edit-"+r[2].step_id),attr(i,"class",d="step-action-menu-options-dropdown-item "+(r[2].step_screen_temp?"mgPlayerJSPreview_disabled":""))},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,c),u||(g=listen(i,"click",r[33]),u=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.iconEdit+"")&&(a.innerHTML=o),2&t[0]&&l!==(l=e[1].labels.btnEdit+"")&&set_data(c,l),4&t[0]&&p!==(p="mgPlayerJSPreview_option-step-edit-"+e[2].step_id)&&attr(i,"id",p),4&t[0]&&d!==(d="step-action-menu-options-dropdown-item "+(e[2].step_screen_temp?"mgPlayerJSPreview_disabled":""))&&attr(i,"class",d)},d(e){e&&detach(i),u=!1,g()}}}function create_if_block_11$3(e){let r,i,a=e[17](e[2])&&!e[6].is_published,o,n,s,l=a&&create_if_block_14$1(e),c=e[2].step_screen_temp&&create_if_block_13$2(e),p=e[2].image_url&&create_if_block_12$2(e);return{c(){r=element("div"),i=element("div"),l&&l.c(),o=space(),c&&c.c(),n=space(),p&&p.c(),attr(i,"class","step-image-overlay"),attr(r,"class","step-image-wrapper")},m(e,t){insert(e,r,t),append(r,i),l&&l.m(i,null),append(r,o),c&&c.m(r,null),append(r,n),p&&p.m(r,null),s=!0},p(e,t){(a=68&t[0]?e[17](e[2])&&!e[6].is_published:a)?l?(l.p(e,t),68&t[0]&&transition_in(l,1)):((l=create_if_block_14$1(e)).c(),transition_in(l,1),l.m(i,null)):l&&(group_outros(),transition_out(l,1,1,()=>{l=null}),check_outros()),e[2].step_screen_temp?c?c.p(e,t):((c=create_if_block_13$2(e)).c(),c.m(r,n)):c&&(c.d(1),c=null),e[2].image_url?p?p.p(e,t):((p=create_if_block_12$2(e)).c(),p.m(r,null)):p&&(p.d(1),p=null)},i(e){s||(transition_in(l),s=!0)},o(e){transition_out(l),s=!1},d(e){e&&detach(r),l&&l.d(),c&&c.d(),p&&p.d()}}}function create_if_block_14$1(e){let i,r;return i=new Empty({props:{step:e[2]}}),{c(){create_component(i.$$.fragment)},m(e,t){mount_component(i,e,t),r=!0},p(e,t){var r={};4&t[0]&&(r.step=e[2]),i.$set(r)},i(e){r||(transition_in(i.$$.fragment,e),r=!0)},o(e){transition_out(i.$$.fragment,e),r=!1},d(e){destroy_component(i,e)}}}function create_if_block_13$2(e){let r,i;return{c(){attr(r=element("img"),"class","step-image"),src_url_equal(r.src,i=e[2].step_screen_temp)||attr(r,"src",i)},m(e,t){insert(e,r,t)},p(e,t){4&t[0]&&!src_url_equal(r.src,i=e[2].step_screen_temp)&&attr(r,"src",i)},d(e){e&&detach(r)}}}function create_if_block_12$2(r){let i,a,o,n;return{c(){attr(i=element("img"),"class","step-image mgPlayerJSPreview_custom-image"),src_url_equal(i.src,a=r[2].image_url+r[1].getCdnSign())||attr(i,"src",a)},m(e,t){insert(e,i,t),o||(n=listen(i,"error",r[34]),o=!0)},p(e,t){6&t[0]&&!src_url_equal(i.src,a=e[2].image_url+e[1].getCdnSign())&&attr(i,"src",a)},d(e){e&&detach(i),o=!1,n()}}}function create_if_block_6$6(r){let i,a,o,n,s,l,c,p,d,u,g,m,h,_,f,v,y=!r[6].is_published&&create_if_block_9$4(r),P=!r[2].step_screen_temp&&create_if_block_8$5(r),S=r[1].FT.creatorApp&&create_if_block_7$5(r);return{c(){i=element("div"),a=element("div"),o=svg_element("svg"),n=svg_element("defs"),s=svg_element("g"),l=svg_element("g"),c=svg_element("g"),p=svg_element("path"),u=space(),g=element("div"),y&&y.c(),m=space(),P&&P.c(),h=space(),S&&S.c(),attr(p,"d","M3.5,9 C2.125,9 1,10.125 1,11.5 C1,12.875 2.125,14 3.5,14 C4.875,14 6,12.875 6,11.5 C6,10.125 4.875,9 3.5,9 L3.5,9 Z M18.5,9 C17.125,9 16,10.125 16,11.5 C16,12.875 17.125,14 18.5,14 C19.875,14 21,12.875 21,11.5 C21,10.125 19.875,9 18.5,9 L18.5,9 Z M11,9 C9.625,9 8.5,10.125 8.5,11.5 C8.5,12.875 9.625,14 11,14 C12.375,14 13.5,12.875 13.5,11.5 C13.5,10.125 12.375,9 11,9 L11,9 Z"),attr(p,"class","shape"),attr(c,"id","more-actions"),attr(l,"id","step-action-icons"),attr(l,"fill","#757575"),attr(s,"id","Page-1"),attr(s,"stroke","none"),attr(s,"stroke-width","1"),attr(s,"fill","none"),attr(s,"fill-rule","evenodd"),attr(o,"width","18px"),attr(o,"height","18px"),attr(o,"viewBox","0 0 22 22"),attr(o,"version","1.1"),attr(a,"class","step-pencil-icon"),attr(a,"id",d="step-pencil-icon-"+r[2].step_id),attr(g,"id",_="step-menu-options-"+r[2].step_id),attr(g,"class","step-action-menu-options-dropdown"),attr(i,"class","step-action-menu-container")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),append(o,s),append(s,l),append(l,c),append(c,p),append(i,u),append(i,g),y&&y.m(g,null),append(g,m),P&&P.m(g,null),append(g,h),S&&S.m(g,null),f||(v=listen(a,"click",r[21]),f=!0)},p(e,t){4&t[0]&&d!==(d="step-pencil-icon-"+e[2].step_id)&&attr(a,"id",d),e[6].is_published?y&&(y.d(1),y=null):y?y.p(e,t):((y=create_if_block_9$4(e)).c(),y.m(g,m)),e[2].step_screen_temp?P&&(P.d(1),P=null):P?P.p(e,t):((P=create_if_block_8$5(e)).c(),P.m(g,h)),e[1].FT.creatorApp?S?S.p(e,t):((S=create_if_block_7$5(e)).c(),S.m(g,null)):S&&(S.d(1),S=null),4&t[0]&&_!==(_="step-menu-options-"+e[2].step_id)&&attr(g,"id",_)},d(e){e&&detach(i),y&&y.d(),P&&P.d(),S&&S.d(),f=!1,v()}}}function create_if_block_9$4(r){let i,a,o=r[1].svgs.iconEdit+"",n,s,l=r[1].labels.btnEdit+"",c,p,d,u,g,m,h,_=r[1].svgs.iconDelete+"",f,v,y=r[1].labels.btnDelete+"",P,S,w,b,C,k;return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),c=text(l),d=space(),u=element("div"),g=space(),m=element("div"),h=element("div"),f=space(),v=element("div"),P=text(y),w=space(),b=element("div"),attr(a,"class","step-action-menu-options-dropdown-item-icon ege-inline-block-div"),attr(s,"class","step-action-menu-options-dropdown-item-label ege-inline-block-div"),attr(i,"class",p="step-action-menu-options-dropdown-item "+(r[2].step_screen_temp?"mgPlayerJSPreview_disabled":"")),attr(u,"class","horizontal-line"),attr(h,"class","step-action-menu-options-dropdown-item-icon ege-inline-block-div"),attr(v,"class","step-action-menu-options-dropdown-item-label ege-inline-block-div"),attr(m,"class",S="step-action-menu-options-dropdown-item "+(r[2].step_screen_temp?"mgPlayerJSPreview_disabled":"")),attr(b,"class","horizontal-line")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,c),insert(e,d,t),insert(e,u,t),insert(e,g,t),insert(e,m,t),append(m,h),h.innerHTML=_,append(m,f),append(m,v),append(v,P),insert(e,w,t),insert(e,b,t),C||(k=[listen(i,"click",r[22]),listen(m,"click",r[23])],C=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.iconEdit+"")&&(a.innerHTML=o),2&t[0]&&l!==(l=e[1].labels.btnEdit+"")&&set_data(c,l),4&t[0]&&p!==(p="step-action-menu-options-dropdown-item "+(e[2].step_screen_temp?"mgPlayerJSPreview_disabled":""))&&attr(i,"class",p),2&t[0]&&_!==(_=e[1].svgs.iconDelete+"")&&(h.innerHTML=_),2&t[0]&&y!==(y=e[1].labels.btnDelete+"")&&set_data(P,y),4&t[0]&&S!==(S="step-action-menu-options-dropdown-item "+(e[2].step_screen_temp?"mgPlayerJSPreview_disabled":""))&&attr(m,"class",S)},d(e){e&&(detach(i),detach(d),detach(u),detach(g),detach(m),detach(w),detach(b)),C=!1,run_all(k)}}}function create_if_block_8$5(r){let i,a,o=r[1].svgs.copyGuideIcon+"",n,s,l=r[1].labels.btnCopyStep+"",c,p,d,u,g;return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),c=text(l),p=space(),d=element("div"),attr(a,"class","step-action-menu-options-dropdown-item-icon ege-inline-block-div"),attr(s,"class","step-action-menu-options-dropdown-item-label ege-inline-block-div"),attr(i,"class","step-action-menu-options-dropdown-item"),attr(d,"class","horizontal-line")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,c),insert(e,p,t),insert(e,d,t),u||(g=listen(i,"click",r[24]),u=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.copyGuideIcon+"")&&(a.innerHTML=o),2&t[0]&&l!==(l=e[1].labels.btnCopyStep+"")&&set_data(c,l)},d(e){e&&(detach(i),detach(p),detach(d)),u=!1,g()}}}function create_if_block_7$5(r){let i,a,o=r[1].svgs.historyIcon+"",n,s,l=r[1].labels.history+"",c,p,d,u;return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),c=text(l),attr(a,"class","step-action-menu-options-dropdown-item-icon ege-inline-block-div"),attr(s,"class","step-action-menu-options-dropdown-item-label ege-inline-block-div"),attr(i,"class",p="step-action-menu-options-dropdown-item "+(r[2].step_screen_temp?"mgPlayerJSPreview_disabled":""))},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),append(s,c),d||(u=listen(i,"click",r[25]),d=!0)},p(e,t){2&t[0]&&o!==(o=e[1].svgs.historyIcon+"")&&(a.innerHTML=o),2&t[0]&&l!==(l=e[1].labels.history+"")&&set_data(c,l),4&t[0]&&p!==(p="step-action-menu-options-dropdown-item "+(e[2].step_screen_temp?"mgPlayerJSPreview_disabled":""))&&attr(i,"class",p)},d(e){e&&detach(i),d=!1,u()}}}function create_if_block_4$7(e){let r,i;function a(e){return 0==e[2].step_video?create_if_block_5$6:create_else_block$5}let o=a(e),n=o(e);return{c(){r=element("div"),i=element("div"),n.c(),attr(i,"class","mgPlayerJSPreview_tg-img-thumb mgPlayerJSPreview_position-center"),attr(r,"class","mgPlayerJSPreview_tg-step-img-thumb-wrapper")},m(e,t){insert(e,r,t),append(r,i),n.m(i,null)},p(e,t){o===(o=a(e))&&n?n.p(e,t):(n.d(1),(n=o(e))&&(n.c(),n.m(i,null)))},d(e){e&&detach(r),n.d()}}}function create_else_block$5(r){let i,a,o;return{c(){i=element("video"),src_url_equal((a=element("source")).src,o=r[4])||attr(a,"src",o),attr(a,"type","video/mp4"),attr(i,"class","mgPlayerJSPreview_tg-img svelte-hv9a3t"),i.controls=!0,attr(i,"controlslist","nodownload"),attr(i,"disablepictureinpicture",""),i.muted=!0},m(e,t){insert(e,i,t),append(i,a),r[27](i)},p(e,t){16&t[0]&&!src_url_equal(a.src,o=e[4])&&attr(a,"src",o)},d(e){e&&detach(i),r[27](null)}}}function create_if_block_5$6(r){let i,a,o,n;return{c(){attr(i=element("img"),"class","mgPlayerJSPreview_tg-img svelte-hv9a3t"),src_url_equal(i.src,a=r[2].screen_url+r[1].getCdnSign())||attr(i,"src",a),attr(i,"alt","Step Image Thumb")},m(e,t){insert(e,i,t),o||(n=listen(i,"error",r[26]),o=!0)},p(e,t){6&t[0]&&!src_url_equal(i.src,a=e[2].screen_url+e[1].getCdnSign())&&attr(i,"src",a)},d(e){e&&detach(i),o=!1,n()}}}function create_if_block_3$8(e){let r,i=e[1].svgs.pdfIcon+"";return{c(){attr(r=element("div"),"class","mgPlayerJSPreview_document-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_margin-lr-10")},m(e,t){insert(e,r,t),r.innerHTML=i},p(e,t){2&t[0]&&i!==(i=e[1].svgs.pdfIcon+"")&&(r.innerHTML=i)},d(e){e&&detach(r)}}}function create_if_block_1$9(e){let r,i=e[17](e[2])&&!e[6].is_published,a,o=i&&create_if_block_2$8(e);return{c(){r=element("div"),o&&o.c(),attr(r,"class","mgPlayerJSPreview_tour-action-wrapper mgPlayerJSPreview_position-relative")},m(e,t){insert(e,r,t),o&&o.m(r,null),a=!0},p(e,t){(i=68&t[0]?e[17](e[2])&&!e[6].is_published:i)?o?(o.p(e,t),68&t[0]&&transition_in(o,1)):((o=create_if_block_2$8(e)).c(),transition_in(o,1),o.m(r,null)):o&&(group_outros(),transition_out(o,1,1,()=>{o=null}),check_outros())},i(e){a||(transition_in(o),a=!0)},o(e){transition_out(o),a=!1},d(e){e&&detach(r),o&&o.d()}}}function create_if_block_2$8(e){let i,r;return i=new Empty({props:{step:e[2]}}),{c(){create_component(i.$$.fragment)},m(e,t){mount_component(i,e,t),r=!0},p(e,t){var r={};4&t[0]&&(r.step=e[2]),i.$set(r)},i(e){r||(transition_in(i.$$.fragment,e),r=!0)},o(e){transition_out(i.$$.fragment,e),r=!1},d(e){destroy_component(i,e)}}}function create_fragment$d(e){let r,i,a,o,n,s=[create_if_block$a,create_else_block_1$1],l=[];function c(e,t){return(r=null==(r=64&t[0]?null:r)?!!GmCXt.isOnboarding(e[6]):r)?0:1}return i=c(e,[-1,-1]),a=l[i]=s[i](e),{c(){a.c(),o=empty()},m(e,t){l[i].m(e,t),insert(e,o,t),n=!0},p(e,t){let r=i;(i=c(e,t))===r?l[i].p(e,t):(group_outros(),transition_out(l[r],1,1,()=>{l[r]=null}),check_outros(),(a=l[i])?a.p(e,t):(a=l[i]=s[i](e)).c(),transition_in(a,1),a.m(o.parentNode,o))},i(e){n||(transition_in(a),n=!0)},o(e){transition_out(a),n=!1},d(e){e&&detach(o),l[i].d(e)}}}function htmlToPlaintext$2(e){return(new DOMParser).parseFromString(e,"text/html").body.textContent}function getTutorialDesc(e){return GmCXt.isEmpty(e.step_title)?(e.step_description=GmCXt.updateOrgAndAddSignature(e.step_description),e.step_description):e.step_title+e.step_description}function truncate(e,t){return e?e.length>t?e.substring(0,t)+"...":e:""}function instance$d(r,e,a){let i=e.mainStep,o,n,t=e.index,s=!1,l="",c=get_store_value(Gm.currentTour);Gm.currentTour.subscribe(e=>{a(6,c=e)});let p=(e,t,r)=>{if(e.stopPropagation(),"doitforme"===t&&GmCXt.disableDoItForMe)return modal.open(rootScope.labels.doitForMeWarning,"warning"),!1;rootScope.guideAction(t,r,c,get_store_value(Gm.CurrentPage),"")};function d(e,t){rootScope.prevStepData||a(1,rootScope.prevStepData={},rootScope),a(1,rootScope.prevStepData.tour=c,rootScope),Gm.loading.set(!0);e={action:"mgPlayerJSPreview_action:edit_elem_tag",data:{elTags:e.steps,prevStepData:rootScope.prevStepData}};GmCXt.sendToParentWindow(e)}function u(e){Gm.routeAction.set({action:"stepFindNReplace",data:{step:e}})}function g(t,e){rootScope.hideStepActionDropdown(),modal.open(rootScope.labels.confirmGoToStepUrl,"confirm",function(){var e={action:"mgPlayerJSPreview_action:go_to_step_url,task:edit_step",url:t.step_settings.scheme?t.step_settings.scheme+"://"+t.step_url:"//"+t.step_url};GmCXt.sendToParentWindow(e)})}function m(e,t,r,i){r.stopPropagation(),rootScope.hideStepActionDropdown(),a(1,rootScope.copiedStep={step_id:e,step_type:t,t_type:i},rootScope),a(1,rootScope.pasteStep=!0,rootScope),a(1,rootScope.copyStepsList=!1,rootScope)}function h(e,t){t.stopPropagation(),rootScope.hideUserImageDropDown();t=mg$(".step-image-wrapper"),mg$(t).removeClass("active"),mg$(".tour-action-dropdown").slideUp(200),mg$(".detail-view-action-options-dropdown").slideUp(200),mg$(".detail-download-action-options-dropdown").slideUp(200),t=mg$("#step-menu-options-"+e).is(":visible");mg$(".step-action-menu-options-dropdown").slideUp(200),t||mg$("#step-menu-options-"+e).slideDown(200)}let _;onMount(()=>{rootScope.checkCdnSignature().then(()=>{a(20,s=GmCXt.getCdnSign())})});return r.$$set=e=>{"mainStep"in e&&a(19,i=e.mainStep),"index"in e&&a(0,t=e.index)},r.$$.update=()=>{var e,t;524302&r.$$.dirty[0]&&(a(2,o={...i}),_)&&(a(4,n=""),a(4,n=o.step_video_url+rootScope.getCdnSign()),_.load()),1048580&r.$$.dirty[0]&&s&&o&&a(5,l=(e=o.step_type===GmCXt.STEP_TYPE_VIDEO?o.image_url:o.screen_url,t=o.step_type,GmCXt.isOnboarding(c)?0!=o.step_video?o.step_video_url+s:e+s:"guide"===t?e.split(".png")[0]+"_thumb.png"+s:"video"===t?e+s:"survey"==t||"transport"==t?-1==o.image_url.indexOf("default_icon")?o.image_url+s:rootScope.staticContentPath+"survey_step.png":o.is_screen_url_processed?e.split(".png")[0]+"_cropped.png"+s:o.screen_url+s))},[t,rootScope,o,_,n,l,c,p,d,()=>{var e,t,r;return!!c&&(e=rootScope.existsOrUndefined(GmCXt.getAppSetting("guideMeSetting")),t=!0,void 0!==(r=GmCXt.createDeepCopy(c.tour_settings)).defaultPlayAction&&"Default"!==r.defaultPlayAction||(r.defaultPlayAction=GmCXt.getAppSetting("defaultPlayAction")),GmCXt.FT.isPlayer&&(t=r.defaultPlayAction===rootScope.playGuideMe||r.defaultPlayAction===rootScope.playSlideshow&&rootScope.enableGuidemeMode),r=GmCXt.isGuide(c)&&!rootScope.isDesktopGuide(c)&&!rootScope.isMobileGuide(c),!!((r=window.matchMedia("(max-width: 480px)").matches&&!GmCXt.isMiniPlayer?GmCXt.isGuide(c)&&rootScope.isDesktopGuide(c)&&!rootScope.isMobileGuide(c):r)&&e&&t))},()=>{var e,t,r;return!rootScope.isOnlySurveyGuide(c)&&(e=rootScope.existsOrUndefined(GmCXt.getAppSetting("showMeSetting")),t=!0,void 0!==(r=GmCXt.createDeepCopy(c.tour_settings)).defaultPlayAction&&"Default"!==r.defaultPlayAction||(r.defaultPlayAction=GmCXt.getAppSetting("defaultPlayAction")),GmCXt.FT.isPlayer&&(t=r.defaultPlayAction===rootScope.playGuideMe||r.defaultPlayAction===rootScope.playSlideshow),r=GmCXt.isGuide(c)||rootScope.isCADGuide(c)||rootScope.isDesktopGuide(c)||rootScope.isMobileGuide(c)||GmCXt.isOnboarding(c),GmCXt.FT.showMe)&&e&&t&&r},u,function(){return!rootScope.onPrem||rootScope.FT.showMe},()=>{var e,t;return!rootScope.isOnlySurveyGuide(c)&&(e=!0,void 0!==(t=GmCXt.createDeepCopy(c.tour_settings)).defaultPlayAction&&"Default"!==t.defaultPlayAction||(t.defaultPlayAction=GmCXt.getAppSetting("defaultPlayAction")),GmCXt.FT.isPlayer&&(e=t.defaultPlayAction===rootScope.playAuto),rootScope._doitforme)&&!rootScope.isCADGuide(c)&&GmCXt.isGuide(c)&&!rootScope.isDesktopGuide(c)&&!rootScope.isMobileGuide(c)&&e},g,m,()=>{var e,t,r;return!rootScope.isOnlySurveyGuide(c)&&(e=rootScope.existsOrUndefined(GmCXt.getAppSetting("vLab")),t=!0,void 0!==(r=GmCXt.createDeepCopy(c.tour_settings)).defaultPlayAction&&"Default"!==r.defaultPlayAction||(r.defaultPlayAction=GmCXt.getAppSetting("defaultPlayAction")),GmCXt.FT.isPlayer&&(t=r.defaultPlayAction===rootScope.playGuideMe||r.defaultPlayAction===rootScope.playVLab),GmCXt.isGuide(c))&&!rootScope.isDesktopGuide(c)&&!rootScope.isMobileGuide(c)&&e&&t&&rootScope.enableMyteacher},function(e){return!e.step_type&&e.type&&(e.step_type=e.type),e.step_type!==GmCXt.STEP_TYPE_BRANCH&&e.step_type!==GmCXt.STEP_TYPE_ERROR_HANDLER&&!(e.step_settings&&e.step_settings.inlineBranch||e.hideStep)},h,i,s,e=>h(o.step_id,e),()=>{rootScope.editStep(c,o,t),rootScope.hideStepActionDropdown()},()=>{rootScope.deleteStep(o,!1,c),rootScope.hideStepActionDropdown()},e=>m(o.step_id,o.step_type,e,c.tour_settings.tutorial_tour_type),e=>{rootScope.guideHistory(o,e,"step"),rootScope.hideStepActionDropdown()},e=>{e.target.src=rootScope.staticContentPath+"technology.jpg"},function(e){binding_callbacks[e?"unshift":"push"](()=>{_=e,a(3,_)})},e=>p(e,rootScope.playSlideshow,o),e=>p(e,"",o),e=>h(o.step_id,e),()=>editStep(o,t),()=>deleteStep(o),()=>d(o),e=>{e.target.src=rootScope.staticContentPath+"technology.jpg"},e=>h(o.step_id,e),()=>{rootScope.editStep(c,o,t,!1),rootScope.hideStepActionDropdown()},()=>{rootScope.editStep(c,o,t,!0),rootScope.hideStepActionDropdown()},()=>g(o),e=>m(o.step_id,o.step_type,e),()=>u(o),()=>{rootScope.deleteStep(o,!1,c),rootScope.hideStepActionDropdown()},e=>{rootScope.guideHistory(o,e,"step"),rootScope.hideStepActionDropdown()},()=>{rootScope.openAutoConfigurationPopup(c,o),rootScope.hideStepActionDropdown()},e=>p(e,"",o),e=>p(e,"slideshow",o),e=>p(e,"doitforme",o),e=>p(e,"vLab",o),e=>{e.target.src=rootScope.staticContentPath+"technology.jpg"},e=>{e.target.src=rootScope.staticContentPath+"technology.jpg"},e=>{e.target.src=rootScope.staticContentPath+"technology.jpg"}]}class StepView extends SvelteComponent{constructor(e){super(),init(this,e,instance$d,create_fragment$d,safe_not_equal,{mainStep:19,index:0},add_css$2,[-1,-1])}}function add_css$1(e){append_styles(e,"svelte-1edas9a",".branch.svelte-1edas9a{z-index:99999}")}function get_each_context$4(e,t,r){e=e.slice();return e[45]=t[r],e[47]=r,e}function get_each_context_1$2(e,t,r){e=e.slice();return e[48]=t[r],e[47]=r,e}function create_if_block_2$7(t){let a,o=ensure_array_like(t[1]),n=[];for(let e=0;e<o.length;e+=1)n[e]=create_each_block$4(get_each_context$4(t,o,e));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();a=empty()},m(t,r){for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,r);insert(t,a,r)},p(t,r){if(1815&r[0]){o=ensure_array_like(t[1]);let e;for(e=0;e<o.length;e+=1){var i=get_each_context$4(t,o,e);n[e]?n[e].p(i,r):(n[e]=create_each_block$4(i),n[e].c(),n[e].m(a.parentNode,a))}for(;e<n.length;e+=1)n[e].d(1);n.length=o.length}},d(e){e&&detach(a),destroy_each(n,e)}}}function create_else_block$4(e){let r,i,a,o,n,s=htmlToPlaintext$1(e[45].step_title)+"",l,c,p,d,u=htmlToPlaintext$1(e[45].step_title)+"",g,m,h,_,f,v=e[0]&&create_if_block_4$6(e);return{c(){r=element("div"),i=element("div"),a=element("div"),o=element("div"),n=element("div"),l=text(s),c=space(),p=element("div"),d=element("div"),g=text(u),m=space(),h=element("div"),_=space(),f=element("div"),v&&v.c(),attr(n,"class","mgPlayerJSPreview_guide-title mgPlayerJSPreview_text-overflow-ellipsis"),attr(d,"class","mgPlayerJSPreview_tooltip-title"),attr(p,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-right mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y"),attr(o,"class","step-title-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_position-relative"),attr(a,"id","step"),set_style(h,"clear","both"),attr(f,"class","step-image-wrapper"),attr(i,"class","step-item"),attr(r,"class","mgPlayerJSPreview_collapse mgPlayerJSPreview_player-step step-wrapper branchTreeHead2"),set_style(r,"display","block")},m(e,t){insert(e,r,t),append(r,i),append(i,a),append(a,o),append(o,n),append(n,l),append(o,c),append(o,p),append(p,d),append(d,g),append(i,m),append(i,h),append(i,_),append(i,f),v&&v.m(f,null)},p(e,t){2&t[0]&&s!==(s=htmlToPlaintext$1(e[45].step_title)+"")&&set_data(l,s),2&t[0]&&u!==(u=htmlToPlaintext$1(e[45].step_title)+"")&&set_data(g,u),e[0]?v?v.p(e,t):((v=create_if_block_4$6(e)).c(),v.m(f,null)):v&&(v.d(1),v=null)},d(e){e&&detach(r),v&&v.d()}}}function create_if_block_3$7(i){let r,a,o,n=rootScope.svgs.branch_head_icon+"",s,l,c=htmlToPlaintext$1(i[45].step_title)+"",p,d,u,g,m=(i[2]||i[45].step_settings.branch[0].branchName)+"",h,_,f,v=rootScope.svgs.down_arrow_icon+"",y,P,S,w;function b(){return i[12](i[45])}let C=ensure_array_like(i[45].step_settings.branch),k=[];for(let e=0;e<C.length;e+=1)k[e]=create_each_block_1$2(get_each_context_1$2(i,C,e));function T(...e){return i[13](i[47],...e)}return{c(){r=element("div"),a=element("div"),o=element("div"),s=space(),l=element("div"),p=text(c),d=space(),u=element("button"),g=element("div"),h=text(m),_=space(),f=element("div"),y=space(),P=element("div");for(let e=0;e<k.length;e+=1)k[e].c();attr(o,"class","mgPlayerJSPreview_head-branch-icon"),attr(l,"class","branch-title"),attr(g,"class","mgPlayerJSPreview_branch-dropdown-selected-item mgPlayerJSPreview_pointer-events-none"),attr(f,"class","mgPlayerJSPreview_filter-dropdown-arrow mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between mgPlayerJSPreview_pointer-events-none"),attr(P,"id","mgPlayerJSPreview_branch-dropdown-list-wrapper-"+i[47]),attr(P,"class","mgPlayerJSPreview_branch-dropdown-list-wrapper mgPlayerJSPreview_branch-dropdown-list-wrapper-"+i[47]+" mgPlayerJSPreview_open-down mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y svelte-1edas9a"),attr(u,"id","mgPlayerJSPreview_branch-dropdown-wrapper-0"),attr(u,"class","mgPlayerJSPreview_branch-dropdown-wrapper mgPlayerJSPreview_position-relative mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between mgPlayerJSPreview_lbl-btn"),attr(a,"class","branch-head"),attr(r,"class","branch-wrapper-player branchTreeHead0")},m(e,t){insert(e,r,t),append(r,a),append(a,o),o.innerHTML=n,append(a,s),append(a,l),append(l,p),append(a,d),append(a,u),append(u,g),append(g,h),append(u,_),append(u,f),f.innerHTML=v,append(u,y),append(u,P);for(let e=0;e<k.length;e+=1)k[e]&&k[e].m(P,null);S||(w=[listen(l,"click",b),listen(u,"click",T)],S=!0)},p(e,t){if(i=e,2&t[0]&&c!==(c=htmlToPlaintext$1(i[45].step_title)+"")&&set_data(p,c),6&t[0]&&m!==(m=(i[2]||i[45].step_settings.branch[0].branchName)+"")&&set_data(h,m),1030&t[0]){C=ensure_array_like(i[45].step_settings.branch);let e;for(e=0;e<C.length;e+=1){var r=get_each_context_1$2(i,C,e);k[e]?k[e].p(r,t):(k[e]=create_each_block_1$2(r),k[e].c(),k[e].m(P,null))}for(;e<k.length;e+=1)k[e].d(1);k.length=C.length}},d(e){e&&detach(r),destroy_each(k,e),S=!1,run_all(w)}}}function create_if_block_4$6(r){let i,a,o,n;return{c(){attr(i=element("img"),"class","step-image mgPlayerJSPreview_custom-image"),src_url_equal(i.src,a=r[4](r[45]))||attr(i,"src",a)},m(e,t){insert(e,i,t),o||(n=listen(i,"error",r[14]),o=!0)},p(e,t){2&t[0]&&!src_url_equal(i.src,a=e[4](e[45]))&&attr(i,"src",a)},d(e){e&&detach(i),o=!1,n()}}}function create_each_block_1$2(r){let i,a=r[48].branchName+"",o,n,s,l;return{c(){i=element("button"),o=text(a),attr(i,"class",n="mgPlayerJSPreview_branch-dropdown-list-item mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_branch-dropdown-list-item "+(r[2]===r[45].step_settings.branch[r[47]].branchName?"mgPlayerJSPreview_active-item":"")),i.value=r[47]},m(e,t){insert(e,i,t),append(i,o),s||(l=listen(i,"click",function(){is_function(r[10](r[45],r[47]))&&r[10](r[45],r[47]).apply(this,arguments)}),s=!0)},p(e,t){r=e,2&t[0]&&a!==(a=r[48].branchName+"")&&set_data(o,a),6&t[0]&&n!==(n="mgPlayerJSPreview_branch-dropdown-list-item mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_branch-dropdown-list-item "+(r[2]===r[45].step_settings.branch[r[47]].branchName?"mgPlayerJSPreview_active-item":""))&&attr(i,"class",n)},d(e){e&&detach(i),s=!1,l()}}}function create_each_block$4(e){let r,i,a;function o(e,t){return(i=null==(i=2&t[0]?null:i)?!(e[45].step_type!==GmCXt.STEP_TYPE_BRANCH&&e[45].step_type!==GmCXt.STEP_TYPE_ERROR_HANDLER&&!GmCXt.isTrue(e[45].step_settings&&e[45].step_settings.inlineBranch)):i)?create_if_block_3$7:create_else_block$4}let n=o(e,[-1,-1]),s=n(e);return{c(){r=element("div"),s.c(),a=space(),attr(r,"class","svelte-1edas9a"),toggle_class(r,"branch",e[45].step_type===GmCXt.STEP_TYPE_BRANCH||GmCXt.isTrue(e[45].step_settings&&e[45].step_settings.inlineBranch))},m(e,t){insert(e,r,t),s.m(r,null),append(r,a)},p(e,t){n===(n=o(e,t))&&s?s.p(e,t):(s.d(1),(s=n(e))&&(s.c(),s.m(r,a))),2&t[0]&&toggle_class(r,"branch",e[45].step_type===GmCXt.STEP_TYPE_BRANCH||GmCXt.isTrue(e[45].step_settings&&e[45].step_settings.inlineBranch))},d(e){e&&detach(r),s.d()}}}function create_if_block_1$8(r){let i,a=GmCXt.svgs.close+"",o,n;return{c(){attr(i=element("div"),"id","mgPlayerJSPreview_icon-cancel-merge"),attr(i,"class","mgPlayerJSPreview_cancel-branch-merge"),attr(i,"title","Cancel Merge Branch")},m(e,t){insert(e,i,t),i.innerHTML=a,o||(n=listen(i,"click",r[5]),o=!0)},p:noop,d(e){e&&detach(i),o=!1,n()}}}function create_if_block$9(r){let i,a,o=rootScope.svgs.zoomIn+"",n,s,l=rootScope.svgs.zoomOut+"",c,p;return{c(){i=element("div"),a=element("div"),n=space(),s=element("div"),attr(a,"id","mgPlayerJSPreview_zoomin-branching-view"),attr(a,"class","zoomin-branching-view mgPlayerJSPreview_icons-hover-effect ege-inline-block-div"),attr(s,"id","mgPlayerJSPreview_zoomout-branching-view"),attr(s,"class","zoomout-branching-view mgPlayerJSPreview_icons-hover-effect ege-inline-block-div"),attr(i,"class","view-zoomin-zoomout")},m(e,t){insert(e,i,t),append(i,a),a.innerHTML=o,append(i,n),append(i,s),s.innerHTML=l,c||(p=[listen(a,"click",r[6]),listen(s,"click",r[7])],c=!0)},p:noop,d(e){e&&detach(i),c=!1,run_all(p)}}}function create_fragment$c(e){let r,i,a,o,n=!rootScope.FT.creatorApp&&create_if_block_2$7(e),s=e[3]&&create_if_block_1$8(e),l=rootScope.FT.creatorApp&&create_if_block$9(e);return{c(){r=element("div"),n&&n.c(),i=space(),s&&s.c(),a=space(),l&&l.c(),o=empty(),attr(r,"class","step-view-type-branching"),set_style(r,"transform","scale(1) translate(0px, 0px)"),toggle_class(r,"no-padding",GmCXt.FT.isPlayer)},m(e,t){insert(e,r,t),n&&n.m(r,null),insert(e,i,t),s&&s.m(e,t),insert(e,a,t),l&&l.m(e,t),insert(e,o,t)},p(e,t){rootScope.FT.creatorApp||n.p(e,t),e[3]?s?s.p(e,t):((s=create_if_block_1$8(e)).c(),s.m(a.parentNode,a)):s&&(s.d(1),s=null),rootScope.FT.creatorApp&&l.p(e,t)},i:noop,o:noop,d(e){e&&(detach(r),detach(i),detach(a),detach(o)),n&&n.d(),s&&s.d(e),l&&l.d(e)}}}function htmlToPlaintext$1(e){return e?String(e).replace(/<[^>]+>/gm,""):""}function getScaleViewValues(e){var t={};switch(e){case 3:t.scale=.3,t.transformLeft="-90%",t.transformRight="-90%";break;case 4:t.scale=.4,t.transformLeft="-70%",t.transformRight="-70%";break;case 5:t.scale=.5,t.transformLeft="-45%",t.transformRight="-45%";break;case 6:t.scale=.6,t.transformLeft="-30%",t.transformRight="-30%";break;case 7:t.scale=.7,t.transformLeft="-20%",t.transformRight="-20%";break;case 8:t.scale=.8,t.transformLeft="-12%",t.transformRight="-12%";break;case 9:t.scale=.9,t.transformLeft="-5%",t.transformRight="-5%";break;case 10:t.scale=1,t.transformLeft="0%",t.transformRight="0%";break;case 11:t.scale=1.1,t.transformLeft="5%",t.transformRight="5%";break;case 12:t.scale=1.2,t.transformLeft="9%",t.transformRight="8%";break;case 13:t.scale=1.3,t.transformLeft="12%",t.transformRight="12%";break;case 14:t.scale=1.4,t.transformLeft="15%",t.transformRight="15%";break;case 15:t.scale=1.5,t.transformLeft="17%",t.transformRight="17%"}return t}function instance$c(e,t,o){let w=t.currentTour,r=!1,i=!1,a=!1,n=[],s=!1,p,b=!1,l=10,c=!1,d=!1,u=!1,g=[],m=[],h,_=Gm.selectedBranch.subscribe(e=>{o(2,s=e)});function f(t){if("p"!==p[t].type&&-1===mg$$1.inArray(t,g)&&g.push(t),0!==t)for(let e=0;e<p[t].head.length;e++)f(p[t].head[0])}let v=!1,y;function P(e,t){g=[],f(e.id);for(let e=0;e<p.length;e++)-1<mg$$1.inArray(p[e].tail,g)&&f(e);o(3,u=!0),y=t,v=!!(e.branch&&0<=e.branch.index)&&e.branch.index,mg$$1(".mgPlayerJSPreview_delete-connection").css("display","none"),mg$$1(".plus-step").css("display","none"),mg$$1(".step-view-type-branching").empty(),J()}function S(t,e){if(-1===mg$$1.inArray(e,g)&&u){t=t.toString(),Gm.loading.set(!0);var r=w.tour_settings.play_structure;for(let e=0;e<r.length;e++){if(r[e].id===y&&v&&null!==r[e].branch){r[e].branch[v].tail=t;break}if(r[e].id===y&&null!==r[e].branch){r[e].tail=t;break}}o(11,w.tour_settings.play_structure=r,w),g=[],o(3,u=!1),rootScope.routeToStepContainer("updateTourWithApi",w)}else rootScope.showPopup("You cannot merge this step here.")}function C(e,t,r){var i=p[e].tail;if(p[i]&&1<p[i].head.length){mg$$1(".horizontalConnector"+e).remove(),p[e].tail=null;var a=mg$$1(r.target).closest(".mgPlayerJSPreview_delete-connection").attr("branchindex");rootScope.getStepFromTour(t,w);for(let e=0;e<w.tour_settings.play_structure.length;e++)w.tour_settings.play_structure[e].id===t.toString()&&o(11,a?w.tour_settings.play_structure[e].branch[a].tail=null:w.tour_settings.play_structure[e].tail=null,w);rootScope.routeToStepContainer("updateTourWithApi",w)}}function k(e){let t=document.querySelector(".step-view-type-branching"),r=(-1!==mg$$1.inArray(e.head[0],m)&&rootScope.FT.creatorApp&&(t=document.querySelector(".branchTreeHead"+e.head[0]),m.push(e.id)),GmCXt.conf.staticContentPath+"technology.jpg"),i=rootScope.staticContentPath+"technology.jpg";if(e.step.step_screen)switch(e.step.step_type){case"inline":case"image":r=e.step.is_screen_url_processed?rootScope.getImageURL(e.step.screen_url,"_cropped.png"):e.step.screen_url+rootScope.getCdnSign();break;case"message":r=e.step.is_screen_url_processed?(e=>{let t=rootScope.staticContentPath+"technology.jpg";var r;return e.screen_url&&(r=e.step_settings.domElems,t=r&&0<r.length&&e.is_thumbnail_processed?rootScope.getImageURL(e.screen_url,"_thumb.png"):e.is_screen_url_processed?rootScope.getImageURL(e.screen_url,"_cropped.png"):e.screen_url+rootScope.getCdnSign()),t})(e.step):e.step.screen_url+rootScope.getCdnSign();break;case"smartTip":r=e.step.screen_url+rootScope.getCdnSign();break;case"guide":r=rootScope.getImageURL(e.step.screen_url,"_thumb.png");break;case"video":r=e.step.image_url+rootScope.getCdnSign();break;case"survey":r=-1!==e.step.image_url.indexOf("default_icon")?rootScope.getDefaultSurveyStepIcon():e.step.image_url+rootScope.getCdnSign()}else e.step.step_video_url&&"video"===e.step.step_type&&(r=e.step.image_url+rootScope.getCdnSign(),i="https://salesuapi.blob.core.windows.net/default/video-thumb.png");new Empty({target:t,props:{node:e,mergeActive:u,currentTour:w,step_img:r,err_img:i,mergeArr:g,addMergeStep:P,mergeNodeStep:S,playTourFromBranchView:$}})}function T(e){var t=(t=>{t=parseInt(t);for(let e=0;e<p.length;e++)if(p[e].id===t)return p[e]})(e.head[0]);let r=document.querySelector(".step-view-type-branching");var i=e.branch&&e.branch.name?e.branch.name:"";let a="step-tail-large";var o=(e=>{if(!e||!p[e])return"mgPlayerJSPreview_hide-delete-connection";if(p[e].id===e){if(1<p[e].head.length)return"mgPlayerJSPreview_allow-delete-connection";if(p[e].branch){h=p[e].branch;let t=0;for(let e=0;e<h.length;e++)-1===h[e].tail&&t++;return 1<t?"mgPlayerJSPreview_allow-delete-connection":"mgPlayerJSPreview_hide-delete-connection"}return"mgPlayerJSPreview_hide-delete-connection"}})(e.tail);"b"===t.type&&i&&(mg$$1("#mgPlayerJSPreview_branch-dropdown-list-wrapper-"+t.id).append("<button class='mgPlayerJSPreview_branch-dropdown-list-item mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_branch-dropdown-list-item-"+e.id+"' value='"+e.id+"'>"+i+"</button>"),!d)&&c&&(d=e.id),-1!==mg$$1.inArray(e.head[0],m)&&rootScope.FT.creatorApp&&(r=document.querySelector(".branchTreeHead"+e.head[0]),m.push(e.id)),e.tail||(a="step-tail-small"),e.branch&&(a=""),new Empty({target:r,props:{node:e,deleteClass:o,mergeActive:u,currentTour:w,branchName:i,lastStepWrapper:a,mergeArr:g,addMergeStep:P,deleteConnection:C,playTourFromBranchView:$}})}function x(e){l=10,c=!1,p=e,d=!1;for(let t=0;t<p.length;t++){var r=p[t].type;let e=void 0;var i,a=p[t].head[0];switch(null!=a&&null!=p[a].head[0]&&(i=p[a].head[0],e=p[i]),p[t].prevNode=e,r){case"s":k(p[t]);break;case"b":{o=void 0;var o=p[t];let e=document.querySelector(".step-view-type-branching");-1!==mg$$1.inArray(o.head[0],m)&&rootScope.FT.creatorApp&&(e=document.querySelector(".branchTreeHead"+o.head[0])),m.push(o.id),new Empty({target:e,props:{node:o,mergeActive:u,currentTour:w,mergeArr:g,addMergeStep:P,mergeNodeStep:S,playTourFromBranchView:$}})}c=!0;break;case"p":p[t].prevNode=p[a],T(p[t])}}mg$$1(".mgPlayerJSPreview_collapse").css("display","none"),setTimeout(function(){mg$$1(".mgPlayerJSPreview_branch-vconnector").remove(),mg$$1(".mgPlayerJSPreview_branch-hconnector").remove();for(let e=0;e<p.length;e++){var i=p[e];if(2<=i.head.length)for(let r=0;r<i.head.length;r++){var a=mg$$1(".branchTreeHead"+i.id).offset().top,o=mg$$1(".branchTreeHead"+i.head[r]).offset().top,n=mg$$1(mg$$1(".branchTreeHead"+i.id).parents(".branch-wrapper")[0]).offset().top,s=mg$$1(".branchTreeHead"+i.id).offset().left,l=mg$$1(".branchTreeHead"+i.head[r]).offset().left,c=mg$$1(mg$$1(".branchTreeHead"+i.id).parents(".branch-wrapper")[0]).offset().left,l=parseInt(l-s),s=parseInt(s-c);let t=o-n;if(a<o){c=parseInt(o-a)+105;mg$$1(".branchTreeHead"+i.id).before("<div class='mgPlayerJSPreview_branch-vconnector' style='height:"+c+"px'></div>")}else if(o+120<a){t=o-n+(a-o)-75;let e=parseInt(a-o);mg$$1(".branchTreeHead"+i.head[r]).parent().hasClass("branch-wrapper")?e-=105:e-=65,mg$$1(".branchTreeHead"+i.head[r]).append("<div class='mgPlayerJSPreview_branch-vconnector mgPlayerJSPreview_branch-vconnector-right' style='height:"+e+"px'></div>")}mg$$1(mg$$1(".branchTreeHead"+i.id).parents(".branch-wrapper")[0]).append("<div class='mgPlayerJSPreview_branch-hconnector' style='top:"+t+"px;left:"+s+"px;width:"+l+"px'></div>")}}},0)}function A(e,r){function i(e){var t=rootScope.getStepFromTour(e,r);return GmCXt.isAutomationStep(t)?(e=rootScope.getNode(e,w.tour_settings.play_structure))&&e.tail?i(e.tail):void 0:t}return i(e)}function J(){if(rootScope.FT.creatorApp){let a="p",o="s",d="b",u=1,g=[],m=w.tour_settings.play_structure,h=w.steps;m=GmCXt.repairPlayStructure(m,w.steps);let _,f=(_=m&&0<m.length?m[0].id.toString():null,null),n=0,v=0;if(rootScope.FT.creatorApp)for(let e=0;e<h.length;e++)GmCXt.checkForBranchVariationSteps(h[e])&&v++;var e;function y(e,t,r){if(t=t||null,void 0===r&&(r=null),null!==e&&!1!==e&&-1!==e||1!==u||b||0!==v)if(null===e||!1===e||-1===e)f=S(a,e,t,r),u--;else{var n=JSON.parse(JSON.stringify((t=>{for(let e=0;e<h.length;e++)if(h[e].step_id===t)return h[e]})(e)));if((f=n&&e!==_?S(a,null,null!=t?t:null,r):f)&&null!==r&&P(r,f.id),rootScope.FT.creatorApp){var i=(r=>{let i=-1;for(let e=0,t=g.length;e<t;e++){var a=g[e].step;if(a&&a.step_id===r){i=e;break}}return i})(e);if(-1!==i)return l=i,(l=g[l]).head.push(f.id),P(f.id,i),void(1!==u||b||0!==v?u--:x(g))}if(GmCXt.checkForBranchVariationSteps(n)){var s=n;var l=rootScope.getNode(n.step_id,w.tour_settings.play_structure);rootScope.FT.creatorApp||v++;let t=JSON.parse(JSON.stringify(l.branch)),r=JSON.parse(JSON.stringify(s.step_settings.branch)),i=0,a=S(d,s),o;if(f=a,b=!0,t)for(let e=0;e<t.length;e++){i=e;if(t[e]){0<e&&u++,e===t.length-1&&v--;{c=void 0;p=void 0;var c=t[e];t.indexOf(c)===t.length-1&&(b=!1);var p=A(c.tail,w),p=(o=p?p.step_id:null,{name:r[i].branchName,index:t.indexOf(c).toString(),tail:o,head:a.id,stepType:s.step_type});null!==c.tail&&!1!==c.tail&&-1!==c.tail?y(o,p,a.id):y(null,p,a.id)}}}b=!1}else n&&(f=S(o,n,t),y((t=>{for(let e=0;e<m.length;e++)if(m[e].id===t){t=m[e].tail;break}var e=A(t,w);return e?e.step_id:null})(n.step_id),null,f.id))}else f=S(a,e,t,r),x(g)}function P(e,t){!rootScope.FT.creatorApp&&null!==g[e].tail||(g[e].tail=t)}function S(e,t,r,i){t=t||null,r=r||null,null!=i&&0!==i.length||(i=[],i=f?f.id:null);e={id:n++,type:e,step:t,head:[i],tail:null,branch:r};return g[e.id]=e,i&&P(i,e.id),e}null!==(_=_&&(e=A(_,w))?e.step_id:_)&&y(_)}}function G(t){o(1,i=[]);let r=0;a.forEach(e=>{"branch"!=e.step_type&&(e.countid=++r),t.includes(e.step_id)&&("string"==typeof e.step_settings&&(e.step_settings=JSON.parse(e.step_settings)),i.push(e))})}function $(e){e=rootScope.getStepFromTour(e,w);rootScope.guideAction("",e,w,"","")}onMount(()=>{var e;if(rootScope.checkCdnSignature().then(()=>{o(0,r=GmCXt.getCdnSign())}),a=w.steps,GmCXt.containBranchStep(w)){for(e of w.tour_settings.play_structure)e.branch&&0==n.length?(n.push(e.id),n.push(e.branch[0].tail)):e.id===n[n.length-1]?(e.tail&&n.push(e.tail),e.branch&&n.push(e.branch[0].tail)):e.tail&&0==n.length&&(n.push(e.id),n.push(e.tail));G(n)}else o(1,i=a)});function E(e,t){mg$$1(".mgPlayerJSPreview_branch-dropdown-list-wrapper").slideUp(200),(e=mg$$1(".mgPlayerJSPreview_branch-dropdown-list-wrapper-"+e))&&!e.is(":visible")&&e.slideDown(200)}onDestroy(()=>{_(),Gm.selectedBranch.set(!1)});return e.$$set=e=>{"currentTour"in e&&o(11,w=e.currentTour)},e.$$.update=()=>{2048&e.$$.dirty[0]&&w&&rootScope.FT.creatorApp&&GmCXt.timeout(function(){mg$$1(".step-view-type-branching").empty(),J()},500)},[r,i,s,u,function(e){if(r)return e.screen_url.split(".png")[0]+"_cropped.png"+r},function(){o(3,u=!1),mg$$1(".mgPlayerJSPreview_delete-connection").css("display","block"),mg$$1(".plus-step").css("display","block"),mg$$1(".step-view-type-branching").empty(),J()},function(){var e;l<15&&(e=getScaleViewValues(++l),mg$$1(".step-view-type-branching").css({transform:"scale("+e.scale+") translate("+e.transformLeft+", "+e.transformRight+")"}))},function(){var e;2<l&&(e=getScaleViewValues(--l))&&mg$$1(".step-view-type-branching").css({transform:"scale("+e.scale+") translate("+e.transformLeft+", "+e.transformRight+")"})},$,E,function(e,t){let r=e.step_id;Gm.selectedBranch.set(e.step_settings.branch[t].branchName);var e=n.indexOf(r)+1,i=n.length-1;n.splice(e,i),w.tour_settings.play_structure.forEach(e=>{n[n.length-1]===r&&e.id===r?n.push(e.branch[t].tail):n[n.length-1]===e.id&&(e.tail&&n.push(e.tail),e.branch)&&n.push(e.branch[0].tail)}),G(n)},w,e=>$(e.step_id),(e,t)=>E(e),e=>{e.target.src=rootScope.staticContentPath+"technology.jpg"}]}class BranchView extends SvelteComponent{constructor(e){super(),init(this,e,instance$c,create_fragment$c,safe_not_equal,{currentTour:11},add_css$1,[-1,-1])}}function get_each_context$3(e,t,r){e=e.slice();return e[60]=t[r],e[61]=t,e[62]=r,e}function get_each_context_2$1(e,t,r){e=e.slice();return e[60]=t[r],e[64]=r,e}function get_each_context_1$1(e,t,r){e=e.slice();return e[60]=t[r],e[64]=r,e}function create_if_block_13$1(e){let r,i;return r=new StepModes({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_5$5(e){let i,r,a,o,n,s,l=[create_if_block_6$5,create_if_block_11$2,create_if_block_12$1],c=[];function p(e,t){return 9&t[0]&&(r=null),9&t[0]&&(a=null),e[0].filteredSteps&&0<e[0].filteredSteps.length?0:(r=null==r?!!e[3].isLocked(e[0]):r)?1:(a=null==a?!(0<e[0]?.filteredSteps?.length||0===e[0]?.filteredSteps?.length&&e[3].isLocked(e[0])):a)?2:-1}return~(o=p(e,[-1,-1,-1]))&&(n=c[o]=l[o](e)),{c(){i=element("div"),n&&n.c(),attr(i,"class","category-list"),attr(i,"id","mgPlayerJSPreview_category-list")},m(e,t){insert(e,i,t),~o&&c[o].m(i,null),s=!0},p(e,t){let r=o;(o=p(e,t))===r?~o&&c[o].p(e,t):(n&&(group_outros(),transition_out(c[r],1,1,()=>{c[r]=null}),check_outros()),~o?((n=c[o])?n.p(e,t):(n=c[o]=l[o](e)).c(),transition_in(n,1),n.m(i,null)):n=null)},i(e){s||(transition_in(n),s=!0)},o(e){transition_out(n),s=!1},d(e){e&&detach(i),~o&&c[o].d()}}}function create_if_block_12$1(e){let r,i,a=e[3].svgs.noStep+"",o,n,s=e[3].labels.startYoursmartWalkthrough+"",l,c,p,d;return p=new Empty({props:{step:{}}}),{c(){r=element("div"),i=element("div"),o=space(),n=element("label"),l=text(s),c=space(),create_component(p.$$.fragment),attr(i,"class","mgPlayerJSPreview_no-step-created"),attr(r,"class","add-branching-container")},m(e,t){insert(e,r,t),append(r,i),i.innerHTML=a,append(r,o),append(r,n),append(n,l),append(r,c),mount_component(p,r,null),d=!0},p(e,t){(!d||8&t[0])&&a!==(a=e[3].svgs.noStep+"")&&(i.innerHTML=a),(!d||8&t[0])&&s!==(s=e[3].labels.startYoursmartWalkthrough+"")&&set_data(l,s)},i(e){d||(transition_in(p.$$.fragment,e),d=!0)},o(e){transition_out(p.$$.fragment,e),d=!1},d(e){e&&detach(r),destroy_component(p)}}}function create_if_block_11$2(e){let r,i,a,o=e[3].svgs.no_guides_image+"",n,s,l,c=e[3].labels.lockedTourNoStep+"",p;return{c(){r=element("div"),i=element("div"),a=element("div"),n=space(),s=element("div"),l=element("div"),p=text(c),attr(a,"class","mgPlayerJSPreview_no-guide-image-cartoon"),attr(i,"class","mgPlayerJSPreview_no-guide-image-wrapper"),attr(l,"class","mgPlayerJSPreview_no-guide-msg"),attr(l,"tabindex","0"),attr(s,"class","mgPlayerJSPreview_no-guide-text-wrapper"),attr(r,"class","no-tour-message-wrapper mgPlayerJSPreview_position-center")},m(e,t){insert(e,r,t),append(r,i),append(i,a),a.innerHTML=o,append(r,n),append(r,s),append(s,l),append(l,p)},p(e,t){8&t[0]&&o!==(o=e[3].svgs.no_guides_image+"")&&(a.innerHTML=o),8&t[0]&&c!==(c=e[3].labels.lockedTourNoStep+"")&&set_data(p,c)},i:noop,o:noop,d(e){e&&detach(r)}}}function create_if_block_6$5(e){let r,i,a,o,n,s,l=[create_if_block_7$4,create_if_block_8$4,create_else_block_2],c=[];function p(e,t){return 1&t[0]&&(r=null),1&t[0]&&(i=null),(r=null==r?!!GmCXt.containBranchStep(e[0]):r)?0:(i=null==i?!GmCXt.isOnboarding(e[0]):i)?1:2}return a=p(e,[-1,-1,-1]),o=c[a]=l[a](e),{c(){o.c(),n=empty()},m(e,t){c[a].m(e,t),insert(e,n,t),s=!0},p(e,t){let r=a;(a=p(e,t))===r?c[a].p(e,t):(group_outros(),transition_out(c[r],1,1,()=>{c[r]=null}),check_outros(),(o=c[a])?o.p(e,t):(o=c[a]=l[a](e)).c(),transition_in(o,1),o.m(n.parentNode,n))},i(e){s||(transition_in(o),s=!0)},o(e){transition_out(o),s=!1},d(e){e&&detach(n),c[a].d(e)}}}function create_else_block_2(t){let a,i,o=ensure_array_like(t[0].filteredSteps),n=[];for(let e=0;e<o.length;e+=1)n[e]=create_each_block_2$1(get_each_context_2$1(t,o,e));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();a=empty()},m(t,r){for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,r);insert(t,a,r),i=!0},p(t,r){if(1&r[0]){o=ensure_array_like(t[0].filteredSteps);let e;for(e=0;e<o.length;e+=1){var i=get_each_context_2$1(t,o,e);n[e]?(n[e].p(i,r),transition_in(n[e],1)):(n[e]=create_each_block_2$1(i),n[e].c(),transition_in(n[e],1),n[e].m(a.parentNode,a))}for(group_outros(),e=o.length;e<n.length;e+=1)(e=>transition_out(n[e],1,1,()=>{n[e]=null}))(e);check_outros()}},i(e){if(!i){for(let e=0;e<o.length;e+=1)transition_in(n[e]);i=!0}},o(e){n=n.filter(Boolean);for(let e=0;e<n.length;e+=1)transition_out(n[e]);i=!1},d(e){e&&detach(a),destroy_each(n,e)}}}function create_if_block_8$4(t){let a,r,o=ensure_array_like(t[0].filteredSteps),n=[];for(let e=0;e<o.length;e+=1)n[e]=create_each_block_1$1(get_each_context_1$1(t,o,e));return{c(){a=element("div");for(let e=0;e<n.length;e+=1)n[e].c();attr(a,"class","step-view-type-default")},m(e,t){insert(e,a,t);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(a,null);r=!0},p(t,r){if(528143&r[0]){o=ensure_array_like(t[0].filteredSteps);let e;for(e=0;e<o.length;e+=1){var i=get_each_context_1$1(t,o,e);n[e]?(n[e].p(i,r),transition_in(n[e],1)):(n[e]=create_each_block_1$1(i),n[e].c(),transition_in(n[e],1),n[e].m(a,null))}for(group_outros(),e=o.length;e<n.length;e+=1)(e=>transition_out(n[e],1,1,()=>{n[e]=null}))(e);check_outros()}},i(e){if(!r){for(let e=0;e<o.length;e+=1)transition_in(n[e]);r=!0}},o(e){n=n.filter(Boolean);for(let e=0;e<n.length;e+=1)transition_out(n[e]);r=!1},d(e){e&&detach(a),destroy_each(n,e)}}}function create_if_block_7$4(e){let i,r;return i=new BranchView({props:{currentTour:e[0]}}),{c(){create_component(i.$$.fragment)},m(e,t){mount_component(i,e,t),r=!0},p(e,t){var r={};1&t[0]&&(r.currentTour=e[0]),i.$set(r)},i(e){r||(transition_in(i.$$.fragment,e),r=!0)},o(e){transition_out(i.$$.fragment,e),r=!1},d(e){destroy_component(i,e)}}}function create_each_block_2$1(e){let i,a,r,o,n;return a=new StepView({props:{mainStep:e[60],index:e[64],currentTour:e[0]}}),{c(){i=element("div"),create_component(a.$$.fragment),r=space(),attr(i,"class","mgPlayerJSPreview_tg-view-container"),attr(i,"id",o="mgPlayerJSPreview_tg-view-container-"+e[60].step_id)},m(e,t){insert(e,i,t),mount_component(a,i,null),append(i,r),n=!0},p(e,t){var r={};1&t[0]&&(r.mainStep=e[60]),1&t[0]&&(r.currentTour=e[0]),a.$set(r),(!n||1&t[0]&&o!==(o="mgPlayerJSPreview_tg-view-container-"+e[60].step_id))&&attr(i,"id",o)},i(e){n||(transition_in(a.$$.fragment,e),n=!0)},o(e){transition_out(a.$$.fragment,e),n=!1},d(e){e&&detach(i),destroy_component(a)}}}function create_else_block_1(e){let i,r;return i=new StepView({props:{mainStep:e[60],index:e[64],currentTour:e[0]}}),{c(){create_component(i.$$.fragment)},m(e,t){mount_component(i,e,t),r=!0},p(e,t){var r={};1&t[0]&&(r.mainStep=e[60]),1&t[0]&&(r.currentTour=e[0]),i.$set(r)},i(e){r||(transition_in(i.$$.fragment,e),r=!0)},o(e){transition_out(i.$$.fragment,e),r=!1},d(e){destroy_component(i,e)}}}function create_if_block_10$2(e){let i,r;return i=new StepView({props:{mainStep:e[60],index:e[64],currentTour:e[0]}}),{c(){create_component(i.$$.fragment)},m(e,t){mount_component(i,e,t),r=!0},p(e,t){var r={};1&t[0]&&(r.mainStep=e[60]),1&t[0]&&(r.currentTour=e[0]),i.$set(r)},i(e){r||(transition_in(i.$$.fragment,e),r=!0)},o(e){transition_out(i.$$.fragment,e),r=!1},d(e){destroy_component(i,e)}}}function create_if_block_9$3(r){let i,a,o,n,s,l;function c(...e){return r[20](r[60],r[64],...e)}function p(...e){return r[22](r[64],...e)}return a=new StepView({props:{mainStep:r[60],index:r[64],currentTour:r[0]}}),{c(){i=element("div"),create_component(a.$$.fragment),o=space(),attr(i,"draggable","true")},m(e,t){insert(e,i,t),mount_component(a,i,null),append(i,o),n=!0,s||(l=[listen(i,"dragstart",c),listen(i,"drag",r[21]),listen(i,"dragover",p),listen(i,"dragend",r[23])],s=!0)},p(e,t){r=e;e={};1&t[0]&&(e.mainStep=r[60]),1&t[0]&&(e.currentTour=r[0]),a.$set(e)},i(e){n||(transition_in(a.$$.fragment,e),n=!0)},o(e){transition_out(a.$$.fragment,e),n=!1},d(e){e&&detach(i),destroy_component(a),s=!1,run_all(l)}}}function create_each_block_1$1(e){let r,i,a,o,n,s=[create_if_block_9$3,create_if_block_10$2,create_else_block_1],l=[];function c(e,t){return(r=null==(r=9&t[0]?null:r)?!("user"===e[3].user.role||!e[3].FT.creatorApp||e[0].is_published||e[3].isLocked(e[0])||e[0].filteredSteps.length<=1||0<e[3].pendingStepCount||e[3].isDesktopApp()||e[3].hideMirrorAppCtrl()):r)?0:0<!e[3].pendingStepCount?1:2}return i=c(e,[-1,-1,-1]),a=l[i]=s[i](e),{c(){a.c(),o=empty()},m(e,t){l[i].m(e,t),insert(e,o,t),n=!0},p(e,t){let r=i;(i=c(e,t))===r?l[i].p(e,t):(group_outros(),transition_out(l[r],1,1,()=>{l[r]=null}),check_outros(),(a=l[i])?a.p(e,t):(a=l[i]=s[i](e)).c(),transition_in(a,1),a.m(o.parentNode,o))},i(e){n||(transition_in(a),n=!0)},o(e){transition_out(a),n=!1},d(e){e&&detach(o),l[i].d(e)}}}function create_if_block$8(r){let i,a,o,n,s,l,c,p,d,u,g,m=r[3].labels.btnSelectAll+"",h,_,f,v,y,P=r[3].svgs.search+"",S,w,b,C,k,T=r[3].svgs.search_close+"",x,A,J,G=r[12]()&&r[5],$,E;function L(e){return e[5]&&e[7].length?create_if_block_3$6:create_else_block$3}let M=L(r),I=M(r),X=G&&create_if_block_1$7(r);return{c(){i=element("div"),a=element("div"),o=element("div"),n=element("label"),s=element("input"),c=space(),p=element("span"),u=space(),g=element("div"),h=text(m),_=space(),f=element("div"),v=element("div"),y=element("div"),S=space(),w=element("input"),C=space(),k=element("button"),A=space(),I.c(),J=space(),X&&X.c(),attr(s,"type","checkbox"),attr(s,"class","mgPlayerJSPreview_export-guide-checkbox mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_input-checkbox-custom"),attr(s,"name","export-guide-checkbox"),s.__value=l=r[3].labels.btnSelectAll,set_input_value(s,s.__value),attr(p,"class","mgPlayerJSPreview_checkmark"),attr(n,"class",d="mgPlayerJSPreview_checkbox-container "+(r[5]?"":"mgPlayerJSPreview_disabled")),attr(g,"class","mgPlayerJSPreview_margin-lr-25"),attr(y,"class","mgPlayerJSPreview_search-icon mgPlayerJSPreview_inline-block-vm"),attr(w,"id","search-text-input"),attr(w,"class","mgPlayerJSPreview_search-input mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_width-100 mgPlayerJSPreview_height-100"),attr(w,"maxlength","100"),attr(w,"type","text"),attr(w,"placeholder",b=r[3].labels.btnSearchSteps),attr(w,"autocomplete","off"),attr(k,"id","mgPlayerJSPreview_icon-search-close"),attr(k,"class",x="mgPlayerJSPreview_search-close-icon mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_lbl-btn "+(r[3].searchStepKeyword&&r[3].searchStepKeyword.length?"mgPlayerJSPreview_active":"")),attr(v,"class","mgPlayerJSPreview_search-input-wrapper mgPlayerJSPreview_position-relative mgPlayerJSPreview_float-left"),attr(f,"class","mgPlayerJSPreview_search-bar-container"),attr(o,"class","mgPlayerJSPreview_step-copy-delete-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between"),attr(a,"class","mgPlayerJSPreview_auto-header-bar-container"),attr(i,"class","mgPlayerJSPreview_step-copy-delete-container")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),append(n,s),s.checked=r[6],append(n,c),append(n,p),append(o,u),append(o,g),append(g,h),append(o,_),append(o,f),append(f,v),append(v,y),y.innerHTML=P,append(v,S),append(v,w),set_input_value(w,r[3].searchStepKeyword),append(v,C),append(v,k),k.innerHTML=T,append(i,A),I.m(i,null),append(i,J),X&&X.m(i,null),$||(E=[listen(s,"change",r[24]),listen(s,"click",r[25]),listen(w,"input",r[26]),listen(w,"keyup",r[27]),listen(k,"click",r[28])],$=!0)},p(e,t){8&t[0]&&l!==(l=e[3].labels.btnSelectAll)&&(s.__value=l,set_input_value(s,s.__value)),64&t[0]&&(s.checked=e[6]),32&t[0]&&d!==(d="mgPlayerJSPreview_checkbox-container "+(e[5]?"":"mgPlayerJSPreview_disabled"))&&attr(n,"class",d),8&t[0]&&m!==(m=e[3].labels.btnSelectAll+"")&&set_data(h,m),8&t[0]&&P!==(P=e[3].svgs.search+"")&&(y.innerHTML=P),8&t[0]&&b!==(b=e[3].labels.btnSearchSteps)&&attr(w,"placeholder",b),8&t[0]&&w.value!==e[3].searchStepKeyword&&set_input_value(w,e[3].searchStepKeyword),8&t[0]&&T!==(T=e[3].svgs.search_close+"")&&(k.innerHTML=T),8&t[0]&&x!==(x="mgPlayerJSPreview_search-close-icon mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_lbl-btn "+(e[3].searchStepKeyword&&e[3].searchStepKeyword.length?"mgPlayerJSPreview_active":""))&&attr(k,"class",x),M===(M=L(e))&&I?I.p(e,t):(I.d(1),(I=M(e))&&(I.c(),I.m(i,J))),(G=32&t[0]?e[12]()&&e[5]:G)?X?X.p(e,t):((X=create_if_block_1$7(e)).c(),X.m(i,null)):X&&(X.d(1),X=null)},d(e){e&&detach(i),I.d(),X&&X.d(),$=!1,run_all(E)}}}function create_else_block$3(e){let r,i,a=e[3].labels.stepNotFound+"",o;return{c(){r=element("div"),i=element("div"),o=text(a),attr(i,"class","mgPlayerJSPreview_no-step-found-msg"),attr(r,"class","category-list")},m(e,t){insert(e,r,t),append(r,i),append(i,o)},p(e,t){8&t[0]&&a!==(a=e[3].labels.stepNotFound+"")&&set_data(o,a)},d(e){e&&detach(r)}}}function create_if_block_3$6(t){let a,o=ensure_array_like(t[7]),n=[];for(let e=0;e<o.length;e+=1)n[e]=create_each_block$3(get_each_context$3(t,o,e));return{c(){a=element("div");for(let e=0;e<n.length;e+=1)n[e].c();attr(a,"class","category-list")},m(e,t){insert(e,a,t);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(a,null)},p(t,r){if(32896&r[0]){o=ensure_array_like(t[7]);let e;for(e=0;e<o.length;e+=1){var i=get_each_context$3(t,o,e);n[e]?n[e].p(i,r):(n[e]=create_each_block$3(i),n[e].c(),n[e].m(a,null))}for(;e<n.length;e+=1)n[e].d(1);n.length=o.length}},d(e){e&&detach(a),destroy_each(n,e)}}}function create_if_block_4$5(r){let i,a,o,n,s,l,c,p,d,u,g=htmlToPlaintext(r[60].step_order+". "+r[60].step_title+" "+r[60].step_description+(r[60].step_settings.smartTip.guidanceMessage||r[60].step_settings.smartTip.validationMessage||""))+"",m,h,_;function f(){r[29].call(n,r[61],r[62])}return{c(){i=element("div"),a=element("div"),o=element("label"),n=element("input"),l=space(),c=element("span"),d=space(),u=element("div"),m=space(),attr(n,"type","checkbox"),attr(n,"class","mgPlayerJSPreview_export-guide-checkbox mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_input-checkbox-custom"),attr(n,"name","copy-guide-checkbox"),n.__value=s=r[60].step_id,set_input_value(n,n.__value),attr(c,"class",p="mgPlayerJSPreview_checkmark "+("branch"===r[60].step_type?"mgPlayerJSPreview_disabled":"")),attr(o,"class","mgPlayerJSPreview_checkbox-container"),attr(u,"class","mgPlayerJSPreview_margin-lr-25 mgPlayerJSPreview_text-overflow-ellipsis"),attr(a,"class","tour-list-copy-delete-wrapper"),attr(i,"class","tour-item")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),n.checked=r[60].copy,append(o,l),append(o,c),append(a,d),append(a,u),u.innerHTML=g,append(i,m),h||(_=[listen(n,"change",f),listen(n,"change",r[30])],h=!0)},p(e,t){r=e,128&t[0]&&s!==(s=r[60].step_id)&&(n.__value=s,set_input_value(n,n.__value)),128&t[0]&&(n.checked=r[60].copy),128&t[0]&&p!==(p="mgPlayerJSPreview_checkmark "+("branch"===r[60].step_type?"mgPlayerJSPreview_disabled":""))&&attr(c,"class",p),128&t[0]&&g!==(g=htmlToPlaintext(r[60].step_order+". "+r[60].step_title+" "+r[60].step_description+(r[60].step_settings.smartTip.guidanceMessage||r[60].step_settings.smartTip.validationMessage||""))+"")&&(u.innerHTML=g)},d(e){e&&detach(i),h=!1,run_all(_)}}}function create_each_block$3(e){let r,i=!e[60].hide&&create_if_block_4$5(e);return{c(){i&&i.c(),r=empty()},m(e,t){i&&i.m(e,t),insert(e,r,t)},p(e,t){e[60].hide?i&&(i.d(1),i=null):i?i.p(e,t):((i=create_if_block_4$5(e)).c(),i.m(r.parentNode,r))},d(e){e&&detach(r),i&&i.d(e)}}}function create_if_block_1$7(r){let i,a,o,n=r[3].labels.btnCancel+"",s,l,c,p,d=r[3].labels.btnCopySteps+"",u,g,m,h=!r[0].is_published&&create_if_block_2$6(r);return{c(){i=element("div"),a=element("div"),o=element("div"),s=text(n),l=space(),h&&h.c(),c=space(),p=element("div"),u=text(d),attr(o,"class","action-btn mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-neutral"),attr(p,"class","action-btn mgPlayerJSPreview_btn-default"),attr(a,"class","auto-btn-wrapper"),attr(i,"class","list-page-btn-wrapper mgPlayerJSPreview_no-padding")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,s),append(a,l),h&&h.m(a,null),append(a,c),append(a,p),append(p,u),g||(m=[listen(o,"click",r[31]),listen(p,"click",r[33])],g=!0)},p(e,t){8&t[0]&&n!==(n=e[3].labels.btnCancel+"")&&set_data(s,n),e[0].is_published?h&&(h.d(1),h=null):h?h.p(e,t):((h=create_if_block_2$6(e)).c(),h.m(a,c)),8&t[0]&&d!==(d=e[3].labels.btnCopySteps+"")&&set_data(u,d)},d(e){e&&detach(i),h&&h.d(),g=!1,run_all(m)}}}function create_if_block_2$6(r){let i,a=r[3].labels.btnDeleteSteps+"",o,n,s;return{c(){i=element("div"),o=text(a),attr(i,"class","action-btn mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-neutral")},m(e,t){insert(e,i,t),append(i,o),n||(s=listen(i,"click",r[32]),n=!0)},p(e,t){8&t[0]&&a!==(a=e[3].labels.btnDeleteSteps+"")&&set_data(o,a)},d(e){e&&detach(i),n=!1,s()}}}function create_fragment$b(e){let r,i,a,o,n=e[0].filteredSteps&&0<e[0].filteredSteps.length&&"copySteps"!==e[4]&&create_if_block_13$1(),s="copySteps"!==e[4]&&!e[3].isApiCallOn&&create_if_block_5$5(e),l="copySteps"===e[4]&&create_if_block$8(e);return{c(){n&&n.c(),r=space(),s&&s.c(),i=space(),l&&l.c(),a=empty()},m(e,t){n&&n.m(e,t),insert(e,r,t),s&&s.m(e,t),insert(e,i,t),l&&l.m(e,t),insert(e,a,t),o=!0},p(e,t){e[0].filteredSteps&&0<e[0].filteredSteps.length&&"copySteps"!==e[4]?n?17&t[0]&&transition_in(n,1):((n=create_if_block_13$1()).c(),transition_in(n,1),n.m(r.parentNode,r)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros()),"copySteps"===e[4]||e[3].isApiCallOn?s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros()):s?(s.p(e,t),24&t[0]&&transition_in(s,1)):((s=create_if_block_5$5(e)).c(),transition_in(s,1),s.m(i.parentNode,i)),"copySteps"===e[4]?l?l.p(e,t):((l=create_if_block$8(e)).c(),l.m(a.parentNode,a)):l&&(l.d(1),l=null)},i(e){o||(transition_in(n),transition_in(s),o=!0)},o(e){transition_out(n),transition_out(s),o=!1},d(e){e&&(detach(r),detach(i),detach(a)),n&&n.d(e),s&&s.d(e),l&&l.d(e)}}}function stepExistsInTour(e,r){let i=!1;return e.forEach(function(e,t){e.step_id!==r.step_id&&e.creation_id!==r.creation_id||(i=!0)}),i}function getVisibleStepIndex(e,t){let r=0,i=0;for(;e!==i&&i<t.length;)GmCXt.isAutomationStep(t[i])||r++,i++;return r}function htmlToPlaintext(e){return e?String(e).replace(/<[^>]+>/gm,""):""}function instance$b(e,I,p){function d(e,t){var r=e.step,i=u.tour_settings.play_structure;e.prevStepData||(e.prevStepData=rootScope.prevStepData),i?((i=GmCXt.updateTourPlayStructure(e))&&p(0,u.tour_settings.play_structure=i.prevStepData.tour.tour_settings.play_structure,u),rootScope.setTour(u),"guide"===r.step_type||"video"===r.step_type||GmCXt.isDefined(rootScope.copiedStep)||"textSlide"===r.step_type?(p(3,rootScope.pendingStepCount=0,rootScope),Gm.statusBar.set("updateTourPlayStructure"),k(u,t)):T(u)):Gm.loading.set(!1)}let u=get_store_value(Gm.currentTour),t=!1,r,g,i=(rootScope.activeTourId,!0),a=!1,o=u.steps,l=rootScope.activeScreenCastTourId,n=(l=l||0,storage.currentTour.set(get_store_value(Gm.currentTour)),rootScope.enableTranslation&&(GmCXt.getLXPLang()?r=GmCXt.getLXPLang():rootScope.language&&(r=rootScope.language)),{tour_type:rootScope.currentTour&&rootScope.currentTour.tour_type||""}),s=Gm.currentTour.subscribe(e=>{p(0,u=e)}),c=Gm.selectedLang.subscribe(e=>{p(0,u.selectedLang=e,u),p(0,u=rootScope.getTranslatedTourAndSteps(u,e))}),m=Gm.CurrentPage.subscribe(e=>{p(4,t=e)}),h=function(){var e=mg$$1(".guide-view-header-panel-container").innerHeight()?mg$$1(".guide-view-header-panel-container").innerHeight():0,t=mg$$1(".list-page-header").innerHeight()?mg$$1(".list-page-header").innerHeight():0,r=mg$$1("#ege-header").innerHeight()?mg$$1("#ege-header").innerHeight():0,i=mg$$1(".ege-panel-header-sub-menu-urls").innerHeight()?mg$$1(".ege-panel-header-sub-menu-urls").innerHeight():0,a=mg$$1("#footer").innerHeight()?mg$$1("#footer").innerHeight():0,o=mg$$1(".list-page-btn-wrapper").innerHeight()?mg$$1(".list-page-btn-wrapper").innerHeight():0;return mg$$1(".category-list").css({height:window.innerHeight-e-a-i-t-r-o-20}),!0},_=(mg$$1(window).off("resize").on("resize",h),setTimeout(function(){h()},500),function(e){var t;return e.is_screen_url_processed?e.step_settings.element&&e.step_settings.element.version&&(t=GmCXt.decodeVersion(e.step_settings.element.version),"Prod"===GmCXt.conf.env&&40509<t||"Test"===GmCXt.conf.env&&40601<t)?e.step_thumb=rootScope.getImageURL(e.screen_url,"_cropped.png"):e.step_thumb=rootScope.getImageURL(e.screen_url,"_thumb.png"):e.step_thumb=e.screen_url+rootScope.getCdnSign(),e});function f(){let t=[];o.forEach(function(e){e.copy&&t.push(parseInt(e.step_id))}),p(3,rootScope.copyStepsList={steps:t,tourId:u.tour_id,tourType:u.tour_type,stepType:u.steps[0].step_type},rootScope),0<=rootScope.copyStepsList.tourType.indexOf("onboarding_tour")&&p(3,rootScope.copyStepsList.tourType=u.tour_settings.tutorial_tour_type,rootScope),rootScope.copyStepsList.steps.length?(p(3,rootScope.copiedStep=!1,rootScope),p(3,rootScope.pasteStep=!0,rootScope),P()):rootScope.showPopup(GmCXt.label.unselectedStepsErrorMsg,"","warning")}function v(){let t=0;p(5,i=!0),p(7,o=o.map(function(e){return e.step_title.toLowerCase().includes(rootScope.searchStepKeyword.toLowerCase())||e.step_description.toLowerCase().includes(rootScope.searchStepKeyword.toLowerCase())?(e.hide=!1,t+=1):e.hide=!0,e})),0===t&&p(5,i=!1),y()}function y(){let e=!0;for(var t in o)if(!o[t].copy){e=!1;break}p(6,a=e)}function P(){p(7,o=o.map(function(e){return e.copy=!1,e})),p(3,rootScope.copySteps=!1,rootScope),p(3,rootScope.searchStepKeyword="",rootScope),p(6,a=!1),rootScope.setCurrentPage("stepview"),setTimeout(()=>{h()},100)}function S(){p(7,o=o.map(function(e){return e.step_type===GmCXt.STEP_TYPE_BRANCH&&e.step_settings.inlineBranch&&e.step_type===GmCXt.STEP_TYPE_ERROR_HANDLER||(e.copy=!a),e})),p(6,a=!a)}function w(){let t=[],r=[],i=(o.forEach(function(e){e.copy?t.push(parseInt(e.step_id)):r.push(e)}),{tour_id:u.tour_id});o.step_count!==t.length&&(i.step_ids="["+t+"]"),t.length?mgError$1.try(function(){rootScope.showPopup(rootScope.labels.confirmDeletMultipleSteps,function(){Gm.loading.set(!0),api.bulkStepDelete(i,function(){var e;p(3,rootScope.pasteStep=!1,rootScope),i.step_ids?(p(0,u.is_locked=!0,u),p(0,u.steps=r,u),p(0,u.step_count=r.length,u),e=GmCXt.getGuidePlayStructure(u),p(0,u.tour_settings.play_structure=e,u)):(p(0,u.tour_settings.play_structure=[],u),p(0,u.steps=[],u),p(0,u.step_count=0,u)),rootScope.setTour(u),T(u)}),P()},"confirm")},117):rootScope.showPopup(GmCXt.label.unselectedStepsErrorMsg,"","warning")}function b(e){Gm.loading.set(!0),x(e)}function C(t){mgError$1.try(function(){var r,e;u.is_published||"user"===rootScope.user.role||u.is_locked&&u.user_id!==rootScope.user.user_id||(r=[],t.filter(function(e,t){r.push({step_id:e.step_id,step_order:t+1})}),r=((e,i)=>{for(var t=[],r=0,a=function(e){t.push({step_id:e.step_id,step_order:++r})},o=0;o<i.length&&GmCXt.isAutomationStep(i[o]);o++)a(i[o]);return e.forEach(function(t,e){a(t);var r=i.find(function(e){return e.step_id===t.step_id}),r=rootScope.getAutomationSteps(i,r);0<r.length&&r.forEach(function(e){a(e)})}),t})(r,u.steps),p(0,u.steps=rootScope.sortTourSteps(r,u.steps),u),e={tour_id:u.tour_id,json:r},api.stepsDrag(e,function(e){p(0,u.tour_settings.play_structure=GmCXt.buildGuidePlayStructure(u),u),k(u)},function(e){rootScope.showPopup(e.message)}))},120)}let k=function(t,r){mgError$1.try(function(){Gm.loading.set(!0);var e={category_id:t.category_id,tour_title:t.tour_title,tour_description:t.tour_description,tour_image:t.tour_image,tour_settings:t.tour_settings,tour_type:t.tour_type,tour_url:t.tour_url,tour_id:t.tour_id,is_locked:t.is_locked,keywords:t.keywords};api.tourUpdate(e,function(){},function(e){Gm.loading.set(!1)},function(){Gm.loading.set(!1),x(r),GmCXt.isFeatureTags(t)&&T(t)})},121)},T=function(e){if(e){e.filteredSteps=GmCXt.filterOutAutomationSteps(e.steps),p(0,u=e),(g=rootScope.isTrackingGuide(e))&&p(0,u.filteredSteps=[],u),p(0,u.uuid=GmCXt.getUUID(),u),u.tour_id!==l||rootScope.isScreenRecorderClose?p(0,u.screencastInProgress=!1,u):p(0,u.screencastInProgress=!0,u),rootScope.isPublicApp&&p(0,u.is_public=!0,u),!r&&rootScope.language&&(r=rootScope.language),p(3,rootScope.isDefaultLang=GmCXt.checkDefaultLangForTour(u,r),rootScope);let o=!1,n=[],s=0;u.steps.forEach(function(e,t){if(e.step_id&&"string"!=typeof e.step_id&&(e.step_id=e.step_id.toString()),"string"!=typeof(e=_(e)).step_screen&&(e.step_screen=e.step_screen.toString()),"video"===e.step_type&&-1===e.step_screen.indexOf("guideme-defaults/default.png"))e.step_video_thumbnail=e.step_video_url;else if(e.step_type===GmCXt.STEP_TYPE_BRANCH||e.step_type===GmCXt.STEP_TYPE_ERROR_HANDLER||GmCXt.isTrue(e.step_settings.inlineBranch)&&"keepNext"!==e.step_settings.completionEvent){o=!0;var r=e.step_settings;e.branch=r.branch;for(var i=0;i<e.branch.length;i++)if(0<e.branch[i].tourId)for(var a=0;a<u.steps.length;a++)u.steps[a].step_id===e.branch[i].tail&&(p(0,u.steps[a].hideStep=!0,u),e.branch[i].tourData=u.steps[a])}g&&(((r=e.step_settings.groupId)?(n[r]||(n[r]=[]),n[r]):u.filteredSteps).push(e),s=Math.max(s,e.step_order))}),o&&rootScope.branchGuideDownloadOpts(u.tour_settings.downloadGuideFiles),p(0,u.downloadOpts=u.tour_settings.downloadGuideFiles,u),"insights"===u.tour_type&&Object.keys(n).forEach(function(e){var t=n[e],e={step_id:e,steps:t,image_url:t[0].thumbnail_url,step_title:t[0].step_settings.groupTitle,step_type:"tag",stepOrder:++s};u.filteredSteps.push(e)}),g||p(0,u=GmCXt.checkAndCorrectPS(u)),GmCXt.isOnboarding(u),r&&!rootScope.isGuideInOriginalLang(u)&&(p(0,u.selectedLang=r,u),e=u.language_data)&&e[r]&&p(0,u=rootScope.getTranslatedTourAndSteps(u,r)),setTimeout(function(){h()},200),Gm.currentTour.set(u),p(3,rootScope.isApiCallOn=!1,rootScope),Gm.loading.set(!1),GmCXt.sendMessageToBackgroundService({action:"mgPlayerJSPreview_action:load_step_previews"})}},x=function(e){Gm.loading.set(!0),u&&u.tour_id||p(0,u=GmCXt.validateDataModel(n,GmCXt.model.guide)),p(3,rootScope.isDefaultLang=GmCXt.checkDefaultLangForTour(u,r),rootScope),u.is_locked;var t={tour_id:u.tour_id,isPublic:!1,category_id:rootScope?.currentTour.category_id};GmCXt.checkDefaultLangForTour(u,r)||(t.language=r),e||GmCXt.isEmpty(u)||parseInt(u.step_count)!==u.steps.length?api.getTour(t,T,function(){Gm.loading.set(!1),p(0,u=!1)},!0):T(u)},A=(rootScope.isScreenRecorderClose&&rootScope.showPopup(rootScope.labels.screeRecordingError,function(){GmCXt.storage().remove(["screen_recorder_close"]),p(3,rootScope.isScreenRecorderClose=!1,rootScope)},"alert"),null),J,G,$=null,E=null,L=null,M=(onMount(()=>{b()}),Gm.routeAction.subscribe(r=>{if(r&&r.data)switch(r.action){case"createStepCompleted":{var t=r.data;let e=GmCXt.validateDataModel(t.step,GmCXt.model.step);if(e.tour_id===u.tour_id){var i=t.prevStepData||null,a=t.stepIndex,o=(g=rootScope.isTrackingGuide(u),u.steps);if(t.tour&&p(0,u=t.tour),p(0,u.steps=o,u),t.linkGuidePlayMode&&"guide"===e.step_type&&(e.linkGuidePlayMode=t.linkGuidePlayMode),i&&(p(3,rootScope.prevStepData=i,rootScope),rootScope.pendingStepCount)&&(p(3,rootScope.prevStepData.step_id=e.step_id,rootScope),p(3,rootScope.prevStepData.step_type=e.step_type,rootScope)),e.step_type!==GmCXt.STEP_TYPE_BRANCH&&e.step_type!==GmCXt.STEP_TYPE_ERROR_HANDLER||(e.branch=e.step_settings.branch),t.isPaste?u.steps.splice(a,0,e):g||p(0,u.steps[a]=GmCXt.createDeepCopy(e),u),u.steps[a]&&!g){e.step_screen_temp="",e=_(e);for(var n=a;n<u.steps.length;n++)p(0,u.steps[n].step_order=n+1,u)}p(0,u.step_count=u.steps.length,u),"guide"===e.step_type||t.isPaste?d(t):g?GmCXt.isTrue(e.step_settings.inlineBranch)&&d(t):T(u),Gm.loading.set(!1),g?(rootScope.allTourList["cat_"+u.category_id]["tour_"+u.tour_id].steps.push(t.step),b()):(p(3,rootScope.prevStepData=void 0,rootScope),rootScope.setTour(u)),p(3,rootScope.showStepCreatedSuccessMsg=!0,rootScope),Gm.statusBar.set("createStepCompleted")}}Gm.routeAction.set(null);break;case"updateStepCompleted":{o=r.data;o.step?(o.step.step_screen_temp="",e=GmCXt.validateDataModel(o.step,GmCXt.model.step),e=_(e),p(0,u.steps[o.stepIndex]=e,u)):o.langUpdated&&p(0,u.steps[o.stepIndex].step_screen_temp="",u),o.langUpdated&&p(0,u=rootScope.getTranslatedTourAndSteps(u,rootScope.language)),p(0,u.is_locked=!0,u);let t=!1;var s=u.steps[o.stepIndex];if(s.step_type===GmCXt.STEP_TYPE_BRANCH&&"Quick Branch"!==s.step_settings.branch_type){Gm.loading.set(!0);var e=rootScope.getNode(s.step_id,u.tour_settings.play_structure),l=u.tour_settings.play_structure.indexOf(e);p(0,u.tour_settings.play_structure[l].branch=[],u);for(let e=0;e<s.step_settings.branch.length;e++){var c={};c.tail=s.step_settings.branch[e].tail,u.tour_settings.play_structure[l].branch.push(c),t=!0}}rootScope.setTour(u),(t&&rootScope.isGuideInOriginalLang(u)?k:T)(u),Gm.loading.set(!1),p(3,rootScope.showStepCreatedSuccessMsg=!0,rootScope),Gm.statusBar.set("updateStepCompleted")}Gm.routeAction.set(null);break;case"updateStepFailed":r.data,x(),Gm.routeAction.set(null);break;case"createTags":i=r.data;rootScope.incrementPendingStepCount(),u.steps||p(0,u.steps=[],u),u.filteredSteps.push(i),Gm.loading.set(!1),Gm.routeAction.set(null);break;case"updateTourWithApi":k(r.data),Gm.routeAction.set(null);break;case"createStepPreview":a=r.data;if(!stepExistsInTour(u.steps,a.stepObj)){rootScope.incrementPendingStepCount(),GmCXt.checkForBranchVariationSteps(a.stepObj)&&Gm.loading.set(!0);let r=a.stepIndex;a=a.stepObj;if(a.step_id=GmCXt.getCurrentTimeInMilSec(),p(0,u.step_count++,u),GmCXt.isAutomationStep(a)&&Gm.loading.set(!0),a.step_screen&&100<a.step_screen.length||"guide"===a.step_type){t=GmCXt.createDeepCopy(a);if(t.step_screen_temp=t.step_screen,t.step_screen="","guide"===t.step_type&&(t.step_screen_temp=rootScope.staticContentPath+"technology.jpg"),u.steps||p(0,u.steps=[],u),rootScope.isTrackingGuide(u))u.filteredSteps.push(t);else{u.steps.splice(r,0,t),T(u);for(let e=t.step_order;e<u.steps.length;e++)p(0,u.steps[e].step_order++,u)}GmCXt.isTrue(a.step_settings.inlineBranch)&&Gm.loading.set(!0)}setTimeout(function(){var e,t=mg$$1(".step-item-auto");u.filteredSteps?r&&(r=getVisibleStepIndex(r,u.steps),(e=mg$$1(".step-item"))[r])&&e[r].scrollIntoView():t&&t[t.length-1]&&t[t.length-1].scrollIntoView()},20)}Gm.routeAction.set(null);break;case"refreshStep":e=r.data,GmCXt.isEmpty(e)||GmCXt.isEmpty(e.step)||e.step.tour_id===u.tour_id&&(p(0,u.steps=[],u),u.is_locked&&p(0,u.isLocked=!0,u),d(e,!0)),Gm.routeAction.set(null);break;case"refreshView":b(r.data),Gm.routeAction.set(null)}}));onDestroy(()=>{s(),m(),c(),M()});return e.$$.update=()=>{7&e.$$.dirty[0]&&null!=E&&null!=L&&E!=L&&(p(0,[u.filteredSteps[E],u.filteredSteps[L]]=[u.filteredSteps[L],u.filteredSteps[E]],u),p(1,E=L)),1&e.$$.dirty[0]&&u&&p(7,o=u.steps)},[u,E,L,rootScope,t,i,a,o,A,null,null,$,h,f,v,y,P,S,w,C,(e,t,r)=>{p(8,A=r.clientY),p(10,G=e),p(1,E=t),p(11,$=e.step_id),p(9,J=r.target.getBoundingClientRect().y-r.clientY)},e=>{p(8,A=e.clientY)},(e,t)=>{p(2,L=e)},e=>{C(u.filteredSteps),p(11,$=null),p(2,L=null)},function(){a=this.checked,p(6,a)},()=>S(),function(){rootScope.searchStepKeyword=this.value,p(3,rootScope)},()=>v(),()=>clearSearch(),function(e,t){e[t].copy=this.checked,p(7,o),p(0,u),p(1,E),p(2,L)},()=>y(),()=>P(),()=>w(),()=>f()]}class StepContainer extends SvelteComponent{constructor(e){super(),init(this,e,instance$b,create_fragment$b,safe_not_equal,{},null,[-1,-1,-1])}}function create_if_block_9$2(e){let r,i,a=e[1]?.tour_description+"",o;return{c(){r=element("div"),i=element("div"),o=text(a),attr(i,"class","mgPlayerJSPreview_tooltip-tour-desc ng-binding"),attr(r,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-right")},m(e,t){insert(e,r,t),append(r,i),append(i,o)},p(e,t){2&t&&a!==(a=e[1]?.tour_description+"")&&set_data(o,a)},d(e){e&&detach(r)}}}function create_if_block_3$5(e){let r=e[0].showPublishBtn(e[1])&&!e[0].isDesktopApp()&&!e[0].hideMirrorAppCtrl(),i,a=e[0].showSchedulePublish(e[1])&&!e[0].isDesktopApp()&&!e[0].hideMirrorAppCtrl(),o,n=e[0].FT.publish&&e[1].is_published&&e[0].isOwnerOrAppAdmin()&&!e[0].isDesktopApp()&&!e[0].hideMirrorAppCtrl()&&e[0].showUnpublish(e[1]),s,l=GmCXt.containBranchStep(e[1])&&e[0].FT.creatorApp,c,p=r&&create_if_block_8$3(e),d=a&&create_if_block_7$3(e),u=n&&create_if_block_6$4(e),g=l&&create_if_block_4$4(e);return{c(){p&&p.c(),i=space(),d&&d.c(),o=space(),u&&u.c(),s=space(),g&&g.c(),c=empty()},m(e,t){p&&p.m(e,t),insert(e,i,t),d&&d.m(e,t),insert(e,o,t),u&&u.m(e,t),insert(e,s,t),g&&g.m(e,t),insert(e,c,t)},p(e,t){(r=3&t?e[0].showPublishBtn(e[1])&&!e[0].isDesktopApp()&&!e[0].hideMirrorAppCtrl():r)?p?p.p(e,t):((p=create_if_block_8$3(e)).c(),p.m(i.parentNode,i)):p&&(p.d(1),p=null),(a=3&t?e[0].showSchedulePublish(e[1])&&!e[0].isDesktopApp()&&!e[0].hideMirrorAppCtrl():a)?d?d.p(e,t):((d=create_if_block_7$3(e)).c(),d.m(o.parentNode,o)):d&&(d.d(1),d=null),(n=3&t?e[0].FT.publish&&e[1].is_published&&e[0].isOwnerOrAppAdmin()&&!e[0].isDesktopApp()&&!e[0].hideMirrorAppCtrl()&&e[0].showUnpublish(e[1]):n)?u?u.p(e,t):((u=create_if_block_6$4(e)).c(),u.m(s.parentNode,s)):u&&(u.d(1),u=null),(l=3&t?GmCXt.containBranchStep(e[1])&&e[0].FT.creatorApp:l)?g?g.p(e,t):((g=create_if_block_4$4(e)).c(),g.m(c.parentNode,c)):g&&(g.d(1),g=null)},d(e){e&&(detach(i),detach(o),detach(s),detach(c)),p&&p.d(e),d&&d.d(e),u&&u.d(e),g&&g.d(e)}}}function create_if_block_8$3(r){let i,a,o,n=r[0].svgs.publish+"",s,l,c,p=r[0].labels.publish+"",d,u,g,m;return{c(){i=element("div"),a=element("div"),o=element("button"),s=space(),l=element("div"),c=element("div"),d=text(p),attr(o,"class","mgPlayerJSPreview_lbl-btn ege-inline-block-vt"),attr(o,"aria-label","publish"),attr(c,"class","mgPlayerJSPreview_tooltip-title"),attr(l,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-left"),attr(a,"class","mgPlayerJSPreview_status-publish mgPlayerJSPreview_status-publish-unpublish mgPlayerJSPreview_icons-hover-effect mgPlayerJSPreview_header-icon-wrapper ege-inline-block-vt"),attr(i,"id","mgPlayerJSPreview_btn-guide-view-publish"),attr(i,"class",u="mgPlayerJSPreview_guide-status-wrapper "+(0<r[0].pendingStepCount||r[0].draftExists(r[1].tour_id,r[1].category_id)?"mgPlayerJSPreview_disabled":""))},m(e,t){insert(e,i,t),append(i,a),append(a,o),o.innerHTML=n,append(a,s),append(a,l),append(l,c),append(c,d),g||(m=listen(o,"click",r[5]),g=!0)},p(e,t){1&t&&n!==(n=e[0].svgs.publish+"")&&(o.innerHTML=n),1&t&&p!==(p=e[0].labels.publish+"")&&set_data(d,p),3&t&&u!==(u="mgPlayerJSPreview_guide-status-wrapper "+(0<e[0].pendingStepCount||e[0].draftExists(e[1].tour_id,e[1].category_id)?"mgPlayerJSPreview_disabled":""))&&attr(i,"class",u)},d(e){e&&detach(i),g=!1,m()}}}function create_if_block_7$3(r){let i,a,o,n=r[0].svgs.publish+"",s,l,c,p=r[0].labels.btnScheduledPublish+"",d,u,g,m;return{c(){i=element("div"),a=element("div"),o=element("button"),s=space(),l=element("div"),c=element("div"),d=text(p),attr(o,"class","mgPlayerJSPreview_lbl-btn ege-inline-block-vt"),attr(o,"aria-label","publish"),attr(c,"class","mgPlayerJSPreview_tooltip-title"),attr(l,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-left"),attr(a,"class","mgPlayerJSPreview_status-publish mgPlayerJSPreview_status-publish-unpublish mgPlayerJSPreview_icons-hover-effect mgPlayerJSPreview_header-icon-wrapper ege-inline-block-vt"),attr(i,"id","mgPlayerJSPreview_btn-guide-view-schedule"),attr(i,"class",u="mgPlayerJSPreview_guide-status-wrapper "+(0<r[0].pendingStepCount||r[0].draftExists(r[1].tour_id,r[1].category_id)?"mgPlayerJSPreview_disabled":""))},m(e,t){insert(e,i,t),append(i,a),append(a,o),o.innerHTML=n,append(a,s),append(a,l),append(l,c),append(c,d),g||(m=listen(o,"click",r[6]),g=!0)},p(e,t){1&t&&n!==(n=e[0].svgs.publish+"")&&(o.innerHTML=n),1&t&&p!==(p=e[0].labels.btnScheduledPublish+"")&&set_data(d,p),3&t&&u!==(u="mgPlayerJSPreview_guide-status-wrapper "+(0<e[0].pendingStepCount||e[0].draftExists(e[1].tour_id,e[1].category_id)?"mgPlayerJSPreview_disabled":""))&&attr(i,"class",u)},d(e){e&&detach(i),g=!1,m()}}}function create_if_block_6$4(r){let i,a,o,n=r[0].svgs.unpublish+"",s,l,c,p=r[0].labels.btnUnpublish+"",d,u,g;return{c(){i=element("div"),a=element("div"),o=element("button"),s=space(),l=element("div"),c=element("div"),d=text(p),attr(o,"class","mgPlayerJSPreview_lbl-btn ege-inline-block-vt"),attr(o,"aria-label","unpublish"),attr(c,"class","mgPlayerJSPreview_tooltip-title"),attr(l,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-left"),attr(a,"class","mgPlayerJSPreview_status-unpublish mgPlayerJSPreview_status-publish-unpublish mgPlayerJSPreview_icons-hover-effect mgPlayerJSPreview_header-icon-wrapper ege-inline-block-vt"),attr(i,"id","mgPlayerJSPreview_btn-guide-view-unpublish"),attr(i,"class","mgPlayerJSPreview_guide-status-wrapper")},m(e,t){insert(e,i,t),append(i,a),append(a,o),o.innerHTML=n,append(a,s),append(a,l),append(l,c),append(c,d),u||(g=listen(o,"click",r[7]),u=!0)},p(e,t){1&t&&n!==(n=e[0].svgs.unpublish+"")&&(o.innerHTML=n),1&t&&p!==(p=e[0].labels.btnUnpublish+"")&&set_data(d,p)},d(e){e&&detach(i),u=!1,g()}}}function create_if_block_4$4(e){let r;function i(e){return e[0].guideViewFullScreen?create_else_block$2:create_if_block_5$4}let a=i(e),o=a(e);return{c(){r=element("div"),o.c(),attr(r,"id","mgPlayerJSPreview_btn-guide-view-full-screen"),attr(r,"class","guide-view-full-screen")},m(e,t){insert(e,r,t),o.m(r,null)},p(e,t){a===(a=i(e))&&o?o.p(e,t):(o.d(1),(o=a(e))&&(o.c(),o.m(r,null)))},d(e){e&&detach(r),o.d()}}}function create_else_block$2(r){let i,a=r[0].svgs.smallscreenIcon+"",o,n;return{c(){attr(i=element("button"),"class","mgPlayerJSPreview_lbl-btn guide-view-full-screen-icon mgPlayerJSPreview_icons-hover-effect mgPlayerJSPreview_header-icon-wrapper ege-inline-block-vt"),attr(i,"aria-label","smallscreen")},m(e,t){insert(e,i,t),i.innerHTML=a,o||(n=listen(i,"click",r[9]),o=!0)},p(e,t){1&t&&a!==(a=e[0].svgs.smallscreenIcon+"")&&(i.innerHTML=a)},d(e){e&&detach(i),o=!1,n()}}}function create_if_block_5$4(r){let i,a=r[0].svgs.fullscreen+"",o,n;return{c(){attr(i=element("button"),"class","mgPlayerJSPreview_lbl-btn guide-view-full-screen-icon mgPlayerJSPreview_icons-hover-effect mgPlayerJSPreview_header-icon-wrapper ege-inline-block-vt"),attr(i,"aria-label","fullscreen")},m(e,t){insert(e,i,t),i.innerHTML=a,o||(n=listen(i,"click",r[8]),o=!0)},p(e,t){1&t&&a!==(a=e[0].svgs.fullscreen+"")&&(i.innerHTML=a)},d(e){e&&detach(i),o=!1,n()}}}function create_if_block_2$5(e){let i,r;return i=new DownloadMedia({props:{tour:e[1]}}),{c(){create_component(i.$$.fragment)},m(e,t){mount_component(i,e,t),r=!0},p(e,t){var r={};2&t&&(r.tour=e[1]),i.$set(r)},i(e){r||(transition_in(i.$$.fragment,e),r=!0)},o(e){transition_out(i.$$.fragment,e),r=!1},d(e){destroy_component(i,e)}}}function create_if_block_1$6(e){let i,r,a,o,n,s;return a=new Empty({props:{tour:e[1]}}),{c(){i=element("div"),r=element("button"),create_component(a.$$.fragment),attr(r,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_icons-hover-effect mgPlayerJSPreview_header-icon-wrapper ege-inline-block-div"),attr(r,"aria-label","tour action dropdown"),attr(i,"id",o="tour-pencil-icon-"+(e[2]&&e[2]?.step_id||e[1]?.tour_id||e[3]&&e[3]?.entity_code)),attr(i,"class",n="ege-inline-block-div mgPlayerJSPreview_tour-more-option-icon "+(e[1].is_published?"":"tour-pencil-icon-unpublish"))},m(e,t){insert(e,i,t),append(i,r),mount_component(a,r,null),s=!0},p(e,t){var r={};2&t&&(r.tour=e[1]),a.$set(r),(!s||2&t&&o!==(o="tour-pencil-icon-"+(e[2]&&e[2]?.step_id||e[1]?.tour_id||e[3]&&e[3]?.entity_code)))&&attr(i,"id",o),(!s||2&t&&n!==(n="ege-inline-block-div mgPlayerJSPreview_tour-more-option-icon "+(e[1].is_published?"":"tour-pencil-icon-unpublish")))&&attr(i,"class",n)},i(e){s||(transition_in(a.$$.fragment,e),s=!0)},o(e){transition_out(a.$$.fragment,e),s=!1},d(e){e&&detach(i),destroy_component(a)}}}function create_if_block$7(r){let i,a=r[0].svgs.iconEdit+"",o,n;return{c(){attr(i=element("div"),"id","mgPlayerJSPreview_icon-edit-json"),attr(i,"class","ege-inline-block-div mgPlayerJSPreview_tour-more-option-icon mgPlayerJSPreview_header-icon-wrapper mgPlayerJSPreview_json-editor-icon")},m(e,t){insert(e,i,t),i.innerHTML=a,o||(n=listen(i,"click",r[10]),o=!0)},p(e,t){1&t&&a!==(a=e[0].svgs.iconEdit+"")&&(i.innerHTML=a)},d(e){e&&detach(i),o=!1,n()}}}function create_fragment$a(r){let i,a,o,n,s=r[0].svgs.iconBack+"",l,c,p,d,u,g=r[1].tour_title+"",m,h,_,f,v,y=!GmCXt.isFalseObj(r[1].tour_settings.downloadGuideFiles),P,S,w=r[0].FT.creatorApp&&(r[1].is_locked&&r[1].user_id==r[0].user.user_id||!r[1].is_locked||!r[1].is_published||r[0].isOwnerOrAppAdmin())&&!r[0].isUserRole()&&!r[0].isDesktopApp()&&!r[0].hideMirrorAppCtrl(),b,C,k,T,x,A,J=r[1].tour_description&&create_if_block_9$2(r),G=r[0].FT.creatorApp&&create_if_block_3$5(r),$=y&&create_if_block_2$5(r),E=w&&create_if_block_1$6(r),L=r[0].jsonEditor&&create_if_block$7(r);return{c(){i=element("div"),a=element("div"),o=element("div"),n=element("button"),l=space(),(c=element("div")).innerHTML='<div class="mgPlayerJSPreview_tooltip-title ng-binding">Back</div>',p=space(),d=element("div"),u=element("label"),m=text(g),h=space(),J&&J.c(),_=space(),f=element("div"),G&&G.c(),v=space(),$&&$.c(),P=space(),S=element("div"),E&&E.c(),b=space(),L&&L.c(),C=space(),k=element("div"),attr(n,"class","mgPlayerJSPreview_lbl-btn ege-inline-block-vt"),attr(n,"aria-label","back"),set_style(n,"margin-top","13px"),attr(c,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-right"),attr(o,"id","mgPlayerJSPreview_btn-guide-view-back"),attr(o,"class","mgPlayerJSPreview_back-button ege-inline-block-vm"),set_style(o,"padding","0px",1),attr(u,"class","ege-inline-block-vm mgPlayerJSPreview_position-relative mgPlayerJSPreview_width-100 ng-binding"),attr(d,"class","mgPlayerJSPreview_tour-title-wrapper mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm"),attr(a,"class","header-detail-view-tour-title"),attr(f,"class","header-detail-view-tour-download-container"),attr(k,"class","mgPlayerJSPreview_clear"),attr(S,"class","mgPlayerJSPreview_header-detail-view-tour-edit-container"),attr(i,"class","ege-panel-header-detail-view")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),n.innerHTML=s,append(o,l),append(o,c),append(a,p),append(a,d),append(d,u),append(u,m),append(d,h),J&&J.m(d,null),append(i,_),append(i,f),G&&G.m(f,null),append(f,v),$&&$.m(f,null),append(i,P),append(i,S),E&&E.m(S,null),append(S,b),L&&L.m(S,null),append(S,C),append(S,k),T=!0,x||(A=listen(n,"click",function(){is_function(r[0].backHandler)&&r[0].backHandler.apply(this,arguments)}),x=!0)},p(e,[t]){r=e,(!T||1&t)&&s!==(s=r[0].svgs.iconBack+"")&&(n.innerHTML=s),(!T||2&t)&&g!==(g=r[1].tour_title+"")&&set_data(m,g),r[1].tour_description?J?J.p(r,t):((J=create_if_block_9$2(r)).c(),J.m(d,null)):J&&(J.d(1),J=null),r[0].FT.creatorApp?G?G.p(r,t):((G=create_if_block_3$5(r)).c(),G.m(f,v)):G&&(G.d(1),G=null),(y=2&t?!GmCXt.isFalseObj(r[1].tour_settings.downloadGuideFiles):y)?$?($.p(r,t),2&t&&transition_in($,1)):(($=create_if_block_2$5(r)).c(),transition_in($,1),$.m(f,null)):$&&(group_outros(),transition_out($,1,1,()=>{$=null}),check_outros()),(w=3&t?r[0].FT.creatorApp&&(r[1].is_locked&&r[1].user_id==r[0].user.user_id||!r[1].is_locked||!r[1].is_published||r[0].isOwnerOrAppAdmin())&&!r[0].isUserRole()&&!r[0].isDesktopApp()&&!r[0].hideMirrorAppCtrl():w)?E?(E.p(r,t),3&t&&transition_in(E,1)):((E=create_if_block_1$6(r)).c(),transition_in(E,1),E.m(S,b)):E&&(group_outros(),transition_out(E,1,1,()=>{E=null}),check_outros()),r[0].jsonEditor?L?L.p(r,t):((L=create_if_block$7(r)).c(),L.m(S,C)):L&&(L.d(1),L=null)},i(e){T||(transition_in($),transition_in(E),T=!0)},o(e){transition_out($),transition_out(E),T=!1},d(e){e&&detach(i),J&&J.d(),G&&G.d(),$&&$.d(),E&&E.d(),L&&L.d(),x=!1,A()}}}function instance$a(e,t,r){let i=!1;i=get_store_value(Gm.currentTour);let a;rootScope.isTooltip(i);function o(e){r(0,rootScope.guideViewFullScreen=e,rootScope),rootScope.toggleGuideViewFullScreen()}let n=Gm.currentTour.subscribe(e=>{r(1,i=e)}),s=(Gm.breadCrumb.subscribe(e=>{a=e}),Gm.selectedLang.subscribe(e=>{r(1,i.selectedLang=e,i),r(1,i=rootScope.getTranslatedTourAndSteps(i,e))}));onDestroy(()=>{n(),s()});rootScope.backHandler=()=>{if(o(!1),0<a.length){var e=a[a.length-1];let t={action:"backwardTraversal",data:{detail:{parent:e,hasTour:e.has_tour,hasChild:e.has_child}}};Gm.routeAction.update(e=>t),rootScope.setCurrentPage("allguides")}else rootScope.setCurrentPage("currentpage")};return[rootScope,i,void 0,void 0,o,e=>rootScope.changeStatus(i,"publish",0,e),()=>rootScope.schedulePubTour(i),e=>rootScope.changeStatus(i,"unpublish",0,e),()=>o(!rootScope.guideViewFullScreen),()=>o(!rootScope.guideViewFullScreen),()=>rootScope.editJson(i,"guide")]}class StepHeader extends SvelteComponent{constructor(e){super(),init(this,e,instance$a,create_fragment$a,safe_not_equal,{})}}function get_each_context$2(e,t,r){e=e.slice();return e[10]=t[r],e}function create_else_block$1(t){let a,i,o=ensure_array_like(rootScope.sortDataByActiveFilter(t[0],"tour_title",t[1])),n=[];for(let e=0;e<o.length;e+=1)n[e]=create_each_block$2(get_each_context$2(t,o,e));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();a=empty()},m(t,r){for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,r);insert(t,a,r),i=!0},p(t,r){if(3&r){o=ensure_array_like(rootScope.sortDataByActiveFilter(t[0],"tour_title",t[1]));let e;for(e=0;e<o.length;e+=1){var i=get_each_context$2(t,o,e);n[e]?(n[e].p(i,r),transition_in(n[e],1)):(n[e]=create_each_block$2(i),n[e].c(),transition_in(n[e],1),n[e].m(a.parentNode,a))}for(group_outros(),e=o.length;e<n.length;e+=1)(e=>transition_out(n[e],1,1,()=>{n[e]=null}))(e);check_outros()}},i(e){if(!i){for(let e=0;e<o.length;e+=1)transition_in(n[e]);i=!0}},o(e){n=n.filter(Boolean);for(let e=0;e<n.length;e+=1)transition_out(n[e]);i=!1},d(e){e&&detach(a),destroy_each(n,e)}}}function create_if_block$6(e){let r,i,a,o=rootScope.svgs.no_guides_image+"",n,s,l,c,p;return{c(){r=element("div"),i=element("div"),a=element("div"),n=space(),s=element("div"),(l=element("div")).textContent=""+rootScope.labels.noGuideAvailableFor,c=space(),(p=element("div")).textContent=""+rootScope.labels.tryModifyingYourSearch,attr(a,"class","mgPlayerJSPreview_no-guide-found-search-icon"),attr(i,"class","mgPlayerJSPreview_no-guide-image-wrapper mgPlayerJSPreview_no-guide-search-wrapper"),attr(l,"class","mgPlayerJSPreview_no-guide-msg"),attr(l,"tabindex","0"),attr(p,"class","mgPlayerJSPreview_instruction-add-category"),attr(p,"tabindex","0"),attr(s,"class","mgPlayerJSPreview_no-guide-text-wrapper mgPlayerJSPreview_no-guide-text-search-wrapper "),attr(r,"class","no-tour-message-wrapper mgPlayerJSPreview_position-center"),toggle_class(r,"mgPlayerJSPreview_margin-t-50",!rootScope.isMicroPlayer)},m(e,t){insert(e,r,t),append(r,i),append(i,a),a.innerHTML=o,append(r,n),append(r,s),append(s,l),append(s,c),append(s,p)},p:noop,i:noop,o:noop,d(e){e&&detach(r)}}}function create_each_block$2(e){let r,i,a,o;return i=new TourView({props:{tour:e[10]}}),{c(){r=element("div"),create_component(i.$$.fragment),a=space(),attr(r,"class","tour-item mgPlayerJSPreview_guide-list-view "+(rootScope.isMicroPlayer?"mgPlayerJSPreview_guide-list-view-mplayer":"")),attr(r,"aria-live",rootScope.labels.searchResult)},m(e,t){insert(e,r,t),mount_component(i,r,null),append(r,a),o=!0},p(e,t){var r={};3&t&&(r.tour=e[10]),i.$set(r)},i(e){o||(transition_in(i.$$.fragment,e),o=!0)},o(e){transition_out(i.$$.fragment,e),o=!1},d(e){e&&detach(r),destroy_component(i)}}}function create_fragment$9(e){let i,a,o,r,n=[create_if_block$6,create_else_block$1],s=[];function l(e){return e[0].length<1?0:1}return a=l(e),o=s[a]=n[a](e),{c(){i=element("div"),o.c(),attr(i,"class","search-list")},m(e,t){insert(e,i,t),s[a].m(i,null),r=!0},p(e,[t]){let r=a;(a=l(e))===r?s[a].p(e,t):(group_outros(),transition_out(s[r],1,1,()=>{s[r]=null}),check_outros(),(o=s[a])?o.p(e,t):(o=s[a]=n[a](e)).c(),transition_in(o,1),o.m(i,null))},i(e){r||(transition_in(o),r=!0)},o(e){transition_out(o),r=!1},d(e){e&&detach(i),s[a].d()}}}function instance$9(e,t,r){let i;GmCXt.user;function a(){var e=mg$$1(".guide-view-header-panel-container").innerHeight()?mg$$1(".guide-view-header-panel-container").innerHeight():0,t=mg$$1(".list-page-header").innerHeight()?mg$$1(".list-page-header").innerHeight():0,r=mg$$1("#ege-header").innerHeight()?mg$$1("#ege-header").innerHeight():0,i=mg$$1(".ege-panel-header-sub-menu-urls").innerHeight()?mg$$1(".ege-panel-header-sub-menu-urls").innerHeight():0,a=mg$$1("#footer").innerHeight()?mg$$1("#footer").innerHeight():0;mg$$1(".search-list").css({height:window.innerHeight-e-a-i-t-r})}let o,n,s=(GmCXt.getLXPLang()&&(n=GmCXt.getLXPLang()),Gm.CurrentPage.subscribe(e=>{})),l=Gm.searchTours.subscribe(e=>{e&&r(0,i=rootScope.getTranslatedTours(e,n))}),c=(onDestroy(()=>{s(),l(),c()}),Gm.selectedLang.subscribe(e=>{GmCXt.getLXPLang()||(n=e),r(0,i=rootScope.getTranslatedTours(i,n))}));Gm.activeSortFilterStore.subscribe(e=>{r(1,o=e)});return setTimeout(function(){a()},100),mg$$1(window).off("resize").on("resize",a),onMount(()=>{a()}),[i,o]}class SearchPage extends SvelteComponent{constructor(e){super(),init(this,e,instance$9,create_fragment$9,safe_not_equal,{})}}function get_each_context$1(e,t,r){e=e.slice();return e[14]=t[r],e}function create_if_block$5(e){let i,a,o,n;return a=new TourView({props:{tour:e[14]}}),{c(){i=element("div"),create_component(a.$$.fragment),attr(i,"class",o="tour-item mgPlayerJSPreview_guide-list-view "+(e[0].isMicroPlayer?"mgPlayerJSPreview_guide-list-view-mplayer":""))},m(e,t){insert(e,i,t),mount_component(a,i,null),n=!0},p(e,t){var r={};2&t&&(r.tour=e[14]),a.$set(r),(!n||1&t&&o!==(o="tour-item mgPlayerJSPreview_guide-list-view "+(e[0].isMicroPlayer?"mgPlayerJSPreview_guide-list-view-mplayer":"")))&&attr(i,"class",o)},i(e){n||(transition_in(a.$$.fragment,e),n=!0)},o(e){transition_out(a.$$.fragment,e),n=!1},d(e){e&&detach(i),destroy_component(a)}}}function create_each_block$1(e){let r,i,a="smartTip"!=e[14].tour_type&&create_if_block$5(e);return{c(){a&&a.c(),r=empty()},m(e,t){a&&a.m(e,t),insert(e,r,t),i=!0},p(e,t){"smartTip"!=e[14].tour_type?a?(a.p(e,t),2&t&&transition_in(a,1)):((a=create_if_block$5(e)).c(),transition_in(a,1),a.m(r.parentNode,r)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(e){i||(transition_in(a),i=!0)},o(e){transition_out(a),i=!1},d(e){e&&detach(r),a&&a.d(e)}}}function create_fragment$8(t){let a,o,r,i,n=ensure_array_like(t[1]),s=[];for(let e=0;e<n.length;e+=1)s[e]=create_each_block$1(get_each_context$1(t,n,e));return{c(){a=element("div");for(let e=0;e<s.length;e+=1)s[e].c();o=space(),attr(r=element("div"),"class","ege-clear"),attr(a,"class","category-list")},m(e,t){insert(e,a,t);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(a,null);append(a,o),append(a,r),i=!0},p(t,[r]){if(3&r){n=ensure_array_like(t[1]);let e;for(e=0;e<n.length;e+=1){var i=get_each_context$1(t,n,e);s[e]?(s[e].p(i,r),transition_in(s[e],1)):(s[e]=create_each_block$1(i),s[e].c(),transition_in(s[e],1),s[e].m(a,o))}for(group_outros(),e=n.length;e<s.length;e+=1)(e=>transition_out(s[e],1,1,()=>{s[e]=null}))(e);check_outros()}},i(e){if(!i){for(let e=0;e<n.length;e+=1)transition_in(s[e]);i=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)transition_out(s[e]);i=!1},d(e){e&&detach(a),destroy_each(s,e)}}}let limit=50;function instance$8(e,t,r){rootScope.filterByPublishedGuides,rootScope.currentUserFilter,rootScope.currentAssigneeFilter,rootScope.currentView="filter-list";function i(t){Gm.loading.set(!0);var e={limit:limit,offset:a};e.my_guides=rootScope.user.user_id,GmCXt.getLXPLang()&&(e.language=GmCXt.getLXPLang()),api.getTourList(e,function(e){p(t,e)})}let a=0,o=0,n=[],s=!0,l=rootScope.activeTourId,c=(l=l||0,Gm.MyGuidePageTours.subscribe(e=>{r(1,n=e)})),p=(onDestroy(()=>{c()}),i(0),function(e,t){(t=rootScope.getTranslatedTours(t))&&0<t.length&&(r(1,n=e?mg$$1.merge(n,t):t),Gm.MyGuidePageTours.set(n),o=t.length),s=!0,n.forEach(function(e){e.tour_id===l&&(e.screencastInProgress=!0)}),Gm.MyGuidePageTours.set(n),d()}),d=(mg$$1(".category-list").off("scroll").on("scroll",function(){if(!s)return!0;mg$$1(this).scrollTop()+mg$$1(this).innerHeight()>=mg$$1(this)[0].scrollHeight-20&&mg$$1(this)[0].scrollHeight+20>mg$$1(this).innerHeight()&&(s=!1,o===limit)&&(Gm.loading.set(!0),a+=limit,i(1))}),function(){var e=mg$$1(".list-page-header").innerHeight()?mg$$1(".list-page-header").innerHeight():0,t=mg$$1("#ege-header").innerHeight()?mg$$1("#ege-header").innerHeight():0,r=mg$$1(".ege-panel-header-sub-menu-urls").innerHeight()?mg$$1(".ege-panel-header-sub-menu-urls").innerHeight():0,i=mg$$1("#footer").innerHeight()?mg$$1("#footer").innerHeight():0;mg$$1(".category-list").css({height:window.innerHeight-i-r-e-t})});return mg$$1(window).off("resize").on("resize",d),[rootScope,n]}class MyGuides extends SvelteComponent{constructor(e){super(),init(this,e,instance$8,create_fragment$8,safe_not_equal,{})}}function create_fragment$7(e){let r,i,a,o=e[0].svgs.no_guides_image+"",n,s,l=e[0].labels.noGuidesOnDomain+"",c,p,d,u=e[0].labels.noAppOnDomain+"",g,m,h,_,f,v,y,P,S=e[0].labels.contactAdmin+"";return{c(){r=element("div"),i=element("div"),a=element("div"),n=space(),s=element("div"),c=text(l),p=space(),d=element("div"),g=text(u),m=space(),h=element("div"),_=text("("),f=text(e[1]),v=text(")"),y=space(),P=element("div"),attr(a,"class","mgPlayerJSPreview_no-app-icon mgPlayerJSPreview_position-relative mgPlayerJSPreview_inline-block-vm"),attr(i,"class","mgPlayerJSPreview_no-app-icon-wrapper mgPlayerJSPreview_display-inline-block mgPlayerJSPreview_text-align-center mgPlayerJSPreview_margin-tb-30"),attr(s,"class","mgPlayerJSPreview_no-guide-msg mgPlayerJSPreview_text-align-center mgPlayerJSPreview_font-size-20 mgPlayerJSPreview_text-align-center mgPlayerJSPreview_font-weight-550 mgPlayerJSPreview_text-color-dark"),attr(h,"class","mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_font-weight-550"),attr(d,"class","mgPlayerJSPreview_default-app-msg mgPlayerJSPreview_display-inline-block mgPlayerJSPreview_text-align-center mgPlayerJSPreview_font-size-16 mgPlayerJSPreview_margin-tb-10"),attr(P,"class","mgPlayerJSPreview_contact-support-msg mgPlayerJSPreview_display-inline-block mgPlayerJSPreview_text-align-center mgPlayerJSPreview_font-size-16 mgPlayerJSPreview_margin-tb-10"),attr(r,"class","mgPlayerJSPreview_no-app-container mgPlayerJSPreview_text-align-center"),toggle_class(r,"mgPlayerJSPreview_no-margin",!e[0].isMicroPlayer)},m(e,t){insert(e,r,t),append(r,i),append(i,a),a.innerHTML=o,append(r,n),append(r,s),append(s,c),append(r,p),append(r,d),append(d,g),append(d,m),append(d,h),append(h,_),append(h,f),append(h,v),append(r,y),append(r,P),P.innerHTML=S},p(e,[t]){1&t&&o!==(o=e[0].svgs.no_guides_image+"")&&(a.innerHTML=o),1&t&&l!==(l=e[0].labels.noGuidesOnDomain+"")&&set_data(c,l),1&t&&u!==(u=e[0].labels.noAppOnDomain+"")&&set_data(g,u),2&t&&set_data(f,e[1]),1&t&&S!==(S=e[0].labels.contactAdmin+"")&&(P.innerHTML=S),1&t&&toggle_class(r,"mgPlayerJSPreview_no-margin",!e[0].isMicroPlayer)},i:noop,o:noop,d(e){e&&detach(r)}}}function instance$7(e,t,r){GmCXt.log(21,"NO APPS found"),rootScope.currentView="no-app",rootScope.resetAppData();let i="";return GmCXt.urlParts&&GmCXt.urlParts.host&&r(1,i=GmCXt.urlParts.host),[rootScope,i]}class NoApp extends SvelteComponent{constructor(e){super(),init(this,e,instance$7,create_fragment$7,safe_not_equal,{})}}function create_if_block_20(e){let r,i;return r=new Empty({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_19(e){let r,i,a;return i=new Empty({props:{currentPageRoute:0<e[2].length&&"stepview"!==e[0]?"categorylist":e[0]}}),{c(){r=element("div"),create_component(i.$$.fragment),attr(r,"class","mgPlayerJSPreview_float-right mgPlayerJSPreview_margin-lr-5")},m(e,t){insert(e,r,t),mount_component(i,r,null),a=!0},p(e,t){var r={};5&t&&(r.currentPageRoute=0<e[2].length&&"stepview"!==e[0]?"categorylist":e[0]),i.$set(r)},i(e){a||(transition_in(i.$$.fragment,e),a=!0)},o(e){transition_out(i.$$.fragment,e),a=!1},d(e){e&&detach(r),destroy_component(i)}}}function create_if_block_18(e){let r,i;return r=new StepHeader({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_16(e){var t="tour-view"!=get_store_value(Gm.activeView)&&"chatbot"!=get_store_value(Gm.activeView)&&"login-view"!=get_store_value(Gm.activeView)&&"forgot-password-view"!=get_store_value(Gm.activeView)&&"task-status-list"!=get_store_value(Gm.activeView)&&"insights-tag-view"!=get_store_value(Gm.activeView)&&"add-guide"!=get_store_value(Gm.activeView)&&"add-category"!=get_store_value(Gm.activeView)&&"add-smartTip"!=get_store_value(Gm.activeView)&&"change-password-view"!=get_store_value(Gm.activeView)&&"survey-step"!=get_store_value(Gm.activeView)&&"bot-conv-step"!=get_store_value(Gm.activeView)&&"video-step"!==get_store_value(Gm.activeView)&&(rootScope.FT.creatorApp||rootScope.showAppSwitcher&&1<rootScope.user.app_access.length)&&!rootScope.maintenance;let r,i,a=t&&create_if_block_17();return{c(){a&&a.c(),r=empty()},m(e,t){a&&a.m(e,t),insert(e,r,t),i=!0},i(e){i||(transition_in(a),i=!0)},o(e){transition_out(a),i=!1},d(e){e&&detach(r),a&&a.d(e)}}}function create_if_block_17(e){let r,i;return r=new Empty({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_else_block(e){let r,i,a,o=""!==e[0]&&create_if_block_10$1(e);return{c(){r=element("div"),o&&o.c(),attr(r,"id","home-page-container"),attr(r,"class",i="ege-panel-main-container home-page-container "+("allguidesSearchPage"==e[0]||"currentPageSearchPage"==e[0]?"search-page-container":""))},m(e,t){insert(e,r,t),o&&o.m(r,null),a=!0},p(e,t){""!==e[0]?o?(o.p(e,t),1&t&&transition_in(o,1)):((o=create_if_block_10$1(e)).c(),transition_in(o,1),o.m(r,null)):o&&(group_outros(),transition_out(o,1,1,()=>{o=null}),check_outros()),(!a||1&t&&i!==(i="ege-panel-main-container home-page-container "+("allguidesSearchPage"==e[0]||"currentPageSearchPage"==e[0]?"search-page-container":"")))&&attr(r,"class",i)},i(e){a||(transition_in(o),a=!0)},o(e){transition_out(o),a=!1},d(e){e&&detach(r),o&&o.d()}}}function create_if_block_9$1(e){let r,i;return r=new NoApp({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},p:noop,i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_7$2(e){let r,i,a,o,n=(i=new StepContainer({}),"addLinkGuide"==e[0]&&create_if_block_8$2());return{c(){r=element("div"),create_component(i.$$.fragment),a=space(),n&&n.c(),attr(r,"id","tour-view-page-container"),attr(r,"class","ege-panel-main-container tour-view-page-container")},m(e,t){insert(e,r,t),mount_component(i,r,null),append(r,a),n&&n.m(r,null),o=!0},p(e,t){"addLinkGuide"==e[0]?n?1&t&&transition_in(n,1):((n=create_if_block_8$2()).c(),transition_in(n,1),n.m(r,null)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(e){o||(transition_in(i.$$.fragment,e),transition_in(n),o=!0)},o(e){transition_out(i.$$.fragment,e),transition_out(n),o=!1},d(e){e&&detach(r),destroy_component(i),n&&n.d()}}}function create_if_block_6$3(e){let r,i;return r=new Empty({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},p:noop,i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_5$3(e){let r,i;return r=new Empty({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},p:noop,i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_4$3(e){let r,i;return r=new Empty({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},p:noop,i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_3$4(e){let r,i;return r=new Empty({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},p:noop,i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_2$4(e){let r,i;return r=new Empty({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},p:noop,i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_1$5(e){let r,i;return r=new Empty({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},p:noop,i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block$4(e){let r,i;return r=new Empty({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},p:noop,i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_10$1(e){let i,r,a,o,n,s,l=(r=new Filter({}),[create_if_block_11$1,create_if_block_12,create_if_block_13,create_if_block_14,create_if_block_15]),c=[];function p(e){return"currentpage"===e[0]?0:"myguides"===e[0]?1:"allguides"==e[0]?2:"allguidesSearchPage"==e[0]||"currentPageSearchPage"==e[0]?3:"listView"==e[0]?4:-1}return~(o=p(e))&&(n=c[o]=l[o](e)),{c(){i=element("div"),create_component(r.$$.fragment),a=space(),n&&n.c(),attr(i,"class","tour-list-page-container")},m(e,t){insert(e,i,t),mount_component(r,i,null),append(i,a),~o&&c[o].m(i,null),s=!0},p(e,t){let r=o;(o=p(e))!==r&&(n&&(group_outros(),transition_out(c[r],1,1,()=>{c[r]=null}),check_outros()),~o?((n=c[o])||(n=c[o]=l[o](e)).c(),transition_in(n,1),n.m(i,null)):n=null)},i(e){s||(transition_in(r.$$.fragment,e),transition_in(n),s=!0)},o(e){transition_out(r.$$.fragment,e),transition_out(n),s=!1},d(e){e&&detach(i),destroy_component(r),~o&&c[o].d()}}}function create_if_block_15(e){let r,i;return r=new Empty({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_14(e){let r,i;return r=new SearchPage({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_13(e){let r,i;return r=new AllGuide({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_12(e){let r,i;return r=new MyGuides({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_11$1(e){let r,i;return r=new CurrentPage({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_8$2(e){let r,i;return r=new Empty({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_key_block$1(e){let i,a,r,o,n,s,l,c,p,d,u,g,m,h,_,f,v,y,P,S,w=e[1]&&create_if_block_20(),b=(o=new UserMenu({}),"addCategory"!==e[0]&&"addGuide"!==e[0]&&"addSurveyStep"!==e[0]&&"addTransportStep"!==e[0]&&"addVideoStep"!==e[0]&&"addTextSlideStep"!==e[0]&&"copySteps"!==e[0]&&!rootScope.automationSelectionMode&&create_if_block_19(e)),C=("stepview"==e[0]||"addLinkGuide"==e[0]||"copySteps"==e[0])&&create_if_block_18(),k="addCategory"!==e[0]&&"addGuide"!==e[0]&&"stepview"!==e[0]&&"addSurveyStep"!==e[0]&&"addTransportStep"!==e[0]&&"addLinkGuide"!==e[0]&&"addVideoStep"!==e[0]&&"addTextSlideStep"!==e[0]&&"copySteps"!==e[0]&&create_if_block_16(),T=[create_if_block$4,create_if_block_1$5,create_if_block_2$4,create_if_block_3$4,create_if_block_4$3,create_if_block_5$3,create_if_block_6$3,create_if_block_7$2,create_if_block_9$1,create_else_block],x=[];function A(e,t){return(p=null==(p=1&t?null:p)?!(!rootScope.isOwnerOrAppAdmin()||"appsettings"!=e[0]):p)?0:"addCategory"==e[0]?1:"addGuide"==e[0]?2:"addSurveyStep"==e[0]?3:"addTransportStep"==e[0]?4:"addVideoStep"==e[0]?5:"addTextSlideStep"==e[0]?6:"stepview"==e[0]||"addLinkGuide"==e[0]||"copySteps"==e[0]?7:"noapp"==e[0]?8:9}return d=A(e,-1),u=x[d]=T[d](e),P=new Footer({}),{c(){i=element("div"),w&&w.c(),a=space(),r=element("div"),create_component(o.$$.fragment),n=space(),b&&b.c(),s=space(),C&&C.c(),l=space(),k&&k.c(),c=space(),u.c(),g=space(),m=element("div"),h=space(),_=element("div"),f=space(),v=element("div"),y=space(),create_component(P.$$.fragment),attr(r,"class","mgPlayerJSPreview_panel-header-wrapper mgPlayerJSPreview_width-100 mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between "+(rootScope.isMicroPlayer?"mgPlayerJSPreview_br-white mgPlayerJSPreview_panel-header-micro-wrapper":"")),attr(i,"id","ege-header"),attr(i,"class","ege-panel-header"),attr(m,"id","add-branch-view"),attr(_,"id","add-history-view"),attr(v,"id","automation-url-results")},m(e,t){insert(e,i,t),w&&w.m(i,null),append(i,a),append(i,r),mount_component(o,r,null),append(i,n),b&&b.m(i,null),append(i,s),C&&C.m(i,null),append(i,l),k&&k.m(i,null),insert(e,c,t),x[d].m(e,t),insert(e,g,t),insert(e,m,t),insert(e,h,t),insert(e,_,t),insert(e,f,t),insert(e,v,t),insert(e,y,t),mount_component(P,e,t),S=!0},p(e,t){e[1]?w?2&t&&transition_in(w,1):((w=create_if_block_20()).c(),transition_in(w,1),w.m(i,a)):w&&(group_outros(),transition_out(w,1,1,()=>{w=null}),check_outros()),"addCategory"===e[0]||"addGuide"===e[0]||"addSurveyStep"===e[0]||"addTransportStep"===e[0]||"addVideoStep"===e[0]||"addTextSlideStep"===e[0]||"copySteps"===e[0]||rootScope.automationSelectionMode?b&&(group_outros(),transition_out(b,1,1,()=>{b=null}),check_outros()):b?(b.p(e,t),1&t&&transition_in(b,1)):((b=create_if_block_19(e)).c(),transition_in(b,1),b.m(i,s)),"stepview"==e[0]||"addLinkGuide"==e[0]||"copySteps"==e[0]?C?1&t&&transition_in(C,1):((C=create_if_block_18()).c(),transition_in(C,1),C.m(i,l)):C&&(group_outros(),transition_out(C,1,1,()=>{C=null}),check_outros()),"addCategory"!==e[0]&&"addGuide"!==e[0]&&"stepview"!==e[0]&&"addSurveyStep"!==e[0]&&"addTransportStep"!==e[0]&&"addLinkGuide"!==e[0]&&"addVideoStep"!==e[0]&&"addTextSlideStep"!==e[0]&&"copySteps"!==e[0]?k?1&t&&transition_in(k,1):((k=create_if_block_16()).c(),transition_in(k,1),k.m(i,null)):k&&(group_outros(),transition_out(k,1,1,()=>{k=null}),check_outros());let r=d;(d=A(e,t))===r?x[d].p(e,t):(group_outros(),transition_out(x[r],1,1,()=>{x[r]=null}),check_outros(),(u=x[d])?u.p(e,t):(u=x[d]=T[d](e)).c(),transition_in(u,1),u.m(g.parentNode,g))},i(e){S||(transition_in(w),transition_in(o.$$.fragment,e),transition_in(b),transition_in(C),transition_in(k),transition_in(u),transition_in(P.$$.fragment,e),S=!0)},o(e){transition_out(w),transition_out(o.$$.fragment,e),transition_out(b),transition_out(C),transition_out(k),transition_out(u),transition_out(P.$$.fragment,e),S=!1},d(e){e&&(detach(i),detach(c),detach(g),detach(m),detach(h),detach(_),detach(f),detach(v),detach(y)),w&&w.d(),destroy_component(o),b&&b.d(),C&&C.d(),k&&k.d(),x[d].d(e),destroy_component(P,e)}}}function create_fragment$6(e){let r=e[3],i,a,o=create_key_block$1(e);return{c(){o.c(),i=empty()},m(e,t){o.m(e,t),insert(e,i,t),a=!0},p(e,[t]){8&t&&safe_not_equal(r,r=e[3])?(group_outros(),transition_out(o,1,1,noop),check_outros(),(o=create_key_block$1(e)).c(),transition_in(o,1),o.m(i.parentNode,i)):o.p(e,t)},i(e){a||(transition_in(o),a=!0)},o(e){transition_out(o),a=!1},d(e){e&&detach(i),o.d(e)}}}function instance$6(e,t,r){let i="",a=!1,o=[],n=0;let s=Gm.breadCrumb.subscribe(e=>{!1===e&&Gm.breadCrumb.set([]),r(2,o=e),storage.breadCrumb.set(e)}),l=(Gm.statusBar.subscribe(e=>{r(1,a=!1),setTimeout(()=>{r(1,a=!0)},10)}),Gm.CurrentPage.subscribe(e=>{r(0,i=e),r(3,n+=1),"stepview"!==e&&"allguides"!==e&&"myguides"!==e&&"currentpage"!==e&&"noapp"!==e||storage.currentPage.set(e)}));return onMount(()=>{var e;r(2,o=get_store_value(Gm.breadCrumb)),r(0,i=get_store_value(Gm.CurrentPage)),get_store_value(Gm.currentTour),rootScope.FT.isPlayer&&"noapp"!==i?rootScope.setCurrentPage("currentpage"):rootScope.FT.isPlayer&&"noapp"===i?rootScope.setCurrentPage("noapp"):(0<o.length&&(e={detail:{parent:e=o[o.length-1],hasTour:e.has_tour,hasChild:e.has_child}},Gm.routeAction.set({action:"forwardTraversal",data:e})),i&&!1!==i||(rootScope.allGuideView?rootScope.setCurrentPage("allguides"):rootScope.setCurrentPage("currentpage")))}),onDestroy(()=>{s(),l()}),[i,a,o,n]}class Home extends SvelteComponent{constructor(e){super(),init(this,e,instance$6,create_fragment$6,safe_not_equal,{})}}function create_if_block_1$4(t){let r,i,a=t[0].labels.captchaLbl+"",o,n,s,l,c,p,d;function e(e){t[12](e)}function u(e){t[13](e)}function g(e){t[14](e)}var m={};return void 0!==t[2]&&(m.captchaValid=t[2]),void 0!==t[3]&&(m.showCaptchaError=t[3]),void 0!==t[4]&&(m.inputCaptchaRef=t[4]),s=new Captcha({props:m}),binding_callbacks.push(()=>bind(s,"captchaValid",e)),binding_callbacks.push(()=>bind(s,"showCaptchaError",u)),binding_callbacks.push(()=>bind(s,"inputCaptchaRef",g)),{c(){r=element("div"),i=element("div"),o=text(a),n=space(),create_component(s.$$.fragment),attr(i,"class","mgPlayerJSPreview_text-align-left mgPlayerJSPreview_login-field-label"),attr(r,"class","mgPlayerJSPreview_margin-tb-10")},m(e,t){insert(e,r,t),append(r,i),append(i,o),append(r,n),mount_component(s,r,null),d=!0},p(e,t){(!d||1&t)&&a!==(a=e[0].labels.captchaLbl+"")&&set_data(o,a);var r={};!l&&4&t&&(l=!0,r.captchaValid=e[2],add_flush_callback(()=>l=!1)),!c&&8&t&&(c=!0,r.showCaptchaError=e[3],add_flush_callback(()=>c=!1)),!p&&16&t&&(p=!0,r.inputCaptchaRef=e[4],add_flush_callback(()=>p=!1)),s.$set(r)},i(e){d||(transition_in(s.$$.fragment,e),d=!0)},o(e){transition_out(s.$$.fragment,e),d=!1},d(e){e&&detach(r),destroy_component(s)}}}function create_fragment$5(r){let i,a,o,n,s=r[0].labels.forgetPassTitl+"",l,F,c,p,d,u,g,m,h=r[0].labels.placeholderEmail+"",_,O,f,v,R,y,P=r[0].labels.emailError+"",S,N,H,w,b,C=r[0].labels.forgetPassTitl+"",k,T,x,B,A,J,G=r[0].labels.backToLogin+"",$,E,U,L,M,I,X,V,D=(i=new Header({}),!GmCXt.conf.hideCaptcha&&create_if_block_1$4(r));return M=new Footer({}),{c(){create_component(i.$$.fragment),a=space(),o=element("div"),n=element("h2"),l=text(s),F=space(),c=element("div"),p=element("form"),d=element("div"),u=element("div"),g=element("div"),m=element("div"),_=text(h),O=space(),f=element("input"),R=space(),y=element("div"),S=text(P),N=space(),D&&D.c(),H=space(),w=element("div"),b=element("button"),k=text(C),B=space(),A=element("div"),J=element("button"),$=text(G),U=space(),L=space(),create_component(M.$$.fragment),attr(n,"class","mgPlayerJSPreview_font-size-24 mgPlayerJSPreview_text-align-center mgPlayerJSPreview_margin-25"),attr(m,"class","mgPlayerJSPreview_text-align-left mgPlayerJSPreview_login-field-label"),attr(f,"id","mgPlayerJSPreview_input-forgot-email"),attr(f,"class","mgPlayerJSPreview_input-type-text mgPlayerJSPreview_font-size-16 mgPlayerJSPreview_inline-block-vm"),attr(f,"maxlength","50"),attr(f,"spellcheck","true"),attr(f,"type","email"),attr(f,"placeholder",v=r[0].labels.placeholderEmail),attr(f,"name","email"),attr(f,"aria-describedby","mgPlayerJSPreview_input-forgot-email-err-msg"),attr(f,"autocomplete","email"),attr(f,"aria-label","Email ID"),f.required=!0,attr(y,"id","mgPlayerJSPreview_input-forgot-email-err-msg"),attr(y,"class","error-input-wrapper"),toggle_class(y,"active",r[7]),attr(g,"class","mgPlayerJSPreview_input-email-wrapper mgPlayerJSPreview_margin-tb-10"),attr(u,"class","mgPlayerJSPreview_signin-form-input"),attr(b,"id","mgPlayerJSPreview_btn-reset-pass"),attr(b,"type","button"),attr(b,"class","mgPlayerJSPreview_btn-default mgPlayerJSPreview_font-size-15"),attr(b,"aria-disabled",T=r[7]||!r[2]),attr(b,"aria-label",x=r[0].labels.forgetPassTitl),attr(w,"class","mgPlayerJSPreview_btn-login-wrapper mgPlayerJSPreview_text-align-center"),attr(J,"id","mgPlayerJSPreview_label-forgot-back-to-login"),attr(J,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_back-to-login mgPlayerJSPreview_theme-color mgPlayerJSPreview_text-align-center mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_font-weight-550 mgPlayerJSPreview_inline-block-vm"),attr(J,"type","button"),attr(J,"aria-label",E=r[0].labels.backToLogin),attr(A,"class","mgPlayerJSPreview_width-100 mgPlayerJSPreview_text-align-center"),attr(d,"class","mgPlayerJSPreview_signin-form-container"),attr(p,"name","forgotPasswordForm"),attr(p,"autocomplete","off"),attr(c,"class","mgPlayerJSPreview_signin-page-wrapper"),attr(o,"class","ege-panel-main-container mgPlayerJSPreview_signin-page-container forgot-password-page-container")},m(e,t){mount_component(i,e,t),insert(e,a,t),insert(e,o,t),append(o,n),append(n,l),append(o,F),append(o,c),append(c,p),append(p,d),append(d,u),append(u,g),append(g,m),append(m,_),append(g,O),append(g,f),set_input_value(f,r[1]),r[11](f),append(g,R),append(g,y),append(y,S),append(u,N),D&&D.m(u,null),append(d,H),append(d,w),append(w,b),append(b,k),append(d,B),append(d,A),append(A,J),append(J,$),append(o,U),insert(e,L,t),mount_component(M,e,t),I=!0,X||(V=[listen(f,"input",r[10]),listen(b,"click",r[9]),listen(J,"click",function(){is_function(r[0].goToLogin)&&r[0].goToLogin.apply(this,arguments)})],X=!0)},p(e,[t]){r=e,(!I||1&t)&&s!==(s=r[0].labels.forgetPassTitl+"")&&set_data(l,s),(!I||1&t)&&h!==(h=r[0].labels.placeholderEmail+"")&&set_data(_,h),(!I||1&t&&v!==(v=r[0].labels.placeholderEmail))&&attr(f,"placeholder",v),2&t&&f.value!==r[1]&&set_input_value(f,r[1]),(!I||1&t)&&P!==(P=r[0].labels.emailError+"")&&set_data(S,P),(!I||128&t)&&toggle_class(y,"active",r[7]),GmCXt.conf.hideCaptcha||D.p(r,t),(!I||1&t)&&C!==(C=r[0].labels.forgetPassTitl+"")&&set_data(k,C),(!I||132&t&&T!==(T=r[7]||!r[2]))&&attr(b,"aria-disabled",T),(!I||1&t&&x!==(x=r[0].labels.forgetPassTitl))&&attr(b,"aria-label",x),(!I||1&t)&&G!==(G=r[0].labels.backToLogin+"")&&set_data($,G),(!I||1&t&&E!==(E=r[0].labels.backToLogin))&&attr(J,"aria-label",E)},i(e){I||(transition_in(i.$$.fragment,e),transition_in(D),transition_in(M.$$.fragment,e),I=!0)},o(e){transition_out(i.$$.fragment,e),transition_out(D),transition_out(M.$$.fragment,e),I=!1},d(e){e&&(detach(a),detach(o),detach(L)),destroy_component(i,e),r[11](null),D&&D.d(),destroy_component(M,e),X=!1,run_all(V)}}}function instance$5(e,t,r){let i="",a=!1,o=!1,n,s,l,c;rootScope.currentView="forgot-password-view";let p;function d(){var e={email:i};Gm.loading.set(!0),api.forgetPassword(e,function(e){var t=rootScope.labels.otpSentDesc+" "+GmCXt.conf.adminEmail;modal.open(t,"info",function(){rootScope.goToLogin()},!1,!1,!1,rootScope.labels.forgetPassTitl)},function(e){rootScope.showPopup(e.message)})}return[rootScope,i,a,o,n,"","",!1,p,function(){r(3,o=!1),r(7,c=!1),a||GmCXt.conf.hideCaptcha?""!==i.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(i)?d():(r(7,!0),p?.focus()):(r(3,o=!0),n?.focus())},function(){i=this.value,r(1,i)},function(e){binding_callbacks[e?"unshift":"push"](()=>{p=e,r(8,p)})},function(e){a=e,r(2,a)},function(e){o=e,r(3,o)},function(e){n=e,r(4,n)},function(){i=this.value,r(1,i)},function(){i=this.value,r(1,i)},function(){s=this.value,r(5,s)},function(){l=this.value,r(6,l)}]}class ForgotPwd extends SvelteComponent{constructor(e){super(),init(this,e,instance$5,create_fragment$5,safe_not_equal,{})}}function create_fragment$4(r){let i,a,o,n,s,l,c,p,d,u,g=r[0].svgs.iconBack+"",m,h,_,f=r[0].labels.back+"",v,y,P,S,w=r[0].labels.chatbot+"",b,C,k,T,x,A,J,G,$,E,L,M;return n=new UserMenu({}),$=new Footer({}),{c(){i=element("div"),a=element("div"),o=element("div"),create_component(n.$$.fragment),s=space(),l=element("div"),c=element("div"),p=element("div"),d=element("div"),u=element("div"),m=space(),h=element("div"),_=element("div"),v=text(f),y=space(),P=element("div"),S=element("span"),b=text(w),C=space(),k=element("div"),T=space(),x=element("div"),A=space(),(J=element("div")).innerHTML='<div id="botdiv"></div> <div id="div_bottom"></div>',G=space(),create_component($.$$.fragment),attr(o,"class","mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_width-100"),attr(a,"class","mgPlayerJSPreview_panel-header-wrapper mgPlayerJSPreview_width-100 mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between"),toggle_class(a,"mgPlayerJSPreview_bg-white",r[0].isMicroPlayer),toggle_class(a,"mgPlayerJSPreview_panel-header-micro-wrapper",r[0].isMicroPlayer),attr(i,"id","ege-header"),attr(i,"class","ege-panel-header"),attr(u,"class","ege-inline-block-vm"),attr(_,"class","mgPlayerJSPreview_tooltip-title"),attr(h,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-left"),attr(d,"class","ege-inline-block-vm mgPlayerJSPreview_chat-back-btn mgPlayerJSPreview_position-relative"),attr(S,"class","mychat-label ege-inline-block-vt"),attr(P,"class","chatbot-add-icon ege-inline-block-div"),attr(k,"class","ege-clear"),attr(x,"class","ege-clear"),attr(c,"class","mgPlayerJSPreview_chat-page-header list-page-header"),toggle_class(c,"mgPlayerJSPreview_chat-page-header-miniplayer",r[0].isMicroPlayer),attr(J,"id","uilb-main-container"),attr(J,"scroll-bottom","uilb-main-container"),attr(J,"class","uilb-main-container"),attr(l,"id","chatbot-page-container"),attr(l,"class","ege-panel-main-container mgPlayerJSPreview_chatbot-page-container")},m(e,t){insert(e,i,t),append(i,a),append(a,o),mount_component(n,o,null),insert(e,s,t),insert(e,l,t),append(l,c),append(c,p),append(p,d),append(d,u),u.innerHTML=g,append(d,m),append(d,h),append(h,_),append(_,v),append(p,y),append(p,P),append(P,S),append(S,b),append(p,C),append(p,k),append(p,T),append(p,x),append(l,A),append(l,J),append(l,G),mount_component($,l,null),E=!0,L||(M=listen(d,"click",r[1]),L=!0)},p(e,t){(!E||1&t[0])&&toggle_class(a,"mgPlayerJSPreview_bg-white",e[0].isMicroPlayer),(!E||1&t[0])&&toggle_class(a,"mgPlayerJSPreview_panel-header-micro-wrapper",e[0].isMicroPlayer),(!E||1&t[0])&&g!==(g=e[0].svgs.iconBack+"")&&(u.innerHTML=g),(!E||1&t[0])&&f!==(f=e[0].labels.back+"")&&set_data(v,f),(!E||1&t[0])&&w!==(w=e[0].labels.chatbot+"")&&set_data(b,w),(!E||1&t[0])&&toggle_class(c,"mgPlayerJSPreview_chat-page-header-miniplayer",e[0].isMicroPlayer)},i(e){E||(transition_in(n.$$.fragment,e),transition_in($.$$.fragment,e),E=!0)},o(e){transition_out(n.$$.fragment,e),transition_out($.$$.fragment,e),E=!1},d(e){e&&(detach(i),detach(s),detach(l)),destroy_component(n),destroy_component($),L=!1,M()}}}function onRemoveElement(e){e=e.parentElement;null!==e.parentElement&&e.parentElement.removeChild(e)}function addRangeQuestion(t){var r=[];for(let e=t.options[0];e<=t.options[1];e++)r.push({text:e,value:e,cssClass:"animated fadeInRight uilb-button-opt-range"});return r}function addRateQuestion(t){var r=[];for(let e=t.options[0];e<=t.options[1];e++)r.push({id:"mgPlayerJSPreview_rate-"+e,text:"&#9733;",value:e,cssClass:"animated fadeInRight uilb-button-opt-range"});return r}function addRateAnswer(t,r){let i="<wmgPlayerJSPreview_ class='mgPlayerJSPreview_rating' style='font-size:20px;'>";for(let e=t.options[0];e<=t.options[1];e++){var a="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_stars-rate";e<parseInt(r)+1?i+="<button class='"+a+"' id='mgPlayerJSPreview_rate-"+e+"' aria-label='rate' >&#9733;</button>":i+="<button class='"+a+"' id='mgPlayerJSPreview_rate-"+e+"' aria-label='rate' >&#9734;</button>"}return i+="</wmgPlayerJSPreview_>"}function filterTourBytext(e,t){return e.filter(function(e){if(-1!==e.tour_title.toLowerCase().indexOf(t.toLowerCase()))return e})}function instance$4(e,t,r){class i{constructor(e){this.domNode=e,this.domNode.classList.add("uilb")}createtypingodots(){var e=document.createElement("div"),t=(e.setAttribute("class","typing-indicator animated fadeInLeft"),document.createElement("uilb-span")),r=document.createElement("uilb-span"),i=document.createElement("uilb-span");return e.appendChild(t),e.appendChild(r),e.appendChild(i),this.domNode.appendChild(e),e}createContainer({human:e,cssClass:t,delay:r,resolve:i}){let a=document.createElement("div");return a.className=`uilb-container ${e?"human":"bot"} `+t,a.style.opacity=0,a.style.transform=`translateX(${e?"":"-"}8%)`,setTimeout(()=>{this.domNode.appendChild(a)},r),setTimeout(()=>{a.style.opacity=1,a.style.transform="translateX(0)",i&&i(a)},r+200),a}htmlToText(e){return e?String(e).replace(/<[^>]+>/gm,""):""}message({id:i,content:a,cssClass:o,delay:n,human:s,isHtmlContent:l}){return new Promise((e,t)=>{var e=this.createContainer({human:s,cssClass:o,delay:n,isHtmlContent:l,resolve:e}),r=document.createElement("div");""!==i&&r.setAttribute("id",i),r.className=`uilb-message showtextdelay  ${s?"human":"bot"} `+o,"msg_search"===i||"msg-vid"===i||l?r.innerHTML=l?a:this.htmlToText(a):(r.innerHTML=""===a?"<div id='wave'><span class='dot'></span><span class='dot'></span><span class='dot'></span></div>":"<div id='hideMe'><div id='wave'><span class='dot'></span><span class='dot'></span><span class='dot'></span></div></div>",r.innerHTML+=this.htmlToText(a)),e.appendChild(r),document.getElementById("uilb-main-container")&&(document.getElementById("uilb-main-container").scrollTop=300)})}action(e){return this[e.type+"Action"](e)}buttonAction({id:s,items:l,delay:c,human:p,cssClass:d}){let u=[];return new Promise((a,e)=>{let o=this.createContainer({human:p,delay:c,cssClass:"no-icon"}),t=(""!==s&&(o.id=s),document.createElement("form"));var r,i;t.className=`uilb-action ${p?"human":"bot"} `+d,t.addEventListener("submit",e=>e.preventDefault()),"uilb-btn-action"===s&&((r=document.createElement("div")).id="uilb-back-chat",r.title="Back",r.setAttribute("class","uilb-action-opt-back"),(i=document.createElement("button")).id="uilb-back-btn",i.className="uilb-back",r.appendChild(i),(i=document.createElement("div")).innerHTML="Back",i.setAttribute("class","uilb-back-label"),r.appendChild(i),t.style="width: 360px;height: 100px;overflow: hidden;",o.appendChild(r));let n=0;l.forEach(r=>{let i=document.createElement("button");""!==r.id&&(i.id=r.id),i.className="uilb-button "+r.cssClass,i.type="button",i.innerHTML=r.text,i.tag=r.tag,"uilb-btn-action"===s&&(i.id="uilb-btnresult"+n,i.style.display=0===n||1===n?"block":"none"),i.title=r.text,i.addEventListener("click",({target:e})=>{if("multiselect"!==r.tag){u.length?a(u):a(r.value),o.style.opacity=0;let e=document.getElementById("uilb-searchagain");e&&"uilb-searchagain"!==i.id&&i.className.includes("uilb-button-opt")?setTimeout(()=>{e.parentElement.removeChild(e),o.parentElement.removeChild(o)},200):setTimeout(()=>this.domNode.removeChild(o),200)}else{var t;u.includes(r.value)?(-1<(t=u.indexOf(r.value))&&u.splice(t,1),e.innerHTML=e.title.replace("&#9989;","&#9744;")):(u.push(r.value),e.innerHTML=e.title.replace("&#9744;","&#9989;"))}}),t.appendChild(i),n+=1}),o.appendChild(t),"uilb-btn-action"===s&&2<n&&((i=document.createElement("div")).id="uilb_totalresult",i.style.fontSize="12px",i.style.marginTop="10px",i.innerHTML="Total Guides: "+n,o.appendChild(i),(r=document.createElement("div")).id="uilb-leftarrow",o.appendChild(r),(i=document.createElement("div")).id="uilb-rightarrow",i.style.display="none",o.appendChild(i))})}textAction({tag:s,validate:l,delay:c,human:p}){return new Promise((e,t)=>{var r=this.createContainer({human:p,delay:c,cssClass:"no-icon"}),i=document.createElement("div"),a=(i.id="uilb-back-chat",i.title="Back",i.setAttribute("class","uilb-action-opt-back"),i.setAttribute("style","margin-left: -60px; margin-top: -10px;"),document.createElement("button")),a=(a.id="uilb-back-btn",a.className="uilb-back",i.appendChild(a),document.createElement("div")),a=(a.innerHTML="Back",a.setAttribute("class","uilb-back-label"),i.appendChild(a),document.createElement("div")),o=(a.className="uilb-text-div",document.createElement("input")),n=(o.className="uilb-text",o.id="txtsearch",o.type="text",o.placeholder="Type here",o.autocomplete="off",o.tag=s,o.validate=l,document.createElement("div"));n.id="uilb-txt-enter",n.className="uilb-enter",a.appendChild(i),a.appendChild(o),a.appendChild(n),r.appendChild(a)})}}function a(){Gm.activeView.set("home"),console.trace()}let o=[],l=(rootScope.botTourPlayList=[],[]),n=[];GmCXt.reduceSidePanel();let u,g,s=0,c=[],p=-1,d=[],m=-1;var h=rootScope.appList["app:"+rootScope.activeAppId].settings;GmCXt.isEmpty(rootScope.chatLabels)&&rootScope.setDefaultChatLabels(),rootScope.getChatLabels(h.chatLabels);let _={welcomeGreet:"Hey! Welcome to MyGuide. How can I help you?",searchGuide:"Search Guide",searchMessage:"What would you like to search? Just type or say!",noDataFound:"No Data Found",pleaseTryAgain:"Try Again!",chooseResult:"The results are here, choose your preferred one!",noInput:"No input found!",searchAgain:"Try Again!"};function f(e,t,r,i,a){return u.message({id:e,content:t,cssClass:r,isHtmlContent:a,delay:i})}function v(e,t){return u.message({human:!0,content:e,cssClass:"animated fadeInRight",isHtmlContent:t,delay:0})}function y(e,t,r,i){return u.action({id:e,type:"button",cssClass:t,items:r,delay:i})}function P(e,t){function r(e){t(e)}var i={},a=(i.conversation_code=e.conversation.conversationCode,i.user=rootScope.user,GmCXt.appList);i.app_code=e.isExit?"":a["app:"+GmCXt.activeAppId].external_id,GmCXt.api.getGetBotConv(i).then(r).catch(function(e){r(!1)})}function S(e,t){if(s!==p){var r=e[p],i=t;switch(r.pageIndex,r.type){case"select":case"yes-no":((a,o)=>{f("",a.question,"animated fadeInLeft",0).then(function(){let i=[];if(a.options&&0<a.options.length){let r="animated fadeInRight uilb-button-opt";"yes-no"===a.type&&(r="animated fadeInUp uilb-button-opt-yesno"),mg$$1.each(a.options,function(e,t){i.push({text:t.option,value:t,cssClass:r}),a.isBranchNode&&d.push(t.nextHopOnBranch)}),y("","animated fadeInRight",i,200).then(function(t){t.optionReferenceLink&&window.open(t.optionReferenceLink,"_blank"),J(a,t.option),v(t.option).then(function(){var e;p<c.length-1?a.isBranchNode?(e=(t=>{let r=-1;for(let e=0;e<c.length;e++)if(c[e].pageIndex===t){r=e;break}return r})(t.nextHopOnBranch),m=t.nextHopOnBranch,p=e,S(c,o)):A(a,o):x()})})}})})(r,i);break;case"multi-select":!function i(a,o){f("",a.question,"animated fadeInLeft",0).then(function(){let r=[];if(a.options&&0<a.options.length){mg$$1.each(a.options,function(e,t){r.push({text:"&#9744; "+t.option,value:t,cssClass:"animated fadeInRight uilb-button-multi-opt",tag:"multiselect"})});let e=[];r.push({text:"Done",value:e,cssClass:"animated fadeInRight uilb-button-multi-opt-done"}),y("mgPlayerJSPreview_multi","animated fadeInRight",r,200).then(function(t){let r="";if(t&&t.length){for(let e=0;e<t.length;e++)r=GmCXt.isEmpty(r)?t[e].option:r+" , "+t[e].option;J(a,r),v(r).then(function(){A(a,o)})}else v(rootScope.labels.multiSelectOptionError).then(function(){i(a,o)})})}})}(r,i);break;case"comment":f("",r.question,"animated fadeInLeft",0).then(function(){u.action({type:"text",cssClass:"animated fadeInLeft",delay:100,tag:"comment_"+i.tour_id,validate:r.validateEmail})});break;case"range":f("",r.question,"animated fadeInLeft",0).then(function(){y("uilb-btn-range","animated fadeInRight",addRangeQuestion(r),200).then(function(e){J(r,e),v(e).then(function(){A(r,i)})})});break;case"rating":f("",r.question,"animated fadeInLeft",0).then(function(){y("uilb-btn-rate","animated fadeInRight",addRateQuestion(r),200).then(function(e){J(r,e),v(addRateAnswer(r,e),!0).then(function(){A(r,i)})})})}}}function w(e){var e=GmCXt.getTail(e.step_id,g.tour_settings.play_structure,null,g);e&&(e=GmCXt.getNextBotStepFromTour(e,g))?C(g.steps,e.step_id):x()}function b(t,r){for(let e=0;e<g.steps.length;e++)t.step_id===g.steps[e].step_id&&(g.steps[e].step_settings.automation.defaultData=r,g.steps[e].step_settings.automation.enableDefaultData=!0,g.steps[e].step_settings.automation.hasHumanInteraction=!1)}function C(e,t){let r,i=(r=t||e[0].step_id,GmCXt.getStepFromTourData(r,g));if(i&&i.step_settings&&i.step_settings.automation&&i.step_settings.automation.enableBot&&i.step_settings.automation.botQuestion){t=i.step_settings,e=t.automation.botQuestion;t.element&&t.element.targetInfo&&"SELECT"===t.element.targetInfo.tagName&&t.element.elOptions&&0<t.element.elOptions.length?(p=t.element.elOptions,d=i,f("",e,"animated fadeInLeft",0).then(function(){let r=[];p&&0<p.length&&(mg$$1.each(p,function(e,t){r.push({text:t.name,value:t,cssClass:"animated fadeInRight uilb-button-opt"})}),y("","animated fadeInRight",r,200).then(function(e){b(d,e),v(e.name).then(function(){w(d)})}))})):t.branch&&0<t.branch.length?(l=t.branch,c=i,f("",e,"animated fadeInLeft",0).then(function(){let r=[];l&&0<l.length&&(mg$$1.each(l,function(e,t){r.push({text:t.branchName,value:t,cssClass:"animated fadeInRight uilb-button-opt"})}),y("","animated fadeInRight",r,200).then(function(e){let t=e.tail;var r,i;t||(r=(t=>{let r=g.tour_settings.play_structure,i=null;for(let e=0;e<r.length;e++)parseInt(r[e].id)===parseInt(t)&&(i=r[e]);return i})(c.step_id),i=l.indexOf(e),t=r.branch[i].tail),b(c,e),v(e.branchName).then(function(){var e;t?(e=GmCXt.getNextBotStepFromTour(t,g))?C(g.steps,e.step_id):w(e):x()})}))})):i.step_type!==GmCXt.STEP_TYPE_GUIDE&&f("",e,"animated fadeInLeft",0).then(function(){u.action({type:"text",cssClass:"animated fadeInLeft",delay:100,tag:i})})}else if(i.step_type===GmCXt.STEP_TYPE_GUIDE){var a=i;var o=function(e){C(g.steps,e.step_id)};let r=[];function n(e){g.steps=e,o(r[0])}function s(e){r.length&&(g.tour_settings.play_structure=e,GmCXt.concatLinkGuideSteps(r,g,a.step_id,n))}t={tour_id:a.step_settings.tour_id};GmCXt.apiPlayer&&(t.forceJSONApi=!0),GmCXt.getSteps(t).then(function(e){var t;e&&(t={currentStepId:a.step_id,playStructure:g.tour_settings.play_structure},r=e.steps,GmCXt.updatePlayStructureLinkGuide(e,t,s))})}else if(g.tour_type.includes("onboarding_tour"))if(GmCXt.isEmpty(i.step_settings.tutorialUploadUrl)||"upload"!==g.tour_settings.tutorial_tour_type){let e="<div class='mgPlayerJSPreview_chat-tg-content-wrapper'>",t="";i.step_description&&(t=GmCXt.replaceVariableWithValue(GmCXt.updateOrgAndAddSignature(i.step_description))),i&&0<i.step_video&&i.step_video_url?e=e+"<div class='mgPlayerJSPreview_chat-guide-info-wrapper mgPlayerJSPreview_video-info-wrapper'><video controls autoplay controlsList='nodownload' disablePictureInPicture ><source src='"+i.step_video_url+GmCXt.getCdnSign()+"' type='video/mp4'></video></div>":i&&i.image_url.indexOf("default")<0&&(e=e+"<div class='mgPlayerJSPreview_chat-info-wrapper mgPlayerJSPreview_img-info-wrapper'><img class='mgPlayerJSPreview_chat-tg-image' src='"+i.image_url+GmCXt.getCdnSign()+"' /></div>"),f("",e=e+"<div class='mgPlayerJSPreview_chat-tg-step-content' > "+t+" </div></div>","animated fadeInLeft",0,!0).then(function(){w(i)})}else{let e=i.step_settings.tutorialUploadUrl;f("","<a alt='' href='"+(e=-1!==e.indexOf(GmCXt.conf.cdnStorage)?i.step_settings.tutorialUploadUrl+GmCXt.getCdnSign():e)+"' target='_blank' >"+i.step_settings.tutorialUploadUrl+"</a> ","animated fadeInLeft",0,!0).then(function(){w(i)})}else GmCXt.isLastStep(i.step_id,g.tour_settings.play_structure)?x():i&&((e=GmCXt.getNextBotStepFromTour(i.step_id,g))?C(g.steps,e.step_id):x());var l,c,p,d}function k(e){e=rootScope.filterBotGuides(e);if(e&&e.length){o=e;let r=[];mg$$1.each(o,function(e,t){r.push({text:t.tour_title,value:t,cssClass:"animated fadeInRight uilb-button-options"})}),y("","animated fadeInUp",r,200).then(function(e){v((g=e).tour_title).then(function(e){var t={tour_id:g.tour_id,category_id:g.category_id};api.getTour(t,function(e){var t;g=e,GmCXt.containBranchStep(g)||(g.tour_settings.play_structure=GmCXt.buildGuidePlayStructure(g)),GmCXt.isBotGuide(g)?(t=g,(e={}).conversation=t.tour_settings.conversation,P(e,function(e){s=e.data.questions.length,c=e.data.questions,p++,S(c,t)})):C(g.steps)})})})}else f("",_.noDataFound,"animated fadeInLeft",100)}function T(){let r=rootScope.readLocalCT(rootScope.pageUrl,GmCXt.pageTitle);if(r&&r.length)k(l=r);else{let t={url:rootScope.pageUrl};api.getContextualTour(t,function(e){GmCXt.log(30,"FETCHED tours from API"),r=rootScope.processContextualGuide(e,t.url),k(l=r)})}}function x(){f("",rootScope.chatLabels.botEndingMessage,"animated fadeInLeft",500).then(function(){y("","animated fadeInUp",[{text:rootScope.labels.btnYes,value:rootScope.labels.btnYes,cssClass:"animated fadeInUp uilb-button-opt-yesno"},{text:rootScope.labels.btnNo,value:rootScope.labels.btnNo,cssClass:"animated fadeInUp uilb-button-opt-yesno"}],100).then(function(e){var t;rootScope.botTourPlayList.push(g),GmCXt.storage().set({botTourPlayList:rootScope.botTourPlayList}),GmCXt.isOnboarding(g)&&rootScope.isUploadTutorial(g)?GmCXt.trackerV1.trackTutGuide(g,"upload_tutorial_guide_new_tab","bot"):GmCXt.isOnboarding(g)&&GmCXt.trackerV1.trackTutGuide(g,"create_tutorial_guide","bot"),GmCXt.isBotGuide(g)&&(t={trigger_source_type:"bot",trigger_source_id:g.tour_id,conversationCode:g.tour_settings.conversation.conversationCode},GmCXt.trackerV1.trackConversationResponse(n,t)),s=0,c=[],p=-1,d=[],m=-1,n=[],e===rootScope.labels.btnNo?v(e).then(function(){(()=>{let e=!0;var t;return rootScope.botTourPlayList&&rootScope.botTourPlayList.length&&(t=rootScope.botTourPlayList.filter(function(e){if(!GmCXt.isBotGuide(e)&&-1===e.tour_type.indexOf("onboarding_tour"))return e}),r(0,rootScope.botTourPlayList=t,rootScope),e=0<rootScope.botTourPlayList.length),e})()&&rootScope.guideAction(rootScope.playAuto,null,rootScope.botTourPlayList[0],"bot"),a()}):T()})})}function A(e,t){p<c.length-1?!(e.isBranchNode||m!==c[p+1].pageIndex&&d.includes(c[p+1].pageIndex))||GmCXt.isEmpty(d)?(p++,S(c,t)):(p++,A(e,t)):x()}function J(e,t){var r={question_id:e.questionID||"",question_type:e.type,question_name:e.question||""};switch(e.type){case"yes-no":void 0!==t&&(r.is_answer_yes="Yes"===t);break;case"comment":r.comment=t;break;case"multi-select":r.option=t.split(",");break;case"select":case"range":case"rating":r.option=t.toString().split()}n.push(r)}return mg$$1(document).off("keypress","#txtsearch"),mg$$1(document).on("keypress","#txtsearch",function(r){if(13===(r.keyCode||r.which)){let e=!1;var r=e=r.target.validate?!0:e,i=document.getElementById("txtsearch");if(null!==i&&0<i.value.length){var a,o,n=i.parentElement,s=n.parentElement;let t=i.value;i.tag&&"object"!=typeof i.tag&&-1!==i.tag.indexOf("comment_")&&t?(i.tag.replace("comment_",""),v(t=r?/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,3}$/i.test(t)?i.value:rootScope.labels.emailError:t).then(function(){var e;t===rootScope.labels.emailError?S(c,g):(J(e=c[p],t),A(e,g))})):i.tag&&"object"!=typeof i.tag&&"searchGuide"===i.tag&&t?(r=document.getElementsByClassName("uilb-button-options")[0].parentElement,(a=filterTourBytext(l,t))&&(k(a),GmCXt.timeout(onRemoveElement(r),200))):(o=i.tag,s.style.opacity=0,v(t).then(function(e){b(o,t),GmCXt.isLastStep(o.step_id,g.tour_settings.play_structure)?x():w(o)})),GmCXt.timeout(onRemoveElement(n),200)}}}),onMount(()=>{u=new i(document.getElementById("botdiv")),r(0,rootScope.botTourPlayList=[],rootScope),GmCXt.storage().remove(["botTourPlayList"]),f("",rootScope.chatLabels.greetingMessage,"animated fadeInLeft",0).then(function(){T()})}),[rootScope,a]}class Bot extends SvelteComponent{constructor(e){super(),init(this,e,instance$4,create_fragment$4,safe_not_equal,{},null,[-1,-1])}}function get_each_context(e,t,r){e=e.slice();return e[35]=t[r],e[37]=r,e}function get_each_context_1(e,t,r){e=e.slice();return e[38]=t[r],e[40]=r,e}function get_each_context_2(e,t,r){e=e.slice();return e[41]=t[r],e[43]=r,e}function get_each_context_3(e,t,r){e=e.slice();return e[41]=t[r],e[45]=r,e}function create_if_block_11(e){let r,i,a,o,n,s,l,c;return{c(){r=element("div"),i=element("div"),a=element("span"),o=text(e[2]),n=text("%"),s=space(),(l=element("div")).innerHTML='<div class="mgPlayerJSPreview_task-prog-first50-bar"></div> <div class="mgPlayerJSPreview_task-prog-value-bar"></div>',attr(l,"class","mgPlayerJSPreview_task-prog-left-half-clipper"),attr(i,"class",c="mgPlayerJSPreview_task-progress-circle p"+e[2]),toggle_class(i,"over50",50<e[2]),toggle_class(i,"mgPlayerJSPreview_task-progress-circle-mplayer",e[0].isMicroPlayer),attr(r,"class","mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center")},m(e,t){insert(e,r,t),append(r,i),append(i,a),append(a,o),append(a,n),append(i,s),append(i,l)},p(e,t){4&t[0]&&set_data(o,e[2]),4&t[0]&&c!==(c="mgPlayerJSPreview_task-progress-circle p"+e[2])&&attr(i,"class",c),4&t[0]&&toggle_class(i,"over50",50<e[2]),5&t[0]&&toggle_class(i,"mgPlayerJSPreview_task-progress-circle-mplayer",e[0].isMicroPlayer)},d(e){e&&detach(r)}}}function create_if_block_10(e){let r,i=e[1][e[3]].task_list_title+"",a,o,n,s,l,c,p,d;return{c(){r=element("div"),a=text(i),n=space(),s=element("div"),l=text("Completed task: "),c=text(e[8]),p=text("/"),d=text(e[7]),attr(r,"class","mgPlayerJSPreview_task-list-header-title mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_font-size-12 mgPlayerJSPreview_task-list-header"),attr(r,"title",o=e[1][e[3]].title),toggle_class(r,"mgPlayerJSPreview_font-size-14",!e[0].isMicroPlayer),attr(s,"class","mgPlayerJSPreview_task-count mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_margin-tb-5")},m(e,t){insert(e,r,t),append(r,a),insert(e,n,t),insert(e,s,t),append(s,l),append(s,c),append(s,p),append(s,d)},p(e,t){10&t[0]&&i!==(i=e[1][e[3]].task_list_title+"")&&set_data(a,i),10&t[0]&&o!==(o=e[1][e[3]].title)&&attr(r,"title",o),1&t[0]&&toggle_class(r,"mgPlayerJSPreview_font-size-14",!e[0].isMicroPlayer),256&t[0]&&set_data(c,e[8]),128&t[0]&&set_data(d,e[7])},d(e){e&&(detach(r),detach(n),detach(s))}}}function create_if_block_9(e){let r,i=e[0].svgs.iconDownArrow+"";return{c(){attr(r=element("div"),"class","mgPlayerJSPreview_icon-collapse-expand mgPlayerJSPreview_float-right ege-inline-block-vm")},m(e,t){insert(e,r,t),r.innerHTML=i},p(e,t){1&t[0]&&i!==(i=e[0].svgs.iconDownArrow+"")&&(r.innerHTML=i)},d(e){e&&detach(r)}}}function create_if_block_8$1(e){let r,i=e[0].svgs.iconUpArrow+"";return{c(){attr(r=element("div"),"class","mgPlayerJSPreview_icon-collapse-expand mgPlayerJSPreview_float-right ege-inline-block-vm")},m(e,t){insert(e,r,t),r.innerHTML=i},p(e,t){1&t[0]&&i!==(i=e[0].svgs.iconUpArrow+"")&&(r.innerHTML=i)},d(e){e&&detach(r)}}}function create_if_block_6$2(t){let a,o=ensure_array_like(t[35].guides),n=[];for(let e=0;e<o.length;e+=1)n[e]=create_each_block_3(get_each_context_3(t,o,e));return{c(){a=element("div");for(let e=0;e<n.length;e+=1)n[e].c();attr(a,"class","mgPlayerJSPreview_chapter-container mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y mgPlayerJSPreview_padding-tb-10")},m(e,t){insert(e,a,t);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(a,null)},p(t,r){if(27154&r[0]){o=ensure_array_like(t[35].guides);let e;for(e=0;e<o.length;e+=1){var i=get_each_context_3(t,o,e);n[e]?n[e].p(i,r):(n[e]=create_each_block_3(i),n[e].c(),n[e].m(a,null))}for(;e<n.length;e+=1)n[e].d(1);n.length=o.length}},d(e){e&&detach(a),destroy_each(n,e)}}}function create_if_block_7$1(e){let r,i,a=GmCXt.svgs.taskCompleted+"";return{c(){r=element("div"),attr(i=element("div"),"class","mgPlayerJSPreview_guide-complete-icon"),attr(r,"class","mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_guide-complete-wrapper")},m(e,t){insert(e,r,t),append(r,i),i.innerHTML=a},p:noop,d(e){e&&detach(r)}}}function create_each_block_3(r){let i,a,o,n,s,l=r[13](r[41])+"",c,p,d,u=r[14](r[41])+"",g,m,h,_,f=r[41].tour_title+"",v,y,P,S,w,b,C=r[41].is_guide_complete&&create_if_block_7$1();function k(...e){return r[17](r[41],r[35],...e)}return{c(){i=element("button"),a=element("div"),o=element("div"),n=element("div"),s=element("div"),c=space(),p=element("div"),d=element("div"),g=text(u),m=space(),h=element("div"),_=element("div"),v=text(f),P=space(),C&&C.c(),S=space(),attr(s,"class","mgPlayerJSPreview_published-tour-icon mgPlayerJSPreview_inline-block-vm"),toggle_class(s,"mgPlayerJSPreview_published-tour-icon-disable",r[4]&&r[41].content_order>r[9]),attr(d,"class","mgPlayerJSPreview_tooltip-title mgPlayerJSPreview_text-align-center"),attr(p,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-right"),attr(n,"class","mgPlayerJSPreview_guide-play-icon-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_position-relative"),attr(_,"class","mgPlayerJSPreview_chapter-title mgPlayerJSPreview_text-overflow-ellipsis"),attr(_,"title",y=r[41].tour_title),toggle_class(_,"mgPlayerJSPreview_chapter-title-complete",r[4]&&r[41].is_guide_complete),attr(h,"class","mgPlayerJSPreview_chapter-content-wrapper mgPlayerJSPreview_margin-lr-15 mgPlayerJSPreview_inline-block-vm"),attr(o,"class","mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center"),attr(a,"class","mgPlayerJSPreview_chapter-content-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between"),attr(i,"class","mgPlayerJSPreview_chapter-box mgPlayerJSPreview_chapter-box-folder-guide mgPlayerJSPreview_lbl-btn"),toggle_class(i,"mgPlayerJSPreview_chapter-box-disable",r[4]&&r[45]+1>r[9])},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),append(n,s),s.innerHTML=l,append(n,c),append(n,p),append(p,d),append(d,g),append(o,m),append(o,h),append(h,_),append(_,v),append(a,P),C&&C.m(a,null),append(i,S),w||(b=listen(i,"click",k),w=!0)},p(e,t){r=e,2&t[0]&&l!==(l=r[13](r[41])+"")&&(s.innerHTML=l),530&t[0]&&toggle_class(s,"mgPlayerJSPreview_published-tour-icon-disable",r[4]&&r[41].content_order>r[9]),2&t[0]&&u!==(u=r[14](r[41])+"")&&set_data(g,u),2&t[0]&&f!==(f=r[41].tour_title+"")&&set_data(v,f),2&t[0]&&y!==(y=r[41].tour_title)&&attr(_,"title",y),18&t[0]&&toggle_class(_,"mgPlayerJSPreview_chapter-title-complete",r[4]&&r[41].is_guide_complete),r[41].is_guide_complete?C?C.p(r,t):((C=create_if_block_7$1()).c(),C.m(a,null)):C&&(C.d(1),C=null),528&t[0]&&toggle_class(i,"mgPlayerJSPreview_chapter-box-disable",r[4]&&r[45]+1>r[9])},d(e){e&&detach(i),C&&C.d(),w=!1,b()}}}function create_if_block$3(t){let a,o=ensure_array_like(t[35].folders),n=[];for(let e=0;e<o.length;e+=1)n[e]=create_each_block_1(get_each_context_1(t,o,e));return{c(){a=element("div");for(let e=0;e<n.length;e+=1)n[e].c();attr(a,"class","mgPlayerJSPreview_chapter-container mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y")},m(e,t){insert(e,a,t);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(a,null)},p(t,r){if(31347&r[0]){o=ensure_array_like(t[35].folders);let e;for(e=0;e<o.length;e+=1){var i=get_each_context_1(t,o,e);n[e]?n[e].p(i,r):(n[e]=create_each_block_1(i),n[e].c(),n[e].m(a,null))}for(;e<n.length;e+=1)n[e].d(1);n.length=o.length}},d(e){e&&detach(a),destroy_each(n,e)}}}function create_if_block_1$3(r){let i,a,o,n,s=r[0].svgs.folder+"",l,c,p,d=r[38].folder_title+"",u,g,m,h,_,f,v,y,P=r[6]===r[40]&&create_if_block_5$2(r),S=r[6]!==r[40]&&create_if_block_4$2(r),w=0<r[38].guides.length&&r[6]===r[40]&&create_if_block_2$3(r);function b(...e){return r[19](r[38],r[40],r[37],...e)}return{c(){i=element("div"),a=element("button"),o=element("div"),n=element("div"),l=space(),c=element("div"),p=element("div"),u=text(d),m=space(),P&&P.c(),h=space(),S&&S.c(),_=space(),w&&w.c(),f=space(),attr(n,"class","mgPlayerJSPreview_category-icon mgPlayerJSPreview_inline-block-vm"),attr(p,"class","mgPlayerJSPreview_chapter-title mgPlayerJSPreview_text-overflow-ellipsis"),attr(p,"title",g=r[38].folder_title),attr(c,"class","mgPlayerJSPreview_chapter-content-wrapper mgPlayerJSPreview_margin-10 mgPlayerJSPreview_inline-block-vm"),attr(o,"class","mgPlayerJSPreview_inline-block-vm"),attr(a,"class","mgPlayerJSPreview_chapter-box mgPlayerJSPreview_chapter-box-folder mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between mgPlayerJSPreview_lbl-btn"),toggle_class(a,"mgPlayerJSPreview_chapter-box-disable",r[4]&&-1===r[5].indexOf(r[38].folder_id))},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),n.innerHTML=s,append(o,l),append(o,c),append(c,p),append(p,u),append(a,m),P&&P.m(a,null),append(a,h),S&&S.m(a,null),append(i,_),w&&w.m(i,null),append(i,f),v||(y=listen(i,"click",b),v=!0)},p(e,t){r=e,1&t[0]&&s!==(s=r[0].svgs.folder+"")&&(n.innerHTML=s),2&t[0]&&d!==(d=r[38].folder_title+"")&&set_data(u,d),2&t[0]&&g!==(g=r[38].folder_title)&&attr(p,"title",g),r[6]===r[40]?P?P.p(r,t):((P=create_if_block_5$2(r)).c(),P.m(a,h)):P&&(P.d(1),P=null),r[6]!==r[40]?S?S.p(r,t):((S=create_if_block_4$2(r)).c(),S.m(a,null)):S&&(S.d(1),S=null),50&t[0]&&toggle_class(a,"mgPlayerJSPreview_chapter-box-disable",r[4]&&-1===r[5].indexOf(r[38].folder_id)),0<r[38].guides.length&&r[6]===r[40]?w?w.p(r,t):((w=create_if_block_2$3(r)).c(),w.m(i,f)):w&&(w.d(1),w=null)},d(e){e&&detach(i),P&&P.d(),S&&S.d(),w&&w.d(),v=!1,y()}}}function create_if_block_5$2(e){let r,i=e[0].svgs.iconDownArrow+"";return{c(){attr(r=element("div"),"class","mgPlayerJSPreview_icon-collapse-expand mgPlayerJSPreview_float-right ege-inline-block-vm")},m(e,t){insert(e,r,t),r.innerHTML=i},p(e,t){1&t[0]&&i!==(i=e[0].svgs.iconDownArrow+"")&&(r.innerHTML=i)},d(e){e&&detach(r)}}}function create_if_block_4$2(e){let r,i=e[0].svgs.iconUpArrow+"";return{c(){attr(r=element("div"),"class","mgPlayerJSPreview_icon-collapse-expand mgPlayerJSPreview_float-right ege-inline-block-vm")},m(e,t){insert(e,r,t),r.innerHTML=i},p(e,t){1&t[0]&&i!==(i=e[0].svgs.iconUpArrow+"")&&(r.innerHTML=i)},d(e){e&&detach(r)}}}function create_if_block_2$3(t){let a,o=ensure_array_like(t[38].guides),n=[];for(let e=0;e<o.length;e+=1)n[e]=create_each_block_2(get_each_context_2(t,o,e));return{c(){a=element("div");for(let e=0;e<n.length;e+=1)n[e].c();attr(a,"class","mgPlayerJSPreview_chapter-container mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y mgPlayerJSPreview_ml-15 mgPlayerJSPreview_padding-b-15")},m(e,t){insert(e,a,t);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(a,null)},p(t,r){if(27186&r[0]){o=ensure_array_like(t[38].guides);let e;for(e=0;e<o.length;e+=1){var i=get_each_context_2(t,o,e);n[e]?n[e].p(i,r):(n[e]=create_each_block_2(i),n[e].c(),n[e].m(a,null))}for(;e<n.length;e+=1)n[e].d(1);n.length=o.length}},d(e){e&&detach(a),destroy_each(n,e)}}}function create_if_block_3$3(e){let r,i,a=GmCXt.svgs.taskCompleted+"";return{c(){r=element("div"),attr(i=element("div"),"class","mgPlayerJSPreview_guide-complete-icon"),attr(r,"class","mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_guide-complete-wrapper")},m(e,t){insert(e,r,t),append(r,i),i.innerHTML=a},p:noop,d(e){e&&detach(r)}}}function create_each_block_2(r){let i,a,o,n,s,l=r[13](r[41])+"",c,p,d,u=r[14](r[41])+"",g,m,h,_,f=r[41].tour_title+"",v,y,P,S,w,b,C=r[41].is_guide_complete&&create_if_block_3$3();function k(...e){return r[18](r[41],r[35],...e)}return{c(){i=element("button"),a=element("div"),o=element("div"),n=element("div"),s=element("div"),c=space(),p=element("div"),d=element("div"),g=text(u),m=space(),h=element("div"),_=element("div"),v=text(f),P=space(),C&&C.c(),S=space(),attr(s,"class","mgPlayerJSPreview_published-tour-icon mgPlayerJSPreview_inline-block-vm"),attr(d,"class","mgPlayerJSPreview_tooltip-title mgPlayerJSPreview_text-align-center"),attr(p,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-right"),attr(n,"class","mgPlayerJSPreview_guide-play-icon-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_position-relative"),attr(_,"class","mgPlayerJSPreview_chapter-title mgPlayerJSPreview_text-overflow-ellipsis"),attr(_,"title",y=r[41].tour_title),toggle_class(_,"mgPlayerJSPreview_chapter-title-complete",r[4]&&r[41].is_guide_complete),attr(h,"class","mgPlayerJSPreview_chapter-content-wrapper mgPlayerJSPreview_margin-lr-15 mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_text-overflow-ellipsis"),attr(o,"class","mgPlayerJSPreview_chapter-content-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center"),attr(a,"class","mgPlayerJSPreview_chapter-content-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between"),attr(i,"class","mgPlayerJSPreview_chapter-box mgPlayerJSPreview_chapter-box-folder-guide mgPlayerJSPreview_lbl-btn"),toggle_class(i,"mgPlayerJSPreview_chapter-box-disable",r[4]&&(-1===r[5].indexOf(r[38].folder_id)||r[43]+1>r[9]))},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),append(n,s),s.innerHTML=l,append(n,c),append(n,p),append(p,d),append(d,g),append(o,m),append(o,h),append(h,_),append(_,v),append(a,P),C&&C.m(a,null),append(i,S),w||(b=listen(i,"click",k),w=!0)},p(e,t){r=e,2&t[0]&&l!==(l=r[13](r[41])+"")&&(s.innerHTML=l),2&t[0]&&u!==(u=r[14](r[41])+"")&&set_data(g,u),2&t[0]&&f!==(f=r[41].tour_title+"")&&set_data(v,f),2&t[0]&&y!==(y=r[41].tour_title)&&attr(_,"title",y),18&t[0]&&toggle_class(_,"mgPlayerJSPreview_chapter-title-complete",r[4]&&r[41].is_guide_complete),r[41].is_guide_complete?C?C.p(r,t):((C=create_if_block_3$3()).c(),C.m(a,null)):C&&(C.d(1),C=null),562&t[0]&&toggle_class(i,"mgPlayerJSPreview_chapter-box-disable",r[4]&&(-1===r[5].indexOf(r[38].folder_id)||r[43]+1>r[9]))},d(e){e&&detach(i),C&&C.d(),w=!1,b()}}}function create_each_block_1(e){let r,i=e[38].guides&&0<e[38].guides.length&&create_if_block_1$3(e);return{c(){i&&i.c(),r=empty()},m(e,t){i&&i.m(e,t),insert(e,r,t)},p(e,t){e[38].guides&&0<e[38].guides.length?i?i.p(e,t):((i=create_if_block_1$3(e)).c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(e){e&&detach(r),i&&i.d(e)}}}function create_each_block(r){let i,a,o,n,s=r[0].svgs.tasklist+"",l,c,p,d=r[35].task_list_title+"",u,g,m,h,_,f,v,y,P,S=r[3]===r[37]&&create_if_block_9(r),w=r[3]!==r[37]&&create_if_block_8$1(r),b=r[35].guides&&0<r[35].guides.length&&r[3]===r[37]&&create_if_block_6$2(r),C=r[35].folders&&0<r[35].folders.length&&r[3]===r[37]&&create_if_block$3(r);function k(){return r[20](r[35],r[37])}return{c(){i=element("div"),a=element("button"),o=element("div"),n=element("div"),l=space(),c=element("div"),p=element("div"),u=text(d),m=space(),S&&S.c(),h=space(),w&&w.c(),_=space(),b&&b.c(),f=space(),C&&C.c(),v=space(),attr(n,"class","mgPlayerJSPreview_task-list-icon mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center"),attr(p,"class","mgPlayerJSPreview_assign-title mgPlayerJSPreview_margin-lr-5 mgPlayerJSPreview_text-overflow-ellipsis"),attr(p,"title",g=r[35].task_list_title),attr(c,"class","mgPlayerJSPreview_assign-content-wrapper mgPlayerJSPreview_margin-10 mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center"),attr(o,"class","mgPlayerJSPreview_display-flex mgPlayerJSPreview_display-inline-flex mgPlayerJSPreview_align-items-center"),attr(a,"class","mgPlayerJSPreview_assignment-box mgPlayerJSPreview_margin-15 mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-between mgPlayerJSPreview_lbl-btn")},m(e,t){insert(e,i,t),append(i,a),append(a,o),append(o,n),n.innerHTML=s,append(o,l),append(o,c),append(c,p),append(p,u),append(a,m),S&&S.m(a,null),append(a,h),w&&w.m(a,null),append(i,_),b&&b.m(i,null),append(i,f),C&&C.m(i,null),append(i,v),y||(P=listen(i,"click",k),y=!0)},p(e,t){r=e,1&t[0]&&s!==(s=r[0].svgs.tasklist+"")&&(n.innerHTML=s),2&t[0]&&d!==(d=r[35].task_list_title+"")&&set_data(u,d),2&t[0]&&g!==(g=r[35].task_list_title)&&attr(p,"title",g),r[3]===r[37]?S?S.p(r,t):((S=create_if_block_9(r)).c(),S.m(a,h)):S&&(S.d(1),S=null),r[3]!==r[37]?w?w.p(r,t):((w=create_if_block_8$1(r)).c(),w.m(a,null)):w&&(w.d(1),w=null),r[35].guides&&0<r[35].guides.length&&r[3]===r[37]?b?b.p(r,t):((b=create_if_block_6$2(r)).c(),b.m(i,f)):b&&(b.d(1),b=null),r[35].folders&&0<r[35].folders.length&&r[3]===r[37]?C?C.p(r,t):((C=create_if_block$3(r)).c(),C.m(i,v)):C&&(C.d(1),C=null)},d(e){e&&detach(i),S&&S.d(),w&&w.d(),b&&b.d(),C&&C.d(),y=!1,P()}}}function create_fragment$3(r){let i,a,o,n,s,l,c,p=r[0].svgs.iconBack+"",d,u,g,e=r[0].labels.back+"",m,h,_,f,v,y,P,S,w,b,C,k,T,x,A,J=(i=new Header({}),-1!==r[3]&&create_if_block_11(r)),G=-1!==r[3]&&create_if_block_10(r),$=ensure_array_like(r[1]),E=[];for(let e=0;e<$.length;e+=1)E[e]=create_each_block(get_each_context(r,$,e));return k=new Footer({}),{c(){create_component(i.$$.fragment),a=space(),o=element("div"),n=element("div"),s=element("div"),l=element("button"),c=element("div"),d=space(),u=element("div"),g=element("div"),m=text(e),h=space(),(_=element("div")).textContent="Task List",f=space(),v=element("div"),J&&J.c(),y=space(),P=element("div"),G&&G.c(),w=space(),b=element("div");for(let e=0;e<E.length;e+=1)E[e].c();C=space(),create_component(k.$$.fragment),attr(c,"class","ege-inline-block-vm"),attr(g,"class","mgPlayerJSPreview_tooltip-title"),attr(u,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-left"),attr(l,"class","mgPlayerJSPreview_task-back-btn mgPlayerJSPreview_position-relative mgPlayerJSPreview_lbl-btn"),attr(_,"class","mgPlayerJSPreview_task-list-header-title mgPlayerJSPreview_font-size-15 mgPlayerJSPreview_margin-lr-10"),toggle_class(_,"mgPlayerJSPreview_font-size-18",!r[0].isMicroPlayer),attr(s,"class","mgPlayerJSPreview_task-list-go-back-container mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center"),attr(P,"class","mgPlayerJSPreview_task-header-details mgPlayerJSPreview_display-flex mgPlayerJSPreview_flex-direction-column"),attr(v,"class",S="mgPlayerJSPreview_progress-details-container mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center "+(-1!==r[3]&&r[0].isMicroPlayer?"mgPlayerJSPreview_padding-5":"")+" "+(-1!==r[3]?"mgPlayerJSPreview_margin-b-10 mgPlayerJSPreview_progress-alignment":"")),attr(n,"class","mgPlayerJSPreview_task-list-header mgPlayerJSPreview_display-flex mgPlayerJSPreview_justify-content-space-between mgPlayerJSPreview_flex-direction-column mgPlayerJSPreview_position-relative mgPlayerJSPreview_width-100"),attr(b,"class","mgPlayerJSPreview_assign-container mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y mgPlayerJSPreview_bg-white"),attr(o,"class","mgPlayerJSPreview_task-list-container")},m(e,t){mount_component(i,e,t),insert(e,a,t),insert(e,o,t),append(o,n),append(n,s),append(s,l),append(l,c),c.innerHTML=p,append(l,d),append(l,u),append(u,g),append(g,m),append(s,h),append(s,_),append(n,f),append(n,v),J&&J.m(v,null),append(v,y),append(v,P),G&&G.m(P,null),append(o,w),append(o,b);for(let e=0;e<E.length;e+=1)E[e]&&E[e].m(b,null);insert(e,C,t),mount_component(k,e,t),T=!0,x||(A=listen(l,"click",r[16]),x=!0)},p(t,r){if((!T||1&r[0])&&p!==(p=t[0].svgs.iconBack+"")&&(c.innerHTML=p),(!T||1&r[0])&&e!==(e=t[0].labels.back+"")&&set_data(m,e),(!T||1&r[0])&&toggle_class(_,"mgPlayerJSPreview_font-size-18",!t[0].isMicroPlayer),-1!==t[3]?J?J.p(t,r):((J=create_if_block_11(t)).c(),J.m(v,y)):J&&(J.d(1),J=null),-1!==t[3]?G?G.p(t,r):((G=create_if_block_10(t)).c(),G.m(P,null)):G&&(G.d(1),G=null),(!T||9&r[0]&&S!==(S="mgPlayerJSPreview_progress-details-container mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center "+(-1!==t[3]&&t[0].isMicroPlayer?"mgPlayerJSPreview_padding-5":"")+" "+(-1!==t[3]?"mgPlayerJSPreview_margin-b-10 mgPlayerJSPreview_progress-alignment":"")))&&attr(v,"class",S),32379&r[0]){$=ensure_array_like(t[1]);let e;for(e=0;e<$.length;e+=1){var i=get_each_context(t,$,e);E[e]?E[e].p(i,r):(E[e]=create_each_block(i),E[e].c(),E[e].m(b,null))}for(;e<E.length;e+=1)E[e].d(1);E.length=$.length}},i(e){T||(transition_in(i.$$.fragment,e),transition_in(k.$$.fragment,e),T=!0)},o(e){transition_out(i.$$.fragment,e),transition_out(k.$$.fragment,e),T=!1},d(e){e&&(detach(a),detach(o),detach(C)),destroy_component(i,e),J&&J.d(),G&&G.d(),destroy_each(E,e),destroy_component(k,e),x=!1,A()}}}function instance$3(e,t,o){let a,r,i=(rootScope.currentView="taskList",[]),n=0,s=-1,l=(GmCXt.t.ruleTimeOut15ms,!(rootScope.isTaskListActive=!0)),c=[],p=0,d;Gm.loading.set(!0);let u,g,m=Gm.allTaskList.subscribe(e=>{o(1,i=e)});(()=>{Gm.loading.set(!0);!GmCXt.isEmpty(GmCXt.user)&&GmCXt.isPlayer()&&(GmCXt.isEmpty(rootScope.taskList)?o(0,rootScope.taskList=null,rootScope):o(0,rootScope.taskList=rootScope.filterCompleatedTasks(rootScope.taskList),rootScope),rootScope.getTaskListData(function(e){mg$$1(".mgPlayerJSPreview_push-notification-container").is(":visible")&&mg$$1(".ege-panel").css({width:"500px",right:"-9550px"}),e.length&&(o(1,i=rootScope.processTaskListByRules(e)),o(3,s=-1),o(6,d=-1)),Gm.loading.set(!1)},0))})();let h=(t,r)=>{t&&t.task_list_id&&s!==r?(o(3,s=r),Gm.loading.set(!0),api.getTaskDetails(t.task_list_id).then(function(e){Gm.loading.set(!1),e.data.completion_percent?o(2,n=e.data.completion_percent):o(2,n=0),a=e.data.completed_guide_ids,o(8,g=e.data.completed_count),p=parseInt(e.data.total_count),t.guides&&t.guides.length&&(o(1,i[r]=(e=>{if(e.guides)for(var t=0;t<e.guides.length;t++)if(a.indexOf(e.guides[t].tour_id.toString())!==-1)e.guides[t].is_guide_complete=true;return e})(t),i),y(t.guides)),t.folders&&t.folders.length&&o(1,i[r]=(e=>{if(e.folders){o(5,c=[]);if(e.folders.length>0)c.push(e.folders[0].folder_id);for(var t=0;t<e.folders.length;t++){var r=0;for(var i=0;i<e.folders[t].guides.length;i++){if(a.indexOf(e.folders[t].guides[i].tour_id.toString())!==-1){e.folders[t].guides[i].is_guide_complete=true;r++}if(e.folders[t].guides.length===r&&e.folders[t+1]&&!GmCXt.isEmpty(e.folders[t+1])&&c.indexOf(e.folders[t+1].folder_id)===-1)c.push(e.folders[t+1].folder_id)}}}return e})(t),i),t.task_list_setting.force_completion&&o(4,l=t.task_list_setting.force_completion),o(7,u=e.data.total_count),o(6,d=-1)})):o(3,s=-1),GmCXt.timeout(function(){S()},500)},_=(e,t,i)=>{GmCXt.parseJSON(i.task_list_setting),t.stopPropagation();var a=!1,t=(e.is_guide_complete&&(a=!0),{tour_id:e.tour_id});Gm.loading.set(!0),api.getTour(t,function(e){Gm.loading.set(!1);var t={taskId:i.task_list_id,isComplete:a,complete_count:g,total_count:p},r=(o(3,s=-1),o(6,d=-1),rootScope.getDefaultPlayAction(e));"Default"===r&&(r=GmCXt.getAppSetting("defaultPlayAction")),rootScope.guideAction(r,!1,e,"task_list",e.category_title,t),o(0,rootScope.isTaskListActive=!1,rootScope),Gm.activeView.set("home")},f)};function f(){rootScope.showPopup(rootScope.labels.tourPlayError)}let v=(e,t,r,i)=>{d!==t?(i.stopPropagation(),o(6,d=t),Gm.loading.set(!0),api.getTaskFolderDetails(e.folder_id).then(function(e){Gm.loading.set(!1),y(e.data.content_list)})):o(6,d=-1),GmCXt.timeout(function(){S()},500)},y=e=>{if(e){o(9,r=1);for(var t=0;t<e.length;t++)"1"==e[t].is_guide_complete&&Boolean(Number(e[0].is_guide_complete))&&o(9,r=t+2)}};let P=()=>{o(0,rootScope.isTaskListActive=!1,rootScope),rootScope.refreshCurrentPage(),Gm.activeView.set("home")};function S(){var e=mg$$1("#ege-header").innerHeight()?mg$$1("#ege-header").innerHeight():0,t=mg$$1(".mgPlayerJSPreview_task-list-header").innerHeight()?mg$$1(".mgPlayerJSPreview_task-list-header").innerHeight():0,r=mg$$1("#footer").innerHeight()?mg$$1("#footer").innerHeight():0;mg$$1(".mgPlayerJSPreview_assign-container").css({height:window.innerHeight-e-t-r})}GmCXt.timeout(function(){S()},500),mg$$1(window).off("resize").on("resize",S),onDestroy(()=>{m()});return a=[],o(9,r=1),[rootScope,i,n,s,l,c,d,u,g,r,h,_,v,e=>{var t={tour_settings:GmCXt.parseJSON(e.tour_settings)},r=rootScope.getDefaultPlayAction(t);return GmCXt.isOnboarding(e)?rootScope.svgs.guide_onboarding:r===rootScope.playSlideshow||"Default"===t.tour_settings.defaultPlayAction&&GmCXt.getAppSetting("defaultPlayAction")===rootScope.playSlideshow?rootScope.svgs.guideShowMe:r===rootScope.playAuto||"Default"===t.tour_settings.defaultPlayAction&&GmCXt.getAppSetting("defaultPlayAction")===rootScope.playAuto?rootScope.svgs.guideDoItForMe:r===rootScope.playVLab||"Default"===t.tour_settings.defaultPlayAction&&GmCXt.getAppSetting("defaultPlayAction")===rootScope.playVLab?rootScope.svgs.guideTeachMe:rootScope.svgs.default_guide},e=>{var t={tour_settings:GmCXt.parseJSON(e.tour_settings)},r=rootScope.getDefaultPlayAction(t);return GmCXt.isOnboarding(e)||r===rootScope.playSlideshow||"Default"===t.tour_settings.defaultPlayAction&&GmCXt.getAppSetting("defaultPlayAction")===rootScope.playSlideshow?rootScope.labels.showMe:r===rootScope.playAuto||"Default"===t.tour_settings.defaultPlayAction&&GmCXt.getAppSetting("defaultPlayAction")===rootScope.playAuto?rootScope.labels.doItForMe:r===rootScope.playVLab||"Default"===t.tour_settings.defaultPlayAction&&GmCXt.getAppSetting("defaultPlayAction")===rootScope.playVLab?rootScope.labels.vLab:rootScope.labels.guideMe},P,()=>P(),(e,t,r)=>_(e,r,t),(e,t,r)=>_(e,r,t),(e,t,r,i)=>v(e,t,0,i),(e,t)=>h(e,t)]}class TaskList extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$3,safe_not_equal,{},null,[-1,-1])}}function create_if_block_6$1(e){let r,i=e[0].labels.passFieldIsEmpty+"",a;return{c(){r=element("div"),a=text(i),attr(r,"class","mgPlayerJSPreview_error-text-color")},m(e,t){insert(e,r,t),append(r,a)},p(e,t){1&t&&i!==(i=e[0].labels.passFieldIsEmpty+"")&&set_data(a,i)},d(e){e&&detach(r)}}}function create_if_block_5$1(e){let r,i=e[0].labels.passwordError+"",a;return{c(){r=element("div"),a=text(i),attr(r,"class","error-input-wrapper password-error-wrapper active")},m(e,t){insert(e,r,t),append(r,a)},p(e,t){1&t&&i!==(i=e[0].labels.passwordError+"")&&set_data(a,i)},d(e){e&&detach(r)}}}function create_if_block_4$1(e){let r,i=e[0].labels.passFieldIsEmpty+"",a;return{c(){r=element("div"),a=text(i),attr(r,"class","mgPlayerJSPreview_error-text-color")},m(e,t){insert(e,r,t),append(r,a)},p(e,t){1&t&&i!==(i=e[0].labels.passFieldIsEmpty+"")&&set_data(a,i)},d(e){e&&detach(r)}}}function create_if_block_3$2(e){let r,i=e[0].labels.passwordError+"",a;return{c(){r=element("div"),a=text(i),attr(r,"class","error-input-wrapper password-error-wrapper active")},m(e,t){insert(e,r,t),append(r,a)},p(e,t){1&t&&i!==(i=e[0].labels.passwordError+"")&&set_data(a,i)},d(e){e&&detach(r)}}}function create_if_block_2$2(e){let r,i=e[0].labels.passFieldIsEmpty+"",a;return{c(){r=element("div"),a=text(i),attr(r,"class","mgPlayerJSPreview_error-text-color")},m(e,t){insert(e,r,t),append(r,a)},p(e,t){1&t&&i!==(i=e[0].labels.passFieldIsEmpty+"")&&set_data(a,i)},d(e){e&&detach(r)}}}function create_if_block_1$2(e){let r,i=e[0].labels.passwordError+"",a;return{c(){r=element("div"),a=text(i),attr(r,"class","error-input-wrapper password-error-wrapper active")},m(e,t){insert(e,r,t),append(r,a)},p(e,t){1&t&&i!==(i=e[0].labels.passwordError+"")&&set_data(a,i)},d(e){e&&detach(r)}}}function create_if_block$2(t){let r,i,a=t[0].labels.captchaLbl+"",o,n,s,l,c,p;function e(e){t[20](e)}function d(e){t[21](e)}var u={};return void 0!==t[4]&&(u.captchaValid=t[4]),void 0!==t[5]&&(u.showCaptchaError=t[5]),s=new Captcha({props:u}),binding_callbacks.push(()=>bind(s,"captchaValid",e)),binding_callbacks.push(()=>bind(s,"showCaptchaError",d)),{c(){r=element("div"),i=element("div"),o=text(a),n=space(),create_component(s.$$.fragment),attr(i,"class","mgPlayerJSPreview_change-password-label"),attr(r,"class","mgPlayerJSPreview_margin-tb-10")},m(e,t){insert(e,r,t),append(r,i),append(i,o),append(r,n),mount_component(s,r,null),p=!0},p(e,t){(!p||1&t)&&a!==(a=e[0].labels.captchaLbl+"")&&set_data(o,a);var r={};!l&&16&t&&(l=!0,r.captchaValid=e[4],add_flush_callback(()=>l=!1)),!c&&32&t&&(c=!0,r.showCaptchaError=e[5],add_flush_callback(()=>c=!1)),s.$set(r)},i(e){p||(transition_in(s.$$.fragment,e),p=!0)},o(e){transition_out(s.$$.fragment,e),p=!1},d(e){e&&detach(r),destroy_component(s)}}}function create_fragment$2(r){let i,F,a,o,n,s,l=r[0].svgs.iconBack+"",O,c,p,d=r[0].labels.back+"",R,N,u,g=r[0].labels.changePassword+"",H,B,U,m,h,_,f,v,V=r[0].labels.placeholderCurrentPassword+"",z,j,y,W,q,Z=r[6]||!r[1].trim(),K,Y,P,S,Q=r[0].labels.placeholderNewPassword+"",ee,te,w,re,ie,ae=r[8]||!r[2].trim(),oe,ne,b,C,se=r[0].labels.placeholderPasswordC+"",le,ce,k,pe,de,ue=r[10]||!r[3].trim(),ge,me,he,T,x,_e=r[0].labels.change+"",fe,ve,ye,A,Pe=r[0].labels.btnCancel+"",Se,we,be,Ce,ke,Te,xe,J,G,Ae,Je,$=(i=new Header({}),Z&&create_if_block_6$1(r)),E=r[7]&&create_if_block_5$1(r),L=ae&&create_if_block_4$1(r),M=r[9]&&create_if_block_3$2(r),I=ue&&create_if_block_2$2(r),X=r[11]&&create_if_block_1$2(r),D=!r[0].config.hideCaptcha&&create_if_block$2(r);return J=new Footer({}),{c(){create_component(i.$$.fragment),F=space(),a=element("div"),o=element("div"),n=element("div"),s=element("div"),O=space(),c=element("div"),p=element("div"),R=text(d),N=space(),u=element("div"),H=text(g),B=space(),U=element("div"),m=element("form"),h=element("div"),_=element("div"),f=element("div"),v=element("div"),z=text(V),j=space(),y=element("input"),q=space(),$&&$.c(),K=space(),E&&E.c(),Y=space(),P=element("div"),S=element("div"),ee=text(Q),te=space(),w=element("input"),ie=space(),L&&L.c(),oe=space(),M&&M.c(),ne=space(),b=element("div"),C=element("div"),le=text(se),ce=space(),k=element("input"),de=space(),I&&I.c(),ge=space(),X&&X.c(),me=space(),D&&D.c(),he=space(),T=element("div"),x=element("button"),fe=text(_e),ye=space(),A=element("button"),Se=text(Pe),be=space(),Ce=element("div"),ke=space(),Te=element("div"),xe=space(),create_component(J.$$.fragment),attr(s,"class","ege-inline-block-vm"),attr(p,"class","mgPlayerJSPreview_tooltip-title"),attr(c,"class","mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-center"),attr(n,"id","mgPlayerJSPreview_btn-back-change-pass"),attr(n,"class","ege-inline-block-vm back-btn mgPlayerJSPreview_icons-hover-effect mgPlayerJSPreview_back-btn"),attr(u,"class","ege-inline-block-div header-text mgPlayerJSPreview_margin-lr-10 mgPlayerJSPreview_font-size-16 mgPlayerJSPreview_text-color-white mgPlayerJSPreview_text-overflow-ellipsis"),attr(o,"class","mgPlayerJSPreview_header-title mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_padding-lr-15"),attr(v,"id","mgPlayerJSPreview_current-password-label"),attr(v,"class","mgPlayerJSPreview_change-password-label"),attr(y,"class","mgPlayerJSPreview_input-type-text mgPlayerJSPreview_width-100 password-text-text text-input ege-inline-block-vm mgPlayerJSPreview_font-size-16"),attr(y,"autocomplete","off"),attr(y,"maxlength","20"),attr(y,"spellcheck","true"),attr(y,"type","password"),attr(y,"placeholder",W=r[0].labels.placeholderCurrentPassword),attr(y,"name","currentPassword"),y.required=!0,attr(f,"class","mgPlayerJSPreview_current-password-wrapper"),attr(S,"id","mgPlayerJSPreview_new-password-label"),attr(S,"class","mgPlayerJSPreview_change-password-label"),attr(w,"class","mgPlayerJSPreview_input-type-text mgPlayerJSPreview_width-100 password-text-text text-input ege-inline-block-vm mgPlayerJSPreview_font-size-16"),attr(w,"autocomplete","off"),attr(w,"minlength","8"),attr(w,"maxlength","20"),attr(w,"spellcheck","true"),attr(w,"type","password"),attr(w,"placeholder",re=r[0].labels.placeholderNewPassword),attr(w,"name","newPassword"),w.required=!0,attr(P,"class","mgPlayerJSPreview_new-password-wrapper"),attr(C,"id","mgPlayerJSPreview_confirm-password-label"),attr(C,"class","mgPlayerJSPreview_change-password-label"),attr(k,"class","mgPlayerJSPreview_input-type-text mgPlayerJSPreview_width-100 password-text-text text-input ege-inline-block-vm mgPlayerJSPreview_font-size-16"),attr(k,"autocomplete","off"),attr(k,"minlength","8"),attr(k,"maxlength","20"),attr(k,"spellcheck","true"),attr(k,"type","password"),attr(k,"placeholder",pe=r[0].labels.placeholderPasswordC),attr(k,"name","confirmPassword"),k.required=!0,attr(b,"class","mgPlayerJSPreview_confirm-password-wrapper"),attr(_,"class","signin-form"),attr(x,"type","button"),attr(x,"class","mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-neutral"),attr(x,"aria-label",ve=r[0].labels.change),toggle_class(x,"disabled",!r[1].trim()||r[6]||r[7]||!r[2].trim()||r[8]||r[9]||!r[3].trim()||r[10]||r[11]||r[5]),attr(A,"class","mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-neutral"),attr(A,"aria-label",we=r[0].labels.btnCancel),attr(T,"class","mgPlayerJSPreview_change-password-footer mgPlayerJSPreview_text-align-center mgPlayerJSPreview_margin-tb-15"),attr(Ce,"class","ege-clear"),attr(h,"class","signin-form-container mgPlayerJSPreview_no-border mgPlayerJSPreview_no-border-all mgPlayerJSPreview_no-padding mgPlayerJSPreview_no-box-shadow"),attr(Te,"class","ege-clear"),attr(m,"name","cForm"),attr(m,"autocomplete","off"),attr(m,"method","post"),attr(U,"class","signin-page-wrapper mgPlayerJSPreview_change-password-wrapper"),attr(a,"class","ege-panel-main-container signin-page-container")},m(e,t){mount_component(i,e,t),insert(e,F,t),insert(e,a,t),append(a,o),append(o,n),append(n,s),s.innerHTML=l,append(n,O),append(n,c),append(c,p),append(p,R),append(o,N),append(o,u),append(u,H),append(a,B),append(a,U),append(U,m),append(m,h),append(h,_),append(_,f),append(f,v),append(v,z),append(f,j),append(f,y),set_input_value(y,r[1]),append(f,q),$&&$.m(f,null),append(f,K),E&&E.m(f,null),append(_,Y),append(_,P),append(P,S),append(S,ee),append(P,te),append(P,w),set_input_value(w,r[2]),append(P,ie),L&&L.m(P,null),append(P,oe),M&&M.m(P,null),append(_,ne),append(_,b),append(b,C),append(C,le),append(b,ce),append(b,k),set_input_value(k,r[3]),append(b,de),I&&I.m(b,null),append(b,ge),X&&X.m(b,null),append(h,me),D&&D.m(h,null),append(h,he),append(h,T),append(T,x),append(x,fe),append(T,ye),append(T,A),append(A,Se),append(h,be),append(h,Ce),append(m,ke),append(m,Te),insert(e,xe,t),mount_component(J,e,t),G=!0,Ae||(Je=[listen(n,"click",r[13]),listen(y,"input",r[14]),listen(y,"focus",r[15]),listen(w,"input",r[16]),listen(w,"focus",r[17]),listen(k,"input",r[18]),listen(k,"focus",r[19]),listen(x,"click",r[22]),listen(A,"click",r[23])],Ae=!0)},p(e,[t]){(!G||1&t)&&l!==(l=e[0].svgs.iconBack+"")&&(s.innerHTML=l),(!G||1&t)&&d!==(d=e[0].labels.back+"")&&set_data(R,d),(!G||1&t)&&g!==(g=e[0].labels.changePassword+"")&&set_data(H,g),(!G||1&t)&&V!==(V=e[0].labels.placeholderCurrentPassword+"")&&set_data(z,V),(!G||1&t&&W!==(W=e[0].labels.placeholderCurrentPassword))&&attr(y,"placeholder",W),2&t&&y.value!==e[1]&&set_input_value(y,e[1]),(Z=66&t?e[6]||!e[1].trim():Z)?$?$.p(e,t):(($=create_if_block_6$1(e)).c(),$.m(f,K)):$&&($.d(1),$=null),e[7]?E?E.p(e,t):((E=create_if_block_5$1(e)).c(),E.m(f,null)):E&&(E.d(1),E=null),(!G||1&t)&&Q!==(Q=e[0].labels.placeholderNewPassword+"")&&set_data(ee,Q),(!G||1&t&&re!==(re=e[0].labels.placeholderNewPassword))&&attr(w,"placeholder",re),4&t&&w.value!==e[2]&&set_input_value(w,e[2]),(ae=260&t?e[8]||!e[2].trim():ae)?L?L.p(e,t):((L=create_if_block_4$1(e)).c(),L.m(P,oe)):L&&(L.d(1),L=null),e[9]?M?M.p(e,t):((M=create_if_block_3$2(e)).c(),M.m(P,null)):M&&(M.d(1),M=null),(!G||1&t)&&se!==(se=e[0].labels.placeholderPasswordC+"")&&set_data(le,se),(!G||1&t&&pe!==(pe=e[0].labels.placeholderPasswordC))&&attr(k,"placeholder",pe),8&t&&k.value!==e[3]&&set_input_value(k,e[3]),(ue=1032&t?e[10]||!e[3].trim():ue)?I?I.p(e,t):((I=create_if_block_2$2(e)).c(),I.m(b,ge)):I&&(I.d(1),I=null),e[11]?X?X.p(e,t):((X=create_if_block_1$2(e)).c(),X.m(b,null)):X&&(X.d(1),X=null),e[0].config.hideCaptcha?D&&(group_outros(),transition_out(D,1,1,()=>{D=null}),check_outros()):D?(D.p(e,t),1&t&&transition_in(D,1)):((D=create_if_block$2(e)).c(),transition_in(D,1),D.m(h,he)),(!G||1&t)&&_e!==(_e=e[0].labels.change+"")&&set_data(fe,_e),(!G||1&t&&ve!==(ve=e[0].labels.change))&&attr(x,"aria-label",ve),(!G||4078&t)&&toggle_class(x,"disabled",!e[1].trim()||e[6]||e[7]||!e[2].trim()||e[8]||e[9]||!e[3].trim()||e[10]||e[11]||e[5]),(!G||1&t)&&Pe!==(Pe=e[0].labels.btnCancel+"")&&set_data(Se,Pe),(!G||1&t&&we!==(we=e[0].labels.btnCancel))&&attr(A,"aria-label",we)},i(e){G||(transition_in(i.$$.fragment,e),transition_in(D),transition_in(J.$$.fragment,e),G=!0)},o(e){transition_out(i.$$.fragment,e),transition_out(D),transition_out(J.$$.fragment,e),G=!1},d(e){e&&(detach(F),detach(a),detach(xe)),destroy_component(i,e),$&&$.d(),E&&E.d(),L&&L.d(),M&&M.d(),I&&I.d(),X&&X.d(),D&&D.d(),destroy_component(J,e),Ae=!1,run_all(Je)}}}function instance$2(e,t,r){rootScope.currentView="change-password-view";let i={},a="",o="",n="",s=!1,l=!1,c=!1,p=!1,d=!1,u=!1,g=!1,m=!1,h=()=>{var e;function t(){rootScope.logout("password_change")}GmCXt.isEmpty(a)?r(6,c=!0):!GmCXt.isEmpty(a)&&a.length<8&&r(7,p=!0),GmCXt.isEmpty(o)?r(8,d=!0):!GmCXt.isEmpty(o)&&o.length<8&&r(9,u=!0),GmCXt.isEmpty(n)?r(10,g=!0):!GmCXt.isEmpty(n)&&n.length<8&&r(11,m=!0),s||GmCXt.conf.hideCaptcha||(r(5,l=!0),Gm.loading.set(!1)),c||p||d||u||g||m||l||(o!==n?rootScope.showPopup(rootScope.labels.msgConfirmNewPasswordError):(Gm.loading.set(!0),e={user_id:i.user_id,new_password:o,existing_password:a},api.changePassword(e,function(e){Gm.loading.set(!1),modal.open(rootScope.labels.msgPasswordChangedSuccess,"success",t,t)})))},_=()=>{Gm.activeView.set("home")};i=rootScope.user,Gm.loading.set(!1),onMount(()=>{});return[rootScope,a,o,n,s,l,c,p,d,u,g,m,h,_,function(){a=this.value,r(1,a)},()=>r(7,p=!1),function(){o=this.value,r(2,o)},()=>r(9,u=!1),function(){n=this.value,r(3,n)},()=>r(11,m=!1),function(e){s=e,r(4,s)},function(e){l=e,r(5,l)},()=>h(),()=>_()]}class ChangePassword extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,{})}}function create_if_block_8(e){let r,i;return r=new Empty({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_7(e){let r,i;return r=new Empty({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_6(e){let r,i;return r=new ChangePassword({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_5(e){let r,i;return r=new TaskList({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_4(e){let r,i;return r=new Bot({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_3$1(e){let r,i;return r=new ForgotPwd({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_2$1(e){let r,i;return r=new Home({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block_1$1(e){let r,i;return r=new SignIn({}),{c(){create_component(r.$$.fragment)},m(e,t){mount_component(r,e,t),i=!0},i(e){i||(transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(r,e)}}}function create_if_block$1(e){let r;return{c(){(r=element("div")).innerHTML=`<div class="ege-loader-wrapper-spinner"><img class="mgPlayerJSPreview_loader-image" src="${rootScope.loader()}" alt="loader"/></div>`,attr(r,"id","ege-spinner"),attr(r,"class","ege-loader-wrapper")},m(e,t){insert(e,r,t)},d(e){e&&detach(r)}}}function create_key_block(e){let i,a,o,n,r,s,l=[create_if_block_1$1,create_if_block_2$1,create_if_block_3$1,create_if_block_4,create_if_block_5,create_if_block_6,create_if_block_7,create_if_block_8],c=[];function p(e){return"signin"==e[0]?0:"home"==e[0]?1:"forgotpwd"==e[0]?2:"chatbot"==e[0]?3:"taskList"==e[0]?4:"changePw"==e[0]?5:"findNReplace"==e[0]?6:"taskStatus"==e[0]?7:-1}~(i=p(e))&&(a=c[i]=l[i](e));let d=e[1]&&create_if_block$1();return{c(){a&&a.c(),o=space(),d&&d.c(),n=space(),attr(r=element("input"),"spellcheck","true"),r.hidden=!0,attr(r,"id","mgPlayerJSPreview_add-step-upload-file"),attr(r,"type","file"),attr(r,"tabindex","-1"),attr(r,"accept","image/png,image/jpeg")},m(e,t){~i&&c[i].m(e,t),insert(e,o,t),d&&d.m(e,t),insert(e,n,t),insert(e,r,t),s=!0},p(e,t){let r=i;(i=p(e))!==r&&(a&&(group_outros(),transition_out(c[r],1,1,()=>{c[r]=null}),check_outros()),~i?((a=c[i])||(a=c[i]=l[i](e)).c(),transition_in(a,1),a.m(o.parentNode,o)):a=null),e[1]?d||((d=create_if_block$1()).c(),d.m(n.parentNode,n)):d&&(d.d(1),d=null)},i(e){s||(transition_in(a),s=!0)},o(e){transition_out(a),s=!1},d(e){e&&(detach(o),detach(n),detach(r)),~i&&c[i].d(e),d&&d.d(e)}}}function create_fragment$1(e){let r=e[2],i,a,o=create_key_block(e);return{c(){o.c(),i=empty()},m(e,t){o.m(e,t),insert(e,i,t),a=!0},p(e,[t]){4&t&&safe_not_equal(r,r=e[2])?(group_outros(),transition_out(o,1,1,noop),check_outros(),(o=create_key_block(e)).c(),transition_in(o,1),o.m(i.parentNode,i)):o.p(e,t)},i(e){a||(transition_in(o),a=!0)},o(e){transition_out(o),a=!1},d(e){e&&detach(i),o.d(e)}}}function instance$1(e,t,r){let{loadComp:i="signin"}=t,a=!1,o=(GmCXt.refreshView=!1,0);let n=Gm.activeView.subscribe(e=>{var t=i;""!==e&&t===e&&r(2,o+=1),""!==e&&(r(0,i=e),storage.activeView.set(e))}),s=(Gm.loading.subscribe(e=>{r(1,a=e)}),Gm.dialogBox.subscribe(e=>{}));return onMount(()=>{r(0,i=get_store_value(Gm.activeView))}),onDestroy(()=>{s(),n()}),e.$$set=e=>{"loadComp"in e&&r(0,i=e.loadComp)},[i,a,o]}class App extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{loadComp:0})}}function alignPopup(e){let t={},a={popup:mg$$1((e=e||{}).popup),highlightedArea:e.elementBounds||{},containerOffset:e.containerOffest||{left:0,top:0},alignment:e.alignment||"",hardApply:e.hardApply||!1,doNotApplyArrow:e.doNotApplyArrow||!1,arrowClass:"",left:null,top:null,isSet:!1,arrowId:e.tooltipArrowId||"",arrowWidth:e.isBeacon?5:12,isGuidance:e.isGuidance,customPos:e.customPos,isBeacon:e.isBeacon,dimensions:e.dimensions,totalHeightMinusTop:0,totalWidthMinusLeft:0,totalHeightMinusBottom:0,totalWidthMinusRight:0,stepType:e.stepType,disableElementColor:e.disableElementColor,changeInHeight:e.changeInHeight,isExtension:e.isExtension};if(a.arrowId||(a.doNotApplyArrow=!0),a.highlightedArea.cy||(a.highlightedArea.cy=a.highlightedArea.cy),0!==a.popup.length)return a.arrowId&&mg$$1("#"+a.arrowId).length&&mg$$1("#"+a.arrowId).remove(),!a.isGuidance||"top"!==a.alignment&&"bottom"!==a.alignment||(a.arrowWidth=8),"smartTip"==a.stepType||"tooltip"==a.stepType||0!=a.popup.outerWidth()?a.popupWidth=a.popup.outerWidth():a.popupWidth=250,125<a.changeInHeight||"smartTip"==a.stepType||"tooltip"==a.stepType||"beacon"==a.stepType?a.popupHeight=a.popup.outerHeight():a.popupHeight=125,a.highlightedArea.cw=a.highlightedArea.cw||0,a.highlightedArea.ch=a.highlightedArea.ch||0,a.highlightedArea.cx=a.highlightedArea.cx||0,a.highlightedArea.cy=a.highlightedArea.cy||0,0<a.highlightedArea.cw&&0<a.highlightedArea.ch?a.availableSpace={top:a.highlightedArea.cy,left:a.highlightedArea.cx,right:a.dimensions.width-(a.highlightedArea.cx+a.highlightedArea.cw),bottom:a.dimensions.height-(a.highlightedArea.cy+a.highlightedArea.ch)}:a.availableSpace={top:0,left:0,right:0,bottom:0},a.highlightedArea.cx||a.highlightedArea.cy||(a.availableSpace.top=a.availableSpace.top||0,a.availableSpace.left=a.availableSpace.left||0,a.availableSpace.right=a.availableSpace.right||0,a.availableSpace.bottom=a.availableSpace.bottom||0),void 0!==a.containerOffset&&(a.containerOffset.top<0&&(a.containerOffset.top=0),a.containerOffset.left<0&&(a.containerOffset.left=0),a.availableSpace.top+=a.containerOffset.top,a.availableSpace.left+=a.containerOffset.left,a.availableSpace.right-=a.containerOffset.left,a.availableSpace.bottom-=a.containerOffset.top),e.playingTour,0<=a.availableSpace.top&&(a.totalHeightMinusTop=a.dimensions.height-a.availableSpace.top),0<=a.availableSpace.left&&(a.totalWidthMinusLeft=a.dimensions.width-a.availableSpace.left),0<=a.availableSpace.bottom&&(a.totalHeightMinusBottom=a.dimensions.height-a.availableSpace.bottom),0<=a.availableSpace.right&&(a.totalWidthMinusRight=a.dimensions.width-a.availableSpace.right),t.getAvailablePositions=function(){return{"left-middle":r(),"left-top":o(),"left-bottom":s(),"right-middle":c(),"right-top":d(),"right-bottom":g(),"top-middle":h(),"top-left":f(),"top-right":y(),"bottom-middle":S(),"bottom-left":b(),"bottom-right":k()}},t.getAvailablePositionsForTooltip=function(){document.getElementById("smartTooltipId").getBoundingClientRect();var e,t,r=a.highlightedArea.cx+a.highlightedArea.cw+15,i=a.highlightedArea.cy+a.highlightedArea.ch+15;return{"left-middle":a.highlightedArea.cx>a.dimensions.width/5,"right-middle":(e=r,t=182,!(a.dimensions.width-e<t+30)),"top-middle":(e=r,!(a.highlightedArea.cy<81||a.highlightedArea.cx<50||a.dimensions.width-e<50)),"bottom-middle":(t=r,e=i,r=70,!(a.dimensions.height-e<r+16||a.highlightedArea.cx<50||a.dimensions.width-t<50))}},t.start=function(){switch(a.alignment){case"left":case"left-middle":i(),a.isSet||n(),a.isSet||l();break;case"left-top":n(),a.isSet||l();break;case"left-bottom":l(),a.isSet||n();break;case"right":case"right-middle":p(),a.isSet||u(),a.isSet||m();break;case"right-top":u(),a.isSet||m();break;case"right-bottom":m(),a.isSet||u();break;case"top":_(),a.isSet||v(),a.isSet||P();break;case"top-middle":_();break;case"top-left":v();break;case"top-right":P();break;case"bottom":w(),a.isSet||C(),a.isSet||T();break;case"bottom-middle":w();break;case"bottom-left":C();break;case"bottom-right":T();break;case"center":x();break;case"custom":a.left=a.highlightedArea.cx+a.customPos,a.top=a.highlightedArea.cy+a.customPos,a.isSet=!0,a.alignment="custom"}var e;return!1===a.hardApply&&(a.isSet||p(),a.isSet||u(),a.isSet||m(),a.isSet||i(),a.isSet||n(),a.isSet||l(),a.isSet||_(),a.isSet||v(),a.isSet||P(),a.isSet||w(),a.isSet||C(),a.isSet||T(),a.isSet||x()),null!==a.left&&null!==a.top&&(a.top<0&&(a.top=10),0<(e=mg$$1(window).scrollLeft())&&(a.left-=e),a.popup.css({left:a.left+a.containerOffset.left,top:a.top+a.containerOffset.top})),a.arrowId&&(a.arrowClass=a.arrowClass+" mgPlayerJSPreview_tooltip-arrow"),a.doNotApplyArrow||mg$$1("html").append(`<div id= "${a.arrowId}" class="${a.arrowClass}" style="left:${a.arrowLeft}px;top:${a.arrowTop}px;"></div>`),!!a.isSet&&{top:a.top+a.containerOffset.top,left:a.left+a.containerOffset.left,alignment:a.alignment}},t.checkHeight=function(){80!==a.popupHeight&&t.redo()},t.redo=function(){a.isGuidance&&(a.arrowWidth=8),a.popupWidth=307,125<a.changeInHeight?a.popupHeight=a.changeInHeight:a.popupHeight=125,t.start()},t.clear=function(){mg$$1(".mgPlayerJSPreview_arrow-down").not(".mgPlayerJSPreview_tooltip-arrow").remove(),mg$$1(".mgPlayerJSPreview_arrow-up").not(".mgPlayerJSPreview_tooltip-arrow").remove(),mg$$1(".mgPlayerJSPreview_arrow-left").not(".mgPlayerJSPreview_tooltip-arrow").remove(),mg$$1(".mgPlayerJSPreview_arrow-right").not(".mgPlayerJSPreview_tooltip-arrow").remove(),a.popup.css({left:0,top:0})},t;function r(){return Math.abs(a.availableSpace.left)>a.popupWidth&&a.highlightedArea.ch/2<screen.height&&Math.abs(a.availableSpace.top)+a.highlightedArea.ch/2>a.popupHeight/2&&Math.abs(a.availableSpace.bottom)+a.highlightedArea.ch/2>a.popupHeight/2}function i(){r()&&("smartTip"===a.stepType&&!a.isBeacon||"validation"===a.stepType?(a.left=a.highlightedArea.cx,a.isGuidance&&a.isExtension||"validation"===a.stepType?a.top=a.highlightedArea.cy:a.top=a.highlightedArea.cy+a.highlightedArea.ch/2-a.popupHeight/2):"beacon_tour"===a.stepType&&a.isExtension?(a.left=a.highlightedArea.cx,a.top=a.highlightedArea.cy):("inline"===a.stepType||"message"===a.stepType?a.left=a.highlightedArea.cx-a.popupWidth-a.arrowWidth:a.left=a.highlightedArea.cx-a.popupWidth-5,a.top=a.highlightedArea.cy+a.highlightedArea.ch/2-a.popupHeight/2),a.arrowClass="mgPlayerJSPreview_arrow-right",a.arrowLeft=a.highlightedArea.cx-12,a.arrowTop=a.top+a.popupHeight/2-10,a.isSet=!0,a.alignment="left-middle")}function o(){return Math.abs(a.availableSpace.left)>a.popupWidth&&a.totalHeightMinusTop>a.popupHeight}function n(){o()&&(a.left=a.highlightedArea.cx-a.popupWidth-a.arrowWidth,a.top=a.highlightedArea.cy,a.arrowClass="mgPlayerJSPreview_arrow-right",a.arrowLeft=a.highlightedArea.cx-12,a.arrowTop=a.top+7,a.isSet=!0,a.alignment="left-top")}function s(){return Math.abs(a.availableSpace.left)>a.popupWidth&&a.totalHeightMinusBottom>a.popupHeight}function l(){s()&&(a.left=a.highlightedArea.cx-a.popupWidth-a.arrowWidth,a.top=a.highlightedArea.cy+a.highlightedArea.ch-a.popupHeight,a.arrowClass="mgPlayerJSPreview_arrow-right",a.arrowLeft=a.highlightedArea.cx-12,a.arrowTop=a.top+(a.popupHeight-30),a.isSet=!0,a.alignment="left-bottom")}function c(){return a.availableSpace.right>a.popupWidth&&a.highlightedArea.ch/2<screen.height&&Math.abs(a.availableSpace.top)+a.highlightedArea.ch/2>a.popupHeight/2&&Math.abs(a.availableSpace.bottom)+a.highlightedArea.ch/2>a.popupHeight/2}function p(){c()&&("smartTip"===a.stepType&&!a.isBeacon||"validation"===a.stepType?(a.left=a.highlightedArea.cx,a.isGuidance&&a.isExtension||"validation"===a.stepType?a.top=a.highlightedArea.cy:a.top=a.highlightedArea.cy+a.highlightedArea.ch/2-a.popupHeight/2):"beacon_tour"===a.stepType&&a.isExtension?(a.left=a.highlightedArea.cx,a.top=a.highlightedArea.cy):("inline"===a.stepType||"message"===a.stepType?a.left=a.highlightedArea.cx+a.highlightedArea.cw+a.arrowWidth:a.left=a.highlightedArea.cx+a.highlightedArea.cw+5,a.top=a.highlightedArea.cy+a.highlightedArea.ch/2-a.popupHeight/2),a.arrowClass="mgPlayerJSPreview_arrow-left",a.arrowLeft=a.left-10,a.arrowTop=a.top+a.popupHeight/2-10,a.isSet=!0,a.alignment="right-middle")}function d(){return a.availableSpace.right>a.popupWidth&&a.totalHeightMinusTop>a.popupHeight}function u(){d()&&(a.left=a.highlightedArea.cx+a.highlightedArea.cw+a.arrowWidth,a.top=a.highlightedArea.cy,a.arrowClass="mgPlayerJSPreview_arrow-left",a.arrowLeft=a.left-10,a.arrowTop=a.top+7,a.isSet=!0,a.alignment="right-top")}function g(){return a.availableSpace.right>a.popupWidth&&a.totalHeightMinusBottom>a.popupHeight}function m(){g()&&(a.left=a.highlightedArea.cx+a.highlightedArea.cw+a.arrowWidth,a.top=a.highlightedArea.cy+a.highlightedArea.ch-a.popupHeight,a.arrowClass="mgPlayerJSPreview_arrow-left",a.arrowLeft=a.left-10,a.arrowTop=a.top+(a.popupHeight-30),a.isSet=!0,a.alignment="right-bottom")}function h(){return Math.abs(a.availableSpace.top)>a.popupHeight+15&&a.totalWidthMinusLeft>a.popupWidth/2&&Math.abs(a.availableSpace.left)+a.highlightedArea.cw/2>a.popupWidth/2&&a.availableSpace.right+a.highlightedArea.cw/2>a.popupWidth/2}function _(){"message"===a.stepType?(a.left=a.popupWidth/2,a.top=a.highlightedArea.cy-a.popupHeight-a.arrowWidth):"beacon_tour"===a.stepType&&a.isExtension?(a.left=a.highlightedArea.cx,a.top=a.highlightedArea.cy):h()&&(a.left=a.highlightedArea.cx+a.highlightedArea.cw/2-a.popupWidth/2,"inline"==a.step?a.top=a.highlightedArea.cy-a.popupHeight-a.arrowWidth:a.top=a.highlightedArea.cy-a.popupHeight-10),a.arrowClass="mgPlayerJSPreview_arrow-down",a.arrowLeft=a.highlightedArea.cx+a.highlightedArea.cw/2-8,a.arrowTop=a.highlightedArea.cy-12,a.isSet=!0,a.alignment="top-middle"}function f(){return Math.abs(a.availableSpace.top)>a.popupHeight+15&&a.totalWidthMinusLeft>a.popupWidth}function v(){("message"==a.stepType||f())&&(a.left=a.highlightedArea.cx,a.top=a.highlightedArea.cy-a.popupHeight-a.arrowWidth,a.arrowClass="mgPlayerJSPreview_arrow-down",a.arrowLeft=a.highlightedArea.cx+7,a.arrowTop=a.highlightedArea.cy-12,a.isSet=!0,a.alignment="top-left")}function y(){return Math.abs(a.availableSpace.top)>a.popupHeight+15&&a.totalWidthMinusRight>a.popupWidth}function P(){("message"===a.stepType||y())&&(a.left=a.highlightedArea.cx+a.highlightedArea.cw-a.popupWidth,a.top=a.highlightedArea.cy-a.popupHeight-a.arrowWidth,a.arrowClass="mgPlayerJSPreview_arrow-down",a.arrowLeft=a.highlightedArea.cx+a.highlightedArea.cw-27,a.arrowTop=a.highlightedArea.cy-12,a.isSet=!0,a.alignment="top-right")}function S(){return Math.abs(a.availableSpace.bottom)>a.popupHeight&&a.totalWidthMinusLeft>a.popupWidth/2&&Math.abs(a.availableSpace.left)+a.highlightedArea.cw/2>a.popupWidth/2&&a.availableSpace.right+a.highlightedArea.cw/2>a.popupWidth/2}function w(){S()&&("smartTip"===a.stepType&&!a.isBeacon||"validation"===a.stepType?(a.left=a.highlightedArea.cx,a.isGuidance&&a.isExtension||"validation"===a.stepType?a.top=a.highlightedArea.cy:a.top=a.highlightedArea.cy+a.highlightedArea.ch/2-a.popupHeight/2):"beacon_tour"===a.stepType&&a.isExtension?(a.left=a.highlightedArea.cx,a.top=a.highlightedArea.cy):"inline"===a.stepType||"message"===a.stepType?(a.top=a.highlightedArea.cy+a.highlightedArea.ch+a.arrowWidth,a.left=a.highlightedArea.cx+a.highlightedArea.cw/2-a.popupWidth/2):(a.left=a.highlightedArea.cx+a.highlightedArea.cw/2-a.popupWidth/2,a.top=a.highlightedArea.cy+a.highlightedArea.ch+5),a.isSet=!0,a.alignment="bottom-middle")}function b(){return Math.abs(a.availableSpace.bottom)>a.popupHeight&&a.totalWidthMinusLeft>a.popupWidth}function C(){b()&&(a.left=a.highlightedArea.cx,a.top=a.highlightedArea.cy+a.highlightedArea.ch+a.arrowWidth,a.arrowClass="mgPlayerJSPreview_arrow-up",a.arrowLeft=a.highlightedArea.cx+7,a.arrowTop=a.highlightedArea.cy+a.highlightedArea.ch+2,a.isSet=!0,a.alignment="bottom-left")}function k(){return Math.abs(a.availableSpace.bottom)>a.popupHeight&&a.totalWidthMinusRight>a.popupWidth}function T(){k()&&(a.left=a.highlightedArea.cx+a.highlightedArea.cw-a.popupWidth,a.top=a.highlightedArea.cy+a.highlightedArea.ch+a.arrowWidth,a.arrowClass="mgPlayerJSPreview_arrow-up",a.arrowLeft=a.highlightedArea.cx+a.highlightedArea.cw-27,a.arrowTop=a.highlightedArea.cy+a.highlightedArea.ch+2,a.isSet=!0,a.alignment="bottom-right")}function x(){a.left=(a.dimensions.width-a.popupWidth)/2,a.top=(a.dimensions.height-a.popupHeight)/2,a.isSet=!0,a.alignment="center"}}function alignImageStepPreview(e,t,r,i,a){var e=mg$(e),o=e.width(),n=e.height(),s=t.width,l=t.height;let c=(s-o)/2,p=0;var d=a.elementTop,u=a.elementLeft;if(o&&n){switch(r){case"top":p=20,c=(s-o)/2;break;case"center":p=(l-n)/2,c=(s-o)/2;break;case"bottom":p=l-n-40,c=(s-o)/2;break;case"left-top":p=20,c=20;break;case"left-center":p=(l-n)/2,c=20;break;case"left-bottom":p=l-n-40,c=20;break;case"right-top":p=20,c=s-o-45;break;case"right-center":p=(l-n)/2,c=s-o-45;break;case"right-bottom":p=l-n-40,c=s-o-45;break;case"custom":p=d*l/100,c=u*s/100}e.css({left:c,top:p})}}var __webpack_require__={d:(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},__webpack_exports__=globalThis.pdfjsLib={};__webpack_require__.d(__webpack_exports__,{AbortException:()=>AbortException,AnnotationEditorLayer:()=>AnnotationEditorLayer,AnnotationEditorParamsType:()=>AnnotationEditorParamsType,AnnotationEditorType:()=>AnnotationEditorType,AnnotationEditorUIManager:()=>AnnotationEditorUIManager,AnnotationLayer:()=>AnnotationLayer,AnnotationMode:()=>AnnotationMode,ColorPicker:()=>ColorPicker,DOMSVGFactory:()=>DOMSVGFactory,DrawLayer:()=>DrawLayer,FeatureTest:()=>util_FeatureTest,GlobalWorkerOptions:()=>GlobalWorkerOptions,ImageKind:()=>util_ImageKind,InvalidPDFException:()=>InvalidPDFException,MissingPDFException:()=>MissingPDFException,OPS:()=>OPS,OutputScale:()=>OutputScale,PDFDataRangeTransport:()=>PDFDataRangeTransport,PDFDateString:()=>PDFDateString,PDFWorker:()=>PDFWorker,PasswordResponses:()=>PasswordResponses,PermissionFlag:()=>PermissionFlag,PixelsPerInch:()=>PixelsPerInch,RenderingCancelledException:()=>RenderingCancelledException,TextLayer:()=>TextLayer,TouchManager:()=>TouchManager,UnexpectedResponseException:()=>UnexpectedResponseException,Util:()=>Util,VerbosityLevel:()=>VerbosityLevel,XfaLayer:()=>XfaLayer,build:()=>build,createValidAbsoluteUrl:()=>createValidAbsoluteUrl,fetchData:()=>fetchData,getDocument:()=>getDocument,getFilenameFromUrl:()=>getFilenameFromUrl,getPdfFilenameFromUrl:()=>getPdfFilenameFromUrl,getXfaPageViewport:()=>getXfaPageViewport,isDataScheme:()=>isDataScheme,isPdfFile:()=>isPdfFile,noContextMenu:()=>noContextMenu,normalizeUnicode:()=>normalizeUnicode,setLayerDimensions:()=>setLayerDimensions,shadow:()=>shadow,stopEvent:()=>stopEvent,version:()=>version});let isNodeJS=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),IDENTITY_MATRIX=[1,0,0,1,0,0],FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],MAX_IMAGE_SIZE_TO_CACHE=1e7,LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(e){Number.isInteger(e)&&(verbosity=e)}function getVerbosityLevel(){return verbosity}function info(e){verbosity>=VerbosityLevel.INFOS&&console.log("Info: "+e)}function warn(e){verbosity>=VerbosityLevel.WARNINGS&&console.log("Warning: "+e)}function unreachable(e){throw new Error(e)}function assert(e,t){e||unreachable(t)}function _isValidProtocol(e){switch(e?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(e,t=null,r=null){if(e)try{if(r&&"string"==typeof e)if(r.addDefaultProtocol&&e.startsWith("www.")&&2<=e.match(/\./g)?.length&&(e="http://"+e),r.tryConvertEncoding)try{e=stringToUTF8String(e)}catch{}var i=t?new URL(e,t):new URL(e);if(_isValidProtocol(i))return i}catch{}return null}function shadow(e,t,r,i=!1){return Object.defineProperty(e,t,{value:r,enumerable:!i,configurable:!0,writable:!1}),r}let BaseException=(()=>{function e(e,t){this.message=e,this.name=t}return e.prototype=new Error,e.constructor=e})();class PasswordException extends BaseException{constructor(e,t){super(e,"PasswordException"),this.code=t}}class UnknownErrorException extends BaseException{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class InvalidPDFException extends BaseException{constructor(e){super(e,"InvalidPDFException")}}class MissingPDFException extends BaseException{constructor(e){super(e,"MissingPDFException")}}class UnexpectedResponseException extends BaseException{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class FormatError extends BaseException{constructor(e){super(e,"FormatError")}}class AbortException extends BaseException{constructor(e){super(e,"AbortException")}}function bytesToString(t){"object"==typeof t&&void 0!==t?.length||unreachable("Invalid argument for bytesToString");var r=t.length;if(r<8192)return String.fromCharCode.apply(null,t);var i=[];for(let e=0;e<r;e+=8192){var a=Math.min(e+8192,r),a=t.subarray(e,a);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function stringToBytes(t){"string"!=typeof t&&unreachable("Invalid argument for stringToBytes");var r=t.length,i=new Uint8Array(r);for(let e=0;e<r;++e)i[e]=255&t.charCodeAt(e);return i}function string32(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function objectFromMap(e){var t,r,i=Object.create(null);for([t,r]of e)i[t]=r;return i}function isLittleEndian(){var e=new Uint8Array(4),e=(e[0]=1,new Uint32Array(e.buffer,0,1));return 1===e[0]}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get isImageDecoderSupported(){return shadow(this,"isImageDecoderSupported","undefined"!=typeof ImageDecoder)}static get platform(){return"undefined"!=typeof navigator&&"string"==typeof navigator?.platform?shadow(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:"string"==typeof navigator?.userAgent&&navigator.userAgent.includes("Firefox")}):shadow(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return shadow(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}let hexNumbers=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class Util{static makeHexColor(e,t,r){return"#"+hexNumbers[e]+hexNumbers[t]+hexNumbers[r]}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){var r=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r]}static getAxialAlignedBoundingBox(e,t){var r=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),a=this.applyTransform([e[0],e[3]],t),e=this.applyTransform([e[2],e[1]],t);return[Math.min(r[0],i[0],a[0],e[0]),Math.min(r[1],i[1],a[1],e[1]),Math.max(r[0],i[0],a[0],e[0]),Math.max(r[1],i[1],a[1],e[1])]}static inverseTransform(e){var t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){var t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],i=e[2]*t[1]+e[3]*t[3],a=(r+i)/2,r=Math.sqrt((r+i)**2-4*(r*i-(e[2]*t[0]+e[3]*t[2])*(e[0]*t[1]+e[1]*t[3])))/2,i=a-r||1;return[Math.sqrt(a+r||1),Math.sqrt(i)]}static normalizeRect(e){var t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[3]<e[1]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){var r,i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),a=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));return a<i||(r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),(e=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3])))<r)?null:[i,r,a,e]}static#getExtremumOnCurve(e,t,r,i,a,o,n,s,l,c){var p;l<=0||1<=l||(r=(p=1-l)*(p*(p*e+3*l*t)+3*(e=l*l)*r)+(t=e*l)*i,i=p*(p*(p*a+3*l*o)+3*e*n)+t*s,c[0]=Math.min(c[0],r),c[1]=Math.min(c[1],i),c[2]=Math.max(c[2],r),c[3]=Math.max(c[3],i))}static#getExtremum(e,t,r,i,a,o,n,s,l,c,p,d){Math.abs(l)<1e-12?1e-12<=Math.abs(c)&&this.#getExtremumOnCurve(e,t,r,i,a,o,n,s,-p/c,d):(p=c**2-4*p*l)<0||(p=Math.sqrt(p),this.#getExtremumOnCurve(e,t,r,i,a,o,n,s,(-c+p)/(l=2*l),d),this.#getExtremumOnCurve(e,t,r,i,a,o,n,s,(-c-p)/l,d))}static bezierBoundingBox(e,t,r,i,a,o,n,s,l){return l?(l[0]=Math.min(l[0],e,n),l[1]=Math.min(l[1],t,s),l[2]=Math.max(l[2],e,n),l[3]=Math.max(l[3],t,s)):l=[Math.min(e,n),Math.min(t,s),Math.max(e,n),Math.max(t,s)],this.#getExtremum(e,r,a,n,t,i,o,s,3*(3*(r-a)-e+n),6*(e-2*r+a),3*(r-e),l),this.#getExtremum(e,r,a,n,t,i,o,s,3*(3*(i-o)-t+s),6*(t-2*i+o),3*(i-t),l),l}}function stringToUTF8String(e){return decodeURIComponent(escape(e))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(e){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["ï¬","Å¿t"]])),e.replaceAll(NormalizeRegex,(e,t,r)=>t?t.normalize("NFKC"):NormalizationMap.get(r))}function getUuid(){var e;return"function"==typeof crypto.randomUUID?crypto.randomUUID():(e=new Uint8Array(32),crypto.getRandomValues(e),bytesToString(e))}let AnnotationPrefix="pdfjs_internal_id_";function toBase64Util(e){return Uint8Array.prototype.toBase64?e.toBase64():btoa(bytesToString(e))}"function"!=typeof Promise.try&&(Promise.try=function(t,...r){return new Promise(e=>{e(t(...r))})});let SVG_NS="http://www.w3.org/2000/svg";class PixelsPerInch{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function fetchData(i,a="text"){if(isValidFetchUrl(i,document.baseURI)){var e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(a){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,t)=>{let r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType=a,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE)if(200===r.status||0===r.status){switch(a){case"arraybuffer":case"blob":case"json":return void e(r.response)}e(r.responseText)}else t(new Error(r.statusText))},r.send(null)})}class PageViewport{constructor({viewBox:e,userUnit:t,scale:r,rotation:i,offsetX:a=0,offsetY:o=0,dontFlip:n=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=i,this.offsetX=a,this.offsetY=o,r*=t;var t=(e[2]+e[0])/2,s=(e[3]+e[1])/2;let l,c,p,d;switch((i%=360)<0&&(i+=360),i){case 180:l=-1,c=0,p=0,d=1;break;case 90:l=0,c=1,p=1,d=0;break;case 270:l=0,c=-1,p=-1,d=0;break;case 0:l=1,c=0,p=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}n&&(p=-p,d=-d);let u,g,m,h;h=0===l?(u=Math.abs(s-e[1])*r+a,g=Math.abs(t-e[0])*r+o,m=(e[3]-e[1])*r,(e[2]-e[0])*r):(u=Math.abs(t-e[0])*r+a,g=Math.abs(s-e[1])*r+o,m=(e[2]-e[0])*r,(e[3]-e[1])*r),this.transform=[l*r,c*r,p*r,d*r,u-l*r*t-p*r*s,g-c*r*t-d*r*s],this.width=m,this.height=h}get rawDims(){let{userUnit:t,viewBox:e}=this;var r=e.map(e=>e*t);return shadow(this,"rawDims",{pageWidth:r[2]-r[0],pageHeight:r[3]-r[1],pageX:r[0],pageY:r[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:a})}convertToViewportPoint(e,t){return Util.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){var t=Util.applyTransform([e[0],e[1]],this.transform),e=Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],e[0],e[1]]}convertToPdfPoint(e,t){return Util.applyInverseTransform([e,t],this.transform)}}class RenderingCancelledException extends BaseException{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function isDataScheme(e){var t=e.length;let r=0;for(;r<t&&""===e[r].trim();)r++;return"data:"===e.substring(r,r+5).toLowerCase()}function isPdfFile(e){return"string"==typeof e&&/\.pdf$/i.test(e)}function getFilenameFromUrl(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(e,t="document.pdf"){if("string"!=typeof e)return t;if(isDataScheme(e))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;var r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e);let i=r.exec(e[1])||r.exec(e[2])||r.exec(e[3]);if(i&&(i=i[0]).includes("%"))try{i=r.exec(decodeURIComponent(i))[0]}catch{}return i||t}class StatTimer{started=Object.create(null);times=[];time(e){e in this.started&&warn("Timer is already running for "+e),this.started[e]=Date.now()}timeEnd(e){e in this.started||warn("Timer has not been started for "+e),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){var e,t,r,i,a=[];let o=0;for({name:e}of this.times)o=Math.max(e.length,o);for({name:t,start:r,end:i}of this.times)a.push(`${t.padEnd(o)} ${i-r}ms\n`);return a.join("")}}function isValidFetchUrl(e,t){try{var r=(t?new URL(e,t):new URL(e)).protocol;return"http:"===r||"https:"===r}catch{return!1}}function noContextMenu(e){e.preventDefault()}function stopEvent(e){e.preventDefault(),e.stopPropagation()}class PDFDateString{static#regex;static toDateObject(e){if(!e||"string"!=typeof e)return null;this.#regex||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");e=this.#regex.exec(e);if(!e)return null;var t=parseInt(e[1],10),r=1<=(r=parseInt(e[2],10))&&r<=12?r-1:0,i=1<=(i=parseInt(e[3],10))&&i<=31?i:1;let a=parseInt(e[4],10),o=(a=0<=a&&a<=23?a:0,parseInt(e[5],10));o=0<=o&&o<=59?o:0;var n=0<=(n=parseInt(e[6],10))&&n<=59?n:0,s=e[7]||"Z",l=0<=(l=parseInt(e[8],10))&&l<=23?l:0,e=0<=(e=parseInt(e[9],10)||0)&&e<=59?e:0;return"-"===s?(a+=l,o+=e):"+"===s&&(a-=l,o-=e),new Date(Date.UTC(t,r,i,a,o,n))}}function getXfaPageViewport(e,{scale:t=1,rotation:r=0}){var{width:e,height:i}=e.attributes.style,e=[0,0,parseInt(e),parseInt(i)];return new PageViewport({viewBox:e,userUnit:1,scale:t,rotation:r})}function getRGB(e){var t;return e.startsWith("#")?[(16711680&(t=parseInt(e.slice(1),16)))>>16,(65280&t)>>8,255&t]:e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(warn(`Not a valid color format: "${e}"`),[0,0,0])}function getColorValues(e){var t,r=document.createElement("span");r.style.visibility="hidden",document.body.append(r);for(t of e.keys()){r.style.color=t;var i=window.getComputedStyle(r).color;e.set(t,getRGB(i))}r.remove()}function getCurrentTransform(e){var{a:e,b:t,c:r,d:i,e:a,f:o}=e.getTransform();return[e,t,r,i,a,o]}function getCurrentTransformInverse(e){var{a:e,b:t,c:r,d:i,e:a,f:o}=e.getTransform().invertSelf();return[e,t,r,i,a,o]}function setLayerDimensions(e,t,r=!1,i=!0){var a,o,n,s;t instanceof PageViewport&&({pageWidth:n,pageHeight:o}=t.rawDims,a=e.style,n=`var(--scale-factor) * ${n}px`,o=`var(--scale-factor) * ${o}px`,n=(s=util_FeatureTest.isCSSRoundSupported)?`round(down, ${n}, var(--scale-round-x, 1px))`:`calc(${n})`,s=s?`round(down, ${o}, var(--scale-round-y, 1px))`:`calc(${o})`,r&&t.rotation%180!=0?(a.width=s,a.height=n):(a.width=n,a.height=s)),i&&e.setAttribute("data-main-rotation",t.rotation)}class OutputScale{constructor(){var e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}}class EditorToolbar{#toolbar=null;#colorPicker=null;#editor;#buttons=null;#altText=null;static#l10nRemove=null;constructor(e){this.#editor=e,EditorToolbar.#l10nRemove||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){var e,t,r=this.#toolbar=document.createElement("div"),i=(r.classList.add("editToolbar","hidden"),r.setAttribute("role","toolbar"),this.#editor._uiManager._signal),i=(r.addEventListener("contextmenu",noContextMenu,{signal:i}),r.addEventListener("pointerdown",EditorToolbar.#pointerDown,{signal:i}),this.#buttons=document.createElement("div")),i=(i.className="buttons",r.append(i),this.#editor.toolbarPosition);return i&&(e=r.style,t="ltr"===this.#editor._uiManager.direction?1-i[0]:i[0],e.insetInlineEnd=100*t+"%",e.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`),this.#addDeleteButton(),r}get div(){return this.#toolbar}static#pointerDown(e){e.stopPropagation()}#focusIn(e){this.#editor._focusEventsAllowed=!1,stopEvent(e)}#focusOut(e){this.#editor._focusEventsAllowed=!0,stopEvent(e)}#addListenersToElement(e){var t=this.#editor._uiManager._signal;e.addEventListener("focusin",this.#focusIn.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#focusOut.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",noContextMenu,{signal:t})}hide(){this.#toolbar.classList.add("hidden"),this.#colorPicker?.hideDropdown()}show(){this.#toolbar.classList.remove("hidden"),this.#altText?.shown()}#addDeleteButton(){let{editorType:e,_uiManager:t}=this.#editor;var r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",EditorToolbar.#l10nRemove[e]),this.#addListenersToElement(r),r.addEventListener("click",e=>{t.delete()},{signal:t._signal}),this.#buttons.append(r)}get#divider(){var e=document.createElement("div");return e.className="divider",e}async addAltText(e){var t=await e.render();this.#addListenersToElement(t),this.#buttons.prepend(t,this.#divider),this.#altText=e}addColorPicker(e){e=(this.#colorPicker=e).renderButton();this.#addListenersToElement(e),this.#buttons.prepend(e,this.#divider)}remove(){this.#toolbar.remove(),this.#colorPicker?.destroy(),this.#colorPicker=null}}class HighlightToolbar{#buttons=null;#toolbar=null;#uiManager;constructor(e){this.#uiManager=e}#render(){var e=this.#toolbar=document.createElement("div"),t=(e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",noContextMenu,{signal:this.#uiManager._signal}),this.#buttons=document.createElement("div"));return t.className="buttons",e.append(t),this.#addHighlightButton(),e}#getLastPoint(e,t){let r=0,i=0;for(var a of e){var o=a.y+a.height;o<r||(a=a.x+(t?a.width:0),o>r?(i=a,r=o):t?a>i&&(i=a):a<i&&(i=a))}return[t?1-i:i,r]}show(e,t,r){var[t,r]=this.#getLastPoint(t,r),i=(this.#toolbar||=this.#render()).style;e.append(this.#toolbar),i.insetInlineEnd=100*t+"%",i.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#toolbar.remove()}#addHighlightButton(){var e=document.createElement("button"),t=(e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1"),document.createElement("span")),t=(e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),this.#uiManager._signal);e.addEventListener("contextmenu",noContextMenu,{signal:t}),e.addEventListener("click",()=>{this.#uiManager.highlightSelection("floating_button")},{signal:t}),this.#buttons.append(e)}}function bindEvents(e,t,r){for(var i of r)t.addEventListener(i,e[i].bind(e))}class IdManager{#id=0;get id(){return""+AnnotationEditorPrefix+this.#id++}}class ImageManager{#baseId=getUuid();#id=0;#cache=null;static get _isSVGFittingCanvas(){let e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',shadow(this,"_isSVGFittingCanvas",t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])))}async#get(e,t){this.#cache||=new Map;let o=this.#cache.get(e);if(null===o)return null;if(o?.bitmap)o.refCounter+=1;else{try{o||={bitmap:null,id:`image_${this.#baseId}_`+this.#id++,refCounter:0,isSvg:!1};let e;if("string"==typeof t?(o.url=t,e=await fetchData(t,"blob")):t instanceof File?e=o.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){let r=ImageManager._isSVGFittingCanvas,i=new FileReader,a=new Image;var n=new Promise((e,t)=>{a.onload=()=>{o.bitmap=a,o.isSvg=!0,e()},i.onload=async()=>{var e=o.svgUrl=i.result;a.src=await r?e+"#svgView(preserveAspectRatio(none))":e},a.onerror=i.onerror=t});i.readAsDataURL(e),await n}else o.bitmap=await createImageBitmap(e);o.refCounter=1}catch(e){warn(e),o=null}this.#cache.set(e,o),o&&this.#cache.set(o.id,o)}return o}async getFromFile(e){var{lastModified:t,name:r,size:i,type:a}=e;return this.#get(t+`_${r}_${i}_`+a,e)}async getFromUrl(e){return this.#get(e,e)}async getFromBlob(e,t){t=await t;return this.#get(e,t)}async getFromId(e){this.#cache||=new Map;var t,e=this.#cache.get(e);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):e.blobPromise?(t=e.blobPromise,delete e.blobPromise,this.getFromBlob(e.id,t)):this.getFromUrl(e.url):null}getFromCanvas(e,t){this.#cache||=new Map;let r=this.#cache.get(e);var i;return r?.bitmap?r.refCounter+=1:((i=new OffscreenCanvas(t.width,t.height)).getContext("2d").drawImage(t,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${this.#baseId}_`+this.#id++,refCounter:1,isSvg:!1},this.#cache.set(e,r),this.#cache.set(r.id,r)),r}getSvgUrl(e){e=this.#cache.get(e);return e?.isSvg?e.svgUrl:null}deleteId(e){this.#cache||=new Map;var t,r,e=this.#cache.get(e);e&&(--e.refCounter,0===e.refCounter)&&(t=e.bitmap,e.url||e.file||((r=new OffscreenCanvas(t.width,t.height)).getContext("bitmaprenderer").transferFromImageBitmap(t),e.blobPromise=r.convertToBlob()),t.close?.(),e.bitmap=null)}isValidId(e){return e.startsWith(`image_${this.#baseId}_`)}}class CommandManager{#commands=[];#locked=!1;#maxSize;#position=-1;constructor(e=128){this.#maxSize=e}add({cmd:e,undo:t,post:r,mustExec:i,type:a=NaN,overwriteIfSameType:o=!1,keepUndo:n=!1}){i&&e(),this.#locked||(i={cmd:e,undo:t,post:r,type:a},-1===this.#position?(0<this.#commands.length&&(this.#commands.length=0),this.#position=0,this.#commands.push(i)):o&&this.#commands[this.#position].type===a?(n&&(i.undo=this.#commands[this.#position].undo),this.#commands[this.#position]=i):((e=this.#position+1)===this.#maxSize?this.#commands.splice(0,1):(this.#position=e)<this.#commands.length&&this.#commands.splice(e),this.#commands.push(i)))}undo(){var e,t;-1!==this.#position&&(this.#locked=!0,{undo:e,post:t}=this.#commands[this.#position],e(),t?.(),this.#locked=!1,--this.#position)}redo(){var e,t;this.#position<this.#commands.length-1&&(this.#position+=1,this.#locked=!0,{cmd:e,post:t}=this.#commands[this.#position],e(),t?.(),this.#locked=!1)}hasSomethingToUndo(){return-1!==this.#position}hasSomethingToRedo(){return this.#position<this.#commands.length-1}cleanType(t){if(-1!==this.#position){for(let e=this.#position;0<=e;e--)if(this.#commands[e].type!==t)return this.#commands.splice(e+1,this.#position-e),void(this.#position=e);this.#commands.length=0,this.#position=-1}}destroy(){this.#commands=null}}class KeyboardManager{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;var t,r,i,a=util_FeatureTest.platform.isMac;for([t,r,i={}]of e)for(var o of t){var n=o.startsWith("mac+");a&&n?(this.callbacks.set(o.slice(4),{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1))):a||n||(this.callbacks.set(o,{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1)))}}#serialize(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);e=this.buffer.join("+");return this.buffer.length=0,e}exec(e,t){var r,i,a,o;this.allKeys.has(t.key)&&(r=this.callbacks.get(this.#serialize(t)))&&({callback:r,options:{bubbles:i=!1,args:a=[],checker:o=null}}=r,o&&!o(e,t)||(r.bind(e,...a,t)(),i)||stopEvent(t))}}class ColorManager{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){var e=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(e),shadow(this,"_colors",e)}convert(e){let r=getRGB(e);if(window.matchMedia("(forced-colors: active)").matches)for(var[t,i]of this._colors)if(i.every((e,t)=>e===r[t]))return ColorManager._colorsMapping.get(t);return r}getHexCode(e){var t=this._colors.get(e);return t?Util.makeHexColor(...t):e}}class AnnotationEditorUIManager{#abortController=new AbortController;#activeEditor=null;#allEditors=new Map;#allLayers=new Map;#altTextManager=null;#annotationStorage=null;#changedExistingAnnotations=null;#commandManager=new CommandManager;#copyPasteAC=null;#currentDrawingSession=null;#currentPageIndex=0;#deletedAnnotationsElementIds=new Set;#draggingEditors=null;#editorTypes=null;#editorsToRescale=new Set;_editorUndoBar=null;#enableHighlightFloatingButton=!1;#enableUpdatedAddImage=!1;#enableNewAltTextWhenAddingImage=!1;#filterFactory=null;#focusMainContainerTimeoutId=null;#focusManagerAC=null;#highlightColors=null;#highlightWhenShiftUp=!1;#highlightToolbar=null;#idManager=new IdManager;#isEnabled=!1;#isWaiting=!1;#keyboardManagerAC=null;#lastActiveElement=null;#mainHighlightColorPicker=null;#mlManager=null;#mode=AnnotationEditorType.NONE;#selectedEditors=new Set;#selectedTextNode=null;#pageColors=null;#showAllStates=null;#previousStates={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#translation=[0,0];#translationTimeoutId=null;#container=null;#viewer=null;#updateModeCapability=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){var e=AnnotationEditorUIManager.prototype,t=e=>e.#container.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),r=(e,{target:t})=>!(t instanceof HTMLInputElement)||(t=t.type,"text"!==t&&"number"!==t),i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,{target:t})=>!(t instanceof HTMLButtonElement)&&e.#container.contains(t)&&!e.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,{target:t})=>!(t instanceof HTMLButtonElement)&&e.#container.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}constructor(e,t,r,i,a,o,n,s,l,c,p,d,u){var g=this._signal=this.#abortController.signal;this.#container=e,this.#viewer=t,this.#altTextManager=r,(this._eventBus=i)._on("editingaction",this.onEditingAction.bind(this),{signal:g}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),i._on("setpreference",this.onSetPreference.bind(this),{signal:g}),i._on("switchannotationeditorparams",e=>this.updateParams(e.type,e.value),{signal:g}),this.#addSelectionListener(),this.#addDragAndDropListeners(),this.#addKeyboardManager(),this.#annotationStorage=a.annotationStorage,this.#filterFactory=a.filterFactory,this.#pageColors=o,this.#highlightColors=n||null,this.#enableHighlightFloatingButton=s,this.#enableUpdatedAddImage=l,this.#enableNewAltTextWhenAddingImage=c,this.#mlManager=p||null,this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=d||null,this._supportsPinchToZoom=!1!==u}destroy(){this.#updateModeCapability?.resolve(),this.#updateModeCapability=null,this.#abortController?.abort(),this.#abortController=null,this._signal=null;for(var e of this.#allLayers.values())e.destroy();this.#allLayers.clear(),this.#allEditors.clear(),this.#editorsToRescale.clear(),this.#activeEditor=null,this.#selectedEditors.clear(),this.#commandManager.destroy(),this.#altTextManager?.destroy(),this.#highlightToolbar?.hide(),this.#highlightToolbar=null,this.#focusMainContainerTimeoutId&&(clearTimeout(this.#focusMainContainerTimeoutId),this.#focusMainContainerTimeoutId=null),this.#translationTimeoutId&&(clearTimeout(this.#translationTimeoutId),this.#translationTimeoutId=null),this._editorUndoBar?.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#mlManager}get useNewAltTextFlow(){return this.#enableUpdatedAddImage}get useNewAltTextWhenAddingImage(){return this.#enableNewAltTextWhenAddingImage}get hcmFilter(){return shadow(this,"hcmFilter",this.#pageColors?this.#filterFactory.addHCMFilter(this.#pageColors.foreground,this.#pageColors.background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(this.#container).direction)}get highlightColors(){return shadow(this,"highlightColors",this.#highlightColors?new Map(this.#highlightColors.split(",").map(e=>e.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#currentDrawingSession=e}setMainHighlightColorPicker(e){this.#mainHighlightColorPicker=e}editAltText(e,t=!1){this.#altTextManager?.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){"enableNewAltTextWhenAddingImage"===e&&(this.#enableNewAltTextWhenAddingImage=t)}onPageChanging({pageNumber:e}){this.#currentPageIndex=e-1}focusMainContainer(){this.#container.focus()}findParent(e,t){for(var r of this.#allLayers.values()){var{x:i,y:a,width:o,height:n}=r.div.getBoundingClientRect();if(i<=e&&e<=i+o&&a<=t&&t<=a+n)return r}return null}disableUserSelect(e=!1){this.#viewer.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#editorsToRescale.add(e)}removeShouldRescale(e){this.#editorsToRescale.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*PixelsPerInch.PDF_TO_CSS_UNITS;for(var t of this.#editorsToRescale)t.onScaleChanging();this.#currentDrawingSession?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#getAnchorElementForSelection({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#getLayerForTextLayer(e){var t,r=this.currentLayer;if(r.hasTextLayer(e))return r;for(t of this.#allLayers.values())if(t.hasTextLayer(e))return t;return null}highlightSelection(l=""){var c=document.getSelection();if(c&&!c.isCollapsed){let{anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:o}=c,n=c.toString();var p=this.#getAnchorElementForSelection(c).closest(".textLayer");let s=this.getSelectionBoxes(p);if(s){c.empty();let e=this.#getLayerForTextLayer(p),t=this.#mode===AnnotationEditorType.NONE;c=()=>{e?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:l,boxes:s,anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:o,text:n}),t&&this.showAllEditors("highlight",!0,!0)};t?this.switchToMode(AnnotationEditorType.HIGHLIGHT,c):c()}}}#displayHighlightToolbar(){var e,t=document.getSelection();t&&!t.isCollapsed&&(t=this.#getAnchorElementForSelection(t).closest(".textLayer"),e=this.getSelectionBoxes(t))&&(this.#highlightToolbar||=new HighlightToolbar(this),this.#highlightToolbar.show(t,e,"ltr"===this.direction))}addToAnnotationStorage(e){e.isEmpty()||!this.#annotationStorage||this.#annotationStorage.has(e.id)||this.#annotationStorage.setValue(e.id,e)}#selectionChange(){var e=document.getSelection();if(!e||e.isCollapsed)this.#selectedTextNode&&(this.#highlightToolbar?.hide(),this.#selectedTextNode=null,this.#dispatchUpdateStates({hasSelectedText:!1}));else{var i=e.anchorNode;if(i!==this.#selectedTextNode){e=this.#getAnchorElementForSelection(e).closest(".textLayer");if(e){if(this.#highlightToolbar?.hide(),this.#selectedTextNode=i,this.#dispatchUpdateStates({hasSelectedText:!0}),(this.#mode===AnnotationEditorType.HIGHLIGHT||this.#mode===AnnotationEditorType.NONE)&&(this.#mode===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#highlightWhenShiftUp=this.isShiftKeyDown,!this.isShiftKeyDown)){let t=this.#mode===AnnotationEditorType.HIGHLIGHT?this.#getLayerForTextLayer(e):null,r=(t?.toggleDrawing(),new AbortController);i=this.combinedSignal(r),e=e=>{"pointerup"===e.type&&0!==e.button||(r.abort(),t?.toggleDrawing(!0),"pointerup"===e.type&&this.#onSelectEnd("main_toolbar"))};window.addEventListener("pointerup",e,{signal:i}),window.addEventListener("blur",e,{signal:i})}}else this.#selectedTextNode&&(this.#highlightToolbar?.hide(),this.#selectedTextNode=null,this.#dispatchUpdateStates({hasSelectedText:!1}))}}}#onSelectEnd(e=""){this.#mode===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(e):this.#enableHighlightFloatingButton&&this.#displayHighlightToolbar()}#addSelectionListener(){document.addEventListener("selectionchange",this.#selectionChange.bind(this),{signal:this._signal})}#addFocusManager(){var e;this.#focusManagerAC||(this.#focusManagerAC=new AbortController,e=this.combinedSignal(this.#focusManagerAC),window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e}))}#removeFocusManager(){this.#focusManagerAC?.abort(),this.#focusManagerAC=null}blur(){if(this.isShiftKeyDown=!1,this.#highlightWhenShiftUp&&(this.#highlightWhenShiftUp=!1,this.#onSelectEnd("main_toolbar")),this.hasSelection){var e,t=document.activeElement;for(e of this.#selectedEditors)if(e.div.contains(t)){this.#lastActiveElement=[e,t],e._focusEventsAllowed=!1;break}}}focus(){if(this.#lastActiveElement){let[e,t]=this.#lastActiveElement;this.#lastActiveElement=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}}#addKeyboardManager(){var e;this.#keyboardManagerAC||(this.#keyboardManagerAC=new AbortController,e=this.combinedSignal(this.#keyboardManagerAC),window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e}))}#removeKeyboardManager(){this.#keyboardManagerAC?.abort(),this.#keyboardManagerAC=null}#addCopyPasteListeners(){var e;this.#copyPasteAC||(this.#copyPasteAC=new AbortController,e=this.combinedSignal(this.#copyPasteAC),document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e}))}#removeCopyPasteListeners(){this.#copyPasteAC?.abort(),this.#copyPasteAC=null}#addDragAndDropListeners(){var e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#addKeyboardManager(),this.#addCopyPasteListeners()}removeEditListeners(){this.#removeKeyboardManager(),this.#removeCopyPasteListeners()}dragOver(e){for(var{type:t}of e.dataTransfer.items)for(var r of this.#editorTypes)if(r.isHandlingMimeForPasting(t))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(var t of e.dataTransfer.items)for(var r of this.#editorTypes)if(r.isHandlingMimeForPasting(t.type))return r.paste(t,this.currentLayer),void e.preventDefault()}copy(e){if(e.preventDefault(),this.#activeEditor?.commitOrRemove(),this.hasSelection){var t,r=[];for(t of this.#selectedEditors){var i=t.serialize(!0);i&&r.push(i)}0!==r.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(r))}}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();var t,e=e.clipboardData;for(t of e.items)for(var r of this.#editorTypes)if(r.isHandlingMimeForPasting(t.type))return void r.paste(t,this.currentLayer);let i=e.getData("application/pdfjs");if(i){try{i=JSON.parse(i)}catch(e){return void warn(`paste: "${e.message}".`)}if(Array.isArray(i)){this.unselectAll();var a=this.currentLayer;try{let t=[];for(var o of i){var n=await a.deserialize(o);if(!n)return;t.push(n)}this.addCommands({cmd:()=>{for(var e of t)this.#addEditorToLayer(e);this.#selectEditors(t)},undo:()=>{for(var e of t)e.remove()},mustExec:!0})}catch(e){warn(`paste: "${e.message}".`)}}}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),this.#mode===AnnotationEditorType.NONE||this.isEditorHandlingKeyboard||AnnotationEditorUIManager._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,this.#highlightWhenShiftUp)&&(this.#highlightWhenShiftUp=!1,this.#onSelectEnd("main_toolbar"))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu")}}#dispatchUpdateStates(e){Object.entries(e).some(([e,t])=>this.#previousStates[e]!==t)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#previousStates,e)}),this.#mode===AnnotationEditorType.HIGHLIGHT)&&!1===e.hasSelectedEditor&&this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]])}#dispatchUpdateUI(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#addFocusManager(),this.#addCopyPasteListeners(),this.#dispatchUpdateStates({isEditing:this.#mode!==AnnotationEditorType.NONE,isEmpty:this.#isEmpty(),hasSomethingToUndo:this.#commandManager.hasSomethingToUndo(),hasSomethingToRedo:this.#commandManager.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#removeFocusManager(),this.#removeCopyPasteListeners(),this.#dispatchUpdateStates({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#editorTypes){this.#editorTypes=e;for(var t of this.#editorTypes)this.#dispatchUpdateUI(t.defaultPropertiesToUpdate)}}getId(){return this.#idManager.id}get currentLayer(){return this.#allLayers.get(this.#currentPageIndex)}getLayer(e){return this.#allLayers.get(e)}get currentPageIndex(){return this.#currentPageIndex}addLayer(e){this.#allLayers.set(e.pageIndex,e),this.#isEnabled?e.enable():e.disable()}removeLayer(e){this.#allLayers.delete(e.pageIndex)}async updateMode(e,t=null,r=!1){if(this.#mode!==e&&(!this.#updateModeCapability||(await this.#updateModeCapability.promise,this.#updateModeCapability))){if(this.#updateModeCapability=Promise.withResolvers(),(this.#mode=e)===AnnotationEditorType.NONE)this.setEditingState(!1),this.#disableAll(),this._editorUndoBar?.hide();else{this.setEditingState(!0),await this.#enableAll(),this.unselectAll();for(var i of this.#allLayers.values())i.updateMode(e);if(t)for(var a of this.#allEditors.values())a.annotationElementId===t?(this.setSelected(a),a.enterInEditMode()):a.unselect();else r&&this.addNewEditorFromKeyboard()}this.#updateModeCapability.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==this.#mode&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(this.#editorTypes){switch(e){case AnnotationEditorParamsType.CREATE:return void this.currentLayer.addNewEditor();case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:this.#mainHighlightColorPicker?.updateColor(t);break;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#showAllStates||=new Map).set(e,t),this.showAllEditors("highlight",t)}for(var r of this.#selectedEditors)r.updateParams(e,t);for(var i of this.#editorTypes)i.updateDefaultParams(e,t)}}showAllEditors(e,t,r=0){for(var i of this.#allEditors.values())i.editorType===e&&i.show(t);(this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#isWaiting!==e){this.#isWaiting=e;for(var t of this.#allLayers.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#enableAll(){if(!this.#isEnabled){this.#isEnabled=!0;var e,t,r=[];for(e of this.#allLayers.values())r.push(e.enable());await Promise.all(r);for(t of this.#allEditors.values())t.enable()}}#disableAll(){if(this.unselectAll(),this.#isEnabled){this.#isEnabled=!1;for(var e of this.#allLayers.values())e.disable();for(var t of this.#allEditors.values())t.disable()}}getEditors(e){var t,r=[];for(t of this.#allEditors.values())t.pageIndex===e&&r.push(t);return r}getEditor(e){return this.#allEditors.get(e)}addEditor(e){this.#allEditors.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#focusMainContainerTimeoutId&&clearTimeout(this.#focusMainContainerTimeoutId),this.#focusMainContainerTimeoutId=setTimeout(()=>{this.focusMainContainer(),this.#focusMainContainerTimeoutId=null},0)),this.#allEditors.delete(e.id),this.unselect(e),e.annotationElementId&&this.#deletedAnnotationsElementIds.has(e.annotationElementId)||this.#annotationStorage?.remove(e.id)}addDeletedAnnotationElement(e){this.#deletedAnnotationsElementIds.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#deletedAnnotationsElementIds.has(e)}removeDeletedAnnotationElement(e){this.#deletedAnnotationsElementIds.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#addEditorToLayer(e){var t=this.#allLayers.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#activeEditor!==e&&(this.#activeEditor=e)&&this.#dispatchUpdateUI(e.propertiesToUpdate)}get#lastSelectedEditor(){let e=null;for(e of this.#selectedEditors);return e}updateUI(e){this.#lastSelectedEditor===e&&this.#dispatchUpdateUI(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#dispatchUpdateUI(e.defaultPropertiesToUpdate)}toggleSelected(e){this.#selectedEditors.has(e)?(this.#selectedEditors.delete(e),e.unselect(),this.#dispatchUpdateStates({hasSelectedEditor:this.hasSelection})):(this.#selectedEditors.add(e),e.select(),this.#dispatchUpdateUI(e.propertiesToUpdate),this.#dispatchUpdateStates({hasSelectedEditor:!0}))}setSelected(e){this.#currentDrawingSession?.commitOrRemove();for(var t of this.#selectedEditors)t!==e&&t.unselect();this.#selectedEditors.clear(),this.#selectedEditors.add(e),e.select(),this.#dispatchUpdateUI(e.propertiesToUpdate),this.#dispatchUpdateStates({hasSelectedEditor:!0})}isSelected(e){return this.#selectedEditors.has(e)}get firstSelectedEditor(){return this.#selectedEditors.values().next().value}unselect(e){e.unselect(),this.#selectedEditors.delete(e),this.#dispatchUpdateStates({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#selectedEditors.size}get isEnterHandled(){return 1===this.#selectedEditors.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#commandManager.undo(),this.#dispatchUpdateStates({hasSomethingToUndo:this.#commandManager.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#isEmpty()}),this._editorUndoBar?.hide()}redo(){this.#commandManager.redo(),this.#dispatchUpdateStates({hasSomethingToUndo:!0,hasSomethingToRedo:this.#commandManager.hasSomethingToRedo(),isEmpty:this.#isEmpty()})}addCommands(e){this.#commandManager.add(e),this.#dispatchUpdateStates({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#isEmpty()})}cleanUndoStack(e){this.#commandManager.cleanType(e)}#isEmpty(){if(0===this.#allEditors.size)return!0;if(1===this.#allEditors.size)for(var e of this.#allEditors.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();var e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;let t=e?[e]:[...this.#selectedEditors];let r=()=>{for(var e of t)this.#addEditorToLayer(e)};this.addCommands({cmd:()=>{this._editorUndoBar?.show(r,1===t.length?t[0].editorType:t.length);for(var e of t)e.remove()},undo:r,mustExec:!0})}commitOrRemove(){this.#activeEditor?.commitOrRemove()}hasSomethingToControl(){return this.#activeEditor||this.hasSelection}#selectEditors(e){for(var t of this.#selectedEditors)t.unselect();this.#selectedEditors.clear();for(var r of e)r.isEmpty()||(this.#selectedEditors.add(r),r.select());this.#dispatchUpdateStates({hasSelectedEditor:this.hasSelection})}selectAll(){for(var e of this.#selectedEditors)e.commit();this.#selectEditors(this.#allEditors.values())}unselectAll(){if((!this.#activeEditor||(this.#activeEditor.commitOrRemove(),this.#mode===AnnotationEditorType.NONE))&&!this.#currentDrawingSession?.commitOrRemove()&&this.hasSelection){for(var e of this.#selectedEditors)e.unselect();this.#selectedEditors.clear(),this.#dispatchUpdateStates({hasSelectedEditor:!1})}}translateSelectedEditors(e,a,t=!1){if(t||this.commitOrRemove(),this.hasSelection){this.#translation[0]+=e,this.#translation[1]+=a;let[t,r]=this.#translation,i=[...this.#selectedEditors];var o;this.#translationTimeoutId&&clearTimeout(this.#translationTimeoutId),this.#translationTimeoutId=setTimeout(()=>{this.#translationTimeoutId=null,this.#translation[0]=this.#translation[1]=0,this.addCommands({cmd:()=>{for(var e of i)this.#allEditors.has(e.id)&&e.translateInPage(t,r)},undo:()=>{for(var e of i)this.#allEditors.has(e.id)&&e.translateInPage(-t,-r)},mustExec:!1})},1e3);for(o of i)o.translateInPage(e,a)}}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#draggingEditors=new Map;for(var e of this.#selectedEditors)this.#draggingEditors.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#draggingEditors)return!1;this.disableUserSelect(!1);let a=this.#draggingEditors,e=(this.#draggingEditors=null,!1);for(var[{x:t,y:r,pageIndex:i},o]of a)o.newX=t,o.newY=r,o.newPageIndex=i,e||=t!==o.savedX||r!==o.savedY||i!==o.savedPageIndex;if(!e)return!1;let n=(e,t,r,i)=>{var a;this.#allEditors.has(e.id)&&((a=this.#allLayers.get(i))?e._setParentAndPosition(a,t,r):(e.pageIndex=i,e.x=t,e.y=r))};return this.addCommands({cmd:()=>{for(var[e,{newX:t,newY:r,newPageIndex:i}]of a)n(e,t,r,i)},undo:()=>{for(var[e,{savedX:t,savedY:r,savedPageIndex:i}]of a)n(e,t,r,i)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#draggingEditors)for(var r of this.#draggingEditors.keys())r.drag(e,t)}rebuild(e){var t;null===e.parent?(t=this.getLayer(e.pageIndex))?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild()):e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===this.#selectedEditors.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#activeEditor===e}getActive(){return this.#activeEditor}getMode(){return this.#mode}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(r){if(!r)return null;var i=document.getSelection();for(let e=0,t=i.rangeCount;e<t;e++)if(!r.contains(i.getRangeAt(e).commonAncestorContainer))return null;let{x:a,y:o,width:n,height:s}=r.getBoundingClientRect(),l;switch(r.getAttribute("data-main-rotation")){case"90":l=(e,t,r,i)=>({x:(t-o)/s,y:1-(e+r-a)/n,width:i/s,height:r/n});break;case"180":l=(e,t,r,i)=>({x:1-(e+r-a)/n,y:1-(t+i-o)/s,width:r/n,height:i/s});break;case"270":l=(e,t,r,i)=>({x:1-(t+i-o)/s,y:(e-a)/n,width:i/s,height:r/n});break;default:l=(e,t,r,i)=>({x:(e-a)/n,y:(t-o)/s,width:r/n,height:i/s})}var c=[];for(let e=0,t=i.rangeCount;e<t;e++){var p=i.getRangeAt(e);if(!p.collapsed)for(var{x:d,y:u,width:g,height:m}of p.getClientRects())0!==g&&0!==m&&c.push(l(d,u,g,m))}return 0===c.length?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#changedExistingAnnotations||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#changedExistingAnnotations?.delete(e)}renderAnnotationElement(e){var t=this.#changedExistingAnnotations?.get(e.data.id);(t=t&&this.#annotationStorage.getRawValue(t))&&(this.#mode!==AnnotationEditorType.NONE||t.hasBeenModified)&&t.renderAnnotationElement(e)}}class AltText{#altText=null;#altTextDecorative=!1;#altTextButton=null;#altTextButtonLabel=null;#altTextTooltip=null;#altTextTooltipTimeout=null;#altTextWasFromKeyBoard=!1;#badge=null;#editor=null;#guessedText=null;#textWithDisclaimer=null;#useNewAltTextFlow=!1;static#l10nNewButton=null;static _l10n=null;constructor(e){this.#editor=e,this.#useNewAltTextFlow=e._uiManager.useNewAltTextFlow,AltText.#l10nNewButton||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){AltText._l10n??=e}async render(){let t=this.#altTextButton=document.createElement("button");t.className="altText",t.tabIndex="0";var e=this.#altTextButtonLabel=document.createElement("span"),e=(t.append(e),this.#useNewAltTextFlow?(t.classList.add("new"),t.setAttribute("data-l10n-id",AltText.#l10nNewButton.missing),e.setAttribute("data-l10n-id",AltText.#l10nNewButton["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label")),this.#editor._uiManager._signal);t.addEventListener("contextmenu",noContextMenu,{signal:e}),t.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:e});let r=e=>{e.preventDefault(),this.#editor._uiManager.editAltText(this.#editor),this.#useNewAltTextFlow&&this.#editor._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#label}})};return t.addEventListener("click",r,{capture:!0,signal:e}),t.addEventListener("keydown",e=>{e.target===t&&"Enter"===e.key&&(this.#altTextWasFromKeyBoard=!0,r(e))},{signal:e}),await this.#setState(),t}get#label(){return(this.#altText?"added":null===this.#altText&&this.guessedText&&"review")||"missing"}finish(){this.#altTextButton&&(this.#altTextButton.focus({focusVisible:this.#altTextWasFromKeyBoard}),this.#altTextWasFromKeyBoard=!1)}isEmpty(){return this.#useNewAltTextFlow?null===this.#altText:!this.#altText&&!this.#altTextDecorative}hasData(){return this.#useNewAltTextFlow?null!==this.#altText||!!this.#guessedText:this.isEmpty()}get guessedText(){return this.#guessedText}async setGuessedText(e){null===this.#altText&&(this.#guessedText=e,this.#textWithDisclaimer=await AltText._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#setState())}toggleAltTextBadge(e=!1){var t;!this.#useNewAltTextFlow||this.#altText?(this.#badge?.remove(),this.#badge=null):(this.#badge||((t=this.#badge=document.createElement("div")).className="noAltTextBadge",this.#editor.div.append(t)),this.#badge.classList.toggle("hidden",!e))}serialize(e){let t=this.#altText;return{altText:t=e||this.#guessedText!==t?t:this.#textWithDisclaimer,decorative:this.#altTextDecorative,guessedText:this.#guessedText,textWithDisclaimer:this.#textWithDisclaimer}}get data(){return{altText:this.#altText,decorative:this.#altTextDecorative}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:i,cancel:a=!1}){r&&(this.#guessedText=r,this.#textWithDisclaimer=i),this.#altText===e&&this.#altTextDecorative===t||(a||(this.#altText=e,this.#altTextDecorative=t),this.#setState())}toggle(e=!1){this.#altTextButton&&(!e&&this.#altTextTooltipTimeout&&(clearTimeout(this.#altTextTooltipTimeout),this.#altTextTooltipTimeout=null),this.#altTextButton.disabled=!e)}shown(){this.#editor._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#label}})}destroy(){this.#altTextButton?.remove(),this.#altTextButton=null,this.#altTextButtonLabel=null,this.#altTextTooltip=null,this.#badge?.remove(),this.#badge=null}async#setState(){var t=this.#altTextButton;if(t){if(this.#useNewAltTextFlow){if(t.classList.toggle("done",!!this.#altText),t.setAttribute("data-l10n-id",AltText.#l10nNewButton[this.#label]),this.#altTextButtonLabel?.setAttribute("data-l10n-id",AltText.#l10nNewButton[this.#label+"-label"]),!this.#altText)return void this.#altTextTooltip?.remove()}else{if(!this.#altText&&!this.#altTextDecorative)return t.classList.remove("done"),void this.#altTextTooltip?.remove();t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#altTextTooltip;if(!e){this.#altTextTooltip=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id="alt-text-tooltip-"+this.#editor.id;var r=this.#editor._uiManager._signal;r.addEventListener("abort",()=>{clearTimeout(this.#altTextTooltipTimeout),this.#altTextTooltipTimeout=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#altTextTooltipTimeout=setTimeout(()=>{this.#altTextTooltipTimeout=null,this.#altTextTooltip.classList.add("show"),this.#editor._reportTelemetry({action:"alt_text_tooltip"})},100)},{signal:r}),t.addEventListener("mouseleave",()=>{this.#altTextTooltipTimeout&&(clearTimeout(this.#altTextTooltipTimeout),this.#altTextTooltipTimeout=null),this.#altTextTooltip?.classList.remove("show")},{signal:r})}this.#altTextDecorative?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#altText),e.parentNode||t.append(e),this.#editor.getImageForAltText()?.setAttribute("aria-describedby",e.id)}}}class TouchManager{#container;#isPinching=!1;#isPinchingStopped=null;#isPinchingDisabled;#onPinchStart;#onPinching;#onPinchEnd;#signal;#touchInfo=null;#touchManagerAC;#touchMoveAC=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:o=null,signal:n}){this.#container=e,this.#isPinchingStopped=r,this.#isPinchingDisabled=t,this.#onPinchStart=i,this.#onPinching=a,this.#onPinchEnd=o,this.#touchManagerAC=new AbortController,this.#signal=AbortSignal.any([n,this.#touchManagerAC.signal]),e.addEventListener("touchstart",this.#onTouchStart.bind(this),{passive:!1,signal:this.#signal})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return shadow(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}#onTouchStart(r){var e,t;if(!(this.#isPinchingDisabled?.()||r.touches.length<2))if(this.#touchMoveAC||(this.#touchMoveAC=new AbortController,t={signal:AbortSignal.any([this.#signal,this.#touchMoveAC.signal]),passive:!1},(e=this.#container).addEventListener("touchmove",this.#onTouchMove.bind(this),t),e.addEventListener("touchend",this.#onTouchEnd.bind(this),t),e.addEventListener("touchcancel",this.#onTouchEnd.bind(this),t),this.#onPinchStart?.()),stopEvent(r),2!==r.touches.length||this.#isPinchingStopped?.())this.#touchInfo=null;else{let[e,t]=r.touches;e.identifier>t.identifier&&([e,t]=[t,e]),this.#touchInfo={touch0X:e.screenX,touch0Y:e.screenY,touch1X:t.screenX,touch1Y:t.screenY}}}#onTouchMove(r){if(this.#touchInfo&&2===r.touches.length){let[e,t]=r.touches;e.identifier>t.identifier&&([e,t]=[t,e]);var{screenX:i,screenY:a}=e,{screenX:o,screenY:n}=t,s=this.#touchInfo,{touch0X:l,touch0Y:c,touch1X:p,touch1Y:d}=s,p=p-l,l=d-c,d=Math.hypot(o-i,n-a)||1,c=Math.hypot(p,l)||1;!this.#isPinching&&Math.abs(c-d)<=TouchManager.MIN_TOUCH_DISTANCE_TO_PINCH||(s.touch0X=i,s.touch0Y=a,s.touch1X=o,s.touch1Y=n,r.preventDefault(),this.#isPinching?this.#onPinching?.([(i+o)/2,(a+n)/2],c,d):this.#isPinching=!0)}}#onTouchEnd(e){this.#touchMoveAC.abort(),this.#touchMoveAC=null,this.#onPinchEnd?.(),this.#touchInfo&&(e.preventDefault(),this.#touchInfo=null,this.#isPinching=!1)}destroy(){this.#touchManagerAC?.abort(),this.#touchManagerAC=null}}class AnnotationEditor{#accessibilityData=null;#allResizerDivs=null;#altText=null;#disabled=!1;#dragPointerId=null;#dragPointerType="";#keepAspectRatio=!1;#resizersDiv=null;#lastPointerCoords=null;#savedDimensions=null;#focusAC=null;#focusedResizerName="";#hasBeenClicked=!1;#initialRect=null;#isEditing=!1;#isInEditMode=!1;#isResizerEnabledForKeyboard=!1;#moveInDOMTimeout=null;#prevDragX=0;#prevDragY=0;#telemetryTimeouts=null;#touchManager=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#isDraggable=!1;#zIndex=AnnotationEditor._zIndex++;static _borderLineWidth=-1;static _colorManager=new ColorManager;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){var e=AnnotationEditor.prototype._resizeWithKeyboard,t=AnnotationEditorUIManager.TRANSLATE_SMALL,r=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],AnnotationEditor.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;var{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:o}}=this.parent.viewport,[t,r]=(this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[a,o],this.parentDimensions);this.x=e.x/t,this.y=e.y/r,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){var t=new FakeEditor({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){AnnotationEditor._l10n??=e,AnnotationEditor._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),-1===AnnotationEditor._borderLineWidth&&(e=getComputedStyle(document.documentElement),AnnotationEditor._borderLineWidth=parseFloat(e.getPropertyValue("--outline-width"))||0)}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#isDraggable}set _isDraggable(e){this.#isDraggable=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){var[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#zIndex}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#stopResizing(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#hasBeenClicked?this.#hasBeenClicked=!1:this.parent.setSelected(this))}focusout(e){this._focusEventsAllowed&&this.isAttachedToDOM&&!e.relatedTarget?.closest("#"+this.id)&&(e.preventDefault(),!this.parent?.isMultipleSelection)&&this.commitOrRemove()}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){var[a,o]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/a,this.y=(t+i)/o,this.fixAndSetPosition()}#translate([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#translate(this.parentDimensions,e,t)}translateInPage(e,t){this.#initialRect||=[this.x,this.y,this.width,this.height],this.#translate(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#initialRect||=[this.x,this.y,this.width,this.height];var{div:r,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=t/a,this.parent&&(this.x<0||1<this.x||this.y<0||1<this.y)){let{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:n}=this;var[e,i]=this.getBaseTranslation(),t=(o+=e,n+=i,r).style;t.left=(100*o).toFixed(2)+"%",t.top=(100*n).toFixed(2)+"%",this._onTranslating(o,n),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#initialRect&&(this.#initialRect[0]!==this.x||this.#initialRect[1]!==this.y)}get _hasBeenResized(){return!!this.#initialRect&&(this.#initialRect[2]!==this.width||this.#initialRect[3]!==this.height)}getBaseTranslation(){var[e,t]=this.parentDimensions,r=AnnotationEditor._borderLineWidth,i=r/e,a=r/t;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){var{div:{style:t},pageDimensions:[r,i]}=this;let{x:a,y:o,width:n,height:s}=this;if(n*=r,s*=i,a*=r,o*=i,this._mustFixPosition)switch(e){case 0:a=Math.max(0,Math.min(r-n,a)),o=Math.max(0,Math.min(i-s,o));break;case 90:a=Math.max(0,Math.min(r-s,a)),o=Math.min(i,Math.max(n,o));break;case 180:a=Math.min(r,Math.max(n,a)),o=Math.min(i,Math.max(s,o));break;case 270:a=Math.min(r,Math.max(s,a)),o=Math.max(0,Math.min(i-n,o))}this.x=a/=r,this.y=o/=i;var[e,l]=this.getBaseTranslation();a+=e,o+=l,t.left=(100*a).toFixed(2)+"%",t.top=(100*o).toFixed(2)+"%",this.moveInDOM()}static#rotatePoint(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return AnnotationEditor.#rotatePoint(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return AnnotationEditor.#rotatePoint(e,t,360-this.parentRotation)}#getRotationMatrix(e){switch(e){case 90:var[t,r]=this.pageDimensions;return[0,-t/r,r/t,0];case 180:return[-1,0,0,-1];case 270:var[r,t]=this.pageDimensions;return[0,r/t,-t/r,0];default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){var{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){var[r,i]=this.parentDimensions,a=this.div.style;a.width=(100*e/r).toFixed(2)+"%",this.#keepAspectRatio||(a.height=(100*t/i).toFixed(2)+"%")}fixDims(){var e,t,r=this.div.style,{height:i,width:a}=r,o=a.endsWith("%"),n=!this.#keepAspectRatio&&i.endsWith("%");o&&n||([e,t]=this.parentDimensions,o||(r.width=(100*parseFloat(a)/e).toFixed(2)+"%"),this.#keepAspectRatio)||n||(r.height=(100*parseFloat(i)/t).toFixed(2)+"%")}getInitialTranslation(){return[0,0]}#createResizers(){if(!this.#resizersDiv){this.#resizersDiv=document.createElement("div"),this.#resizersDiv.classList.add("resizers");var e,t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],r=this._uiManager._signal;for(e of t){var i=document.createElement("div");this.#resizersDiv.append(i),i.classList.add("resizer",e),i.setAttribute("data-resizer-name",e),i.addEventListener("pointerdown",this.#resizerPointerdown.bind(this,e),{signal:r}),i.addEventListener("contextmenu",noContextMenu,{signal:r}),i.tabIndex=-1}this.div.prepend(this.#resizersDiv)}}#resizerPointerdown(a,o){o.preventDefault();var n=util_FeatureTest.platform.isMac;if(!(0!==o.button||o.ctrlKey&&n)){this.#altText?.toggle(!1);let e=this._isDraggable,t=(this._isDraggable=!1,this.#lastPointerCoords=[o.screenX,o.screenY],new AbortController);n=this._uiManager.combinedSignal(t);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#resizerPointermove.bind(this,a),{passive:!0,capture:!0,signal:n}),window.addEventListener("touchmove",stopEvent,{passive:!1,signal:n}),window.addEventListener("contextmenu",noContextMenu,{signal:n}),this.#savedDimensions={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let r=this.parent.div.style.cursor,i=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(o.target).cursor;a=()=>{t.abort(),this.parent.togglePointerEvents(!0),this.#altText?.toggle(!0),this._isDraggable=e,this.parent.div.style.cursor=r,this.div.style.cursor=i,this.#addResizeToUndoStack()};window.addEventListener("pointerup",a,{signal:n}),window.addEventListener("blur",a,{signal:n})}}#resize(e,t,r,i){this.width=r,this.height=i,this.x=e,this.y=t;var[e,t]=this.parentDimensions;this.setDims(e*r,t*i),this.fixAndSetPosition(),this._onResized()}_onResized(){}#addResizeToUndoStack(){var e,t,r,i,a,o,n,s;this.#savedDimensions&&({savedX:e,savedY:t,savedWidth:r,savedHeight:i}=this.#savedDimensions,this.#savedDimensions=null,a=this.x,o=this.y,n=this.width,s=this.height,a===e&&o===t&&n===r&&s===i||this.addCommands({cmd:this.#resize.bind(this,a,o,n,s),undo:this.#resize.bind(this,e,t,r,i),mustExec:!0}))}static _round(e){return Math.round(1e4*e)/1e4}#resizerPointermove(e,t){var[r,i]=this.parentDimensions,a=this.x,o=this.y,n=this.width,s=this.height,l=AnnotationEditor.MIN_SIZE/r,c=AnnotationEditor.MIN_SIZE/i;let p=this.#getRotationMatrix(this.rotation);var d=(e,t)=>[p[0]*e+p[2]*t,p[1]*e+p[3]*t];let u=this.#getRotationMatrix(360-this.rotation);let g,m,h=!1,_=!1;switch(e){case"topLeft":h=!0,g=(e,t)=>[0,0],m=(e,t)=>[e,t];break;case"topMiddle":g=(e,t)=>[e/2,0],m=(e,t)=>[e/2,t];break;case"topRight":h=!0,g=(e,t)=>[e,0],m=(e,t)=>[0,t];break;case"middleRight":_=!0,g=(e,t)=>[e,t/2],m=(e,t)=>[0,t/2];break;case"bottomRight":h=!0,g=(e,t)=>[e,t],m=(e,t)=>[0,0];break;case"bottomMiddle":g=(e,t)=>[e/2,t],m=(e,t)=>[e/2,0];break;case"bottomLeft":h=!0,g=(e,t)=>[0,t],m=(e,t)=>[e,0];break;case"middleLeft":_=!0,g=(e,t)=>[0,t/2],m=(e,t)=>[e,t/2]}var f,v,e=g(n,s),y=m(n,s),P=d(...y),a=AnnotationEditor._round(a+P[0]),o=AnnotationEditor._round(o+P[1]);let S=1,w=1,b,C;t.fromKeyboard?{deltaX:b,deltaY:C}=t:({screenX:t,screenY:k}=t,[f,v]=this.#lastPointerCoords,[b,C]=this.screenToPageTranslation(t-f,k-v),this.#lastPointerCoords[0]=t,this.#lastPointerCoords[1]=k),[b,C]=(f=b/r,v=C/i,[u[0]*f+u[2]*v,u[1]*f+u[3]*v]),h?(t=Math.hypot(n,s),S=w=Math.max(Math.min(Math.hypot(y[0]-e[0]-b,y[1]-e[1]-C)/t,1/n,1/s),l/n,c/s)):_?S=Math.max(l,Math.min(1,Math.abs(y[0]-e[0]-b)))/n:w=Math.max(c,Math.min(1,Math.abs(y[1]-e[1]-C)))/s;var k=AnnotationEditor._round(n*S),t=AnnotationEditor._round(s*w),l=a-(P=d(...m(k,t)))[0],c=o-P[1];this.#initialRect||=[this.x,this.y,this.width,this.height],this.width=k,this.height=t,this.x=l,this.y=c,this.setDims(r*k,i*t),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#altText?.finish()}async addEditToolbar(){return this._editToolbar||this.#isInEditMode||(this._editToolbar=new EditorToolbar(this),this.div.append(this._editToolbar.render()),this.#altText&&await this._editToolbar.addAltText(this.#altText)),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#altText?.destroy())}addContainer(e){var t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#altText||(AltText.initialize(AnnotationEditor._l10n),this.#altText=new AltText(this),this.#accessibilityData&&(this.#altText.data=this.#accessibilityData,this.#accessibilityData=null),await this.addEditToolbar())}get altTextData(){return this.#altText?.data}set altTextData(e){this.#altText&&(this.#altText.data=e)}get guessedAltText(){return this.#altText?.guessedText}async setGuessedAltText(e){await this.#altText?.setGuessedText(e)}serializeAltText(e){return this.#altText?.serialize(e)}hasAltText(){return!!this.#altText&&!this.#altText.isEmpty()}hasAltTextData(){return this.#altText?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#disabled?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#addFocusListeners();var[e,t]=this.parentDimensions,[e,t]=(this.parentRotation%180!=0&&(this.div.style.maxWidth=(100*t/e).toFixed(2)+"%",this.div.style.maxHeight=(100*e/t).toFixed(2)+"%"),this.getInitialTranslation());return this.translate(e,t),bindEvents(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#touchManager||=new TouchManager({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#touchPinchStartCallback.bind(this),onPinching:this.#touchPinchCallback.bind(this),onPinchEnd:this.#touchPinchEndCallback.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),this.div}#touchPinchStartCallback(){this.#savedDimensions={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#altText?.toggle(!1),this.parent.togglePointerEvents(!1)}#touchPinchCallback(e,t,i){i=i/t*.7+1-.7;if(1!=i){let r=this.#getRotationMatrix(this.rotation);var t=(e,t)=>[r[0]*e+r[2]*t,r[1]*e+r[3]*t],[a,o]=this.parentDimensions,n=this.x,s=this.y,l=this.width,c=this.height,p=AnnotationEditor.MIN_SIZE/a,d=AnnotationEditor.MIN_SIZE/o,i=Math.max(Math.min(i,1/l,1/c),p/l,d/c),p=AnnotationEditor._round(l*i),d=AnnotationEditor._round(c*i);p===l&&d===c||(this.#initialRect||=[n,s,l,c],i=t(l/2,c/2),l=AnnotationEditor._round(n+i[0]),c=AnnotationEditor._round(s+i[1]),n=t(p/2,d/2),this.x=l-n[0],this.y=c-n[1],this.width=p,this.height=d,this.setDims(a*p,o*d),this.fixAndSetPosition(),this._onResizing())}}#touchPinchEndCallback(){this.#altText?.toggle(!0),this.parent.togglePointerEvents(!0),this.#addResizeToUndoStack()}pointerdown(e){var t=util_FeatureTest.platform.isMac;0!==e.button||e.ctrlKey&&t?e.preventDefault():(this.#hasBeenClicked=!0,this._isDraggable?this.#setUpDragSession(e):this.#selectOnPointerEvent(e))}get isSelected(){return this._uiManager.isSelected(this)}#selectOnPointerEvent(e){var t=util_FeatureTest.platform.isMac;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#setUpDragSession(e){var t=this.isSelected;this._uiManager.setUpDragSession();let a=!1,r=new AbortController;var i=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:i};let n=e=>{r.abort(),this.#dragPointerId=null,this.#hasBeenClicked=!1,this._uiManager.endDragSession()||this.#selectOnPointerEvent(e),a&&this._onStopDragging()};t&&(this.#prevDragX=e.clientX,this.#prevDragY=e.clientY,this.#dragPointerId=e.pointerId,this.#dragPointerType=e.pointerType,window.addEventListener("pointermove",e=>{a||(a=!0,this._onStartDragging());var{clientX:t,clientY:r,pointerId:i}=e;i!==this.#dragPointerId?stopEvent(e):([i,e]=this.screenToPageTranslation(t-this.#prevDragX,r-this.#prevDragY),this.#prevDragX=t,this.#prevDragY=r,this._uiManager.dragSelectedEditors(i,e))},o),window.addEventListener("touchmove",stopEvent,o),window.addEventListener("pointerdown",e=>{e.pointerType===this.#dragPointerType&&(this.#touchManager||e.isPrimary)&&n(e),stopEvent(e)},o));t=e=>{(this.#dragPointerId&&this.#dragPointerId!==e.pointerId?stopEvent:n)(e)};window.addEventListener("pointerup",t,{signal:i}),window.addEventListener("blur",t,{signal:i})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#moveInDOMTimeout&&clearTimeout(this.#moveInDOMTimeout),this.#moveInDOMTimeout=setTimeout(()=>{this.#moveInDOMTimeout=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){var i=this.parentScale,[a,o]=this.pageDimensions,[n,s]=this.pageTranslation,l=e/i,c=t/i,p=this.x*a,d=this.y*o,u=this.width*a,g=this.height*o;switch(r){case 0:return[p+l+n,o-d-c-g+s,p+l+u+n,o-d-c+s];case 90:return[p+c+n,o-d+l+s,p+c+g+n,o-d+l+u+s];case 180:return[p-l-u+n,o-d+c+s,p-l+n,o-d+c+g+s];case 270:return[p-c-g+n,o-d-l-u+s,p-c+n,o-d-l+s];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){var[r,i,a,o]=e,n=a-r,s=o-i;switch(this.rotation){case 0:return[r,t-o,n,s];case 90:return[r,t-i,s,n];case 180:return[a,t-i,n,s];case 270:return[a,t-o,s,n];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){this.#isInEditMode=!0}disableEditMode(){this.#isInEditMode=!1}isInEditMode(){return this.#isInEditMode}shouldGetKeyboardEvents(){return this.#isResizerEnabledForKeyboard}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){var{top:e,left:t,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:o}=window;return t<o&&0<i&&e<a&&0<r}#addFocusListeners(){var e;!this.#focusAC&&this.div&&(this.#focusAC=new AbortController,e=this._uiManager.combinedSignal(this.#focusAC),this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e}))}rebuild(){this.#addFocusListeners()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=0,t){unreachable("An editor must be serializable")}static async deserialize(e,t,r){var t=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r}),[r,i]=(t.rotation=e.rotation,t.#accessibilityData=e.accessibilityData,t.pageDimensions),[e,a,o,n]=t.getRectInCurrentCoords(e.rect,i);return t.x=e/r,t.y=a/i,t.width=o/r,t.height=n/i,t}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.#focusAC?.abort(),this.#focusAC=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#moveInDOMTimeout&&(clearTimeout(this.#moveInDOMTimeout),this.#moveInDOMTimeout=null),this.#stopResizing(),this.removeEditToolbar(),this.#telemetryTimeouts){for(var e of this.#telemetryTimeouts.values())clearTimeout(e);this.#telemetryTimeouts=null}this.parent=null,this.#touchManager?.destroy(),this.#touchManager=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#createResizers(),this.#resizersDiv.classList.remove("hidden"),bindEvents(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(this.isResizable&&e.target===this.div&&"Enter"===e.key){this._uiManager.setSelected(this),this.#savedDimensions={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};var r=this.#resizersDiv.children;if(!this.#allResizerDivs){this.#allResizerDivs=Array.from(r);var i,a=this.#resizerKeydown.bind(this),o=this.#resizerBlur.bind(this),n=this._uiManager._signal;for(i of this.#allResizerDivs){var s=i.getAttribute("data-resizer-name");i.setAttribute("role","spinbutton"),i.addEventListener("keydown",a,{signal:n}),i.addEventListener("blur",o,{signal:n}),i.addEventListener("focus",this.#resizerFocus.bind(this,s),{signal:n}),i.setAttribute("data-l10n-id",AnnotationEditor._l10nResizer[s])}}var l,c=this.#allResizerDivs[0];let t=0;for(l of r){if(l===c)break;t++}var p=(360-this.rotation+this.parentRotation)%360/90*(this.#allResizerDivs.length/4);if(p!==t){if(p<t)for(let e=0;e<t-p;e++)this.#resizersDiv.append(this.#resizersDiv.firstChild);else if(p>t)for(let e=0;e<p-t;e++)this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);let e=0;for(var d of r){var u=this.#allResizerDivs[e++].getAttribute("data-resizer-name");d.setAttribute("data-l10n-id",AnnotationEditor._l10nResizer[u])}}this.#setResizerTabIndex(0),this.#isResizerEnabledForKeyboard=!0,this.#resizersDiv.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}}#resizerKeydown(e){AnnotationEditor._resizerKeyboardManager.exec(this,e)}#resizerBlur(e){this.#isResizerEnabledForKeyboard&&e.relatedTarget?.parentNode!==this.#resizersDiv&&this.#stopResizing()}#resizerFocus(e){this.#focusedResizerName=this.#isResizerEnabledForKeyboard?e:""}#setResizerTabIndex(e){if(this.#allResizerDivs)for(var t of this.#allResizerDivs)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#isResizerEnabledForKeyboard&&this.#resizerPointermove(this.#focusedResizerName,{deltaX:e,deltaY:t,fromKeyboard:!0})}#stopResizing(){this.#isResizerEnabledForKeyboard=!1,this.#setResizerTabIndex(-1),this.#addResizeToUndoStack()}_stopResizingWithKeyboard(){this.#stopResizing(),this.div.focus()}select(){this.makeResizable(),this.div?.classList.add("selectedEditor"),this._editToolbar?(this._editToolbar?.show(),this.#altText?.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()})}unselect(){this.#resizersDiv?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#altText?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#isEditing}set isEditing(e){this.#isEditing=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#keepAspectRatio=!0;var r=this.div.style;r.aspectRatio=e/t,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,r=!1){if(r){this.#telemetryTimeouts||=new Map;let e=t.action;r=this.#telemetryTimeouts.get(e);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#telemetryTimeouts.delete(e),0===this.#telemetryTimeouts.size&&(this.#telemetryTimeouts=null)},AnnotationEditor._telemetryTimeout),void this.#telemetryTimeouts.set(e,r)}else t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#disabled=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#disabled=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");var r;return t?"CANVAS"===t.nodeName&&(r=t,(t=document.createElement("div")).classList.add("annotationContent",this.editorType),r.before(t)):((t=document.createElement("div")).classList.add("annotationContent",this.editorType),e.container.prepend(t)),t}resetAnnotationElement(e){e=e.container.firstChild;"DIV"===e?.nodeName&&e.classList.contains("annotationContent")&&e.remove()}}class FakeEditor extends AnnotationEditor{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}let SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(e){this.h1=e?4294967295&e:SEED,this.h2=e?4294967295&e:SEED}update(r){let i,a;if("string"==typeof r){i=new Uint8Array(2*r.length);for(let e=a=0,t=r.length;e<t;e++){var o=r.charCodeAt(e);o<=255?i[a++]=o:(i[a++]=o>>>8,i[a++]=255&o)}}else{if(!ArrayBuffer.isView(r))throw new Error("Invalid data format, must be a string or TypedArray.");i=r.slice(),a=i.byteLength}var t=a>>2,e=a-4*t,n=new Uint32Array(i.buffer,0,t);let s=0,l,c=this.h1,p=this.h2;var d=3432918353,u=461845907,g=d&MASK_LOW,m=u&MASK_LOW;for(let e=0;e<t;e++)1&e?(s=(s=(s=(s=n[e])*d&MASK_HIGH|s*g&MASK_LOW)<<15|s>>>17)*u&MASK_HIGH|s*m&MASK_LOW,c=5*(c=(c^=s)<<13|c>>>19)+3864292196):(l=(l=(l=(l=n[e])*d&MASK_HIGH|l*g&MASK_LOW)<<15|l>>>17)*u&MASK_HIGH|l*m&MASK_LOW,p=5*(p=(p^=l)<<13|p>>>19)+3864292196);switch(s=0,e){case 3:s^=i[4*t+2]<<16;case 2:s^=i[4*t+1]<<8;case 1:s=(s=(s=(s^=i[4*t])*d&MASK_HIGH|s*g&MASK_LOW)<<15|s>>>17)*u&MASK_HIGH|s*m&MASK_LOW,1&t?c^=s:p^=s}this.h1=c,this.h2=p}hexdigest(){var e=this.h1,t=this.h2,e=3981806797*(e^=t>>>1)&MASK_HIGH|36045*e&MASK_LOW;return e=444984403*(e^=(t=4283543511*t&MASK_HIGH|(2950163797*(t<<16|e>>>16)&MASK_HIGH)>>>16)>>>1)&MASK_HIGH|60499*e&MASK_LOW,((e^=(t=3301882366*t&MASK_HIGH|(3120437893*(t<<16|e>>>16)&MASK_HIGH)>>>16)>>>1)>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}let SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});class AnnotationStorage{#modified=!1;#modifiedIds=null;#storage=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){e=this.#storage.get(e);return void 0===e?t:Object.assign(t,e)}getRawValue(e){return this.#storage.get(e)}remove(e){if(this.#storage.delete(e),0===this.#storage.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(var t of this.#storage.values())if(t instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(e,t){var r=this.#storage.get(e);let i=!1;if(void 0!==r)for(var[a,o]of Object.entries(t))r[a]!==o&&(i=!0,r[a]=o);else i=!0,this.#storage.set(e,t);i&&this.#setModified(),t instanceof AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#storage.has(e)}getAll(){return 0<this.#storage.size?objectFromMap(this.#storage):null}setAll(e){for(var[t,r]of Object.entries(e))this.setValue(t,r)}get size(){return this.#storage.size}#setModified(){this.#modified||(this.#modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#modified&&(this.#modified=!1,"function"==typeof this.onResetModified)&&this.onResetModified()}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(0===this.#storage.size)return SerializableEmpty;var e,t,r=new Map,i=new MurmurHash3_64,a=[],o=Object.create(null);let n=!1;for([e,t]of this.#storage){var s=t instanceof AnnotationEditor?t.serialize(!1,o):t;s&&(r.set(e,s),i.update(e+":"+JSON.stringify(s)),n||=!!s.bitmap)}if(n)for(var l of r.values())l.bitmap&&a.push(l.bitmap);return 0<r.size?{map:r,hash:i.hexdigest(),transfer:a}:SerializableEmpty}get editorStats(){let e=null;var t,r,i,a=new Map;for(t of this.#storage.values())if(t instanceof AnnotationEditor){var o=t.telemetryFinalData;if(o){var n,s,l=o.type,c=(a.has(l)||a.set(l,Object.getPrototypeOf(t).constructor),(e||=Object.create(null))[l]||=new Map);for([n,s]of Object.entries(o))if("type"!==n){let e=c.get(n);e||(e=new Map,c.set(n,e));var p=e.get(s)??0;e.set(s,p+1)}}}for([r,i]of a)e[r]=i.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){this.#modifiedIds=null}get modifiedIds(){if(this.#modifiedIds)return this.#modifiedIds;var e,t=[];for(e of this.#storage.values())e instanceof AnnotationEditor&&e.annotationElementId&&e.serialize()&&t.push(e.annotationElementId);return this.#modifiedIds={ids:new Set(t),hash:t.join(",")}}}class PrintAnnotationStorage extends AnnotationStorage{#serializable;constructor(e){super();var{map:e,hash:t,transfer:r}=e.serializable,e=structuredClone(e,r?{transfer:r}:null);this.#serializable={map:e,hash:t,transfer:r}}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#serializable}get modifiedIds(){return shadow(this,"modifiedIds",{ids:new Set,hash:""})}}class FontLoader{#systemFonts=new Set;constructor({ownerDocument:e=globalThis.document}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));var t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(var e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#systemFonts.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(e&&!this.#systemFonts.has(e.loadedName))if(assert(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){var{loadedName:r,src:i,style:a}=e,i=new FontFace(r,i,a);this.addNativeFontFace(i);try{await i.load(),this.#systemFonts.add(r),t?.(e)}catch{warn(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(i)}}else unreachable("Not implemented: loadSystemFont without the Font Loading API.")}async bind(t){if(!(t.attached||t.missingFile&&!t.systemFontInfo))if(t.attached=!0,t.systemFontInfo)await this.loadSystemFont(t);else if(this.isFontLoadingAPISupported){var r=t.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(e){throw warn(`Failed to load font '${r.family}': '${e}'.`),t.disableFontFace=!0,e}}}else{r=t.createFontFaceRule();r&&(this.insertRule(r),this.isSyncFontLoadingSupported||await new Promise(e=>{e=this._queueLoadingCallback(e);this._prepareFontLoadEvent(t,e)}))}}get isFontLoadingAPISupported(){return shadow(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){let e=!1;return shadow(this,"isSyncFontLoadingSupported",e=isNodeJS||"undefined"!=typeof navigator&&"string"==typeof navigator?.userAgent&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent)?!0:e)}_queueLoadingCallback(e){let t=this.loadingRequests,r={done:!1,complete:function(){for(assert(!r.done,"completeRequest() cannot be called twice."),r.done=!0;0<t.length&&t[0].done;){var e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(r),r}get _loadTestFont(){return shadow(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function r(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,r,i){return e.substring(0,t)+i+e.substring(t+r)}let a,o;var n=this._document.createElement("canvas");n.width=1,n.height=1;let s=n.getContext("2d"),l=0;function c(e,t){30<++l?(warn("Load test font never loaded."),t()):(s.font="30px "+e,s.fillText(".",0,20),0<s.getImageData(0,0,1,1).data[3]?t():setTimeout(c.bind(null,e,t)))}var p="lt"+Date.now()+this.loadTestFontId++;let d=r(n=i(this._loadTestFont,976,p.length,p),16);for(a=0,o=p.length-3;a<o;a+=4)d=d-1482184792+r(p,a)|0;n=i(n,16,4,string32(d=a<p.length?d-1482184792+r(p+"XXX",a)|0:d));var u,n=`url(data:font/opentype;base64,${btoa(n)});`;this.insertRule(`@font-face {font-family:"${p}";src:${n}}`);let g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(u of[e.loadedName,p]){var m=this._document.createElement("span");m.textContent="Hi",m.style.fontFamily=u,g.append(m)}this._document.body.append(g),c(p,()=>{g.remove(),t.complete()})}}class FontFaceObject{constructor(e,{disableFontFace:t=!1,fontExtraProperties:r=!1,inspectFont:i=null}){for(var a in this.compiledGlyphs=Object.create(null),e)this[a]=e[a];this.disableFontFace=!0===t,this.fontExtraProperties=!0===r,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;var t;return e=this.cssFontInfo?(t={weight:this.cssFontInfo.fontWeight},this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),new FontFace(this.cssFontInfo.fontFamily,this.data,t)):new FontFace(this.loadedName,this.data,{}),this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;var t=`url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;let r;if(this.cssFontInfo){let e=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(e+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${e}src:${t}}`}else r=`@font-face {font-family:"${this.loadedName}";src:${t}}`;return this._inspectFont?.(this,t),r}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];var r=this.loadedName+"_path_"+t;let i;try{i=e.get(r)}catch(e){warn(`getPathGenerator - ignoring character: "${e}".`)}var a=new Path2D(i||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=a}}let CallbackKind={DATA:1,ERROR:2},StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function onFn(){}function wrapReason(e){if(e instanceof AbortException||e instanceof InvalidPDFException||e instanceof MissingPDFException||e instanceof PasswordException||e instanceof UnexpectedResponseException||e instanceof UnknownErrorException)return e;switch(e instanceof Error||"object"==typeof e&&null!==e||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new AbortException(e.message);case"InvalidPDFException":return new InvalidPDFException(e.message);case"MissingPDFException":return new MissingPDFException(e.message);case"PasswordException":return new PasswordException(e.message,e.code);case"UnexpectedResponseException":return new UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new UnknownErrorException(e.message,e.details)}return new UnknownErrorException(e.message,e.toString())}class MessageHandler{#messageAC=new AbortController;constructor(e,t,r){this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#onMessage.bind(this),{signal:this.#messageAC.signal})}#onMessage({data:a}){if(a.targetName===this.sourceName)if(a.stream)this.#processStreamMessage(a);else if(a.callback){var e=a.callbackId,t=this.callbackCapabilities[e];if(!t)throw new Error("Cannot resolve callback "+e);if(delete this.callbackCapabilities[e],a.callback===CallbackKind.DATA)t.resolve(a.data);else{if(a.callback!==CallbackKind.ERROR)throw new Error("Unexpected callback case");t.reject(wrapReason(a.reason))}}else{e=this.actionHandler[a.action];if(!e)throw new Error("Unknown action from worker: "+a.action);if(a.callbackId){let t=this.sourceName,r=a.sourceName,i=this.comObj;void Promise.try(e,a.data).then(function(e){i.postMessage({sourceName:t,targetName:r,callback:CallbackKind.DATA,callbackId:a.callbackId,data:e})},function(e){i.postMessage({sourceName:t,targetName:r,callback:CallbackKind.ERROR,callbackId:a.callbackId,reason:wrapReason(e)})})}else a.streamId?this.#createStreamSink(a):e(a.data)}}on(e,t){var r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){var i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(e){a.reject(e)}return a.promise}sendWithStream(r,i,e,a){let o=this.streamId++,n=this.sourceName,s=this.targetName,l=this.comObj;return new ReadableStream({start:e=>{var t=Promise.withResolvers();return this.streamControllers[o]={controller:e,startCall:t,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:n,targetName:s,action:r,streamId:o,data:i,desiredSize:e.desiredSize},a),t.promise},pull:e=>{var t=Promise.withResolvers();return this.streamControllers[o].pullCall=t,l.postMessage({sourceName:n,targetName:s,stream:StreamKind.PULL,streamId:o,desiredSize:e.desiredSize}),t.promise},cancel:e=>{assert(e instanceof Error,"cancel must have a valid reason");var t=Promise.withResolvers();return this.streamControllers[o].cancelCall=t,this.streamControllers[o].isClosed=!0,l.postMessage({sourceName:n,targetName:s,stream:StreamKind.CANCEL,streamId:o,reason:wrapReason(e)}),t.promise}},e)}#createStreamSink(e){let a=e.streamId,o=this.sourceName,n=e.sourceName,s=this.comObj,t=this,r=this.actionHandler[e.action];var i={enqueue(e,t=1,r){var i;this.isCancelled||(i=this.desiredSize,this.desiredSize-=t,0<i&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:o,targetName:n,stream:StreamKind.ENQUEUE,streamId:a,chunk:e},r))},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:o,targetName:n,stream:StreamKind.CLOSE,streamId:a}),delete t.streamSinks[a])},error(e){assert(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:o,targetName:n,stream:StreamKind.ERROR,streamId:a,reason:wrapReason(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};i.sinkCapability.resolve(),i.ready=i.sinkCapability.promise,this.streamSinks[a]=i,Promise.try(r,e.data,i).then(function(){s.postMessage({sourceName:o,targetName:n,stream:StreamKind.START_COMPLETE,streamId:a,success:!0})},function(e){s.postMessage({sourceName:o,targetName:n,stream:StreamKind.START_COMPLETE,streamId:a,reason:wrapReason(e)})})}#processStreamMessage(e){let t=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj;var o,n=this.streamControllers[t],s=this.streamSinks[t];switch(e.stream){case StreamKind.START_COMPLETE:e.success?n.startCall.resolve():n.startCall.reject(wrapReason(e.reason));break;case StreamKind.PULL_COMPLETE:e.success?n.pullCall.resolve():n.pullCall.reject(wrapReason(e.reason));break;case StreamKind.PULL:s?(s.desiredSize<=0&&0<e.desiredSize&&s.sinkCapability.resolve(),s.desiredSize=e.desiredSize,Promise.try(s.onPull||onFn).then(function(){a.postMessage({sourceName:r,targetName:i,stream:StreamKind.PULL_COMPLETE,streamId:t,success:!0})},function(e){a.postMessage({sourceName:r,targetName:i,stream:StreamKind.PULL_COMPLETE,streamId:t,reason:wrapReason(e)})})):a.postMessage({sourceName:r,targetName:i,stream:StreamKind.PULL_COMPLETE,streamId:t,success:!0});break;case StreamKind.ENQUEUE:assert(n,"enqueue should have stream controller"),n.isClosed||n.controller.enqueue(e.chunk);break;case StreamKind.CLOSE:assert(n,"close should have stream controller"),n.isClosed||(n.isClosed=!0,n.controller.close(),this.#deleteStreamController(n,t));break;case StreamKind.ERROR:assert(n,"error should have stream controller"),n.controller.error(wrapReason(e.reason)),this.#deleteStreamController(n,t);break;case StreamKind.CANCEL_COMPLETE:e.success?n.cancelCall.resolve():n.cancelCall.reject(wrapReason(e.reason)),this.#deleteStreamController(n,t);break;case StreamKind.CANCEL:s&&(o=wrapReason(e.reason),Promise.try(s.onCancel||onFn,o).then(function(){a.postMessage({sourceName:r,targetName:i,stream:StreamKind.CANCEL_COMPLETE,streamId:t,success:!0})},function(e){a.postMessage({sourceName:r,targetName:i,stream:StreamKind.CANCEL_COMPLETE,streamId:t,reason:wrapReason(e)})}),s.sinkCapability.reject(o),s.isCancelled=!0,delete this.streamSinks[t]);break;default:throw new Error("Unexpected stream case")}}async#deleteStreamController(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#messageAC?.abort(),this.#messageAC=null}}class BaseCanvasFactory{#enableHWA=!1;constructor({enableHWA:e=!1}){this.#enableHWA=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");e=this._createCanvas(e,t);return{canvas:e,context:e.getContext("2d",{willReadFrequently:!this.#enableHWA})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){unreachable("Abstract method `_createCanvas` called.")}}class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){var r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class BaseCMapReaderFactory{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");let t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(e=>({cMapData:e,isCompressed:this.isCompressed})).catch(e=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: `+t)})}async _fetch(e){unreachable("Abstract method `_fetch` called.")}}class DOMCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(e){e=await fetchData(e,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):stringToBytes(e)}}class BaseFilterFactory{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,a){return"none"}destroy(e=0){}}class DOMFilterFactory extends BaseFilterFactory{#baseUrl;#_cache;#_defs;#docId;#document;#_hcmCache;#id=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#docId=e,this.#document=t}get#cache(){return this.#_cache||=new Map}get#hcmCache(){return this.#_hcmCache||=new Map}get#defs(){var e,t;return this.#_defs||(t=(e=this.#document.createElement("div")).style,t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1,(t=this.#document.createElementNS(SVG_NS,"svg")).setAttribute("width",0),t.setAttribute("height",0),this.#_defs=this.#document.createElementNS(SVG_NS,"defs"),e.append(t),t.append(this.#_defs),this.#document.body.append(e)),this.#_defs}#createTables(e){if(1===e.length){let t=e[0];var r=new Array(256);for(let e=0;e<256;e++)r[e]=t[e]/255;var i=r.join(",");return[i,i,i]}let[t,a,o]=e;var n=new Array(256),s=new Array(256),l=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255,s[e]=a[e]/255,l[e]=o[e]/255;return[n.join(","),s.join(","),l.join(",")]}#createUrl(e){var t;return void 0===this.#baseUrl&&(this.#baseUrl="",(t=this.#document.URL)!==this.#document.baseURI)&&(isDataScheme(t)?warn('#createUrl: ignore "data:"-URL for performance reasons.'):this.#baseUrl=t.split("#",1)[0]),`url(${this.#baseUrl}#${e})`}addFilter(e){var t,r,i,a,o,n;return e?(o=this.#cache.get(e))||([t,r,i]=this.#createTables(e),a=1===e.length?t:""+t+r+i,(o=this.#cache.get(a))?(this.#cache.set(e,o),o):(o=`g_${this.#docId}_transfer_map_`+this.#id++,n=this.#createUrl(o),this.#cache.set(e,n),this.#cache.set(a,n),e=this.#createFilter(o),this.#addTransferMapConversion(t,r,i,e),n)):"none"}addHCMFilter(e,t){var r=e+"-"+t;let i=this.#hcmCache.get("base");if(i?.key!==r&&(i?(i.filter?.remove(),i.key=r,i.url="none",i.filter=null):(i={key:r,url:"none",filter:null},this.#hcmCache.set("base",i)),e)&&t){let o=this.#getRGB(e),n=(e=Util.makeHexColor(...o),this.#getRGB(t));if(t=Util.makeHexColor(...n),this.#defs.style.color="",("#000000"!==e||"#ffffff"!==t)&&e!==t){var a=new Array(256);for(let e=0;e<=255;e++){var s=e/255;a[e]=s<=.03928?s/12.92:((.055+s)/1.055)**2.4}r=a.join(","),e=`g_${this.#docId}_hcm_filter`,t=i.filter=this.#createFilter(e),r=(this.#addTransferMapConversion(r,r,r,t),this.#addGrayConversion(t),(e,t)=>{var r=o[e]/255,i=n[e]/255,a=new Array(t+1);for(let e=0;e<=t;e++)a[e]=r+e/t*(i-r);return a.join(",")});this.#addTransferMapConversion(r(0,5),r(1,5),r(2,5),t),i.url=this.#createUrl(e)}}return i.url}addAlphaFilter(e){var t,r,i,a=this.#cache.get(e);return a||([t]=this.#createTables([e]),(a=this.#cache.get(r="alpha_"+t))?(this.#cache.set(e,a),a):(a=`g_${this.#docId}_alpha_map_`+this.#id++,i=this.#createUrl(a),this.#cache.set(e,i),this.#cache.set(r,i),e=this.#createFilter(a),this.#addTransferMapAlphaConversion(t,e),i))}addLuminosityFilter(e){var t,r=this.#cache.get(e||"luminosity");if(r)return r;let i,a;return a=e?([i]=this.#createTables([e]),"luminosity_"+i):"luminosity",(r=this.#cache.get(a))?(this.#cache.set(e,r),r):(r=`g_${this.#docId}_luminosity_map_`+this.#id++,t=this.#createUrl(r),this.#cache.set(e,t),this.#cache.set(a,t),r=this.#createFilter(r),this.#addLuminosityConversion(r),e&&this.#addTransferMapAlphaConversion(i,r),t)}addHighlightHCMFilter(r,i,a,o,n){var s=i+`-${a}-${o}-`+n;let l=this.#hcmCache.get(r);if(l?.key!==s&&(l?(l.filter?.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},this.#hcmCache.set(r,l)),i)&&a){var[s,i]=[i,a].map(this.#getRGB.bind(this));let p=Math.round(.2126*s[0]+.7152*s[1]+.0722*s[2]),d=Math.round(.2126*i[0]+.7152*i[1]+.0722*i[2]),[e,t]=[o,n].map(this.#getRGB.bind(this));d<p&&([p,d,e,t]=[d,p,t,e]),this.#defs.style.color="";a=(e,t,r)=>{var i=new Array(256),a=(d-p)/r,o=e/255,n=(t-e)/(255*r);let s=0;for(let e=0;e<=r;e++){var l=Math.round(p+e*a),c=o+e*n;for(let e=s;e<=l;e++)i[e]=c;s=l+1}for(let e=s;e<256;e++)i[e]=i[s-1];return i.join(",")},s=`g_${this.#docId}_hcm_${r}_filter`,i=l.filter=this.#createFilter(s);this.#addGrayConversion(i),this.#addTransferMapConversion(a(e[0],t[0],5),a(e[1],t[1],5),a(e[2],t[2],5),i),l.url=this.#createUrl(s)}return l.url}destroy(e=!1){e&&this.#_hcmCache?.size||(this.#_defs?.parentNode.parentNode.remove(),this.#_defs=null,this.#_cache?.clear(),this.#_cache=null,this.#_hcmCache?.clear(),this.#_hcmCache=null,this.#id=0)}#addLuminosityConversion(e){var t=this.#document.createElementNS(SVG_NS,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#addGrayConversion(e){var t=this.#document.createElementNS(SVG_NS,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#createFilter(e){var t=this.#document.createElementNS(SVG_NS,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#defs.append(t),t}#appendFeFunc(e,t,r){t=this.#document.createElementNS(SVG_NS,t);t.setAttribute("type","discrete"),t.setAttribute("tableValues",r),e.append(t)}#addTransferMapConversion(e,t,r,i){var a=this.#document.createElementNS(SVG_NS,"feComponentTransfer");i.append(a),this.#appendFeFunc(a,"feFuncR",e),this.#appendFeFunc(a,"feFuncG",t),this.#appendFeFunc(a,"feFuncB",r)}#addTransferMapAlphaConversion(e,t){var r=this.#document.createElementNS(SVG_NS,"feComponentTransfer");t.append(r),this.#appendFeFunc(r,"feFuncA",e)}#getRGB(e){return this.#defs.style.color=e,getRGB(getComputedStyle(this.#defs).getPropertyValue("color"))}}class BaseStandardFontDataFactory{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");let t=""+this.baseUrl+e;return this._fetch(t).catch(e=>{throw new Error("Unable to load font data at: "+t)})}async _fetch(e){unreachable("Abstract method `_fetch` called.")}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(e){e=await fetchData(e,"arraybuffer");return new Uint8Array(e)}}async function node_utils_fetchData(e){e=await process.getBuiltinModule("fs").promises.readFile(e);return new Uint8Array(e)}isNodeJS&&warn("Please use the `legacy` build in Node.js environments.");class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(e){return node_utils_fetchData(e)}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(e){return node_utils_fetchData(e)}}let PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(e,t){var r,i,a;t&&(r=t[2]-t[0],i=t[3]-t[1],(a=new Path2D).rect(t[0],t[1],r,i),e.clip(a))}class BaseShadingPattern{getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(var r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,i){let a;var o,n;return i===PathType.STROKE||i===PathType.FILL?(i=t.current.getClippedPathBoundingBox(i,getCurrentTransform(e))||[0,0,0,0],o=Math.ceil(i[2]-i[0])||1,n=Math.ceil(i[3]-i[1])||1,(n=(o=t.cachedCanvases.getCanvas("pattern",o,n)).context).clearRect(0,0,n.canvas.width,n.canvas.height),n.beginPath(),n.rect(0,0,n.canvas.width,n.canvas.height),n.translate(-i[0],-i[1]),r=Util.transform(r,[1,0,0,1,i[0],i[1]]),n.transform(...t.baseTransform),this.matrix&&n.transform(...this.matrix),applyBoundingBox(n,this._bbox),n.fillStyle=this._createGradient(n),n.fill(),a=e.createPattern(o.canvas,"no-repeat"),i=new DOMMatrix(r),a.setTransform(i)):(applyBoundingBox(e,this._bbox),a=this._createGradient(e)),a}}function drawTriangle(e,t,r,i,a,l,c,p){var o=t.coords,d=t.colors,u=e.data,g=4*e.width;let n;o[r+1]>o[i+1]&&(n=r,r=i,i=n,n=l,l=c,c=n),o[a+1]<o[i+1]&&(n=i,i=a,a=n,n=c,c=p,p=n),o[i+1]<o[r+1]&&(n=r,r=i,i=n,n=l,l=c,c=n);var m=(o[r]+t.offsetX)*t.scaleX,h=(o[r+1]+t.offsetY)*t.scaleY,_=(o[i]+t.offsetX)*t.scaleX,f=(o[i+1]+t.offsetY)*t.scaleY,v=(o[a]+t.offsetX)*t.scaleX,y=(o[a+1]+t.offsetY)*t.scaleY;if(!(y<=h)){var P=d[l],S=d[l+1],w=d[l+2],b=d[c],C=d[c+1],k=d[c+2],T=d[p],x=d[p+1],A=d[p+2],e=Math.round(h),J=Math.round(y);let a,o,n,s;for(let i=e;i<=J;i++){if(i<f){var G=i<h?0:(h-i)/(h-f);a=m-(m-_)*G,o=P-(P-b)*G,n=S-(S-C)*G,s=w-(w-k)*G}else{let e;e=i>y?1:f==y?0:(f-i)/(f-y),a=_-(_-v)*e,o=b-(b-T)*e,n=C-(C-x)*e,s=k-(k-A)*e}let t;var $=m-(m-v)*(t=i<h?0:i>y?1:(h-i)/(h-y)),E=P-(P-T)*t,L=S-(S-x)*t,M=w-(w-A)*t,G=Math.round(Math.min(a,$)),I=Math.round(Math.max(a,$));let r=g*i+4*G;for(let e=G;e<=I;e++)(t=(a-e)/(a-$))<0?t=0:1<t&&(t=1),u[r++]=o-(o-E)*t|0,u[r++]=n-(n-L)*t|0,u[r++]=s-(s-M)*t|0,u[r++]=255}}}function drawFigure(r,e,i){var a=e.coords,o=e.colors;let n,t;switch(e.type){case"lattice":var s=e.verticesPerRow,l=Math.floor(a.length/s)-1,c=s-1;for(n=0;n<l;n++){let t=n*s;for(let e=0;e<c;e++,t++)drawTriangle(r,i,a[t],a[t+1],a[t+s],o[t],o[t+1],o[t+s]),drawTriangle(r,i,a[t+s+1],a[t+1],a[t+s],o[t+s+1],o[t+1],o[t+s])}break;case"triangles":for(n=0,t=a.length;n<t;n+=3)drawTriangle(r,i,a[n],a[n+1],a[n+2],o[n],o[n+1],o[n+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,r,t){var i,a=Math.floor(this._bounds[0]),o=Math.floor(this._bounds[1]),n=Math.ceil(this._bounds[2])-a,s=Math.ceil(this._bounds[3])-o,l=Math.min(Math.ceil(Math.abs(n*e[0]*1.1)),3e3),e=Math.min(Math.ceil(Math.abs(s*e[1]*1.1)),3e3),n=n/l,s=s/e,c={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-o,scaleX:1/n,scaleY:1/s},t=t.getCanvas("mesh",l+4,e+4),p=t.context,d=p.createImageData(l,e);if(r){var u=d.data;for(let e=0,t=u.length;e<t;e+=4)u[e]=r[0],u[e+1]=r[1],u[e+2]=r[2],u[e+3]=255}for(i of this._figures)drawFigure(d,i,c);return p.putImageData(d,2,2),{canvas:t.canvas,offsetX:a-2*n,offsetY:o-2*s,scaleX:n,scaleY:s}}getPattern(e,t,r,i){applyBoundingBox(e,this._bbox);let a;i===PathType.SHADING?a=Util.singularValueDecompose2dScale(getCurrentTransform(e)):(a=Util.singularValueDecompose2dScale(t.baseTransform),this.matrix&&(o=Util.singularValueDecompose2dScale(this.matrix),a=[a[0]*o[0],a[1]*o[1]]));var o=this._createMeshCanvas(a,i===PathType.SHADING?null:this._background,t.cachedCanvases);return i!==PathType.SHADING&&(e.setTransform(...t.baseTransform),this.matrix)&&e.transform(...this.matrix),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(e){switch(e[0]){case"RadialAxial":return new RadialAxialShadingPattern(e);case"Mesh":return new MeshShadingPattern(e);case"Dummy":return new DummyShadingPattern}throw new Error("Unknown IR type: "+e[0])}let PaintType={COLORED:1,UNCOLORED:2};class TilingPattern{static MAX_PATTERN_SIZE=3e3;constructor(e,t,r,i,a){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=r,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(e){var{bbox:t,operatorList:r,paintType:i,tilingType:a,color:o,canvasGraphicsFactory:n}=this,{xstep:s,ystep:l}=this,s=Math.abs(s),l=Math.abs(l),a=(info("TilingType: "+a),t[0]),c=t[1],p=t[2],t=t[3],d=p-a,u=t-c,g=Util.singularValueDecompose2dScale(this.matrix),m=Util.singularValueDecompose2dScale(this.baseTransform),h=g[0]*m[0],g=g[1]*m[1];let _=d,f=u,v=!1,y=!1;var m=Math.ceil(s*h),P=Math.ceil(l*g),S=Math.ceil(d*h),w=Math.ceil(u*g),S=(S<=m?_=s:v=!0,w<=P?f=l:y=!0,this.getSizeAndScale(_,this.ctx.canvas.width,h)),m=this.getSizeAndScale(f,this.ctx.canvas.height,g),w=e.cachedCanvases.getCanvas("pattern",S.size,m.size),P=w.context,n=n.createCanvasGraphics(P);if(n.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(n,i,o),P.translate(-S.scale*a,-m.scale*c),n.transform(S.scale,0,0,m.scale,0,0),P.save(),this.clipBbox(n,a,c,p,t),n.baseTransform=getCurrentTransform(n.ctx),n.executeOperatorList(r),n.endDrawing(),P.restore(),v||y){var b=w.canvas,i=(v&&(_=s),y&&(f=l),this.getSizeAndScale(_,this.ctx.canvas.width,h)),o=this.getSizeAndScale(f,this.ctx.canvas.height,g),C=i.size,k=o.size,p=e.cachedCanvases.getCanvas("pattern-workaround",C,k),T=p.context,x=v?Math.floor(d/s):0,A=y?Math.floor(u/l):0;for(let t=0;t<=x;t++)for(let e=0;e<=A;e++)T.drawImage(b,C*t,k*e,C,k,0,0,C,k);return{canvas:p.canvas,scaleX:i.scale,scaleY:o.scale,offsetX:a,offsetY:c}}return{canvas:w.canvas,scaleX:S.scale,scaleY:m.scale,offsetX:a,offsetY:c}}getSizeAndScale(e,t,r){t=Math.max(TilingPattern.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=t?i=t:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,i,a){e.ctx.rect(t,r,i-t,a-r),e.current.updateRectMinMax(getCurrentTransform(e.ctx),[t,r,i,a]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){var i=e.ctx,a=e.current;switch(t){case PaintType.COLORED:var o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,a.fillColor=o.fillStyle,a.strokeColor=o.strokeStyle;break;case PaintType.UNCOLORED:o=Util.makeHexColor(r[0],r[1],r[2]);i.fillStyle=o,i.strokeStyle=o,a.fillColor=o,a.strokeColor=o;break;default:throw new FormatError("Unsupported paint type: "+t)}}getPattern(e,t,r,i){let a=r;i!==PathType.SHADING&&(a=Util.transform(a,t.baseTransform),this.matrix)&&(a=Util.transform(a,this.matrix));r=this.createPatternCanvas(t);let o=new DOMMatrix(a);o=(o=o.translate(r.offsetX,r.offsetY)).scale(1/r.scaleX,1/r.scaleY);i=e.createPattern(r.canvas,"repeat");return i.setTransform(o),i}}function convertBlackAndWhiteToRGBA({src:t,srcPos:r=0,dest:i,width:e,height:a,nonBlackColor:o=4294967295,inverseDecode:n=!1}){var s=util_FeatureTest.isLittleEndian?4278190080:255,[l,c]=n?[o,s]:[s,o],p=e>>3,d=7&e,u=t.length;i=new Uint32Array(i.buffer);let g=0;for(let e=0;e<a;e++){for(var m=r+p;r<m;r++){var h=r<u?t[r]:255;i[g++]=128&h?c:l,i[g++]=64&h?c:l,i[g++]=32&h?c:l,i[g++]=16&h?c:l,i[g++]=8&h?c:l,i[g++]=4&h?c:l,i[g++]=2&h?c:l,i[g++]=1&h?c:l}if(0!=d){var _=r<u?t[r++]:255;for(let e=0;e<d;e++)i[g++]=_&1<<7-e?c:l}}return{srcPos:r,destPos:g}}let MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,MAX_SIZE_TO_COMPILE=1e3,FULL_CHUNK_HEIGHT=16;function mirrorContextOperations(e,n){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){n.save(),this.__originalSave()},e.restore=function(){n.restore(),this.__originalRestore()},e.translate=function(e,t){n.translate(e,t),this.__originalTranslate(e,t)},e.scale=function(e,t){n.scale(e,t),this.__originalScale(e,t)},e.transform=function(e,t,r,i,a,o){n.transform(e,t,r,i,a,o),this.__originalTransform(e,t,r,i,a,o)},e.setTransform=function(e,t,r,i,a,o){n.setTransform(e,t,r,i,a,o),this.__originalSetTransform(e,t,r,i,a,o)},e.resetTransform=function(){n.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){n.rotate(e),this.__originalRotate(e)},e.clip=function(e){n.clip(e),this.__originalClip(e)},e.moveTo=function(e,t){n.moveTo(e,t),this.__originalMoveTo(e,t)},e.lineTo=function(e,t){n.lineTo(e,t),this.__originalLineTo(e,t)},e.bezierCurveTo=function(e,t,r,i,a,o){n.bezierCurveTo(e,t,r,i,a,o),this.__originalBezierCurveTo(e,t,r,i,a,o)},e.rect=function(e,t,r,i){n.rect(e,t,r,i),this.__originalRect(e,t,r,i)},e.closePath=function(){n.closePath(),this.__originalClosePath()},e.beginPath=function(){n.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return void 0!==this.cache[e]?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(var e in this.cache){var t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function drawImageAtIntegerCoords(e,t,r,i,a,o,n,s,l,c){var p,d,u,g,[m,h,_,f,v,y]=getCurrentTransform(e);return 0===h&&0===_?(p=Math.round(n*m+v),d=Math.round(s*f+y),u=Math.abs(Math.round((n+l)*m+v)-p)||1,g=Math.abs(Math.round((s+c)*f+y)-d)||1,e.setTransform(Math.sign(m),0,0,Math.sign(f),p,d),e.drawImage(t,r,i,a,o,0,0,u,g),e.setTransform(m,h,_,f,v,y),[u,g]):0===m&&0===f?(p=Math.round(s*_+v),d=Math.round(n*h+y),u=Math.abs(Math.round((s+c)*_+v)-p)||1,g=Math.abs(Math.round((n+l)*h+y)-d)||1,e.setTransform(0,Math.sign(h),Math.sign(_),0,p,d),e.drawImage(t,r,i,a,o,0,0,g,u),e.setTransform(m,h,_,f,v,y),[g,u]):(e.drawImage(t,r,i,a,o,n,s,l,c),[Math.hypot(m,h)*l,Math.hypot(_,f)*c])}function compileType3Glyph(e){let{width:r,height:t}=e;if(r>MAX_SIZE_TO_COMPILE||t>MAX_SIZE_TO_COMPILE)return null;var i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=r+1;let o=new Uint8Array(a*(t+1)),n,s,l;var c,p=r+7&-8;let d=new Uint8Array(p*t),u=0;for(c of e.data){let e=128;for(;0<e;)d[u++]=c&e?0:255,e>>=1}let g=0;for((u=0)!==d[u]&&(o[0]=1,++g),s=1;s<r;s++)d[u]!==d[u+1]&&(o[s]=d[u]?2:1,++g),u++;for(0!==d[u]&&(o[s]=2,++g),n=1;n<t;n++){u=n*p,l=n*a,d[u-p]!==d[u]&&(o[l]=d[u]?1:8,++g);let e=(d[u]?4:0)+(d[u-p]?8:0);for(s=1;s<r;s++)i[e=(e>>2)+(d[u+1]?4:0)+(d[u-p+1]?8:0)]&&(o[l+s]=i[e],++g),u++;if(d[u-p]!==d[u]&&(o[l+s]=d[u]?2:4,++g),1e3<g)return null}for(u=p*(t-1),l=n*a,0!==d[u]&&(o[l]=8,++g),s=1;s<r;s++)d[u]!==d[u+1]&&(o[l+s]=d[u]?4:8,++g),u++;if(0!==d[u]&&(o[l+s]=4,++g),1e3<g)return null;var m=new Int32Array([0,a,-1,0,-a,0,0,0,1]);let h=new Path2D;for(n=0;g&&n<=t;n++){let t=n*a;for(var _=t+r;t<_&&!o[t];)t++;if(t!==_){h.moveTo(t%a,n);var f=t;let e=o[t];do{for(var v=m[e];t+=v,!o[t];);var y=o[t];5!==y&&10!==y?(e=y,o[t]=0):(e=y&51*e>>4,o[t]&=e>>2|e<<2),h.lineTo(t%a,t/a|0),o[t]||--g}while(f!==t);--n}}d=null,o=null;return function(e){e.save(),e.scale(1/r,-1/t),e.translate(0,-t),e.fill(h),e.beginPath(),e.restore()}}class CanvasExtraState{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){var e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=Util.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){var r=Util.applyTransform(t,e),i=Util.applyTransform(t.slice(2),e),a=Util.applyTransform([t[0],t[3]],e),t=Util.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,r[0],i[0],a[0],t[0]),this.minY=Math.min(this.minY,r[1],i[1],a[1],t[1]),this.maxX=Math.max(this.maxX,r[0],i[0],a[0],t[0]),this.maxY=Math.max(this.maxY,r[1],i[1],a[1],t[1])}updateScalingPathMinMax(e,t){Util.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,i,a,o,n,s,l,c){t=Util.bezierBoundingBox(t,r,i,a,o,n,s,l,c);c||this.updateRectMinMax(e,t)}getPathBoundingBox(e=PathType.FILL,t=null){var r=[this.minX,this.minY,this.maxX,this.maxY];return e===PathType.STROKE&&(t||unreachable("Stroke bounding box must include transform."),t=(e=Util.singularValueDecompose2dScale(t))[0]*this.lineWidth/2,e=e[1]*this.lineWidth/2,r[0]-=t,r[1]-=e,r[2]+=t,r[3]+=e),r}updateClipFromPath(){var e=Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=PathType.FILL,t=null){return Util.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function putBinaryImageData(n,s){if(s instanceof ImageData)n.putImageData(s,0,0);else{var l=s.height,c=s.width,p=l%FULL_CHUNK_HEIGHT,d=(l-p)/FULL_CHUNK_HEIGHT,u=0==p?d:1+d,g=n.createImageData(c,FULL_CHUNK_HEIGHT);let i=0,a;var m=s.data,h=g.data;let e,t,r,o;if(s.kind===util_ImageKind.GRAYSCALE_1BPP){var _=m.byteLength,f=new Uint32Array(h.buffer,0,h.byteLength>>2),v=f.length,y=c+7>>3,P=4294967295,S=util_FeatureTest.isLittleEndian?4278190080:255;for(e=0;e<u;e++){for(r=e<d?FULL_CHUNK_HEIGHT:p,a=0,t=0;t<r;t++){var w=_-i;let e=0;var b=y<w?c:8*w-7,C=-8&b;let t=0,r=0;for(;e<C;e+=8)r=m[i++],f[a++]=128&r?P:S,f[a++]=64&r?P:S,f[a++]=32&r?P:S,f[a++]=16&r?P:S,f[a++]=8&r?P:S,f[a++]=4&r?P:S,f[a++]=2&r?P:S,f[a++]=1&r?P:S;for(;e<b;e++)0===t&&(r=m[i++],t=128),f[a++]=r&t?P:S,t>>=1}for(;a<v;)f[a++]=0;n.putImageData(g,0,e*FULL_CHUNK_HEIGHT)}}else if(s.kind===util_ImageKind.RGBA_32BPP){for(t=0,o=c*FULL_CHUNK_HEIGHT*4,e=0;e<d;e++)h.set(m.subarray(i,i+o)),i+=o,n.putImageData(g,0,t),t+=FULL_CHUNK_HEIGHT;e<u&&(o=c*p*4,h.set(m.subarray(i,i+o)),n.putImageData(g,0,t))}else{if(s.kind!==util_ImageKind.RGB_24BPP)throw new Error("bad image kind: "+s.kind);for(r=FULL_CHUNK_HEIGHT,o=c*r,e=0;e<u;e++){for(e>=d&&(r=p,o=c*r),a=0,t=o;t--;)h[a++]=m[i++],h[a++]=m[i++],h[a++]=m[i++],h[a++]=255;n.putImageData(g,0,e*FULL_CHUNK_HEIGHT)}}}}function putBinaryImageMask(r,e){if(e.bitmap)r.drawImage(e.bitmap,0,0);else{var i=e.height,a=e.width,o=i%FULL_CHUNK_HEIGHT,n=(i-o)/FULL_CHUNK_HEIGHT,s=0==o?n:1+n,l=r.createImageData(a,FULL_CHUNK_HEIGHT);let t=0;var c=e.data,p=l.data;for(let e=0;e<s;e++){var d=e<n?FULL_CHUNK_HEIGHT:o;({srcPos:t}=convertBlackAndWhiteToRGBA({src:c,srcPos:t,dest:p,width:a,height:d,nonBlackColor:0})),r.putImageData(l,0,e*FULL_CHUNK_HEIGHT)}}}function copyCtxState(e,t){var r;for(r of["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"])void 0!==e[r]&&(t[r]=e[r]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function resetCtxToDefault(e){var t;e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0),isNodeJS||(t=e.filter,"none"!==t&&""!==t&&(e.filter="none"))}function getImageSmoothingEnabled(e,t){return!!t||((t=Util.singularValueDecompose2dScale(e))[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]),e=Math.fround((globalThis.devicePixelRatio||1)*PixelsPerInch.PDF_TO_CSS_UNITS),t[0]<=e&&t[1]<=e)}let LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};class CanvasGraphics{constructor(e,t,r,i,a,{optionalContentConfig:o,markedContentStack:n=null},s,l){this.ctx=e,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=n||[],this.optionalContentConfig=o,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=s,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return"string"==typeof e?(e.startsWith("g_")?this.commonObjs:this.objs).get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){var a=this.ctx.canvas.width,o=this.ctx.canvas.height,n=this.ctx.fillStyle;this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=n,r&&(i=this.cachedCanvases.getCanvas("transparent",a,o),this.compositeCtx=this.ctx,this.transparentCanvas=i.canvas,this.ctx=i.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))),this.ctx.save(),resetCtxToDefault(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(e,t,r,i){var a=e.argsArray,o=e.fnArray;let n=t||0;var s=a.length;if(s===n)return n;var l=s-n>EXECUTION_STEPS&&"function"==typeof r,c=l?Date.now()+EXECUTION_TIME:0;let p=0;for(var d,u=this.commonObjs,g=this.objs;;){if(void 0!==i&&n===i.nextBreakPoint)return i.breakIt(n,r),n;if((d=o[n])!==OPS.dependency)this[d].apply(this,a[n]);else for(var m of a[n]){var h=m.startsWith("g_")?u:g;if(!h.has(m))return h.get(m,r),n}if(++n===s)return n;if(l&&++p>EXECUTION_STEPS){if(Date.now()>c)return r(),n;p=0}}}#restoreInitialState(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#restoreInitialState(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(var e of this._cachedBitmapsMap.values()){for(var t of e.values())"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#drawFilter()}#drawFilter(){var e,t;this.pageColors&&"none"!==(e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background))&&(t=this.ctx.filter,this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t)}_scaleImage(r,e){var i,a,t=r.width??r.displayWidth,o=r.height??r.displayHeight;let n=Math.max(Math.hypot(e[0],e[1]),1),s=Math.max(Math.hypot(e[2],e[3]),1),l=t,c=o,p="prescale1";for(;2<n&&1<l||2<s&&1<c;){let e=l,t=c;2<n&&1<l&&(e=16384<=l?Math.floor(l/2)-1||1:Math.ceil(l/2),n/=l/e),2<s&&1<c&&(t=16384<=c?Math.floor(c/2)-1||1:Math.ceil(c)/2,s/=c/t),(a=(i=this.cachedCanvases.getCanvas(p,e,t)).context).clearRect(0,0,e,t),a.drawImage(r,0,0,l,c,0,0,e,t),r=i.canvas,l=e,c=t,p="prescale1"===p?"prescale2":"prescale1"}return{img:r,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){var t=this.ctx,{width:r,height:i}=e,a=this.current.fillColor,o=this.current.patternFill,n=getCurrentTransform(t);let s,l,c,p;if((e.bitmap||e.data)&&1<e.count){var d=e.bitmap||e.data.buffer,d=(l=JSON.stringify(o?n:[n.slice(0,4),a]),(s=this._cachedBitmapsMap.get(d))||(s=new Map,this._cachedBitmapsMap.set(d,s)),s.get(l));if(d&&!o){let e=Math.round(Math.min(n[0],n[2])+n[4]),t=Math.round(Math.min(n[1],n[3])+n[5]);return{canvas:d,offsetX:e,offsetY:t}}c=d}c||putBinaryImageMask((p=this.cachedCanvases.getCanvas("maskCanvas",r,i)).context,e);var d=Util.transform(n,[1/r,0,0,-1/i,0,0]),d=Util.transform(d,[1,0,0,1,0,-i]),[n,u,g,m]=Util.getAxialAlignedBoundingBox([0,0,r,i],d),g=Math.round(g-n)||1,m=Math.round(m-u)||1,g=this.cachedCanvases.getCanvas("fillCanvas",g,m),m=g.context;let h=n,_=u;m.translate(-h,-_),m.transform(...d),c||(c=(c=this._scaleImage(p.canvas,getCurrentTransformInverse(m))).img,s&&o&&s.set(l,c)),m.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(m),e.interpolate),drawImageAtIntegerCoords(m,c,0,0,c.width,c.height,0,0,r,i),m.globalCompositeOperation="source-in";n=Util.transform(getCurrentTransformInverse(m),[1,0,0,1,-h,-_]);return m.fillStyle=o?a.getPattern(t,this,n,PathType.FILL):a,m.fillRect(0,0,r,i),s&&!o&&(this.cachedCanvases.delete("fillCanvas"),s.set(l,g.canvas)),{canvas:g.canvas,offsetX:Math.round(h),offsetY:Math.round(_)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=LINE_CAP_STYLES[e]}setLineJoin(e){this.ctx.lineJoin=LINE_JOIN_STYLES[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){var r=this.ctx;void 0!==r.setLineDash&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(var[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){var e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");var e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(r,e,t),e=(this.suspendedCtx=this.ctx,this.ctx=r.context,this.ctx);e.setTransform(...getCurrentTransform(this.suspendedCtx)),copyCtxState(this.suspendedCtx,e),mirrorContextOperations(e,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){var t,r;this.current.activeSMask&&(e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],t=this.current.activeSMask,r=this.suspendedCtx,this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}composeSMask(e,t,r,i){var a=i[0],o=i[1],n=i[2]-a,i=i[3]-o;0!=n&&0!=i&&(this.genericComposeSMask(t.context,r,n,i,t.subtype,t.backdrop,t.transferMap,a,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(t,e,r,i,a,o,n,s,l,c,p){let d=t.canvas,u=s-c,g=l-p;if(o){c=Util.makeHexColor(...o);if(u<0||g<0||u+r>d.width||g+i>d.height){p=this.cachedCanvases.getCanvas("maskExtension",r,i),o=p.context;o.drawImage(d,-u,-g),o.globalCompositeOperation="destination-atop",o.fillStyle=c,o.fillRect(0,0,r,i),o.globalCompositeOperation="source-over",d=p.canvas,u=g=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);let e=new Path2D;e.rect(u,g,r,i),t.clip(e),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(u,g,r,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===a&&n?e.filter=this.filterFactory.addAlphaFilter(n):"Luminosity"===a&&(e.filter=this.filterFactory.addLuminosityFilter(n));let m=new Path2D;m.rect(s,l,r,i),e.clip(m),e.globalCompositeOperation="destination-in",e.drawImage(d,u,g,r,i,s,l,r,i),e.restore()}save(){(this.inSMaskMode?(copyCtxState(this.ctx,this.suspendedCtx),this.suspendedCtx):this.ctx).save();var e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),copyCtxState(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,i,a,o){this.ctx.transform(e,t,r,i,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(i,a,e){var o=this.ctx,n=this.current;let s=n.x,l=n.y,c,p;var d=getCurrentTransform(o),u=0===d[0]&&0===d[3]||0===d[1]&&0===d[2],g=u?e.slice(0):null;for(let e=0,t=0,r=i.length;e<r;e++)switch(0|i[e]){case OPS.rectangle:s=a[t++],l=a[t++];var m=a[t++],h=a[t++],_=s+m,f=l+h;o.moveTo(s,l),0===m||0===h?o.lineTo(_,f):(o.lineTo(_,l),o.lineTo(_,f),o.lineTo(s,f)),u||n.updateRectMinMax(d,[s,l,_,f]),o.closePath();break;case OPS.moveTo:s=a[t++],l=a[t++],o.moveTo(s,l),u||n.updatePathMinMax(d,s,l);break;case OPS.lineTo:s=a[t++],l=a[t++],o.lineTo(s,l),u||n.updatePathMinMax(d,s,l);break;case OPS.curveTo:c=s,p=l,s=a[t+4],l=a[t+5],o.bezierCurveTo(a[t],a[t+1],a[t+2],a[t+3],s,l),n.updateCurvePathMinMax(d,c,p,a[t],a[t+1],a[t+2],a[t+3],s,l,g),t+=6;break;case OPS.curveTo2:c=s,p=l,o.bezierCurveTo(s,l,a[t],a[t+1],a[t+2],a[t+3]),n.updateCurvePathMinMax(d,c,p,s,l,a[t],a[t+1],a[t+2],a[t+3],g),s=a[t+2],l=a[t+3],t+=4;break;case OPS.curveTo3:c=s,p=l,s=a[t+2],l=a[t+3],o.bezierCurveTo(a[t],a[t+1],s,l,s,l),n.updateCurvePathMinMax(d,c,p,a[t],a[t+1],s,l,s,l,g),t+=4;break;case OPS.closePath:o.closePath()}u&&n.updateScalingPathMinMax(d,g),n.setCurrentPoint(s,l)}closePath(){this.ctx.closePath()}stroke(e=!0){var t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof r&&r?.getPattern?(t.save(),t.strokeStyle=r.getPattern(t,this,getCurrentTransformInverse(t),PathType.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){var t=this.ctx,r=this.current.fillColor;let i=!1;this.current.patternFill&&(t.save(),t.fillStyle=r.getPattern(t,this,getCurrentTransformInverse(t),PathType.FILL),i=!0);r=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==r&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(r)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=NORMAL_CLIP}eoClip(){this.pendingClip=EO_CLIP}beginText(){this.current.textMatrix=IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){var e=this.pendingTextPaths,t=this.ctx;if(void 0===e)t.beginPath();else{var r,i,a,o,n,s=new Path2D,l=t.getTransform().invertSelf();for({transform:r,x:i,y:a,fontSize:o,path:n}of e)s.addPath(n,new DOMMatrix(r).preMultiplySelf(l).translate(i,a).scale(o,-o));t.clip(s),t.beginPath(),delete this.pendingTextPaths}}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(r,i){var a=this.commonObjs.get(r),o=this.current;if(!a)throw new Error("Can't find font for "+r);if(o.fontMatrix=a.fontMatrix||FONT_IDENTITY_MATRIX,0!==o.fontMatrix[0]&&0!==o.fontMatrix[3]||warn("Invalid font matrix for font "+r),i<0?(i=-i,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=i,!a.isType3Font){r=a.systemFontInfo?.css||`"${a.loadedName||"sans-serif"}", `+a.fallbackName;let e="normal";a.black?e="900":a.bold&&(e="bold");o=a.italic?"italic":"normal";let t=i;i<MIN_FONT_SIZE?t=MIN_FONT_SIZE:i>MAX_FONT_SIZE&&(t=MAX_FONT_SIZE),this.current.fontSizeScale=i/t,this.ctx.font=o+` ${e} ${t}px `+r}}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,i,a,o){this.current.textMatrix=[e,t,r,i,a,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#getScaledPath(e,t,r){var i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),i}paintChar(e,t,r,i,a){var o=this.ctx,n=this.current,s=n.font,l=n.textRenderingMode,c=n.fontSize/n.fontSizeScale,p=l&TextRenderingMode.FILL_STROKE_MASK,l=!!(l&TextRenderingMode.ADD_TO_PATH_FLAG),d=n.patternFill&&!s.missingFile,n=n.patternStroke&&!s.missingFile;let u;(s.disableFontFace||l||d||n)&&(u=s.getPathGenerator(this.commonObjs,e)),s.disableFontFace||d||n?(o.save(),o.translate(t,r),o.scale(c,-c),p!==TextRenderingMode.FILL&&p!==TextRenderingMode.FILL_STROKE||(i?(s=o.getTransform(),o.setTransform(...i),o.fill(this.#getScaledPath(u,s,i))):o.fill(u)),p!==TextRenderingMode.STROKE&&p!==TextRenderingMode.FILL_STROKE||(a?(d=o.getTransform(),o.setTransform(...a),o.stroke(this.#getScaledPath(u,d,a))):(o.lineWidth/=c,o.stroke(u))),o.restore()):(p!==TextRenderingMode.FILL&&p!==TextRenderingMode.FILL_STROKE||o.fillText(e,t,r),p!==TextRenderingMode.STROKE&&p!==TextRenderingMode.FILL_STROKE||o.strokeText(e,t,r)),l&&(this.pendingTextPaths||=[]).push({transform:getCurrentTransform(o),x:t,y:r,fontSize:c,path:u})}get isFontSubpixelAAEnabled(){var e=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context,t=(e.scale(1.5,1),e.fillText("I",0,10),e.getImageData(0,0,10,10).data);let r=!1;for(let e=3;e<t.length;e+=4)if(0<t[e]&&t[e]<255){r=!0;break}return shadow(this,"isFontSubpixelAAEnabled",r)}showText(t){var r=this.current,s=r.font;if(s.isType3Font)return this.showType3Text(t);var l=r.fontSize;if(0!==l){var c=this.ctx,p=r.fontSizeScale,d=r.charSpacing,u=r.wordSpacing,g=r.fontDirection,i=r.textHScale*g,m=t.length,h=s.vertical,_=h?1:-1,f=s.defaultVMetrics,v=l*r.fontMatrix[0],y=r.textRenderingMode===TextRenderingMode.FILL&&!s.disableFontFace&&!r.patternFill;c.save(),c.transform(...r.textMatrix),c.translate(r.x,r.y+r.textRise),0<g?c.scale(i,-1):c.scale(i,1);let o,n,e=(r.patternFill&&(c.save(),P=r.fillColor.getPattern(c,this,getCurrentTransformInverse(c),PathType.FILL),o=getCurrentTransform(c),c.restore(),c.fillStyle=P),r.patternStroke&&(c.save(),P=r.strokeColor.getPattern(c,this,getCurrentTransformInverse(c),PathType.STROKE),n=getCurrentTransform(c),c.restore(),c.strokeStyle=P),r.lineWidth);var a,P=r.textMatrixScale;if(0===P||0===e?(a=r.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK)!==TextRenderingMode.STROKE&&a!==TextRenderingMode.FILL_STROKE||(e=this.getSinglePixelWidth()):e/=P,1!==p&&(c.scale(p,p),e/=p),c.lineWidth=e,s.isInvalidPDFjsFont){var S,w=[];let e=0;for(S of t)w.push(S.unicode),e+=S.width;c.fillText(w.join(""),0,0),r.x+=e*v*i,c.restore(),void this.compose()}else{let a=0,e;for(e=0;e<m;++e){var b=t[e];if("number"==typeof b)a+=_*b*l/1e3;else{let e=!1;var C,k,T,x=(b.isSpace?u:0)+d,A=b.fontChar,J=b.accent;let t,r,i=b.width;r=h?(C=b.vmetric||f,k=-(b.vmetric?C[1]:.5*i)*v,T=C[2]*v,i=C?-C[0]:i,t=k/p,(a+T)/p):(t=a/p,0),s.remeasure&&0<i&&(C=1e3*c.measureText(A).width/l*p,i<C&&this.isFontSubpixelAAEnabled?(k=i/C,e=!0,c.save(),c.scale(k,1),t/=k):i!==C&&(t+=(i-C)/2e3*l/p)),this.contentVisible&&(b.isInFont||s.missingFile)&&(y&&!J?c.fillText(A,t,r):(this.paintChar(A,t,r,o,n),J&&(T=t+l*J.offset.x/p,b=r-l*J.offset.y/p,this.paintChar(J.fontChar,T,b,o,n))));A=h?i*v-x*g:i*v+x*g;a+=A,e&&c.restore()}}h?r.y-=a:r.x+=a*i,c.restore(),this.compose()}}}showType3Text(e){var t,r,i=this.ctx,a=this.current,o=a.font,n=a.fontSize,s=a.fontDirection,l=o.vertical?1:-1,c=a.charSpacing,p=a.wordSpacing,d=a.textHScale*s,u=a.fontMatrix||FONT_IDENTITY_MATRIX,g=e.length,m=a.textRenderingMode===TextRenderingMode.INVISIBLE;let h,_,f,v;if(!m&&0!==n){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),i.transform(...a.textMatrix),i.translate(a.x,a.y),i.scale(d,s),h=0;h<g;++h)"number"==typeof(_=e[h])?(this.ctx.translate(v=l*_*n/1e3,0),a.x+=v*d):(t=(_.isSpace?p:0)+c,(r=o.charProcOperatorList[_.operatorListId])?(this.contentVisible&&(this.processingType3=_,this.save(),i.scale(n,n),i.transform(...u),this.executeOperatorList(r),this.restore()),f=Util.applyTransform([_.width,0],u)[0]*n+t,i.translate(f,0),a.x+=f*d):warn(`Type3 character "${_.operatorListId}" is not available.`));i.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,i,a,o){this.ctx.rect(r,i,a-r,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;var r,i,a;return t="TilingPattern"===e[0]?(r=e[1],i=this.baseTransform||getCurrentTransform(this.ctx),a={createCanvasGraphics:e=>new CanvasGraphics(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},new TilingPattern(e,r,this.ctx,a,i)):this._getPattern(e[1],e[2])}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){this.ctx.strokeStyle=this.current.strokeColor=Util.makeHexColor(e,t,r),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,r){this.ctx.fillStyle=this.current.fillColor=Util.makeHexColor(e,t,r),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=getShadingPattern(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){var t,r,i;this.contentVisible&&(t=this.ctx,this.save(),e=this._getPattern(e),t.fillStyle=e.getPattern(t,this,getCurrentTransformInverse(t),PathType.SHADING),e=getCurrentTransformInverse(t),{width:t,height:r}=t.canvas,[t,r,e,i]=Util.getAxialAlignedBoundingBox([0,0,t,r],e),this.ctx.fillRect(t,r,e-t,i-r),this.compose(this.current.getClippedPathBoundingBox()),this.restore())}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(e,t){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=getCurrentTransform(this.ctx),t)&&(e=t[2]-t[0],this.ctx.rect(t[0],t[1],e,t[3]-t[1]),this.current.updateRectMinMax(getCurrentTransform(this.ctx),t),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(this.contentVisible){this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);var r=this.ctx,i=(t.isolated||info("TODO: Support non-isolated groups."),t.knockout&&warn("Knockout groups not supported."),getCurrentTransform(r));if(t.matrix&&r.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");var a=Util.getAxialAlignedBoundingBox(t.bbox,getCurrentTransform(r)),o=[0,0,r.canvas.width,r.canvas.height],a=Util.intersect(a,o)||[0,0,0,0],o=Math.floor(a[0]),n=Math.floor(a[1]),s=Math.max(Math.ceil(a[2])-o,1),a=Math.max(Math.ceil(a[3])-n,1);this.current.startNewPathAndClipBox([0,0,s,a]);let e="groupAt"+this.groupLevel;t.smask&&(e+="_smask_"+this.smaskCounter++%2);s=this.cachedCanvases.getCanvas(e,s,a),a=s.context;a.translate(-o,-n),a.transform(...i),t.smask?this.smaskStack.push({canvas:s.canvas,context:a,offsetX:o,offsetY:n,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(r.setTransform(1,0,0,1,0,0),r.translate(o,n),r.save()),copyCtxState(r,a),this.ctx=a,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}}endGroup(e){var t,r;this.contentVisible&&(this.groupLevel--,t=this.ctx,r=this.groupStack.pop(),this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask?(this.tempSMask=this.smaskStack.pop(),this.restore()):(this.ctx.restore(),r=getCurrentTransform(this.ctx),this.restore(),this.ctx.save(),this.ctx.setTransform(...r),e=Util.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(e)))}beginAnnotation(e,t,r,i,a){var o,n,s,l,c;this.#restoreInitialState(),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t&&(o=t[2]-t[0],n=t[3]-t[1],a&&this.annotationCanvasMap?((r=r.slice())[4]-=t[0],r[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=o,t[3]=n,[a,s]=Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx)),c=this.viewportScale,l=Math.ceil(o*this.outputScaleX*c),c=Math.ceil(n*this.outputScaleY*c),{canvas:l,context:c}=(this.annotationCanvas=this.canvasFactory.create(l,c),this.annotationCanvas),this.annotationCanvasMap.set(e,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=c,this.ctx.save(),this.ctx.setTransform(a,0,0,-s,0,n*s),resetCtxToDefault(this.ctx)):(resetCtxToDefault(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,n),this.ctx.clip(),this.ctx.beginPath())),this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#drawFilter(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){var t,r;this.contentVisible&&(t=e.count,(e=this.getObject(e.data,e)).count=t,t=this.ctx,(r=this.processingType3)&&(void 0===r.compiled&&(r.compiled=compileType3Glyph(e)),r.compiled)?r.compiled(t):(e=(r=this._createMaskCanvas(e)).canvas,t.save(),t.setTransform(1,0,0,1,0,0),t.drawImage(e,r.offsetX,r.offsetY),t.restore(),this.compose()))}paintImageMaskXObjectRepeat(e,r,i=0,a=0,o,n){if(this.contentVisible){e=this.getObject(e.data,e);var s=this.ctx,l=(s.save(),getCurrentTransform(s)),c=(s.transform(r,i,a,o,0,0),this._createMaskCanvas(e));s.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let e=0,t=n.length;e<t;e+=2){var p=Util.transform(l,[r,i,a,o,n[e],n[e+1]]),[p,d]=Util.applyTransform([0,0],p);s.drawImage(c.canvas,p,d)}s.restore(),this.compose()}}paintImageMaskXObjectGroup(e){if(this.contentVisible){var t,r=this.ctx,i=this.current.fillColor,a=this.current.patternFill;for(t of e){var{data:o,width:n,height:s,transform:l}=t,c=this.cachedCanvases.getCanvas("maskCanvas",n,s),p=c.context,o=(p.save(),this.getObject(o,t));putBinaryImageMask(p,o),p.globalCompositeOperation="source-in",p.fillStyle=a?i.getPattern(p,this,getCurrentTransformInverse(r),PathType.FILL):i,p.fillRect(0,0,n,s),p.restore(),r.save(),r.transform(...l),r.scale(1,-1),drawImageAtIntegerCoords(r,c.canvas,0,0,n,s,0,-1,1,1),r.restore()}this.compose()}}paintImageXObject(e){this.contentVisible&&((e=this.getObject(e))?this.paintInlineImageXObject(e):warn("Dependent image isn't ready yet"))}paintImageXObjectRepeat(e,r,i,a){if(this.contentVisible){e=this.getObject(e);if(e){var o=e.width,n=e.height,s=[];for(let e=0,t=a.length;e<t;e+=2)s.push({transform:[r,0,0,i,a[e],a[e+1]],x:0,y:0,w:o,h:n});this.paintInlineImageXObjectGroup(e,s)}else warn("Dependent image isn't ready yet")}}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){var t,r;return"none"===this.current.transferMaps?e.bitmap:({bitmap:e,width:t,height:r}=e,(r=(t=this.cachedCanvases.getCanvas("inlineImage",t,r)).context).filter=this.current.transferMaps,r.drawImage(e,0,0),r.filter="none",t.canvas)}paintInlineImageXObject(t){if(this.contentVisible){var r=t.width,i=t.height,a=this.ctx;this.save(),isNodeJS||(o=a.filter,"none"!==o&&""!==o&&(a.filter="none")),a.scale(1/r,-1/i);let e;e=t.bitmap?this.applyTransferMapsToBitmap(t):"function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data?t:(putBinaryImageData(o=this.cachedCanvases.getCanvas("inlineImage",r,i).context,t),this.applyTransferMapsToCanvas(o));var o=this._scaleImage(e,getCurrentTransformInverse(a));a.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(a),t.interpolate),drawImageAtIntegerCoords(a,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,r,i),this.compose(),this.restore()}}paintInlineImageXObjectGroup(t,r){if(this.contentVisible){var i,a,o=this.ctx;let e;e=t.bitmap||(i=t.width,putBinaryImageData(i=this.cachedCanvases.getCanvas("inlineImage",i,t.height).context,t),this.applyTransferMapsToCanvas(i));for(a of r)o.save(),o.transform(...a.transform),o.scale(1,-1),drawImageAtIntegerCoords(o,e,a.x,a.y,a.w,a.h,0,-1,1,1),o.restore();this.compose()}}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){var t=this.current.isEmptyClip(),e=(this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e),this.ctx);this.pendingClip&&(t||(this.pendingClip===EO_CLIP?e.clip("evenodd"):e.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),e.beginPath()}getSinglePixelWidth(){var e,t,r;return this._cachedGetSinglePixelWidth||(0===(r=getCurrentTransform(this.ctx))[1]&&0===r[2]?this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(r[0]),Math.abs(r[3])):(e=Math.abs(r[0]*r[3]-r[2]*r[1]),t=Math.hypot(r[0],r[2]),r=Math.hypot(r[1],r[3]),this._cachedGetSinglePixelWidth=Math.max(t,r)/e)),this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){var r,i,a,o=this.current.lineWidth,{a:n,b:s,c:l,d:c}=this.ctx.getTransform();let e,t;0===s&&0===l?(a=Math.abs(n))===(r=Math.abs(c))?e=t=0===o?1/a:(i=a*o)<1?1/i:1:t=0===o?(e=1/a,1/r):(i=a*o,a=r*o,e=i<1?1/i:1,a<1?1/a:1):(r=Math.abs(n*c-s*l),i=Math.hypot(n,s),a=Math.hypot(l,c),t=0===o?(e=a/r,i/r):(n=o*r,e=n<a?a/n:1,n<i?i/n:1)),this._cachedScaleForStroking[0]=e,this._cachedScaleForStroking[1]=t}return this._cachedScaleForStroking}rescaleAndStroke(e){var r=this.ctx,i=this.current.lineWidth,[a,o]=this.getScaleForStroking();if(r.lineWidth=i||1,1===a&&1===o)r.stroke();else{i=r.getLineDash();if(e&&r.save(),r.scale(a,o),0<i.length){let t=Math.max(a,o);r.setLineDash(i.map(e=>e/t)),r.lineDashOffset/=t}r.stroke(),e&&r.restore()}}isContentVisible(){for(let e=this.markedContentStack.length-1;0<=e;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(let e in OPS)void 0!==CanvasGraphics.prototype[e]&&(CanvasGraphics.prototype[OPS[e]]=CanvasGraphics.prototype[e]);class GlobalWorkerOptions{static#port=null;static#src="";static get workerPort(){return this.#port}static set workerPort(e){if(!("undefined"!=typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");this.#port=e}static get workerSrc(){return this.#src}static set workerSrc(e){if("string"!=typeof e)throw new Error("Invalid `workerSrc` type.");this.#src=e}}class Metadata{#metadataMap;#data;constructor({parsedData:e,rawData:t}){this.#metadataMap=e,this.#data=t}getRaw(){return this.#data}get(e){return this.#metadataMap.get(e)??null}getAll(){return objectFromMap(this.#metadataMap)}has(e){return this.#metadataMap.has(e)}}let INTERNAL=Symbol("INTERNAL");class OptionalContentGroup{#isDisplay=!1;#isPrint=!1;#userSet=!1;#visible=!0;constructor(e,{name:t,intent:r,usage:i,rbGroups:a}){this.#isDisplay=!!(e&RenderingIntentFlag.DISPLAY),this.#isPrint=!!(e&RenderingIntentFlag.PRINT),this.name=t,this.intent=r,this.usage=i,this.rbGroups=a}get visible(){var e,t;return this.#userSet?this.#visible:!!this.#visible&&({print:e,view:t}=this.usage,this.#isDisplay?"OFF"!==t?.viewState:!this.#isPrint||"OFF"!==e?.printState)}_setVisible(e,t,r=!1){e!==INTERNAL&&unreachable("Internal method `_setVisible` called."),this.#userSet=r,this.#visible=t}}class OptionalContentConfig{#cachedGetHash=null;#groups=new Map;#initialHash=null;#order=null;constructor(e,t=RenderingIntentFlag.DISPLAY){if(this.renderingIntent=t,this.name=null,(this.creator=null)!==e){this.name=e.name,this.creator=e.creator,this.#order=e.order;for(var r of e.groups)this.#groups.set(r.id,new OptionalContentGroup(t,r));if("OFF"===e.baseState)for(var i of this.#groups.values())i._setVisible(INTERNAL,!1);for(var a of e.on)this.#groups.get(a)._setVisible(INTERNAL,!0);for(var o of e.off)this.#groups.get(o)._setVisible(INTERNAL,!1);this.#initialHash=this.getHash()}}#evaluateVisibilityExpression(r){var e=r.length;if(e<2)return!0;var i=r[0];for(let t=1;t<e;t++){var a=r[t];let e;if(Array.isArray(a))e=this.#evaluateVisibilityExpression(a);else{if(!this.#groups.has(a))return warn("Optional content group not found: "+a),!0;e=this.#groups.get(a).visible}switch(i){case"And":if(e)break;return!1;case"Or":if(e)return!0;break;case"Not":return!e;default:return!0}}return"And"===i}isVisible(e){if(0!==this.#groups.size)if(e){if("OCG"===e.type)return this.#groups.has(e.id)?this.#groups.get(e.id).visible:(warn("Optional content group not found: "+e.id),!0);if("OCMD"===e.type){if(e.expression)return this.#evaluateVisibilityExpression(e.expression);if(!e.policy||"AnyOn"===e.policy){for(var t of e.ids){if(!this.#groups.has(t))return warn("Optional content group not found: "+t),!0;if(this.#groups.get(t).visible)return!0}return!1}if("AllOn"===e.policy)for(var r of e.ids){if(!this.#groups.has(r))return warn("Optional content group not found: "+r),!0;if(!this.#groups.get(r).visible)return!1}else{if("AnyOff"===e.policy){for(var i of e.ids){if(!this.#groups.has(i))return warn("Optional content group not found: "+i),!0;if(!this.#groups.get(i).visible)return!0}return!1}if("AllOff"===e.policy)for(var a of e.ids){if(!this.#groups.has(a))return warn("Optional content group not found: "+a),!0;if(this.#groups.get(a).visible)return!1}else warn(`Unknown optional content policy ${e.policy}.`)}}else warn(`Unknown group type ${e.type}.`)}else info("Optional content group not defined.");return!0}setVisibility(e,t=!0,r=!0){var i=this.#groups.get(e);if(i){if(r&&t&&i.rbGroups.length)for(var a of i.rbGroups)for(var o of a)o!==e&&this.#groups.get(o)?._setVisible(INTERNAL,!1,!0);i._setVisible(INTERNAL,!!t,!0),this.#cachedGetHash=null}else warn("Optional content group not found: "+e)}setOCGState({state:e,preserveRB:t}){let r;for(var i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}var a=this.#groups.get(i);if(a)switch(r){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!a.visible,t)}}this.#cachedGetHash=null}get hasInitialVisibility(){return null===this.#initialHash||this.getHash()===this.#initialHash}getOrder(){return this.#groups.size?this.#order?this.#order.slice():[...this.#groups.keys()]:null}getGroups(){return 0<this.#groups.size?objectFromMap(this.#groups):null}getGroup(e){return this.#groups.get(e)||null}getHash(){if(null!==this.#cachedGetHash)return this.#cachedGetHash;var e,t,r=new MurmurHash3_64;for([e,t]of this.#groups)r.update(e+":"+t.visible);return this.#cachedGetHash=r.hexdigest()}}class PDFDataTransportStream{constructor(e,{disableRange:t=!1,disableStream:r=!1}){assert(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');var{length:i,initialData:a,progressiveDone:o,contentDispositionFilename:n}=e;this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=n,0<a?.length&&(o=(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a:new Uint8Array(a)).buffer,this._queuedChunks.push(o)),this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:t,chunk:e}){let r=(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e:new Uint8Array(e)).buffer;void 0===t?this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r):assert(this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(r),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){void 0===e.total?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){e=this._rangeReaders.indexOf(e);0<=e&&this._rangeReaders.splice(e,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var e=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){var r;return t<=this._progressiveDataLength?null:(r=new PDFDataTransportStreamRangeReader(this,e,t),this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r)}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(var t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(e,t,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=isPdfFile(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(var a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),(e._fullRequestReader=this).onProgress=null}_enqueue(e){this._done||(0<this._requests.length?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){var e;return 0<this._queuedChunks.length?{value:this._queuedChunks.shift(),done:!1}:this._done?{value:void 0,done:!0}:(e=Promise.withResolvers(),this._requests.push(e),e.promise)}cancel(e){this._done=!0;for(var t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{var t;this._requests.shift().resolve({value:e,done:!1});for(t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){var e;return this._queuedChunk?(e=this._queuedChunk,this._queuedChunk=null,{value:e,done:!1}):this._done?{value:void 0,done:!0}:(e=Promise.withResolvers(),this._requests.push(e),e.promise)}cancel(e){this._done=!0;for(var t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(e){let a=!0,t=l("filename\\*","i").exec(e);var r;return t?(r=c(t=t[1]),i(r=n(r=p(r=unescape(r))))):(t=(e=>{let i=[],t,r=l("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(t=r.exec(e));){var[,a,o,n]=t;if((a=parseInt(a,10))in i){if(0===a)break}else i[a]=[o,n]}var s=[];for(let r=0;r<i.length&&r in i;++r){let[e,t]=i[r];t=c(t),e&&(t=unescape(t),0===r)&&(t=p(t)),s.push(t)}return s.join("")})(e))?i(n(t)):(t=l("filename","i").exec(e))?i(n(c(t=t[1]))):"";function l(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function o(e,t){if(e){if(!/^[\x00-\xFF]+$/.test(t))return t;try{var r=new TextDecoder(e,{fatal:!0}),i=stringToBytes(t);t=r.decode(i),a=!1}catch{}}return t}function i(e){return e=a&&/[\x80-\xff]/.test(e)&&(e=o("utf-8",e),a)?o("iso-8859-1",e):e}function c(e){if(e.startsWith('"')){var t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){var r=t[e].indexOf('"');-1!==r&&(t[e]=t[e].slice(0,r),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function p(e){var t=e.indexOf("'");return-1===t?e:o(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function n(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,r,i){if("q"===r||"Q"===r)return o(t,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{i=atob(i)}catch{}return o(t,i)})}}function createHeaders(e,t){var r=new Headers;if(e&&t&&"object"==typeof t)for(var i in t){var a=t[i];void 0!==a&&r.append(i,a)}return r}function getResponseOrigin(e){try{return new URL(e).origin}catch{}return null}function validateRangeRequestCapabilities({responseHeaders:e,isHttp:t,rangeChunkSize:r,disableRange:i}){var a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(e.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o)<=2*r||!i&&t&&"bytes"===e.get("Accept-Ranges")&&"identity"===(e.get("Content-Encoding")||"identity")&&(a.allowRangeRequests=!0),a}function extractFilenameFromHeader(t){t=t.get("Content-Disposition");if(t){let e=getFilenameFromContentDispositionHeader(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(isPdfFile(e))return e}return null}function createResponseStatusError(e,t){return 404===e||0===e&&t.startsWith("file:")?new MissingPDFException('Missing PDF "'+t+'".'):new UnexpectedResponseException(`Unexpected server response (${e}) while retrieving PDF "${t}".`,e)}function validateResponseStatus(e){return 200===e||206===e}function createFetchOptions(e,t,r){return{method:"GET",headers:e,signal:r.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function getArrayBuffer(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(warn("getArrayBuffer - unexpected data format: "+e),new Uint8Array(e).buffer)}class PDFFetchStream{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=createHeaders(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(e,t){return t<=this._progressiveDataLength?null:(e=new PDFFetchStreamRangeReader(this,e,t),this._rangeRequestReaders.push(e),e)}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(var t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class PDFFetchStreamReader{constructor(i){this._stream=i,this._reader=null,this._loaded=0,this._filename=null;var e=i.source,t=(this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,new Headers(i.headers));let a=e.url;fetch(a,createFetchOptions(t,this._withCredentials,this._abortController)).then(e=>{if(i._responseOrigin=getResponseOrigin(e.url),!validateResponseStatus(e.status))throw createResponseStatusError(e.status,a);this._reader=e.body.getReader(),this._headersCapability.resolve();var e=e.headers,{allowRangeRequests:t,suggestedLength:r}=validateRangeRequestCapabilities({responseHeaders:e,isHttp:i.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=t,this._contentLength=r||this._contentLength,this._filename=extractFilenameFromHeader(e),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;var{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(r,e,t){this._stream=r,this._reader=null,this._loaded=0;var i=r.source,a=(this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController,new Headers(r.headers));a.append("Range",`bytes=${e}-`+(t-1));let o=i.url;fetch(o,createFetchOptions(a,this._withCredentials,this._abortController)).then(e=>{var t=getResponseOrigin(e.url);if(t!==r._responseOrigin)throw new Error(`Expected range response-origin "${t}" to match "${r._responseOrigin}".`);if(!validateResponseStatus(e.status))throw createResponseStatusError(e.status,o);this._readCapability.resolve(),this._reader=e.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;var{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:getArrayBuffer(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}let OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(e){e=e.response;return"string"!=typeof e?e:stringToBytes(e).buffer}class NetworkManager{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:r}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=createHeaders(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){let t=new XMLHttpRequest;var r,i,a=this.currXhrId++,o=this.pendingRequests[a]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for([r,i]of this.headers)t.setRequestHeader(r,i);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-`+(e.end-1)),o.expectedStatus=PARTIAL_CONTENT_RESPONSE):o.expectedStatus=OK_RESPONSE,t.responseType="arraybuffer",assert(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,a),t.onprogress=this.onProgress.bind(this,a),o.onHeadersReceived=e.onHeadersReceived,o.onDone=e.onDone,o.onError=e.onError,o.onProgress=e.onProgress,t.send(null),a}onProgress(e,t){e=this.pendingRequests[e];e&&e.onProgress?.(t)}onStateChange(e,t){var r,i,a=this.pendingRequests[e];a&&(2<=(r=a.xhr).readyState&&a.onHeadersReceived&&(a.onHeadersReceived(),delete a.onHeadersReceived),4===r.readyState)&&e in this.pendingRequests&&(delete this.pendingRequests[e],(0!==r.status||!this.isHttp)&&((e=r.status||OK_RESPONSE)===OK_RESPONSE&&a.expectedStatus===PARTIAL_CONTENT_RESPONSE||e===a.expectedStatus)?(i=network_getArrayBuffer(r),e===PARTIAL_CONTENT_RESPONSE?(e=r.getResponseHeader("Content-Range"),(e=/bytes (\d+)-(\d+)\/(\d+)/.exec(e))?a.onDone({begin:parseInt(e[1],10),chunk:i}):(warn('Missing or invalid "Content-Range" header.'),a.onError(0))):i?a.onDone({begin:0,chunk:i}):a.onError(r.status)):a.onError(r.status))}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){var t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class PDFNetworkStream{constructor(e){this._source=e,this._manager=new NetworkManager(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){e=this._rangeRequestReaders.indexOf(e);0<=e&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){e=new PDFNetworkStreamRangeRequestReader(this._manager,e,t);return e.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(e),e}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(var t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class PDFNetworkStreamFullRequestReader{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){var e=this._fullRequestId,t=this._manager.getRequestXhr(e),t=(this._manager._responseOrigin=getResponseOrigin(t.responseURL),t.getAllResponseHeaders()),t=new Headers(t?t.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(e=>{var[e,...t]=e.split(": ");return[e,t.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:i}=validateRangeRequestCapabilities({responseHeaders:t,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=i||this._contentLength,this._filename=extractFilenameFromHeader(t),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(0<this._requests.length?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(0<this._cachedChunks.length)){for(var t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=createResponseStatusError(e,this._url),this._headersCapability.reject(this._storedError);for(var t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;var e;return 0<this._cachedChunks.length?{value:this._cachedChunks.shift(),done:!1}:this._done?{value:void 0,done:!0}:(e=Promise.withResolvers(),this._requests.push(e),e.promise)}cancel(e){this._done=!0,this._headersCapability.reject(e);for(var t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e=getResponseOrigin(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){var t,e=e.chunk;0<this._requests.length?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=createResponseStatusError(e,this._url);for(var t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;var e;return null!==this._queuedChunk?(e=this._queuedChunk,this._queuedChunk=null,{value:e,done:!1}):this._done?{value:void 0,done:!0}:(e=Promise.withResolvers(),this._requests.push(e),e.promise)}cancel(e){this._done=!0;for(var t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}let urlRegex=/^[a-z][a-z0-9\-+.]+:/i;function parseUrlOrPath(e){var t;return urlRegex.test(e)?new URL(e):(t=process.getBuiltinModule("url"),new URL(t.pathToFileURL(e)))}class PDFNodeStream{constructor(e){this.source=e,this.url=parseUrlOrPath(e.url),assert("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNodeStreamFsFullReader(this),this._fullRequestReader}getRangeReader(e,t){return t<=this._progressiveDataLength?null:(e=new PDFNodeStreamFsRangeReader(this,e,t),this._rangeRequestReaders.push(e),e)}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(var t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class PDFNodeStreamFsFullReader{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;e=e.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let t=process.getBuiltinModule("fs");t.promises.lstat(this._url).then(e=>{this._contentLength=e.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},e=>{"ENOENT"===e.code&&(e=new MissingPDFException(`Missing PDF "${this._url}".`)),this._storedError=e,this._headersCapability.reject(e)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;var e=this._readableStream.read();return null===e?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){(this._readableStream=e).on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PDFNodeStreamFsRangeReader{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();e=e.source,this._isStreamingSupported=!e.disableStream,e=process.getBuiltinModule("fs");this._setReadableStream(e.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;var e=this._readableStream.read();return null===e?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){(this._readableStream=e).on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}let MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30,DEFAULT_FONT_ASCENT=.8;class TextLayer{#capability=Promise.withResolvers();#container=null;#disableProcessItems=!1;#fontInspectorEnabled=!!globalThis.FontInspector?.enabled;#lang=null;#layoutTextParams=null;#pageHeight=0;#pageWidth=0;#reader=null;#rootContainer=null;#rotation=0;#scale=0;#styleCache=Object.create(null);#textContentItemsStr=[];#textContentSource=null;#textDivs=[];#textDivProperties=new WeakMap;#transform=null;static#ascentCache=new Map;static#canvasContexts=new Map;static#canvasCtxFonts=new WeakMap;static#minFontSize=null;static#pendingTextLayers=new Set;constructor({textContentSource:t,container:e,viewport:r}){if(t instanceof ReadableStream)this.#textContentSource=t;else{if("object"!=typeof t)throw new Error('No "textContentSource" parameter specified.');this.#textContentSource=new ReadableStream({start(e){e.enqueue(t),e.close()}})}this.#container=this.#rootContainer=e,this.#scale=r.scale*(globalThis.devicePixelRatio||1),this.#rotation=r.rotation,this.#layoutTextParams={div:null,properties:null,ctx:null};var{pageWidth:i,pageHeight:a,pageX:o,pageY:n}=r.rawDims;this.#transform=[1,0,0,-1,-o,n+a],this.#pageWidth=i,this.#pageHeight=a,TextLayer.#ensureMinFontSizeComputed(),setLayerDimensions(e,r),this.#capability.promise.finally(()=>{TextLayer.#pendingTextLayers.delete(this),this.#layoutTextParams=null,this.#styleCache=null}).catch(()=>{})}static get fontFamilyMap(){var{isWindows:e,isFirefox:t}=util_FeatureTest.platform;return shadow(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){let r=()=>{this.#reader.read().then(({value:e,done:t})=>{t?this.#capability.resolve():(this.#lang??=e.lang,Object.assign(this.#styleCache,e.styles),this.#processItems(e.items),r())},this.#capability.reject)};return this.#reader=this.#textContentSource.getReader(),TextLayer.#pendingTextLayers.add(this),r(),this.#capability.promise}update({viewport:e,onBefore:t=null}){var r=e.scale*(globalThis.devicePixelRatio||1),e=e.rotation;if(e!==this.#rotation&&(t?.(),this.#rotation=e,setLayerDimensions(this.#rootContainer,{rotation:e})),r!==this.#scale){t?.(),this.#scale=r;var i,a={div:null,properties:null,ctx:TextLayer.#getCtx(this.#lang)};for(i of this.#textDivs)a.properties=this.#textDivProperties.get(i),a.div=i,this.#layout(a)}}cancel(){var e=new AbortException("TextLayer task cancelled.");this.#reader?.cancel(e).catch(()=>{}),this.#reader=null,this.#capability.reject(e)}get textDivs(){return this.#textDivs}get textContentItemsStr(){return this.#textContentItemsStr}#processItems(e){if(!this.#disableProcessItems){this.#layoutTextParams.ctx??=TextLayer.#getCtx(this.#lang);var t,r,i=this.#textDivs,a=this.#textContentItemsStr;for(t of e){if(i.length>MAX_TEXT_DIVS_TO_RENDER)return warn("Ignoring additional textDivs for performance reasons."),void(this.#disableProcessItems=!0);void 0===t.str?"beginMarkedContentProps"===t.type||"beginMarkedContent"===t.type?(r=this.#container,this.#container=document.createElement("span"),this.#container.classList.add("markedContent"),null!==t.id&&this.#container.setAttribute("id",""+t.id),r.append(this.#container)):"endMarkedContent"===t.type&&(this.#container=this.#container.parentNode):(a.push(t.str),this.#appendText(t))}}}#appendText(e){var t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0},i=(this.#textDivs.push(t),Util.transform(this.#transform,e.transform));let a=Math.atan2(i[1],i[0]);var o=this.#styleCache[e.fontName],n=(o.vertical&&(a+=Math.PI/2),this.#fontInspectorEnabled&&o.fontSubstitution||o.fontFamily),n=TextLayer.fontFamilyMap.get(n)||n,s=Math.hypot(i[2],i[3]),l=s*TextLayer.#getAscent(n,this.#lang);let c,p;p=0===a?(c=i[4],i[5]-l):(c=i[4]+l*Math.sin(a),i[5]-l*Math.cos(a));var i="calc(var(--scale-factor)*",l=t.style;this.#container===this.#rootContainer?(l.left=(100*c/this.#pageWidth).toFixed(2)+"%",l.top=(100*p/this.#pageHeight).toFixed(2)+"%"):(l.left=i+c.toFixed(2)+"px)",l.top=i+p.toFixed(2)+"px)"),l.fontSize=i+(TextLayer.#minFontSize*s).toFixed(2)+"px)",l.fontFamily=n,r.fontSize=s,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#fontInspectorEnabled&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),0!==a&&(r.angle=a*(180/Math.PI));let d=!1;(d=1<e.str.length||" "!==e.str&&e.transform[0]!==e.transform[3]&&(i=Math.abs(e.transform[0]))!==(l=Math.abs(e.transform[3]))&&1.5<Math.max(i,l)/Math.min(i,l)?!0:d)&&(r.canvasWidth=o.vertical?e.height:e.width),this.#textDivProperties.set(t,r),this.#layoutTextParams.div=t,this.#layoutTextParams.properties=r,this.#layout(this.#layoutTextParams),r.hasText&&this.#container.append(t),r.hasEOL&&((n=document.createElement("br")).setAttribute("role","presentation"),this.#container.append(n))}#layout(e){var t,r,i,{div:e,properties:a,ctx:o}=e,n=e.style;let s="";1<TextLayer.#minFontSize&&(s=`scale(${1/TextLayer.#minFontSize})`),0!==a.canvasWidth&&a.hasText&&(t=n.fontFamily,{canvasWidth:r,fontSize:i}=a,i=(TextLayer.#ensureCtxFont(o,i*this.#scale,t),o.measureText(e.textContent)).width,0<i)&&(s=`scaleX(${r*this.#scale/i}) `+s),0<(s=0!==a.angle?`rotate(${a.angle}deg) `+s:s).length&&(n.transform=s)}static cleanup(){if(!(0<this.#pendingTextLayers.size)){this.#ascentCache.clear();for(var{canvas:e}of this.#canvasContexts.values())e.remove();this.#canvasContexts.clear()}}static#getCtx(e=null){let t=this.#canvasContexts.get(e||="");var r;return t||((r=document.createElement("canvas")).className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#canvasContexts.set(e,t),this.#canvasCtxFonts.set(t,{size:0,family:""})),t}static#ensureCtxFont(e,t,r){var i=this.#canvasCtxFonts.get(e);t===i.size&&r===i.family||(e.font=t+"px "+r,i.size=t,i.family=r)}static#ensureMinFontSizeComputed(){var e;null===this.#minFontSize&&((e=document.createElement("div")).style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#minFontSize=e.getBoundingClientRect().height,e.remove())}static#getAscent(t,e){var r=this.#ascentCache.get(t);if(r)return r;r=this.#getCtx(e),r.canvas.width=r.canvas.height=DEFAULT_FONT_SIZE,this.#ensureCtxFont(r,DEFAULT_FONT_SIZE,t),e=r.measureText("");let i=e.fontBoundingBoxAscent,a=Math.abs(e.fontBoundingBoxDescent);if(i){let e=i/(i+a);return this.#ascentCache.set(t,e),r.canvas.width=r.canvas.height=0,e}r.strokeStyle="red",r.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),r.strokeText("g",0,0);let o=r.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;a=0;for(let e=o.length-1-3;0<=e;e-=4)if(0<o[e]){a=Math.ceil(e/4/DEFAULT_FONT_SIZE);break}r.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),r.strokeText("A",0,DEFAULT_FONT_SIZE),o=r.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;for(let e=i=0,t=o.length;e<t;e+=4)if(0<o[e]){i=DEFAULT_FONT_SIZE-Math.floor(e/4/DEFAULT_FONT_SIZE);break}r.canvas.width=r.canvas.height=0;let n=i?i/(i+a):DEFAULT_FONT_ASCENT;return this.#ascentCache.set(t,n),n}}class XfaText{static textContent(e){let o=[];var t={items:o,styles:Object.create(null)};return function t(r){if(r){let e=null;var i=r.name;if("#text"===i)e=r.value;else{if(!XfaText.shouldBuildText(i))return;r?.attributes?.textContent?e=r.attributes.textContent:r.value&&(e=r.value)}if(null!==e&&o.push({str:e}),r.children)for(var a of r.children)t(a)}}(e),t}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}let DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=isNodeJS?NodeCanvasFactory:DOMCanvasFactory,DefaultCMapReaderFactory=isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory,DefaultFilterFactory=isNodeJS?NodeFilterFactory:DOMFilterFactory,DefaultStandardFontDataFactory=isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory;function getDocument(e={}){"string"==typeof e||e instanceof URL?e={url:e}:(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});let i=new PDFDocumentLoadingTask,a=i.docId,t=e.url?getUrlProp(e.url):null,o=e.data?getDataProp(e.data):null,n=e.httpHeaders||null,s=!0===e.withCredentials;var r=e.password??null;let l=e.range instanceof PDFDataRangeTransport?e.range:null,c=Number.isInteger(e.rangeChunkSize)&&0<e.rangeChunkSize?e.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE,p=e.worker instanceof PDFWorker?e.worker:null;var d=e.verbosity,u="string"!=typeof e.docBaseUrl||isDataScheme(e.docBaseUrl)?null:e.docBaseUrl,g="string"==typeof e.cMapUrl?e.cMapUrl:null,m=!1!==e.cMapPacked,h=e.CMapReaderFactory||DefaultCMapReaderFactory,_="string"==typeof e.standardFontDataUrl?e.standardFontDataUrl:null,f=e.StandardFontDataFactory||DefaultStandardFontDataFactory,v=!0!==e.stopAtErrors,y=Number.isInteger(e.maxImageSize)&&-1<e.maxImageSize?e.maxImageSize:-1,P=!1!==e.isEvalSupported,S="boolean"==typeof e.isOffscreenCanvasSupported?e.isOffscreenCanvasSupported:!isNodeJS,w="boolean"==typeof e.isImageDecoderSupported?e.isImageDecoderSupported:!isNodeJS&&(util_FeatureTest.platform.isFirefox||!globalThis.chrome),b=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,C="boolean"==typeof e.disableFontFace?e.disableFontFace:isNodeJS,k=!0===e.fontExtraProperties,T=!0===e.enableXfa,x=e.ownerDocument||globalThis.document;let A=!0===e.disableRange,J=!0===e.disableStream;var G=!0===e.disableAutoFetch,$=!0===e.pdfBug,E=e.CanvasFactory||DefaultCanvasFactory,L=e.FilterFactory||DefaultFilterFactory,M=!0===e.enableHWA;let I=l?l.length:e.length??NaN;var X="boolean"==typeof e.useSystemFonts?e.useSystemFonts:!isNodeJS&&!C,e="boolean"==typeof e.useWorkerFetch?e.useWorkerFetch:h===DOMCMapReaderFactory&&f===DOMStandardFontDataFactory&&g&&_&&isValidFetchUrl(g,document.baseURI)&&isValidFetchUrl(_,document.baseURI);setVerbosityLevel(d);let D={canvasFactory:new E({ownerDocument:x,enableHWA:M}),filterFactory:new L({docId:a,ownerDocument:x}),cMapReaderFactory:e?null:new h({baseUrl:g,isCompressed:m}),standardFontDataFactory:e?null:new f({baseUrl:_})},F=(p||(E={verbosity:d,port:GlobalWorkerOptions.workerPort},p=E.port?PDFWorker.fromPort(E):new PDFWorker(E),i._worker=p),{docId:a,apiVersion:"4.10.38",data:o,password:r,disableAutoFetch:G,rangeChunkSize:c,length:I,docBaseUrl:u,enableXfa:T,evaluatorOptions:{maxImageSize:y,disableFontFace:C,ignoreErrors:v,isEvalSupported:P,isOffscreenCanvasSupported:S,isImageDecoderSupported:w,canvasMaxAreaInBytes:b,fontExtraProperties:k,useSystemFonts:X,cMapUrl:e?g:null,standardFontDataUrl:e?_:null}}),O={disableFontFace:C,fontExtraProperties:k,ownerDocument:x,pdfBug:$,styleElement:null,loadingParams:{disableAutoFetch:G,enableXfa:T}};return p.promise.then(function(){if(i.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");var e=p.messageHandler.sendWithPromise("GetDocRequest",F,o?[o.buffer]:null);let r;if(l)r=new PDFDataTransportStream(l,{disableRange:A,disableStream:J});else if(!o){if(!t)throw new Error("getDocument - no `url` parameter provided.");let e;if(isNodeJS)if(isValidFetchUrl(t)){if("undefined"==typeof fetch||"undefined"==typeof Response||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");e=PDFFetchStream}else e=PDFNodeStream;else e=isValidFetchUrl(t)?PDFFetchStream:PDFNetworkStream;r=new e({url:t,length:I,httpHeaders:n,withCredentials:s,rangeChunkSize:c,disableRange:A,disableStream:J})}return e.then(e=>{if(i.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");var e=new MessageHandler(a,e,p.port),t=new WorkerTransport(e,i,r,O,D);i._transport=t,e.send("Ready",null)})}).catch(i._capability.reject),i}function getUrlProp(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(isNodeJS&&"string"==typeof e)return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(e){if(isNodeJS&&"undefined"!=typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"==typeof e)return stringToBytes(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"==typeof e&&!isNaN(e?.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function isRefProxy(e){return"object"==typeof e&&Number.isInteger(e?.num)&&0<=e.num&&Number.isInteger(e?.gen)&&0<=e.gen}class PDFDocumentLoadingTask{static#docId=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d"+PDFDocumentLoadingTask.#docId++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}}class PDFDataRangeTransport{constructor(e,t,r=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(var r of this._rangeListeners)r(e,t)}onDataProgress(t,r){this._readyCapability.promise.then(()=>{for(var e of this._progressListeners)e(t,r)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(var e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(var e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class PDFDocumentProxy{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){e=this._transport.getRenderingIntent(e).renderingIntent;return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class PDFPageProxy{#delayedCleanupTimeout=null;#pendingCleanup=!1;constructor(e,t,r,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new StatTimer:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:a=!1}={}){return new PageViewport({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){e=this._transport.getRenderingIntent(e).renderingIntent;return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:i=AnnotationMode.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:n=null,annotationCanvasMap:s=null,pageColors:l=null,printAnnotationStorage:c=null,isEditing:p=!1}){this._stats?.time("Overall");r=this._transport.getRenderingIntent(r,i,c,p);let{renderingIntent:d,cacheKey:u}=r,g=(this.#pendingCleanup=!1,this.#abortDelayedCleanup(),n||=this._transport.getOptionalContentConfig(d),this._intentStates.get(u)),m=(g||(g=Object.create(null),this._intentStates.set(u,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null),!!(d&RenderingIntentFlag.PRINT)),h=(g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(r)),e=>{g.renderTasks.delete(_),(this._maybeCleanupAfterRender||m)&&(this.#pendingCleanup=!0),this.#tryCleanup(!m),e?(_.capability.reject(e),this._abortOperatorList({intentState:g,reason:e instanceof Error?e:new Error(e)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled)&&globalThis.Stats.add(this.pageNumber,this._stats)}),_=new InternalRenderTask({callback:h,params:{canvasContext:e,viewport:t,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:s,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!m,pdfBug:this._pdfBug,pageColors:l});(g.renderTasks||=new Set).add(_);i=_.task;return Promise.all([g.displayReadyCapability.promise,n]).then(([e,t])=>{if(this.destroyed)h();else{if(this._stats?.time("Rendering"),!(t.renderingIntent&d))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:e,optionalContentConfig:t}),_.operatorListChanged()}}).catch(h),i}getOperatorList({intent:e="display",annotationMode:t=AnnotationMode.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){e=this._transport.getRenderingIntent(e,t,r,i,!0);let a=this._intentStates.get(e.cacheKey);a||(a=Object.create(null),this._intentStates.set(e.cacheKey,a));let o;return a.opListReadCapability||((o=Object.create(null)).operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(o))},a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(o),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(e)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size(e){return e.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(e=>XfaText.textContent(e));let r=this.streamTextContent(e);return new Promise(function(i,e){let t=r.getReader(),a={items:[],styles:Object.create(null),lang:null};!function r(){t.read().then(function({value:e,done:t}){t?i(a):(a.lang??=e.lang,Object.assign(a.styles,e.styles),a.items.push(...e.items),r())},e)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;var e,t=[];for(e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(var r of e.renderTasks)t.push(r.completed),r.cancel();return this.objs.clear(),this.#pendingCleanup=!1,this.#abortDelayedCleanup(),Promise.all(t)}cleanup(e=!1){this.#pendingCleanup=!0;var t=this.#tryCleanup(!1);return e&&t&&(this._stats&&=new StatTimer),t}#tryCleanup(e=!1){if(this.#abortDelayedCleanup(),!this.#pendingCleanup||this.destroyed)return!1;if(e)return this.#delayedCleanupTimeout=setTimeout(()=>{this.#delayedCleanupTimeout=null,this.#tryCleanup(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(var{renderTasks:t,operatorList:r}of this._intentStates.values())if(0<t.size||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),!(this.#pendingCleanup=!1)}#abortDelayedCleanup(){this.#delayedCleanupTimeout&&(clearTimeout(this.#delayedCleanupTimeout),this.#delayedCleanupTimeout=null)}_startRenderPage(e,t){t=this._intentStates.get(t);t&&(this._stats?.timeEnd("Page Request"),t.displayReadyCapability?.resolve(e))}_renderPageChunk(r,i){for(let e=0,t=r.length;e<t;e++)i.operatorList.fnArray.push(r.fnArray[e]),i.operatorList.argsArray.push(r.argsArray[e]);i.operatorList.lastChunk=r.lastChunk,i.operatorList.separateAnnots=r.separateAnnots;for(var e of i.renderTasks)e.operatorListChanged();r.lastChunk&&this.#tryCleanup(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:i}){var{map:r,transfer:a}=r;let o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},a).getReader(),n=this._intentStates.get(t),s=(n.streamReader=o,()=>{o.read().then(({value:e,done:t})=>{t?n.streamReader=null:this._transport.destroyed||(this._renderPageChunk(e,n),s())},e=>{if(n.streamReader=null,!this._transport.destroyed){if(n.operatorList){n.operatorList.lastChunk=!0;for(var t of n.renderTasks)t.operatorListChanged();this.#tryCleanup(!0)}if(n.displayReadyCapability)n.displayReadyCapability.reject(e);else{if(!n.opListReadCapability)throw e;n.opListReadCapability.reject(e)}}})});s()}_abortOperatorList({intentState:t,reason:r,force:e=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!e){if(0<t.renderTasks.size)return;if(r instanceof RenderingCancelledException){let e=RENDERING_CANCELLED_TIMEOUT;return 0<r.extraDelay&&r.extraDelay<1e3&&(e+=r.extraDelay),void(t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:r,force:!0})},e))}}if(t.streamReader.cancel(new AbortException(r.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(var[i,a]of this._intentStates)if(a===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}class LoopbackPort{#listeners=new Map;#deferred=Promise.resolve();postMessage(e,t){let r={data:structuredClone(e,t?{transfer:t}:null)};this.#deferred.then(()=>{for(var[e]of this.#listeners)e.call(this,r)})}addEventListener(r,i,a=null){let o=null;if(a?.signal instanceof AbortSignal){let e=a.signal;if(e.aborted)return void warn("LoopbackPort - cannot use an `aborted` signal.");let t=()=>this.removeEventListener(r,i);o=()=>e.removeEventListener("abort",t),e.addEventListener("abort",t)}this.#listeners.set(i,o)}removeEventListener(e,t){this.#listeners.get(t)?.(),this.#listeners.delete(t)}terminate(){for(var[,e]of this.#listeners)e?.();this.#listeners.clear()}}class PDFWorker{static#fakeWorkerId=0;static#isWorkerDisabled=!1;static#workerPorts;static{isNodeJS&&(this.#isWorkerDisabled=!0,GlobalWorkerOptions.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(e,t)=>{let r;try{if(!(r=new URL(e)).origin||"null"===r.origin)return!1}catch{return!1}e=new URL(t,r);return r.origin===e.origin},this._createCDNWrapper=e=>URL.createObjectURL(new Blob([`await import("${e}");`],{type:"text/javascript"}))}constructor({name:e=null,port:t=null,verbosity:r=getVerbosityLevel()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(PDFWorker.#workerPorts?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(t,this),this._initializeFromPort(t)}else this._initialize()}get promise(){return this._readyCapability.promise}#resolve(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),this.#resolve()}_initialize(){if(!PDFWorker.#isWorkerDisabled&&!PDFWorker.#mainThreadWorkerMessageHandler){let e=PDFWorker.workerSrc;try{PDFWorker._isSameOrigin(window.location.href,e)||(e=PDFWorker._createCDNWrapper(new URL(e,window.location).href));let t=new Worker(e,{type:"module"}),r=new MessageHandler("main","worker",t),i=()=>{a.abort(),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController,o=(t.addEventListener("error",()=>{this._webWorker||i()},{signal:a.signal}),r.on("test",e=>{a.abort(),this.destroyed||!e?i():(this._messageHandler=r,this._port=t,this._webWorker=t,this.#resolve())}),r.on("ready",e=>{if(a.abort(),this.destroyed)i();else try{o()}catch{this._setupFakeWorker()}}),()=>{var e=new Uint8Array;r.send("test",e,[e.buffer])});return void o()}catch{info("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorker.#isWorkerDisabled||(warn("Setting up fake worker."),PDFWorker.#isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(e=>{var t,r,i;this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):(t=new LoopbackPort,this._port=t,r="fake"+PDFWorker.#fakeWorkerId++,i=new MessageHandler(r+"_worker",r,t),e.setup(i,t),this._messageHandler=new MessageHandler(r,r+"_worker",t),this.#resolve())}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker?.terminate(),this._webWorker=null,PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler?.destroy(),this._messageHandler=null}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");var t=this.#workerPorts?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new PDFWorker(e)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>this.#mainThreadWorkerMessageHandler||(await import(this.workerSrc)).WorkerMessageHandler)())}}class WorkerTransport{#methodPromises=new Map;#pageCache=new Map;#pagePromises=new Map;#pageRefCache=new Map;#passwordCapability=null;constructor(e,t,r,i,a){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#cacheSimpleMethod(e,t=null){var r=this.#methodPromises.get(e);return r||(r=this.messageHandler.sendWithPromise(e,t),this.#methodPromises.set(e,r),r)}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(e,t=AnnotationMode.ENABLE,r=null,i=!1,a=!1){let o=RenderingIntentFlag.DISPLAY,n=SerializableEmpty;switch(e){case"any":o=RenderingIntentFlag.ANY;break;case"display":break;case"print":o=RenderingIntentFlag.PRINT;break;default:warn("getRenderingIntent - invalid intent: "+e)}var s=o&RenderingIntentFlag.PRINT&&r instanceof PrintAnnotationStorage?r:this.annotationStorage;switch(t){case AnnotationMode.DISABLE:o+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:o+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:o+=RenderingIntentFlag.ANNOTATIONS_STORAGE,n=s.serializable;break;default:warn("getRenderingIntent - invalid annotationMode: "+t)}i&&(o+=RenderingIntentFlag.IS_EDITING),a&&(o+=RenderingIntentFlag.OPLIST);var{ids:r,hash:i}=s.modifiedIds,a=[o,n.hash,i];return{renderingIntent:o,cacheKey:a.join("_"),annotationStorageSerializable:n,modifiedIds:r}}destroy(){if(!this.destroyCapability){this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#passwordCapability?.reject(new Error("Worker was destroyed during onPassword callback"));var e,t=[];for(e of this.#pageCache.values())t.push(e._destroy());this.#pageCache.clear(),this.#pagePromises.clear(),this.#pageRefCache.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var r=this.messageHandler.sendWithPromise("Terminate",null);t.push(r),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#methodPromises.clear(),this.filterFactory.destroy(),TextLayer.cleanup(),this._networkStream?.cancelAllRequests(new AbortException("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject)}return this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:p,loadingTask:a}=this;p.on("GetReader",(e,r)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},r.onPull=()=>{this._fullReader.read().then(function({value:e,done:t}){t?r.close():(assert(e instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(e),1,[e]))}).catch(e=>{r.error(e)})},r.onCancel=e=>{this._fullReader.cancel(e),r.ready.catch(e=>{if(!this.destroyed)throw e})}}),p.on("ReaderHeadersReady",async e=>{await this._fullReader.headersReady;var{isStreamingSupported:t,isRangeSupported:r,contentLength:i}=this._fullReader;return t&&r||(this._lastProgress&&a.onProgress?.(this._lastProgress),this._fullReader.onProgress=e=>{a.onProgress?.({loaded:e.loaded,total:e.total})}),{isStreamingSupported:t,isRangeSupported:r,contentLength:i}}),p.on("GetRangeReader",(e,r)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let t=this._networkStream.getRangeReader(e.begin,e.end);t?(r.onPull=()=>{t.read().then(function({value:e,done:t}){t?r.close():(assert(e instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(e),1,[e]))}).catch(e=>{r.error(e)})},r.onCancel=e=>{t.cancel(e),r.ready.catch(e=>{if(!this.destroyed)throw e})}):r.close()}),p.on("GetDoc",({pdfInfo:e})=>{this._numPages=e.numPages,this._htmlForXfa=e.htmlForXfa,delete e.htmlForXfa,a._capability.resolve(new PDFDocumentProxy(e,this))}),p.on("DocException",e=>{a._capability.reject(wrapReason(e))}),p.on("PasswordRequest",e=>{this.#passwordCapability=Promise.withResolvers();try{if(!a.onPassword)throw wrapReason(e);a.onPassword(e=>{e instanceof Error?this.#passwordCapability.reject(e):this.#passwordCapability.resolve({password:e})},e.code)}catch(e){this.#passwordCapability.reject(e)}return this.#passwordCapability.promise}),p.on("DataLoaded",e=>{a.onProgress?.({loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),p.on("StartRenderPage",e=>{this.destroyed||this.#pageCache.get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),p.on("commonobj",([a,e,o])=>{if(!this.destroyed&&!this.commonObjs.has(a))switch(e){case"Font":let{disableFontFace:t,fontExtraProperties:r,pdfBug:i}=this._params;if("error"in o){var n=o.error;warn("Error during font loading: "+n),this.commonObjs.resolve(a,n)}else{n=i&&globalThis.FontInspector?.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null;let e=new FontFaceObject(o,{disableFontFace:t,fontExtraProperties:r,inspectFont:n});this.fontLoader.bind(e).catch(()=>p.sendWithPromise("FontFallback",{id:a})).finally(()=>{!r&&e.data&&(e.data=null),this.commonObjs.resolve(a,e)})}break;case"CopyLocalImage":var s,l=o.imageRef;assert(l,"The imageRef must be defined.");for(s of this.#pageCache.values())for(var[,c]of s.objs)if(c?.ref===l)return c.dataLen?(this.commonObjs.resolve(a,structuredClone(c)),c.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(a,o);break;default:throw new Error("Got unknown common object type "+e)}return null}),p.on("obj",([e,t,r,i])=>{if(!this.destroyed){var a=this.#pageCache.get(t);if(!a.objs.has(e))if(0===a._intentStates.size)i?.bitmap?.close();else switch(r){case"Image":a.objs.resolve(e,i),i?.dataLen>MAX_IMAGE_SIZE_TO_CACHE&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(e,i);break;default:throw new Error("Got unknown object type "+r)}}}),p.on("DocProgress",e=>{this.destroyed||a.onProgress?.({loaded:e.loaded,total:e.total})}),p.on("FetchBuiltInCMap",async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(this.cMapReaderFactory)return this.cMapReaderFactory.fetch(e);throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")}),p.on("FetchStandardFontData",async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(this.standardFontDataFactory)return this.standardFontDataFactory.fetch(e);throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");var{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));let r=t-1,e=this.#pagePromises.get(r);var i;return e||(i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(e=>{if(this.destroyed)throw new Error("Transport destroyed");e.refStr&&this.#pageRefCache.set(e.refStr,t);e=new PDFPageProxy(r,e,this,this._params.pdfBug);return this.#pageCache.set(r,e),e}),this.#pagePromises.set(r,i),i)}getPageIndex(e){return isRefProxy(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#cacheSimpleMethod("GetFieldObjects")}hasJSActions(){return this.#cacheSimpleMethod("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#cacheSimpleMethod("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#cacheSimpleMethod("GetOptionalContentConfig").then(e=>new OptionalContentConfig(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){var e="GetMetadata",t=this.#methodPromises.get(e);return t||(t=this.messageHandler.sendWithPromise(e,null).then(e=>({info:e[0],metadata:e[1]?new Metadata(e[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})),this.#methodPromises.set(e,t),t)}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(var t of this.#pageCache.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#methodPromises.clear(),this.filterFactory.destroy(!0),TextLayer.cleanup()}}cachedPageNumber(e){return isRefProxy(e)?(e=0===e.gen?e.num+"R":e.num+"R"+e.gen,this.#pageRefCache.get(e)??null):null}}let INITIAL_DATA=Symbol("INITIAL_DATA");class PDFObjects{#objs=Object.create(null);#ensureObj(e){return this.#objs[e]||={...Promise.withResolvers(),data:INITIAL_DATA}}get(t,r=null){if(r){let e=this.#ensureObj(t);return e.promise.then(()=>r(e.data)),null}let e=this.#objs[t];if(e&&e.data!==INITIAL_DATA)return e.data;throw new Error(`Requesting object that isn't resolved yet ${t}.`)}has(e){e=this.#objs[e];return!!e&&e.data!==INITIAL_DATA}delete(e){var t=this.#objs[e];return!(!t||t.data===INITIAL_DATA||(delete this.#objs[e],0))}resolve(e,t=null){e=this.#ensureObj(e);e.data=t,e.resolve()}clear(){for(var e in this.#objs){e=this.#objs[e].data;e?.bitmap?.close()}this.#objs=Object.create(null)}*[Symbol.iterator](){for(var e in this.#objs){var t=this.#objs[e].data;t!==INITIAL_DATA&&(yield[e,t])}}}class RenderTask{#internalRenderTask=null;constructor(e){this.#internalRenderTask=e,this.onContinue=null}get promise(){return this.#internalRenderTask.capability.promise}cancel(e=0){this.#internalRenderTask.cancel(null,e)}get separateAnnots(){var e,t=this.#internalRenderTask.operatorList.separateAnnots;return!!t&&(e=this.#internalRenderTask.annotationCanvasMap,t.form||t.canvas&&0<e?.size)}}class InternalRenderTask{#rAF=null;static#canvasInUse=new WeakSet;constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:a,operatorList:o,pageIndex:n,canvasFactory:s,filterFactory:l,useRequestAnimationFrame:c=!1,pdfBug:p=!1,pageColors:d=null}){this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=n,this.canvasFactory=s,this.filterFactory=l,this._pdfBug=p,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===c&&"undefined"!=typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(!this.cancelled){if(this._canvas){if(InternalRenderTask.#canvasInUse.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#canvasInUse.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var{canvasContext:r,viewport:i,transform:a,background:o}=this.params;this.gfx=new CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#rAF&&(window.cancelAnimationFrame(this.#rAF),this.#rAF=null),InternalRenderTask.#canvasInUse.delete(this._canvas),this.callback(e||new RenderingCancelledException("Rendering cancelled, page "+(this._pageIndex+1),t))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#rAF=window.requestAnimationFrame(()=>{this.#rAF=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk)&&(this.gfx.endDrawing(),InternalRenderTask.#canvasInUse.delete(this._canvas),this.callback()))}}let version="4.10.38",build="f9bea397f";function makeColorComp(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function scaleAndClamp(e){return Math.max(0,Math.min(255,255*e))}class ColorConverters{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return[e=scaleAndClamp(e),e,e]}static G_HTML([e]){e=makeColorComp(e);return"#"+e+e+e}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(scaleAndClamp)}static RGB_HTML(e){return"#"+e.map(makeColorComp).join("")}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[scaleAndClamp(1-Math.min(1,e+i)),scaleAndClamp(1-Math.min(1,r+i)),scaleAndClamp(1-Math.min(1,t+i))]}static CMYK_HTML(e){e=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([e,t,r]){e=1-e,t=1-t,r=1-r;return["CMYK",e,t,r,Math.min(e,t,r)]}}class BaseSVGFactory{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");var i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",e+"px"),i.setAttribute("height",t+"px")),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} `+t),i}createElement(e){if("string"!=typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){unreachable("Abstract method `_createSVG` called.")}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(e){return document.createElementNS(SVG_NS,e)}}class XfaLayer{static setupStorage(e,t,r,i,a){var o=i.getValue(t,{value:null});switch(r.name){case"textarea":null!==o.value&&(e.textContent=o.value),"print"!==a&&e.addEventListener("input",e=>{i.setValue(t,{value:e.target.value})});break;case"input":if("radio"===r.attributes.type||"checkbox"===r.attributes.type){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),"print"===a)break;e.addEventListener("change",e=>{i.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==o.value&&e.setAttribute("value",o.value),"print"===a)break;e.addEventListener("input",e=>{i.setValue(t,{value:e.target.value})})}break;case"select":if(null!==o.value){e.setAttribute("value",o.value);for(var n of r.children)n.attributes.value===o.value?n.attributes.selected=!0:n.attributes.hasOwnProperty("selected")&&delete n.attributes.selected}e.addEventListener("input",e=>{e=e.target.options,e=-1===e.selectedIndex?"":e[e.selectedIndex].value;i.setValue(t,{value:e})})}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:a}){var o,n,s=t.attributes,l=e instanceof HTMLAnchorElement;"radio"===s.type&&(s.name=s.name+"-"+i);for([o,n]of Object.entries(s))if(null!=n)switch(o){case"class":n.length&&e.setAttribute(o,n.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",n);break;case"style":Object.assign(e.style,n);break;case"textContent":e.textContent=n;break;default:l&&("href"===o||"newWindow"===o)||e.setAttribute(o,n)}l&&a.addLinkAttributes(e,s.href,s.newWindow),r&&s.dataId&&this.setupStorage(e,s.dataId,t,r)}static render(e){var t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,a=e.intent||"display",o=document.createElement(i.name),n=(i.attributes&&this.setAttributes({html:o,element:i,intent:a,linkService:r}),"richText"!==a),s=e.div,l=(s.append(o),e.viewport&&(e=`matrix(${e.viewport.transform.join(",")})`,s.style.transform=e),n&&s.setAttribute("class","xfaLayer xfaFont"),[]);if(0===i.children.length)i.value&&(e=document.createTextNode(i.value),o.append(e),n)&&XfaText.shouldBuildText(i.name)&&l.push(e);else{for(var c,p=[[i,-1,o]];0<p.length;){var d,[u,g,m]=p.at(-1);g+1===u.children.length?p.pop():null!==(g=u.children[++p.at(-1)[1]])&&(u=g.name,"#text"===u?(d=document.createTextNode(g.value),l.push(d),m.append(d)):(d=g?.attributes?.xmlns?document.createElementNS(g.attributes.xmlns,u):document.createElement(u),m.append(d),g.attributes&&this.setAttributes({html:d,element:g,storage:t,intent:a,linkService:r}),0<g.children?.length?p.push([g,-1,d]):g.value&&(m=document.createTextNode(g.value),n&&XfaText.shouldBuildText(u)&&l.push(m),d.append(m))))}for(c of s.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))c.setAttribute("readOnly",!0)}return{textDivs:l}}static update(e){var t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}let DEFAULT_TAB_INDEX=1e3,annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet;function getRectDims(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class AnnotationElementFactory{static create(e){switch(e.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(e);case AnnotationType.TEXT:return new TextAnnotationElement(e);case AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(e);case"Btn":return e.data.radioButton?new RadioButtonWidgetAnnotationElement(e):new(e.data.checkBox?CheckboxWidgetAnnotationElement:PushButtonWidgetAnnotationElement)(e);case"Ch":return new ChoiceWidgetAnnotationElement(e);case"Sig":return new SignatureWidgetAnnotationElement(e)}return new WidgetAnnotationElement(e);case AnnotationType.POPUP:return new PopupAnnotationElement(e);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(e);case AnnotationType.LINE:return new LineAnnotationElement(e);case AnnotationType.SQUARE:return new SquareAnnotationElement(e);case AnnotationType.CIRCLE:return new CircleAnnotationElement(e);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(e);case AnnotationType.CARET:return new CaretAnnotationElement(e);case AnnotationType.INK:return new InkAnnotationElement(e);case AnnotationType.POLYGON:return new PolygonAnnotationElement(e);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(e);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(e);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(e);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(e);case AnnotationType.STAMP:return new StampAnnotationElement(e);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(e);default:return new AnnotationElement(e)}}}class AnnotationElement{#updates=null;#hasBorder=!1;#popupElement=null;constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:r}){return!!(e?.str||t?.str||r?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return AnnotationElement._hasPopupData(this.data)}updateEdited(e){var t;this.container&&(this.#updates||={rect:this.data.rect.slice(0)},t=e.rect,t&&this.#setRectEdited(t),this.#popupElement?.popup.updateEdited(e))}resetEdited(){this.#updates&&(this.#setRectEdited(this.#updates.rect),this.#popupElement?.popup.resetEdited(),this.#updates=null)}#setRectEdited(e){var{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:o,pageX:n,pageY:s}}}}=this,{width:r,height:l}=(r?.splice(0,4,...e),getRectDims(e));t.left=100*(e[0]-n)/a+"%",t.top=100*(o-e[3]+s)/o+"%",0===i?(t.width=100*r/a+"%",t.height=100*l/o+"%"):this.setRotation(i)}_createContainer(t){var{data:r,parent:{page:i,viewport:a}}=this,o=document.createElement("section"),n=(o.setAttribute("data-annotation-id",r.id),this instanceof WidgetAnnotationElement||(o.tabIndex=DEFAULT_TAB_INDEX),o).style;if(n.zIndex=this.parent.zIndex++,r.alternativeText&&(o.title=r.alternativeText),r.noRotate&&o.classList.add("norotate"),!r.rect||this instanceof PopupAnnotationElement){let e=r.rotation;r.hasOwnCanvas||0===e||this.setRotation(e,o)}else{var{width:s,height:l}=getRectDims(r.rect);if(!t&&0<r.borderStyle.width){n.borderWidth=r.borderStyle.width+"px";var t=r.borderStyle.horizontalCornerRadius,c=r.borderStyle.verticalCornerRadius;switch(0<t||0<c?n.borderRadius=`calc(${t}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`:this instanceof RadioButtonWidgetAnnotationElement&&(n.borderRadius=`calc(${s}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`),r.borderStyle.style){case AnnotationBorderStyleType.SOLID:n.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:n.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:n.borderBottomStyle="solid"}t=r.borderColor||null;t?(this.#hasBorder=!0,n.borderColor=Util.makeHexColor(0|t[0],0|t[1],0|t[2])):n.borderWidth=0}var c=Util.normalizeRect([r.rect[0],i.view[3]-r.rect[1]+i.view[1],r.rect[2],i.view[3]-r.rect[3]+i.view[1]]),{pageWidth:t,pageHeight:i,pageX:a,pageY:p}=a.rawDims;n.left=100*(c[0]-a)/t+"%",n.top=100*(c[1]-p)/i+"%";let e=r.rotation;r.hasOwnCanvas||0===e?(n.width=100*s/t+"%",n.height=100*l/i+"%"):this.setRotation(e,o)}return o}setRotation(r,i=this.container){if(this.data.rect){var{pageWidth:a,pageHeight:o}=this.parent.viewport.rawDims,{width:n,height:s}=getRectDims(this.data.rect);let e,t;t=r%180==0?(e=100*n/a,100*s/o):(e=100*s/a,100*n/o),i.style.width=e+"%",i.style.height=t+"%",i.setAttribute("data-main-rotation",(360-r)%360)}}get _commonActions(){let t=(e,t,r)=>{var e=r.detail[e],i=e[0],e=e.slice(1);r.target.style[t]=ColorConverters[i+"_HTML"](e),this.annotationStorage.setValue(this.data.id,{[t]:ColorConverters[i+"_rgb"](e)})};return shadow(this,"_commonActions",{display:e=>{var e=e.detail.display,t=e%2==1;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:t,noPrint:1===e||2===e})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{e=e.detail.hidden;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:e,noView:e})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{e=e.detail.rotation;this.setRotation(e),this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(e,t){var r,i=this._commonActions;for(r of Object.keys(t.detail))(e[r]||i[r])?.(t)}_setDefaultPropertiesFromJS(e){if(this.enableScripting){var t=this.annotationStorage.getRawValue(this.data.id);if(t){var r,i,a=this._commonActions;for([r,i]of Object.entries(t)){var o=a[r];o&&(o({detail:{[r]:i},target:e}),delete t[r])}}}}_createQuadrilaterals(){if(this.container){var i=this.data.quadPoints;if(i){var[a,e,t,o]=this.data.rect.map(e=>Math.fround(e));if(8===i.length){var[n,s,l,c]=i.subarray(2,6);if(t===n&&o===s&&a===l&&e===c)return}n=this.container.style;let r;this.#hasBorder&&({borderColor:s,borderWidth:l}=n,n.borderWidth=0,r=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${s}" stroke-width="${l}">`],this.container.classList.add("hasBorder"));var p=t-a,d=o-e,u=this.svgFactory,c=u.createElement("svg"),s=(c.classList.add("quadrilateralsContainer"),c.setAttribute("width",0),c.setAttribute("height",0),u.createElement("defs")),g=(c.append(s),u.createElement("clipPath")),l="clippath_"+this.data.id;g.setAttribute("id",l),g.setAttribute("clipPathUnits","objectBoundingBox"),s.append(g);for(let e=2,t=i.length;e<t;e+=8){var m=i[e],h=i[e+1],_=i[e+2],f=i[e+3],v=u.createElement("rect"),y=(_-a)/p,P=(o-h)/d,m=(m-_)/p,_=(h-f)/d;v.setAttribute("x",y),v.setAttribute("y",P),v.setAttribute("width",m),v.setAttribute("height",_),g.append(v),r?.push(`<rect vector-effect="non-scaling-stroke" x="${y}" y="${P}" width="${m}" height="${_}"/>`)}this.#hasBorder&&(r.push("</g></svg>')"),n.backgroundImage=r.join("")),this.container.append(c),this.container.style.clipPath=`url(#${l})`}}}_createPopup(){var e=this.data,e=this.#popupElement=new PopupAnnotationElement({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_"+e.id,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(e.render())}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){var r=[];if(this._fieldObjects){var i=this._fieldObjects[e];if(i)for(var{page:a,id:o,exportValues:n}of i)-1!==a&&o!==t&&(a="string"==typeof n?n:null,(n=document.querySelector(`[data-element-id="${o}"]`))&&!GetElementsByNameSet.has(n)?warn("_getElementsByName - element not allowed: "+o):r.push({id:o,exportValue:a,domElement:n}))}else for(var s of document.getElementsByName(e)){var l=s.exportValue,c=s.getAttribute("data-element-id");c!==t&&GetElementsByNameSet.has(s)&&r.push({id:c,exportValue:l,domElement:s})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){var e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(var t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(this._isEditable){let{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}}class LinkAnnotationElement extends AnnotationElement{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){var{data:e,linkService:t}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(r,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(r,e.action),i=!0):e.attachment?(this.#bindAttachment(r,e.attachment,e.attachmentDest),i=!0):e.setOCGState?(this.#bindSetOCGState(r,e.setOCGState),i=!0):e.dest?(this._bindLink(r,e.dest),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),i=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}#setInternalLink(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),!t&&""!==t||this.#setInternalLink()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#setInternalLink()}#bindAttachment(e,t,r=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,r),!1),this.#setInternalLink()}#bindSetOCGState(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#setInternalLink()}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");var i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let e of Object.keys(r.actions)){var a=i.get(e);a&&(t[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:e}}),!1))}t.onclick||(t.onclick=()=>!1),this.#setInternalLink()}_bindResetFormAction(e,f){let v=e.onclick;v||(e.href=this.linkService.getAnchorUrl("")),this.#setInternalLink(),this._fieldObjects?e.onclick=()=>{v?.();var{fields:e,refs:t,include:r}=f,i=[];if(0!==e.length||0!==t.length){var a,o,n,s=new Set(t);for(a of e)for({id:o}of this._fieldObjects[a]||[])s.add(o);for(n of Object.values(this._fieldObjects))for(var l of n)s.has(l.id)===r&&i.push(l)}else for(var c of Object.values(this._fieldObjects))i.push(...c);var p,d=this.annotationStorage,u=[];for(p of i){var g=p.id;switch(u.push(g),p.type){case"text":var m=p.defaultValue||"";d.setValue(g,{value:m});break;case"checkbox":case"radiobutton":m=p.defaultValue===p.exportValues;d.setValue(g,{value:m});break;case"combobox":case"listbox":var h=p.defaultValue||"";d.setValue(g,{value:h});break;default:continue}var _=document.querySelector(`[data-element-id="${g}"]`);_&&(GetElementsByNameSet.has(_)?_.dispatchEvent(new Event("resetform")):warn("_bindResetFormAction - element not allowed: "+g))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}}),!1}:(warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),v||(e.onclick=()=>!1))}}class TextAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");var e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&("CANVAS"===e.previousSibling?.nodeName&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return util_FeatureTest.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,a){r.includes("mouse")?e.addEventListener(r,e=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(r,e=>{if("blur"===r){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===r){if(t.focused)return;t.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(e)}})})}_setEventListeners(e,t,r,i){for(var[a,o]of r)"Action"!==o&&!this.data.actions?.[o]||("Focus"!==o&&"Blur"!==o||(t||={focused:!1}),this._setEventListener(e,t,a,o,i),"Focus"!==o||this.data.actions?.Blur?"Blur"!==o||this.data.actions?.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}_setBackgroundColor(e){var t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":Util.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){var t=this.data.defaultAppearanceData.fontColor,r=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,e=e.style;let i;var a,o,n=e=>Math.round(10*e)/10;i=this.data.multiLine?(o=Math.abs(this.data.rect[3]-this.data.rect[1]-2),a=Math.round(o/(LINE_FACTOR*r))||1,Math.min(r,n(o/a/LINE_FACTOR))):(o=Math.abs(this.data.rect[3]-this.data.rect[1]-2),Math.min(r,n(o/LINE_FACTOR))),e.fontSize=`calc(${i}px * var(--scale-factor))`,e.color=Util.makeHexColor(t[0],t[1],t[2]),null!==this.data.textAlignment&&(e.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,r,i){var a,o=this.annotationStorage;for(a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=r),o.setValue(a.id,{[i]:r})}render(){let a=this.annotationStorage,p=this.data.id,o=(this.container.classList.add("textWidgetAnnotation"),null);if(this.renderForms){var r=a.getValue(p,{value:this.data.fieldValue});let e=r.value||"";var n=a.getValue(p,{charLimit:this.data.maxLen}).charLimit;n&&e.length>n&&(e=e.slice(0,n));let t=r.formattedValue||this.data.textContent?.join("\n")||null,c=(t&&this.data.comb&&(t=t.replaceAll(/\s+/g,"")),{userValue:e,formattedValue:t,lastCommittedValue:null,commitKey:1,focused:!1}),i=(this.data.multiLine?((o=document.createElement("textarea")).textContent=t??e,this.data.doNotScroll&&(o.style.overflowY="hidden")):((o=document.createElement("input")).type="text",o.setAttribute("value",t??e),this.data.doNotScroll&&(o.style.overflowX="hidden")),this.data.hasOwnCanvas&&(o.hidden=!0),GetElementsByNameSet.add(o),o.setAttribute("data-element-id",p),o.disabled=this.data.readOnly,o.name=this.data.fieldName,o.tabIndex=DEFAULT_TAB_INDEX,this._setRequired(o,this.data.required),n&&(o.maxLength=n),o.addEventListener("input",e=>{a.setValue(p,{value:e.target.value}),this.setPropertyOnSiblings(o,"value",e.target.value,"value"),c.formattedValue=null}),o.addEventListener("resetform",e=>{var t=this.data.defaultFieldValue??"";o.value=c.userValue=t,c.formattedValue=null}),e=>{var t=c.formattedValue;null!=t&&(e.target.value=t),e.target.scrollLeft=0});if(this.enableScripting&&this.hasJSActions){o.addEventListener("focus",e=>{c.focused||(e=e.target,c.userValue&&(e.value=c.userValue),c.lastCommittedValue=e.value,c.commitKey=1,this.data.actions?.Focus)||(c.focused=!0)}),o.addEventListener("updatefromsandbox",e=>{this.showElementAndHideCanvas(e.target),this._dispatchEventFromSandbox({value(e){c.userValue=e.detail.value??"",a.setValue(p,{value:c.userValue.toString()}),e.target.value=c.userValue},formattedValue(e){var t=e.detail.formattedValue;null!=(c.formattedValue=t)&&e.target!==document.activeElement&&(e.target.value=t),a.setValue(p,{formattedValue:t})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:t=>{var r=t.detail.charLimit,t=t.target;if(0===r)t.removeAttribute("maxLength");else{t.setAttribute("maxLength",r);let e=c.userValue;!e||e.length<=r||(e=e.slice(0,r),t.value=c.userValue=e,a.setValue(p,{value:e}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:e,willCommit:!0,commitKey:1,selStart:t.selectionStart,selEnd:t.selectionEnd}}))}}},e)}),o.addEventListener("keydown",e=>{let t=-(c.commitKey=1);var r;"Escape"===e.key?t=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(c.commitKey=3):t=2,-1!==t&&(r=e.target.value,c.lastCommittedValue!==r)&&(c.lastCommittedValue=r,c.userValue=r,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:r,willCommit:!0,commitKey:t,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});let r=i;i=null,o.addEventListener("blur",e=>{var t;c.focused&&e.relatedTarget&&(this.data.actions?.Blur||(c.focused=!1),t=e.target.value,c.userValue=t,c.lastCommittedValue!==t&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:t,willCommit:!0,commitKey:c.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}),r(e))}),this.data.actions?.Keystroke&&o.addEventListener("beforeinput",e=>{c.lastCommittedValue=null;var{data:t,target:r}=e,{value:i,selectionStart:a,selectionEnd:o}=r;let n=a,s=o;switch(e.inputType){case"deleteWordBackward":var l=i.substring(0,a).match(/\w*[^\w]*$/);l&&(n-=l[0].length);break;case"deleteWordForward":l=i.substring(a).match(/^[^\w]*\w*/);l&&(s+=l[0].length);break;case"deleteContentBackward":a===o&&--n;break;case"deleteContentForward":a===o&&(s+=1)}e.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:i,change:t||"",willCommit:!1,selStart:n,selEnd:s}})}),this._setEventListeners(o,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}i&&o.addEventListener("blur",i),this.data.comb&&(r=(this.data.rect[2]-this.data.rect[0])/n,o.classList.add("comb"),o.style.letterSpacing=`calc(${r}px * var(--scale-factor) - 1ch)`)}else(o=document.createElement("div")).textContent=this.data.fieldValue,o.style.verticalAlign="middle",o.style.display="table-cell",this.data.hasOwnCanvas&&(o.hidden=!0);return this._setTextStyle(o),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms})}render(){let a=this.annotationStorage,o=this.data,n=o.id,e=a.getValue(n,{value:o.exportValue===o.fieldValue}).value;"string"==typeof e&&(e="Off"!==e,a.setValue(n,{value:e})),this.container.classList.add("buttonWidgetAnnotation","checkBox");var t=document.createElement("input");return GetElementsByNameSet.add(t),t.setAttribute("data-element-id",n),t.disabled=o.readOnly,this._setRequired(t,this.data.required),t.type="checkbox",t.name=o.fieldName,e&&t.setAttribute("checked",!0),t.setAttribute("exportValue",o.exportValue),t.tabIndex=DEFAULT_TAB_INDEX,t.addEventListener("change",e=>{var t,{name:e,checked:r}=e.target;for(t of this._getElementsByName(e,n)){var i=r&&t.exportValue===o.exportValue;t.domElement&&(t.domElement.checked=i),a.setValue(t.id,{value:i})}a.setValue(n,{value:r})}),t.addEventListener("resetform",e=>{var t=o.defaultFieldValue||"Off";e.target.checked=t===o.exportValue}),this.enableScripting&&this.hasJSActions&&(t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({value(e){e.target.checked="Off"!==e.detail.value,a.setValue(n,{value:e.target.checked})}},e)}),this._setEventListeners(t,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(t),this._setDefaultPropertiesFromJS(t),this.container.append(t),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let o=this.annotationStorage,r=this.data,n=r.id,e=o.getValue(n,{value:r.fieldValue===r.buttonValue}).value;if("string"==typeof e&&(e=e!==r.buttonValue,o.setValue(n,{value:e})),e)for(var t of this._getElementsByName(r.fieldName,n))o.setValue(t.id,{value:!1});var i=document.createElement("input");if(GetElementsByNameSet.add(i),i.setAttribute("data-element-id",n),i.disabled=r.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=r.fieldName,e&&i.setAttribute("checked",!0),i.tabIndex=DEFAULT_TAB_INDEX,i.addEventListener("change",e=>{var t,{name:e,checked:r}=e.target;for(t of this._getElementsByName(e,n))o.setValue(t.id,{value:!1});o.setValue(n,{value:r})}),i.addEventListener("resetform",e=>{var t=r.defaultFieldValue;e.target.checked=null!=t&&t===r.buttonValue}),this.enableScripting&&this.hasJSActions){let a=r.buttonValue;i.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({value:e=>{var t,r=a===e.detail.value;for(t of this._getElementsByName(e.target.name)){var i=r&&t.id===n;t.domElement&&(t.domElement.checked=i),o.setValue(t.id,{value:i})}}},e)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){var e=super.render(),t=(e.classList.add("buttonWidgetAnnotation","pushButton"),e.lastChild);return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let n=this.annotationStorage,s=this.data.id;var e,t=n.getValue(s,{value:this.data.fieldValue});let l=document.createElement("select"),r=(GetElementsByNameSet.add(l),l.setAttribute("data-element-id",s),l.disabled=this.data.readOnly,this._setRequired(l,this.data.required),l.name=this.data.fieldName,l.tabIndex=DEFAULT_TAB_INDEX,this.data.combo&&0<this.data.options.length);this.data.combo||(l.size=this.data.options.length,this.data.multiSelect&&(l.multiple=!0)),l.addEventListener("resetform",e=>{var t,r=this.data.defaultFieldValue;for(t of l.options)t.selected=t.value===r});for(e of this.data.options){var i=document.createElement("option");i.textContent=e.displayValue,i.value=e.exportValue,t.value.includes(e.exportValue)&&(i.setAttribute("selected",!0),r=!1),l.append(i)}let a=null;if(r){let e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),l.prepend(e),a=()=>{e.remove(),l.removeEventListener("input",a),a=null},l.addEventListener("input",a)}let c=e=>{let t=e?"value":"textContent";var{options:e,multiple:r}=l;return r?Array.prototype.filter.call(e,e=>e.selected).map(e=>e[t]):-1===e.selectedIndex?null:e[e.selectedIndex][t]},p=c(!1),d=e=>{e=e.target.options;return Array.prototype.map.call(e,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(l.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({value(e){a?.();var t,e=e.detail.value,r=new Set(Array.isArray(e)?e:[e]);for(t of l.options)t.selected=r.has(t.value);n.setValue(s,{value:c(!0)}),p=c(!1)},multipleSelection(e){l.multiple=!0},remove(e){var t=l.options,r=e.detail.remove;t[r].selected=!1,l.remove(r),0<t.length&&-1===Array.prototype.findIndex.call(t,e=>e.selected)&&(t[0].selected=!0),n.setValue(s,{value:c(!0),items:d(e)}),p=c(!1)},clear(e){for(;0!==l.length;)l.remove(0);n.setValue(s,{value:null,items:[]}),p=c(!1)},insert(e){var{index:t,displayValue:r,exportValue:i}=e.detail.insert,t=l.children[t],a=document.createElement("option");a.textContent=r,a.value=i,t?t.before(a):l.append(a),n.setValue(s,{value:c(!0),items:d(e)}),p=c(!1)},items(e){for(var t,r=e.detail.items;0!==l.length;)l.remove(0);for(t of r){var{displayValue:i,exportValue:a}=t,o=document.createElement("option");o.textContent=i,o.value=a,l.append(o)}0<l.options.length&&(l.options[0].selected=!0),n.setValue(s,{value:c(!0),items:d(e)}),p=c(!1)},indices(e){var t,r=new Set(e.detail.indices);for(t of e.target.options)t.selected=r.has(t.index);n.setValue(s,{value:c(!0)}),p=c(!1)},editable(e){e.target.disabled=!e.detail.editable}},e)}),l.addEventListener("input",e=>{var t=c(!0),r=c(!1);n.setValue(s,{value:t}),e.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:p,change:r,changeEx:t,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(l,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):l.addEventListener("input",function(e){n.setValue(s,{value:c(!0)})}),this.data.combo&&this._setTextStyle(l),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class PopupAnnotationElement extends AnnotationElement{constructor(e){var{data:t,elements:r}=e;super(e,{isRenderable:AnnotationElement._hasPopupData(t)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");var e,t=this.popup=new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),r=[];for(e of this.elements)e.popup=t,e.container.ariaHasPopup="dialog",r.push(e.data.id),e.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(e=>""+AnnotationPrefix+e).join(",")),this.container}}class PopupElement{#boundKeyDown=this.#keyDown.bind(this);#boundHide=this.#hide.bind(this);#boundShow=this.#show.bind(this);#boundToggle=this.#toggle.bind(this);#color=null;#container=null;#contentsObj=null;#dateObj=null;#elements=null;#parent=null;#parentRect=null;#pinned=!1;#popup=null;#position=null;#rect=null;#richText=null;#titleObj=null;#updates=null;#wasVisible=!1;constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:a,contentsObj:o,richText:n,parent:s,rect:l,parentRect:c,open:p}){this.#container=e,this.#titleObj=i,this.#contentsObj=o,this.#richText=n,this.#parent=s,this.#color=t,this.#rect=l,this.#parentRect=c,this.#elements=r,this.#dateObj=PDFDateString.toDateObject(a),this.trigger=r.flatMap(e=>e.getElementsToTriggerPopup());for(var d of this.trigger)d.addEventListener("click",this.#boundToggle),d.addEventListener("mouseenter",this.#boundShow),d.addEventListener("mouseleave",this.#boundHide),d.classList.add("popupTriggerArea");for(var u of r)u.container?.addEventListener("keydown",this.#boundKeyDown);this.#container.hidden=!0,p&&this.#toggle()}render(){if(!this.#popup){var e=this.#popup=document.createElement("div");if(e.className="popup",this.#color){var t=e.style.outlineColor=Util.makeHexColor(...this.#color);if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))e.style.backgroundColor=`color-mix(in srgb, ${t} 30%, white)`;else e.style.backgroundColor=Util.makeHexColor(...this.#color.map(e=>Math.floor(.7*(255-e)+e)))}var t=document.createElement("span"),r=(t.className="header",document.createElement("h1")),t=(t.append(r),{dir:r.dir,str:r.textContent}=this.#titleObj,e.append(t),this.#dateObj&&((r=document.createElement("span")).classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#dateObj.valueOf()})),t.append(r)),this.#html);t?(XfaLayer.render({xfaHtml:t,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent")):(r=this._formatContents(this.#contentsObj),e.append(r)),this.#container.append(e)}}get#html(){var e=this.#richText,t=this.#contentsObj;return e?.str&&(!t?.str||t.str===e.str)&&this.#richText.html||null}get#fontSize(){return this.#html?.attributes?.style?.fontSize||0}get#fontColor(){return this.#html?.attributes?.style?.color||null}#makePopupContent(e){var t,r=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:r}]}},a={style:{color:this.#fontColor,fontSize:this.#fontSize?`calc(${this.#fontSize}px * var(--scale-factor))`:""}};for(t of e.split("\n"))r.push({name:"span",value:t,attributes:a});return i}_formatContents({str:e,dir:t}){var r=document.createElement("p"),i=(r.classList.add("popupContent"),r.dir=t,e.split(/(?:\r\n?|\n)/));for(let e=0,t=i.length;e<t;++e){var a=i[e];r.append(document.createTextNode(a)),e<t-1&&r.append(document.createElement("br"))}return r}#keyDown(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&this.#pinned)&&this.#toggle()}updateEdited({rect:e,popupContent:t}){this.#updates||={contentsObj:this.#contentsObj,richText:this.#richText},e&&(this.#position=null),t&&(this.#richText=this.#makePopupContent(t),this.#contentsObj=null),this.#popup?.remove(),this.#popup=null}resetEdited(){this.#updates&&({contentsObj:this.#contentsObj,richText:this.#richText}=this.#updates,this.#updates=null,this.#popup?.remove(),this.#popup=null,this.#position=null)}#setPosition(){if(null===this.#position){var r,{page:{view:i},viewport:{rawDims:{pageWidth:a,pageHeight:o,pageX:n,pageY:s}}}=this.#parent;let e=!!this.#parentRect,t=e?this.#parentRect:this.#rect;for(r of this.#elements)if(!t||null!==Util.intersect(r.data.rect,t)){t=r.data.rect,e=!0;break}var i=Util.normalizeRect([t[0],i[3]-t[1]+i[1],t[2],i[3]-t[3]+i[1]]),l=e?t[2]-t[0]+5:0,l=i[0]+l,l=(this.#position=[100*(l-n)/a,100*(i[1]-s)/o],this.#container).style;l.left=this.#position[0]+"%",l.top=this.#position[1]+"%"}}#toggle(){this.#pinned=!this.#pinned,this.#pinned?(this.#show(),this.#container.addEventListener("click",this.#boundToggle),this.#container.addEventListener("keydown",this.#boundKeyDown)):(this.#hide(),this.#container.removeEventListener("click",this.#boundToggle),this.#container.removeEventListener("keydown",this.#boundKeyDown))}#show(){this.#popup||this.render(),this.isVisible?this.#pinned&&this.#container.classList.add("focused"):(this.#setPosition(),this.#container.hidden=!1,this.#container.style.zIndex=parseInt(this.#container.style.zIndex)+1e3)}#hide(){this.#container.classList.remove("focused"),!this.#pinned&&this.isVisible&&(this.#container.hidden=!0,this.#container.style.zIndex=parseInt(this.#container.style.zIndex)-1e3)}forceHide(){this.#wasVisible=this.isVisible,this.#wasVisible&&(this.#container.hidden=!0)}maybeShow(){this.#wasVisible&&(this.#popup||this.#show(),this.#wasVisible=!1,this.#container.hidden=!1)}get isVisible(){return!1===this.#container.hidden}}class FreeTextAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){var e,t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(e of this.textContent){var r=document.createElement("span");r.textContent=e,t.append(r)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class LineAnnotationElement extends AnnotationElement{#line=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");var e=this.data,{width:t,height:r}=getRectDims(e.rect),t=this.svgFactory.create(t,r,!0),r=this.#line=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),t.append(r),this.container.append(t),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#line}addHighlightArea(){this.container.classList.add("highlightArea")}}class SquareAnnotationElement extends AnnotationElement{#square=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");var e=this.data,{width:t,height:r}=getRectDims(e.rect),i=this.svgFactory.create(t,r,!0),a=e.borderStyle.width,o=this.#square=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",t-a),o.setAttribute("height",r-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#square}addHighlightArea(){this.container.classList.add("highlightArea")}}class CircleAnnotationElement extends AnnotationElement{#circle=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");var e=this.data,{width:t,height:r}=getRectDims(e.rect),i=this.svgFactory.create(t,r,!0),a=e.borderStyle.width,o=this.#circle=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",t/2),o.setAttribute("cy",r/2),o.setAttribute("rx",t/2-a/2),o.setAttribute("ry",r/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#circle}addHighlightArea(){this.container.classList.add("highlightArea")}}class PolylineAnnotationElement extends AnnotationElement{#polyline=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);var{rect:i,vertices:a,borderStyle:e,popupRef:t}=this.data;if(a){var{width:o,height:n}=getRectDims(i),o=this.svgFactory.create(o,n,!0);let r=[];for(let e=0,t=a.length;e<t;e+=2){var s=a[e]-i[0],l=i[3]-a[e+1];r.push(s+","+l)}r=r.join(" ");n=this.#polyline=this.svgFactory.createElement(this.svgElementName);n.setAttribute("points",r),n.setAttribute("stroke-width",e.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),o.append(n),this.container.append(o),!t&&this.hasPopupData&&this._createPopup()}return this.container}getElementsToTriggerPopup(){return this.#polyline}addHighlightArea(){this.container.classList.add("highlightArea")}}class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class InkAnnotationElement extends AnnotationElement{#polylinesGroupElement=null;#polylines=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?AnnotationEditorType.HIGHLIGHT:AnnotationEditorType.INK}#getTransform(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);var{rect:e,rotation:t,inkLists:r,borderStyle:i,popupRef:a}=this.data,{transform:t,width:e,height:o}=this.#getTransform(t,e),e=this.svgFactory.create(e,o,!0),n=this.#polylinesGroupElement=this.svgFactory.createElement("svg:g");e.append(n),n.setAttribute("stroke-width",i.width||1),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-linejoin","round"),n.setAttribute("stroke-miterlimit",10),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),n.setAttribute("transform",t);for(let e=0,t=r.length;e<t;e++){var s=this.svgFactory.createElement(this.svgElementName);this.#polylines.push(s),s.setAttribute("points",r[e].join(",")),n.append(s)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(e),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);var t,{thickness:e,points:r,rect:i}=e,a=this.#polylinesGroupElement;if(0<=e&&a.setAttribute("stroke-width",e||1),r)for(let e=0,t=this.#polylines.length;e<t;e++)this.#polylines[e].setAttribute("points",r[e].join(","));i&&({transform:e,width:i,height:t}=this.#getTransform(this.data.rotation,i),a.parentElement.setAttribute("viewBox",`0 0 ${i} `+t),a.setAttribute("transform",e))}getElementsToTriggerPopup(){return this.#polylines}addHighlightArea(){this.container.classList.add("highlightArea")}}class HighlightAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=AnnotationEditorType.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class StampAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=AnnotationEditorType.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class FileAttachmentAnnotationElement extends AnnotationElement{#trigger=null;constructor(e){super(e,{isRenderable:!0});e=this.data.file;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");var{container:e,data:t}=this;let r,i=(t.hasAppearance||0===t.fillAlpha?r=document.createElement("div"):((r=document.createElement("img")).src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(100*t.fillAlpha)}%);`)),r.addEventListener("dblclick",this.#download.bind(this)),this.#trigger=r,util_FeatureTest.platform).isMac;return e.addEventListener("keydown",e=>{"Enter"===e.key&&(i?e.metaKey:e.ctrlKey)&&this.#download()}),!t.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#trigger}addHighlightArea(){this.container.classList.add("highlightArea")}#download(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class AnnotationLayer{#accessibilityManager=null;#annotationCanvasMap=null;#editableAnnotations=new Map;#structTreeLayer=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:a,viewport:o,structTreeLayer:n}){this.div=e,this.#accessibilityManager=t,this.#annotationCanvasMap=r,this.#structTreeLayer=n||null,this.page=a,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return 0<this.#editableAnnotations.size}async#appendElement(e,t){var r=e.firstChild||e,t=r.id=""+AnnotationPrefix+t,t=await this.#structTreeLayer?.getAriaAttributes(t);if(t)for(var[i,a]of t)r.setAttribute(i,a);this.div.append(e),this.#accessibilityManager?.moveElementInDOM(this.div,e,r,!1)}async render(e){var t,r=e.annotations,i=this.div,a=(setLayerDimensions(i,this.viewport),new Map),o={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new DOMSVGFactory,annotationStorage:e.annotationStorage||new AnnotationStorage,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(t of r)if(!t.noHTML){var n=t.annotationType===AnnotationType.POPUP;if(n){var s=a.get(t.id);if(!s)continue;o.elements=s}else{var{width:s,height:l}=getRectDims(t.rect);if(s<=0||l<=0)continue}o.data=t;l=AnnotationElementFactory.create(o);l.isRenderable&&(!n&&t.popupRef&&((n=a.get(t.popupRef))?n.push(l):a.set(t.popupRef,[l])),n=l.render(),t.hidden&&(n.style.visibility="hidden"),await this.#appendElement(n,t.id),l._isEditable)&&(this.#editableAnnotations.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#setAnnotationCanvasMap()}update({viewport:e}){var t=this.div;setLayerDimensions(t,{rotation:(this.viewport=e).rotation}),this.#setAnnotationCanvasMap(),t.hidden=!1}#setAnnotationCanvasMap(){if(this.#annotationCanvasMap){var e,t,r=this.div;for([e,t]of this.#annotationCanvasMap){var i,a=r.querySelector(`[data-annotation-id="${e}"]`);a&&(t.className="annotationContent",i=a.firstChild,i?"CANVAS"===i.nodeName?i.replaceWith(t):i.classList.contains("annotationContent")?i.after(t):i.before(t):a.append(t))}this.#annotationCanvasMap.clear()}}getEditableAnnotations(){return Array.from(this.#editableAnnotations.values())}getEditableAnnotation(e){return this.#editableAnnotations.get(e)}}let EOL_PATTERN=/\r\n?|\n/g;class FreeTextEditor extends AnnotationEditor{#color;#content="";#editorDivId=this.id+"-editor";#editModeAC=null;#fontSize;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){var e=FreeTextEditor.prototype,t=e=>e.isEmpty(),r=AnnotationEditorUIManager.TRANSLATE_SMALL,i=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=AnnotationEditorType.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#color=e.color||FreeTextEditor._defaultColor||AnnotationEditor._defaultLineColor,this.#fontSize=e.fontSize||FreeTextEditor._defaultFontSize}static initialize(e,t){AnnotationEditor.initialize(e,t);e=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(e.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=t;break;case AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=t}}updateParams(e,t){switch(e){case AnnotationEditorParamsType.FREETEXT_SIZE:this.#updateFontSize(t);break;case AnnotationEditorParamsType.FREETEXT_COLOR:this.#updateColor(t)}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,this.#fontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,this.#color]]}#updateFontSize(e){var t=e=>{this.editorDiv.style.fontSize=`calc(${e}px * var(--scale-factor))`,this.translate(0,-(e-this.#fontSize)*this.parentScale),this.#fontSize=e,this.#setEditorDimensions()},r=this.#fontSize;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#updateColor(e){var t=e=>{this.#color=this.editorDiv.style.color=e},r=this.#color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){var e=this.parentScale;return[-FreeTextEditor._internalPadding*e,-(FreeTextEditor._internalPadding+this.#fontSize)*e]}rebuild(){this.parent&&(super.rebuild(),null===this.div||this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){var e;this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#editModeAC=new AbortController,e=this._uiManager.combinedSignal(this.#editModeAC),this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#editorDivId),this._isDraggable=!0,this.#editModeAC?.abort(),this.#editModeAC=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv)&&this.editorDiv.focus()}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#extractText(){var e,t=[];this.editorDiv.normalize();let r=null;for(e of this.editorDiv.childNodes)r?.nodeType===Node.TEXT_NODE&&"BR"===e.nodeName||(t.push(FreeTextEditor.#getNodeContent(e)),r=e);return t.join("\n")}#setEditorDimensions(){var e,t,r,i,[a,o]=this.parentDimensions;let n;this.isAttachedToDOM?n=this.div.getBoundingClientRect():({currentLayer:e,div:t}=this,r=t.style.display,i=t.classList.contains("hidden"),t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=r,t.classList.toggle("hidden",i)),this.rotation%180==this.parentRotation%180?(this.width=n.width/a,this.height=n.height/o):(this.width=n.height/a,this.height=n.width/o),this.fixAndSetPosition()}commit(){if(this.isInEditMode()){super.commit(),this.disableEditMode();let t=this.#content,r=this.#content=this.#extractText().trimEnd();if(t!==r){let e=e=>{(this.#content=e)?(this.#setContent(),this._uiManager.rebuild(this),this.#setEditorDimensions()):this.remove()};this.addCommands({cmd:()=>{e(r)},undo:()=>{e(t)},mustExec:!1}),this.#setEditorDimensions()}}}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){FreeTextEditor._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(!this.div){let a,o;this.width&&(a=this.x,o=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#editorDivId),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;var n=this.editorDiv.style;if(n.fontSize=`calc(${this.#fontSize}px * var(--scale-factor))`,n.color=this.#color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),bindEvents(this,this.div,["dblclick","keydown"]),this.width){var[n,s]=this.parentDimensions;if(this.annotationElementId){var l=this._initialData.position;let[e,t]=this.getInitialTranslation();[e,t]=this.pageTranslationToScreen(e,t);var[c,p]=this.pageDimensions,[d,u]=this.pageTranslation;let r,i;switch(this.rotation){case 0:r=a+(l[0]-d)/c,i=o+this.height-(l[1]-u)/p;break;case 90:r=a+(l[0]-d)/c,i=o-(l[1]-u)/p,[e,t]=[t,-e];break;case 180:r=a-this.width+(l[0]-d)/c,i=o-(l[1]-u)/p,[e,t]=[-e,-t];break;case 270:r=a+(l[0]-d-this.height*p)/c,i=o+(l[1]-u-this.width*c)/p,[e,t]=[-t,e]}this.setAt(r*n,i*s,e,t)}else this.setAt(a*n,o*s,this.width*n,this.height*s);this.#setContent(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0}return this.div}static#getNodeContent(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(EOL_PATTERN,"")}editorDivPaste(t){var r=t.clipboardData||window.clipboardData,i=r.types;if(1!==i.length||"text/plain"!==i[0]){t.preventDefault();i=FreeTextEditor.#deserializeContent(r.getData("text")||"").replaceAll(EOL_PATTERN,"\n");if(i){t=window.getSelection();if(t.rangeCount){this.editorDiv.normalize(),t.deleteFromDocument();r=t.getRangeAt(0);if(i.includes("\n")){var{startContainer:a,startOffset:o}=r,n=[],s=[];if(a.nodeType===Node.TEXT_NODE){var l=a.parentElement;if(s.push(a.nodeValue.slice(o).replaceAll(EOL_PATTERN,"")),l!==this.editorDiv){let e=n;for(var c of this.editorDiv.childNodes)c===l?e=s:e.push(FreeTextEditor.#getNodeContent(c))}n.push(a.nodeValue.slice(0,o).replaceAll(EOL_PATTERN,""))}else if(a===this.editorDiv){let e=n,t=0;for(var p of this.editorDiv.childNodes)(e=t++===o?s:e).push(FreeTextEditor.#getNodeContent(p))}this.#content=""+n.join("\n")+i+s.join("\n"),this.#setContent();var d,u=new Range;let e=n.reduce((e,t)=>e+t.length,0);for({firstChild:d}of this.editorDiv.childNodes)if(d.nodeType===Node.TEXT_NODE){var g=d.nodeValue.length;if(e<=g){u.setStart(d,e),u.setEnd(d,e);break}e-=g}t.removeAllRanges(),t.addRange(u)}else r.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),t.collapseToStart()}}}}#setContent(){if(this.editorDiv.replaceChildren(),this.#content)for(var e of this.#content.split("\n")){var t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#serializeContent(){return this.#content.replaceAll("Â "," ")}static#deserializeContent(e){return e.replaceAll(" ","Â ")}get contentDiv(){return this.editorDiv}static async deserialize(e,t,r){let i=null;if(e instanceof FreeTextAnnotationElement){var{data:{defaultAppearanceData:{fontSize:a,fontColor:o},rect:n,rotation:s,id:l,popupRef:c},textContent:p,textPosition:d,parent:{page:{pageNumber:u}}}=e;if(!p||0===p.length)return null;i=e={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(o),fontSize:a,value:p.join("\n"),position:d,pageIndex:u-1,rect:n.slice(0),rotation:s,id:l,deleted:!1,popupRef:c}}o=await super.deserialize(e,t,r);return o.#fontSize=e.fontSize,o.#color=Util.makeHexColor(...e.color),o.#content=FreeTextEditor.#deserializeContent(e.value),o.annotationElementId=e.id||null,o._initialData=i,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();var t=FreeTextEditor._internalPadding*this.parentScale,t=this.getRect(t,t),r=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#color),r={annotationType:AnnotationEditorType.FREETEXT,color:r,fontSize:this.#fontSize,value:this.#serializeContent(),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId};if(!e){if(this.annotationElementId&&!this.#hasElementChanged(r))return null;r.id=this.annotationElementId}return r}#hasElementChanged(e){let{value:t,fontSize:r,color:i,pageIndex:a}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==r||e.color.some((e,t)=>e!==i[t])||e.pageIndex!==a}renderAnnotationElement(e){var t=super.renderAnnotationElement(e);if(!this.deleted){var r,i=t.style;i.fontSize=`calc(${this.#fontSize}px * var(--scale-factor))`,i.color=this.#color,t.replaceChildren();for(r of this.#content.split("\n")){var a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),t.append(a)}i=FreeTextEditor._internalPadding*this.parentScale;e.updateEdited({rect:this.getRect(i,i),popupContent:this.#content})}return t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class Outline{static PRECISION=1e-4;toSVGPath(){unreachable("Abstract method `toSVGPath` must be implemented.")}get box(){unreachable("Abstract getter `box` must be implemented.")}serialize(e,t){unreachable("Abstract method `serialize` must be implemented.")}static _rescale(r,i,a,o,n,s){s||=new Float32Array(r.length);for(let e=0,t=r.length;e<t;e+=2)s[e]=i+r[e]*o,s[e+1]=a+r[e+1]*n;return s}static _rescaleAndSwap(r,i,a,o,n,s){s||=new Float32Array(r.length);for(let e=0,t=r.length;e<t;e+=2)s[e]=i+r[e+1]*o,s[e+1]=a+r[e]*n;return s}static _translate(r,i,a,o){o||=new Float32Array(r.length);for(let e=0,t=r.length;e<t;e+=2)o[e]=i+r[e],o[e+1]=a+r[e+1];return o}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,t,r,i,a){switch(a){case 90:return[1-t/r,e/i];case 180:return[1-e/r,1-t/i];case 270:return[t/r,1-e/i];default:return[e/r,t/i]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,i,a,o){return[(e+5*r)/6,(t+5*i)/6,(5*r+a)/6,(5*i+o)/6,(r+a)/2,(i+o)/2]}}class FreeDrawOutliner{#box;#bottom=[];#innerMargin;#isLTR;#top=[];#last=new Float32Array(18);#lastX;#lastY;#min;#min_dist;#scaleFactor;#thickness;#points=[];static#MIN_DIST=8;static#MIN_DIFF=2;static#MIN=FreeDrawOutliner.#MIN_DIST+FreeDrawOutliner.#MIN_DIFF;constructor({x:e,y:t},r,i,a,o,n=0){this.#box=r,this.#thickness=a*i,this.#isLTR=o,this.#last.set([NaN,NaN,NaN,NaN,e,t],6),this.#innerMargin=n,this.#min_dist=FreeDrawOutliner.#MIN_DIST*i,this.#min=FreeDrawOutliner.#MIN*i,this.#scaleFactor=i,this.#points.push(e,t)}isEmpty(){return isNaN(this.#last[8])}#getLastCoords(){var e=this.#last.subarray(4,6),t=this.#last.subarray(16,18),[r,i,a,o]=this.#box;return[(this.#lastX+(e[0]-t[0])/2-r)/a,(this.#lastY+(e[1]-t[1])/2-i)/o,(this.#lastX+(t[0]-e[0])/2-r)/a,(this.#lastY+(t[1]-e[1])/2-i)/o]}add({x:e,y:t}){this.#lastX=e,this.#lastY=t;var[r,i,a,o]=this.#box;let[n,s,l,c]=this.#last.subarray(8,12);var p=e-l,d=t-c,u=Math.hypot(p,d);if(u<this.#min)return!1;var g=u-this.#min_dist,u=g/u,p=u*p,u=u*d;let m=n,h=s;n=l,s=c,l+=p,c+=u,this.#points?.push(e,t);d=-u/g*this.#thickness,e=p/g*this.#thickness;return this.#last.set(this.#last.subarray(2,8),0),this.#last.set([l+d,c+e],4),this.#last.set(this.#last.subarray(14,18),12),this.#last.set([l-d,c-e],16),isNaN(this.#last[6])?(0===this.#top.length&&(this.#last.set([n+d,s+e],2),this.#top.push(NaN,NaN,NaN,NaN,(n+d-r)/a,(s+e-i)/o),this.#last.set([n-d,s-e],14),this.#bottom.push(NaN,NaN,NaN,NaN,(n-d-r)/a,(s-e-i)/o)),this.#last.set([m,h,n,s,l,c],6),!this.isEmpty()):(this.#last.set([m,h,n,s,l,c],6),Math.abs(Math.atan2(h-s,m-n)-Math.atan2(u,p))<Math.PI/2?([n,s,l,c]=this.#last.subarray(2,6),this.#top.push(NaN,NaN,NaN,NaN,((n+l)/2-r)/a,((s+c)/2-i)/o),[n,s,m,h]=this.#last.subarray(14,18),this.#bottom.push(NaN,NaN,NaN,NaN,((m+n)/2-r)/a,((h+s)/2-i)/o)):([m,h,n,s,l,c]=this.#last.subarray(0,6),this.#top.push(((m+5*n)/6-r)/a,((h+5*s)/6-i)/o,((5*n+l)/6-r)/a,((5*s+c)/6-i)/o,((n+l)/2-r)/a,((s+c)/2-i)/o),[l,c,n,s,m,h]=this.#last.subarray(12,18),this.#bottom.push(((m+5*n)/6-r)/a,((h+5*s)/6-i)/o,((5*n+l)/6-r)/a,((5*s+c)/6-i)/o,((n+l)/2-r)/a,((s+c)/2-i)/o)),!0)}toSVGPath(){if(this.isEmpty())return"";var t=this.#top,r=this.#bottom;if(isNaN(this.#last[6])&&!this.isEmpty())return this.#toSVGPathTwoPoints();var i=[];i.push(`M${t[4]} `+t[5]);for(let e=6;e<t.length;e+=6)isNaN(t[e])?i.push(`L${t[e+4]} `+t[e+5]):i.push(`C${t[e]} ${t[e+1]} ${t[e+2]} ${t[e+3]} ${t[e+4]} `+t[e+5]);this.#toSVGPathEnd(i);for(let e=r.length-6;6<=e;e-=6)isNaN(r[e])?i.push(`L${r[e+4]} `+r[e+5]):i.push(`C${r[e]} ${r[e+1]} ${r[e+2]} ${r[e+3]} ${r[e+4]} `+r[e+5]);return this.#toSVGPathStart(i),i.join(" ")}#toSVGPathTwoPoints(){var[e,t,r,i]=this.#box,[a,o,n,s]=this.#getLastCoords();return`M${(this.#last[2]-e)/r} ${(this.#last[3]-t)/i} L${(this.#last[4]-e)/r} ${(this.#last[5]-t)/i} L${a} ${o} L${n} ${s} L${(this.#last[16]-e)/r} ${(this.#last[17]-t)/i} L${(this.#last[14]-e)/r} ${(this.#last[15]-t)/i} Z`}#toSVGPathStart(e){var t=this.#bottom;e.push(`L${t[4]} ${t[5]} Z`)}#toSVGPathEnd(e){var[t,r,i,a]=this.#box,o=this.#last.subarray(4,6),n=this.#last.subarray(16,18),[s,l,c,p]=this.#getLastCoords();e.push(`L${(o[0]-t)/i} ${(o[1]-r)/a} L${s} ${l} L${c} ${p} L${(n[0]-t)/i} `+(n[1]-r)/a)}newFreeDrawOutline(e,t,r,i,a,o){return new FreeDrawOutline(e,t,r,i,a,o)}getOutlines(){var t=this.#top,r=this.#bottom,e=this.#last,[i,a,o,n]=this.#box,s=new Float32Array((this.#points?.length??0)+2);for(let e=0,t=s.length-2;e<t;e+=2)s[e]=(this.#points[e]-i)/o,s[e+1]=(this.#points[e+1]-a)/n;if(s[s.length-2]=(this.#lastX-i)/o,s[s.length-1]=(this.#lastY-a)/n,isNaN(e[6])&&!this.isEmpty())return this.#getOutlineTwoPoints(s);var l=new Float32Array(this.#top.length+24+this.#bottom.length);let c=t.length;for(let e=0;e<c;e+=2)isNaN(t[e])?l[e]=l[e+1]=NaN:(l[e]=t[e],l[e+1]=t[e+1]);c=this.#getOutlineEnd(l,c);for(let t=r.length-6;6<=t;t-=6)for(let e=0;e<6;e+=2)isNaN(r[t+e])?l[c]=l[c+1]=NaN:(l[c]=r[t+e],l[c+1]=r[t+e+1]),c+=2;return this.#getOutlineStart(l,c),this.newFreeDrawOutline(l,s,this.#box,this.#scaleFactor,this.#innerMargin,this.#isLTR)}#getOutlineTwoPoints(e){var t=this.#last,[r,i,a,o]=this.#box,[n,s,l,c]=this.#getLastCoords(),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(t[2]-r)/a,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-r)/a,(t[5]-i)/o,NaN,NaN,NaN,NaN,n,s,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(t[16]-r)/a,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-r)/a,(t[15]-i)/o],0),this.newFreeDrawOutline(p,e,this.#box,this.#scaleFactor,this.#innerMargin,this.#isLTR)}#getOutlineStart(e,t){var r=this.#bottom;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+6}#getOutlineEnd(e,t){var r=this.#last.subarray(4,6),i=this.#last.subarray(16,18),[a,o,n,s]=this.#box,[l,c,p,d]=this.#getLastCoords();return e.set([NaN,NaN,NaN,NaN,(r[0]-a)/n,(r[1]-o)/s,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,p,d,NaN,NaN,NaN,NaN,(i[0]-a)/n,(i[1]-o)/s],t),t+24}}class FreeDrawOutline extends Outline{#box;#bbox=new Float32Array(4);#innerMargin;#isLTR;#points;#scaleFactor;#outline;constructor(r,i,e,t,a,o){super(),this.#outline=r,this.#points=i,this.#box=e,this.#scaleFactor=t,this.#innerMargin=a,this.#isLTR=o,this.lastPoint=[NaN,NaN],this.#computeMinMax(o);var[n,s,l,c]=this.#bbox;for(let e=0,t=r.length;e<t;e+=2)r[e]=(r[e]-n)/l,r[e+1]=(r[e+1]-s)/c;for(let e=0,t=i.length;e<t;e+=2)i[e]=(i[e]-n)/l,i[e+1]=(i[e+1]-s)/c}toSVGPath(){var r=[`M${this.#outline[4]} `+this.#outline[5]];for(let e=6,t=this.#outline.length;e<t;e+=6)isNaN(this.#outline[e])?r.push(`L${this.#outline[e+4]} `+this.#outline[e+5]):r.push(`C${this.#outline[e]} ${this.#outline[e+1]} ${this.#outline[e+2]} ${this.#outline[e+3]} ${this.#outline[e+4]} `+this.#outline[e+5]);return r.push("Z"),r.join(" ")}serialize([e,t,r,i],a){var o=r-e,n=i-t;let s,l;switch(a){case 0:s=Outline._rescale(this.#outline,e,i,o,-n),l=Outline._rescale(this.#points,e,i,o,-n);break;case 90:s=Outline._rescaleAndSwap(this.#outline,e,t,o,n),l=Outline._rescaleAndSwap(this.#points,e,t,o,n);break;case 180:s=Outline._rescale(this.#outline,r,t,-o,n),l=Outline._rescale(this.#points,r,t,-o,n);break;case 270:s=Outline._rescaleAndSwap(this.#outline,r,i,-o,-n),l=Outline._rescaleAndSwap(this.#points,r,i,-o,-n)}return{outline:Array.from(s),points:[Array.from(l)]}}#computeMinMax(e){var r=this.#outline;let i=r[4],a=r[5],o=i,n=a,s=i,l=a,c=i,p=a;var d=e?Math.max:Math.min;for(let t=6,e=r.length;t<e;t+=6){if(isNaN(r[t]))o=Math.min(o,r[t+4]),n=Math.min(n,r[t+5]),s=Math.max(s,r[t+4]),l=Math.max(l,r[t+5]),p<r[t+5]?(c=r[t+4],p=r[t+5]):p===r[t+5]&&(c=d(c,r[t+4]));else{let e=Util.bezierBoundingBox(i,a,...r.slice(t,t+6));o=Math.min(o,e[0]),n=Math.min(n,e[1]),s=Math.max(s,e[2]),l=Math.max(l,e[3]),p<e[3]?(c=e[2],p=e[3]):p===e[3]&&(c=d(c,e[2]))}i=r[t+4],a=r[t+5]}let t=this.#bbox;t[0]=o-this.#innerMargin,t[1]=n-this.#innerMargin,t[2]=s-o+2*this.#innerMargin,t[3]=l-n+2*this.#innerMargin,this.lastPoint=[c,p]}get box(){return this.#bbox}newOutliner(e,t,r,i,a,o=0){return new FreeDrawOutliner(e,t,r,i,a,o)}getNewOutline(e,t){var[r,i,a,o]=this.#bbox,[n,s,l,c]=this.#box,p=a*l,d=o*c,u=r*l+n,g=i*c+s,m=this.newOutliner({x:this.#points[0]*p+u,y:this.#points[1]*d+g},this.#box,this.#scaleFactor,e,this.#isLTR,t??this.#innerMargin);for(let e=2;e<this.#points.length;e+=2)m.add({x:this.#points[e]*p+u,y:this.#points[e+1]*d+g});return m.getOutlines()}}class HighlightOutliner{#box;#lastPoint;#verticalEdges=[];#intervals=[];constructor(e,t=0,r=0,i=!0){let a=1/0,o=-1/0,n=1/0,s=-1/0;var l,c,p,d,u=10**-4;for({x:l,y:c,width:p,height:d}of e){var g=Math.floor((l-t)/u)*u,m=Math.ceil((l+p+t)/u)*u,h=Math.floor((c-t)/u)*u,_=Math.ceil((c+d+t)/u)*u;this.#verticalEdges.push([g,h,_,!0],[m,h,_,!1]),a=Math.min(a,g),o=Math.max(o,m),n=Math.min(n,h),s=Math.max(s,_)}var f,v=o-a+2*r,y=s-n+2*r,P=a-r,S=n-r,e=this.#verticalEdges.at(i?-1:-2),r=[e[0],e[2]];for(f of this.#verticalEdges){var[w,b,C]=f;f[0]=(w-P)/v,f[1]=(b-S)/y,f[2]=(C-S)/y}this.#box=new Float32Array([P,S,v,y]),this.#lastPoint=r}getOutlines(){this.#verticalEdges.sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);var e,t=[];for(e of this.#verticalEdges)e[3]?(t.push(...this.#breakEdge(e)),this.#insert(e)):(this.#remove(e),t.push(...this.#breakEdge(e)));return this.#getOutlines(t)}#getOutlines(e){var t,r=[],l=new Set;for(t of e){var[i,a,o]=t;r.push([i,a,t],[i,o,t])}r.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let e=0,t=r.length;e<t;e+=2){var n=r[e][2],s=r[e+1][2];n.push(s),s.push(n),l.add(n),l.add(s)}for(var c,p=[];0<l.size;){var d=l.values().next().value;let[t,r,i,a,o]=d,n=(l.delete(d),t),s=r;for(p.push(c=[t,i]);;){let e;if(l.has(a))e=a;else{if(!l.has(o))break;e=o}l.delete(e),[t,r,i,a,o]=e,n!==t&&(c.push(n,s,t,s===r?r:i),n=t),s=s===r?i:r}c.push(n,s)}return new HighlightOutline(p,this.#box,this.#lastPoint)}#binarySearch(e){var t=this.#intervals;let r=0,i=t.length-1;for(;r<=i;){var a=r+i>>1,o=t[a][0];if(o===e)return a;o<e?r=1+a:i=a-1}return i+1}#insert([,e,t]){var r=this.#binarySearch(e);this.#intervals.splice(r,0,[e,t])}#remove([,t,r]){var i=this.#binarySearch(t);for(let e=i;e<this.#intervals.length;e++){var[a,o]=this.#intervals[e];if(a!==t)break;if(a===t&&o===r)return void this.#intervals.splice(e,1)}for(let e=i-1;0<=e;e--){var[n,s]=this.#intervals[e];if(n!==t)break;if(n===t&&s===r)return void this.#intervals.splice(e,1)}}#breakEdge(e){var[r,e,t]=e,i=[[r,e,t]],a=this.#binarySearch(t);for(let e=0;e<a;e++){var[o,n]=this.#intervals[e];for(let e=0,t=i.length;e<t;e++){var[,s,l]=i[e];if(!(n<=s||l<=o))if(o<=s)if(n<l)i[e][1]=n;else{if(1===t)return[];i.splice(e,1),e--,t--}else i[e][2]=o,n<l&&i.push([r,n,l])}}return i}}class HighlightOutline extends Outline{#box;#outlines;constructor(e,t,r){super(),this.#outlines=e,this.#box=t,this.lastPoint=r}toSVGPath(){var i,a=[];for(i of this.#outlines){let[t,r]=i;a.push(`M${t} `+r);for(let e=2;e<i.length;e+=2){var o=i[e],n=i[e+1];o===t?(a.push("V"+n),r=n):n===r&&(a.push("H"+o),t=o)}a.push("Z")}return a.join(" ")}serialize([t,e,r,i],a){var o,n=[],s=r-t,l=i-e;for(o of this.#outlines){var c=new Array(o.length);for(let e=0;e<o.length;e+=2)c[e]=t+o[e]*s,c[e+1]=i-o[e+1]*l;n.push(c)}return n}get box(){return this.#box}get classNamesForOutlining(){return["highlightOutline"]}}class FreeHighlightOutliner extends FreeDrawOutliner{newFreeDrawOutline(e,t,r,i,a,o){return new FreeHighlightOutline(e,t,r,i,a,o)}}class FreeHighlightOutline extends FreeDrawOutline{newOutliner(e,t,r,i,a,o=0){return new FreeHighlightOutliner(e,t,r,i,a,o)}}class ColorPicker{#button=null;#buttonSwatch=null;#defaultColor;#dropdown=null;#dropdownWasFromKeyboard=!1;#isMainColorPicker=!1;#editor=null;#eventBus;#openDropdownAC=null;#uiManager=null;#type;static#l10nColor=null;static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],ColorPicker.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ColorPicker.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ColorPicker.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ColorPicker.prototype._moveToPrevious],[["Home","mac+Home"],ColorPicker.prototype._moveToBeginning],[["End","mac+End"],ColorPicker.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#isMainColorPicker=!1,this.#type=AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.#editor=e):(this.#isMainColorPicker=!0,this.#type=AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR),this.#uiManager=e?._uiManager||t,this.#eventBus=this.#uiManager._eventBus,this.#defaultColor=e?.color||this.#uiManager?.highlightColors.values().next().value||"#FFFF98",ColorPicker.#l10nColor||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){var e=this.#button=document.createElement("button"),t=(e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0),this.#uiManager._signal),t=(e.addEventListener("click",this.#openDropdown.bind(this),{signal:t}),e.addEventListener("keydown",this.#keyDown.bind(this),{signal:t}),this.#buttonSwatch=document.createElement("span"));return t.className="swatch",t.setAttribute("aria-hidden",!0),t.style.backgroundColor=this.#defaultColor,e.append(t),e}renderMainDropdown(){var e=this.#dropdown=this.#getDropdownRoot();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#getDropdownRoot(){var e,t,r=document.createElement("div"),i=this.#uiManager._signal;r.addEventListener("contextmenu",noContextMenu,{signal:i}),r.className="dropdown",r.role="listbox",r.setAttribute("aria-multiselectable",!1),r.setAttribute("aria-orientation","vertical"),r.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for([e,t]of this.#uiManager.highlightColors){var a=document.createElement("button"),o=(a.tabIndex="0",a.role="option",a.setAttribute("data-color",t),a.title=e,a.setAttribute("data-l10n-id",ColorPicker.#l10nColor[e]),document.createElement("span"));a.append(o),o.className="swatch",o.style.backgroundColor=t,a.setAttribute("aria-selected",t===this.#defaultColor),a.addEventListener("click",this.#colorSelect.bind(this,t),{signal:i}),r.append(a)}return r.addEventListener("keydown",this.#keyDown.bind(this),{signal:i}),r}#colorSelect(e,t){t.stopPropagation(),this.#eventBus.dispatch("switchannotationeditorparams",{source:this,type:this.#type,value:e})}_colorSelectFromKeyboard(e){var t;e.target===this.#button?this.#openDropdown(e):(t=e.target.getAttribute("data-color"))&&this.#colorSelect(t,e)}_moveToNext(e){this.#isDropdownVisible?(e.target===this.#button?this.#dropdown.firstChild:e.target.nextSibling)?.focus():this.#openDropdown(e)}_moveToPrevious(e){e.target===this.#dropdown?.firstChild||e.target===this.#button?this.#isDropdownVisible&&this._hideDropdownFromKeyboard():(this.#isDropdownVisible||this.#openDropdown(e),e.target.previousSibling?.focus())}_moveToBeginning(e){this.#isDropdownVisible?this.#dropdown.firstChild?.focus():this.#openDropdown(e)}_moveToEnd(e){this.#isDropdownVisible?this.#dropdown.lastChild?.focus():this.#openDropdown(e)}#keyDown(e){ColorPicker._keyboardManager.exec(this,e)}#openDropdown(e){this.#isDropdownVisible?this.hideDropdown():(this.#dropdownWasFromKeyboard=0===e.detail,this.#openDropdownAC||(this.#openDropdownAC=new AbortController,window.addEventListener("pointerdown",this.#pointerDown.bind(this),{signal:this.#uiManager.combinedSignal(this.#openDropdownAC)})),this.#dropdown?this.#dropdown.classList.remove("hidden"):(e=this.#dropdown=this.#getDropdownRoot(),this.#button.append(e)))}#pointerDown(e){this.#dropdown?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#dropdown?.classList.add("hidden"),this.#openDropdownAC?.abort(),this.#openDropdownAC=null}get#isDropdownVisible(){return this.#dropdown&&!this.#dropdown.classList.contains("hidden")}_hideDropdownFromKeyboard(){this.#isMainColorPicker||(this.#isDropdownVisible?(this.hideDropdown(),this.#button.focus({preventScroll:!0,focusVisible:this.#dropdownWasFromKeyboard})):this.#editor?.unselect())}updateColor(e){if(this.#buttonSwatch&&(this.#buttonSwatch.style.backgroundColor=e),this.#dropdown){var t,r=this.#uiManager.highlightColors.values();for(t of this.#dropdown.children)t.setAttribute("aria-selected",r.next().value===e)}}destroy(){this.#button?.remove(),this.#button=null,this.#buttonSwatch=null,this.#dropdown?.remove(),this.#dropdown=null}}class HighlightEditor extends AnnotationEditor{#anchorNode=null;#anchorOffset=0;#boxes;#clipPathId=null;#colorPicker=null;#focusOutlines=null;#focusNode=null;#focusOffset=0;#highlightDiv=null;#highlightOutlines=null;#id=null;#isFreeHighlight=!1;#lastPoint=null;#opacity;#outlineId=null;#text="";#thickness;#methodOfCreation="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=AnnotationEditorType.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){var e=HighlightEditor.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||HighlightEditor._defaultColor,this.#thickness=e.thickness||HighlightEditor._defaultThickness,this.#opacity=e.opacity||HighlightEditor._defaultOpacity,this.#boxes=e.boxes||null,this.#methodOfCreation=e.methodOfCreation||"",this.#text=e.text||"",this._isDraggable=!1,-1<e.highlightId?(this.#isFreeHighlight=!0,this.#createFreeOutlines(e),this.#addToDrawLayer()):this.#boxes&&(this.#anchorNode=e.anchorNode,this.#anchorOffset=e.anchorOffset,this.#focusNode=e.focusNode,this.#focusOffset=e.focusOffset,this.#createOutlines(),this.#addToDrawLayer(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#isFreeHighlight?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#thickness,methodOfCreation:this.#methodOfCreation}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#createOutlines(){var e=new HighlightOutliner(this.#boxes,.001),e=(this.#highlightOutlines=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#highlightOutlines.box,new HighlightOutliner(this.#boxes,.0025,.001,"ltr"===this._uiManager.direction)),e=(this.#focusOutlines=e.getOutlines(),this.#focusOutlines).lastPoint;this.#lastPoint=[(e[0]-this.x)/this.width,(e[1]-this.y)/this.height]}#createFreeOutlines({highlightOutlines:e,highlightId:t,clipPathId:r}){this.#highlightOutlines=e;this.#focusOutlines=e.getNewOutline(this.#thickness/2+1.5,.0025),0<=t?(this.#id=t,this.#clipPathId=r,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#outlineId=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#focusOutlines.box,path:{d:this.#focusOutlines.toSVGPath()}},!0)):this.parent&&(r=this.parent.viewport.rotation,this.parent.drawLayer.updateProperties(this.#id,{bbox:HighlightEditor.#rotateBbox(this.#highlightOutlines.box,(r-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#outlineId,{bbox:HighlightEditor.#rotateBbox(this.#focusOutlines.box,r),path:{d:this.#focusOutlines.toSVGPath()}}));var[i,a,o,n]=e.box;switch(this.rotation){case 0:this.x=i,this.y=a,this.width=o,this.height=n;break;case 90:var[s,l]=this.parentDimensions;this.x=a,this.y=1-i,this.width=o*l/s,this.height=n*s/l;break;case 180:this.x=1-i,this.y=1-a,this.width=o,this.height=n;break;case 270:var[s,l]=this.parentDimensions;this.x=1-a,this.y=i,this.width=o*l/s,this.height=n*s/l}t=this.#focusOutlines.lastPoint;this.#lastPoint=[(t[0]-i)/o,(t[1]-a)/n]}static initialize(e,t){AnnotationEditor.initialize(e,t),HighlightEditor._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:HighlightEditor._defaultColor=t;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:HighlightEditor._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return this.#lastPoint}updateParams(e,t){switch(e){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:this.#updateColor(t);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:this.#updateThickness(t)}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,HighlightEditor._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,HighlightEditor._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||HighlightEditor._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,this.#thickness||HighlightEditor._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,this.#isFreeHighlight]]}#updateColor(e){var t=(e,t)=>{this.color=e,this.#opacity=t,this.parent?.drawLayer.updateProperties(this.#id,{root:{fill:e,"fill-opacity":t}}),this.#colorPicker?.updateColor(e)},r=this.color,i=this.#opacity;this.addCommands({cmd:t.bind(this,e,HighlightEditor._defaultOpacity),undo:t.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#updateThickness(e){var t=this.#thickness,r=e=>{this.#thickness=e,this.#changeThickness(e)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}async addEditToolbar(){var e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(this.#colorPicker=new ColorPicker({editor:this}),e.addColorPicker(this.#colorPicker)),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#getRotation())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#getRotation())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#cleanDrawLayer(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null===this.div||(this.#addToDrawLayer(),this.isAttachedToDOM)||this.parent.add(this))}setParent(e){let t=!1;this.parent&&!e?this.#cleanDrawLayer():e&&(this.#addToDrawLayer(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#changeThickness(e){var t;this.#isFreeHighlight&&(this.#createFreeOutlines({highlightOutlines:this.#highlightOutlines.getNewOutline(e/2)}),this.fixAndSetPosition(),[e,t]=this.parentDimensions,this.setDims(this.width*e,this.height*t))}#cleanDrawLayer(){null!==this.#id&&this.parent&&(this.parent.drawLayer.remove(this.#id),this.#id=null,this.parent.drawLayer.remove(this.#outlineId),this.#outlineId=null)}#addToDrawLayer(e=this.parent){null===this.#id&&({id:this.#id,clipPathId:this.#clipPathId}=e.drawLayer.draw({bbox:this.#highlightOutlines.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#opacity},rootClass:{highlight:!0,free:this.#isFreeHighlight},path:{d:this.#highlightOutlines.toSVGPath()}},!1,!0),this.#outlineId=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#isFreeHighlight},bbox:this.#focusOutlines.box,path:{d:this.#focusOutlines.toSVGPath()}},this.#isFreeHighlight),this.#highlightDiv)&&(this.#highlightDiv.style.clipPath=this.#clipPathId)}static#rotateBbox([e,t,r,i],a){switch(a){case 90:return[1-t-i,e,i,r];case 180:return[1-e-r,1-t-i,r,i];case 270:return[t,1-e-r,i,r]}return[e,t,r,i]}rotate(e){var t=this.parent.drawLayer;let r;r=this.#isFreeHighlight?(e=(e-this.rotation+360)%360,HighlightEditor.#rotateBbox(this.#highlightOutlines.box,e)):HighlightEditor.#rotateBbox([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#id,{bbox:r,root:{"data-main-rotation":e}}),t.updateProperties(this.#outlineId,{bbox:HighlightEditor.#rotateBbox(this.#focusOutlines.box,e),root:{"data-main-rotation":e}})}render(){var e,t,r;return this.div||(e=super.render(),this.#text&&(e.setAttribute("aria-label",this.#text),e.setAttribute("role","mark")),this.#isFreeHighlight?e.classList.add("free"):this.div.addEventListener("keydown",this.#keydown.bind(this),{signal:this._uiManager._signal}),t=this.#highlightDiv=document.createElement("div"),[t,r]=(e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#clipPathId,this.parentDimensions),this.setDims(this.width*t,this.height*r),bindEvents(this,this.#highlightDiv,["pointerover","pointerleave"]),this.enableEditing(),e)}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#outlineId,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#outlineId,{rootClass:{hovered:!1}})}#keydown(e){HighlightEditor._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#setCaret(!0);break;case 1:case 3:this.#setCaret(!1)}}#setCaret(e){var t;this.#anchorNode&&(t=window.getSelection(),e?t.setPosition(this.#anchorNode,this.#anchorOffset):t.setPosition(this.#focusNode,this.#focusOffset))}select(){super.select(),this.#outlineId&&this.parent?.drawLayer.updateProperties(this.#outlineId,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#outlineId&&(this.parent?.drawLayer.updateProperties(this.#outlineId,{rootClass:{selected:!1}}),this.#isFreeHighlight||this.#setCaret(!1))}get _mustFixPosition(){return!this.#isFreeHighlight}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#id,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#outlineId,{rootClass:{hidden:!e}}))}#getRotation(){return this.#isFreeHighlight?this.rotation:0}#serializeBoxes(){if(this.#isFreeHighlight)return null;var e,t,r,i,[a,o]=this.pageDimensions,[n,s]=this.pageTranslation,l=this.#boxes,c=new Float32Array(8*l.length);let p=0;for({x:e,y:t,width:r,height:i}of l){var d=e*a+n,u=(1-t)*o+s;c[p]=c[p+4]=d,c[p+1]=c[p+3]=u,c[p+2]=c[p+6]=d+r*a,c[p+5]=c[p+7]=u-i*o,p+=8}return c}#serializeOutlines(e){return this.#highlightOutlines.serialize(e,this.#getRotation())}static startHighlighting(t,e,{target:r,x:i,y:a}){var{x:o,y:n,width:s,height:l}=r.getBoundingClientRect();let c=new AbortController;var p=t.combinedSignal(c),d=e=>{c.abort(),this.#endHighlight(t,e)};window.addEventListener("blur",d,{signal:p}),window.addEventListener("pointerup",d,{signal:p}),window.addEventListener("pointerdown",stopEvent,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",noContextMenu,{signal:p}),r.addEventListener("pointermove",this.#highlightMove.bind(this,t),{signal:p}),this._freeHighlight=new FreeHighlightOutliner({x:i,y:a},[o,n,s,l],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#highlightMove(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#endHighlight(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(l,e,t){let c=null;if(l instanceof HighlightAnnotationElement){let{data:{quadPoints:e,rect:t,rotation:r,id:i,color:a,opacity:o,popupRef:n},parent:{page:{pageNumber:s}}}=l;c=l={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(a),opacity:o,quadPoints:e,boxes:null,pageIndex:s-1,rect:t.slice(0),rotation:r,id:i,deleted:!1,popupRef:n}}else if(l instanceof InkAnnotationElement){let{data:{inkLists:e,rect:t,rotation:r,id:i,color:a,borderStyle:{rawWidth:o},popupRef:n},parent:{page:{pageNumber:s}}}=l;c=l={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(a),thickness:o,inkLists:e,boxes:null,pageIndex:s-1,rect:t.slice(0),rotation:r,id:i,deleted:!1,popupRef:n}}let{color:r,quadPoints:i,inkLists:a,opacity:o}=l;var t=await super.deserialize(l,e,t),[n,s]=(t.color=Util.makeHexColor(...r),t.#opacity=o||1,a&&(t.#thickness=l.thickness),t.annotationElementId=l.id||null,t._initialData=c,t.pageDimensions),[p,d]=t.pageTranslation;if(i){var u=t.#boxes=[];for(let e=0;e<i.length;e+=8)u.push({x:(i[e]-p)/n,y:1-(i[e+1]-d)/s,width:(i[e+2]-i[e])/n,height:(i[e+1]-i[e+5])/s});t.#createOutlines(),t.#addToDrawLayer(),t.rotate(t.rotation)}else if(a){t.#isFreeHighlight=!0;var g=a[0],m={x:g[0]-p,y:s-(g[1]-d)},h=new FreeHighlightOutliner(m,[0,0,n,s],1,t.#thickness/2,!0,.001);for(let e=0,t=g.length;e<t;e+=2)m.x=g[e]-p,m.y=s-(g[e+1]-d),h.add(m);var{id:l,clipPathId:e}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:t.color,"fill-opacity":t._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:h.toSVGPath()}},!0,!0);t.#createFreeOutlines({highlightOutlines:h.getOutlines(),highlightId:l,clipPathId:e}),t.#addToDrawLayer()}return t}serialize(e=!1){var t;return this.isEmpty()||e?null:this.deleted?this.serializeDeleted():(e=this.getRect(0,0),t=AnnotationEditor._colorManager.convert(this.color),t={annotationType:AnnotationEditorType.HIGHLIGHT,color:t,opacity:this.#opacity,thickness:this.#thickness,quadPoints:this.#serializeBoxes(),outlines:this.#serializeOutlines(e),pageIndex:this.pageIndex,rect:e,rotation:this.#getRotation(),structTreeParentId:this._structTreeParentId},this.annotationElementId&&!this.#hasElementChanged(t)?null:(t.id=this.annotationElementId,t))}#hasElementChanged(e){let r=this._initialData.color;return e.color.some((e,t)=>e!==r[t])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class DrawingOptions{#svgProperties=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(var[t,r]of Object.entries(e))this.updateProperty(t,r)}updateSVGProperty(e,t){this.#svgProperties[e]=t}toSVGProperties(){var e=this.#svgProperties;return this.#svgProperties=Object.create(null),{root:e}}reset(){this.#svgProperties=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){unreachable("Not implemented")}}class DrawingEditor extends AnnotationEditor{#drawOutlines=null;#mustBeCommitted;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#currentDraw=null;static#currentDrawingAC=null;static#currentDrawingOptions=null;static#currentPointerId=NaN;static#currentPointerType=null;static#currentPointerIds=null;static#currentMoveTimestamp=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#mustBeCommitted=e.mustBeCommitted||!1,e.drawOutlines&&(this.#createDrawOutlines(e),this.#addToDrawLayer())}#createDrawOutlines({drawOutlines:e,drawId:t,drawingOptions:r}){this.#drawOutlines=e,this._drawingOptions||=r,0<=t?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#createDrawing(e,this.parent),this.#updateBbox(e.box)}#createDrawing(e,t){t=t.drawLayer.draw(DrawingEditor._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1).id;return t}static _mergeSVGProperties(e,t){var r,i,a=new Set(Object.keys(e));for([r,i]of Object.entries(t))a.has(r)?Object.assign(e[r],i):e[r]=i;return e}static getDefaultDrawingOptions(e){unreachable("Not implemented")}static get typesMap(){unreachable("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){e=this.typesMap.get(e);e&&this._defaultDrawingOptions.updateProperty(e,t),this._currentParent&&(DrawingEditor.#currentDraw.updateProperty(e,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){var r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,t)}static get defaultPropertiesToUpdate(){var e,t,r=[],i=this._defaultDrawingOptions;for([e,t]of this.typesMap)r.push([e,i[t]]);return r}get propertiesToUpdate(){var e,t,r=[],i=this._drawingOptions;for([e,t]of this.constructor.typesMap)r.push([e,i[t]]);return r}_updateProperty(e,t,r){let i=this._drawingOptions;var a=i[t],o=e=>{i.updateProperty(t,e);e=this.#drawOutlines.updateProperty(t,e);e&&this.#updateBbox(e),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:o.bind(this,r),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizingSVGProperties(this.#convertToDrawSpace()),{bbox:this.#rotateBox()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizedSVGProperties(this.#convertToDrawSpace()),{bbox:this.#rotateBox()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#rotateBox(e,t)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathTranslatedSVGProperties(this.#convertToDrawSpace(),this.parentDimensions),{bbox:this.#rotateBox()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#mustBeCommitted&&(this.#mustBeCommitted=!1,this.commit(),this.parent.setSelected(this),e)&&this.isOnScreen&&this.div.focus()}remove(){this.#cleanDrawLayer(),super.remove()}rebuild(){this.parent&&(super.rebuild(),null===this.div||(this.#addToDrawLayer(),this.#updateBbox(this.#drawOutlines.box),this.isAttachedToDOM)||this.parent.add(this))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#cleanDrawLayer()):e&&(this._uiManager.addShouldRescale(this),this.#addToDrawLayer(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#cleanDrawLayer(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#addToDrawLayer(e=this.parent){null!==this._drawId&&this.parent===e||(null!==this._drawId?this.parent.drawLayer.updateParent(this._drawId,e.drawLayer):(this._drawingOptions.updateAll(),this._drawId=this.#createDrawing(this.#drawOutlines,e)))}#convertToParentSpace([e,t,r,i]){var{parentDimensions:[a,o],rotation:n}=this;switch(n){case 90:return[t,1-e,r*(o/a),i*(a/o)];case 180:return[1-e,1-t,r,i];case 270:return[1-t,e,r*(o/a),i*(a/o)];default:return[e,t,r,i]}}#convertToDrawSpace(){var{x:e,y:t,width:r,height:i,parentDimensions:[a,o],rotation:n}=this;switch(n){case 90:return[1-t,e,r*(a/o),i*(o/a)];case 180:return[1-e,1-t,r,i];case 270:return[t,1-e,r*(a/o),i*(o/a)];default:return[e,t,r,i]}}#updateBbox(e){var t;[this.x,this.y,this.width,this.height]=this.#convertToParentSpace(e),this.div&&(this.fixAndSetPosition(),[e,t]=this.parentDimensions,this.setDims(this.width*e,this.height*t)),this._onResized()}#rotateBox(){var{x:e,y:t,width:r,height:i,rotation:a,parentRotation:o,parentDimensions:[n,s]}=this;switch((4*a+o)/90){case 1:return[1-t-i,e,i,r];case 2:return[1-e-r,1-t-i,r,i];case 3:return[t,1-e-r,i,r];case 4:return[e,t-r*(n/s),i*(s/n),r*(n/s)];case 5:return[1-t,e,r*(n/s),i*(s/n)];case 6:return[1-e-i*(s/n),1-t,i*(s/n),r*(n/s)];case 7:return[t-r*(n/s),1-e-i*(s/n),r*(n/s),i*(s/n)];case 8:return[e-r,t-i,r,i];case 9:return[1-t,e-r,i,r];case 10:return[1-e,1-t,r,i];case 11:return[t-i,1-e,i,r];case 12:return[e-i*(s/n),t,i*(s/n),r*(n/s)];case 13:return[1-t-r*(n/s),e-i*(s/n),r*(n/s),i*(s/n)];case 14:return[1-e,1-t-r*(n/s),i*(s/n),r*(n/s)];case 15:return[t,1-e,r*(n/s),i*(s/n)];default:return[e,t,r,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties({bbox:this.#rotateBox()},this.#drawOutlines.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#updateBbox(this.#drawOutlines.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){var e,t,r;return this.div||((e=super.render()).classList.add("draw"),t=document.createElement("div"),[t,r]=(e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",this.parentDimensions),this.setDims(this.width*t,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),e)}static createDrawerInstance(e,t,r,i,a){unreachable("Not implemented")}static startDrawing(e,t,r,i){var a,o,n,s,{target:i,offsetX:l,offsetY:c,pointerId:p,pointerType:d}=i;DrawingEditor.#currentPointerType&&DrawingEditor.#currentPointerType!==d||({rotation:a}=e.viewport,{width:o,height:n}=i.getBoundingClientRect(),s=DrawingEditor.#currentDrawingAC=new AbortController,s=e.combinedSignal(s),DrawingEditor.#currentPointerId||=p,DrawingEditor.#currentPointerType??=d,window.addEventListener("pointerup",e=>{DrawingEditor.#currentPointerId===e.pointerId?this._endDraw(e):DrawingEditor.#currentPointerIds?.delete(e.pointerId)},{signal:s}),window.addEventListener("pointercancel",e=>{DrawingEditor.#currentPointerId===e.pointerId?this._currentParent.endDrawingSession():DrawingEditor.#currentPointerIds?.delete(e.pointerId)},{signal:s}),window.addEventListener("pointerdown",e=>{DrawingEditor.#currentPointerType===e.pointerType&&((DrawingEditor.#currentPointerIds||=new Set).add(e.pointerId),DrawingEditor.#currentDraw.isCancellable())&&(DrawingEditor.#currentDraw.removeLastElement(),DrawingEditor.#currentDraw.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null))},{capture:!0,passive:!1,signal:s}),window.addEventListener("contextmenu",noContextMenu,{signal:s}),i.addEventListener("pointermove",this._drawMove.bind(this),{signal:s}),i.addEventListener("touchmove",e=>{e.timeStamp===DrawingEditor.#currentMoveTimestamp&&stopEvent(e)},{signal:s}),e.toggleDrawing(),t._editorUndoBar?.hide(),DrawingEditor.#currentDraw?e.drawLayer.updateProperties(this._currentDrawId,DrawingEditor.#currentDraw.startNew(l,c,o,n,a)):(t.updateUIForDefaultProperties(this),DrawingEditor.#currentDraw=this.createDrawerInstance(l,c,o,n,a),DrawingEditor.#currentDrawingOptions=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(DrawingEditor.#currentDrawingOptions.toSVGProperties(),DrawingEditor.#currentDraw.defaultSVGProperties),!0,!1)))}static _drawMove(e){var t,r,i;DrawingEditor.#currentMoveTimestamp=-1,DrawingEditor.#currentDraw&&({offsetX:t,offsetY:r,pointerId:i}=e,DrawingEditor.#currentPointerId===i)&&(1<=DrawingEditor.#currentPointerIds?.size?this._endDraw(e):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,DrawingEditor.#currentDraw.add(t,r)),DrawingEditor.#currentMoveTimestamp=e.timeStamp,stopEvent(e)))}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,DrawingEditor.#currentDraw=null,DrawingEditor.#currentDrawingOptions=null,DrawingEditor.#currentPointerType=null,DrawingEditor.#currentMoveTimestamp=NaN),DrawingEditor.#currentDrawingAC&&(DrawingEditor.#currentDrawingAC.abort(),DrawingEditor.#currentDrawingAC=null,DrawingEditor.#currentPointerId=NaN,DrawingEditor.#currentPointerIds=null)}static _endDraw(e){let i=this._currentParent;if(i)if(i.toggleDrawing(!0),this._cleanup(!1),e&&i.drawLayer.updateProperties(this._currentDrawId,DrawingEditor.#currentDraw.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){let e=DrawingEditor.#currentDraw,t=this._currentDrawId,r=e.getLastElement();void i.addCommands({cmd:()=>{i.drawLayer.updateProperties(t,e.setLastElement(r))},undo:()=>{i.drawLayer.updateProperties(t,e.removeLastElement())},mustExec:!1,type:AnnotationEditorParamsType.DRAW_STEP})}else this.endDrawing(!1)}static endDrawing(e){var t,r,i,a=this._currentParent;if(a){if(a.toggleDrawing(!0),a.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP),!DrawingEditor.#currentDraw.isEmpty())return{pageDimensions:[i,t],scale:r}=a,i=a.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:DrawingEditor.#currentDraw.getOutlines(i*r,t*r,r,this._INNER_MARGIN),drawingOptions:DrawingEditor.#currentDrawingOptions,mustBeCommitted:!e}),this._cleanup(!0),i;a.drawLayer.remove(this._currentDrawId),this._cleanup(!0)}return null}createDrawingOptions(e){}static deserializeDraw(e,t,r,i,a,o){unreachable("Not implemented")}static async deserialize(e,t,r){var{pageWidth:i,pageHeight:a,pageX:o,pageY:n}=t.viewport.rawDims,o=this.deserializeDraw(o,n,i,a,this._INNER_MARGIN,e),n=await super.deserialize(e,t,r);return n.createDrawingOptions(e),n.#createDrawOutlines({drawOutlines:o}),n.#addToDrawLayer(),n.onScaleChanging(),n.rotate(),n}serializeDraw(e){var[t,r]=this.pageTranslation,[i,a]=this.pageDimensions;return this.#drawOutlines.serialize([t,r,i,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class InkDrawOutliner{#last=new Float64Array(6);#line;#lines;#rotation;#thickness;#points;#lastSVGPath="";#lastIndex=0;#outlines=new InkDrawOutline;#parentWidth;#parentHeight;constructor(e,t,r,i,a,o){this.#parentWidth=r,this.#parentHeight=i,this.#rotation=a,this.#thickness=o,[e,t]=this.#normalizePoint(e,t);r=this.#line=[NaN,NaN,NaN,NaN,e,t];this.#points=[e,t],this.#lines=[{line:r,points:this.#points}],this.#last.set(r,0)}updateProperty(e,t){"stroke-width"===e&&(this.#thickness=t)}#normalizePoint(e,t){return Outline._normalizePoint(e,t,this.#parentWidth,this.#parentHeight,this.#rotation)}isEmpty(){return!this.#lines||0===this.#lines.length}isCancellable(){return this.#points.length<=10}add(e,t){[e,t]=this.#normalizePoint(e,t);var[r,i,a,o]=this.#last.subarray(2,6);return Math.hypot(this.#parentWidth*(e-a),this.#parentHeight*(t-o))<=2?null:(this.#points.push(e,t),isNaN(r)?(this.#last.set([a,o,e,t],2),this.#line.push(NaN,NaN,NaN,NaN,e,t)):(isNaN(this.#last[0])&&this.#line.splice(6,6),this.#last.set([r,i,a,o,e,t],0),this.#line.push(...Outline.createBezierPoints(r,i,a,o,e,t))),{path:{d:this.toSVGPath()}})}end(e,t){e=this.add(e,t);return e||(2===this.#points.length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,i,a){this.#parentWidth=r,this.#parentHeight=i,this.#rotation=a,[e,t]=this.#normalizePoint(e,t);r=this.#line=[NaN,NaN,NaN,NaN,e,t],this.#points=[e,t],i=this.#lines.at(-1);return i&&(i.line=new Float32Array(i.line),i.points=new Float32Array(i.points)),this.#lines.push({line:r,points:this.#points}),this.#last.set(r,0),this.#lastIndex=0,this.toSVGPath(),null}getLastElement(){return this.#lines.at(-1)}setLastElement(e){return this.#lines?(this.#lines.push(e),this.#line=e.line,this.#points=e.points,this.#lastIndex=0,{path:{d:this.toSVGPath()}}):this.#outlines.setLastElement(e)}removeLastElement(){if(!this.#lines)return this.#outlines.removeLastElement();this.#lines.pop(),this.#lastSVGPath="";for(let e=0,t=this.#lines.length;e<t;e++){var{line:r,points:i}=this.#lines[e];this.#line=r,this.#points=i,this.#lastIndex=0,this.toSVGPath()}return{path:{d:this.#lastSVGPath}}}toSVGPath(){var e,t,r=Outline.svgRound(this.#line[4]),i=Outline.svgRound(this.#line[5]);if(2===this.#points.length)this.#lastSVGPath=this.#lastSVGPath+` M ${r} ${i} Z`;else if(this.#points.length<=6&&(e=this.#lastSVGPath.lastIndexOf("M"),this.#lastSVGPath=this.#lastSVGPath.slice(0,e)+` M ${r} `+i,this.#lastIndex=6),4===this.#points.length)e=Outline.svgRound(this.#line[10]),t=Outline.svgRound(this.#line[11]),this.#lastSVGPath=this.#lastSVGPath+` L ${e} `+t,this.#lastIndex=12;else{var a=[];0===this.#lastIndex&&(a.push(`M ${r} `+i),this.#lastIndex=6);for(let e=this.#lastIndex,t=this.#line.length;e<t;e+=6){var[o,n,s,l,c,p]=this.#line.slice(e,e+6).map(Outline.svgRound);a.push(`C${o} ${n} ${s} ${l} ${c} `+p)}this.#lastSVGPath+=a.join(" "),this.#lastIndex=this.#line.length}return this.#lastSVGPath}getOutlines(e,t,r,i){var a=this.#lines.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#outlines.build(this.#lines,e,t,r,this.#rotation,this.#thickness,i),this.#last=null,this.#line=null,this.#lines=null,this.#lastSVGPath=null,this.#outlines}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class InkDrawOutline extends Outline{#bbox;#currentRotation=0;#innerMargin;#lines;#parentWidth;#parentHeight;#parentScale;#rotation;#thickness;build(e,t,r,i,a,o,n){this.#parentWidth=t,this.#parentHeight=r,this.#parentScale=i,this.#rotation=a,this.#thickness=o,this.#innerMargin=n??0,this.#lines=e,this.#computeBbox()}setLastElement(e){return this.#lines.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#lines.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){var r,i=[];for({line:r}of this.#lines)if(i.push(`M${Outline.svgRound(r[4])} `+Outline.svgRound(r[5])),6===r.length)i.push("Z");else if(12===r.length)i.push(`L${Outline.svgRound(r[10])} `+Outline.svgRound(r[11]));else for(let e=6,t=r.length;e<t;e+=6){var[a,o,n,s,l,c]=r.subarray(e,e+6).map(Outline.svgRound);i.push(`C${a} ${o} ${n} ${s} ${l} `+c)}return i.join("")}serialize([e,t,r,i],a){var o,n,s=[],l=[],[c,p,d,u]=this.#getBBoxWithNoMargin();let g,m,h,_,f,v,y,P,S;switch(this.#rotation){case 0:S=Outline._rescale,g=e,m=t+i,h=r,_=-i,f=e+c*r,v=t+(1-p-u)*i,y=e+(c+d)*r,P=t+(1-p)*i;break;case 90:S=Outline._rescaleAndSwap,g=e,m=t,h=r,_=i,f=e+p*r,v=t+c*i,y=e+(p+u)*r,P=t+(c+d)*i;break;case 180:S=Outline._rescale,g=e+r,m=t,h=-r,_=i,f=e+(1-c-d)*r,v=t+p*i,y=e+(1-c)*r,P=t+(p+u)*i;break;case 270:S=Outline._rescaleAndSwap,g=e+r,m=t+i,h=-r,_=-i,f=e+(1-p-u)*r,v=t+(1-c-d)*i,y=e+(1-p)*r,P=t+(1-c)*i}for({line:o,points:n}of this.#lines)s.push(S(o,g,m,h,_,a?new Array(o.length):null)),l.push(S(n,g,m,h,_,a?new Array(n.length):null));return{lines:s,points:l,rect:[f,v,y,P]}}static deserialize(e,t,r,i,a,{paths:{lines:o,points:n},rotation:s,thickness:l}){var c=[];let p,d,u,g,m;switch(s){case 0:m=Outline._rescale,p=-e/r,d=t/i+1,u=1/r,g=-1/i;break;case 90:m=Outline._rescaleAndSwap,p=-t/i,d=-e/r,u=1/i,g=1/r;break;case 180:m=Outline._rescale,p=e/r+1,d=-t/i,u=-1/r,g=1/i;break;case 270:m=Outline._rescaleAndSwap,p=t/i+1,d=e/r+1,u=-1/i,g=-1/r}if(!o){o=[];for(var h of n){var _=h.length;if(2===_)o.push(new Float32Array([NaN,NaN,NaN,NaN,h[0],h[1]]));else if(4===_)o.push(new Float32Array([NaN,NaN,NaN,NaN,h[0],h[1],NaN,NaN,NaN,NaN,h[2],h[3]]));else{var f=new Float32Array(3*(_-2));o.push(f);let[t,r,i,a]=h.subarray(0,4);f.set([NaN,NaN,NaN,NaN,t,r],0);for(let e=4;e<_;e+=2){var v=h[e],y=h[e+1];f.set(Outline.createBezierPoints(t,r,i,a,v,y),3*(e-2)),[t,r,i,a]=[i,a,v,y]}}}}for(let e=0,t=o.length;e<t;e++)c.push({line:m(o[e].map(e=>e??NaN),p,d,u,g),points:m(n[e].map(e=>e??NaN),p,d,u,g)});var P=new InkDrawOutline;return P.build(c,r,i,1,s,l,a),P}#getMarginComponents(e=this.#thickness){e=this.#innerMargin+e/2*this.#parentScale;return this.#rotation%180==0?[e/this.#parentWidth,e/this.#parentHeight]:[e/this.#parentHeight,e/this.#parentWidth]}#getBBoxWithNoMargin(){var[e,t,r,i]=this.#bbox,[a,o]=this.#getMarginComponents(0);return[e+a,t+o,r-2*a,i-2*o]}#computeBbox(){var a,o=this.#bbox=new Float32Array([1/0,1/0,-1/0,-1/0]);for({line:a}of this.#lines)if(a.length<=12)for(let e=4,t=a.length;e<t;e+=6){var[r,i]=a.subarray(e,e+2);o[0]=Math.min(o[0],r),o[1]=Math.min(o[1],i),o[2]=Math.max(o[2],r),o[3]=Math.max(o[3],i)}else{let r=a[4],i=a[5];for(let e=6,t=a.length;e<t;e+=6){var[n,s,l,c,p,d]=a.subarray(e,e+6);Util.bezierBoundingBox(r,i,n,s,l,c,p,d,o),r=p,i=d}}var[e,t]=this.#getMarginComponents();o[0]=Math.min(1,Math.max(0,o[0]-e)),o[1]=Math.min(1,Math.max(0,o[1]-t)),o[2]=Math.min(1,Math.max(0,o[2]+e)),o[3]=Math.min(1,Math.max(0,o[3]+t)),o[2]-=o[0],o[3]-=o[1]}get box(){return this.#bbox}updateProperty(e,t){return"stroke-width"===e?this.#updateThickness(t):null}#updateThickness(e){var[t,r]=this.#getMarginComponents(),[e,i]=(this.#thickness=e,this.#getMarginComponents()),[e,t]=[e-t,i-r],i=this.#bbox;return i[0]-=e,i[1]-=t,i[2]+=2*e,i[3]+=2*t,i}updateParentDimensions([e,t],r){var[i,a]=this.#getMarginComponents(),[e,t]=(this.#parentWidth=e,this.#parentHeight=t,this.#parentScale=r,this.#getMarginComponents()),r=e-i,e=t-a,i=this.#bbox;return i[0]-=r,i[1]-=e,i[2]+=2*r,i[3]+=2*e,i}updateRotation(e){return this.#currentRotation=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#bbox.map(Outline.svgRound).join(" ")}get defaultProperties(){var[e,t]=this.#bbox;return{root:{viewBox:this.viewBox},path:{"transform-origin":Outline.svgRound(e)+" "+Outline.svgRound(t)}}}get rotationTransform(){var[,,e,t]=this.#bbox;let r=0,i=0,a=0,o=0,n=0,s=0;switch(this.#currentRotation){case 90:i=t/e,a=-e/t,n=e;break;case 180:r=-1,o=-1,n=e,s=t;break;case 270:i=-t/e,a=e/t,s=t;break;default:return""}return`matrix(${r} ${i} ${a} ${o} ${Outline.svgRound(n)} ${Outline.svgRound(s)})`}getPathResizingSVGProperties([e,t,r,i]){var a,o,[n,s]=this.#getMarginComponents(),[l,c,p,d]=this.#bbox;return Math.abs(p-n)<=Outline.PRECISION||Math.abs(d-s)<=Outline.PRECISION?(a=e+r/2-(l+p/2),o=t+i/2-(c+d/2),{path:{"transform-origin":Outline.svgRound(e)+" "+Outline.svgRound(t),transform:this.rotationTransform+` translate(${a} ${o})`}}):(e=(r-2*n)/(p-2*n),t=(i-2*s)/(d-2*s),a=p/r,o=d/i,{path:{"transform-origin":Outline.svgRound(l)+" "+Outline.svgRound(c),transform:this.rotationTransform+` scale(${a} ${o}) `+`translate(${Outline.svgRound(n)} ${Outline.svgRound(s)}) scale(${e} ${t}) `+`translate(${Outline.svgRound(-n)} ${Outline.svgRound(-s)})`}})}getPathResizedSVGProperties([r,i,a,o]){var[n,s]=this.#getMarginComponents(),e=this.#bbox,[l,c,p,d]=e;if(e[0]=r,e[1]=i,e[2]=a,e[3]=o,Math.abs(p-n)<=Outline.PRECISION||Math.abs(d-s)<=Outline.PRECISION){let e=r+a/2-(l+p/2),t=i+o/2-(c+d/2);for(var{line:u,points:g}of this.#lines)Outline._translate(u,e,t,u),Outline._translate(g,e,t,g)}else{var m=(a-2*n)/(p-2*n),h=(o-2*s)/(d-2*s);let e=-m*(l+n)+r+n,t=-h*(c+s)+i+s;if(1!=m||1!=h||0!==e||0!==t)for(var{line:_,points:f}of this.#lines)Outline._rescale(_,e,t,m,h,_),Outline._rescale(f,e,t,m,h,f)}return{root:{viewBox:this.viewBox},path:{"transform-origin":Outline.svgRound(r)+" "+Outline.svgRound(i),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],r){var[r,i]=r,a=this.#bbox,o=e-a[0],n=t-a[1];if(this.#parentWidth===r&&this.#parentHeight===i)for(var{line:s,points:l}of this.#lines)Outline._translate(s,o,n,s),Outline._translate(l,o,n,l);else{var c,p,d=this.#parentWidth/r,u=this.#parentHeight/i;this.#parentWidth=r,this.#parentHeight=i;for({line:c,points:p}of this.#lines)Outline._rescale(c,o,n,d,u,c),Outline._rescale(p,o,n,d,u,p);a[2]*=d,a[3]*=u}return a[0]=e,a[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":Outline.svgRound(e)+" "+Outline.svgRound(t)}}}get defaultSVGProperties(){var e=this.#bbox;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":Outline.svgRound(e[0])+" "+Outline.svgRound(e[1]),transform:this.rotationTransform||null},bbox:e}}}class InkDrawingOptions extends DrawingOptions{#viewParameters;constructor(e){super(),this.#viewParameters=e,super.updateProperties({fill:"none",stroke:AnnotationEditor._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){"stroke-width"===e&&(t=(t??=this["stroke-width"])*this.#viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){var e=new InkDrawingOptions(this.#viewParameters);return e.updateAll(this),e}}class InkEditor extends DrawingEditor{static _type="ink";static _editorType=AnnotationEditorType.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0}static initialize(e,t){AnnotationEditor.initialize(e,t),this._defaultDrawingOptions=new InkDrawingOptions(t.viewParameters)}static getDefaultDrawingOptions(e){var t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return shadow(this,"typesMap",new Map([[AnnotationEditorParamsType.INK_THICKNESS,"stroke-width"],[AnnotationEditorParamsType.INK_COLOR,"stroke"],[AnnotationEditorParamsType.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,r,i,a){return new InkDrawOutliner(e,t,r,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,r,i,a,o){return InkDrawOutline.deserialize(e,t,r,i,a,o)}static async deserialize(e,t,r){let i=null;e instanceof InkAnnotationElement&&({data:{inkLists:a,rect:o,rotation:n,id:s,color:u,opacity:l,borderStyle:{rawWidth:c},popupRef:p},parent:{page:{pageNumber:d}}}=e,i=e={annotationType:AnnotationEditorType.INK,color:Array.from(u),thickness:c,opacity:l,paths:{points:a},boxes:null,pageIndex:d-1,rect:o.slice(0),rotation:n,id:s,deleted:!1,popupRef:p});var a,o,n,s,l,c,p,d,u=await super.deserialize(e,t,r);return u.annotationElementId=e.id||null,u._initialData=i,u}onScaleChanging(){var e,t,r;this.parent&&(super.onScaleChanging(),{_drawId:e,_drawingOptions:t,parent:r}=this,t.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,t.toSVGProperties()))}static onScaleChangingWhenDrawing(){var e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:r}){this._drawingOptions=InkEditor.getDefaultDrawingOptions({stroke:Util.makeHexColor(...e),"stroke-width":t,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();var{lines:t,points:r,rect:i}=this.serializeDraw(e),{stroke:a,"stroke-opacity":o,"stroke-width":n}=this._drawingOptions,a={annotationType:AnnotationEditorType.INK,color:AnnotationEditor._colorManager.convert(a),opacity:o,thickness:n,paths:{lines:t,points:r},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};if(!e){if(this.annotationElementId&&!this.#hasElementChanged(a))return null;a.id=this.annotationElementId}return a}#hasElementChanged(e){let{color:r,thickness:t,opacity:i,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((e,t)=>e!==r[t])||e.thickness!==t||e.opacity!==i||e.pageIndex!==a}renderAnnotationElement(e){var{points:t,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:t}),null}}class StampEditor extends AnnotationEditor{#bitmap=null;#bitmapId=null;#bitmapPromise=null;#bitmapUrl=null;#bitmapFile=null;#bitmapFileName="";#canvas=null;#resizeTimeoutId=null;#isSvg=!1;#hasBeenAddedInUndoStack=!1;static _type="stamp";static _editorType=AnnotationEditorType.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#bitmapUrl=e.bitmapUrl,this.#bitmapFile=e.bitmapFile}static initialize(e,t){AnnotationEditor.initialize(e,t)}static get supportedTypes(){return shadow(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>"image/"+e))}static get supportedTypesStr(){return shadow(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(AnnotationEditorType.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){e=e.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#getBitmapFetched(e,t=!1){e?(this.#bitmap=e.bitmap,t||(this.#bitmapId=e.id,this.#isSvg=e.isSvg),e.file&&(this.#bitmapFileName=e.file.name),this.#createCanvas()):this.remove()}#getBitmapDone(){if(this.#bitmapPromise=null,this._uiManager.enableWaiting(!1),this.#canvas)if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#bitmap)this._editToolbar.hide(),this._uiManager.editAltText(this,!0);else{if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#bitmap){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;var r=this._uiManager.mlManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");var{data:e,width:i,height:a}=e||this.copyCanvas(null,null,!0).imageData,r=await r.guess({name:"altText",request:{data:e,width:i,height:a,channels:e.length/(i*a)}});if(!r)throw new Error("No response from the AI service.");if(r.error)throw new Error("Error from the AI service.");if(r.cancel)return null;if(r.output)return await this.setGuessedAltText(e=r.output),t&&!this.hasAltTextData()&&(this.altTextData={alt:e,decorative:!1}),e;throw new Error("No valid response from the AI service.")}#getBitmap(){var e;if(this.#bitmapId)this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#bitmapId).then(e=>this.#getBitmapFetched(e,!0)).finally(()=>this.#getBitmapDone());else if(this.#bitmapUrl)e=this.#bitmapUrl,this.#bitmapUrl=null,this._uiManager.enableWaiting(!0),this.#bitmapPromise=this._uiManager.imageManager.getFromUrl(e).then(e=>this.#getBitmapFetched(e)).finally(()=>this.#getBitmapDone());else if(this.#bitmapFile)e=this.#bitmapFile,this.#bitmapFile=null,this._uiManager.enableWaiting(!0),this.#bitmapPromise=this._uiManager.imageManager.getFromFile(e).then(e=>this.#getBitmapFetched(e)).finally(()=>this.#getBitmapDone());else{let r=document.createElement("input"),e=(r.type="file",r.accept=StampEditor.supportedTypesStr,this._uiManager._signal);this.#bitmapPromise=new Promise(t=>{r.addEventListener("change",async()=>{var e;r.files&&0!==r.files.length?(this._uiManager.enableWaiting(!0),e=await this._uiManager.imageManager.getFromFile(r.files[0]),this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#getBitmapFetched(e)):this.remove(),t()},{signal:e}),r.addEventListener("cancel",()=>{this.remove(),t()},{signal:e})}).finally(()=>this.#getBitmapDone()),r.click()}}remove(){this.#bitmapId&&(this.#bitmap=null,this._uiManager.imageManager.deleteId(this.#bitmapId),this.#canvas?.remove(),this.#canvas=null,this.#resizeTimeoutId)&&(clearTimeout(this.#resizeTimeoutId),this.#resizeTimeoutId=null),super.remove()}rebuild(){this.parent?(super.rebuild(),null===this.div||(this.#bitmapId&&null===this.#canvas&&this.#getBitmap(),this.isAttachedToDOM)||this.parent.add(this)):this.#bitmapId&&this.#getBitmap()}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#bitmapPromise||this.#bitmap||this.#bitmapUrl||this.#bitmapFile||this.#bitmapId)}get isResizable(){return!0}render(){if(!this.div){let e,t;var r,i;this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#bitmap?this.#createCanvas():this.#getBitmap(),this.width&&!this.annotationElementId&&([r,i]=this.parentDimensions,this.setAt(e*r,t*i,this.width*r,this.height*i)),this._uiManager.addShouldRescale(this)}return this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){this.parent&&(null!==this.#resizeTimeoutId&&clearTimeout(this.#resizeTimeoutId),this.#resizeTimeoutId=setTimeout(()=>{this.#resizeTimeoutId=null,this.#drawBitmap()},200))}#createCanvas(){var e=this.div;let{width:t,height:r}=this.#bitmap;var[i,a]=this.pageDimensions,[o,n]=(this.width?(t=this.width*i,r=this.height*a):(t>.75*i||r>.75*a)&&(o=Math.min(.75*i/t,.75*a/r),t*=o,r*=o),this.parentDimensions),o=(this.setDims(t*o/i,r*n/a),this._uiManager.enableWaiting(!1),this.#canvas=document.createElement("canvas"));o.setAttribute("role","img"),this.addContainer(o),this.width=t/i,this.height=r/a,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(e.hidden=!1),this.#drawBitmap(),this.#hasBeenAddedInUndoStack||(this.parent.addUndoableEditor(this),this.#hasBeenAddedInUndoStack=!0),this._reportTelemetry({action:"inserted_image"}),this.#bitmapFileName&&o.setAttribute("aria-label",this.#bitmapFileName)}copyCanvas(r,i,e=!1){r=r||224;var{width:a,height:o}=this.#bitmap,n=new OutputScale;let s=this.#bitmap,l=a,c=o,p=null;if(i){(i<a||i<o)&&(i=Math.min(i/a,i/o),l=Math.floor(a*i),c=Math.floor(o*i));var i=(p=document.createElement("canvas")).width=Math.ceil(l*n.sx),d=p.height=Math.ceil(c*n.sy),u=(this.#isSvg||(s=this.#scaleBitmap(i,d)),p.getContext("2d"));u.filter=this._uiManager.hcmFilter;let e="white",t="#cfcfd8";"none"!==this._uiManager.hcmFilter?t="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(e="#8f8f9d",t="#42414d");var g=15*n.sx,m=15*n.sy,h=new OffscreenCanvas(2*g,2*m),_=h.getContext("2d");_.fillStyle=e,_.fillRect(0,0,2*g,2*m),_.fillStyle=t,_.fillRect(0,0,g,m),_.fillRect(g,m,g,m),u.fillStyle=u.createPattern(h,"repeat"),u.fillRect(0,0,i,d),u.drawImage(s,0,0,s.width,s.height,0,0,i,d)}let f=null;if(e){let e,t;n.symmetric&&s.width<r&&s.height<r?(e=s.width,t=s.height):(s=this.#bitmap,(r<a||r<o)&&(_=Math.min(r/a,r/o),e=Math.floor(a*_),t=Math.floor(o*_),this.#isSvg||(s=this.#scaleBitmap(e,t))));g=new OffscreenCanvas(e,t).getContext("2d",{willReadFrequently:!0});g.drawImage(s,0,0,s.width,s.height,0,0,e,t),f={width:e,height:t,data:g.getImageData(0,0,e,t).data}}return{canvas:p,width:l,height:c,imageData:f}}#scaleBitmap(e,t){var{width:r,height:i}=this.#bitmap;let a=r,o=i,n=this.#bitmap;for(;a>2*e||o>2*t;){var s=a,l=o,c=(a>2*e&&(a=16384<=a?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*t&&(o=16384<=o?Math.floor(o/2)-1:Math.ceil(o/2)),new OffscreenCanvas(a,o));c.getContext("2d").drawImage(n,0,0,s,l,0,0,a,o),n=c.transferToImageBitmap()}return n}#drawBitmap(){var[e,t]=this.parentDimensions,{width:r,height:i}=this,a=new OutputScale,r=Math.ceil(r*e*a.sx),e=Math.ceil(i*t*a.sy),i=this.#canvas;!i||i.width===r&&i.height===e||(i.width=r,i.height=e,t=this.#isSvg?this.#bitmap:this.#scaleBitmap(r,e),(a=i.getContext("2d")).filter=this._uiManager.hcmFilter,a.drawImage(t,0,0,t.width,t.height,0,0,r,e))}getImageForAltText(){return this.#canvas}#serializeBitmap(e){if(e){if(this.#isSvg){e=this._uiManager.imageManager.getSvgUrl(this.#bitmapId);if(e)return e}e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#bitmap,e.getContext("2d").drawImage(this.#bitmap,0,0),e.toDataURL()}var t,r;return this.#isSvg?([e,t]=this.pageDimensions,e=Math.round(this.width*e*PixelsPerInch.PDF_TO_CSS_UNITS),t=Math.round(this.height*t*PixelsPerInch.PDF_TO_CSS_UNITS),(r=new OffscreenCanvas(e,t)).getContext("2d").drawImage(this.#bitmap,0,0,this.#bitmap.width,this.#bitmap.height,0,0,e,t),r.transferToImageBitmap()):structuredClone(this.#bitmap)}static async deserialize(s,l,c){let p=null;if(s instanceof StampAnnotationElement){let{data:{rect:e,rotation:t,id:r,structParent:i,popupRef:a},container:o,parent:{page:{pageNumber:n}}}=s;var d=o.querySelector("canvas"),u=c.imageManager.getFromCanvas(o.id,d),d=(d.remove(),(await l._structTree.getAriaAttributes(""+AnnotationPrefix+r))?.get("aria-label")||"");p=s={annotationType:AnnotationEditorType.STAMP,bitmapId:u.id,bitmap:u.bitmap,pageIndex:n-1,rect:e.slice(0),rotation:t,id:r,deleted:!1,accessibilityData:{decorative:!1,altText:d},isSvg:!1,structParent:i,popupRef:a}}u=await super.deserialize(s,l,c);let{rect:e,bitmap:t,bitmapUrl:r,bitmapId:i,isSvg:a,accessibilityData:o}=s;i&&c.imageManager.isValidId(i)?(u.#bitmapId=i,t&&(u.#bitmap=t)):u.#bitmapUrl=r,u.#isSvg=a;var[d,l]=u.pageDimensions;return u.width=(e[2]-e[0])/d,u.height=(e[3]-e[1])/l,u.annotationElementId=s.id||null,o&&(u.altTextData=o),u._initialData=p,u.#hasBeenAddedInUndoStack=!!p,u}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();var r={annotationType:AnnotationEditorType.STAMP,bitmapId:this.#bitmapId,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#isSvg,structTreeParentId:this._structTreeParentId};if(e)r.bitmapUrl=this.#serializeBitmap(!0),r.accessibilityData=this.serializeAltText(!0);else{var{decorative:e,altText:i}=this.serializeAltText(!1);if(!e&&i&&(r.accessibilityData={type:"Figure",alt:i}),this.annotationElementId){e=this.#hasElementChanged(r);if(e.isSame)return null;e.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}r.id=this.annotationElementId,null!==t&&(t.stamps||=new Map,i=this.#isSvg?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null,t.stamps.has(this.#bitmapId)?this.#isSvg&&i>(e=t.stamps.get(this.#bitmapId)).area&&(e.area=i,e.serialized.bitmap.close(),e.serialized.bitmap=this.#serializeBitmap(!1)):(t.stamps.set(this.#bitmapId,{area:i,serialized:r}),r.bitmap=this.#serializeBitmap(!1)))}return r}#hasElementChanged(e){var{pageIndex:t,accessibilityData:{altText:r}}=this._initialData,t=e.pageIndex===t,e=(e.accessibilityData?.alt||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&t&&e,isSameAltText:e}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}class AnnotationEditorLayer{#accessibilityManager;#allowClick=!1;#annotationLayer=null;#clickAC=null;#editorFocusTimeoutId=null;#editors=new Map;#hadPointerDown=!1;#isDisabling=!1;#isEnabling=!1;#drawingAC=null;#focusedElement=null;#textLayer=null;#textSelectionAC=null;#uiManager;static _initialized=!1;static#editorTypes=new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:i,accessibilityManager:a,annotationLayer:o,drawLayer:n,textLayer:s,viewport:l,l10n:c}){var p=[...AnnotationEditorLayer.#editorTypes.values()];if(!AnnotationEditorLayer._initialized){AnnotationEditorLayer._initialized=!0;for(var d of p)d.initialize(c,e)}e.registerEditorTypes(p),this.#uiManager=e,this.pageIndex=t,this.div=r,this.#accessibilityManager=a,this.#annotationLayer=o,this.viewport=l,this.#textLayer=s,this.drawLayer=n,this._structTree=i,this.#uiManager.addLayer(this)}get isEmpty(){return 0===this.#editors.size}get isInvisible(){return this.isEmpty&&this.#uiManager.getMode()===AnnotationEditorType.NONE}updateToolbar(e){this.#uiManager.updateToolbar(e)}updateMode(e=this.#uiManager.getMode()){switch(this.#cleanup(),e){case AnnotationEditorType.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case AnnotationEditorType.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);var t,r=this.div.classList;for(t of AnnotationEditorLayer.#editorTypes.values())r.toggle(t._type+"Editing",e===t._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#textLayer?.div}setEditingState(e){this.#uiManager.setEditingState(e)}addCommands(e){this.#uiManager.addCommands(e)}cleanUndoStack(e){this.#uiManager.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#annotationLayer?.div.classList.toggle("disabled",!e)}async enable(){this.#isEnabling=!0,this.div.tabIndex=0,this.togglePointerEvents(!0);var e,t,r,i=new Set;for(e of this.#editors.values())e.enableEditing(),e.show(!0),e.annotationElementId&&(this.#uiManager.removeChangedExistingAnnotation(e),i.add(e.annotationElementId));if(this.#annotationLayer)for(t of this.#annotationLayer.getEditableAnnotations())t.hide(),this.#uiManager.isDeletedAnnotationElement(t.data.id)||i.has(t.data.id)||(r=await this.deserialize(t))&&(this.addOrRebuild(r),r.enableEditing());this.#isEnabling=!1}disable(){this.#isDisabling=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);var e,t,r=new Map,i=new Map;for(e of this.#editors.values())e.disableEditing(),e.annotationElementId&&(null!==e.serialize()?r.set(e.annotationElementId,e):(i.set(e.annotationElementId,e),this.getEditableAnnotation(e.annotationElementId)?.show(),e.remove()));if(this.#annotationLayer)for(t of this.#annotationLayer.getEditableAnnotations()){var a=t.data.id;if(!this.#uiManager.isDeletedAnnotationElement(a)){let e=i.get(a);e?(e.resetAnnotationElement(t),e.show(!1)):(e=r.get(a))&&(this.#uiManager.addChangedExistingAnnotation(e),e.renderAnnotationElement(t))&&e.show(!1),t.show()}}this.#cleanup(),this.isEmpty&&(this.div.hidden=!0);var o,n=this.div.classList;for(o of AnnotationEditorLayer.#editorTypes.values())n.remove(o._type+"Editing");this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#isDisabling=!1}getEditableAnnotation(e){return this.#annotationLayer?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#uiManager.getActive()!==e&&this.#uiManager.setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,this.#textLayer?.div&&!this.#textSelectionAC&&(this.#textSelectionAC=new AbortController,e=this.#uiManager.combinedSignal(this.#textSelectionAC),this.#textLayer.div.addEventListener("pointerdown",this.#textLayerPointerDown.bind(this),{signal:e}),this.#textLayer.div.classList.add("highlighting"))}disableTextSelection(){this.div.tabIndex=0,this.#textLayer?.div&&this.#textSelectionAC&&(this.#textSelectionAC.abort(),this.#textSelectionAC=null,this.#textLayer.div.classList.remove("highlighting"))}#textLayerPointerDown(e){this.#uiManager.unselectAll();var t=e.target;(t===this.#textLayer.div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&this.#textLayer.div.contains(t))&&(t=util_FeatureTest.platform.isMac,0!==e.button||e.ctrlKey&&t||(this.#uiManager.showAllEditors("highlight",!0,!0),this.#textLayer.div.classList.add("free"),this.toggleDrawing(),HighlightEditor.startHighlighting(this,"ltr"===this.#uiManager.direction,{target:this.#textLayer.div,x:e.x,y:e.y}),this.#textLayer.div.addEventListener("pointerup",()=>{this.#textLayer.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#uiManager._signal}),e.preventDefault()))}enableClick(){var e,t;this.#clickAC||(this.#clickAC=new AbortController,e=this.#uiManager.combinedSignal(this.#clickAC),this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),t=this.pointerup.bind(this),this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e}))}disableClick(){this.#clickAC?.abort(),this.#clickAC=null}attach(e){this.#editors.set(e.id,e);var t=e.annotationElementId;t&&this.#uiManager.isDeletedAnnotationElement(t)&&this.#uiManager.removeDeletedAnnotationElement(e)}detach(e){this.#editors.delete(e.id),this.#accessibilityManager?.removePointerInTextLayer(e.contentDiv),!this.#isDisabling&&e.annotationElementId&&this.#uiManager.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#uiManager.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#uiManager.addDeletedAnnotationElement(e.annotationElementId),AnnotationEditor.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div)&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div))}add(e){var t;e.parent===this&&e.isAttachedToDOM||(this.changeParent(e),this.#uiManager.addEditor(e),this.attach(e),e.isAttachedToDOM||(t=e.render(),this.div.append(t),e.isAttachedToDOM=!0),e.fixAndSetPosition(),e.onceAdded(!this.#isEnabling),this.#uiManager.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData))}moveEditorInDOM(t){if(t.isAttachedToDOM){let e=document.activeElement;t.div.contains(e)&&!this.#editorFocusTimeoutId&&(t._focusEventsAllowed=!1,this.#editorFocusTimeoutId=setTimeout(()=>{this.#editorFocusTimeoutId=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#uiManager._signal}),e.focus())},0)),t._structTreeParentId=this.#accessibilityManager?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return this.#uiManager.getId()}get#currentEditorType(){return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode())}combinedSignal(e){return this.#uiManager.combinedSignal(e)}#createNewEditor(e){var t=this.#currentEditorType;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#currentEditorType?.canCreateNewEmptyEditor()}pasteEditor(e,t){this.#uiManager.updateToolbar(e),this.#uiManager.updateMode(e);var{offsetX:e,offsetY:r}=this.#getCenterPoint(),i=this.getNextId(),i=this.#createNewEditor({parent:this,id:i,x:e,y:r,uiManager:this.#uiManager,isCentered:!0,...t});i&&this.add(i)}async deserialize(e){return await AnnotationEditorLayer.#editorTypes.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#uiManager)||null}createAndAddNewEditor(e,t,r={}){var i=this.getNextId(),i=this.#createNewEditor({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#uiManager,isCentered:t,...r});return i&&this.add(i),i}#getCenterPoint(){var{x:e,y:t,width:r,height:i}=this.div.getBoundingClientRect(),a=Math.max(0,e),o=Math.max(0,t),a=(a+Math.min(window.innerWidth,e+r))/2-e,r=(o+Math.min(window.innerHeight,t+i))/2-t,[e,o]=this.viewport.rotation%180==0?[a,r]:[r,a];return{offsetX:e,offsetY:o}}addNewEditor(){this.createAndAddNewEditor(this.#getCenterPoint(),!0)}setSelected(e){this.#uiManager.setSelected(e)}toggleSelected(e){this.#uiManager.toggleSelected(e)}unselect(e){this.#uiManager.unselect(e)}pointerup(e){var t=util_FeatureTest.platform.isMac;0!==e.button||e.ctrlKey&&t||e.target===this.div&&this.#hadPointerDown&&(this.#hadPointerDown=!1,this.#currentEditorType?.isDrawer&&this.#currentEditorType.supportMultipleDrawings||(this.#allowClick?this.#uiManager.getMode()===AnnotationEditorType.STAMP?this.#uiManager.unselectAll():this.createAndAddNewEditor(e,!1):this.#allowClick=!0))}pointerdown(e){var t;this.#uiManager.getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),this.#hadPointerDown?this.#hadPointerDown=!1:(t=util_FeatureTest.platform.isMac,0!==e.button||e.ctrlKey&&t||e.target===this.div&&(this.#hadPointerDown=!0,this.#currentEditorType?.isDrawer?this.startDrawingSession(e):(t=this.#uiManager.getActive(),this.#allowClick=!t||t.isEmpty())))}startDrawingSession(e){var t;this.div.focus(),this.#drawingAC||(this.#uiManager.setCurrentDrawingSession(this),this.#drawingAC=new AbortController,t=this.#uiManager.combinedSignal(this.#drawingAC),this.div.addEventListener("blur",({relatedTarget:e})=>{e&&!this.div.contains(e)&&(this.#focusedElement=null,this.commitOrRemove())},{signal:t})),this.#currentEditorType.startDrawing(this,this.#uiManager,!1,e)}pause(e){e?(e=document.activeElement,this.div.contains(e)&&(this.#focusedElement=e)):this.#focusedElement&&setTimeout(()=>{this.#focusedElement?.focus(),this.#focusedElement=null},0)}endDrawingSession(e=!1){return this.#drawingAC?(this.#uiManager.setCurrentDrawingSession(null),this.#drawingAC.abort(),this.#drawingAC=null,this.#focusedElement=null,this.#currentEditorType.endDrawing(e)):null}findNewParent(e,t,r){t=this.#uiManager.findParent(t,r);return null!==t&&t!==this&&(t.changeParent(e),!0)}commitOrRemove(){return!!this.#drawingAC&&(this.endDrawingSession(),!0)}onScaleChanging(){this.#drawingAC&&this.#currentEditorType.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#uiManager.getActive()?.parent===this&&(this.#uiManager.commitOrRemove(),this.#uiManager.setActiveEditor(null)),this.#editorFocusTimeoutId&&(clearTimeout(this.#editorFocusTimeoutId),this.#editorFocusTimeoutId=null);for(var e of this.#editors.values())this.#accessibilityManager?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#editors.clear(),this.#uiManager.removeLayer(this)}#cleanup(){for(var e of this.#editors.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,setLayerDimensions(this.div,e);for(var t of this.#uiManager.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#uiManager.commitOrRemove(),this.#cleanup();var t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,setLayerDimensions(this.div,{rotation:r}),t!==r)for(var i of this.#editors.values())i.rotate(r)}get pageDimensions(){var{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#uiManager.viewParameters.realScale}}class DrawLayer{#parent=null;#id=0;#mapping=new Map;#toUpdate=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(this.#parent){if(this.#parent!==e){if(0<this.#mapping.size)for(var t of this.#mapping.values())t.remove(),e.append(t);this.#parent=e}}else this.#parent=e}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}static#setBox(e,[t,r,i,a]){e=e.style;e.top=100*r+"%",e.left=100*t+"%",e.width=100*i+"%",e.height=100*a+"%"}#createSVG(){var e=DrawLayer._svgFactory.create(1,1,!0);return this.#parent.append(e),e.setAttribute("aria-hidden",!0),e}#createClipPath(e,t){var r=DrawLayer._svgFactory.createElement("clipPath"),e=(e.append(r),"clip_"+t),i=(r.setAttribute("id",e),r.setAttribute("clipPathUnits","objectBoundingBox"),DrawLayer._svgFactory.createElement("use"));return r.append(i),i.setAttribute("href","#"+t),i.classList.add("clip"),e}#updateProperties(e,t){for(var[r,i]of Object.entries(t))null===i?e.removeAttribute(r):e.setAttribute(r,i)}draw(e,t=!1,r=!1){var i=this.#id++,a=this.#createSVG(),o=DrawLayer._svgFactory.createElement("defs"),n=(a.append(o),DrawLayer._svgFactory.createElement("path")),s=(o.append(n),`path_p${this.pageIndex}_`+i),t=(n.setAttribute("id",s),n.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#toUpdate.set(i,n),r?this.#createClipPath(o,s):null),n=DrawLayer._svgFactory.createElement("use");return a.append(n),n.setAttribute("href","#"+s),this.updateProperties(a,e),this.#mapping.set(i,a),{id:i,clipPathId:`url(#${t})`}}drawOutline(e,t){var r=this.#id++,i=this.#createSVG(),a=DrawLayer._svgFactory.createElement("defs"),o=(i.append(a),DrawLayer._svgFactory.createElement("path")),n=(a.append(o),`path_p${this.pageIndex}_`+r);o.setAttribute("id",n),o.setAttribute("vector-effect","non-scaling-stroke");let s;t&&(o=DrawLayer._svgFactory.createElement("mask"),a.append(o),s=`mask_p${this.pageIndex}_`+r,o.setAttribute("id",s),o.setAttribute("maskUnits","objectBoundingBox"),t=DrawLayer._svgFactory.createElement("rect"),o.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white"),a=DrawLayer._svgFactory.createElement("use"),o.append(a),a.setAttribute("href","#"+n),a.setAttribute("stroke","none"),a.setAttribute("fill","black"),a.setAttribute("fill-rule","nonzero"),a.classList.add("mask"));t=DrawLayer._svgFactory.createElement("use"),i.append(t),t.setAttribute("href","#"+n),s&&t.setAttribute("mask",`url(#${s})`),o=t.cloneNode();return i.append(o),t.classList.add("mainOutline"),o.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#mapping.set(r,i),r}finalizeDraw(e,t){this.#toUpdate.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(t){var{root:t,bbox:r,rootClass:i,path:a}=t,e="number"==typeof e?this.#mapping.get(e):e;if(e){if(t&&this.#updateProperties(e,t),r&&DrawLayer.#setBox(e,r),i){var o,n,s=e.classList;for([o,n]of Object.entries(i))s.toggle(o,n)}a&&(t=e.firstChild.firstChild,this.#updateProperties(t,a))}}}updateParent(e,t){var r;t!==this&&(r=this.#mapping.get(e))&&(t.#parent.append(r),this.#mapping.delete(e),t.#mapping.set(e,r))}remove(e){this.#toUpdate.delete(e),null!==this.#parent&&(this.#mapping.get(e).remove(),this.#mapping.delete(e))}destroy(){this.#parent=null;for(var e of this.#mapping.values())e.remove();this.#mapping.clear(),this.#toUpdate.clear()}}globalThis.pdfjsTestingUtils={HighlightOutliner:HighlightOutliner},__webpack_exports__.AbortException,__webpack_exports__.AnnotationEditorLayer,__webpack_exports__.AnnotationEditorParamsType,__webpack_exports__.AnnotationEditorType,__webpack_exports__.AnnotationEditorUIManager,__webpack_exports__.AnnotationLayer,__webpack_exports__.AnnotationMode,__webpack_exports__.ColorPicker,__webpack_exports__.DOMSVGFactory,__webpack_exports__.DrawLayer,__webpack_exports__.FeatureTest;var __webpack_exports__GlobalWorkerOptions=__webpack_exports__.GlobalWorkerOptions,__webpack_exports__getDocument=(__webpack_exports__.ImageKind,__webpack_exports__.InvalidPDFException,__webpack_exports__.MissingPDFException,__webpack_exports__.OPS,__webpack_exports__.OutputScale,__webpack_exports__.PDFDataRangeTransport,__webpack_exports__.PDFDateString,__webpack_exports__.PDFWorker,__webpack_exports__.PasswordResponses,__webpack_exports__.PermissionFlag,__webpack_exports__.PixelsPerInch,__webpack_exports__.RenderingCancelledException,__webpack_exports__.TextLayer,__webpack_exports__.TouchManager,__webpack_exports__.UnexpectedResponseException,__webpack_exports__.Util,__webpack_exports__.VerbosityLevel,__webpack_exports__.XfaLayer,__webpack_exports__.build,__webpack_exports__.createValidAbsoluteUrl,__webpack_exports__.fetchData,__webpack_exports__.getDocument),showMe=(__webpack_exports__.getFilenameFromUrl,__webpack_exports__.getPdfFilenameFromUrl,__webpack_exports__.getXfaPageViewport,__webpack_exports__.isDataScheme,__webpack_exports__.isPdfFile,__webpack_exports__.noContextMenu,__webpack_exports__.normalizeUnicode,__webpack_exports__.setLayerDimensions,__webpack_exports__.shadow,__webpack_exports__.stopEvent,__webpack_exports__.version,{ready:!0,autoPlayNextStep:!0,slideshowAutoplay:!(__webpack_exports__GlobalWorkerOptions.workerSrc="../common/pdfLibJS/pdf.worker.js")});function updateShowMeSettings(){showMe.settings=getShowMeSettings()}function getShowMeSettings(){return{showMeSetting:GmCXt.getAppSetting("showMeSetting"),giphy:GmCXt.getAppSetting("giphy"),video:GmCXt.getAppSetting("video")}}GmCXt.imgThumLength=5;var invalidSegmentGuide=[];function showControl(e){mg$$1(e).show()}function hideControl(e){mg$$1(e).hide()}function show(e){mg$$1(e).css("display","block")}function hide(e){mg$$1(e).css("display","none")}function showIn(e){mg$$1(e).css("display","inline-block")}function showFlex(e){mg$$1(e).css("display","flex")}function showInlineFlex(e){mg$$1(e).css("display","inline-flex")}function disable(e){mg$$1(e).css({opacity:".5","pointer-events":"none"})}function reset(e){mg$$1(e).css({opacity:"","pointer-events":""})}function activate(e){mg$$1(e).addClass("mgPlayerJSPreview_showMe-player-active-mode")}function inactivate(e){mg$$1(e).removeClass("mgPlayerJSPreview_showMe-player-active-mode")}function removeStyle(e){mg$$1(e).removeAttr("style")}function disableSlideshowAutoplay(){!0===showMe.slideshowAutoplay&&(showMe.slideshowAutoplay=!1,showMe.autoPlayNextStep=!1)}function playModeView(e){GmCXt.FT.audio||hideControl(".mgPlayerJSPreview_showMe-play-ctrl-audio"),"slideshow"===e?(mg$$1(".mgPlayerJSPreview_slideshow-main").css({height:"calc(100% - 150px)"}),window.matchMedia("(max-width: 480px)").matches&&!GmCXt.isMiniPlayer&&mg$$1(".mgPlayerJSPreview_slideshow-main").css({height:"calc(100% - 17%)"}),mg$$1(".mgPlayerJSPreview_iframe-wrapper-div").css({height:"89%"})):"video"!==e&&"gif"!==e&&"giphy"!==e||(mg$$1(".mgPlayerJSPreview_slideshow-main").css({height:"86%"}),window.matchMedia("(max-width: 480px)").matches&&!GmCXt.isMiniPlayer&&mg$$1(".mgPlayerJSPreview_slideshow-main").css({height:"calc(100% - 12%)"}),mg$$1(".mgPlayerJSPreview_iframe-wrapper-div").css({height:"92%"}),disableSlideshowAutoplay(),GmCXt.isWBC()&&mg$$1(".mgPlayerJSPreview_slideshow-main").css({height:"92%"}))}function hideSlideShowPlayer(){mg$$1(".mgPlayerJSPreview_tour-player-panel").hide(),hide(".mgPlayerJSPreview_showMe-player-ctrl-container")}function showSlideShowPlayer(){updateShowMeSettings(),GmCXt.increaseSidePanel(),mg$$1(".ege-panel").css({width:"500px",right:"-9550px",transition:"width 0s"}),mg$$1(".mgPlayerJSPreview_slideshow-panel").css({display:"block",left:"50%"}),mg$$1(".mgPlayerJSPreview_tour-player-panel").show(),show(".mgPlayerJSPreview_showMe-player-ctrl-container"),mg$$1(".mgPlayerJSPreview_thumbnail-preview-wrapper").empty()}function getBulCount(e){var r=mg$$1(e).find("li").length;return mg$$1(e).find("li").each(function(e){var t=mg$$1(this).text().replace(/.*\{|\}/g,"");-1!==t.indexOf(";")&&(t=t.split(";")[1])&&"optional"===t.trim()&&r--}),r}function updateDropdown(e){var t=mg$$1(e).find("select").val();mg$$1(e).find("select").remove(),mg$$1(e).html(mg$$1(e).html()+t)}function updateTextarea(e){var t=mg$$1(e).find("textarea"),r=mg$$1(t).val().trim(),t=mg$$1(t).attr("optional");r||"true"!==t?("."===r[r.length-1]&&(r=r.substring(0,r.length-1)),mg$$1(e).find("textarea").remove(),mg$$1(e).html(mg$$1(e).html()+r)):mg$$1(e).remove()}function updatePowerFormHtml(){mg$$1(".mgPlayerJSPreview_form-injector-form").find("li").each(function(){var e=mg$$1(this).html();-1!==e.indexOf("<select")?updateDropdown(this):-1!==e.indexOf("<textarea")&&updateTextarea(this)}),mg$$1(".mgPlayerJSPreview_power-form-error").remove(),mg$$1(".mgPlayerJSPreview_form-injector-form-title").remove();var e=mg$$1(".mgPlayerJSPreview_form-injector-form").find("li").length,t=mg$$1(".mgPlayerJSPreview_form-injector-form").text().trim();1!==e||"yes"!==t.toLowerCase()&&"no"!==t.toLowerCase()||mg$$1(".mgPlayerJSPreview_form-injector-form").html(mg$$1(".mgPlayerJSPreview_form-injector-form").text())}function validate(e){var t=mg$$1(e).attr("maxlength"),t=parseInt(t),r=mg$$1(e).val().length;return t<=r?(mg$$1(e).next(".mgPlayerJSPreview_power-form-error").show(),t<r||void 0):(mg$$1(e).next(".mgPlayerJSPreview_power-form-error").hide(),!1)}function validateTextarea(){validate(this)}function validatePowerForm(){var i=!0;return mg$$1(".mgPlayerJSPreview_form-injector-form").find("li").each(function(){var e,t,r;-1!==mg$$1(this).html().indexOf("<textarea")&&(e=mg$$1(this).find("textarea"),t=mg$$1(e).val().trim(),r=mg$$1(e).attr("optional"),!t&&"true"!==r||validate(e))&&(mg$$1(this).find(".mgPlayerJSPreview_power-form-error").show(),i=!1)}),i}function getOldVal(e){return e&&-1!==mg$$1(e).text().indexOf(":")?mg$$1(e).text().substring(mg$$1(e).text().indexOf(":")+1):mg$$1(e).text()}function getDropDownHtml(e,t){for(var r=getOldVal(t),i=e.split("|"),a="<select>",o="",n=0;n<i.length;n++){var s,o=r&&r.replace(/\s/g,"").toLowerCase()===i[n].replace(/\s/g,"").toLowerCase()?"selected":"";s=25<i[n].length?i[n].slice(0,25)+"...":i[n],a=a+"<option "+o+" title ='"+i[n]+"' value = '"+i[n]+"' >"+s+"</option>"}return a+"</select>"}function getTextareaHtml(e,t){var t=getOldVal(t),r=parseInt(e.split("char")[0]),e=e.split(";")[1],i=!1;return"<textarea optional='"+(i=e&&"optional"===e.trim()?!0:i)+"' maxlength='"+r+"'  value='"+t+"' >"+t+"</textarea><div class='mgPlayerJSPreview_power-form-error'>"+GmCXt.label.powerFormMandatory+" "+r+" </div>"}function checkPreFilledData(e,t){e=getBulCount(e);return getBulCount(t)<=e?!0:!1}function getFormHtml(n,e){e=e.replace(/&nbsp;/gm,"");var s=mg$$1(n).text().trim().toLowerCase(),l=getBulCount(e),c=checkPreFilledData(n,e),p="";return mg$$1(e).find("li").each(function(r){var i,a=mg$$1(this).text().replace(/{(.*?)}/g,""),e=mg$$1(this).text().replace(/.*\{|\}/g,""),t="",o="";c&&(i=!1,mg$$1(n).find("li").each(function(e){var t;i||((t=(t=-1!==mg$$1(this).text().indexOf(":")?mg$$1(this).text().split(":")[0]:"").replace(/\s/g,""))&&0===a.replace(/\s/g,"").indexOf(t)?(o=mg$$1(n).find("li")[e],i=!0):t||a||(o=mg$$1(n).find("li")[r],i=!0))})),1!==l||"yes"!==s&&"no"!==s||(o=mg$$1(n)),-1!==e.indexOf("|")?t=getDropDownHtml(e,o):-1!==e.indexOf("char")&&(t=getTextareaHtml(e,o)),p=p+"<li>"+a+t+"</li>"}),p}function expandPowerForm(){"none"===mg$$1(".mgPlayerJSPreview_form-injector-old-value-wrapper").css("display")?(mg$$1(".mgPlayerJSPreview_form-injector-old-value-wrapper").css({display:"inline-block"}),mg$$1(".mgPlayerJSPreview_form-injector-form").css({width:"56%","border-left":"1px solid #bdbdbd"}),mg$$1(".mgPlayerJSPreview_power-form-expand-icon").css({transform:"rotate(180deg)"})):(mg$$1(".mgPlayerJSPreview_form-injector-old-value-wrapper").css({display:"none"}),mg$$1(".mgPlayerJSPreview_form-injector-form").css({width:"100%","border-left":"none"}),mg$$1(".mgPlayerJSPreview_power-form-expand-icon").css({transform:"rotate(0deg)"}))}function openPowerForm(e){var t=e.he,r=e.tag,i=e.value,a=e.jobId,o=e.step,n=e.isPreview,e=GmCXt.label.powerFormNewData,e=(checkPreFilledData(t,i)||(e=e+"<br/><p style='font-size:11px'> "+GmCXt.label.powerFormNewDataMore+"</p>"),"<div class='mgPlayerJSPreview_form-injector-wrapper mgPlayerJSPreview_form-injector-wrapper"+a+"'>   <div class='mgPlayerJSPreview_form-injector-wrapper-inner'>   <div class='mgPlayerJSPreview_form-injector-header'>       <div class='mgPlayerJSPreview_form-injector-title'>"+GmCXt.label.powerFormTitle+"</div>       <div class='mgPlayerJSPreview_form-injector-brand-logo'>"+GmCXt.getPopupLogo()+"</div>   </div>       <div class='mgPlayerJSPreview_form-injector-form-container'>           <div class='mgPlayerJSPreview_form-injector-old-value-wrapper'>               <div class='mgPlayerJSPreview_form-injector-old-value-title'>"+GmCXt.label.powerFormOldData+"</div>               <div class='mgPlayerJSPreview_form-injector-old-value'>"+t+"</div>           </div>           <div class='mgPlayerJSPreview_form-injector-form' style=''>               <div class='mgPlayerJSPreview_form-injector-form-title'>"+e+"</div>               <ul>"+getFormHtml(t,i)+"</ul>           </div>       </div>       <div class='mgPlayerJSPreview_form-injector-btns'>           <div class='mgPlayerJSPreview_power-form-expand-icon'></div>           <div class='mgPlayerJSPreview_form-injector-cancel mgPlayerJSPreview_btn-default mgPlayerJSPreview_btn-neutral'>"+GmCXt.label.btnCancel+" </div>           <div class='mgPlayerJSPreview_form-injector-submit mgPlayerJSPreview_btn-default'> "+GmCXt.label.btnSubmit+"</div>       </div>   </div> </div>");mg$$1(".mgPlayerJSPreview_form-injector-wrapper").remove(),mg$$1("body").append(e),GmCXt.getBrandLogo()||mg$$1(".mgPlayerJSPreview_form-injector-brand-logo").html(GmCXt.svgs.white_myguide_logo),mg$$1(".mgPlayerJSPreview_power-form-expand-icon").html(GmCXt.svgs.expand_power_form),mg$$1(".mgPlayerJSPreview_form-injector-form li textarea").off("change keyup paste").on("change keyup paste",validateTextarea),mg$$1(".mgPlayerJSPreview_power-form-expand-icon").off("click").on("click",expandPowerForm),mg$$1(".mgPlayerJSPreview_form-injector-submit").off("click").on("click",function(){var e;validatePowerForm()&&(!n&&o&&GmCXt.updateTooltipActionInfo(o.tour_id,o.step_id,o.step_settings.smarttip,"submit"),updatePowerFormHtml(),e=mg$$1(".mgPlayerJSPreview_form-injector-form").html(),formatAndSendToParentWindow("mgPlayerJSPreview_action:insert_power_html_i",{he:t,tag:r,formHtml:e,forceInsert:!0,jobId:a}),GmCXt.closePowerFormSp())}),mg$$1(".mgPlayerJSPreview_form-injector-cancel").off("click").on("click",function(){!n&&o&&GmCXt.updateTooltipActionInfo(o.tour_id,o.step_id,o.step_settings.smarttip,"cancel"),GmCXt.closePowerFormSp()})}function getCustomImgName(){return"mgPlayerJSPreview_custom-image"}function updatePlayStructure(e){e=GmCXt.getGuidePlayStructure(e);GmCXt.playerI.playStructure=GmCXt.playerI.playStructure.concat(e),formatAndSendToParentWindow("mgPlayerJSPreview_action:update_player_instance")}function getVideoHTML(e,t){var r="";return t?(r="<video id='video-container' width='100%' disablePictureInPicture controls autoplay ",r=(r+=" class='mgPlayerJSPreview_play-video-iframe' "+playAudio()+"> ")+" <source src='"+e+"'  type='video/mp4'  autostart='true'></video> "):(r="<iframe class='mgPlayerJSPreview_play-video-iframe' src='"+e+"' ",r+=" width='100%' title='Guideme video iframe'  height='100%' frameborder='0' allowfullscreen ></iframe> "),r}function setVideoControls(){hide(".mgPlayerJSPreview_showMe-player-ctrl-container"),hide(".mgPlayerJSPreview_slideshow-next-button"),hide(".mgPlayerJSPreview_slideshow-prev-button"),mg$$1(".mgPlayerJSPreview_slideshow-tour-title").text(GmCXt.playerI.title),mg$$1(".mgPlayerJSPreview_slideshow-logo").attr("src",GmCXt.brandLogo());var e=getVideoHTML(GmCXt.playerI.video_url,!0);mg$$1(".mgPlayerJSPreview_iframe-wrapper-div").html(e)}function addSlidePlayerThumbnail(e,t){var r;!e&&t?GmCXt.branchStepExistInPS()?(r=GmCXt.getStepSortedByPS(GmCXt.playerI.playStructure,GmCXt.playerI.currentStepId),e=GmCXt.playerI.currentStepId):r=t:r=GmCXt.branchStepExistInPS()&&e?GmCXt.getStepSortedByPS(GmCXt.playerI.playStructure,e):GmCXt.playerI.tour.steps,createThumbnail(e,t=5<(t=r.length)?findIndex()>=GmCXt.imgThumLength?findIndex()+1:GmCXt.imgThumLength:t,r)}function showSlideShowControls(){showControl(".mgPlayerJSPreview_player-audio-controls"),showControl(".mgPlayerJSPreview_step-thumbnail-container"),showControl(".mgPlayerJSPreview_mode-slideshow"),showControl(".mgPlayerJSPreview_mode-giphy"),showControl(".mgPlayerJSPreview_mode-video"),showControl(".mgPlayerJSPreview_showMe-play-mode-autoplay-wrapper"),showControl(".mgPlayerJSPreview_showMe-play-mode-autoplay"),GmCXt.containBranchStep(GmCXt.playerI.tour)&&(hideControl(".mgPlayerJSPreview_mode-video"),hideControl(".mgPlayerJSPreview_mode-giphy"),hideControl(".mgPlayerJSPreview_autoplay-option-checkbox"),hideControl(".mgPlayerJSPreview_showMe-play-mode-autoplay-wrapper"),disableSlideshowAutoplay()),setShowMeOptions(),showControl(".mgPlayerJSPreview_resize-slideshow")}function hideShowControls(){var e;GmCXt.isWBMicroPlayer()||(showSlideShowControls(),((e=GmCXt.playerI.tour.media_files)&&void 0!==e[0]?((e[0].video&&showMe.settings.video?reset:disable)(".mgPlayerJSPreview_mode-video"),e[0].gify&&showMe.settings.giphy?reset:disable):(disable(".mgPlayerJSPreview_mode-video"),disable))(".mgPlayerJSPreview_mode-giphy"),GmCXt.isWBC()&&(mg$$1(".mgPlayerJSPreview_slideshow-next-button").remove(),mg$$1(".mgPlayerJSPreview_slideshow-prev-button").remove(),hide(".mgPlayerJSPreview_showMe-player-ctrl-container")))}function attachThumbEvent(){mg$$1(document).off("click").on("click",".slideshow-thumbnail-img",function(e){GmCXt.playerI.currentStepId=mg$$1(this).attr("stepId"),closeStep(),playSlideshowStep(),mg$$1(".slideshow-thumbnail").removeClass("mgPlayerJSPreview_active-thumbnail"),mg$$1(this).children().addClass("mgPlayerJSPreview_active-thumbnail")})}function initSlideshowControls(){GmCXt.playerI.totalStepCount=parseInt(GmCXt.playerI.tour.step_count),(4<GmCXt.playerI.totalStepCount?(reset(".mgPlayerJSPreview_control-thumbnail-prev"),reset):(disable(".mgPlayerJSPreview_control-thumbnail-prev"),disable))(".mgPlayerJSPreview_control-thumbnail-next"),showIn(".mgPlayerJSPreview_slideshow-main"),showIn(".mgPlayerJSPreview_slideshow-next-button"),showIn(".mgPlayerJSPreview_slideshow-prev-button"),show(".mgPlayerJSPreview_tour-player-panel"),mg$$1(".mgPlayerJSPreview_slideshow-tour-title").text(GmCXt.playerI.tour.tour_title),mg$$1(".mgPlayerJSPreview_slideshow-logo").attr("src",GmCXt.brandLogo()),removeStyle("#mgPlayerJSPreview_svg-prev-bg"),removeStyle("#mgPlayerJSPreview_svg-next-bg"),removeStyle("#mgPlayerJSPreview_svg-next-arrow"),removeStyle("#mgPlayerJSPreview_svg-prev-arrow")}function keydownEventListener(e){37===e.which?playPreviousStep():39===e.which?playNextStep():27===e.which&&closeSlideshow()}function loadSlideshowConstant(){mg$$1(".mgPlayerJSPreview_slideshow-redirect-link").text(GmCXt.label.redirectLivetour),mg$$1(".mgPlayerJSPreview_slideshow-image-spinner img").attr("src",GmCXt.loader()),showIn(".mgPlayerJSPreview_slideshow-main"),showIn(".mgPlayerJSPreview_slideshow-next-button"),showIn(".mgPlayerJSPreview_slideshow-prev-button"),attachDOMEvents(),attachStringConstant(),attachSvgConstant()}function attachStringConstant(){mg$$1(".mgPlayerJSPreview_popup-content-wrapper").html(GmCXt.label.guideNotAvailable),mg$$1(".mgPlayerJSPreview_redirect-to-link-ok-btn").html(GmCXt.label.ok),mg$$1(".mgPlayerJSPreview_label-in-app").html(GmCXt.label.inApp),mg$$1(".mgPlayerJSPreview_label-video").html(GmCXt.label.video),mg$$1(".mgPlayerJSPreview_label-giphy").html(GmCXt.label.giphy),mg$$1(".mgPlayerJSPreview_label-slideshow").html(GmCXt.label.slideshow),mg$$1(".mgPlayerJSPreview_label-live").html(GmCXt.label.live),mg$$1("#mgPlayerJSPreview_btn-autoplay").html(GmCXt.label.autoplay),mg$$1("#mgPlayerJSPreview_btn-autoplay-on").html(GmCXt.label.on),mg$$1("#mgPlayerJSPreview_btn-autoplay-off").html(GmCXt.label.off)}function attachSvgConstant(){mg$$1("#mgPlayerJSPreview_slideshow_drag").html(GmCXt.svgs.slideshow_drag),mg$$1(".mgPlayerJSPreview_icon-close-slideshow").html(GmCXt.svgs.close_slideshow),mg$$1(".mgPlayerJSPreview_icon-close-oops-msg").html(GmCXt.svgs.close_slideshow),mg$$1(".mgPlayerJSPreview_icon-slideshow-prev-button").html(GmCXt.svgs.slideshow_prev_button),mg$$1(".mgPlayerJSPreview_icon-slideshow-next-button").html(GmCXt.svgs.slideshow_next_button),mg$$1(".mgPlayerJSPreview_control-icon-prev").html(GmCXt.svgs.slideshow_prev_button),mg$$1(".mgPlayerJSPreview_control-icon-next").html(GmCXt.svgs.slideshow_next_button),mg$$1(".mgPlayerJSPreview_playerbar-icon-slideshow-prev").html(GmCXt.svgs.playerbar_prev_button),mg$$1(".mgPlayerJSPreview_playerbar-icon-slideshow-next").html(GmCXt.svgs.playerbar_next_button),mg$$1(".mgPlayerJSPreview_btn-audio-mute").html(GmCXt.svgs.slideshow_mute),mg$$1(".mgPlayerJSPreview_btn-audio-unmute").html(GmCXt.svgs.slideshow_unmute),mg$$1(".mgPlayerJSPreview_icon-mode-video").html(GmCXt.svgs.slideshow_video_mode),mg$$1(".mgPlayerJSPreview_icon-mode-giphy").html(GmCXt.svgs.slideshow_giphy_mode),mg$$1(".mgPlayerJSPreview_icon-mode-slideshow").html(GmCXt.svgs.slideshow_mode),mg$$1(".mgPlayerJSPreview_icon-player-close").html(GmCXt.svgs.playerbar_close),mg$$1("#mgPlayerJSPreview_zoom-in").html(GmCXt.svgs.add_icon),mg$$1("#mgPlayerJSPreview_zoom-out").html(GmCXt.svgs.subtract_icon)}function attachDOMEvents(){mg$$1(".mgPlayerJSPreview_slideshow-close").off("click").on("click",closeSlideshow),mg$$1(".mgPlayerJSPreview_player-close").off("click").on("click",closeSlideshow),mg$$1(".mgPlayerJSPreview_player-audio-controls").off("click").on("click",slideshowAudioIconClickEvent),mg$$1(".mgPlayerJSPreview_mode-video").off("click").on("click",playVideoStep),mg$$1(".mgPlayerJSPreview_mode-giphy").off("click").on("click",playGuideGiphy),mg$$1(".mgPlayerJSPreview_mode-slideshow").off("click").on("click",playSlideshowStep),mg$$1(".mgPlayerJSPreview_autoplay-custom-slider").on("click",function(){var e=mg$$1(".mgPlayerJSPreview_autoplay-slider-checkbox");e.prop("checked",!e.prop("checked")).trigger("change")}),mg$$1("#mgPlayerJSPreview_autoplay-slider-checkbox").on("change",function(){mg$$1(this).prop("checked")?((showMe.videoPaused?resumeVideoStep:playSlideshowStep)(),showMe.slideshowAutoplay=!0,showMe.autoPlayNextStep=!0):(pauseVideoStep(),pauseAudio(),showMe.slideshowAutoplay=!1,showMe.autoPlayNextStep=!1)}),mg$$1(".mgPlayerJSPreview_slideshow-next-button").off("click").on("click",function(e){playNextStep()}),mg$$1(".mgPlayerJSPreview_slideshow-prev-button").off("click").on("click",function(e){playPreviousStep()}),mg$$1(".mgPlayerJSPreview_control-thumbnail-next").off("click").on("click",function(){playNextStep()}),mg$$1("#mgPlayerJSPreview_slideshow-popup-next-button").off("click").on("click",function(){playNextStep()}),mg$$1(".mgPlayerJSPreview_control-thumbnail-prev").off("click").on("click",function(){playPreviousStep()}),mg$$1("#mgPlayerJSPreview_slideshow-popup-prev-button").off("click").on("click",function(){playPreviousStep()}),GmCXt.addDragSlideshowFunction()}function pauseVideoStep(){var e;GmCXt.playerI&&GmCXt.getStepFromPlayerI(GmCXt.playerI.currentStepId).step_type===GmCXt.STEP_TYPE_VIDEO&&(showMe.videoPaused=!0,e=document.getElementById("video-container"))&&e.pause()}function resumeVideoStep(){GmCXt.getStepFromPlayerI(GmCXt.playerI.currentStepId).step_type===GmCXt.STEP_TYPE_VIDEO&&document.getElementById("video-container").play()}function removeVideo(){mg$$1(".mgPlayerJSPreview_iframe-wrapper-div").find("iframe").remove(),mg$$1(".mgPlayerJSPreview_iframe-wrapper-div").find("video").length&&mg$$1(".mgPlayerJSPreview_iframe-wrapper-div").find("video").remove()}function closeSlideshowActivities(){var e;GmCXt.playerI&&(e=GmCXt.playerI.tour.tour_settings)&&e.play_structure&&e.play_structure.length&&GmCXt.playerI.tour&&GmCXt.playerI.tour.steps&&GmCXt.playerI.tour.steps.length&&GmCXt.playerI.tour.steps[0].step_id===e.play_structure[0].id&&GmCXt.isLastStep(GmCXt.playerI.currentStepId,e.play_structure)&&(GmCXt.playerI.completeEventTracked=!0),trackSlideshowEvents(GmCXt.playerI.currentStepId),showMe.autoPlayNextStep=!1,GmCXt.stopAudio(),pauseVideoStep(),pauseAudio(),stopSlideshow(),GmCXt.imgThumLength=5,mg$$1(".ege-panel").css({width:"500px","max-width":"500px",transition:"width 0s",right:"initial"})}function showExitSurveyShowMe(){var e=GmCXt.getOrgSettings();e&&e.exitSentiment&&(e={tour:GmCXt.playerI.tour,guideNotCompleted:!0},GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:showSurveyScreen",e))}function closeSlideshow(e){var t,r;Gm.slideState.set({}),closeSlideshowActivities(),GmCXt.playerI&&GmCXt.isPlayer()&&!GmCXt.playerI.giphyPlayed&&(r=!1,!GmCXt.isLastStep(GmCXt.playerI.currentStepId,GmCXt.playerI.playStructure)&&(t=GmCXt.getTail(GmCXt.playerI.currentStepId,GmCXt.playerI.playStructure),r=GmCXt.isLastStep(t.step_id,GmCXt.playerI.playStructure),!GmCXt.isVideoEndedOnShowme&&GmCXt.playerI.type===GmCXt.TOUR_PLAYER_VIDEO||t&&GmCXt.playerI.type!==GmCXt.TOUR_PLAYER_VIDEO&&!r&&t.step_type!==GmCXt.STEP_TYPE_SURVEY&&t.step_type!==GmCXt.STEP_TYPE_ERROR_HANDLER||!r&&t&&-1!==invalidSegmentGuide.indexOf(t.step_id))&&showExitSurveyShowMe(),invalidSegmentGuide=[]),GmCXt.FT.isPlayer&&formatAndSendToParentWindow("mgPlayerJSPreview_action:update_played_slideshow_step",{playedStep:GmCXt.getStepFromPlayerI(GmCXt.playerI.currentStepId)}),formatAndSendToParentWindow("mgPlayerJSPreview_action:close_guide",{fromShowme:!0}),formatAndSendToParentWindow("mgPlayerJSPreview_action:click; on:mgPlayerJSPreview_slideshow-close",{}),GmCXt.cleanPlayer()}function stopSlideshow(){closeStep(),GmCXt.reduceSidePanel(),mg$$1(".mgPlayerJSPreview_slideshow-panel").css("display","none"),GmCXt.stopSlideshowPlay()}function enableTab(){switch(hide(".mgPlayerJSPreview_slideshow-next-button"),hide(".mgPlayerJSPreview_slideshow-prev-button"),GmCXt.isWBMicroPlayer()||showSlideShowControls(),GmCXt.playerI.type){case GmCXt.TOUR_PLAYER_SLIDESHOW:enableSlideshow();break;case GmCXt.TOUR_PLAYER_VIDEO:enableVideo();break;case GmCXt.TOUR_PLAYER_GIPHY:enableGiphy()}}function showIframe(){removeVideo(),mg$$1(".mgPlayerJSPreview_iframe-wrapper-div").empty(),show(".mgPlayerJSPreview_iframe-wrapper-div")}function enableGiphy(){showIframe(),disable(".mgPlayerJSPreview_player-audio-controls"),hide(".mgPlayerJSPreview_slideshow-step-img-div"),inactivate(".mgPlayerJSPreview_mode-slideshow"),inactivate(".mgPlayerJSPreview_mode-video"),activate(".mgPlayerJSPreview_mode-giphy"),hide(".mgPlayerJSPreview_step-thumbnail-container"),show(".mgPlayerJSPreview_showMe-play-bar"),hideControl(".mgPlayerJSPreview_showMe-play-mode-autoplay-wrapper"),playModeView("gif")}function enableVideo(){showIframe(),disable(".mgPlayerJSPreview_player-audio-controls"),hide(".mgPlayerJSPreview_slideshow-step-img-div"),inactivate(".mgPlayerJSPreview_mode-slideshow"),inactivate(".mgPlayerJSPreview_mode-giphy"),activate(".mgPlayerJSPreview_mode-video"),hide(".mgPlayerJSPreview_step-thumbnail-container"),show(".mgPlayerJSPreview_showMe-play-bar"),hideControl(".mgPlayerJSPreview_showMe-play-mode-autoplay-wrapper"),playModeView("video")}function enableSlideshow(){removeVideo(),activate(".mgPlayerJSPreview_mode-slideshow"),inactivate(".mgPlayerJSPreview_mode-video"),inactivate(".mgPlayerJSPreview_mode-giphy"),show(".mgPlayerJSPreview_slideshow-next-button"),show(".mgPlayerJSPreview_slideshow-prev-button"),reset(".mgPlayerJSPreview_showMe-play-mode-autoplay"),reset(".mgPlayerJSPreview_player-audio-controls"),showFlex(".mgPlayerJSPreview_step-thumbnail-container"),hide(".mgPlayerJSPreview_showMe-play-bar"),playModeView("slideshow");var e=GmCXt.getStepFromPlayerI(GmCXt.playerI.currentStepId);void 0!==e&&(e.step_type===GmCXt.STEP_TYPE_VIDEO?(show(".mgPlayerJSPreview_iframe-wrapper-div"),hide(".mgPlayerJSPreview_slideshow-step-img-div"),disable(".mgPlayerJSPreview_player-audio-controls"),inactivate(".mgPlayerJSPreview_mode-video"),activate(".mgPlayerJSPreview_mode-slideshow"),inactivate(".mgPlayerJSPreview_mode-giphy"),mg$$1(".mgPlayerJSPreview_iframe-wrapper-div").css({height:"98%"})):(hide(".mgPlayerJSPreview_iframe-wrapper-div"),show(".mgPlayerJSPreview_slideshow-step-img-div"),showIn(".mgPlayerJSPreview_player-audio-controls"))),mg$$1(".mgPlayerJSPreview_slideshow-step-img").attr("src","").attr("alt","")}function playVideoStep(){var t,e,r;GmCXt.stopAudio(),GmCXt.playerI.type=GmCXt.TOUR_PLAYER_VIDEO,(e=GmCXt.isWBMicroPlayer()?{video:GmCXt.playerI.tour.video_url}:GmCXt.playerI.tour.media_files[0])&&(r="",t=!1,e.video&&"0"!==e.video&&(t=!0,r=e.video),e=r+GmCXt.getCdnSign(),r=GmCXt.getUrlWithLang(r),enableTab(),GmCXt.checkAssetUrl(r,e,function(e){e=getVideoHTML(r=e?e:r,t),mg$$1(".mgPlayerJSPreview_iframe-wrapper-div").html(e),GmCXt.playerI.videoPlayed||(GmCXt.playerI.videoPlayed=!0),e=document.getElementById("video-container");GmCXt.isVideoPlayedOnShowMe=!0,GmCXt.isVideoEndedOnShowme=!1,e.onended=function(){GmCXt.isVideoEndedOnShowme=!0}}))}function playGuideGiphy(){GmCXt.stopAudio(),GmCXt.playerI.type=GmCXt.TOUR_PLAYER_GIPHY,enableTab();var e,t;GmCXt.playerI.tour.media_files[0]&&(e=(t=GmCXt.playerI.tour.media_files[0].gify)+GmCXt.getCdnSign(),t=GmCXt.getUrlWithLang(t),GmCXt.checkAssetUrl(t,e,function(e){e&&(t=e),GmCXt.onPrem()||(t+='&d="'+Date.now()+'"');e="<img class='gif-item "+getCustomImgName()+"' src='"+t+"' alt='"+GmCXt.playerI.tour.tour_title+"' />";mg$$1(".mgPlayerJSPreview_iframe-wrapper-div").empty().html(e),GmCXt.playerI.giphyPlayed||(GmCXt.playerI.giphyPlayed=!0),GmCXt.isGiphyPlayedOnShowme=!0}))}function activeSlideshowThumbnail(){mg$$1(".slideshow-thumbnail").removeClass("mgPlayerJSPreview_active-thumbnail"),mg$$1(".slideshow-thumbnail.img-thumbnail-"+GmCXt.playerI.currentStepId).addClass("mgPlayerJSPreview_active-thumbnail")}function playNextStep(){stepPlay("next")}function playLiveStep(){formatAndSendToParentWindow("mgPlayerJSPreview_action:play_tour",{})}function playPreviousStep(){stepPlay("previous")}function isCurrStepShowMe(){var e=GmCXt.getCurrentStep(GmCXt.playerI.currentStepId);return!0!==e.step_settings.displayPreview||!!(GmCXt.playerI.linkGuidePlayMode&&"Show Me"===GmCXt.playerI.linkGuidePlayMode&&GmCXt.playerI.linkedGuides&&GmCXt.playerI.linkedGuides.includes(e.tour_id))}function isValidThumbnailStep(e){return e&&e.step_type!==GmCXt.STEP_TYPE_SURVEY&&e.step_type!==GmCXt.STEP_TYPE_TRANSPORT&&e.step_type!==GmCXt.STEP_TYPE_ERROR_HANDLER}function stepPlay(t){var e=null,r=GmCXt.playerI.tour.steps,i=0,a=findThumbIndex()+1;if(!0===showMe.ready&&GmCXt.playerI){if("previous"===t){var o=GmCXt.getPreviousStepsList(parseInt(GmCXt.playerI.currentStepId));if(o&&1<o.length){for(var n=0;n<o.length;n++)if(mg$$1("#mgPlayerJSPreview_slideshow-thumb-"+o[n])&&mg$$1("#mgPlayerJSPreview_slideshow-thumb-"+o[n]).length){e=o[n];break}}else e=GmCXt.getPreviousStepId(parseInt(GmCXt.playerI.currentStepId),"slideshow")}else e=GmCXt.getTail(GmCXt.playerI.currentStepId,GmCXt.playerI.playStructure),formatAndSendToParentWindow("mgPlayerJSPreview_action:mark_auto_tour_donotshow",{tour:GmCXt.playerI.tour});if(e){showMe.ready=!1,closeStep(),GmCXt.playerI.currentStepId=e;var s=GmCXt.getStepFromPlayerI(e);if(GmCXt.isAutomationStep(s)||void 0===s.step_type)showMe.ready=!0,stepPlay(t);else if(isCurrStepShowMe()||"live"!==GmCXt.playerI.mode)if((s=GmCXt.getStepFromPlayerI(e)).step_type===GmCXt.STEP_TYPE_SURVEY||s.step_type===GmCXt.STEP_TYPE_ERROR_HANDLER)showMe.ready=!0,GmCXt.isLastStep(s.step_id,GmCXt.playerI.playStructure)?setPrevNextButtons(s):stepPlay(t);else{if(s.step_type===GmCXt.STEP_TYPE_GUIDE?(showMe.ready=!0,l={tour_id:s.step_settings.tour_id},mg$$1("#mgPlayerJSPreview_spinner").addClass("show"),disable(".mgPlayerJSPreview_slideshow-prev-button"),disable(".mgPlayerJSPreview_control-thumbnail-prev"),disable(".mgPlayerJSPreview_slideshow-next-button"),disable(".mgPlayerJSPreview_control-thumbnail-next"),GmCXt.checkIfInvalidSegment(l).then(function(e){e?(invalidSegmentGuide=invalidSegmentGuide.splice(invalidSegmentGuide.indexOf(s.step_id),1),playSlideshowStep()):(removeSlideThum(s.step_id),invalidSegmentGuide.push(s.step_id),GmCXt.isLastStep(s.step_id,GmCXt.playerI.playStructure)?setPrevNextButtons(s):stepPlay(t),mg$$1("#mgPlayerJSPreview_spinner").removeClass("show"))})):playSlideshowStep(),GmCXt.containBranchStep(GmCXt.playerI.tour)){var l=findIndex();"next"===t&&GmCXt.imgThumLength!==parseInt(GmCXt.playerI.tour.step_count)&&r[l]&&isValidThumbnailStep(r[l])&&(a===GmCXt.imgThumLength||0===a&&GmCXt.getPreviousStepId(parseInt(r[l].step_id))===GmCXt.playerI.mergingFromId)&&(createSlideThum(r[l]),GmCXt.imgThumLength+=1)}else if(a>=GmCXt.imgThumLength-4&&"next"===t){for(let e=GmCXt.imgThumLength;e<GmCXt.imgThumLength+4&&e<r.length;e++){var c=r[e];if(isValidThumbnailStep(c)&&(createSlideThum(c),i++),4<=i)break}GmCXt.imgThumLength+=i}activeSlideshowThumbnail(),"previous"===t&&s.step_type!==GmCXt.STEP_TYPE_BRANCH?mg$$1(".mgPlayerJSPreview_thumbnail-preview-wrapper").scrollLeft(mg$$1(".mgPlayerJSPreview_thumbnail-preview-wrapper").scrollLeft()-mg$$1(".mgPlayerJSPreview_thumbnail-preview").outerWidth(!0)):"next"===t&&mg$$1(".mgPlayerJSPreview_thumbnail-preview-wrapper").scrollLeft(mg$$1(".mgPlayerJSPreview_thumbnail-preview-wrapper").scrollLeft()+mg$$1(".mgPlayerJSPreview_thumbnail-preview").outerWidth(!0))}else closeSlideshowActivities(),GmCXt.playerI.type="live",playLiveStep()}}}function playSlideshowStep(){GmCXt.playerI.type=GmCXt.TOUR_PLAYER_SLIDESHOW,enableTab(),mg$$1("#mgPlayerJSPreview_tooltipPopup").hide();var e=GmCXt.playerI.tour.steps;function r(e,t){GmCXt.isEmpty(e)&&(removeSlideThum(t),invalidSegmentGuide.push(i.step_id)),((t=e).length?(GmCXt.branchStepExistInPS()&&(e="#mgPlayerJSPreview_slideshow-thumb-"+GmCXt.playerI.currentStepId,mg$$1(e).nextAll(".slideshow-thumbnail-img").remove(),removeSlideThum(GmCXt.playerI.currentStepId)),GmCXt.concatLinkGuideSteps(t),GmCXt.playerI.currentStepId=GmCXt.playerI.linkGuideFS,GmCXt.playerI.tour.step_count,GmCXt.playerI.tour.steps,GmCXt.containBranchStep(GmCXt.playerI.tour)&&(GmCXt.playerI.tour.tour_settings.play_structure=GmCXt.playerI.playStructure),addSlidePlayerThumbnail(void 0,GmCXt.branchStepExist(GmCXt.playerI.tour)?GmCXt.getStepSortedByPS(GmCXt.playerI.playStructure,GmCXt.playerI.currentStepId):GmCXt.playerI.tour.steps),activeSlideshowThumbnail(),playSlideStep):(removeSlideThum(GmCXt.playerI.currentStepId),showMe.ready=!0,playNextStep))(),mg$$1(".mgPlayerJSPreview_thumbnail-preview-wrapper").scrollLeft(mg$$1(".mgPlayerJSPreview_thumbnail-preview-wrapper").scrollLeft()+mg$$1(".mgPlayerJSPreview_thumbnail-preview").outerWidth(!0))}var i=GmCXt.getStepFromPlayerI(GmCXt.playerI.currentStepId);parseInt(i.step_order)===e.length&&(GmCXt.isLastStepPlayedOnShowme=!0),"guide"===i.step_type?(e={tour_id:i.step_settings.tour_id},GmCXt.apiPlayer&&(e.forceJSONApi=!0),GmCXt.getSteps(e).then(function(t){t?GmCXt.checkGuidesBasedOnSegment([t],function(e){GmCXt.isEmpty(e)?t.steps=[]:(t.steps=GmCXt.filterOutAutomationSteps(t.steps),GmCXt.updatePlayStructureLinkGuide(t)),r(t.steps,i.step_id)}):r([],i.step_id)})):playSlideStep()}function playSlideVideo(r){var i=r.step_video_url+GmCXt.getCdnSign();GmCXt.checkAssetUrl(i,i,function(e){var e=getVideoHTML(i=e?e:i,!0),t=(mg$$1(".mgPlayerJSPreview_iframe-wrapper-div").html(e),document.getElementById("video-container"));t.addEventListener("error",function(e){GmCXt.toastMsg(GmCXt.label.unprocessedVideo).show(),t.controls=!1,t.removeEventListener("error",null,!0)},!0),t.onended=function(){GmCXt.isLastStep(r.step_id,GmCXt.playerI.playStructure)?closeSlideshow():GmCXt.timeout(function(){showMe.autoPlayNextStep&&playNextStep()},2e3)}})}function playSlideBranch(e){mg$$1(".mgPlayerJSPreview_slideshow-thumb-"+e.step_id).nextAll(".slideshow-thumbnail-img").remove(),mg$$1("#mgPlayerJSPreview_spinner").removeClass("show"),hideControl(".mgPlayerJSPreview_slideshow-next-button"),showControl(".mgPlayerJSPreview_slideshow-branch-content");var t="",r=e.step_settings.branch,i=getNode(GmCXt.playerI.playStructure,e.step_id);mg$$1(".mgPlayerJSPreview_slideshow-branch-heading-label").html(e.step_title);for(var a=0;a<r.length;a++)var o=r[a].branchName,t=t+"<div class='mgPlayerJSPreview_slideshow-branch-btn mgPlayerJSPreview_btn-default' tail="+i.branch[a].tail+"><div class='mgPlayerJSPreview_slideshow-branch-icon'></div><label class='mgPlayerJSPreview_slideshow-branch-label mgPlayerJSPreview_line-clamp mgPlayerJSPreview_line-clamp-1'>"+o+"</label></div>";mg$$1(".mgPlayerJSPreview_slideshow-button-container").append(t),r.length<=1?mg$$1(".mgPlayerJSPreview_slideshow-button-container").addClass("mgPlayerJSPreview_text-align-center"):mg$$1(".mgPlayerJSPreview_slideshow-button-container").removeClass("mgPlayerJSPreview_text-align-center"),disable(".mgPlayerJSPreview_control-thumbnail-next"),mg$$1(".mgPlayerJSPreview_slideshow-branch-icon").html(GmCXt.svgs.branch_slideshow),addBranchButtonsListener(),Gm.slideState.set({step:e,isImageUpdated:!1})}function playSlideImage(e){mg$$1("#mgPlayerJSPreview_spinner").addClass("show"),mg$$1(".mgPlayerJSPreview_slideshow-step-img").off("load").on("load",function(){mg$$1("#mgPlayerJSPreview_spinner").removeClass("show")});var t=void 0,t=getImgURL(e,!1,t=e.step_type===GmCXt.STEP_TYPE_INLINE?GmCXt.STEP_TYPE_INLINE:t);mg$$1(".mgPlayerJSPreview_slideshow-step-img").addClass(getCustomImgName()),mg$$1(".mgPlayerJSPreview_slideshow-step-img").attr("alt",GmCXt.concatHTMLStringWithSpace(e.step_title)),Gm.slideState.set({step:e,isImageUpdated:!0,slideImgURL:t})}function setPrevNextButtons(e){reset(".mgPlayerJSPreview_slideshow-prev-button"),reset(".mgPlayerJSPreview_slideshow-next-button"),reset(".mgPlayerJSPreview_control-thumbnail-prev"),reset(".mgPlayerJSPreview_control-thumbnail-next"),e.step_type===GmCXt.STEP_TYPE_BRANCH&&disable(".mgPlayerJSPreview_control-thumbnail-next");var t=GmCXt.getPreviousStepId(parseInt(GmCXt.playerI.currentStepId)),t=GmCXt.getStepFromPlayerI(t),t=((GmCXt.isFirstNonAutomationStep()||t&&(t.step_type===GmCXt.STEP_TYPE_SURVEY||t.step_type===GmCXt.STEP_TYPE_ERROR_HANDLER)&&GmCXt.isFirstNonAutomationStep(t.step_id))&&(disable(".mgPlayerJSPreview_slideshow-prev-button"),disable(".mgPlayerJSPreview_control-thumbnail-prev")),GmCXt.getTail(e.step_id,GmCXt.playerI.playStructure)),t=GmCXt.getStepFromPlayerI(t);(GmCXt.isLastStep(e.step_id,GmCXt.playerI.playStructure)||t&&t.step_type===GmCXt.STEP_TYPE_SURVEY&&t.step_type===GmCXt.STEP_TYPE_ERROR_HANDLER&&GmCXt.isLastStep(t.step_id,GmCXt.playerI.playStructure))&&(disable(".mgPlayerJSPreview_slideshow-next-button"),disable(".mgPlayerJSPreview_control-thumbnail-next"),GmCXt.isFirstNonAutomationStep())&&(disable(".mgPlayerJSPreview_slideshow-prev-button"),disable(".mgPlayerJSPreview_control-thumbnail-prev"))}function playStep(e){GmCXt.timeout(function(){!0===showMe.autoPlayNextStep&&GmCXt.playerI.currentStepId!==e&&playNextStep()},5e3)}function playAudioAndPlayNext(i,e){GmCXt.storage().get(["stepAudioRunningStatus"]).then(function(e){GmCXt.audioObject&&GmCXt.audioObject.pause();var t=GmCXt.getTail(GmCXt.playerI.currentStepId,GmCXt.playerI.playStructure),r="";GmCXt.isDefined(i.step_audio)&&GmCXt.getAudioPreference(e.stepAudioRunningStatus)?(e={audioTrack:i.step_audio,step:i},(r=e.audioTrack)&&-1===r.indexOf("?st=")&&(r+=GmCXt.getCdnSign()),GmCXt.checkAssetUrl(r,r,function(e){e&&(r=e),GmCXt.audioObject=new Audio(r),GmCXt.audioObject.onended=function(){GmCXt.isLastStep(i.step_id,GmCXt.playerI.playStructure)||playStep(t)},playAudioObject(),GmCXt.stepAudioRunningStatus=!0,showControl(".mgPlayerJSPreview_btn-audio-unmute"),hideControl(".mgPlayerJSPreview_btn-audio-mute"),mg$$1(".mgPlayerJSPreview_player-audio-controls").addClass("playing-audio")})):(playStep(t),GmCXt.stepAudioRunningStatus=!1,hideControl(".mgPlayerJSPreview_btn-audio-unmute"),showControl(".mgPlayerJSPreview_btn-audio-mute"),mg$$1(".mgPlayerJSPreview_player-audio-controls").removeClass("playing-audio"))})}function trackSlideshowEvents(e){GmCXt.playerI&&GmCXt.playerI.tour.tour_settings.segment_groups&&GmCXt.getTourSegmentDetail(GmCXt.playerI.tour),GmCXt.playerI&&GmCXt.playerI.taskObj&&GmCXt.playerI.taskObj.taskId}function playSlideStep(){hideControl(".mgPlayerJSPreview_slideshow-branch-content"),mg$$1(".mgPlayerJSPreview_slideshow-button-container").empty(),enableTab();var e=GmCXt.getStepFromPlayerI(GmCXt.playerI.currentStepId),t=GmCXt.getTail(GmCXt.playerI.currentStepId,GmCXt.playerI.playStructure);if(void 0!==e){var r=e.step_type;if(r===GmCXt.STEP_TYPE_VIDEO)playSlideVideo(e);else if(r===GmCXt.STEP_TYPE_BRANCH||GmCXt.isTrue(e.step_settings.inlineBranch))playSlideBranch(e);else{if(r===GmCXt.STEP_TYPE_SURVEY||r===GmCXt.STEP_TYPE_ERROR_HANDLER)return void(t&&(GmCXt.playerI.currentStepId=t,formatAndSendToParentWindow("mgPlayerJSPreview_action:update_player_instance"),playSlideStep()));playSlideImage(e)}mg$$1(".mgPlayerJSPreview_slideshow-step-title").text(e.step_title),e.step_description=GmCXt.updateOrgAndAddSignature(e.step_description),mg$$1(".mgPlayerJSPreview_slideshow-step-desc").html(e.step_description),activeSlideshowThumbnail(),r!==GmCXt.STEP_TYPE_VIDEO&&playAudioAndPlayNext(e,GmCXt.playerI),GmCXt.trackStepEvent(e,""),setPrevNextButtons(e),GmCXt.playerI.lastStepStatus="success",showMe.ready=!0}}function getImgURL(e,t,r){if(r===GmCXt.STEP_TYPE_BRANCH)return GmCXt.conf.staticContentPath+"default_branch.png";var i,a,o,n="";switch(r){case GmCXt.STEP_TYPE_VIDEO:i=e.image_url;break;case GmCXt.STEP_TYPE_INLINE:i=e.thumbnail_url;break;default:e.screen_url?i=e.screen_url:e.step_screen_temp&&(n=e.step_screen_temp)}return n||(r="",1<(o=(a=i.substring(i.lastIndexOf("/")+1)).split(".")).length&&(r=o[1].split("?")),n=t&&-1===a.indexOf("default_icon")?(t=o[0]+"."+r[0],i.replace(a,t)):(t=o[0]+"."+r[0],i.replace(a,t)),n+=GmCXt.getCdnSign()),n}function slideshowAudioIconClickEvent(e){GmCXt.stopAudio();var t=GmCXt.getStepFromPlayerI(GmCXt.playerI.currentStepId);GmCXt.audioObject=new Audio(t.step_audio+GmCXt.getCdnSign()),(mg$$1(".mgPlayerJSPreview_player-audio-controls").hasClass("playing-audio")?(GmCXt.audioObject.pause(),mg$$1(".mgPlayerJSPreview_player-audio-controls").removeClass("playing-audio"),GmCXt.storage().set({stepAudioRunningStatus:!1}),GmCXt.stepAudioRunningStatus=!1,hideControl(".mgPlayerJSPreview_btn-audio-unmute"),showControl):(playAudioObject(),mg$$1(".mgPlayerJSPreview_player-audio-controls").addClass("playing-audio"),GmCXt.storage().set({stepAudioRunningStatus:!0}),GmCXt.stepAudioRunningStatus=!0,showControl(".mgPlayerJSPreview_btn-audio-unmute"),hideControl))(".mgPlayerJSPreview_btn-audio-mute")}function closeStep(){GmCXt.stopAudio(),removeVideo()}function playAudio(){return GmCXt.getGlobalAudioPrference()||GmCXt.FT.audio?"":"muted"}function setShowMeOptions(){showMe.settings.showMeSetting&&!GmCXt.containBranchStep(GmCXt.playerI.tour)?(showInlineFlex(".mgPlayerJSPreview_mode-video"),showMe.settings.giphy||hide(".mgPlayerJSPreview_mode-giphy"),showMe.settings.video||hide(".mgPlayerJSPreview_mode-video")):(hide(".mgPlayerJSPreview_mode-giphy"),hide(".mgPlayerJSPreview_mode-video"))}function playAudioObject(){var e=GmCXt.audioObject.play();void 0!==e&&e.then(function(){}).catch(function(){})}function addBranchButtonsListener(){mg$$1(".mgPlayerJSPreview_slideshow-branch-btn").on("click",function(e){var t,r=e.currentTarget.getAttribute("tail");GmCXt.convertType(r)&&(GmCXt.playerI.currentStepId=r,GmCXt.playerI.tour.steps,t=GmCXt.getStepFromPlayerI(GmCXt.playerI.currentStepId),GmCXt.isLastStep(t.step_id,GmCXt.playerI.playStructure)&&t.step_type===GmCXt.STEP_TYPE_SURVEY?e.preventDefault():(mg$$1(".mgPlayerJSPreview_slideshow-button-container").empty(),hideControl(".mgPlayerJSPreview_slideshow-branch-content"),mg$$1(".mgPlayerJSPreview_slideshow-branch-btn").off("click"),showMe.ready=!1,closeStep(),t.step_type!==GmCXt.STEP_TYPE_GUIDE&&(findIndex(),addSlidePlayerThumbnail(r),mg$$1(".mgPlayerJSPreview_thumbnail-preview-wrapper").scrollLeft(mg$$1(".mgPlayerJSPreview_thumbnail-preview-wrapper").scrollLeft()+mg$$1(".mgPlayerJSPreview_thumbnail-preview").outerWidth(!0))),("live"===GmCXt.playerI.mode?playLiveStep:playSlideshowStep)()))})}function getNode(e,t){for(var r=0;r<e.length;r++)if(e[r].id===t)return e[r]}function createSlideThum(e){var t="#mgPlayerJSPreview_slideshow-thumb-"+e.step_id;e.step_type===GmCXt.STEP_TYPE_SURVEY||0!==mg$$1(t).length||e.step_type===GmCXt.STEP_TYPE_ERROR_HANDLER||mg$$1("#mgPlayerJSPreview_slideshow-thumb-"+e.step_id)&&mg$$1("#mgPlayerJSPreview_slideshow-thumb-"+e.step_id).length||(t=getImgURL(e,e.is_screen_url_processed,e.step_type),e="<button id='mgPlayerJSPreview_slideshow-thumb-"+e.step_id+"' class='mgPlayerJSPreview_thumbnail-preview mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_cursor-pointer slideshow-thumbnail-img mgPlayerJSPreview_position-relative mgPlayerJSPreview_slideshow-thumb-"+e.step_id+" mgPlayerJSPreview_lbl-btn' stepId='"+e.step_id+"'><img class='"+getCustomImgName()+" slideshow-thumbnail img-thumbnail-"+e.step_id+"' src="+t+" err-src='"+GmCXt.conf.staticContentPath+"technology.jpg'></button>",mg$$1(".mgPlayerJSPreview_thumbnail-preview-wrapper").append(e))}function removeSlideThum(e){mg$$1(e="#mgPlayerJSPreview_slideshow-thumb-"+e).remove()}function createThumbnail(e,t,r){void 0===e&&mg$$1(".mgPlayerJSPreview_thumbnail-preview-wrapper").empty();e="<div class='mgPlayerJSPreview_step-count-wrapper'><div class='mgPlayerJSPreview_step-count'>Step "+(findIndex()+1)+" of "+parseInt(GmCXt.playerI.tour.step_count)+"</div></div>";mg$$1(".mgPlayerJSPreview_thumbnail-preview-wrapper").append(e);for(var i=0;i<t;i++)r[i]&&-1===invalidSegmentGuide.indexOf(r[i].step_id)&&createSlideThum(r[i]),(r[i].step_type===GmCXt.STEP_TYPE_SURVEY||r[i].step_type===GmCXt.STEP_TYPE_TRANSPORT||r[i].step_type===GmCXt.STEP_TYPE_ERROR_HANDLER)&&t<r.length&&(t+=1)}function findIndex(){var r=-1;return GmCXt.playerI.tour.steps.forEach(function(e,t){e.step_id===GmCXt.playerI.currentStepId&&(r=t)}),r}function findThumbIndex(){for(var e=-1,t=mg$$1(".mgPlayerJSPreview_thumbnail-preview"),r=0;r<t.length;r++)t[r].id==="mgPlayerJSPreview_slideshow-thumb-"+GmCXt.playerI.currentStepId&&(e=r);return e}function linkedGuidePSCheck(e){if(e.length&&1<e.filter(function(e){return null===e.tail}).length)return!0;return!1}function addVideoPanelEvents(e,t,r){var i,a,o=GmCXt.getStepSettings().popupDesign,n=!1;o&&("default"===o.type?(mg$$1("#mgPlayerJSPreview_play_step_prev").removeClass("popup-classic-design-navigation-prev"),mg$$1("#mgPlayerJSPreview_play_step_prev").addClass("mgPlayerJSPreview_play-step-prev"),mg$$1("#mgPlayerJSPreview_play_step_next").removeClass("mgPlayerJSPreview_popup-classic-navigation-next"),mg$$1("#mgPlayerJSPreview_play_step_next").addClass("mgPlayerJSPreview_play-step-next")):"classic"===o.type&&(mg$$1("#mgPlayerJSPreview_play_step_prev").removeClass("mgPlayerJSPreview_play-step-prev"),mg$$1("#mgPlayerJSPreview_play_step_prev").addClass("popup-classic-design-navigation-prev"),mg$$1("#mgPlayerJSPreview_play_step_next").removeClass("mgPlayerJSPreview_play-step-next"),mg$$1("#mgPlayerJSPreview_play_step_next").addClass("mgPlayerJSPreview_popup-classic-navigation-next"))),mg$$1("#mgPlayerJSPreview_play_step_prev").css({"background-color":o.current.prevBtnBackground,color:o.current.prevBtnColor,"border-color":o.current.prevBtnColor}),mg$$1("#mgPlayerJSPreview_play_step_prev svg path").css({fill:o.current.prevBtnColor}),mg$$1("#mgPlayerJSPreview_play_step_next").css({"background-color":o.current.nextBtnBackground,color:o.current.nextBtnColor,"border-color":o.current.nextBtnColor}),mg$$1("#mgPlayerJSPreview_play_step_next svg path").css({fill:o.current.nextBtnColor}),mg$$1(".mgPlayerJSPreview_close-button-video").off("click").on("click",videoStepCloseEvent),mg$$1("#mgPlayerJSPreview_play_step_prev").hide(),t?((o=document.getElementById("mgPlayerJSPreview_step-video-container")).onpause=function(){mg$$1(".mgPlayerJSPreview_video-iframe-overlay").html(GmCXt.svgs.icon_play_step)},o.onplay=function(){mg$$1(".mgPlayerJSPreview_video-iframe-overlay").html(GmCXt.svgs.icon_pause_step)},o.onended=function(){GmCXt.isLastStep(e.step_id,GmCXt.playerI.playStructure)&&formatAndSendToParentWindow("mgPlayerJSPreview_action:close_guide")},i=mg$$1("video#mgPlayerJSPreview_step-video-container"),e.step_settings.showFullScreen&&(mg$$1(".mgPlayerJSPreview_video-panel").css({height:"100%",width:"100%","justify-content":"center"}),mg$$1(".mgPlayerJSPreview_video-panel-iframe-wrapper").css({height:"100%",width:"100%","margin-left":"0"})),i.bind("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(e){document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen?i.css({opacity:"1","border-width":"0px"}):i.css({opacity:"","border-width":"1px"})})):(a={data:{audioTrack:e.step_audio,step:e,playerInstance:GmCXt.playerI}},GmCXt.playerI.playAudio&&GmCXt.FT.audio&&GmCXt.requestHandler.playAudioTrack(a),mg$$1(".mgPlayerJSPreview_max-button-image").off("click").on("click",function(){n?(mg$$1(".mgPlayerJSPreview_video-panel").css({height:"650px",width:"850px"}),mg$$1(".mgPlayerJSPreview_play-video-iframe").css({height:"100%",width:"99%"}),mg$$1(".mgPlayerJSPreview_video-panel-iframe-wrapper").css({height:"70%",width:"92%","margin-left":"4%"}),mg$$1(".mgPlayerJSPreview_play-video-iframe").removeClass("mgPlayerJSPreview_position-center"),mg$$1(".mgPlayerJSPreview_max-button-image span").html(GmCXt.svgs.fullscreen)):(mg$$1(".mgPlayerJSPreview_video-panel").css({height:"100%",width:"100%"}),mg$$1(".mgPlayerJSPreview_play-video-iframe").css({height:"auto",width:"auto"}),mg$$1(".mgPlayerJSPreview_video-panel-iframe-wrapper").css({height:"100%",width:"100%","margin-left":"0"}),mg$$1(".mgPlayerJSPreview_play-video-iframe").addClass("mgPlayerJSPreview_position-center"),mg$$1(".mgPlayerJSPreview_max-button-image span").html(GmCXt.svgs.smallscreen)),n=!n}),mg$$1(".mgPlayerJSPreview_audio-button-image").off("click").on("click",function(){GmCXt.playerI.playAudio?(mg$$1(".mgPlayerJSPreview_audio-button-image span").html(GmCXt.svgs.play_step_audio_off),GmCXt.requestHandler.stopAudioTrack(a)):GmCXt.FT.audio&&(mg$$1(".mgPlayerJSPreview_audio-button-image span").html(GmCXt.svgs.play_step_audio_on),GmCXt.requestHandler.playAudioTrack(a)),GmCXt.playerI.playAudio=!GmCXt.playerI.playAudio})),null!==GmCXt.getPreviousStepId(parseInt(GmCXt.playerI.currentStepId))&&r.prev_btn&&(mg$$1("#mgPlayerJSPreview_play_step_prev").show(),mg$$1("#mgPlayerJSPreview_play_step_prev").off("click").on("click",playPrevVideoStep)),GmCXt.isLastStep(e.step_id,GmCXt.playerI.playStructure)?(mg$$1("#mgPlayerJSPreview_play_step_next").html(GmCXt.label.close),mg$$1("#mgPlayerJSPreview_play_step_next").off("click").on("click",videoStepCloseEvent)):mg$$1("#mgPlayerJSPreview_play_step_next").off("click").on("click",playNextVideoStep)}function addVideoPanelSvgs(){mg$$1(".mgPlayerJSPreview_close-button-video span").html(GmCXt.svgs.popup_close),mg$$1(".mgPlayerJSPreview_video-iframe-overlay").html(GmCXt.svgs.icon_play_step),mg$$1(".mgPlayerJSPreview_max-button-image span").html(GmCXt.svgs.fullscreen),GmCXt.playerI.playAudio?mg$$1(".mgPlayerJSPreview_audio-button-image span").html(GmCXt.svgs.play_step_audio_on):mg$$1(".mgPlayerJSPreview_audio-button-image span").html(GmCXt.svgs.play_step_audio_off)}function playPrevVideoStep(){formatAndSendToParentWindow("mgPlayerJSPreview_action:play_prev_step"),GmCXt.increaseSidePanel()}function playNextVideoStep(){formatAndSendToParentWindow("mgPlayerJSPreview_action:play_next_step"),GmCXt.increaseSidePanel()}function videoStepCloseEvent(e){var t=document.getElementById("mgPlayerJSPreview_step-video-container");t&&t.pause(),formatAndSendToParentWindow("mgPlayerJSPreview_action:close_video_step",{})}function getMPVideoHTML(){return"<video id='mgPlayerJSPreview_media-video' width='99%' height='99%' frameborder='0' disablePictureInPicture controls autoplay > </video> "}function add_css(e){append_styles(e,"svelte-ixls4y",".mgPlayerJSPreview_autoplay-option-checkbox.svelte-ixls4y.svelte-ixls4y{display:flex;align-items:center;gap:10px}.mgPlayerJSPreview_autoplay-custom-checkbox.svelte-ixls4y.svelte-ixls4y{position:relative;display:inline-block;width:60px;height:30px}input[type='checkbox'].svelte-ixls4y.svelte-ixls4y{opacity:0;width:0;height:0}.mgPlayerJSPreview_autoplay-custom-slider.svelte-ixls4y.svelte-ixls4y{position:absolute;cursor:pointer;top:0;left:0;width:100%;height:100%;background-color:#8e8fa6;border-radius:50px;transition:background-color 0.3s ease}.mgPlayerJSPreview_autoplay-custom-slider.svelte-ixls4y.svelte-ixls4y::before{content:'';position:absolute;width:24px;height:24px;border-radius:50%;background-color:#ffffff;transition:transform 0.3s ease;top:50%;left:5px;transform:translateY(-50%)}input[type='checkbox'].svelte-ixls4y:checked+.mgPlayerJSPreview_autoplay-custom-slider.svelte-ixls4y{background-color:#005bf0}input[type='checkbox'].svelte-ixls4y:checked+.mgPlayerJSPreview_autoplay-custom-slider.svelte-ixls4y::before{transform:translateY(-50%) translateX(30px)}.mgPlayerJSPreview_autoplay-text.svelte-ixls4y.svelte-ixls4y{font-size:16px;color:#333;font-weight:400;user-select:none}")}function create_if_block_3(r){let i,e=GmCXt.label.zoomIn+"",a,o,n,s,l;return{c(){i=element("div"),a=text(e),o=space(),(n=element("span")).textContent="X",attr(i,"class","mgPlayerJSPreview_zoom-error"),attr(i,"id","mgPlayerJSPreview_zoom-in-error"),attr(i,"role","alertdialog")},m(e,t){insert(e,i,t),append(i,a),append(i,o),append(i,n),s||(l=listen(n,"click",r[23]),s=!0)},p:noop,d(e){e&&detach(i),s=!1,l()}}}function create_if_block_2(r){let i,e=GmCXt.label.zoomOut+"",a,o,n,s,l;return{c(){i=element("div"),a=text(e),o=space(),(n=element("span")).textContent="X",attr(i,"class","mgPlayerJSPreview_zoom-error"),attr(i,"id","zoom-out-error"),attr(i,"role","alertdialog")},m(e,t){insert(e,i,t),append(i,a),append(i,o),append(i,n),s||(l=listen(n,"click",r[23]),s=!0)},p:noop,d(e){e&&detach(i),s=!1,l()}}}function create_if_block_1(e){let r,i=e[7]?.step_description+"";return{c(){attr(r=element("div"),"class","step-desc"),attr(r,"style",e[12])},m(e,t){insert(e,r,t),r.innerHTML=i},p(e,t){128&t[0]&&i!==(i=e[7]?.step_description+"")&&(r.innerHTML=i),4096&t[0]&&attr(r,"style",e[12])},d(e){e&&detach(r)}}}function create_if_block(e){let r;return{c(){attr(r=element("div"),"id","mgPlayerJSPreview_howto-circle"),set_style(r,"left",e[2]*e[6]+"px"),set_style(r,"top",e[3]*e[6]+"px"),set_style(r,"width",e[5]*e[6]+"px"),set_style(r,"height",e[4]*e[6]+"px"),set_style(r,"position","absolute"),set_style(r,"border","5px solid transparent")},m(e,t){insert(e,r,t)},p(e,t){68&t[0]&&set_style(r,"left",e[2]*e[6]+"px"),72&t[0]&&set_style(r,"top",e[3]*e[6]+"px"),96&t[0]&&set_style(r,"width",e[5]*e[6]+"px"),80&t[0]&&set_style(r,"height",e[4]*e[6]+"px")},d(e){e&&detach(r)}}}function create_fragment(r){let i,F,a,O,o,R,N,n,H,B,U,s,l,c,p,d,V,z,u,g,m,h,_=r[7]?.step_title+"",j,W,f,v,e=GmCXt.label.btnPrev+"",q,y,Z,P,S=(!1===r[10]?GmCXt.label.close:GmCXt.label.next)+"",K,w,b,Y,Q,C,k,T,ee,x,te,A,re,ie,ae,oe,ne,se,le,ce,pe,de,J,G,t=GmCXt.label.focus+"",ue,ge,me,he,_e,$,fe,E,ve,L,ye,Pe,Se,we,be,M=r[0]&&create_if_block_3(r),I=r[1]&&create_if_block_2(r),X=r[7]?.step_description&&""!=r[7].step_description&&create_if_block_1(r),D=r[2]&&r[3]&&r[5]&&r[4]&&create_if_block(r);return{c(){i=element("button"),F=space(),a=element("div"),O=space(),o=element("div"),(R=element("div")).innerHTML='<div class="mgPlayerJSPreview_slideshow-header-left mgPlayerJSPreview_f-left"><h3 class="mgPlayerJSPreview_slideshow-tour-title mgPlayerJSPreview_font-weight-normal mgPlayerJSPreview_no-margin"></h3></div> <div class="mgPlayerJSPreview_slideshow-header-right mgPlayerJSPreview_f-right"><div class="mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_slideshow-close"><button class="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_icon-close-slideshow mgPlayerJSPreview_inline-block-vm" aria-label="slideshow close button"></button></div></div> <div class="mgPlayerJSPreview_clear"></div>',N=space(),n=element("div"),M&&M.c(),H=space(),B=element("div"),U=space(),s=element("div"),l=element("img"),V=space(),I&&I.c(),z=space(),u=element("div"),g=element("div"),m=element("div"),h=element("div"),j=space(),X&&X.c(),W=space(),f=element("div"),v=element("button"),q=text(e),Z=space(),P=element("button"),K=text(S),Y=space(),D&&D.c(),Q=space(),(C=element("div")).innerHTML='<div class="slideshow-spinner-outer"><div class="mgPlayerJSPreview_slideshow-image-spinner"><img alt="slideshow spinner image"/></div></div>',ee=space(),(x=element("button")).innerHTML='<span class="mgPlayerJSPreview_icon-slideshow-prev-button mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_position-center"></span>',te=space(),(A=element("button")).innerHTML='<span class="mgPlayerJSPreview_icon-slideshow-next-button mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_position-center"></span>',re=space(),(ie=element("div")).innerHTML='<div><div class="mgPlayerJSPreview_slideshow-step-num mgPlayerJSPreview_inline-block-vm"></div> <div class="mgPlayerJSPreview_slideshow-step-title mgPlayerJSPreview_inline-block-vm"></div></div> <div class="mgPlayerJSPreview_slideshow-step-desc"></div>',ae=space(),(oe=element("div")).innerHTML=`<div class="mgPlayerJSPreview_slideshow-branch-heading"><label class="mgPlayerJSPreview_slideshow-branch-heading-label mgPlayerJSPreview_font-size-15">Select the <span class="mgPlayerJSPreview_font-weight-600">Branch</span> that you want
					to play further</label></div> <div class="mgPlayerJSPreview_slideshow-branch-heading"><label class="mgPlayerJSPreview_slideshow-branch-step-desc mgPlayerJSPreview_font-size-15"></label></div> <div class="mgPlayerJSPreview_slideshow-button-container"></div>`,ne=space(),(se=element("div")).innerHTML='<div class="mgPlayerJSPreview_popup-content-wrapper"><span class="mgPlayerJSPreview_step-url"></span></div> <div class="mgPlayerJSPreview_popup-btn-wrapper"><div class="mgPlayerJSPreview_redirect-to-link-ok-btn mgPlayerJSPreview_ok-btn mgPlayerJSPreview_btn-default mgPlayerJSPreview_inline-block-vt"></div> <div class="mgPlayerJSPreview_redirect-to-link-cancel-btn mgPlayerJSPreview_cancel-btn mgPlayerJSPreview_btn-default mgPlayerJSPreview_inline-block-vt"></div></div>',le=space(),(ce=element("div")).innerHTML='<button id="mgPlayerJSPreview_btn-thumbnail-prev" class="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_control-thumbnail-prev mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_position-relative" aria-label="slideshow thumbnail previous button"><span class="mgPlayerJSPreview_control-icon-prev mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_position-center"></span></button> <div id="mgPlayerJSPreview_thumbnail-preview-wrapper" class="mgPlayerJSPreview_thumbnail-preview-wrapper mgPlayerJSPreview_width-100"></div> <button id="mgPlayerJSPreview_btn-thumbnail-next" class="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_control-thumbnail-next mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_position-relative" aria-label="slideshow thumbnail next button"><span class="mgPlayerJSPreview_control-icon-next mgPlayerJSPreview_inline-block-vm mgPlayerJSPreview_position-center"></span></button> <div class="mgPlayerJSPreview_showMe-play-ctrl-audio mgPlayerJSPreview_position-relative"><div class="mgPlayerJSPreview_player-audio-controls mgPlayerJSPreview_position-center"><button id="mgPlayerJSPreview_btn-audio-mute" class="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_btn-audio-mute mgPlayerJSPreview_cursor-pointer mgPlayerJSPreview_display-none" aria-label="slideshow audio mute button"></button> <button id="mgPlayerJSPreview_btn-audio-unmute" class="mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_btn-audio-unmute mgPlayerJSPreview_cursor-pointer" aria-label="slideshow audio unmute button"></button></div></div>',pe=space(),de=element("div"),J=element("div"),G=element("button"),ue=text(t),ge=space(),me=element("div"),(he=element("div")).textContent=""+GmCXt.label.focusTooltip,_e=space(),$=element("div"),fe=space(),E=element("div"),ve=space(),L=element("div"),(ye=element("label")).innerHTML='<input class="mgPlayerJSPreview_autoplay-user-pref-scope svelte-ixls4y" type="checkbox" id="mgPlayerJSPreview_autoplay-slider-checkbox" checked=""/> <span class="mgPlayerJSPreview_autoplay-custom-slider svelte-ixls4y"></span>',Pe=space(),(Se=element("span")).textContent=""+GmCXt.label.autoplay,attr(i,"id","mgPlayerJSPreview_slideshow_drag"),attr(i,"aria-label","slideshow drag button"),attr(i,"class","mgPlayerJSPreview_lbl-btn"),attr(a,"class","mgPlayerJSPreview_slideshow_drag_over"),attr(R,"class","mgPlayerJSPreview_slideshow-header"),attr(B,"class","mgPlayerJSPreview_iframe-wrapper-div"),attr(l,"id","mgPlayerJSPreview_slide-img"),attr(l,"class",c=null_to_empty(r[17]?"mgPlayerJSPreview_slideshow-step-img":"mgPlayerJSPreview_slideshow-step-img-inline")+" svelte-ixls4y"),attr(l,"style",p=r[17]?"top: 50%; transform: translate(-50%, -50%);":`z-index: -1; transform-origin: 0px 0px; transform: scale(${r[6]}); min-width: 100%; min-height: 100%; margin-bottom: calc((${r[6]} - 1) * 100%); margin-right: calc((${r[6]} - 1) * 100%);`),src_url_equal(l.src,d=r[16])||attr(l,"src",d),attr(l,"alt",""),attr(h,"class","step-title"),attr(h,"style",r[11]),attr(m,"class","mgPlayerJSPreview_display-flex mgPlayerJSPreview_justify-content-space-between mgPlayerJSPreview_step-data-title"),attr(g,"class","mgPlayerJSPreview_step-data mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y mgPlayerJSPreview_scrollbar-thin"),set_style(g,"height",r[7]?.step_description&&""!=r[7].step_description?"80px":"56px"),attr(v,"id","mgPlayerJSPreview_slideshow-popup-prev-button"),attr(v,"class","mgPlayerJSPreview_action-btn mgPlayerJSPreview_prev"),attr(v,"style",r[15]),attr(v,"aria-label","Prev"),v.hidden=y=!r[9],attr(P,"id","mgPlayerJSPreview_slideshow-popup-next-button"),attr(P,"class","mgPlayerJSPreview_action-btn mgPlayerJSPreview_next"),attr(P,"style",r[14]),attr(f,"class","mgPlayerJSPreview_action-container"),attr(u,"id","mgPlayerJSPreview_tooltipPopup"),attr(u,"class",w="preview-step-popup-container "+r[8]+" svelte-ixls4y"),attr(u,"style",b="position:absolute; "+r[13]),attr(C,"id","mgPlayerJSPreview_spinner"),attr(C,"class","mgPlayerJSPreview_loader-wrapper"),attr(s,"id","mgPlayerJSPreview_image_scroll"),attr(s,"class",k=null_to_empty(`mgPlayerJSPreview_slideshow-step-img-div mgPlayerJSPreview_position-center ${r[17]?"":"mgPlayerJSPreview_overflow mgPlayerJSPreview_scrollbar-thin"} `)+" svelte-ixls4y"),attr(s,"style",T=r[17]?"overflow: unset; transition: unset;":""),attr(x,"id","mgPlayerJSPreview_slideshow-prev-button"),attr(x,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_slideshow-prev-button"),attr(x,"aria-label","slideshow previous step button"),attr(A,"id","mgPlayerJSPreview_slideshow-next-button"),attr(A,"class","mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_slideshow-next-button"),attr(A,"aria-label","slideshow next step button"),attr(ie,"class","mgPlayerJSPreview_slideshow-step-content"),attr(oe,"class","mgPlayerJSPreview_slideshow-branch-content"),attr(n,"class","mgPlayerJSPreview_slideshow-main"),attr(se,"class","mgPlayerJSPreview_popup"),attr(ce,"class","mgPlayerJSPreview_step-thumbnail-container mgPlayerJSPreview_width-100"),attr(he,"class","mgPlayerJSPreview_tooltip-title"),attr(me,"class","mgPlayerJSPreview_title-tooltip-wrapper"),attr(G,"id","mgPlayerJSPreview_slideshow-focus-button"),attr(G,"class","mgPlayerJSPreview_btn-default mgPlayerJSPreview_margin-lr-8 mgPlayerJSPreview_cursor-pointer"),attr($,"id","mgPlayerJSPreview_zoom-in"),attr($,"class","mgPlayerJSPreview_zoom mgPlayerJSPreview_cursor-pointer"),attr(E,"id","mgPlayerJSPreview_zoom-out"),attr(E,"class","mgPlayerJSPreview_zoom mgPlayerJSPreview_cursor-pointer"),attr(ye,"class","mgPlayerJSPreview_autoplay-custom-checkbox svelte-ixls4y"),attr(Se,"class","mgPlayerJSPreview_autoplay-text svelte-ixls4y"),attr(L,"class","mgPlayerJSPreview_autoplay-option-checkbox mgPlayerJSPreview_autoplay-cursor-pointer svelte-ixls4y"),attr(J,"class","mgPlayerJSPreview_controls-inner-container"),attr(de,"class","mgPlayerJSPreview_show-controls"),attr(o,"class","mgPlayerJSPreview_tour-player-panel"),set_style(o,"display","none")},m(e,t){insert(e,i,t),insert(e,F,t),insert(e,a,t),insert(e,O,t),insert(e,o,t),append(o,R),append(o,N),append(o,n),M&&M.m(n,null),append(n,H),append(n,B),append(n,U),append(n,s),append(s,l),append(s,V),I&&I.m(s,null),append(s,z),append(s,u),append(u,g),append(g,m),append(m,h),h.innerHTML=_,append(g,j),X&&X.m(g,null),append(u,W),append(u,f),append(f,v),append(v,q),append(f,Z),append(f,P),append(P,K),append(s,Y),D&&D.m(s,null),append(s,Q),append(s,C),append(n,ee),append(n,x),append(n,te),append(n,A),append(n,re),append(n,ie),append(n,ae),append(n,oe),append(o,ne),append(o,se),append(o,le),append(o,ce),append(o,pe),append(o,de),append(de,J),append(J,G),append(G,ue),append(G,ge),append(G,me),append(me,he),append(J,_e),append(J,$),append(J,fe),append(J,E),append(J,ve),append(J,L),append(L,ye),append(L,Pe),append(L,Se),we||(be=[listen(l,"load",r[18]),listen(P,"click",r[19]),listen(G,"click",r[20]),listen($,"click",r[21]),listen(E,"click",r[22])],we=!0)},p(e,t){e[0]?M?M.p(e,t):((M=create_if_block_3(e)).c(),M.m(n,H)):M&&(M.d(1),M=null),131072&t[0]&&c!==(c=null_to_empty(e[17]?"mgPlayerJSPreview_slideshow-step-img":"mgPlayerJSPreview_slideshow-step-img-inline")+" svelte-ixls4y")&&attr(l,"class",c),131136&t[0]&&p!==(p=e[17]?"top: 50%; transform: translate(-50%, -50%);":`z-index: -1; transform-origin: 0px 0px; transform: scale(${e[6]}); min-width: 100%; min-height: 100%; margin-bottom: calc((${e[6]} - 1) * 100%); margin-right: calc((${e[6]} - 1) * 100%);`)&&attr(l,"style",p),65536&t[0]&&!src_url_equal(l.src,d=e[16])&&attr(l,"src",d),e[1]?I?I.p(e,t):((I=create_if_block_2(e)).c(),I.m(s,z)):I&&(I.d(1),I=null),128&t[0]&&_!==(_=e[7]?.step_title+"")&&(h.innerHTML=_),2048&t[0]&&attr(h,"style",e[11]),e[7]?.step_description&&""!=e[7].step_description?X?X.p(e,t):((X=create_if_block_1(e)).c(),X.m(g,null)):X&&(X.d(1),X=null),128&t[0]&&set_style(g,"height",e[7]?.step_description&&""!=e[7].step_description?"80px":"56px"),32768&t[0]&&attr(v,"style",e[15]),512&t[0]&&y!==(y=!e[9])&&(v.hidden=y),1024&t[0]&&S!==(S=(!1===e[10]?GmCXt.label.close:GmCXt.label.next)+"")&&set_data(K,S),16384&t[0]&&attr(P,"style",e[14]),256&t[0]&&w!==(w="preview-step-popup-container "+e[8]+" svelte-ixls4y")&&attr(u,"class",w),8192&t[0]&&b!==(b="position:absolute; "+e[13])&&attr(u,"style",b),e[2]&&e[3]&&e[5]&&e[4]?D?D.p(e,t):((D=create_if_block(e)).c(),D.m(s,Q)):D&&(D.d(1),D=null),131072&t[0]&&k!==(k=null_to_empty(`mgPlayerJSPreview_slideshow-step-img-div mgPlayerJSPreview_position-center ${e[17]?"":"mgPlayerJSPreview_overflow mgPlayerJSPreview_scrollbar-thin"} `)+" svelte-ixls4y")&&attr(s,"class",k),131072&t[0]&&T!==(T=e[17]?"overflow: unset; transition: unset;":"")&&attr(s,"style",T)},i:noop,o:noop,d(e){e&&(detach(i),detach(F),detach(a),detach(O),detach(o)),M&&M.d(),I&&I.d(),X&&X.d(),D&&D.d(),we=!1,run_all(be)}}}GmCXt.isWB()&&hide(".mgPlayerJSPreview_showMe-play-mode-manual"),window.addEventListener("message",function(e){var t,r=GmCXt.parseMsg(e);if(r&&(r.action&&0===r.action.indexOf("mgPlayerJSPreview_action:")))switch((r=GmCXt.convertMgdata(r)).data&&(r.data.config&&(GmCXt.conf=r.data.config),r.data.user&&!GmCXt.isEmpty(r.data.user)&&GmCXt.updateGlobalUser(r.data.user),showMe.tour=r.data.tour||{},showMe.type=r.data.type||"",showMe.stepIndex=r.data.stepIndex||-1,GmCXt.syncPlayerInst(r.action)&&r.data.playerInstance&&(GmCXt.playerI=r.data.playerInstance),e=GmCXt.getAppSetting(),t=GmCXt.organization)&&e&&(t=t.settings,GmCXt.isDefined(e.playAudio)?GmCXt.FT.audio=e.playAudio:GmCXt.isDefined(t.playAudio)?GmCXt.FT.audio=t.playAudio:GmCXt.FT.audio=!0),r.action){case"mgPlayerJSPreview_action:play_slideshow":mg$$1(window).focus(),showSlideShowPlayer(),GmCXt.stopAudio(),mg$$1("mgPlayerJSPreview_slideshow_drag").focus(),GmCXt.requestHandler.playSlideshow(r);break;case"mgPlayerJSPreview_action:open_pdf":mg$$1(window).focus(),GmCXt.openPdf(r.data);break;case"mgPlayerJSPreview_action:open_pdf_link_step":mg$$1(window).focus(),GmCXt.openPdfLinkStep(r.data.data);break;case"mgPlayerJSPreview_action:open_video_player":mg$$1(window).focus(),GmCXt.openVideoPlayer(r.data);break;case"mgPlayerJSPreview_action:close_media_player":GmCXt.closeMediaPlayer(r.data);break;case"mgPlayerJSPreview_action:play_image_step":GmCXt.playStepInMyShowShell(!1,r.data);break;case"mgPlayerJSPreview_action:play_video_step":GmCXt.playStepInMyShowShell(!0,r.data);break;case"mgPlayerJSPreview_action:play_video":mg$$1(window).focus(),showSlideShowPlayer(),mg$$1(".mgPlayerJSPreview_slideshow-panel").css({display:"block",left:"50%"}),GmCXt.stopAudio(),GmCXt.requestHandler.playVideo(r);break;case"mgPlayerJSPreview_action:play_audio":GmCXt.FT.audio&&GmCXt.requestHandler.playAudioTrack(r);break;case"mgPlayerJSPreview_action:stop_audio":GmCXt.requestHandler.stopAudioTrack(r);break;case"mgPlayerJSPreview_action:reload_images":GmCXt.reloadFailedImages();break;case"mgPlayerJSPreview_action:remove_power_form":r.data&&mg$$1(".mgPlayerJSPreview_form-injector-wrapper_"+r.data.step_id).length&&(mg$$1(".mgPlayerJSPreview_form-injector-wrapper_"+r.data.step_id).remove(),GmCXt.closePowerFormSp());break;case"mgPlayerJSPreview_action:stop_slideshow":stopSlideshow();break;case"mgPlayerJSPreview_action:show_power_form":showSlideShowPlayer(),hideSlideShowPlayer(),openPowerForm(r.data);break;case"mgPlayerJSPreview_action:remove_video_player":mg$$1(".mgPlayerJSPreview_overlay-container").remove(),mg$$1(".mgPlayerJSPreview_video-panel").remove(),GmCXt.openSidePanelNotificaton()}}),window.addEventListener("error",function(e){e&&e.target&&GmCXt.onImageLoadError(mg$$1(e.target))},!0),void 0===GmCXt.requestHandler&&(GmCXt.requestHandler={}),GmCXt.requestHandler.playVideo=function(e){setVideoControls(),document.getElementById("video-container").onended=function(){closeStep(),formatAndSendToParentWindow("mgPlayerJSPreview_action:lms_video_assignment_played",{assignment_id:GmCXt.playerI.assignment_id})}},GmCXt.requestHandler.playSlideshow=function(e){loadSlideshowConstant();var e=e.data;switch(e.playerInstance?GmCXt.playerI=GmCXt.createDeepCopy(e.playerInstance):GmCXt.playerI=GmCXt.createDeepCopy(e),mg$$1("#mgPlayerJSPreview_player-audio-controls-header").addClass("mgPlayerJSPreview_display-none-imp"),e.mode,GmCXt.isWBMicroPlayer()?(hide(".mgPlayerJSPreview_mode-slideshow"),hide(".mgPlayerJSPreview_mode-giphy"),mg$$1(".mgPlayerJSPreview_slideshow-tour-title").addClass("mgPlayerJSPreview_wb-micro-font-family")):(GmCXt.playerI.playStructure&&0!==GmCXt.playerI.playStructure.length||(GmCXt.playerI.playStructure=[],updatePlayStructure(GmCXt.playerI.tour)),hideShowControls(),e=null,(e=GmCXt.playerI.currentStepId?GmCXt.playerI.currentStepId:e)&&GmCXt.getStepFromPlayerI(e).step_type!==GmCXt.STEP_TYPE_GUIDE&&addSlidePlayerThumbnail(e),attachThumbEvent(),mg$$1(".mgPlayerJSPreview_slideshow-tour-title").removeClass("mgPlayerJSPreview_wb-micro-font-family")),GmCXt.containBranchStep(GmCXt.playerI.tour)?showMe.slideshowAutoplay=!1:showMe.slideshowAutoplay=!0,!0===showMe.slideshowAutoplay?showMe.autoPlayNextStep=!0:showMe.autoPlayNextStep=!1,initSlideshowControls(),GmCXt.tourPlayStarted=!1,GmCXt.tourPlayCompleted=!1,GmCXt.playerI.isAutolaunch?GmCXt.setAutoTour(GmCXt.playerI.tour.tour_id):GmCXt.setAutoTour(0),GmCXt.isLastStepPlayedOnShowme=!1,GmCXt.isVideoEndedOnShowme=!1,GmCXt.isGiphyPlayedOnShowme=!1,GmCXt.isVideoPlayedOnShowMe=!1,GmCXt.playerI.type){case GmCXt.TOUR_PLAYER_SLIDESHOW:playSlideshowStep();break;case GmCXt.TOUR_PLAYER_VIDEO:playVideoStep();break;case GmCXt.TOUR_PLAYER_GIPHY:playGuideGiphy()}mg$$1(document).off("keydown").on("keydown",keydownEventListener),activeSlideshowThumbnail(),GmCXt.isWBMicroPlayer()||(GmCXt.getStepFromPlayerI(GmCXt.playerI.currentStepId),e=findIndex()+1,mg$$1(".mgPlayerJSPreview_thumbnail-preview-wrapper").scrollLeft(112*e))},GmCXt.getUrlWithLang=function(e){var t=e.split("."),t="."+t[t.length-1],e=e.replace(t,""),r="";return GmCXt.enableTranslation&&GmCXt.language&&(GmCXt.defaultLang&&(e=e.replace("_"+GmCXt.defaultLang.language,"")),r="_"+GmCXt.language),e+r+t+GmCXt.getCdnSign()},GmCXt.removeDuplicateGuides=function(e){var t=[];return e=e.filter(function(e){if(-1===t.indexOf(e.tour_id))return t.push(e.tour_id),e})},GmCXt.removeDuplicateCategories=function(e){var t=[];return e=e.filter(function(e){if(-1===t.indexOf(e.category_id))return t.push(e.category_id),e})},GmCXt.migrateTour=function(e){var t,r;return e&&((t=e.tour_settings).smartTip&&(t.tour_url=t.smartTip.url,r="matchUrl",t.smartTip.matchDomain&&(r="matchDomain"),t.smartTipTriggerEvent=r,delete t.smartTip),e.tour_settings=t),e},GmCXt.checkDefaultLangForTour=function(e,t){var r=!1;return r=GmCXt.isFalse(t)||-1!==t.indexOf("en-")||e&&e.languages&&e.languages.length&&(e=e.languages[e.languages.length-1])&&e.language===t?!0:r},GmCXt.checkAndCorrectPS=function(e){var t,r;return!GmCXt.containBranchStep(e)&&(!(r=(t=GmCXt.parseJSON(e.tour_settings)).play_structure)||Array.isArray(r)&&(!r.length||r.length<e.steps.length)||linkedGuidePSCheck(r))&&(t.play_structure=GmCXt.buildGuidePlayStructure(e),e.tour_settings=t),e},GmCXt.increaseSidePanel=function(){GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:increase_side_panel_width"})},GmCXt.reduceSidePanel=function(){GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:reduce_side_panel_width"})},GmCXt.makeSlideshowFullScreen=function(e){(GmCXt.playerI&&GmCXt.inArrayString(GmCXt.playerI.type,["slideshow","video","giphy"])||e.isPowerform)&&("full"===e.size?(mg$$1("#mgPlayerJSPreview_slideshow_drag").hide(),mg$$1(".mgPlayerJSPreview_slideshow-panel").css({width:"100%",height:"100%",top:"0px",transform:"translate(0,0)"}),mg$$1(".mgPlayerJSPreview_slideshow-panel").addClass("mgPlayerJSPreview_slideshow-panel-left")):(mg$$1("#mgPlayerJSPreview_slideshow_drag").show(),mg$$1(".mgPlayerJSPreview_slideshow-panel").css({width:"59%",height:"81%",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}),mg$$1(".mgPlayerJSPreview_slideshow-panel").removeClass("mgPlayerJSPreview_slideshow-panel-left")),mg$$1(".mgPlayerJSPreview_slideshow-step-img").css({top:"50%",transform:"translate(-50%,-50%)"}))},GmCXt.addDragSlideshowFunction=function(){var e=document.getElementsByClassName("mgPlayerJSPreview_slideshow-panel")[0],t=document.getElementById("mgPlayerJSPreview_slideshow_drag");GmCXt.attachDragEvents(e,t)},GmCXt.getPopUpHTML=function(e,t,r,i,a){function o(e){return e?String(e).replace(/<[^>]+>/gm,""):""}r="<div class='mgPlayerJSPreview_overlay-container'></div><div class='mgPlayerJSPreview_video-panel' ><div class='mgPlayerJSPreview_video-panel-header'><div class='mgPlayerJSPreview_video-panel-header-labels'><div class='mgPlayerJSPreview_video-panel-header-title'>"+o(r)+"<div class='mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-right mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y'><div class='mgPlayerJSPreview_tooltip-title'>"+o(r)+"</div></div></div><div class='mgPlayerJSPreview_video-panel-header-desc'>"+o(i)+"<div class='mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-right mgPlayerJSPreview_overflow mgPlayerJSPreview_overflow-y'><div class='mgPlayerJSPreview_tooltip-title'>"+o(i)+"</div></div></div></div><div class='mgPlayerJSPreview_video-panel-controls'>";return a||(r+="<div class='mgPlayerJSPreview_video-panel-header-maximize'><button class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_audio-button-image mgPlayerJSPreview_icons-hover-effect mgPlayerJSPreview_inline-block-vm' aria-label='maximize image' ><span></span></button></div><div class='mgPlayerJSPreview_video-panel-header-maximize'><button class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_max-button-image mgPlayerJSPreview_icons-hover-effect mgPlayerJSPreview_inline-block-vm' aria-label='maximize image' ><span></span></button></div>"),r=(r=(r+="<div class='mgPlayerJSPreview_video-panel-header-close'><button class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_close-button-video mgPlayerJSPreview_icons-hover-effect mgPlayerJSPreview_inline-block-vm' aria-label='close video player' ><span></span></button></div></div></div>")+(a?GmCXt.getVideoPopUpIFrameHTML(e,t):GmCXt.getImagePopUpIFrameHTML(e,t)))+(GmCXt.getPopUpFooterHTML()+" </div>")},GmCXt.getVideoPopUpIFrameHTML=function(e){var t="<div class='mgPlayerJSPreview_video-panel-iframe-wrapper'>";return(t+="<div class='mgPlayerJSPreview_video-iframe-overlay'></div>")+("<video id='mgPlayerJSPreview_step-video-container' width='100%' disablePictureInPicture controls autoplay controlsList='nodownload' class='mgPlayerJSPreview_play-video-iframe' >  <source src='"+e+"'  type='video/mp4'  autostart='true'></video> ")+"</div>"},GmCXt.getImagePopUpIFrameHTML=function(e){var t="<div class='mgPlayerJSPreview_video-panel-iframe-wrapper'>";return t+("<img id='mgPlayerJSPreview_step-image-container' width='100%'  class='mgPlayerJSPreview_play-video-iframe'  src='"+e+"'></img> ")+"</div>"},GmCXt.getPopUpFooterHTML=function(){var e,t,r=GmCXt.getStepSettings().popupDesign,i="classic"===r.type?GmCXt.label.btnPrevious:GmCXt.label.btnPrev,a="classic"===r.type?GmCXt.svgs.iconClassicNavPrev:"",r="classic"===r.type?GmCXt.svgs.iconClassicNavNext:"",o=GmCXt.getAppSetting(),o=(GmCXt.organization&&o&&(e=GmCXt.getAppSetting("userLabels").next,t=GmCXt.getAppSetting("userLabels").btnPrev),"<div class='mgPlayerJSPreview_video-step-popup-footer mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-flex-end'><div class='mgPlayerJSPreview_play-video-step-navigation mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-flex-end'>");return GmCXt.playerI&&GmCXt.playerI.tour&&!GmCXt.playerI.tour.tour_settings.step_settings.hidePrevBtn&&(o+="<button class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_play-step-prev mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center' id='mgPlayerJSPreview_play_step_prev' aria-label='"+(t||i)+"' ><div class='mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center'>"+a+"</div>"+(t||i)+"</button>"),o+="<button class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_play-step-next mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center' id='mgPlayerJSPreview_play_step_next' aria-label='"+(e||GmCXt.label.next)+"' >"+(e||GmCXt.label.next)+"<div class='mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center'>"+r+"</div></button></div></div>"},GmCXt.playStepInMyShowShell=function(t,r){var i,a;mg$$1(window).focus(),GmCXt.isEmpty(GmCXt.playerI)||(i=GmCXt.getCurrentStep(GmCXt.playerI.currentStepId),a=t?i.step_video_url+GmCXt.getCdnSign():i.screen_url,GmCXt.checkAssetUrl(a,a,function(e){GmCXt.isEmpty(GmCXt.playerI)||(e&&(a=e),e=GmCXt.getPopUpHTML(a,!0,i.step_title,i.step_description,t),mg$$1("body").append(e),addVideoPanelSvgs(),addVideoPanelEvents(i,t,r),GmCXt.showNotificationHtml(!1,!0),GmCXt.timeout(function(){mg$$1(".mgPlayerJSPreview_close-button-video").focus(),GmCXt.accessibility&&(mg$$1(".mgPlayerJSPreview_play-video-step-navigation").addClass("mgPlayerJSPreview_accessibility-theme"),mg$$1("#mgPlayerJSPreview_play_step_prev").addClass("mgPlayerJSPreview_ass-default-btn"),mg$$1("#mgPlayerJSPreview_play_step_next").addClass("mgPlayerJSPreview_ass-default-btn"))},500))}))},GmCXt.getPDFMediaPlayerIcons=function(){mg$$1(".mgPlayerJSPreview_icon-popout-media-player").html(GmCXt.svgs.external_link_white),mg$$1(".mgPlayerJSPreview_icon-close-media-player").html(GmCXt.svgs.close_media_popup),mg$$1(".mgPlayerJSPreview_icon-print-media-player").html(GmCXt.svgs.print_icon),mg$$1(".mgPlayerJSPreview_icon-min-media-player").html(GmCXt.svgs.min_pdf_icon),mg$$1(".mgPlayerJSPreview_icon-max-media-player").html(GmCXt.svgs.max_pdf_icon),mg$$1(".mgPlayerJSPreview_icon-page-down-media-player").html(GmCXt.svgs.page_down_icon),mg$$1(".mgPlayerJSPreview_icon-page-up-media-player").html(GmCXt.svgs.page_up_icon),mg$$1(".mgPlayerJSPreview_icon-pdf-download").html(GmCXt.svgs.pdf_download_icon)},GmCXt.showSurveyForTutorial=function(e){GmCXt.isPlayer()&&e&&-1!==e.tour_type.indexOf("onboarding_tour")&&e.tour_settings.sentiment&&!GmCXt.isEmpty(e.tour_settings.sentiment.sentimentCode)&&(e={tour:e,guideNotCompleted:!1},GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:close_app_panel",{}),GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:getSurveyScreen",e))},GmCXt.closeMediaPlayer=function(e,t,r){var i=0<mg$$1(".mgPlayerJSPreview_play-from-task-player").length,a=mg$$1(".mgPlayerJSPreview_media-player-panel").html(),a=(mg$$1(".mgPlayerJSPreview_media-player-panel").html(""),mg$$1(".mgPlayerJSPreview_media-player-panel").html(a),GmCXt.isDefined(GmCXt.trackerEnable)&&(GmCXt.trackerUtil=GmCXt.trackerEnable),"showme"),o=null;i&&(mg$$1(".mgPlayerJSPreview_media-player-panel").removeClass("mgPlayerJSPreview_play-from-task-player"),a="task_list",r)&&r.taskId&&(o=r.taskId),mg$$1(".mgPlayerJSPreview_media-player-panel").hide(),mg$$1("#mgPlayerJSPreview_media-iframe").remove(),mg$$1("#mgPlayerJSPreview_media-video").remove(),formatAndSendToParentWindow("mgPlayerJSPreview_action:media_player_on",{mediaPlayerStatus:!1}),formatAndSendToParentWindow("mgPlayerJSPreview_action:show_step_popup"),e&&e.terminate||GmCXt.isEmpty(GmCXt.playerI)||"PDF"!==GmCXt.playerI.linkGuidePlayMode?(GmCXt.showSurveyForTutorial(t),GmCXt.isTutorialLink?(mg$$1(".mgPlayerJSPreview_overlay-tours-popup").show(),mg$$1(".mgPlayerJSPreview_overlay-container").show()):(GmCXt.reduceSidePanel(),mg$$1(".ege-panel").css({width:"500px",right:"0px","max-width":"500px",transition:"0s"})),GmCXt.pdfPlayedOnUploadTut&&GmCXt.trackerV1.trackTutGuide(t,"upload_tutorial_guide_same_tab",a,o)):(showMe.ready=!0,delete GmCXt.playerI.linkGuidePlayMode,playNextStep()),i&&GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:close_app_panel",{}),GmCXt.isTutorialLink=!1},GmCXt.addMediaPlayerEvent=function(){mg$$1("#mgPlayerJSPreview_media-player-close").off("click").on("click",GmCXt.closeMediaPlayer)},GmCXt.hidePdfControls=function(){mg$$1(".mgPlayerJSPreview_options-left").hide(),mg$$1("#mgPlayerJSPreview_pdf-canvas").hide(),mg$$1("#mgPlayerJSPreview_media-player-print").hide(),mg$$1("#mgPlayerJSPreview_media-player-popout").hide(),mg$$1("#mgPlayerJSPreview_icon-pdf-download").hide()},GmCXt.showPdfControls=function(){mg$$1(".mgPlayerJSPreview_options-left").show(),mg$$1("#mgPlayerJSPreview_pdf-canvas").hide(),mg$$1("#mgPlayerJSPreview_media-player-print").show(),mg$$1("#mgPlayerJSPreview_media-player-popout").show(),mg$$1("#mgPlayerJSPreview_icon-pdf-download").show()},GmCXt.openPdfLinkStep=function(t){tempUrl=GmCXt.getUrlWithLang(t),t+=GmCXt.getCdnSign(),GmCXt.checkAssetUrl(tempUrl,t,function(e){e&&(t=e),GmCXt.openPdf(t)})},GmCXt.openPdf=function(i,a,t){GmCXt.trackerEnable=GmCXt.trackerUtil,formatAndSendToParentWindow("mgPlayerJSPreview_action:hide_step_popup"),formatAndSendToParentWindow("mgPlayerJSPreview_action:media_player_on",{mediaPlayerStatus:!0}),GmCXt.increaseSidePanel(),mg$$1(".ege-panel").css({width:"500px",right:"-9550px",transition:"0s"}),mg$$1(".mgPlayerJSPreview_media-player-panel").show(),mg$$1("#mgPlayerJSPreview_media-iframe").remove(),mg$$1("#mgPlayerJSPreview_media-video").remove(),mg$$1("#mgPlayerJSPreview_pdf-container").css({background:"#FFFFFF"}),mg$$1(".mgPlayerJSPreview_pdf-image-spinner").show(),mg$$1(".mgPlayerJSPreview_pdf-image-spinner img").attr("src",GmCXt.loader()),GmCXt.hidePdfControls();let r=1,o=1,n,e=i;function s(e){var t=o,t=e.getViewport({scale:t}),r=document.getElementById("mgPlayerJSPreview_pdf-canvas"),i=r.getContext("2d"),i=(r.height=t.height,r.width=t.width,{canvasContext:i,viewport:t});e.render(i),mg$$1(".mgPlayerJSPreview_pdf-image-spinner").attr("style","display: none;"),GmCXt.showPdfControls(),r.style.display="block",mg$$1(".mgPlayerJSPreview_media-player-page-cnt-text")[0].innerHTML=e.pageNumber;{let e=a;e||GmCXt.playerI&&GmCXt.playerI.tour&&(e=GmCXt.playerI.tour),e&&(t=GmCXt.organization.admin_settings,i=document.getElementById("mgPlayerJSPreview_icon-pdf-download"),r=document.getElementById("mgPlayerJSPreview_media-player-print"),!t||!t.mediafile_creation||e.tour_settings&&e.tour_settings.downloadGuideFiles&&!e.tour_settings.downloadGuideFiles.pdf_file)&&(i.style.display="none",r.style.display="none")}}async function l(){await __webpack_exports__getDocument({url:e}).promise.then(function(e){mg$$1(".mgPlayerJSPreview_media-player-page-cnt-text-total")[0].innerHTML="of "+e._pdfInfo.numPages,mg$$1(".mgPlayerJSPreview_media-player-zoom-text")[0].innerText="100%",e.total_pages=e._pdfInfo.numPages,c(e,1),n=e}).catch(function(e){GmCXt.toastMsg(GmCXt.label.mediaFileNotFound).show(),GmCXt.timeout(function(){GmCXt.closeMediaPlayer()},1e3)})}function c(e,t){parseInt(t)===parseInt(e._pdfInfo.numPages)&&(GmCXt.fullPdfPlayedOnUploadTutGuide=!0);try{e.getPage(t).then(function(e){s(e)})}catch(e){r=1,l()}}l(),document.getElementById("mgPlayerJSPreview_media-player-pd").onclick=function(){r>=n.total_pages||(r++,c(n,r))},document.getElementById("mgPlayerJSPreview_media-player-pu").onclick=function(){r<=1||(r--,c(n,r))},document.getElementById("mgPlayerJSPreview_max-media-player").onclick=function(){o+=.25,mg$$1(".mgPlayerJSPreview_media-player-zoom-text")[0].innerText=100*parseFloat(o)+"%",c(n,r)},document.getElementById("mgPlayerJSPreview_min-media-player").onclick=function(){o<=.25||(o-=.25,mg$$1(".mgPlayerJSPreview_media-player-zoom-text")[0].innerText=100*parseFloat(o)+"%",c(n,r))},document.getElementById("mgPlayerJSPreview_icon-pdf-download").onclick=function(){var e,t,r;e=i,t="myPdf.pdf",window.ActiveXObject?(window.ActiveXObject,document.execCommand&&((r=window.open(e,"_blank")).document.close(),r.document.execCommand("SaveAs",!0,t),r.close())):((r=document.createElement("a")).href=e,r.target="_blank",r.download=t,e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}),r.dispatchEvent(e),(window.URL||window.webkitURL).revokeObjectURL(r.href))},document.getElementById("mgPlayerJSPreview_media-player-print").onclick=function(){printJS(i)},document.getElementById("mgPlayerJSPreview_media-player-popout").onclick=function(){var e=document.createElement("a");e.href=i,e.target="_blank",e.click(),e.remove()},GmCXt.getPDFMediaPlayerIcons(),mg$$1("#mgPlayerJSPreview_media-player-close").off("click").one("click",function(){GmCXt.closeMediaPlayer(void 0,a,t)}),mg$$1(document).keyup(function(e){"Escape"===e.key&&GmCXt.closeMediaPlayer(void 0,a,t)})},GmCXt.openVideoPlayer=function(e){formatAndSendToParentWindow("mgPlayerJSPreview_action:hide_step_popup"),formatAndSendToParentWindow("mgPlayerJSPreview_action:media_player_on",{mediaPlayerStatus:!0}),GmCXt.increaseSidePanel(),mg$$1(".ege-panel").css({width:"500px",right:"-9550px",transition:"0s"}),mg$$1("#mgPlayerJSPreview_pdf-container").removeAttr("style"),mg$$1(".mgPlayerJSPreview_media-player-panel").show(),mg$$1(".mgPlayerJSPreview_icon-close-media-player").html(GmCXt.svgs.close_media_popup),mg$$1("#mgPlayerJSPreview_media-player-close").off("click").on("click",GmCXt.closeMediaPlayer),mg$$1(".mgPlayerJSPreview_pdf-image-spinner").show(),mg$$1(".mgPlayerJSPreview_pdf-image-spinner img").attr("src",GmCXt.loader()),GmCXt.hidePdfControls(),mg$$1("#mgPlayerJSPreview_media-iframe").remove(),mg$$1("#mgPlayerJSPreview_media-video").remove(),new URL(e);var t=getMPVideoHTML();mg$$1("#mgPlayerJSPreview_pdf-container").append(t),mg$$1("#mgPlayerJSPreview_media-video")[0].addEventListener("error",function(){GmCXt.toastMsg(GmCXt.label.mediaFileNotFound).show(),GmCXt.timeout(function(){GmCXt.closeMediaPlayer()},1e3)}),mg$$1("#mgPlayerJSPreview_media-video").attr("src",e),mg$$1("#mgPlayerJSPreview_media-video")[0].load(),GmCXt.timeout(function(){mg$$1(".mgPlayerJSPreview_pdf-image-spinner").hide()},1e3)},GmCXt.closePowerFormSp=function(){mg$$1(".mgPlayerJSPreview_form-injector-wrapper").remove(),stopSlideshow(),mg$$1(".ege-panel").css({width:"500px","max-width":"500px",transition:"width 0s"}),GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:close_app_panel",data:{resetPanel:!0}})};let DEFAULT_SCALE=1,MAX_SCALE_RATIO=4,DEFAULT_MIN_SCALE=1,DEFAULT_MAX_SCALE=2;function instance(e,t,s){let r=0,a,l,c,p,d=DEFAULT_SCALE,i=void 0,o=void 0,n=void 0,u=DEFAULT_MIN_SCALE,g=DEFAULT_MAX_SCALE,m=!1,h=!1,_,f="center",v=!0,y=!0,P=GmCXt.getAppSetting(),S=(P?.popupDesign?.type,P.stepPopupWidth),w=P?.popupDesign?.current,b="",C="",k="",T="",x="",A="",J=!1;function G(){i=void 0,$(),setTimeout(()=>{var e,t,r=_;s(2,a=0),s(3,l=0),s(5,p=0),s(4,c=0),null!=r&&r.hasOwnProperty("step_settings")?(r="string"==typeof r.step_settings?JSON.parse(r.step_settings):r.step_settings).hasOwnProperty("coordinates")?(s(2,a=JSON.parse(r.coordinates).x),s(3,l=JSON.parse(r.coordinates).y)):r.elementBounds&&0<Object.keys(r.elementBounds).length?(s(2,a=r.elementBounds.cx*r.dpr||1),s(3,l=r.elementBounds.cy*r.dpr||1),s(5,p=r.elementBounds.cw*r.dpr||1),s(4,c=r.elementBounds.ch*r.dpr||1)):r.hasOwnProperty("highlightedArea")&&0<r.highlightedArea.length&&(t=document.querySelector("#mgPlayerJSPreview_slide-img"),e=t.clientWidth/r.highlightedArea[0].windowWidth,t=t.clientHeight/r.highlightedArea[0].windowHeight,s(2,a=r.highlightedArea[0].left*e),s(3,l=r.highlightedArea[0].top*t),s(5,p=r.highlightedArea[0].width*e),s(4,c=r.highlightedArea[0].height*t)):(s(2,a=0),s(3,l=0)),$(),E()},500)}function $(){var e=document.querySelector("#mgPlayerJSPreview_image_scroll"),e=(o=e.clientWidth,n=e.clientHeight,document.querySelector("#mgPlayerJSPreview_slide-img")),t=e.clientWidth,e=e.clientHeight,t=o/t,e=n/e;if(u=e<t?e:t,g=(e<t?t:e)*MAX_SCALE_RATIO,s(6,d=u),a&&l)for(i?s(6,d=i):s(6,d=u*DEFAULT_SCALE);o<p*d||n<c*d;)s(6,d-=.2)}function E(){var r;if((P=GmCXt.getAppSetting())?.popupDesign?.type,S=P.stepPopupWidth,w=P?.popupDesign?.current,s(11,b=`color:${w.stepTitleColor}; font-size: ${w.stepTitleFontSize}; font-weight:${w.stepTitleFontWeight}; font-family:${w.stepTitleFontFamily}; `),s(12,C=`color:${w.stepDescColor}; font-size: ${w.stepDesFontSize}px; font-family:${w.stepDesFontFamily}; `),s(13,k=`background-color:${w.bgColor}; width:${S}px;  border:${w.borderWidth}px solid ${w.borderColor}; border-radius: ${w.borderRadius}px`),s(14,T=`background-color:${w.nextBtnBackground}; color:`+w.nextBtnColor),s(15,x=`background-color:${w.prevBtnBackground}; color:`+w.prevBtnColor),o=_,GmCXt.playerI&&(s(10,y=!0),s(9,v=!0),o.step_type===GmCXt.STEP_TYPE_BRANCH&&s(10,y=!1),r=GmCXt.getPreviousStepId(parseInt(GmCXt.playerI.currentStepId)),r=GmCXt.getStepFromPlayerI(r),(GmCXt.isFirstNonAutomationStep()||r&&(r.step_type===GmCXt.STEP_TYPE_SURVEY||r.step_type===GmCXt.STEP_TYPE_ERROR_HANDLER)&&GmCXt.isFirstNonAutomationStep(r.step_id))&&s(9,v=!1),r=GmCXt.getTail(o.step_id,GmCXt.playerI.playStructure),r=GmCXt.getStepFromPlayerI(r),GmCXt.isLastStep(o.step_id,GmCXt.playerI.playStructure)||r&&r.step_type===GmCXt.STEP_TYPE_SURVEY&&r.step_type===GmCXt.STEP_TYPE_ERROR_HANDLER&&GmCXt.isLastStep(r.step_id,GmCXt.playerI.playStructure))&&(s(10,y=!1),GmCXt.isFirstNonAutomationStep())&&s(9,v=!1),"message"==_.step_type||null==a&&null==l){let e,t=document.getElementById("mgPlayerJSPreview_image_scroll");t&&(o={width:t.clientWidth,height:t.clientHeight},r=(e="string"==typeof _.step_settings?JSON.parse(_.step_settings):_.step_settings).hasOwnProperty("step_popup_pos")?e.step_popup_pos:"center",s(8,f="none"),alignImageStepPreview("#mgPlayerJSPreview_tooltipPopup",o,r,!1,e),document.getElementById("mgPlayerJSPreview_tooltipPopup").style.display="block")}else{let e=a*d,t=l*d,r=0,i=0;p&&c?(i=c*d,r=p*d):(o=document.getElementById("mgPlayerJSPreview_howto-circle"))&&(e-=o.clientWidth/2,t-=o.clientHeight/2,i=o.clientHeight,r=o.clientWidth);var o={cx:e,cy:t,cw:r,ch:i},n=document.getElementById("mgPlayerJSPreview_image_scroll");if(n){o={elementBounds:o,dimensions:{width:n.clientWidth,height:n.clientHeight},stepType:_&&_.step_type||"inline",popup:mg$("#mgPlayerJSPreview_tooltipPopup"),doNotApplyArrow:!0,alignment:"bottom-middle"};let t,r,i,e=alignPopup(o),a=({top:t,left:r,alignmentResult:i}=e.start(),e.getAvailablePositions());if(a["bottom-middle"])o.alignment="bottom-middle";else{o.alignment=Object.keys(a).find(e=>!0===a[e]);let e=alignPopup(o);({top:t,left:r,alignmentResult:i}=e.start())}n=document.getElementById("mgPlayerJSPreview_tooltipPopup");n&&r&&0<r&&t&&0<t&&(n.style.left=r+"px",n.style.top=t+"px",s(13,k+=` ;top:${t}px; left:${r}px;`)),document.getElementById("mgPlayerJSPreview_tooltipPopup").style.display="block",document.getElementById("mgPlayerJSPreview_howto-circle")&&(document.getElementById("mgPlayerJSPreview_howto-circle").style.display="block"),s(8,f=o.alignment)}}}return Gm.slideState.subscribe(e=>{e.isImageUpdated?(s(7,_=e.step),_.step_type===GmCXt.STEP_TYPE_IMAGE||_.step_type===GmCXt.STEP_TYPE_MESSAGE?s(17,J=!0):s(17,J=!1),s(16,A=e.slideImgURL)):s(16,A="")}),e.$$.update=()=>{3&e.$$.dirty[0]&&(m||h)&&setTimeout(()=>{s(0,m=!1),s(1,h=!1)},5e3)},[m,h,a,l,c,p,d,_,f,v,y,b,C,k,T,x,A,J,function(){mg$("#mgPlayerJSPreview_spinner").removeClass("show"),_.step_settings.inlineBranch||_.step_type!==GmCXt.STEP_TYPE_INLINE||G()},function(){!1===y&&closeSlideshow()},function(){setTimeout(()=>{var e=document.querySelector("#mgPlayerJSPreview_howto-circle");e&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100);var e,t=document.querySelector("#mgPlayerJSPreview_thumbnail-preview-wrapper");t&&(e=findThumbIndex(),r=190*e,t.scrollTo(r,0))},function(){s(0,m=!1),s(1,h=!1),d+.2>g?s(0,m=!0):(s(6,d+=.2),i=d,E())},function(){s(0,m=!1),d-.2<u?s(1,h=!0):(s(6,d-=.2),i=d,E())},function(){s(1,h=!1),s(0,m=!1)}]}class SlideShow extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{},add_css,[-1,-1])}}let commonUpdate={},pService=(commonUpdate.updateTour=function(t,r,e){let i={tour_id:t.tour_id,category_id:t.category_id};function a(e){GmCXt.inPlayer&&(r&&rootScope.updateTourToStorage(e,!1,r),delete rootScope.toursModifiedTime[t.tour_id],storage.toursModifiedTime.set(rootScope.toursModifiedTime)),GmCXt.FT.creatorApp&&commonUpdate.updateTourInTourList(e)}e?a(e):(e=GmCXt.getLXPLang()?GmCXt.getLXPLang():rootScope.language,GmCXt.checkDefaultLangForTour(t,e)||(i.language=e),api.getTour(i,a,function(){rootScope.toursModifiedTime[t.tour_id]=t,storage.toursModifiedTime.set(rootScope.toursModifiedTime),rootScope.removeTour(i.category_id,t.tour_id,r)},!0,r))},commonUpdate.updateTourInTourList=function(t){let e=get_store_value(Gm.categoryTours);e=e.map(function(e){return e.tour_id===t.tour_id?t:e}),Gm.categoryTours.set(e)},commonUpdate.updateCat=function(i,a){return new Promise(function(t,e){var r=!!GmCXt.inPlayer;rootScope.getCategoryApi(i.category_id,function(e){t(e)},r,a)})},commonUpdate.categoryUpdateCb=function(e){delete rootScope.subCategoryStore["cat_"+e.category_id],delete rootScope.allTourList["cat_"+e.category_id]},{});function checkTourDelete(r,t,i){t=t||rootScope.publishedTours;for(let e=0;e<t.length;e++){var a=t[e],o=!!a&&(t=>r.filter(function(e){return e.tour_id===parseInt(t.tour_id)}))(a);GmCXt.isEmpty(o)&&rootScope.removeTour(a.category_id,a.tour_id,i)}}function checkIfValidTourSegment(e){var t=!1;if(rootScope.guideSegmentation&&e.tour_segment&&e.tour_segment.length){for(var r=[],i=0;i<e.tour_segment.length;i++)for(var a=0;a<e.tour_segment[i].length;a++)r.push(e.tour_segment[i][a]);GmCXt.areUserSegmentsValid(r)&&(t=!0)}else t=!0;return t}function checkTourUpdates(r){for(let t=0;t<r.length;t++){var i=r[t];let e=!!rootScope.allTourList["cat_"+i.category_id]&&rootScope.allTourList["cat_"+i.category_id]["tour_"+i.tour_id];e=e||rootScope.toursModifiedTime[i.tour_id]||!1,checkIfValidTourSegment(i)&&(!e||0<parseInt(i.modification_date)-parseInt(e.modification_date)?commonUpdate.updateTour(i):parseInt(i.tour_order)!==parseInt(e.tour_order)&&(e.tour_order=i.tour_order,commonUpdate.updateTour(i,"",e)))}checkTourDelete(r)}function deleteAllCategories(){for(let e=0;e<rootScope.allCategories.length;e++)rootScope.removeCategory(rootScope.allCategories[e]),rootScope.appList["app:"+appId].categories=[]}function checkCatDelete(r,i,a){GmCXt.log(70,"CHECK CATEGORY DELETE"),i=i||rootScope.allCategories,Object.keys(i).forEach(function(e){let t=i[e];e=r.filter(function(e){return parseInt(e.category_id)===parseInt(t.category_id)});GmCXt.isEmpty(e)&&(GmCXt.log(70,"Category update not found. Delete "+GmCXt.categoryLog(t)),a||(GmCXt.log(70,"REMOVE CAT from GLOBLE"+GmCXt.categoryLog(t)),rootScope.removeCategory(t)),rootScope.updateCategoryInStorgae(t,!0,a))})}function checkCatUpdates$1(t,r){GmCXt.log(70,"CATEGORY UPDATES for CURRENT APP");function i(e){}function a(e){rootScope.updateCategoryInStorgae(e,!1,r),e.has_tour&&(GmCXt.log(70,"FETCH TOURS FOR: "+GmCXt.categoryLog(e)),rootScope.fetchToursForCategory(e.category_id,i,!0))}function o(e){rootScope.updateCategoryInStorgae(e,!1,r)}for(let e=0;e<t.length;e++){var n=t[e],s=rootScope.getCategory(n.category_id);s?0<parseInt(n.modification_date)-parseInt(s.modification_date)?(GmCXt.log(70,"UPDATE: "+GmCXt.categoryLog(s)),commonUpdate.updateCat(n).then(o)):parseInt(n.category_order)!==parseInt(s.category_order)&&(s.category_order=n.category_order,o(s)):(GmCXt.log(70,"ADD: "+GmCXt.categoryLog(s)),commonUpdate.updateCat(n).then(a))}checkCatDelete(t)}function updateApp(e){api.getAppDetails(e.application_id,function(e){var t=GmCXt.createDeepCopy(rootScope.appList["app:"+e.application_id].categories);e.categories=t,rootScope.appList["app:"+e.application_id]=e,storage.appData.set(rootScope.appList)})}function updateNonActiveCategories(r,e,i){function a(t){rootScope.updateCategoryInStorgae(t,!1,i),t.has_tour&&rootScope.fetchToursForCategory(t.category_id,function(e){rootScope.updateToursInCategoryStorage(t.category_id,e,remove,i)},!0,i)}function o(e){rootScope.updateCategoryInStorgae(e,!1,i)}e.forEach(function(e){var t=r["cat_"+e.category_id];t?0<parseInt(e.modification_date)-parseInt(t.modification_date)?commonUpdate.updateCat(e,i).then(o):parseInt(e.category_order)!==parseInt(t.category_order)&&(t.category_order=e.category_order,o(t)):commonUpdate.updateCat(e,i).then(a)}),checkCatDelete(e,r,i)}function updateNonActiveTours(r,e,i){e.forEach(function(e){var t=r.tours["tour_"+e.tour_id];checkIfValidTourSegment(e)&&(!t||0<parseInt(e.modification_date)-parseInt(t.modification_date)?commonUpdate.updateTour(e,i):parseInt(e.tour_order)!==parseInt(t.tour_order)&&(t.tour_order=e.tour_order,commonUpdate.updateTour(e,i,t)))}),checkTourDelete(e,r.tours,i)}function processNonActiveAppData(i){Object.keys(rootScope.appList).forEach(function(e){var t,r,e=rootScope.appList[e];parseInt(e.application_id)!==parseInt(rootScope.activeAppId)&&(t=i.applications[e.application_id],e)&&e.categories&&e.categories.length&&(updateNonActiveCategories((r=rootScope.processAppData(e)).categories,t.categories,e.application_id),updateNonActiveTours(r,t.tours,e.application_id))})}pService.processUpdates=function(i){var e=i.modification_date,t=GmCXt.organization;if(parseInt(e)-parseInt(t.modification_date)&&(GmCXt.log(70,"GET ORG"),api.getOrgJson(function(e){storage.organization.set(e)},!1)),i.applications)if(GmCXt.user&&GmCXt.user.app_access.length!==Object.keys(rootScope.appList).length)rootScope.refreshAllData();else{let r;Object.keys(i.applications).forEach(function(e){var e=i.applications[e],t=rootScope.appList["app:"+e.application_id];t&&(e&&0<parseInt(e.modification_date)-parseInt(t.modification_date)&&updateApp(t),t.application_id===rootScope.activeAppId)&&(r={categories:e.categories,tours:e.tours})}),r.categories?(checkCatUpdates$1(r.categories,r.application_id),r.tours.length&&checkTourUpdates(r.tours)):deleteAllCategories(),processNonActiveAppData(i)}else rootScope.refreshAllData()};let service={};function updateUser(e){var t;e.accesstoken&&(t=GmCXt.user)&&(t.accesstoken=e.accesstoken,t.refreshtoken=e.refreshtoken,GmCXt.isDefined(e.app_access)&&(t.app_access=e.app_access),rootScope.saveUser(t))}function redirectToVideoStepAdd(e){e={tourId:e.tourId,stepId:0,videoUrl:e.videoUrl,type:e.type,order:e.order};Gm.routeAction.set({action:"initAddVideoStep",data:e}),rootScope.setCurrentPage("addVideoStep")}function refreshPlayer(e){rootScope.maintenance=e.maintenance_mode,storage.refreshTime.set(e.last_updated_time),storage.lastTimeStampSync.set(GmCXt.getCurrentTimeInSec()),e.maintenance_mode||pService.processUpdates(e),(GmCXt.inPlayer||GmCXt.onPrem())&&(e={action:"mgPlayerJSPreview_action:update_player_sync_time",data:{refreshTime:e.last_updated_time,lastTimeStampSync:GmCXt.getCurrentTimeInSec()}},GmCXt.isClientJs()?GmCXt.sendToParentWindow(e):GmCXt.sendMessageToBackgroundService(e))}function handleGetSurveyDetail(t,e){function r(e){e.msgId=t.msgId,GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:got_survey_detail",data:e})}var i={};i.sentiment_code=t.sentiment.sentimentCode,i.user=GmCXt.user,i.app_code=t.isExit?"":GmCXt.appList["app:"+GmCXt.activeAppId].external_id,GmCXt.apiGetSentiment(i).then(r).catch(function(e){r(!1)})}function callApi(i){var t=i.data.msgId;switch(GmCXt.log(70,"#$ callApi: "+i.action+": ",i.data),i.data.api){case"tour":var e=i.data.option;api.getTour(e,l,l,e.forceJSONApi);break;case"tour/contextual":e=rootScope.readLocalCT(i.data.option.url,i.data.option.pageTitle);if(e)GmCXt.log(10,"FETCHING tours from CACHE"),s(n(e));else{var r=i;function a(e){s(n(rootScope.processContextualGuide(e,r.data.option.url)))}GmCXt.getLXPLang()?r.data.option.language=GmCXt.getLXPLang():rootScope.language&&-1===rootScope.language.indexOf("en-")&&!GmCXt.isFalse(rootScope.language)&&(r.data.option.language=rootScope.language);let e=GmCXt.user;GmCXt.onPrem()&&!GmCXt.isEmpty(e)?api.getContextualTourStorage(r.data.option,a):api.getContextualTour(r.data.option,a)}break;case"tour/companion":{var o=i.data.option;let e=rootScope.publishedTours.filter(e=>e.tour_url.includes(GmCXt.filterUrlScheme(o.url))),t=rootScope.validateAllRulesExceptSelectEl(rootScope.publishedTours,!1,o.url).tours,r=GmCXt.removeDuplicates(e.concat(t));s(r=r.map(e=>({id:e.tour_id,title:e.tour_title,description:e.tour_description})))}break;case"user/token":case"user/token/sumtotal":case"user/token/lxp":case"user/token/galaxy":case"user/token/sbx":api.getAccessToken(function(e){rootScope.updateAccessTokenCallBack(e),s(e)});break;case"connectMgDesktop":api.sendMsgToMyBot(i.data.option);break;case"URL":mg$$1.get(i.data.option.url).then(function(e){s(e)})}function n(e){var t=[];return e.filter(function(e){(-1<e.tour_type.indexOf("beacon_tour")||-1<e.tour_type.indexOf("overlay_tour")||-1<e.tour_type.indexOf("smartTip")||-1<e.tour_type.indexOf("insights"))&&t.push(e)}),t}function s(e){e={action:"mgPlayerJSPreview_action:call_api_response",data:{msgId:t,items:e}};GmCXt.sendMessageToBackgroundService(e),GmCXt.sendToParentWindow(e)}function l(e){s(e=GmCXt.inPlayer&&rootScope.notDefaultLang()?e&&rootScope.getTranslatedTourAndSteps(e,rootScope.language):e)}}function winListener(e){e=GmCXt.parseMsg(e);e&&e.action&&0===e.action.indexOf("mgPlayerJSPreview_action:")&&((e=GmCXt.convertMgdata(e)).data&&e.data.config&&(GmCXt.conf=e.data.config),msgAction(e))}function createStepComplete(t){GmCXt.log(54,"Step Created",t.data);try{let r=t.data.step,e=(rootScope.pendingStepCount=t.data.pendingCount,rootScope.allTourList["cat_"+r.category_id]["tour_"+r.tour_id]);e=e||t.data.tour;var a=GmCXt.createDeepCopy(e);let i=t.data.tour;i.steps=a.steps,r.step_type!==GmCXt.STEP_TYPE_BRANCH&&r.step_type!==GmCXt.STEP_TYPE_ERROR_HANDLER||rootScope.branchGuideDownloadOpts(i.tour_settings.downloadGuideFiles),rootScope.isTrackingGuide(i)||(t.data.prevStepData&&t.data.prevStepData.tour&&(i.tour_settings=t.data.prevStepData.tour.tour_settings),i.steps.forEach(function(e,t){r.creation_id&&r.creation_id===e.creation_id&&(i.steps[t]=r)}),GmCXt.checkForBranchVariationSteps(r)&&rootScope.branchGuideDownloadOpts(i.tour_settings.downloadGuideFiles),rootScope.setTour(i),t.data.tour=i),r.tour_id===rootScope.currentTour.tour_id&&rootScope.routeToStepContainer("createStepCompleted",t.data),Gm.statusBar.set("createStepComplete")}catch(e){GmCXt.log(54,"Step Creation Error ",e)}}function tourUpdateSuccess(e){Gm.loading.set(!1),rootScope.decrementPendingStepCount()}function updateTour(e){let t={};var r,i,a,o;t.prevStepData=rootScope.prevStepData,t.step=e.step,(t=GmCXt.updateTourPlayStructure(t))&&(i=(o=(r=t.prevStepData).tour).category_id,a=o.tour_id,rootScope.allTourList["cat_"+i]["tour_"+a].steps=o.steps.splice(e.step.step_order-1,0,e.step),get_store_value(Gm.currentTour).tour_id===a&&Gm.currentTour.set(rootScope.allTourList["cat_"+i]["tour_"+a]),e={category_id:(o=r.tour).category_id,tour_title:o.tour_title,tour_description:o.tour_description,tour_image:o.tour_image,tour_settings:o.tour_settings,tour_type:o.tour_type,tour_url:o.tour_url,tour_id:o.tour_id,is_locked:o.is_locked,keywords:o.keywords},api.tourUpdate(e,function(){},function(){},tourUpdateSuccess))}function syncCreatorChanges(e){storage.refreshTime.set(e.data.refreshTime),storage.serverUpdates.get().then(function(){e.data.updates.length&&e.data.updates.forEach(function(e){"update"===e.action?rootScope.serverUpdates[e.object_type+"_"+e.object_id]=parseInt(e.modified_time):"delete"===e.action&&("category"===e.object_type?(rootScope.deleteCategoryServerUpdate(e.object_id),rootScope.serverDeletes.categories.push(e.object_id)):"tour"===e.object_type&&(rootScope.deleteTourServerUpdate(e.object_id),rootScope.serverDeletes.tours.push(e.object_id)))}),storage.serverUpdates.set(rootScope.serverUpdates),storage.serverDeletes.set(rootScope.serverDeletes),rootScope.checkCurrentViewForUpdate(!0),GmCXt.log(61,"Updates from Server",rootScope.serverUpdates)})}function saveVideoStep(e){function t(e){var t;e.data?(e=e.data,rootScope.uploadProgressBar=!1,rootScope.updateVideoInProgressList("remove",e.step.tour_id),rootScope.videoUploadMessage=!0,rootScope.videoUploadMessage&&setTimeout(rootScope.closeNotification,5e3),t=new Date,rootScope.lastVideoStepCreated={id:e.step.step_id,time:t.getTime()},"stepview"===get_store_value(Gm.CurrentPage)&&rootScope.currentTour.tour_id===e.step.tour_id?rootScope.routeToStepContainer("refreshStep",e):updateTour(e)):storage.videosInProgress.set([])}e.data.step_id?api.stepUpdate(e.data,t):api.stepCreate(e.data,t)}function createStepJobsPreview(e){rootScope.uploadStepProgressBar=!0,Gm.statusBar.set("createStepJobsPreview")}function createStepPreview(e){e.stepObj=GmCXt.validateDataModel(e.stepObj,GmCXt.model.step),rootScope.routeToStepContainer("createStepPreview",e)}function updateStepComplete(r){var i,a;rootScope.decrementPendingStepCount(),1005===r.data.code?(rootScope.triggerError(r.data),GmCXt.log(54,"ERROR: Failed to update step",r.data),rootScope.routeToStepContainer("updateStepFailed",r.data)):(GmCXt.log(54,"Step updated",r.data),i=r.data.step,(a=rootScope.allTourList["cat_"+i.category_id]["tour_"+i.tour_id]).steps.forEach(function(e,t){i.step_type===GmCXt.STEP_TYPE_TAG?i.step_id===e.step_id&&(r.data.stepIndex=t,a.steps[t]=i):(i.creation_id===e.creation_id||r.data.langUpdated&&i.step_id===e.step_id)&&(a.steps[t]=i)}),r.data.tour&&(a.tour_settings=r.data.tour.tour_settings),rootScope.setTour(a),rootScope.routeToStepContainer("updateStepCompleted",r.data))}function updateStepFail(e){rootScope.decrementPendingStepCount(),rootScope.routeToStepContainer("updateStepFailed",e.data),e.data.code&&rootScope.triggerError(e.data)}function createStepFail(e){GmCXt.log(54,"ERROR: Failed to create step",e.data);var t=GmCXt.parseJSON(e.data.step);rootScope.allTourList.length?stepFailCb(e,t):storage.allTourList.get().then(function(){stepFailCb(e,t)}).catch(function(e){console.log("Error in getting all tour list",e)})}function stepFailCb(e,r){var i=rootScope.allTourList["cat_"+r.category_id]["tour_"+r.tour_id];i.steps.forEach(function(e,t){r.creation_id&&r.creation_id===e.creation_id&&i.steps.splice(t,1)}),rootScope.setTour(i),Gm.currentTour.set(i),r.tour_id===rootScope.currentTour.tour_id&&(Gm.loading.set(!1),rootScope.decrementPendingStepCount()),e.data.code&&rootScope.triggerError(e.data),Gm.statusBar.set("createStepFailed")}function refreshTourView(e){rootScope.uploadInProgress=!1,e.data.error?mgError.on({code:e.data.result.code}):(rootScope.videoUploadMessage=!0,setTimeout(rootScope.closeNotification,5e3),rootScope.setTour(e.data.tour),rootScope.refreshPageView())}function msgAction(r){switch(rootScope.FT.creatorApp&&commonCases(r),r.action){case"mgPlayerJSPreview_action:user_signed_in":GmCXt.user&&!GmCXt.isEmpty(GmCXt.user)||r.data.forceLogin?r.data.forceLogin&&rootScope.onUserSignin(r.data.data.user,!0):rootScope.onUserSignin(r.data.data.user,!1);break;case"mgPlayerJSPreview_action:init_side_panel_app":(p=r.data)&&(GmCXt.log(21,"LOADING side panel, message from content script",p),rootScope.updatePageUrl(p),GmCXt.pageTitle=p.pageTitle,GmCXt.conf.baseUrl=p.baseUrl,GmCXt.isPlayer()&&(rootScope.orgSecrret=p.orgSecKey||GmCXt.conf.orgSecrret,rootScope.myGuideOrgKey=p.myGuideOrgKey),p.isDesktopReq?(p.deskReq&&GmCXt.sendMessageToStepFrame("mgPlayerJSPreview_action:connected_from_app_step",{data:p.deskReq}),rootScope.showWidget(),rootScope.processActiveRequests()):rootScope.initApp());break;case"mgPlayerJSPreview_action:toggle_json_editor":rootScope.jsonEditor=!rootScope.jsonEditor;break;case"mgPlayerJSPreview_action:update_debug_mode":storage.debugMode.set(r.data.debugMode);break;case"mgPlayerJSPreview_action:snow_sign_in":case"mgPlayerJSPreview_action:maintenance":break;case"mgPlayerJSPreview_action:update_access_token":updateUser(r.data);break;case"mgPlayerJSPreview_action:close_video":rootScope.closeAppPopup();break;case"mgPlayerJSPreview_action:set_video_iframe_height":mg$$1(".video-iframe").css("height",r.data.pageHeight+13);break;case"mgPlayerJSPreview_action:clear_current_page":GmCXt.ruleEngine.clearJobs();break;case"mgPlayerJSPreview_action:page_title":GmCXt.pageTitle!==r.data.title&&(GmCXt.isNotificationReqd=!0),GmCXt.pageTitle=r.data.title;break;case"mgPlayerJSPreview_action:set_local_storage":r.data&&(s=r.data.msgId,delete r.data.msgId,mg$$1.each(r.data,function(e,t){e=GmCXt.addStoragePrefix(e),localStorage.setItem(e,JSON.stringify(t))}),l={action:"mgPlayerJSPreview_action:set_local_storage_response",data:{msgId:s}},GmCXt.sendToParentWindow(l));break;case"mgPlayerJSPreview_action:get_local_storage":for(var i=r.data.keys,a={},o=0;o<i.length;o++){var n=GmCXt.addStoragePrefix(i[o]);(c=localStorage.getItem(n))&&"undefined"!==c&&(c=GmCXt.parseJSON(c),a[i[o]]=c)}a&&(l={action:"mgPlayerJSPreview_action:get_local_storage_response",data:{msgId:r.data.msgId,items:a}},GmCXt.sendToParentWindow(l));break;case"mgPlayerJSPreview_action:remove_local_storage":for(var s=r.data.msgId,i=(delete r.data.msgId,r.data),o=0;o<i.length;o++)i[o]=GmCXt.addStoragePrefix(i[o]),localStorage.removeItem(i[o]);var l={action:"mgPlayerJSPreview_action:remove_local_storage_response",data:{msgId:s}};GmCXt.sendToParentWindow(l);break;case"mgPlayerJSPreview_action:to_signin_page":rootScope.handleSignIn();break;case"mgPlayerJSPreview_action:page_url":s=r.data;r.data&&rootScope.updatePageUrl(s),GmCXt.urlParts=s.urlParts,GmCXt.pageTitle=s.pageTitle;break;case"mgPlayerJSPreview_action:open_side_panel":rootScope.isSidePanelOpen=!0,r.data&&"chatbot"===r.data.action?Gm.activeView.set("chatbot"):GmCXt.isEmpty(GmCXt.user)?rootScope.clearSession():rootScope.redirectToActiveview();break;case"mgPlayerJSPreview_action:refresh_player":refreshPlayer(r.data);break;case"mgPlayerJSPreview_action:update_timestamp_sync_time":rootScope.lastTimeStampSync=GmCXt.getCurrentTimeInSec(),storage.lastTimeStampSync.set(GmCXt.getCurrentTimeInSec());break;case"mgPlayerJSPreview_action:refresh_current_page":s=r.data.eventType||"";rootScope.refreshCurrentPage(s),rootScope.refreshTaskList(),"page_click"!==s&&"stepview"!==get_store_value(Gm.CurrentPage)&&(GmCXt.validatedSegments={});break;case"mgPlayerJSPreview_action:get_cdn_signature_from_app":rootScope.getNewCdnSignature();break;case"mgPlayerJSPreview_action:set_lang_side_panel":rootScope.updateAppLang(r.data.lang);break;case"mgPlayerJSPreview_action:completed;task:select_dom_element_for_rules":GmCXt.ruleEngine.onSuccessDOMRuleMatch(r.data);break;case"mgPlayerJSPreview_action:lms_video_assignment_complete":break;case"mgPlayerJSPreview_action:update_organization_data":r.data&&r.data.organization&&(GmCXt.organization=r.data.organization,rootScope.saveOrganization(GmCXt.organization));break;case"mgPlayerJSPreview_action:call_api":callApi(r);break;case"mgPlayerJSPreview_action:show_notifications":GmCXt.stopNotification(!1)&&!r.data.isAutomationRunning||(GmCXt.loadGuideNotifications(r.data.notifications,!1,!1,!1,get_store_value(Gm.isNotificationReqd),r.data.isPageClicked),Gm.isNotificationReqd.set(!1));break;case"mgPlayerJSPreview_action:close_notification_popup":GmCXt.closeNotificationPopupSidePanel(r.data.isSidePanelOpen);break;case"mgPlayerJSPreview_action:update_user_data":var c;r.data&&r.data.user&&(GmCXt.user=r.data.user,GmCXt.user.signin_user_email?(c={email_id:GmCXt.user.signin_user_email,settings:JSON.stringify(GmCXt.user.settings),organization_id:GmCXt.user.organization_id},GmCXt.setAnonymousUserPrefrence(c)):GmCXt.apiUpdateUserProfile(GmCXt.user),rootScope.saveUser(GmCXt.user));break;case"mgPlayerJSPreview_action:update_notification_info":storage.notifTours.set(r.data).then(function(e){rootScope.setNotifTours()});break;case"mgPlayerJSPreview_action:update_tour_activity":GmCXt.tourActivity=r.data.tourActivity;break;case"mgPlayerJSPreview_action:update_played_tour":r.data.length!==get_store_value(Gm.playedTour)&&Gm.playedTour.set(r.data.playedTour);break;case"mgPlayerJSPreview_action:update_played_step":rootScope.setPlayedStepsInfo(r.data.playedStep);break;case"mgPlayerJSPreview_action:get_survey_detail":handleGetSurveyDetail(r.data);break;case"mgPlayerJSPreview_action:get_survey_detail_tooltip":GmCXt.apiGetSentiment({app_code:rootScope.appList["app:"+rootScope.activeAppId].external_id,sentiment_code:r.data.sentiment_code,user:GmCXt.user}).then(function(e){e.tourId=r.data.tourId,e.type="tooltip",e.stepId=r.data.stepId,GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:survey_start;task:show_survey",data:e})});break;case"mgPlayerJSPreview_action:clear_user_data":storage.user.remove();break;case"mgPlayerJSPreview_action:user_signin_org_key_failed":var p=r.data;p.paramsData&&(p.params=p.paramsData,p.method_type=p.method,p.errMessage=p.message,rootScope.triggerError(r.data)),rootScope.myGuideOrgKey="",rootScope.clearSession(),rootScope.signInWithSso(!0);break;case"mgPlayerJSPreview_action:mybot_results":l={action:"mgPlayerJSPreview_action:mybot_results",data:{p:r.data}};GmCXt.sendMessageToBackgroundService(l),rootScope.categoryDataForAutomation=[];break;case"mgPlayerJSPreview_action:clean_tour_player":GmCXt.cleanPlayerI();break;case"mgPlayerJSPreview_action:reset_panel_right":mg$$1(".ege-panel").css({right:"initial"});break;case"mgPlayerJSPreview_action:logout_user":rootScope.clearSession();break;case"mgPlayerJSPreview_action:mark_task_guide_complete":rootScope.markTaskGuideComplete(r.data);break;case"mgPlayerJSPreview_action:mark_task_guide_complete_played_outside":rootScope.markTaskGuideCompletePlayedOutside(r.data);break;case"mgPlayerJSPreview_action:app_panel_closed":rootScope.isSidePanelOpen=!1,rootScope.displayChatIcon();break;case"mgPlayerJSPreview_action:signin_from_console":rootScope.loginFromConsole(r.data);break;case"mgPlayerJSPreview_action:update_registration_secret":rootScope.trackerSecrets={},rootScope.registerClientInsights();break;case"mgPlayerJSPreview_action:close_power_form":0<mg$$1(".mgPlayerJSPreview_form-injector-wrapper").length&&GmCXt.closePowerFormSp();break;case"mgPlayerJSPreview_action:onCloseSlideshowPanel":let e=get_store_value(Gm.slideshowInstance),t=(GmCXt.isEmpty(e)||(e.$destroy(),e=null),mg$$1("#mgPlayerJSPreview_slideshow-panel").empty(),new SlideShow({target:document.getElementById("mgPlayerJSPreview_slideshow-panel")}));Gm.slideshowInstance.update(e=>t)}}function appListener(e,t,r){switch(e=GmCXt.parseJSON(e),e=GmCXt.convertMgdata(e),rootScope.FT.creatorApp&&commonCases(e),e.action){case"mgPlayerJSPreview_action:get_cdn_signature_from_app":rootScope.getNewCdnSignature();break;case"mgPlayerJSPreview_action:to_signin_page":rootScope.handleSignIn();break;case"mgPlayerJSPreview_action:update_access_token":updateUser(e.data);break;case"mgPlayerJSPreview_action:call_api":callApi(e);break;case"mgPlayerJSPreview_action:refresh_player":refreshPlayer(e.data);break;case"mgPlayerJSPreview_action:update_timestamp_sync_time":rootScope.lastTimeStampSync=GmCXt.getCurrentTimeInSec(),storage.lastTimeStampSync.set(GmCXt.getCurrentTimeInSec());break;case"mgPlayerJSPreview_action:fetch_user":var i=GmCXt.user;GmCXt.isEmpty(i)?rootScope.clearSession():rootScope.syncUser();break;case"mgPlayerJSPreview_action:update_registration_secret":rootScope.trackerSecrets={},rootScope.registerClientInsights();break;case"mgPlayerJSPreview_action:user_logged_out":break;case"mgPlayerJSPreview_action:logout_user":rootScope.clearSession();break;case"mgPlayerJSPreview_action:get_data_from_panel":i={action:"mgPlayerJSPreview_action:get_data_from_panel_response",data:{user:GmCXt.user,organization:GmCXt.organization}};GmCXt.sendMessageToBackgroundService(i)}return!0}function commonCases(e){switch(e.action){case"mgPlayerJSPreview_action:beacon_rules_donot_match":case"mgPlayerJSPreview_action:smartTip_rules_donot_match":rootScope.showPopup(rootScope.labels.noPreview);break;case"mgPlayerJSPreview_action:switch_app":rootScope.switchApp(e.data.app);break;case"mgPlayerJSPreview_action:create_tags":rootScope.routeToStepContainer("createTags",e.data);break;case"mgPlayerJSPreview_action:create_step":createStepPreview(e.data);break;case"mgPlayerJSPreview_action:create_step_jobs":createStepJobsPreview(e.data);break;case"mgPlayerJSPreview_action:update_step":rootScope.incrementPendingStepCount(),setTimeout(function(){rootScope.updateStep(e.data)},100);break;case"mgPlayerJSPreview_action:not_able_to_edit_step":modal.editStepOptions();break;case"mgPlayerJSPreview_action:element_not_found_reselect_beacon":GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:open_app_panel"}),modal.editStepOptions("Reselect beacon");break;case"mgPlayerJSPreview_action:element_not_found_edit_on_image":var t=e.data.step;rootScope.hideWidget(),GmCXt.isEditAnywhere(t)?GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:inline_edit,task:edit_step"}):modal.editStepOptions("Reselect element");break;case"mgPlayerJSPreview_action:inline_edit_on_image":t=e.data.step;rootScope.hideWidget(),GmCXt.isEditAnywhere(t)?GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:image_edit,task:edit_inline_step"}):modal.editStepOptions("Reselect element");break;case"mgPlayerJSPreview_action:not_able_to_edit_beacon":GmCXt.isExtension()&&modal.open(rootScope.labels.editBeaconMsg,"confirm",function(){GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:redirect_to_url,task:edit_beacon"})});break;case"mgPlayerJSPreview_action:save_beacon_settings":setTimeout(function(){Gm.routeAction.set({action:"saveBeaconSettings",data:e.data})},1e3);break;case"mgPlayerJSPreview_action:completed;task:select_new_element_for_dom_select_rule":rootScope.isSidePanelOpen=!0,Gm.routeAction.set({action:"mgPlayerJSPreview_action:completed;task:select_new_element_for_dom_select_rule",data:e.data});break;case"mgPlayerJSPreview_action:completed;task:select_new_table_for_dom_select_rule":Gm.routeAction.set({action:"mgPlayerJSPreview_action:completed;task:select_new_table_for_dom_select_rule",data:e.data});break;case"mgPlayerJSPreview_action:update_element_precision;to:side_panel":t=e.data;t.rulesElement&&(GmCXt.rulesElement=t.rulesElement),Gm.routeAction.set({action:"updateElementPrecision",data:e.data});break;case"mgPlayerJSPreview_action:completed;task:select_dom_element_for_matching_in_rules":GmCXt.log(12,"RECEIVED MESSAGE. Element find result"),Gm.routeAction.set({action:"mgPlayerJSPreview_action:completed;task:select_dom_element_for_matching_in_rules",data:e.data});break;case"mgPlayerJSPreview_action:update_video_progress_bar":rootScope.updateStatusProgressBar(e);break;case"mgPlayerJSPreview_action:update_save_video_progress":rootScope.updatedInProgressVariable(e);break;case"mgPlayerJSPreview_action:open_survey_creation":rootScope.fromSmartTipPanel=!0,rootScope.openSurveyAnalyticsPortal();break;case"mgPlayerJSPreview_action:scroll_to_edit_step":rootScope.scrollToStep(e.data.stepId,!0);break;case"mgPlayerJSPreview_action:show_close_screen_cast_btn":mg$$1("#mgPlayerJSPreview_stopScreencast").show(),GmCXt.sendMessageToBackgroundService({action:"mgPlayerJSPreview_action:show_recording_on"});break;case"mgPlayerJSPreview_action:screencast_recording_denied":rootScope.showPopup(rootScope.labels.userDeniedScreencastMessage);break;case"mgPlayerJSPreview_action:clear_active_screencast":storage.activeTourId.remove(),storage.activeScreenCastTourId.remove(),rootScope.setStepPendinCount(),"stepview"===get_store_value(Gm.CurrentPage)&&Gm.currentTour.update(e=>({...e,screencastInProgress:!1}));break;case"mgPlayerJSPreview_action:replace_element_request_from_insight":rootScope.getStepForReplaceEl(e.data.data.step);break;case"mgPlayerJSPreview_action:paste_tour_from_myguide_library":rootScope.isUserLoggedIn()&&(rootScope.copiedTour=e.data.data.tour_id,rootScope.copyGuidesList=!1,rootScope.tourCopiedFromLibrary=!0,modal.open(rootScope.labels.copyGuideFromLibrary,"success"));break;case"mgPlayerJSPreview_action:FindReplaceElReq":t=e.data.step;t&&t.step_settings&&t.step_settings.element&&(state=$state.go("findNReplace",{auto_jquery:t.step_settings.element.criteria.auto_jquery,jquery_selector:t.step_settings.element.criteria.jquery_selector}));break;case"mgPlayerJSPreview_action:create_step_completed":case"mgPlayerJSPreview_action:create_tag_completed":createStepComplete(e);break;case"mgPlayerJSPreview_action:myBot_report_saved":GmCXt.sendToParentWindow(e);break;case"mgPlayerJSPreview_action:create_step_failed":createStepFail(e);break;case"mgPlayerJSPreview_action:hide_progress_bar":rootScope.setStepPendinCount(),rootScope.hideProgressBar();break;case"mgPlayerJSPreview_action:updated_step_completed":case"mgPlayerJSPreview_action:updated_tag_completed":updateStepComplete(e);break;case"mgPlayerJSPreview_action:updated_step_failed":updateStepFail(e);break;case"mgPlayerJSPreview_action:close_tag_completed":Gm.loading.set(!1);break;case"mgPlayerJSPreview_action:creator_updates":syncCreatorChanges(e);break;case"mgPlayerJSPreview_action:redirect_to_video_step_add":mg$$1("#mgPlayerJSPreview_stopScreencast").hide(),redirectToVideoStepAdd(e.data),GmCXt.sendMessageToBackgroundService({action:"mgPlayerJSPreview_action:show_recording_off"});break;case"mgPlayerJSPreview_action:refresh_tour_view":refreshTourView(e);break;case"mgPlayerJSPreview_action:console_errors_from_background":e.data.errStack&&console.error(e.data.errStack);break;case"mgPlayerJSPreview_action:save_video_step":saveVideoStep(e);break;case"mgPlayerJSPreview_action:create_video_step":GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:open_app_panel",data:{byPassRoute:!0}});$state.go("video-step-add",{tourId:e.data.tourId,stepId:0,videoUrl:e.data.videoUrl,type:"videoScreencast",order:e.data.order});break;case"mgPlayerJSPreview_action:save_video_in_background;task:upload_video;completed":GmCXt.sendToParentWindow(e);break;case"mgPlayerJSPreview_action:show_message_video_step_failed":rootScope.uploadProgressBar=!1,rootScope.videoUploadMessage=!1,Gm.statusBar.set(video_step_failed),mg$$1(".mgPlayerJSPreview_video-upload-progress-bar-wrapper").find(".mgPlayerJSPreview_progress-bar-close-button").show(),modal.open(rootScope.labels.videoSubmitFailedMessage,"alert",videoErrClose),rootScope.uploadInProgress=!1,rootScope.updateVideoInProgressList("remove",e.data.tour_id);break;case"mgPlayerJSPreview_action:update_video_progress_bar":rootScope.updateStatusProgressBar(e);break;case"mgPlayerJSPreview_action:show_message_video_card_submit_failed":rootScope.uploadProgressBar=!1,rootScope.videoUploadMessage=!1,Gm.statusBar.set("video_card_submit_failed"),mg$$1(".mgPlayerJSPreview_video-upload-progress-bar-wrapper").find(".mgPlayerJSPreview_progress-bar-percentage").html("1%"),mg$$1(".mgPlayerJSPreview_video-upload-progress-bar-wrapper").find(".mgPlayerJSPreview_progress-bar-percentage").css("width","1%"),mg$$1(".mgPlayerJSPreview_video-upload-progress-bar-wrapper").find(".mgPlayerJSPreview_progress-bar-close-button").show(),modal.open(e.data.data,"alert"),rootScope.uploadInProgress=!1;break;case"mgPlayerJSPreview_action:update_save_video_progress":rootScope.updatedInProgressVariable(e);break;case"mgPlayerJSPreview_action:create_image_steps_failed":rootScope.uploadProgressBar=!1,rootScope.videoUploadMessage=!1,Gm.statusBar.set("image_steps_failed"),mg$$1(".mgPlayerJSPreview_video-upload-progress-bar-wrapper").find(".mgPlayerJSPreview_progress-bar-percentage").html("1%"),mg$$1(".mgPlayerJSPreview_video-upload-progress-bar-wrapper").find(".mgPlayerJSPreview_progress-bar-percentage").css("width","1%"),e.data.code&&rootScope.triggerError(e.data),rootScope.uploadInProgress=!1;break;case"mgPlayerJSPreview_action:myBot_report_saved":GmCXt.sendToParentWindow(e);break;case"mgPlayerJSPreview_action:to_signin_page":rootScope.handleSignIn()}}service.main=()=>{window.addEventListener("message",winListener),GmCXt.isExtension()&&("chrome"===GmCXt.browserApp?chrome:browser).runtime.onMessage.addListener(appListener)};let playerSvgConst={iconBack:'<svg class="mgPlayerJSPreview_position-center" width="8" height="14" viewBox="0 0 8 14" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M0.233044 7.05301C0.233044 7.03801 0.236044 7.02501 0.237044 7.01001C0.245778 6.81309 0.327814 6.62654 0.467044 6.48701L0.469044 6.48401L6.11604 0.837007C6.19033 0.762217 6.27864 0.702806 6.37591 0.662173C6.47318 0.62154 6.57751 0.600484 6.68292 0.600205C6.78834 0.599927 6.89277 0.620432 6.99026 0.66055C7.08774 0.700668 7.17636 0.75961 7.25104 0.834006L7.53304 1.11701C7.68312 1.26767 7.76722 1.47177 7.76684 1.68442C7.76647 1.89708 7.68165 2.10088 7.53104 2.25101L2.72904 7.05201L7.52904 11.853C7.6039 11.9272 7.66339 12.0155 7.70411 12.1127C7.74482 12.21 7.76598 12.3143 7.76635 12.4197C7.76672 12.5251 7.7463 12.6295 7.70627 12.7271C7.66624 12.8246 7.60737 12.9133 7.53304 12.988L7.25004 13.271C7.09912 13.4208 6.89487 13.5046 6.68222 13.5038C6.46956 13.5031 6.26591 13.4179 6.11604 13.267L0.749043 7.90101L0.466043 7.61801C0.316043 7.46801 0.240044 7.27301 0.235044 7.07501L0.233044 7.05301Z" fill="#555555"/></svg>',iconSearchClose:'<svg version="1.1" id="Capa_1" x="0px" y="0px"viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve"><g><g><path d="M46,4C44.9,3,43.2,3,42.1,4L25,21.2L7.9,4C6.8,3,5.1,3,4,4S3,6.8,4,7.9L21.2,25L4,42.1C3,43.2,3,44.9,4,46c0.5,0.5,1.2,0.8,1.9,0.8s1.4-0.3,1.9-0.8L25,28.8L42.1,46c0.5,0.5,1.2,0.8,1.9,0.8c0.7,0,1.4-0.3,1.9-0.8c1.1-1.1,1.1-2.8,0-3.8L28.8,25L46,7.9C47,6.8,47,5.1,46,4z"/></g></g></svg>',no_guides_image:'<svg viewBox="0 0 101 124" fill="none"><path d="M98.809 22.612L78.174 1.824C77.024 0.664999 75.428 0 73.795 0H6.57C3.169 0 0.401001 2.768 0.401001 6.169V117.83C0.401001 121.232 3.169 124 6.57 124H94.429C97.831 124 100.599 121.232 100.599 117.83V26.958C100.599 25.319 99.963 23.776 98.809 22.612ZM76.754 3.232L97.389 24.02C97.928 24.563 98.286 25.233 98.464 25.958H77.727C76.618 25.958 75.574 25.527 74.787 24.744C73.995 23.955 73.558 22.905 73.558 21.788V2H73.795C74.915 2 75.966 2.438 76.754 3.232ZM94.429 122H6.57C4.271 122 2.401 120.129 2.401 117.83V6.169C2.401 3.87 4.271 2 6.57 2H71.558V21.788C71.558 23.441 72.204 24.995 73.375 26.161C74.54 27.32 76.084 27.958 77.722 27.958H98.599V117.83C98.599 120.129 96.728 122 94.429 122Z" fill="#8D8D8D"/></svg>',folder:'<svg  width="40" height="40" viewBox="0 0 40 40" fill="none"><rect x="0.7" y="0.7" width="38.6" height="38.6" rx="19.3" fill="#f8f8fb" stroke="#acadc1" stroke-width="1.4"/><path d="M28.2 15.6733V18.4667H11.8V13.0067C11.8 12.9091 11.8669 12.8667 11.906 12.8667H18.5C18.539 12.8667 18.606 12.9092 18.606 13.0067V15.3333V15.5333H18.806H28.094C28.1331 15.5333 28.2 15.5758 28.2 15.6733ZM28.094 14.4667H19.606V13.0067C19.606 12.3616 19.1296 11.8 18.5 11.8H11.906C11.2764 11.8 10.8 12.3612 10.8 13.0067V18.6667V19.3333V27.66C10.8 28.3051 11.2764 28.8667 11.906 28.8667H28.094C28.7232 28.8667 29.2 28.3055 29.2 27.66V19.3333V18.6667V15.6733C29.2 15.0279 28.7236 14.4667 28.094 14.4667ZM28.2 27.66C28.2 27.7576 28.1331 27.8 28.094 27.8H11.906C11.8669 27.8 11.8 27.7576 11.8 27.66V19.5333H28.2V27.66Z" fill="#acadc1" stroke="#acadc1" stroke-width="0.4"/></svg>',guide_category_title:'<svg width="28" height="22" viewBox="0 0 28 22" fill="none" ><path d="M0.305981 9.84855L2.80027 19.8175C2.81263 20.5627 3.36591 21.2 4.08726 21.2H23.5129C24.2341 21.2 24.788 20.5626 24.7999 19.8165L27.1945 9.84671L27.2373 9.66829L27.0632 9.61026L24.8001 8.85585V5.408C24.8001 4.65149 24.2424 4 23.5129 4H13.2873V2.208C13.2873 1.45193 12.7296 0.8 12.0001 0.8H4.08726C3.35774 0.8 2.80006 1.45149 2.80006 2.208V8.85401L0.439046 9.60952L0.260472 9.66666L0.305981 9.84855ZM3.91408 19.7435L1.47621 10H26.0263L23.6856 19.7453L23.6801 19.7683V19.792C23.6801 19.9271 23.5858 20 23.5129 20H4.08726C4.01434 20 3.92006 19.9271 3.92006 19.792V19.7674L3.91408 19.7435ZM23.6801 5.408V8.8H3.92006V2.208C3.92006 2.07291 4.01434 2 4.08726 2H12.0001C12.0727 2 12.1673 2.07305 12.1673 2.208V5V5.2H12.3673H23.5129C23.5858 5.2 23.6801 5.27291 23.6801 5.408Z" fill="#b2b2b2" stroke="#b2b2b2" stroke-width="0.6" /></svg>',iconBreadcrumArrow:'<svg width="6px" height="14px" viewBox="0 0 6 14" version="1.1"  ><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0.555338542"><g id="01--Breadcrumb-GuideMe" transform="translate(-1139.000000, -186.000000)" fill-rule="nonzero" fill="#757575"><g id="right-arrow-copy-2" transform="translate(1139.000000, 186.000000)"><polygon class="shape" points="0.257105882 0 0.0240470588 0.313588202 4.68407059 6.58823529 0.0240470588 12.8628824 0.257105882 13.1764706 5.15002353 6.58823529"></polygon><polygon id="Shape-Copy" points="0.257105882 0 0.0240470588 0.313588202 4.68407059 6.58823529 0.0240470588 12.8628824 0.257105882 13.1764706 5.15002353 6.58823529"></polygon></g></g></g></svg>',popupInfo:'<svg width="44" height="44" viewBox="0 0 44 44" fill="none"><path d="M22 43.3333C16.342 43.3333 10.9158 41.0857 6.91502 37.085C2.91424 33.0842 0.666626 27.658 0.666626 22C0.666626 16.3421 2.91424 10.9158 6.91502 6.91506C10.9158 2.91428 16.342 0.666672 22 0.666672C27.6579 0.666672 33.0841 2.91428 37.0849 6.91506C41.0857 10.9158 43.3333 16.3421 43.3333 22C43.3333 27.658 41.0857 33.0842 37.0849 37.085C33.0841 41.0857 27.6579 43.3333 22 43.3333ZM22 11.3333C21.4342 11.3333 20.8915 11.5581 20.4915 11.9582C20.0914 12.3583 19.8666 12.9009 19.8666 13.4667C19.8666 14.0325 20.0914 14.5751 20.4915 14.9752C20.8915 15.3752 21.4342 15.6 22 15.6C22.5658 15.6 23.1084 15.3752 23.5085 14.9752C23.9085 14.5751 24.1333 14.0325 24.1333 13.4667C24.1333 12.9009 23.9085 12.3583 23.5085 11.9582C23.1084 11.5581 22.5658 11.3333 22 11.3333ZM24.1333 19.8667C24.1333 19.3009 23.9085 18.7583 23.5085 18.3582C23.1084 17.9581 22.5658 17.7333 22 17.7333C21.4342 17.7333 20.8915 17.9581 20.4915 18.3582C20.0914 18.7583 19.8666 19.3009 19.8666 19.8667V30.5333C19.8666 31.0991 20.0914 31.6418 20.4915 32.0418C20.8915 32.4419 21.4342 32.6667 22 32.6667C22.5658 32.6667 23.1084 32.4419 23.5085 32.0418C23.9085 31.6418 24.1333 31.0991 24.1333 30.5333V19.8667Z" fill="#005BF0"/></svg>',popupClose:'<svg  width="14" height="14" viewBox="0 0 14 14" fill="none"><path opacity="0.7" d="M13.8586 1.41L8.33929 6.92929L8.26858 7L8.33929 7.07071L13.8586 12.59L12.59 13.8586L7.07071 8.33929L7 8.26858L6.92929 8.33929L1.41 13.8586L0.141422 12.59L5.66071 7.07071L5.73142 7L5.66071 6.92929L0.141421 1.41L1.41 0.141421L6.92929 5.66071L7 5.73142L7.07071 5.66071L12.59 0.141422L13.8586 1.41Z" fill="black" stroke="black" stroke-width="0.2"/></svg>',popupWarning:'<svg width="44" height="40" viewBox="0 0 44 40" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M37.9337 38.9261L5.9348 39.0691C1.22227 39.0904 -0.681735 35.8019 1.682 31.7251L17.8431 3.85201C20.2068 -0.224788 24.0244 -0.216255 26.3711 3.87121L42.2196 31.4872C44.5652 35.5747 42.6463 38.9048 37.9337 38.9261ZM21.9071 28.4408C20.7284 28.4408 19.7737 29.3965 19.7737 30.5741C19.7737 31.7517 20.7295 32.7075 21.9071 32.7075C23.0847 32.7075 24.0404 31.7517 24.0404 30.5741C24.0404 29.3965 23.0847 28.4408 21.9071 28.4408ZM21.9071 26.3075C23.0847 26.3075 24.0404 25.3517 24.0404 24.1741V15.6408C24.0404 14.4632 23.0847 13.5075 21.9071 13.5075C20.7295 13.5075 19.7737 14.4632 19.7737 15.6408V24.1741C19.7737 25.3528 20.7295 26.3075 21.9071 26.3075Z" fill="#FFAB00"/></svg>',popupError:'<svg width="44" height="40" viewBox="0 0 44 40" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M37.9337 38.9261L5.93477 39.0691C1.22223 39.0904 -0.681765 35.8019 1.68197 31.7251L17.843 3.85201C20.2068 -0.224788 24.0244 -0.216255 26.371 3.87121L42.2196 31.4872C44.5652 35.5747 42.6462 38.9048 37.9337 38.9261ZM21.907 28.4408C20.7284 28.4408 19.7737 29.3965 19.7737 30.5741C19.7737 31.7517 20.7294 32.7075 21.907 32.7075C23.0846 32.7075 24.0404 31.7517 24.0404 30.5741C24.0404 29.3965 23.0846 28.4408 21.907 28.4408ZM21.907 26.3075C23.0846 26.3075 24.0404 25.3517 24.0404 24.1741V15.6408C24.0404 14.4632 23.0846 13.5075 21.907 13.5075C20.7294 13.5075 19.7737 14.4632 19.7737 15.6408V24.1741C19.7737 25.3528 20.7294 26.3075 21.907 26.3075Z" fill="#DE350B"/></svg>',popupSuccess:'<svg width="44" height="43" viewBox="0 0 44 43" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M22.3387 42.68C19.5162 42.7116 16.7155 42.1829 14.0987 41.1246C11.482 40.0663 9.10113 38.4995 7.09409 36.5147C5.08704 34.53 3.49365 32.1668 2.40619 29.562C1.31872 26.9573 0.758774 24.1627 0.758774 21.34C0.758774 18.5173 1.31872 15.7227 2.40619 13.118C3.49365 10.5132 5.08704 8.15003 7.09409 6.1653C9.10113 4.18056 11.482 2.61369 14.0987 1.55541C16.7155 0.497126 19.5162 -0.0315459 22.3387 5.92438e-06C27.9571 0.0628127 33.324 2.33878 37.2748 6.33398C41.2256 10.3292 43.4414 15.7213 43.4414 21.34C43.4414 26.9588 41.2256 32.3508 37.2748 36.346C33.324 40.3412 27.9571 42.6172 22.3387 42.68ZM19.2027 26.4267L13.6347 21.552L11 24.5653L19.6533 32.1333L34.2987 14.56L31.224 12L19.2027 26.4267Z" fill="#14B872"/></svg>',refresh:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" viewBox="0 0 31 25" fill="none" ><path fill-rule="evenodd" clip-rule="evenodd" d="M15.4902 22.7C21.1235 22.7 25.6902 18.1333 25.6902 12.5C25.6902 12.1626 25.6739 11.829 25.6418 11.5H27.9508C27.9769 11.8299 27.9902 12.1634 27.9902 12.5C27.9902 19.4036 22.3938 25 15.4902 25C12.548 25 9.84315 23.9835 7.70781 22.2824L9.34699 20.6432C11.0557 21.9343 13.1836 22.7 15.4902 22.7ZM5.33863 13.5C5.30662 13.171 5.29023 12.8374 5.29023 12.5C5.29023 6.8667 9.85693 2.3 15.4902 2.3C17.9291 2.3 20.1681 3.15598 21.9231 4.5839L21.9902 4.5L23.5474 2.94285C21.3716 1.10668 18.5602 0 15.4902 0C8.58668 0 2.99023 5.59644 2.99023 12.5C2.99023 12.8366 3.00354 13.1701 3.02965 13.5H5.33863Z" fill="#454560" /><path d="M26.8099 7.97679L23.1062 11.9319C23.0671 11.9829 23.0637 12.0485 23.0965 12.1021C23.1298 12.1559 23.1941 12.189 23.2641 12.1881L30.7904 12.0969C30.8604 12.096 30.9241 12.0613 30.956 12.0068C30.97 11.9826 30.9768 11.9561 30.9765 11.93C30.9761 11.8972 30.9644 11.8648 30.9421 11.8369L27.1196 7.97303C27.0838 7.92885 27.0258 7.90305 26.9639 7.9038C26.902 7.90455 26.8445 7.93192 26.8099 7.97679Z" fill="#454560" /><path d="M4.16431 17.1151L7.8721 13.1638C7.91124 13.1128 7.91465 13.0472 7.88187 12.9936C7.84872 12.9398 7.78437 12.9066 7.71438 12.9074L0.188057 12.9909C0.118062 12.9917 0.0542772 13.0263 0.0223269 13.0808C0.00829369 13.105 0.00143566 13.1314 0.00172616 13.1576C0.00208975 13.1904 0.0137412 13.2228 0.0360681 13.2507L3.8546 17.1185C3.89028 17.1627 3.94834 17.1886 4.01025 17.1879C4.07215 17.1872 4.12962 17.1599 4.16431 17.1151Z" fill="#454560" /></svg>',close_panel:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" viewBox="0 0 18 18" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.7133 8.54133L17.3653 15.1933C17.5729 15.4009 17.6895 15.6824 17.6895 15.976C17.6895 16.2696 17.5729 16.5511 17.3653 16.7587C17.1577 16.9662 16.8762 17.0829 16.5826 17.0829C16.2891 17.0829 16.0076 16.9662 15.8 16.7587L9.14798 10.1053L2.49731 16.7573C2.39453 16.8601 2.27251 16.9416 2.13822 16.9973C2.00393 17.0529 1.86 17.0815 1.71465 17.0815C1.56929 17.0815 1.42536 17.0529 1.29107 16.9973C1.15678 16.9416 1.03476 16.8601 0.931979 16.7573C0.829198 16.6546 0.747667 16.5325 0.692043 16.3982C0.636418 16.2639 0.607788 16.12 0.607788 15.9747C0.607788 15.8293 0.636418 15.6854 0.692043 15.5511C0.747667 15.4168 0.829198 15.2948 0.931979 15.192L7.58265 8.54133L0.931979 1.88933C0.724403 1.68176 0.607788 1.40022 0.607788 1.10667C0.607788 0.81311 0.724403 0.531577 0.931979 0.324001C1.13956 0.116425 1.42109 -0.000190733 1.71465 -0.000190735C2.0082 -0.000190737 2.28974 0.116425 2.49731 0.324001L9.14798 6.97733L15.8 0.324001C16.0076 0.116425 16.2891 -0.000190735 16.5826 -0.000190735C16.8762 -0.000190735 17.1577 0.116425 17.3653 0.324001C17.5729 0.531577 17.6895 0.81311 17.6895 1.10667C17.6895 1.40022 17.5729 1.68176 17.3653 1.88933L10.7133 8.54133Z" fill="#555555"/></svg>',subfolder:'<svg  width="40" height="40" viewBox="0 0 40 40" fill="none"><rect x="0.7" y="0.7" width="38.6" height="38.6" rx="19.3" fill="#F8F8FB" stroke="#ACADC1" stroke-width="1.4"/><path d="M28.2 15.6733V18.4667H11.8V13.0067C11.8 12.9091 11.8669 12.8667 11.906 12.8667H18.5C18.539 12.8667 18.606 12.9092 18.606 13.0067V15.3333V15.5333H18.806H28.094C28.1331 15.5333 28.2 15.5758 28.2 15.6733ZM28.094 14.4667H19.606V13.0067C19.606 12.3616 19.1296 11.8 18.5 11.8H11.906C11.2764 11.8 10.8 12.3612 10.8 13.0067V18.6667V19.3333V27.66C10.8 28.3051 11.2764 28.8667 11.906 28.8667H28.094C28.7232 28.8667 29.2 28.3055 29.2 27.66V19.3333V18.6667V15.6733C29.2 15.0279 28.7236 14.4667 28.094 14.4667ZM28.2 27.66C28.2 27.7576 28.1331 27.8 28.094 27.8H11.906C11.8669 27.8 11.8 27.7576 11.8 27.66V19.5333H28.2V27.66Z" fill="#ACADC1" stroke="#ACADC1" stroke-width="0.4"/><path d="M19.5667 24.36V24.2H30.433C30.4332 24.2011 30.4333 24.2025 30.4333 24.204V24.36H19.5667ZM30.4463 23.4H24.337V22.604C24.337 22.1773 24.0153 21.8 23.5833 21.8H19.5537C19.1218 21.8 18.8 22.1771 18.8 22.604V26V26.4V31.396C18.8 31.8227 19.1217 32.2 19.5537 32.2H30.4463C30.878 32.2 31.2 31.823 31.2 31.396V26.4V26V24.204C31.2 23.7771 30.8783 23.4 30.4463 23.4Z" fill="#ACADC1" stroke="#ACADC1" stroke-width="0.4"/></svg>',search:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" viewBox="0 0 18 19" fill="none" ><path d="M12.8812 11.6585L12.5653 12.0625H13.0781H13.6512C13.8108 12.0625 13.9614 12.1247 14.072 12.2354L17.5762 15.7395C17.5763 15.7397 17.5765 15.7398 17.5767 15.74C17.8066 15.9729 17.8064 16.3494 17.5736 16.5822L16.5787 17.5771L16.5777 17.5781C16.3492 17.8091 15.9738 17.8105 15.7404 17.5771L12.2354 14.0721C12.1247 13.9614 12.0625 13.8108 12.0625 13.6512V13.0781V12.5653L11.6585 12.8812C10.46 13.8182 8.95292 14.375 7.3125 14.375C3.41112 14.375 0.25 11.2139 0.25 7.3125C0.25 3.41112 3.41112 0.25 7.3125 0.25C11.2139 0.25 14.375 3.41112 14.375 7.3125C14.375 8.95292 13.8182 10.46 12.8812 11.6585ZM2.5625 7.3125C2.5625 9.93976 4.68901 12.0625 7.3125 12.0625C9.93976 12.0625 12.0625 9.93599 12.0625 7.3125C12.0625 4.68524 9.93599 2.5625 7.3125 2.5625C4.68524 2.5625 2.5625 4.68901 2.5625 7.3125Z" fill="#6f708b" stroke="#acadc1" stroke-width="0.5"/></svg>',search_close:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" viewBox="0 0 14 14" fill="none" ><path d="M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z" fill="black" fill-opacity="0.7" /><path d="M8.37464 7.03536L13.9293 12.59L12.59 13.9293L7.03536 8.37464L7 8.33929L6.96464 8.37464L1.41 13.9293L0.0707109 12.59L5.62536 7.03536L5.66071 7L5.62536 6.96464L0.0707107 1.41L1.41 0.0707107L6.96464 5.62536L7 5.66071L7.03536 5.62536L12.59 0.0707109L13.9293 1.41L8.37464 6.96464L8.33929 7L8.37464 7.03536Z" stroke="black" stroke-opacity="0.7" stroke-width="0.1" /></svg>',unpublish:'<svg width="18" height="18" viewBox="0 0 18 18" fill="none" ><rect x="1" y="4" width="16" height="1.5" fill="#FFFFFF"/><path d="M13.0699 13.1582L13.143 13.0868L13.0699 13.0153L12.3342 12.2955L12.2643 12.2271L12.1944 12.2955L9.62021 14.8139V8V7.9H9.52021L8.47979 7.9H8.37979V8V14.8139L5.80564 12.2955L5.73571 12.2271L5.66577 12.2955L4.93007 13.0153L4.857 13.0868L4.93007 13.1582L8.93007 17.0715L9 17.1399L9.06993 17.0715L13.0699 13.1582Z" fill="#FFFFFF" stroke="#FFFFFF" stroke-width="0.2"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2 1.5H16C16.2761 1.5 16.5 1.72386 16.5 2V14C16.5 14.2761 16.2761 14.5 16 14.5H14V16H16C17.1046 16 18 15.1046 18 14V2C18 0.895431 17.1046 0 16 0H2C0.895431 0 0 0.895431 0 2V14C0 15.1046 0.89543 16 2 16H4V14.5H2C1.72386 14.5 1.5 14.2761 1.5 14V2C1.5 1.72386 1.72386 1.5 2 1.5Z" fill="#FFFFFF"/></svg>',publish:'<svg width="18" height="18" viewBox="0 0 18 18" fill="none" ><path d="M4.93007 11.8418L4.857 11.9132L4.93007 11.9847L5.66577 12.7045L5.73571 12.7729L5.80564 12.7045L8.37979 10.1861V17V17.1H8.47979H9.52021H9.62021V17V10.1861L12.1944 12.7045L12.2643 12.7729L12.3342 12.7045L13.0699 11.9847L13.143 11.9132L13.0699 11.8418L9.06993 7.92852L9 7.8601L8.93007 7.92852L4.93007 11.8418Z" fill="#FFFFFF" stroke="#FFFFFF" stroke-width="0.2"/><rect x="1" y="4" width="16" height="1.5" fill="#FFFFFF"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2 1.5H16C16.2761 1.5 16.5 1.72386 16.5 2V14C16.5 14.2761 16.2761 14.5 16 14.5H14V16H16C17.1046 16 18 15.1046 18 14V2C18 0.895431 17.1046 0 16 0H2C0.895431 0 0 0.895431 0 2V14C0 15.1046 0.89543 16 2 16H4V14.5H2C1.72386 14.5 1.5 14.2761 1.5 14V2C1.5 1.72386 1.72386 1.5 2 1.5Z" fill="#FFFFFF"/></svg>',help_center:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" overflow="visible" preserveAspectRatio="none" viewBox="0 0 514 514"><g transform="translate(1, 1)"><path d="M256 340c-15.464 0-28 12.536-28 28s12.536 28 28 28 28-12.536 28-28-12.536-28-28-28zm7.67-24h-16c-6.627 0-12-5.373-12-12v-.381c0-70.343 77.44-63.619 77.44-107.408 0-20.016-17.761-40.211-57.44-40.211-29.144 0-44.265 9.649-59.211 28.692-3.908 4.98-11.054 5.995-16.248 2.376l-13.134-9.15c-5.625-3.919-6.86-11.771-2.645-17.177C185.658 133.514 210.842 116 255.67 116c52.32 0 97.44 29.751 97.44 80.211 0 67.414-77.44 63.849-77.44 107.408V304c0 6.627-5.373 12-12 12zM256 40c118.621 0 216 96.075 216 216 0 119.291-96.61 216-216 216-119.244 0-216-96.562-216-216 0-119.203 96.602-216 216-216m0-32C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8z" vector-effect="non-scaling-stroke" fill="#454560" /></g></svg>',navbar:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100"  width="23" height="17" viewBox="0 0 23 17" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.25 2.5C0.559644 2.5 0 1.94036 0 1.25C0 0.559644 0.559645 0 1.25 0H21.25C21.9404 0 22.5 0.559644 22.5 1.25C22.5 1.94036 21.9404 2.5 21.25 2.5H1.25ZM0 8.5C0 9.19036 0.559645 9.75 1.25 9.75H21.25C21.9404 9.75 22.5 9.19036 22.5 8.5C22.5 7.80964 21.9404 7.25 21.25 7.25H1.25C0.559644 7.25 0 7.80964 0 8.5ZM0 15.75C0 16.4404 0.559645 17 1.25 17H21.25C21.9404 17 22.5 16.4404 22.5 15.75C22.5 15.0596 21.9404 14.5 21.25 14.5H1.25C0.559644 14.5 0 15.0596 0 15.75Z" fill="#454560"></path></svg>',filter_mplayer:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" width="32" height="32" viewBox="0 0 32 32" fill="none"><rect class="mgPlayerJSPreview_icon-bg" width="32" height="32" rx="4" /><path d="M6.57328 10.28H7.99995C8.20163 10.8289 8.61116 11.2764 9.14005 11.5259C9.66895 11.7753 10.2748 11.8068 10.8266 11.6133C11.1338 11.5038 11.4128 11.3273 11.6434 11.0967C11.874 10.8661 12.0504 10.5871 12.1599 10.28H25.3733C25.5726 10.28 25.7639 10.2018 25.906 10.0621C26.0482 9.92244 26.1298 9.73254 26.1333 9.53329C26.1299 9.3328 26.0487 9.14148 25.9069 8.99968C25.7651 8.85789 25.5738 8.77672 25.3733 8.77329H12.2266C12.131 8.48997 11.9796 8.22867 11.7813 8.0048C11.5831 7.78092 11.3421 7.599 11.0724 7.46976C10.8027 7.34053 10.5099 7.26659 10.2112 7.25231C9.91256 7.23803 9.61404 7.2837 9.33328 7.38663C9.02836 7.50015 8.75146 7.678 8.52139 7.90807C8.29132 8.13814 8.11347 8.41504 7.99995 8.71996H6.57328C6.37404 8.72346 6.18414 8.80507 6.04448 8.94722C5.90482 9.08937 5.82658 9.28068 5.82661 9.47996C5.81928 9.58241 5.83316 9.68526 5.86738 9.7821C5.9016 9.87894 5.95544 9.96768 6.02552 10.0428C6.0956 10.1178 6.18042 10.1777 6.27467 10.2185C6.36892 10.2593 6.47057 10.2802 6.57328 10.28ZM10.1066 8.77329C10.3071 8.77672 10.4984 8.85789 10.6402 8.99968C10.782 9.14148 10.8632 9.3328 10.8666 9.53329C10.8631 9.73254 10.7815 9.92244 10.6394 10.0621C10.4972 10.2018 10.3059 10.28 10.1066 10.28C10.0063 10.2835 9.90637 10.2669 9.81268 10.231C9.71899 10.195 9.6335 10.1406 9.56132 10.0709C9.48913 10.0012 9.43174 9.9177 9.39256 9.82533C9.35338 9.73295 9.33322 9.63363 9.33328 9.53329C9.33327 9.43236 9.35336 9.33243 9.39238 9.23934C9.43141 9.14625 9.48858 9.06187 9.56057 8.99112C9.63256 8.92037 9.71793 8.86467 9.81168 8.82727C9.90543 8.78987 10.0057 8.77152 10.1066 8.77329ZM25.4266 15.2533H23.9999C23.8012 14.7022 23.392 14.2524 22.8622 14.0025C22.3323 13.7525 21.725 13.7229 21.1733 13.92C20.8652 14.0278 20.5853 14.2037 20.3545 14.4345C20.1237 14.6653 19.9478 14.9452 19.8399 15.2533H6.57328C6.37525 15.2533 6.18534 15.332 6.04531 15.472C5.90528 15.612 5.82661 15.8019 5.82661 16C5.82661 16.198 5.90528 16.3879 6.04531 16.5279C6.18534 16.668 6.37525 16.7466 6.57328 16.7466H19.7866C19.937 17.1859 20.2209 17.5672 20.5986 17.8371C20.9763 18.1071 21.429 18.2522 21.8933 18.2522C22.3576 18.2522 22.8102 18.1071 23.188 17.8371C23.5657 17.5672 23.8496 17.1859 23.9999 16.7466H25.4266C25.6246 16.7466 25.8146 16.668 25.9546 16.5279C26.0946 16.3879 26.1733 16.198 26.1733 16C26.1733 15.8019 26.0946 15.612 25.9546 15.472C25.8146 15.332 25.6246 15.2533 25.4266 15.2533ZM21.8933 16.7466C21.6953 16.7466 21.5053 16.668 21.3653 16.5279C21.2253 16.3879 21.1466 16.198 21.1466 16C21.1466 15.8019 21.2253 15.612 21.3653 15.472C21.5053 15.332 21.6953 15.2533 21.8933 15.2533C22.0913 15.2533 22.2812 15.332 22.4213 15.472C22.5613 15.612 22.6399 15.8019 22.6399 16C22.6399 16.198 22.5613 16.3879 22.4213 16.5279C22.2812 16.668 22.0913 16.7466 21.8933 16.7466ZM25.4266 21.72H15.2266C15.0728 21.2822 14.7869 20.9031 14.4083 20.6348C14.0298 20.3666 13.5772 20.2225 13.1133 20.2225C12.6493 20.2225 12.1968 20.3666 11.8182 20.6348C11.4397 20.9031 11.1538 21.2822 10.9999 21.72H6.57328C6.37525 21.72 6.18534 21.7986 6.04531 21.9387C5.90528 22.0787 5.82661 22.2686 5.82661 22.4666C5.82661 22.6647 5.90528 22.8546 6.04531 22.9946C6.18534 23.1346 6.37525 23.2133 6.57328 23.2133H10.9999C11.1436 23.6591 11.4249 24.0478 11.8035 24.3235C12.182 24.5992 12.6383 24.7478 13.1066 24.7478C13.5749 24.7478 14.0312 24.5992 14.4098 24.3235C14.7883 24.0478 15.0696 23.6591 15.2133 23.2133H25.4266C25.6246 23.2133 25.8146 23.1346 25.9546 22.9946C26.0946 22.8546 26.1733 22.6647 26.1733 22.4666C26.1733 22.2686 26.0946 22.0787 25.9546 21.9387C25.8146 21.7986 25.6246 21.72 25.4266 21.72ZM13.1066 23.2133C12.9086 23.2133 12.7187 23.1346 12.5786 22.9946C12.4386 22.8546 12.3599 22.6647 12.3599 22.4666C12.3599 22.2686 12.4386 22.0787 12.5786 21.9387C12.7187 21.7986 12.9086 21.72 13.1066 21.72C13.3059 21.7199 13.4972 21.7982 13.6394 21.9378C13.7815 22.0775 13.8631 22.2674 13.8666 22.4666C13.8631 22.6659 13.7815 22.8558 13.6394 22.9954C13.4972 23.1351 13.3059 23.2133 13.1066 23.2133Z" fill="#555555"/></svg>',replay_guide:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" viewBox="0 0 423.73 390"><g id="Layer_2" data-name="Layer 2"><g id="transport"><path d="M228.73,0C126.33,0,42.11,79.35,34.32,179.79H8.4a8.38,8.38,0,0,0-7,13l37.91,56.86a8.38,8.38,0,0,0,14,0l37.91-56.86a8.38,8.38,0,0,0-7-13H54.4C62.14,90.39,137.37,20,228.73,20c96.5,0,175,78.5,175,175s-78.5,175-175,175a174.75,174.75,0,0,1-133.9-62.32,10,10,0,1,0-15.3,12.88A194.71,194.71,0,0,0,228.73,390c107.53,0,195-87.48,195-195S336.26,0,228.73,0Z" /><path d="M205.82,259.06,292,201.58a8.38,8.38,0,0,0,0-14l-86.22-57.48a8.38,8.38,0,0,0-13,7v115A8.38,8.38,0,0,0,205.82,259.06Z" /></g></g></svg>',resume_guide:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" overflow="visible" preserveAspectRatio="none" viewBox="0 0 9.890675 10.000010000000001" width="9.890675" height="10.000010000000001"><g transform="translate(0, 0)"><g transform="translate(0, 0) rotate(0)"><path d="M0.81549,0c-0.45038,0 -0.81549,0.36511 -0.81549,0.81549v8.36903c0,0.45038 0.36511,0.81549 0.81549,0.81549v0c0.45038,0 0.81549,-0.36511 0.81549,-0.81549v-8.36903c0,-0.45038 -0.36511,-0.81549 -0.81549,-0.81549zM4.82496,1.06482c-0.86323,-0.58808 -1.56302,-0.21807 -1.56302,0.82644v6.21747c0,1.04452 0.69979,1.41453 1.56302,0.82644l4.56323,-3.10874c0.66998,-0.45643 0.66998,-1.19645 0,-1.65289z" vector-effect="non-scaling-stroke" /></g><defs><path id="path-1665396819818175" d="M0.81549,0c-0.45038,0 -0.81549,0.36511 -0.81549,0.81549v8.36903c0,0.45038 0.36511,0.81549 0.81549,0.81549v0c0.45038,0 0.81549,-0.36511 0.81549,-0.81549v-8.36903c0,-0.45038 -0.36511,-0.81549 -0.81549,-0.81549zM4.82496,1.06482c-0.86323,-0.58808 -1.56302,-0.21807 -1.56302,0.82644v6.21747c0,1.04452 0.69979,1.41453 1.56302,0.82644l4.56323,-3.10874c0.66998,-0.45643 0.66998,-1.19645 0,-1.65289z" vector-effect="non-scaling-stroke" /></defs></g></svg>',branch_head_icon:'<svg width="26px" height="19px" viewBox="0 0 26 19" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" opacity="0.5"><g id="02-branching-Steps-in-Slideshow" transform="translate(-708.000000, -287.000000)" fill="#FFFFFF" fill-rule="nonzero"><g id="Group-17" transform="translate(721.000000, 296.375000) scale(1, -1) rotate(90.000000) translate(-721.000000, -296.375000) translate(712.000000, 284.000000)"><path d="M17.9743355,3.54499151 C17.9743355,5.50285655 16.387209,7.08998302 14.429344,7.08998302 C12.4714789,7.08998302 10.8843525,5.50285655 10.8843525,3.54499151 C10.8843525,1.58714746 12.4714885,-1.50990331e-14 14.429344,-1.50990331e-14 C16.3871994,-1.50990331e-14 17.9743355,1.58714746 17.9743355,3.54499151 Z M16.7519246,3.54499151 C16.7519246,2.26226437 15.7120786,1.22241087 14.429344,1.22241087 C13.1466093,1.22241087 12.1067633,2.26226437 12.1067633,3.54499151 C12.1067633,4.82773767 13.1465978,5.86757216 14.429344,5.86757216 C15.7120901,5.86757216 16.7519246,4.82773767 16.7519246,3.54499151 Z" id="Stroke-1"></path><polygon id="Stroke-3" points="2.93378608 6.47877759 4.15619694 6.47877759 4.15619694 18.2444822 2.93378608 18.2444822"></polygon><path d="M7.08998302,3.54499151 C7.08998302,5.50285655 5.50285655,7.08998302 3.54499151,7.08998302 C1.58712647,7.08998302 -1.03828057e-12,5.50285655 -1.03828057e-12,3.54499151 C-1.03828057e-12,1.58714746 1.58713604,-1.50990331e-14 3.54499151,-1.50990331e-14 C5.50284698,-1.50990331e-14 7.08998302,1.58714746 7.08998302,3.54499151 Z M5.86757216,3.54499151 C5.86757216,2.26226437 4.82772614,1.22241087 3.54499151,1.22241087 C2.26225689,1.22241087 1.22241087,2.26226437 1.22241087,3.54499151 C1.22241087,4.82773767 2.26224535,5.86757216 3.54499151,5.86757216 C4.82773767,5.86757216 5.86757216,4.82773767 5.86757216,3.54499151 Z" id="Stroke-5"></path><path d="M7.08998302,21.1782835 C7.08998302,23.1361276 5.50284698,24.723275 3.54499151,24.723275 C1.58713604,24.723275 -1.03828057e-12,23.1361276 -1.03828057e-12,21.1782835 C-1.03828057e-12,19.2204185 1.58712647,17.633292 3.54499151,17.633292 C5.50285655,17.633292 7.08998302,19.2204185 7.08998302,21.1782835 Z M5.86757216,21.1782835 C5.86757216,19.8955374 4.82773767,18.8557029 3.54499151,18.8557029 C2.26224535,18.8557029 1.22241087,19.8955374 1.22241087,21.1782835 C1.22241087,22.4610107 2.26225689,23.5008642 3.54499151,23.5008642 C4.82772614,23.5008642 5.86757216,22.4610107 5.86757216,21.1782835 Z" id="Stroke-7"></path><path d="M13.8181385,8.63838031 L13.8181385,6.47877759 L15.0405494,6.47877759 L15.0405494,8.63838031 C15.0405494,10.5962244 13.4534134,12.1833718 11.4955579,12.1833718 L6.4787837,12.1833718 L6.4787837,10.960961 L11.4955579,10.960961 C12.7782925,10.960961 13.8181385,9.92110745 13.8181385,8.63838031 Z M6.47877759,10.960961 L6.47877759,12.1833718 C5.19603143,12.1833718 4.15619694,13.2232063 4.15619694,14.5059525 L2.93378608,14.5059525 C2.93378608,12.5480874 4.52091255,10.960961 6.47877759,10.960961 Z" id="Combined-Shape"></path></g></g></g></svg>',down_arrow_icon:'<svg width="10px" height="10px" version="1.1" class="Layer_1" x="0px" y="0px" viewBox="0 0 386.257 386.257" style="enable-background:new 0 0 386.257 386.257;" xml:space="preserve"><polygon points="0,96.879 193.129,289.379 386.257,96.879 "></polygon></svg>',captureEvents:'<svg version="1.2" overflow="visible" preserveAspectRatio="none" viewBox="0 0 514 514" width="14" height="14"><g transform="translate(1, 1)"><path d="M432 352H320c-26.5 0-48-21.5-48-48s21.5-48 48-48h96s96-107 96-160-43-96-96-96-96 43-96 96c0 34.6 40.9 92.2 69.3 128H320c-44.1 0-80 35.9-80 80s35.9 80 80 80h112c26.5 0 48 21.5 48 48s-21.5 48-48 48H122.7c28.4-35.8 69.3-93.4 69.3-128 0-53-43-96-96-96S0 299 0 352s96 160 96 160h336c44.1 0 80-35.9 80-80s-35.9-80-80-80zM352 96c0-35.3 28.7-64 64-64s64 28.7 64 64c0 20.4-30.1 68-64 110.4-34-42.6-64-90.6-64-110.4zM32 352c0-35.3 28.7-64 64-64s64 28.7 64 64c0 20.4-30.1 68-64 110.4-34-42.6-64-90.6-64-110.4zm64-16c-21.2 0-21.1 32 0 32 21.2 0 21.1-32 0-32zM416 80c-21.2 0-21.1 32 0 32 21.2 0 21.1-32 0-32z" vector-effect="non-scaling-stroke" /></g></svg>',guide_bot_icon:'<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.7" y="0.7" width="38.6" height="38.6" rx="19.3" fill="#F8F8FB" stroke="#ACADC1" stroke-width="1.4"></rect><path d="M18.034 24.483H17.9981L17.9704 24.5059L16.2745 25.9068V24.583V24.483H16.1745H14.234C13.3191 24.483 12.5553 23.7192 12.5553 22.8043V14.234C12.5553 13.3133 13.3247 12.4745 14.234 12.4745H22.7234C23.6355 12.4745 24.4021 13.2353 24.4021 14.234V15.8511V15.9511H24.5021H25.8766H25.9766V15.8511V14.234C25.9766 12.4001 24.4765 10.9 22.6426 10.9H14.234C12.4001 10.9 10.9 12.4001 10.9 14.234V22.7234C10.9 24.5557 12.399 26.0588 14.2363 25.9766H14.7V28.8681V29.0733L14.8616 28.9468L16.7212 27.4915L18.5536 26.0574H19.2468H19.3945L19.3397 25.9203C19.1823 25.5269 19.1043 25.1353 19.1043 24.7447V24.583V24.483H19.0043H18.9234H18.034Z" fill="#ACADC1" stroke="#ACADC1" stroke-width="0.2"/><path d="M27.8168 16.7404H21.9955C20.7827 16.7404 19.8125 17.7106 19.8125 18.9234V24.7447C19.8125 25.9574 20.7827 26.9277 21.9955 26.9277H24.9061L26.1189 27.8979L27.4125 28.9489V26.9277H27.8168C29.0295 26.9277 29.9997 25.9574 29.9997 24.7447V18.9234C29.9189 17.7106 28.9487 16.7404 27.8168 16.7404Z" fill="#ACADC1"/></svg>',guide_onboarding:'<svg width="40" height="40" viewBox="0 0 40 40" fill="none"><rect x="0.7" y="0.7" width="38.6" height="38.6" rx="19.3" fill="#F8F8FB" stroke="#ACADC1" stroke-width="1.4" /><path d="M28.1938 12.9166C27.8336 12.7648 26.0037 11.9831 24.0812 12.0003C21.9125 12.0453 20.4312 12.8737 20 13.1451C19.5688 12.8737 18.0875 12.0453 15.9187 12.0024C14.0544 11.9684 12.1531 12.7723 11.8063 12.9187C11.325 13.1237 11 13.6593 11 14.2592V25.9072C11 26.6535 11.6312 27.2241 12.2887 26.9942C13.3156 26.6306 14.2787 26.4916 15.1519 26.4916C17.9612 26.4916 19.8331 27.9306 19.8575 27.9492C19.9461 28.0177 20.0557 28.0162 20.1417 27.9492C20.1662 27.9301 22.0379 26.4916 24.8473 26.4916C25.7204 26.4916 26.6836 26.6306 27.7104 26.9942C28.3188 27.2284 29 26.6499 29 25.9072V14.2592C29 13.6593 28.675 13.1237 28.1938 12.9166ZM19.5 26.4428C18.5981 25.9605 17.0963 25.348 15.1525 25.348C14.0938 25.348 13.0306 25.5343 12 25.9063V14.2592C12 14.1386 12.0629 14.0281 12.1538 13.9899C13.4688 13.4379 14.75 13.1451 15.9062 13.1451C17.825 13.1808 19.1313 13.9021 19.5 14.1378V26.4428ZM28 25.9072C26.9694 25.5352 25.9069 25.3489 24.8475 25.3489C22.9031 25.3489 21.4012 25.9613 20.5 26.4437V14.1378C20.8687 13.9021 22.175 13.1808 24.0938 13.1451C25.2463 13.1451 26.5325 13.4375 27.8444 13.9907C27.8813 14.0306 28 14.1378 28 14.2592V25.9072Z" fill="#ACADC1" stroke-width="0.2" /></svg>',guide_beacon:'<svg width="12px" height="12px" viewBox="0 0 12 12" version="1.1"  ><g class="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g class="02-Guide-list-along-with-beacon_sample-2" transform="translate(-407.000000, -242.000000)"><g class="Group" transform="translate(408.000000, 243.000000)"><circle class="combined-shape" fill="#9476c9" cx="5" cy="5" r="4.375"></circle><circle class="Oval" stroke="#FFFFFF" stroke-width="2" cx="5" cy="5" r="5"></circle></g></g></g></svg>',play_teachme:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" viewBox="0 0 17 17" version="1.1"><g fill="#005BF0"><path d="M2 3C2 3.39556 2.1173 3.78224 2.33706 4.11114C2.55683 4.44004 2.86918 4.69638 3.23463 4.84776C3.60009 4.99914 4.00222 5.03874 4.39018 4.96157C4.77814 4.8844 5.13451 4.69392 5.41421 4.41421C5.69392 4.13451 5.8844 3.77814 5.96157 3.39018C6.03874 3.00222 5.99914 2.60009 5.84776 2.23463C5.69638 1.86918 5.44004 1.55683 5.11114 1.33706C4.78225 1.1173 4.39556 1 4 1C3.46971 1.00045 2.96126 1.2113 2.58628 1.58628C2.21131 1.96125 2.00045 2.46971 2 3ZM5.15541 3C5.15541 3.22852 5.08764 3.4519 4.96069 3.64191C4.83373 3.83191 4.65328 3.98001 4.44216 4.06746C4.23103 4.15491 3.99872 4.17778 3.77459 4.13321C3.55046 4.08863 3.34459 3.97858 3.18301 3.817C3.02142 3.65541 2.91138 3.44954 2.8668 3.22541C2.82222 3.00128 2.8451 2.76897 2.93255 2.55785C3.02 2.34672 3.16809 2.16627 3.35809 2.03931C3.5481 1.91236 3.77148 1.84459 4 1.84459C4.30629 1.84504 4.59992 1.96692 4.8165 2.1835C5.03308 2.40008 5.15496 2.69371 5.15541 3Z" fill="#005BF0" /><path d="M2 3C2 3.39556 2.1173 3.78224 2.33706 4.11114C2.55683 4.44004 2.86918 4.69638 3.23463 4.84776C3.60009 4.99914 4.00222 5.03874 4.39018 4.96157C4.77814 4.8844 5.13451 4.69392 5.41421 4.41421C5.69392 4.13451 5.8844 3.77814 5.96157 3.39018C6.03874 3.00222 5.99914 2.60009 5.84776 2.23463C5.69638 1.86918 5.44004 1.55683 5.11114 1.33706C4.78225 1.1173 4.39556 1 4 1C3.46971 1.00045 2.96126 1.2113 2.58628 1.58628C2.21131 1.96125 2.00045 2.46971 2 3ZM5.15541 3C5.15541 3.22852 5.08764 3.4519 4.96069 3.64191C4.83373 3.83191 4.65328 3.98001 4.44216 4.06746C4.23103 4.15491 3.99872 4.17778 3.77459 4.13321C3.55046 4.08863 3.34459 3.97858 3.18301 3.817C3.02142 3.65541 2.91138 3.44954 2.8668 3.22541C2.82222 3.00128 2.8451 2.76897 2.93255 2.55785C3.02 2.34672 3.16809 2.16627 3.35809 2.03931C3.5481 1.91236 3.77148 1.84459 4 1.84459C4.30629 1.84504 4.59992 1.96692 4.8165 2.1835C5.03308 2.40008 5.15496 2.69371 5.15541 3Z" stroke="#005BF0" stroke-width="0.2" /><path d="M1.35428 9.68552C1.37787 9.91784 1.45201 10.1407 1.57056 10.3356C1.6891 10.5306 1.84865 10.692 2.03598 10.8066L2.58986 15.214C2.61253 15.4302 2.70756 15.6298 2.85684 15.7748C3.00613 15.9197 3.19924 15.9999 3.39938 16H4.31968C4.52004 15.9998 4.71333 15.9195 4.86265 15.7742C5.01196 15.6289 5.10686 15.4289 5.12919 15.2124L5.40187 12.5115L5.94439 8.00227L6.55222 8.5474C6.72459 8.70216 6.94046 8.78807 7.16396 8.79087C7.38746 8.79368 7.60512 8.7132 7.7807 8.56284L9.61277 6.99232C9.80497 6.83121 9.93637 6.59922 9.98213 6.3401C10.0279 6.08096 9.98497 5.81257 9.8613 5.5855C9.78924 5.45726 9.69293 5.34708 9.57884 5.26224C9.46475 5.17739 9.33541 5.11979 9.19933 5.09324C9.06331 5.06668 8.9236 5.07178 8.78947 5.10818C8.65534 5.14458 8.52983 5.21147 8.42121 5.30444L7.18847 6.36072L5.94439 5.24421C5.7693 5.08697 5.54943 5.00072 5.32234 5.00022H4.75426C4.69118 4.99808 4.62849 5.01156 4.57091 5.03966C4.51334 5.06775 4.46239 5.10971 4.42193 5.16237L3.85385 5.92523L3.29997 5.17009C3.26139 5.11692 3.21218 5.07399 3.15608 5.04455C3.09998 5.01512 3.03845 4.99996 2.97616 5.00022H2.54016C2.32264 5.00034 2.10761 5.05053 1.90922 5.14749C1.71082 5.24445 1.53355 5.38598 1.38907 5.56278C1.24458 5.73958 1.13616 5.94763 1.07093 6.17326C1.00569 6.39889 0.985132 6.63697 1.01059 6.87187L1.35428 9.68552ZM1.92237 6.07503C1.99938 5.97815 2.09467 5.90043 2.20176 5.84714C2.30885 5.79385 2.42523 5.76623 2.543 5.76617H2.83556L3.47181 6.62942C3.5185 6.69314 3.5778 6.74456 3.64529 6.7799C3.71279 6.81531 3.78674 6.83367 3.86166 6.83367C3.93658 6.83367 4.01053 6.81531 4.07803 6.7799C4.14552 6.74456 4.20481 6.69314 4.25151 6.62942L4.88918 5.76463H5.32376C5.38599 5.76425 5.44635 5.78777 5.49419 5.83103L6.96408 7.15447C7.02725 7.20989 7.10594 7.24009 7.18705 7.24009C7.26822 7.24009 7.34691 7.20989 7.41003 7.15447L8.86858 5.90516C8.91592 5.86468 8.97452 5.8429 9.03474 5.84339C9.08098 5.84343 9.12637 5.85638 9.16667 5.88099C9.20696 5.90559 9.24078 5.94103 9.26482 5.98392C9.29753 6.04987 9.307 6.12649 9.29159 6.19949C9.27618 6.27251 9.23689 6.33694 9.18103 6.38079L7.34044 7.95594C7.29236 7.99661 7.23313 8.01874 7.17217 8.01874C7.1112 8.01874 7.05198 7.99661 7.00385 7.95594L5.90179 6.96607C5.85291 6.9222 5.79413 6.89332 5.73154 6.88251C5.66895 6.8717 5.60483 6.87925 5.54585 6.90447C5.48686 6.9297 5.43516 6.97162 5.39611 7.0259C5.35705 7.08018 5.33207 7.14481 5.32376 7.21315L4.69177 12.4204L4.42477 15.1275C4.42198 15.1553 4.40989 15.1811 4.39077 15.1999C4.37166 15.2187 4.34686 15.2292 4.3211 15.2294H3.39938C3.37244 15.2287 3.34671 15.2171 3.32726 15.1968C3.30782 15.1765 3.29605 15.149 3.29429 15.1198L2.71342 10.4947C2.70455 10.4256 2.67861 10.3603 2.63835 10.3059C2.59808 10.2515 2.545 10.21 2.48477 10.1859C2.36972 10.1404 2.26874 10.0608 2.19339 9.95593C2.11804 9.85104 2.07137 9.72521 2.05871 9.59286L1.70934 6.77767C1.69619 6.65064 1.70827 6.52206 1.74478 6.40057C1.78129 6.27909 1.84136 6.16755 1.92095 6.07348L1.92237 6.07503Z" fill="#005BF0" /><path d="M1.35428 9.68552C1.37787 9.91784 1.45201 10.1407 1.57056 10.3356C1.6891 10.5306 1.84865 10.692 2.03598 10.8066L2.58986 15.214C2.61253 15.4302 2.70756 15.6298 2.85684 15.7748C3.00613 15.9197 3.19924 15.9999 3.39938 16H4.31968C4.52004 15.9998 4.71333 15.9195 4.86265 15.7742C5.01196 15.6289 5.10686 15.4289 5.12919 15.2124L5.40187 12.5115L5.94439 8.00227L6.55222 8.5474C6.72459 8.70216 6.94046 8.78807 7.16396 8.79087C7.38746 8.79368 7.60512 8.7132 7.7807 8.56284L9.61277 6.99232C9.80497 6.83121 9.93637 6.59922 9.98213 6.3401C10.0279 6.08096 9.98497 5.81257 9.8613 5.5855C9.78924 5.45726 9.69293 5.34708 9.57884 5.26224C9.46475 5.17739 9.33541 5.11979 9.19933 5.09324C9.06331 5.06668 8.9236 5.07178 8.78947 5.10818C8.65534 5.14458 8.52983 5.21147 8.42121 5.30444L7.18847 6.36072L5.94439 5.24421C5.7693 5.08697 5.54943 5.00072 5.32234 5.00022H4.75426C4.69118 4.99808 4.62849 5.01156 4.57091 5.03966C4.51334 5.06775 4.46239 5.10971 4.42193 5.16237L3.85385 5.92523L3.29997 5.17009C3.26139 5.11692 3.21218 5.07399 3.15608 5.04455C3.09998 5.01512 3.03845 4.99996 2.97616 5.00022H2.54016C2.32264 5.00034 2.10761 5.05053 1.90922 5.14749C1.71082 5.24445 1.53355 5.38598 1.38907 5.56278C1.24458 5.73958 1.13616 5.94763 1.07093 6.17326C1.00569 6.39889 0.985132 6.63697 1.01059 6.87187L1.35428 9.68552ZM1.92237 6.07503C1.99938 5.97815 2.09467 5.90043 2.20176 5.84714C2.30885 5.79385 2.42523 5.76623 2.543 5.76617H2.83556L3.47181 6.62942C3.5185 6.69314 3.5778 6.74456 3.64529 6.7799C3.71279 6.81531 3.78674 6.83367 3.86166 6.83367C3.93658 6.83367 4.01053 6.81531 4.07803 6.7799C4.14552 6.74456 4.20481 6.69314 4.25151 6.62942L4.88918 5.76463H5.32376C5.38599 5.76425 5.44635 5.78777 5.49419 5.83103L6.96408 7.15447C7.02725 7.20989 7.10594 7.24009 7.18705 7.24009C7.26822 7.24009 7.34691 7.20989 7.41003 7.15447L8.86858 5.90516C8.91592 5.86468 8.97452 5.8429 9.03474 5.84339C9.08098 5.84343 9.12637 5.85638 9.16667 5.88099C9.20696 5.90559 9.24078 5.94103 9.26482 5.98392C9.29753 6.04987 9.307 6.12649 9.29159 6.19949C9.27618 6.27251 9.23689 6.33694 9.18103 6.38079L7.34044 7.95594C7.29236 7.99661 7.23313 8.01874 7.17217 8.01874C7.1112 8.01874 7.05198 7.99661 7.00385 7.95594L5.90179 6.96607C5.85291 6.9222 5.79413 6.89332 5.73154 6.88251C5.66895 6.8717 5.60483 6.87925 5.54585 6.90447C5.48686 6.9297 5.43516 6.97162 5.39611 7.0259C5.35705 7.08018 5.33207 7.14481 5.32376 7.21315L4.69177 12.4204L4.42477 15.1275C4.42198 15.1553 4.40989 15.1811 4.39077 15.1999C4.37166 15.2187 4.34686 15.2292 4.3211 15.2294H3.39938C3.37244 15.2287 3.34671 15.2171 3.32726 15.1968C3.30782 15.1765 3.29605 15.149 3.29429 15.1198L2.71342 10.4947C2.70455 10.4256 2.67861 10.3603 2.63835 10.3059C2.59808 10.2515 2.545 10.21 2.48477 10.1859C2.36972 10.1404 2.26874 10.0608 2.19339 9.95593C2.11804 9.85104 2.07137 9.72521 2.05871 9.59286L1.70934 6.77767C1.69619 6.65064 1.70827 6.52206 1.74478 6.40057C1.78129 6.27909 1.84136 6.16755 1.92095 6.07348L1.92237 6.07503Z" stroke="#005BF0" stroke-width="0.2" /><path d="M7 2.35418V4.9043C7 4.99823 7.03947 5.08832 7.10976 5.15474C7.18005 5.22116 7.27537 5.25848 7.37475 5.25848C7.47413 5.25848 7.56945 5.22116 7.63974 5.15474C7.71003 5.08832 7.7495 4.99823 7.7495 4.9043V2.70695H15.2565V9.6617H7.37475C7.27537 9.6617 7.18005 9.699 7.10976 9.76543C7.03947 9.83186 7 9.9219 7 10.0159C7 10.1098 7.03947 10.1999 7.10976 10.2663C7.18005 10.3328 7.27537 10.3701 7.37475 10.3701H11.1223V12.7275H8.78081C8.68116 12.7275 8.58339 12.7532 8.49806 12.8019C8.41272 12.8506 8.34305 12.9204 8.29664 13.0038L7.46169 14.48C7.43865 14.5211 7.42444 14.5661 7.41978 14.6124C7.41517 14.6587 7.42022 14.7055 7.43471 14.7499C7.4492 14.7944 7.4728 14.8357 7.50416 14.8716C7.53553 14.9074 7.57412 14.9371 7.61759 14.9589C7.66111 14.9806 7.70869 14.9941 7.75772 14.9984C7.80674 15.0028 7.85615 14.998 7.90323 14.9844C7.95026 14.9707 7.994 14.9484 8.03192 14.9187C8.06984 14.889 8.10121 14.8526 8.12425 14.8115L8.89474 13.4373H14.1038L14.8742 14.8115C14.8973 14.8526 14.9287 14.889 14.9666 14.9187C15.0045 14.9484 15.0482 14.9707 15.0953 14.9844C15.1423 14.998 15.1918 15.0028 15.2408 14.9984C15.2898 14.9941 15.3374 14.9806 15.3809 14.9589C15.4244 14.9371 15.463 14.9074 15.4943 14.8716C15.5257 14.8357 15.5493 14.7944 15.5638 14.7499C15.5783 14.7055 15.5833 14.6587 15.5787 14.6124C15.5741 14.5661 15.5598 14.5211 15.5368 14.48L14.7094 13.0038C14.6629 12.9204 14.5933 12.8506 14.508 12.8019C14.4227 12.7532 14.3248 12.7275 14.2252 12.7275H11.8777V10.3701H15.6252C15.7246 10.3701 15.82 10.3328 15.8902 10.2663C15.9605 10.1999 16 10.1098 16 10.0159V2.35418C16 2.26025 15.9605 2.17016 15.8902 2.10374C15.82 2.03732 15.7246 2 15.6252 2H7.37475C7.27537 2 7.18005 2.03732 7.10976 2.10374C7.03947 2.17016 7 2.26025 7 2.35418Z" fill="#005BF0" /><path d="M7 2.35418V4.9043C7 4.99823 7.03947 5.08832 7.10976 5.15474C7.18005 5.22116 7.27537 5.25848 7.37475 5.25848C7.47413 5.25848 7.56945 5.22116 7.63974 5.15474C7.71003 5.08832 7.7495 4.99823 7.7495 4.9043V2.70695H15.2565V9.6617H7.37475C7.27537 9.6617 7.18005 9.699 7.10976 9.76543C7.03947 9.83186 7 9.9219 7 10.0159C7 10.1098 7.03947 10.1999 7.10976 10.2663C7.18005 10.3328 7.27537 10.3701 7.37475 10.3701H11.1223V12.7275H8.78081C8.68116 12.7275 8.58339 12.7532 8.49806 12.8019C8.41272 12.8506 8.34305 12.9204 8.29664 13.0038L7.46169 14.48C7.43865 14.5211 7.42444 14.5661 7.41978 14.6124C7.41517 14.6587 7.42022 14.7055 7.43471 14.7499C7.4492 14.7944 7.4728 14.8357 7.50416 14.8716C7.53553 14.9074 7.57412 14.9371 7.61759 14.9589C7.66111 14.9806 7.70869 14.9941 7.75772 14.9984C7.80674 15.0028 7.85615 14.998 7.90323 14.9844C7.95026 14.9707 7.994 14.9484 8.03192 14.9187C8.06984 14.889 8.10121 14.8526 8.12425 14.8115L8.89474 13.4373H14.1038L14.8742 14.8115C14.8973 14.8526 14.9287 14.889 14.9666 14.9187C15.0045 14.9484 15.0482 14.9707 15.0953 14.9844C15.1423 14.998 15.1918 15.0028 15.2408 14.9984C15.2898 14.9941 15.3374 14.9806 15.3809 14.9589C15.4244 14.9371 15.463 14.9074 15.4943 14.8716C15.5257 14.8357 15.5493 14.7944 15.5638 14.7499C15.5783 14.7055 15.5833 14.6587 15.5787 14.6124C15.5741 14.5661 15.5598 14.5211 15.5368 14.48L14.7094 13.0038C14.6629 12.9204 14.5933 12.8506 14.508 12.8019C14.4227 12.7532 14.3248 12.7275 14.2252 12.7275H11.8777V10.3701H15.6252C15.7246 10.3701 15.82 10.3328 15.8902 10.2663C15.9605 10.1999 16 10.1098 16 10.0159V2.35418C16 2.26025 15.9605 2.17016 15.8902 2.10374C15.82 2.03732 15.7246 2 15.6252 2H7.37475C7.27537 2 7.18005 2.03732 7.10976 2.10374C7.03947 2.17016 7 2.26025 7 2.35418Z" stroke="#005BF0" stroke-width="0.2" /></g></svg>',play_testme:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" viewBox="0 0 20 26" fill="none"><path d="M1.54651 21.1221V5.72034H3.75581V6.61319C3.75581 7.05962 4.08721 7.39444 4.52907 7.39444H12.0407C12.4826 7.39444 12.814 7.05962 12.814 6.61319V5.72034H15.0233V12.0819V14.3141H16.5698V12.64V5.05069C16.5698 4.60426 16.2384 4.26944 15.7965 4.26944H12.814V3.37659C12.814 2.93016 12.4826 2.59534 12.0407 2.59534H11.157C10.936 0.921228 9.5 -0.194843 7.84302 0.0283712C6.51744 0.139978 5.52326 1.25605 5.30232 2.59534H4.52907C4.08721 2.59534 3.75581 2.93016 3.75581 3.37659V4.26944H0.773256C0.331395 4.26944 0 4.60426 0 5.05069V21.9034C0 22.3498 0.331395 22.6846 0.773256 22.6846H9.38953V21.1221H6.73837H1.54651ZM8.28488 1.47926C8.94767 1.47926 9.5 1.92569 9.72093 2.59534H6.84884C6.9593 1.92569 7.62209 1.47926 8.28488 1.47926ZM5.19186 4.15784H11.2674V5.83194H5.19186V4.15784Z" fill="#005BF0" /><circle cx="12.5" cy="18.5" r="6.7" fill="white" stroke="#005BF0" stroke-width="1.6" /><path d="M11.6804 20.9037C11.6136 20.9655 11.5224 21 11.4277 21C11.333 21 11.2419 20.9655 11.1751 20.9037L9.15707 19.047C8.94764 18.8544 8.94764 18.542 9.15707 18.3497L9.40975 18.1172C9.61924 17.9246 9.95844 17.9246 10.1679 18.1172L11.4277 19.2762L14.8321 16.1445C15.0416 15.9518 15.3812 15.9518 15.5902 16.1445L15.8429 16.377C16.0524 16.5696 16.0524 16.882 15.8429 17.0743L11.6804 20.9037Z" fill="#005BF0" /></svg>',play_showme:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100"  viewBox="0 0 20 20"><path class="mgPlayerJSPreview_showme-path" fill="#005BF0" fill-rule="nonzero" d="M4.305 7.133a3.81 3.81 0 1 1 .095 7.619 3.81 3.81 0 0 1-.095-7.619zm0 6.667v.029a2.857 2.857 0 0 0 2.857-2.886A2.857 2.857 0 1 0 4.305 13.8zm11.39-6.667a3.857 3.857 0 0 1 3.81 3.81 3.81 3.81 0 1 1-3.81-3.81zm0 6.667v.029a2.857 2.857 0 0 0 2.857-2.886 2.857 2.857 0 1 0-2.857 2.857zM10 8.638a.838.838 0 1 1 0-1.676.838.838 0 0 1 0 1.676zm3.429-1.152A4.162 4.162 0 0 0 11.505 11c0 .512.098 1.02.285 1.495a2.181 2.181 0 0 0-3.58 0 4.143 4.143 0 0 0-1.639-5.01h1.277a2.181 2.181 0 0 1 4.304 0h1.277zM10 8.97c.61-.05 1.078-.56 1.076-1.171v-.095a.162.162 0 0 1 0-.067v-.076-.076a1.171 1.171 0 0 0-2.247 0v.152a.162.162 0 0 1 0 .067V7.8c0 .647.524 1.171 1.171 1.171z"/></svg>',default_guide:'<svg width="40" height="40" viewBox="0 0 40 40" fill="none"><rect x="0.7" y="0.7" width="38.6" height="38.6" rx="19.3" fill="#F8F8FB" stroke="#ACADC1" stroke-width="1.4"></rect><path d="M12 27.555C12 27.555 20.838 24.372 22.606 22.606C24.374 20.838 27.555 12 27.555 12C27.555 12 18.717 15.183 16.95 16.95C15.183 18.717 12 27.555 12 27.555ZM18.364 18.364L21.192 21.192C21.899 21.899 14.829 24.727 14.829 24.727C14.829 24.727 17.657 17.657 18.364 18.364Z" fill="#ACADC1" stroke="#ACADC1" stroke-width="0" /></svg>',bell:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" width="18" height="21" viewBox="0 0 18 21" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.868 17.08H3.34796V8.44001C3.34796 6.91236 3.95481 5.44728 5.03502 4.36707C6.11523 3.28686 7.58031 2.68001 9.10796 2.68001C10.6356 2.68001 12.1007 3.28686 13.1809 4.36707C14.2611 5.44728 14.868 6.91236 14.868 8.44001V17.08ZM16.788 17.08V8.44001C16.788 6.40315 15.9788 4.44971 14.5385 3.00943C13.0983 1.56915 11.1448 0.76001 9.10796 0.76001C7.07109 0.76001 5.11766 1.56915 3.67738 3.00943C2.2371 4.44971 1.42796 6.40315 1.42796 8.44001V17.08C1.17335 17.08 0.929169 17.1812 0.749134 17.3612C0.569099 17.5412 0.467957 17.7854 0.467957 18.04C0.467957 18.2946 0.569099 18.5388 0.749134 18.7188C0.929169 18.8989 1.17335 19 1.42796 19H7.18796C7.18796 19.2521 7.23762 19.5018 7.33411 19.7348C7.4306 19.9677 7.57202 20.1794 7.75031 20.3577C7.9286 20.5359 8.14026 20.6774 8.3732 20.7739C8.60615 20.8703 8.85582 20.92 9.10796 20.92C9.3601 20.92 9.60976 20.8703 9.84271 20.7739C10.0757 20.6774 10.2873 20.5359 10.4656 20.3577C10.6439 20.1794 10.7853 19.9677 10.8818 19.7348C10.9783 19.5018 11.028 19.2521 11.028 19H16.788C17.0426 19 17.2867 18.8989 17.4668 18.7188C17.6468 18.5388 17.748 18.2946 17.748 18.04C17.748 17.7854 17.6468 17.5412 17.4668 17.3612C17.2867 17.1812 17.0426 17.08 16.788 17.08Z" fill="#555555"/></svg>',close_push:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100"  viewBox="0 0 15 15" fill="none"><path d="M15 1.51071L13.4893 0L7.5 5.98929L1.51071 0L0 1.51071L5.98929 7.5L0 13.4893L1.51071 15L7.5 9.01071L13.4893 15L15 13.4893L9.01071 7.5L15 1.51071Z" fill="#757575" /></svg>',iconTaskList:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" width="33" height="32" viewBox="0 0 33 32" fill="none"><rect x="0.5" width="32" height="32" rx="4" fill="#005BF0"/><path d="M10.6813 24.3808V10.6864H12.6546V11.4803C12.6546 11.8772 12.9506 12.1749 13.3453 12.1749H20.0546C20.4493 12.1749 20.7453 11.8772 20.7453 11.4803V10.6864H22.7187V16.3427V25.6832H23.7558C23.9459 25.6832 24.1 25.5291 24.1 25.339V16.839V10.0909C24.1 9.69401 23.804 9.39629 23.4093 9.39629H20.7453V8.60239C20.7453 8.20547 20.4493 7.90775 20.0546 7.90775H19.2653C19.0679 6.41922 17.7853 5.42688 16.3053 5.62532C15.1213 5.72458 14.2333 6.71694 14.036 7.90775H13.3453C12.9506 7.90775 12.6546 8.20547 12.6546 8.60239V9.39629H9.99063C9.59599 9.39629 9.29999 9.69401 9.29999 10.0909V25.0755C9.29999 25.4725 9.59599 25.7701 9.99063 25.7701H23.6473C23.8374 25.7701 23.9915 25.6161 23.9915 25.4259V24.3808H15.3186H10.6813ZM16.7 6.91539C17.292 6.91539 17.7853 7.31238 17.9826 7.90775H15.4173C15.516 7.31238 16.108 6.91539 16.7 6.91539ZM13.9373 9.29709H19.3639V10.7856H13.9373V9.29709Z" fill="white"/><path d="M12.4525 14.6216H20.8589V15.3904H12.4525V14.6216Z" fill="white" stroke="white" stroke-width="0.5"/><path d="M12.4525 17.7742H20.8589V18.5431H12.4525V17.7742Z" fill="white" stroke="white" stroke-width="0.5"/><path d="M12.4525 20.9265H20.8589V21.6954H12.4525V20.9265Z" fill="white" stroke="white" stroke-width="0.5"/></svg>',accessibility:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" viewBox="0 0 27 26" fill="none"><path d="M1.85718 13C1.85718 14.5759 2.16757 16.1363 2.77062 17.5922C3.37368 19.0481 4.25759 20.371 5.3719 21.4853C6.4862 22.5996 7.80907 23.4835 9.26498 24.0866C10.7209 24.6896 12.2813 25 13.8572 25C15.433 25 16.9935 24.6896 18.4494 24.0866C19.9053 23.4835 21.2282 22.5996 22.3425 21.4853C23.4568 20.371 24.3407 19.0481 24.9437 17.5922C25.5468 16.1363 25.8572 14.5759 25.8572 13C25.8572 11.4241 25.5468 9.86371 24.9437 8.4078C24.3407 6.95189 23.4568 5.62902 22.3425 4.51472C21.2282 3.40042 19.9053 2.5165 18.4494 1.91345C16.9935 1.31039 15.433 1 13.8572 1C12.2813 1 10.7209 1.31039 9.26498 1.91345C7.80907 2.5165 6.4862 3.40042 5.3719 4.51472C4.25759 5.62902 3.37368 6.95189 2.77062 8.4078C2.16757 9.86371 1.85718 11.4241 1.85718 13Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M11.1905 19L13.8572 15M13.8572 15L16.5238 19M13.8572 15V12.3333M13.8572 12.3333L17.8572 11M13.8572 12.3333L9.85718 11" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M13.8572 7.66658C14.2254 7.66658 14.5239 7.36811 14.5239 6.99992C14.5239 6.63173 14.2254 6.33325 13.8572 6.33325C13.489 6.33325 13.1906 6.63173 13.1906 6.99992C13.1906 7.36811 13.489 7.66658 13.8572 7.66658Z" fill="#555555" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',iconDownArrow:'<svg width="16" height="10" viewBox="0 0 16 10" fill="none" ><path d="M7.77408 4.13342L7.63281 3.99247L7.49155 4.13342L1.89547 9.71731L0.415655 8.2375L7.63281 1.02034L14.85 8.2375L13.3702 9.71731L7.77408 4.13342Z" fill="black" stroke="white" stroke-width="0.4"/></svg>',iconUpArrow:'<svg width="16" height="10" viewBox="0 0 16 10" fill="none" ><path d="M7.49155 6.60486L7.63281 6.74582L7.77408 6.60486L13.3702 1.02097L14.85 2.50078L7.63281 9.71794L0.415655 2.50078L1.89547 1.02097L7.49155 6.60486Z" fill="black" fill-opacity="0.7" stroke="white" stroke-width="0.4"/></svg>',tasklist:' <svg width="40" height="40" viewBox="0 0 58 58" fill="none" ><g filter="url(#filter0_d_task_list_guide)"><circle cx="29" cy="25" r="25" fill="#005BF0"/></g><path d="M20.0067 37.2828V17.3888H22.8733V18.5421C22.8733 19.1187 23.3033 19.5512 23.8767 19.5512H33.6233C34.1967 19.5512 34.6267 19.1187 34.6267 18.5421V17.3888H37.4934V25.6058V39.1747H39C39.2761 39.1747 39.5 38.9509 39.5 38.6747V26.3267V16.5238C39.5 15.9472 39.07 15.5147 38.4966 15.5147H34.6267V14.3614C34.6267 13.7848 34.1967 13.3523 33.6233 13.3523H32.4767C32.1899 11.1899 30.3266 9.74833 28.1766 10.0366C26.4566 10.1808 25.1667 11.6224 24.88 13.3523H23.8767C23.3033 13.3523 22.8733 13.7848 22.8733 14.3614V15.5147H19.0033C18.43 15.5147 18 15.9472 18 16.5238V38.292C18 38.8686 18.43 39.301 19.0033 39.301H38.8424C39.1186 39.301 39.3424 39.0772 39.3424 38.801V37.2828H26.7433H20.0067ZM28.75 11.9107C29.61 11.9107 30.3266 12.4874 30.6133 13.3523H26.8867C27.03 12.4874 27.89 11.9107 28.75 11.9107ZM24.7367 15.3706H32.6199V17.5329H24.7367V15.3706Z" fill="white"/><path d="M22.5796 23.1057H34.7917V24.2226H22.5796V23.1057Z" fill="white" stroke="white" stroke-width="0.5"/><path d="M22.5796 27.6852H34.7917V28.8022H22.5796V27.6852Z" fill="white" stroke="white" stroke-width="0.5"/><path d="M22.5796 32.2648H34.7917V33.3817H22.5796V32.2648Z" fill="white" stroke="white" stroke-width="0.5"/><defs><filter id="filter0_d_task_list_guide" x="0" y="0" width="58" height="58" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset dy="4"/><feGaussianBlur stdDeviation="2"/><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/></filter></defs></svg>',guideShowMe:'<svg width="40" height="40" viewBox="0 0 40 40" fill="none"><rect x="0.7" y="0.7" width="38.6" height="38.6" rx="19.3" fill="#F8F8FB" stroke="#ACADC1" stroke-width="1.4"></rect><path d="M25.1375 15.9427H23.1482C22.5161 15.359 21.3251 15 19.9999 15C18.6747 15 17.4837 15.359 16.8516 15.9427H14.8623C12.1812 15.9427 10 18.1985 10 20.9713C10 23.7441 12.1812 26 14.8623 26C17.5434 26 19.7246 23.7441 19.7246 20.9713C19.7246 20.9346 19.7242 20.8979 19.7235 20.8611H20.2764C20.2756 20.8979 20.2753 20.9346 20.2753 20.9713C20.2753 23.7441 22.4566 26 25.1377 26C27.8188 26 30 23.7441 30 20.9713C29.9999 18.1985 27.8186 15.9427 25.1375 15.9427ZM14.8623 23.9552C13.2715 23.9552 11.9772 22.6166 11.9772 20.9713C11.9772 19.3261 13.2715 17.9875 14.8623 17.9875C16.4532 17.9875 17.7475 19.3261 17.7475 20.9713C17.7475 22.6166 16.4532 23.9552 14.8623 23.9552ZM21.3065 17.89H18.6926C18.3824 17.89 18.1303 17.6286 18.1303 17.3077C18.1303 16.9869 18.3824 16.7254 18.6926 16.7254H21.3065C21.6173 16.7254 21.8695 16.9869 21.8695 17.3077C21.8695 17.6285 21.6173 17.89 21.3065 17.89ZM25.1375 23.9552C23.5466 23.9552 22.2523 22.6166 22.2523 20.9713C22.2523 19.3261 23.5466 17.9875 25.1375 17.9875C26.7282 17.9875 28.0226 19.3261 28.0226 20.9713C28.0226 22.6166 26.7283 23.9552 25.1375 23.9552Z" fill="#ACADC1" stroke-width="0" /></svg>',guideDoItForMe:'<svg width="40" height="40" viewBox="0 0 40 40" fill="none"><rect x="0.7" y="0.7" width="38.6" height="38.6" rx="19.3" fill="#F8F8FB" stroke="#ACADC1" stroke-width="1.4"></rect><path d="M15.8441 24.4972C14.4834 24.4972 13.3803 25.652 13.3803 27.0765V29H14.6452V27.6678C14.6452 26.5993 15.4726 25.7332 16.4931 25.7332H23.5081C24.5287 25.7332 25.356 26.5993 25.356 27.6678V29H26.6211V27.0765C26.6211 25.652 25.518 24.4972 24.1573 24.4972H15.8441Z" fill="#ACADC1" stroke-width="0" /><path d="M12 18.8136C12 18.1065 12.5475 17.5333 13.2229 17.5333H13.6867V20.0938H13.2229C12.5475 20.0938 12 19.5206 12 18.8136Z" fill="#ACADC1" stroke-width="0" /><path d="M28 18.8136C28 18.1065 27.4525 17.5333 26.7771 17.5333H26.3133V20.0938H26.7771C27.4525 20.0938 28 19.5206 28 18.8136Z" fill="#ACADC1" stroke-width="0" /><path d="M19.7887 18.8136C19.7887 19.5206 19.2412 20.0938 18.5659 20.0938C17.8905 20.0938 17.343 19.5206 17.343 18.8136C17.343 18.1065 17.8905 17.5333 18.5659 17.5333C19.2412 17.5333 19.7887 18.1065 19.7887 18.8136Z" fill="#ACADC1" stroke-width="0" /><path d="M22.7414 18.8136C22.7414 19.5206 22.1939 20.0938 21.5186 20.0938C20.8432 20.0938 20.2957 19.5206 20.2957 18.8136C20.2957 18.1065 20.8432 17.5333 21.5186 17.5333C22.1939 17.5333 22.7414 18.1065 22.7414 18.8136Z" fill="#ACADC1" stroke-width="0" /><path d="M19.494 13.1606C19.494 13.0894 19.5492 13.0317 19.6172 13.0317H20.7202C20.7882 13.0317 20.8434 13.0894 20.8434 13.1606V15.6804H19.494V13.1606Z" fill="#ACADC1" stroke-width="0" /><path d="M18.4948 14.6198H17.279C15.9182 14.6198 14.8151 15.7746 14.8151 17.1992V20.5163C14.8151 21.9409 15.9182 23.0957 17.279 23.0957H22.7247C24.0855 23.0957 25.1886 21.9409 25.1886 20.5163V17.1992C25.1886 15.7746 24.0855 14.6198 22.7247 14.6198H21.8448V15.592H22.2026C23.2232 15.592 24.0505 16.4581 24.0505 17.5265V20.191C24.0505 21.2594 23.2232 22.1255 22.2026 22.1255H17.802C16.7815 22.1255 15.9541 21.2594 15.9541 20.191V17.5265C15.9541 16.4581 16.7815 15.592 17.802 15.592H18.4948V14.6198Z" fill="#ACADC1" stroke-width="0" /><path d="M20.8434 11.7063C20.8434 12.0964 20.5413 12.4127 20.1687 12.4127C19.7961 12.4127 19.494 12.0964 19.494 11.7063C19.494 11.3162 19.7961 11 20.1687 11C20.5413 11 20.8434 11.3162 20.8434 11.7063Z" fill="#ACADC1" stroke-width="0" /></svg>',guideTeachMe:'<svg width="40" height="40" viewBox="0 0 40 40" fill="none"><rect x="0.7" y="0.7" width="38.6" height="38.6" rx="19.3" fill="#F8F8FB" stroke="#ACADC1" stroke-width="1.4"></rect><path d="M13 15C13 15.3956 13.1173 15.7822 13.3371 16.1111C13.5568 16.44 13.8692 16.6964 14.2346 16.8478C14.6001 16.9991 15.0022 17.0387 15.3902 16.9616C15.7781 16.8844 16.1345 16.6939 16.4142 16.4142C16.6939 16.1345 16.8844 15.7781 16.9616 15.3902C17.0387 15.0022 16.9991 14.6001 16.8478 14.2346C16.6964 13.8692 16.44 13.5568 16.1111 13.3371C15.7822 13.1173 15.3956 13 15 13C14.4697 13.0004 13.9613 13.2113 13.5863 13.5863C13.2113 13.9613 13.0005 14.4697 13 15ZM16.1554 15C16.1554 15.2285 16.0876 15.4519 15.9607 15.6419C15.8337 15.8319 15.6533 15.98 15.4422 16.0675C15.231 16.1549 14.9987 16.1778 14.7746 16.1332C14.5505 16.0886 14.3446 15.9786 14.183 15.817C14.0214 15.6554 13.9114 15.4495 13.8668 15.2254C13.8222 15.0013 13.8451 14.769 13.9325 14.5578C14.02 14.3467 14.1681 14.1663 14.3581 14.0393C14.5481 13.9124 14.7715 13.8446 15 13.8446C15.3063 13.845 15.5999 13.9669 15.8165 14.1835C16.0331 14.4001 16.155 14.6937 16.1554 15Z" fill="#ACADC1" stroke-width="0.2" /><path d="M13 15C13 15.3956 13.1173 15.7822 13.3371 16.1111C13.5568 16.44 13.8692 16.6964 14.2346 16.8478C14.6001 16.9991 15.0022 17.0387 15.3902 16.9616C15.7781 16.8844 16.1345 16.6939 16.4142 16.4142C16.6939 16.1345 16.8844 15.7781 16.9616 15.3902C17.0387 15.0022 16.9991 14.6001 16.8478 14.2346C16.6964 13.8692 16.44 13.5568 16.1111 13.3371C15.7822 13.1173 15.3956 13 15 13C14.4697 13.0004 13.9613 13.2113 13.5863 13.5863C13.2113 13.9613 13.0005 14.4697 13 15ZM16.1554 15C16.1554 15.2285 16.0876 15.4519 15.9607 15.6419C15.8337 15.8319 15.6533 15.98 15.4422 16.0675C15.231 16.1549 14.9987 16.1778 14.7746 16.1332C14.5505 16.0886 14.3446 15.9786 14.183 15.817C14.0214 15.6554 13.9114 15.4495 13.8668 15.2254C13.8222 15.0013 13.8451 14.769 13.9325 14.5578C14.02 14.3467 14.1681 14.1663 14.3581 14.0393C14.5481 13.9124 14.7715 13.8446 15 13.8446C15.3063 13.845 15.5999 13.9669 15.8165 14.1835C16.0331 14.4001 16.155 14.6937 16.1554 15Z" stroke="#ACADC1" stroke-width="0.2" /><path d="M12.3543 21.6855C12.3779 21.9178 12.452 22.1407 12.5706 22.3356C12.6891 22.5306 12.8486 22.692 13.036 22.8066L13.5899 27.214C13.6125 27.4302 13.7076 27.6298 13.8568 27.7748C14.0061 27.9197 14.1992 27.9999 14.3994 28H15.3197C15.52 27.9998 15.7133 27.9195 15.8626 27.7742C16.012 27.6289 16.1069 27.4289 16.1292 27.2124L16.4019 24.5115L16.9444 20.0023L17.5522 20.5474C17.7246 20.7022 17.9405 20.7881 18.164 20.7909C18.3875 20.7937 18.6051 20.7132 18.7807 20.5628L20.6128 18.9923C20.805 18.8312 20.9364 18.5992 20.9821 18.3401C21.0279 18.081 20.985 17.8126 20.8613 17.5855C20.7892 17.4573 20.6929 17.3471 20.5788 17.2622C20.4648 17.1774 20.3354 17.1198 20.1993 17.0932C20.0633 17.0667 19.9236 17.0718 19.7895 17.1082C19.6553 17.1446 19.5298 17.2115 19.4212 17.3044L18.1885 18.3607L16.9444 17.2442C16.7693 17.087 16.5494 17.0007 16.3223 17.0002H15.7543C15.6912 16.9981 15.6285 17.0116 15.5709 17.0397C15.5133 17.0677 15.4624 17.1097 15.4219 17.1624L14.8538 17.9252L14.3 17.1701C14.2614 17.1169 14.2122 17.074 14.1561 17.0446C14.1 17.0151 14.0384 17 13.9762 17.0002H13.5402C13.3226 17.0003 13.1076 17.0505 12.9092 17.1475C12.7108 17.2444 12.5336 17.386 12.3891 17.5628C12.2446 17.7396 12.1362 17.9476 12.0709 18.1733C12.0057 18.3989 11.9851 18.637 12.0106 18.8719L12.3543 21.6855ZM12.9224 18.075C12.9994 17.9782 13.0947 17.9004 13.2018 17.8471C13.3088 17.7938 13.4252 17.7662 13.543 17.7662H13.8356L14.4718 18.6294C14.5185 18.6931 14.5778 18.7446 14.6453 18.7799C14.7128 18.8153 14.7867 18.8337 14.8617 18.8337C14.9366 18.8337 15.0105 18.8153 15.078 18.7799C15.1455 18.7446 15.2048 18.6931 15.2515 18.6294L15.8892 17.7646H16.3238C16.386 17.7642 16.4463 17.7878 16.4942 17.831L17.9641 19.1545C18.0273 19.2099 18.1059 19.2401 18.1871 19.2401C18.2682 19.2401 18.3469 19.2099 18.41 19.1545L19.8686 17.9052C19.9159 17.8647 19.9745 17.8429 20.0347 17.8434C20.081 17.8434 20.1264 17.8564 20.1667 17.881C20.207 17.9056 20.2408 17.941 20.2648 17.9839C20.2975 18.0499 20.307 18.1265 20.2916 18.1995C20.2762 18.2725 20.2369 18.3369 20.181 18.3808L18.3404 19.9559C18.2924 19.9966 18.2331 20.0187 18.1722 20.0187C18.1112 20.0187 18.052 19.9966 18.0038 19.9559L16.9018 18.9661C16.8529 18.9222 16.7941 18.8933 16.7315 18.8825C16.6689 18.8717 16.6048 18.8792 16.5458 18.9045C16.4869 18.9297 16.4352 18.9716 16.3961 19.0259C16.3571 19.0802 16.3321 19.1448 16.3238 19.2132L15.6918 24.4204L15.4248 27.1275C15.422 27.1553 15.4099 27.1811 15.3908 27.1999C15.3717 27.2187 15.3469 27.2292 15.3211 27.2294H14.3994C14.3724 27.2287 14.3467 27.2171 14.3273 27.1968C14.3078 27.1765 14.296 27.149 14.2943 27.1198L13.7134 22.4947C13.7046 22.4256 13.6786 22.3603 13.6383 22.3059C13.5981 22.2515 13.545 22.21 13.4848 22.1859C13.3697 22.1404 13.2687 22.0608 13.1934 21.9559C13.118 21.851 13.0714 21.7252 13.0587 21.5929L12.7093 18.7777C12.6962 18.6506 12.7083 18.5221 12.7448 18.4006C12.7813 18.2791 12.8414 18.1675 12.9209 18.0735L12.9224 18.075Z" fill="#ACADC1" stroke-width="0.2" /><path d="M12.3543 21.6855C12.3779 21.9178 12.452 22.1407 12.5706 22.3356C12.6891 22.5306 12.8486 22.692 13.036 22.8066L13.5899 27.214C13.6125 27.4302 13.7076 27.6298 13.8568 27.7748C14.0061 27.9197 14.1992 27.9999 14.3994 28H15.3197C15.52 27.9998 15.7133 27.9195 15.8626 27.7742C16.012 27.6289 16.1069 27.4289 16.1292 27.2124L16.4019 24.5115L16.9444 20.0023L17.5522 20.5474C17.7246 20.7022 17.9405 20.7881 18.164 20.7909C18.3875 20.7937 18.6051 20.7132 18.7807 20.5628L20.6128 18.9923C20.805 18.8312 20.9364 18.5992 20.9821 18.3401C21.0279 18.081 20.985 17.8126 20.8613 17.5855C20.7892 17.4573 20.6929 17.3471 20.5788 17.2622C20.4648 17.1774 20.3354 17.1198 20.1993 17.0932C20.0633 17.0667 19.9236 17.0718 19.7895 17.1082C19.6553 17.1446 19.5298 17.2115 19.4212 17.3044L18.1885 18.3607L16.9444 17.2442C16.7693 17.087 16.5494 17.0007 16.3223 17.0002H15.7543C15.6912 16.9981 15.6285 17.0116 15.5709 17.0397C15.5133 17.0677 15.4624 17.1097 15.4219 17.1624L14.8538 17.9252L14.3 17.1701C14.2614 17.1169 14.2122 17.074 14.1561 17.0446C14.1 17.0151 14.0384 17 13.9762 17.0002H13.5402C13.3226 17.0003 13.1076 17.0505 12.9092 17.1475C12.7108 17.2444 12.5336 17.386 12.3891 17.5628C12.2446 17.7396 12.1362 17.9476 12.0709 18.1733C12.0057 18.3989 11.9851 18.637 12.0106 18.8719L12.3543 21.6855ZM12.9224 18.075C12.9994 17.9782 13.0947 17.9004 13.2018 17.8471C13.3088 17.7938 13.4252 17.7662 13.543 17.7662H13.8356L14.4718 18.6294C14.5185 18.6931 14.5778 18.7446 14.6453 18.7799C14.7128 18.8153 14.7867 18.8337 14.8617 18.8337C14.9366 18.8337 15.0105 18.8153 15.078 18.7799C15.1455 18.7446 15.2048 18.6931 15.2515 18.6294L15.8892 17.7646H16.3238C16.386 17.7642 16.4463 17.7878 16.4942 17.831L17.9641 19.1545C18.0273 19.2099 18.1059 19.2401 18.1871 19.2401C18.2682 19.2401 18.3469 19.2099 18.41 19.1545L19.8686 17.9052C19.9159 17.8647 19.9745 17.8429 20.0347 17.8434C20.081 17.8434 20.1264 17.8564 20.1667 17.881C20.207 17.9056 20.2408 17.941 20.2648 17.9839C20.2975 18.0499 20.307 18.1265 20.2916 18.1995C20.2762 18.2725 20.2369 18.3369 20.181 18.3808L18.3404 19.9559C18.2924 19.9966 18.2331 20.0187 18.1722 20.0187C18.1112 20.0187 18.052 19.9966 18.0038 19.9559L16.9018 18.9661C16.8529 18.9222 16.7941 18.8933 16.7315 18.8825C16.6689 18.8717 16.6048 18.8792 16.5458 18.9045C16.4869 18.9297 16.4352 18.9716 16.3961 19.0259C16.3571 19.0802 16.3321 19.1448 16.3238 19.2132L15.6918 24.4204L15.4248 27.1275C15.422 27.1553 15.4099 27.1811 15.3908 27.1999C15.3717 27.2187 15.3469 27.2292 15.3211 27.2294H14.3994C14.3724 27.2287 14.3467 27.2171 14.3273 27.1968C14.3078 27.1765 14.296 27.149 14.2943 27.1198L13.7134 22.4947C13.7046 22.4256 13.6786 22.3603 13.6383 22.3059C13.5981 22.2515 13.545 22.21 13.4848 22.1859C13.3697 22.1404 13.2687 22.0608 13.1934 21.9559C13.118 21.851 13.0714 21.7252 13.0587 21.5929L12.7093 18.7777C12.6962 18.6506 12.7083 18.5221 12.7448 18.4006C12.7813 18.2791 12.8414 18.1675 12.9209 18.0735L12.9224 18.075Z" stroke="#ACADC1" stroke-width="0.2" /><path d="M18 14.3542V16.9043C18 16.9982 18.0395 17.0883 18.1098 17.1547C18.18 17.2212 18.2754 17.2585 18.3747 17.2585C18.4741 17.2585 18.5695 17.2212 18.6397 17.1547C18.71 17.0883 18.7495 16.9982 18.7495 16.9043V14.707H26.2565V21.6617H18.3747C18.2754 21.6617 18.18 21.699 18.1098 21.7654C18.0395 21.8319 18 21.9219 18 22.0159C18 22.1098 18.0395 22.1999 18.1098 22.2663C18.18 22.3328 18.2754 22.3701 18.3747 22.3701H22.1223V24.7275H19.7808C19.6812 24.7275 19.5834 24.7532 19.4981 24.8019C19.4127 24.8506 19.343 24.9204 19.2966 25.0038L18.4617 26.48C18.4387 26.5211 18.4244 26.5661 18.4198 26.6124C18.4152 26.6587 18.4202 26.7055 18.4347 26.7499C18.4492 26.7944 18.4728 26.8357 18.5042 26.8716C18.5355 26.9074 18.5741 26.9371 18.6176 26.9589C18.6611 26.9806 18.7087 26.9941 18.7577 26.9984C18.8067 27.0028 18.8562 26.998 18.9032 26.9844C18.9503 26.9707 18.994 26.9484 19.0319 26.9187C19.0698 26.889 19.1012 26.8526 19.1243 26.8115L19.8947 25.4373H25.1038L25.8742 26.8115C25.8973 26.8526 25.9287 26.889 25.9666 26.9187C26.0045 26.9484 26.0482 26.9707 26.0953 26.9844C26.1423 26.998 26.1918 27.0028 26.2408 26.9984C26.2898 26.9941 26.3374 26.9806 26.3809 26.9589C26.4244 26.9371 26.463 26.9074 26.4943 26.8716C26.5257 26.8357 26.5493 26.7944 26.5638 26.7499C26.5783 26.7055 26.5833 26.6587 26.5787 26.6124C26.5741 26.5661 26.5598 26.5211 26.5368 26.48L25.7094 25.0038C25.6629 24.9204 25.5933 24.8506 25.508 24.8019C25.4227 24.7532 25.3248 24.7275 25.2252 24.7275H22.8777V22.3701H26.6252C26.7246 22.3701 26.82 22.3328 26.8902 22.2663C26.9605 22.1999 27 22.1098 27 22.0159V14.3542C27 14.2602 26.9605 14.1702 26.8902 14.1037C26.82 14.0373 26.7246 14 26.6252 14H18.3747C18.2754 14 18.18 14.0373 18.1098 14.1037C18.0395 14.1702 18 14.2602 18 14.3542Z" fill="#ACADC1" stroke-width="0.2" /><path d="M18 14.3542V16.9043C18 16.9982 18.0395 17.0883 18.1098 17.1547C18.18 17.2212 18.2754 17.2585 18.3747 17.2585C18.4741 17.2585 18.5695 17.2212 18.6397 17.1547C18.71 17.0883 18.7495 16.9982 18.7495 16.9043V14.707H26.2565V21.6617H18.3747C18.2754 21.6617 18.18 21.699 18.1098 21.7654C18.0395 21.8319 18 21.9219 18 22.0159C18 22.1098 18.0395 22.1999 18.1098 22.2663C18.18 22.3328 18.2754 22.3701 18.3747 22.3701H22.1223V24.7275H19.7808C19.6812 24.7275 19.5834 24.7532 19.4981 24.8019C19.4127 24.8506 19.343 24.9204 19.2966 25.0038L18.4617 26.48C18.4387 26.5211 18.4244 26.5661 18.4198 26.6124C18.4152 26.6587 18.4202 26.7055 18.4347 26.7499C18.4492 26.7944 18.4728 26.8357 18.5042 26.8716C18.5355 26.9074 18.5741 26.9371 18.6176 26.9589C18.6611 26.9806 18.7087 26.9941 18.7577 26.9984C18.8067 27.0028 18.8562 26.998 18.9032 26.9844C18.9503 26.9707 18.994 26.9484 19.0319 26.9187C19.0698 26.889 19.1012 26.8526 19.1243 26.8115L19.8947 25.4373H25.1038L25.8742 26.8115C25.8973 26.8526 25.9287 26.889 25.9666 26.9187C26.0045 26.9484 26.0482 26.9707 26.0953 26.9844C26.1423 26.998 26.1918 27.0028 26.2408 26.9984C26.2898 26.9941 26.3374 26.9806 26.3809 26.9589C26.4244 26.9371 26.463 26.9074 26.4943 26.8716C26.5257 26.8357 26.5493 26.7944 26.5638 26.7499C26.5783 26.7055 26.5833 26.6587 26.5787 26.6124C26.5741 26.5661 26.5598 26.5211 26.5368 26.48L25.7094 25.0038C25.6629 24.9204 25.5933 24.8506 25.508 24.8019C25.4227 24.7532 25.3248 24.7275 25.2252 24.7275H22.8777V22.3701H26.6252C26.7246 22.3701 26.82 22.3328 26.8902 22.2663C26.9605 22.1999 27 22.1098 27 22.0159V14.3542C27 14.2602 26.9605 14.1702 26.8902 14.1037C26.82 14.0373 26.7246 14 26.6252 14H18.3747C18.2754 14 18.18 14.0373 18.1098 14.1037C18.0395 14.1702 18 14.2602 18 14.3542Z" stroke="#ACADC1" stroke-width="0.2" /></svg>',btnBackBreadcrumb:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" version="1.1" class="Capa_1" x="0px" y="0px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve"><path class="st0" d="M23,3.1c0.9-0.9,2.3-0.9,3.2,0c0.9,0.9,0.9,2.3,0,3.2L9.8,22.7h35.9c1.3,0,2.3,1,2.3,2.3s-1,2.3-2.3,2.3H9.8l16.4,16.4c0.9,0.9,0.9,2.4,0,3.2c-0.9,0.9-2.3,0.9-3.2,0L2.7,26.6c-0.9-0.9-0.9-2.3,0-3.2L23,3.1z"></path></svg>',guideViewDownload:'<svg  height="512pt" viewBox="0 0 512 512" width="512pt"><path d="m448 512h-384c-35.285156 0-64-28.714844-64-64v-85.332031c0-11.777344 9.558594-21.335938 21.332031-21.335938 11.777344 0 21.335938 9.558594 21.335938 21.335938v85.332031c0 11.753906 9.578125 21.332031 21.332031 21.332031h384c11.753906 0 21.332031-9.578125 21.332031-21.332031v-85.332031c0-11.777344 9.558594-21.335938 21.335938-21.335938 11.773437 0 21.332031 9.558594 21.332031 21.335938v85.332031c0 35.285156-28.714844 64-64 64zm0 0"/><path d="m356.414062 271.082031-85.332031 85.332031c-8.339843 8.34375-21.824219 8.34375-30.164062 0l-85.332031-85.332031c-6.101563-6.101562-7.9375-15.273437-4.632813-23.253906 3.308594-7.957031 11.09375-13.160156 19.714844-13.160156h64v-213.335938c0-11.773437 9.554687-21.332031 21.332031-21.332031s21.332031 9.558594 21.332031 21.332031v213.335938h64c8.621094 0 16.40625 5.203125 19.714844 13.160156 3.304687 7.980469 1.46875 17.152344-4.632813 23.253906zm0 0"/></svg>',noStep:'<svg width="349" height="264" viewBox="0 0 349 264" fill="none"><path d="M236 84.4294C236 99.0289 224.123 110.906 209.523 110.906H154.078C142.455 110.906 133 101.451 133 89.8286C133 78.4008 142.141 69.0679 153.496 68.7589C151.915 54.2263 163.814 40.0938 179.828 40.0938C191.412 40.0938 201.5 47.5847 205 58.338C221.283 55.5334 236 68.1293 236 84.4294Z" fill="#F5FAFD"/><g clip-path="url(#clip0)"><path d="M138 31.7742C138 36.3099 134.31 40 129.774 40H112.548C108.938 40 106 37.0625 106 33.4516C106 29.9012 108.84 27.0017 112.368 26.9057C111.876 22.3907 115.573 18 120.548 18C124.147 18 127.281 20.3273 128.369 23.6681C133.428 22.7968 138 26.7101 138 31.7742Z" fill="#F5FAFD"/></g><g clip-path="url(#clip1)"><path d="M258 12.9073C258 16.0256 255.463 18.5625 252.345 18.5625H240.502C238.02 18.5625 236 16.5429 236 14.0605C236 11.6196 237.953 9.62615 240.378 9.56015C240.04 6.45611 242.582 3.4375 246.002 3.4375C248.476 3.4375 250.631 5.03751 251.379 7.33434C254.857 6.73528 258 9.42567 258 12.9073Z" fill="#F5FAFD"/></g><path opacity="0.2" d="M301.093 261.757C300.945 262.037 300.772 262.304 300.576 262.554C298.855 261.342 297.104 260.156 295.324 258.994C295.36 258.919 295.399 258.842 295.441 258.764C295.853 257.968 296.473 257.297 297.234 256.822C298.218 256.225 299.327 256.082 300.224 256.565C301.12 257.048 301.646 258.036 301.7 259.182C301.732 260.079 301.522 260.968 301.093 261.757V261.757Z" fill="#3F3D56"/><path opacity="0.2" d="M303.5 257.26C304.583 255.219 304.195 252.896 302.634 252.071C301.073 251.246 298.93 252.231 297.847 254.271C296.764 256.311 297.152 258.634 298.713 259.459C300.274 260.285 302.417 259.3 303.5 257.26Z" fill="#3F3D56"/><path opacity="0.2" d="M305.896 252.745C306.979 250.705 306.591 248.382 305.03 247.556C303.469 246.731 301.326 247.716 300.243 249.756C299.161 251.796 299.549 254.119 301.11 254.945C302.671 255.77 304.814 254.785 305.896 252.745Z" fill="#3F3D56"/><path opacity="0.2" d="M308.293 248.226C309.376 246.186 308.988 243.863 307.427 243.038C305.866 242.212 303.723 243.197 302.64 245.238C301.557 247.278 301.945 249.601 303.506 250.426C305.067 251.251 307.21 250.267 308.293 248.226Z" fill="#3F3D56"/><path opacity="0.2" d="M310.689 243.709C311.772 241.669 311.384 239.346 309.823 238.52C308.262 237.695 306.119 238.68 305.036 240.72C303.954 242.76 304.342 245.083 305.903 245.909C307.464 246.734 309.607 245.749 310.689 243.709Z" fill="#3F3D56"/><path d="M313.663 205.69C313.538 205 313.46 204.302 313.429 203.601L321.5 206.31L313.429 202.133C313.547 200.045 314.091 198.003 315.028 196.133C315.965 194.262 317.276 192.603 318.879 191.257L326.699 202.539L320.628 189.986C322.411 188.873 324.406 188.14 326.486 187.83C328.566 187.52 330.688 187.641 332.72 188.185C334.751 188.728 336.649 189.684 338.294 190.991C339.94 192.299 341.299 193.93 342.285 195.784C343.272 197.639 343.866 199.676 344.03 201.769C344.195 203.862 343.925 205.966 343.24 207.951C342.554 209.936 341.467 211.759 340.045 213.306C338.623 214.853 336.898 216.092 334.976 216.945C335.174 218.027 335.254 219.128 335.215 220.227L322.914 220.129L335.027 222.119C334.618 224.632 333.589 227.003 332.031 229.019C330.474 231.034 328.438 232.631 326.107 233.663C326.62 236.489 326.327 239.402 325.26 242.068C324.193 244.735 322.396 247.049 320.075 248.744C317.753 250.44 315 251.449 312.13 251.656C309.261 251.863 306.391 251.26 303.849 249.916C301.307 248.572 299.195 246.541 297.755 244.055C296.314 241.569 295.604 238.729 295.705 235.859C295.805 232.989 296.713 230.206 298.324 227.826C299.935 225.447 302.184 223.569 304.814 222.405C304.203 219.031 304.745 215.549 306.354 212.519C307.962 209.489 310.543 207.086 313.684 205.696L313.663 205.69Z" fill="#F5FAFD"/><path d="M333.42 226.839C331.814 229.873 329.231 232.278 326.087 233.666C326.601 236.492 326.307 239.404 325.241 242.071C324.174 244.738 322.377 247.052 320.055 248.747C317.733 250.443 314.98 251.452 312.111 251.659C309.242 251.866 306.372 251.263 303.829 249.919C301.287 248.575 299.175 246.544 297.735 244.058C296.295 241.572 295.584 238.732 295.685 235.862C295.786 232.992 296.694 230.208 298.305 227.829C299.916 225.45 302.165 223.571 304.795 222.408C304.2 219.15 334.227 225.32 333.42 226.839Z" fill="#F5FAFD"/><path opacity="0.2" d="M291.489 171.503C291.303 171.981 291.078 172.443 290.816 172.885C287.803 171.283 284.753 169.726 281.666 168.212C281.708 168.084 281.756 167.952 281.807 167.821C282.309 166.462 283.166 165.261 284.288 164.342C285.743 163.178 287.498 162.74 289.07 163.333C290.643 163.927 291.647 165.422 291.961 167.248C292.188 168.683 292.025 170.152 291.489 171.503Z" fill="#3F3D56"/><path opacity="0.2" d="M294.445 163.778C295.778 160.283 294.691 156.627 292.017 155.611C289.343 154.595 286.095 156.604 284.763 160.098C283.43 163.593 284.517 167.249 287.191 168.265C289.865 169.281 293.113 167.272 294.445 163.778Z" fill="#3F3D56"/><path opacity="0.2" d="M297.395 156.045C298.727 152.551 297.64 148.894 294.966 147.878C292.292 146.862 289.044 148.871 287.712 152.366C286.379 155.86 287.466 159.517 290.14 160.533C292.814 161.549 296.062 159.54 297.395 156.045Z" fill="#3F3D56"/><path opacity="0.2" d="M300.344 148.31C301.677 144.815 300.589 141.159 297.915 140.143C295.242 139.127 291.994 141.136 290.661 144.631C289.328 148.125 290.416 151.782 293.09 152.798C295.763 153.814 299.011 151.804 300.344 148.31Z" fill="#3F3D56"/><path opacity="0.2" d="M303.291 140.577C304.624 137.083 303.537 133.426 300.863 132.41C298.189 131.394 294.941 133.404 293.608 136.898C292.276 140.393 293.363 144.049 296.037 145.065C298.711 146.081 301.959 144.072 303.291 140.577Z" fill="#3F3D56"/><path d="M300.494 78.9265C300.153 77.835 299.889 76.7214 299.702 75.5935L313.219 78.3417L299.421 73.2154C299.194 69.8492 299.658 66.4724 300.785 63.2914C301.911 60.1104 303.675 57.1923 305.97 54.7156L320.785 71.267L308.529 52.3076C311.174 50.1753 314.23 48.6084 317.507 47.7041C320.783 46.7997 324.212 46.5773 327.578 47.0506C330.945 47.524 334.178 48.6829 337.077 50.4555C339.976 52.2281 342.48 54.5766 344.432 57.3551C346.384 60.1337 347.743 63.2831 348.424 66.6078C349.106 69.9326 349.096 73.3617 348.395 76.6825C347.694 80.0032 346.316 83.1446 344.348 85.9118C342.38 88.679 339.863 91.0128 336.954 92.7686C337.485 94.4692 337.831 96.2218 337.988 97.9963L318.208 100.285L338.066 101.076C337.911 105.194 336.73 109.209 334.63 112.756C332.53 116.304 329.576 119.274 326.037 121.396C327.423 125.831 327.531 130.567 326.349 135.061C325.166 139.555 322.741 143.627 319.35 146.81C315.96 149.994 311.74 152.161 307.174 153.064C302.608 153.967 297.879 153.57 293.529 151.917C289.178 150.265 285.381 147.424 282.571 143.719C279.761 140.015 278.052 135.596 277.639 130.968C277.226 126.34 278.125 121.689 280.235 117.547C282.344 113.405 285.579 109.939 289.568 107.545C287.908 102.242 288.081 96.5364 290.061 91.3443C292.041 86.1523 295.712 81.7755 300.485 78.9175L300.494 78.9265Z" fill="#F5FAFD"/><path opacity="0.1" d="M336.454 108.977C334.48 114.17 330.809 118.546 326.033 121.396C327.419 125.831 327.527 130.567 326.345 135.061C325.162 139.555 322.737 143.627 319.346 146.81C315.956 149.994 311.736 152.161 307.17 153.064C302.604 153.967 297.875 153.57 293.525 151.917C289.174 150.265 285.377 147.424 282.567 143.72C279.757 140.015 278.048 135.596 277.635 130.968C277.222 126.34 278.122 121.689 280.231 117.547C282.341 113.405 285.575 109.939 289.564 107.545C287.971 102.433 337.446 106.378 336.454 108.977Z" fill="#F5FAFD"/><g opacity="0.2"><path opacity="0.2" d="M53.3216 197.226C53.4734 197.819 53.6733 198.397 53.9194 198.957C57.7058 197.507 61.535 196.114 65.4071 194.78C65.3742 194.622 65.3413 194.46 65.2995 194.296C64.9089 192.617 64.0761 191.071 62.8872 189.821C61.3387 188.233 59.333 187.457 57.4049 187.929C55.4768 188.4 54.0569 190.017 53.4143 192.121C52.9267 193.784 52.8947 195.547 53.3216 197.226V197.226Z" fill="#3F3D56"/><path opacity="0.2" d="M58.8947 194.022C62.2001 193.216 64.0233 189.062 62.9669 184.742C61.9105 180.423 58.3745 177.575 55.069 178.38C51.7636 179.186 49.9404 183.34 50.9968 187.66C52.0532 191.979 55.5892 194.827 58.8947 194.022Z" fill="#3F3D56"/><path opacity="0.2" d="M56.5548 184.461C59.8603 183.656 61.6835 179.501 60.627 175.182C59.5706 170.863 56.0346 168.014 52.7292 168.82C49.4237 169.625 47.6005 173.78 48.657 178.099C49.7134 182.418 53.2494 185.267 56.5548 184.461Z" fill="#3F3D56"/><path opacity="0.2" d="M54.2228 174.904C57.5283 174.098 59.3514 169.944 58.295 165.624C57.2386 161.305 53.7026 158.457 50.3971 159.262C47.0917 160.068 45.2685 164.222 46.3249 168.541C47.3814 172.861 50.9174 175.709 54.2228 174.904Z" fill="#3F3D56"/><path opacity="0.2" d="M51.8849 165.346C55.1904 164.54 57.0136 160.386 55.9571 156.067C54.9007 151.747 51.3647 148.899 48.0593 149.705C44.7538 150.51 42.9306 154.665 43.987 158.984C45.0435 163.303 48.5795 166.151 51.8849 165.346Z" fill="#3F3D56"/><path opacity="0.2" d="M56.371 86.6637C56.9363 85.4266 57.4138 84.1513 57.7998 82.8473L41.4457 84.0975L58.4844 80.0783C59.2509 76.1378 59.2033 72.0825 58.3444 68.161C57.4855 64.2396 55.8334 60.5344 53.4894 57.2728L33.5571 74.6507L50.8259 54.083C48.0216 51.168 44.6464 48.8602 40.9102 47.3032C37.1741 45.7462 33.1569 44.9732 29.1086 45.0325C25.0603 45.0917 21.0675 45.9818 17.3787 47.6475C13.6898 49.3131 10.3838 51.7187 7.66629 54.7144C4.94877 57.7102 2.87789 61.2321 1.58249 65.0611C0.287087 68.8901 -0.205124 72.9442 0.136476 76.9712C0.478076 80.9982 1.64618 84.9119 3.56812 88.4689C5.49005 92.026 8.12471 95.1502 11.3082 97.6472C10.4296 99.5742 9.76118 101.59 9.31435 103.66L32.3166 109.275L8.76731 107.282C8.34053 112.164 9.14014 117.076 11.0938 121.572C13.0474 126.068 16.0934 130.007 19.956 133.033C17.6617 138.064 16.832 143.638 17.5618 149.118C18.2916 154.598 20.5514 159.762 24.083 164.02C27.6145 168.278 32.2752 171.459 37.5321 173.198C42.789 174.936 48.4301 175.164 53.8102 173.853C59.1904 172.542 64.0925 169.747 67.9561 165.787C71.8197 161.826 74.4889 156.86 75.6585 151.457C76.828 146.054 76.4507 140.431 74.5698 135.231C72.6888 130.032 69.3801 125.466 65.0219 122.055C67.7611 116.041 68.3957 109.282 66.8235 102.865C65.2513 96.447 61.5637 90.7433 56.3531 86.6696L56.371 86.6637Z" fill="#0078D4"/><path opacity="0.1" d="M9.494 116.83C11.0532 123.253 14.7398 128.962 19.9563 133.032C17.662 138.064 16.8323 143.638 17.5621 149.118C18.2919 154.597 20.5517 159.762 24.0833 164.02C27.6148 168.278 32.2755 171.458 37.5324 173.197C42.7893 174.936 48.4304 175.163 53.8105 173.853C59.1907 172.542 64.0928 169.747 67.9564 165.786C71.82 161.826 74.4892 156.86 75.6588 151.457C76.8283 146.053 76.451 140.43 74.5701 135.231C72.6891 130.032 69.3804 125.466 65.0222 122.055C67.6766 116.242 8.71381 113.616 9.494 116.83Z" fill="#F5FAFD"/></g><path d="M315.753 78.9326H26.1735C25.8343 78.933 25.4985 79.0001 25.1853 79.13C24.8721 79.2599 24.5877 79.4501 24.3481 79.6898C24.1086 79.9295 23.9186 80.2139 23.7892 80.5268C23.6598 80.8398 23.5934 81.1751 23.5938 81.5136V258.423C23.5926 259.106 23.7262 259.782 23.9869 260.414C24.2477 261.045 24.6305 261.619 25.1135 262.103C25.5964 262.587 26.1702 262.971 26.8018 263.233C27.4335 263.496 28.1108 263.632 28.795 263.633H313.132C313.816 263.632 314.493 263.496 315.125 263.233C315.757 262.971 316.33 262.587 316.813 262.103C317.296 261.619 317.679 261.045 317.94 260.414C318.201 259.782 318.334 259.106 318.333 258.423V81.5136C318.333 81.1751 318.267 80.8398 318.138 80.5268C318.008 80.2139 317.818 79.9295 317.579 79.6898C317.339 79.4501 317.055 79.2599 316.741 79.13C316.428 79.0001 316.092 78.933 315.753 78.9326V78.9326Z" fill="url(#paint0_linear)"/><path d="M317.162 89.916V257.381C317.162 258.747 316.619 260.056 315.652 261.022C314.685 261.988 313.374 262.531 312.006 262.532H29.9739C28.6055 262.532 27.2932 261.989 26.3256 261.023C25.358 260.057 24.8145 258.747 24.8145 257.381V89.916H317.162Z" fill="white"/><path d="M259 88V263H310.835C312.47 263 314.038 262.456 315.194 261.489C316.35 260.521 317 259.208 317 257.839V88.015L259 88Z" fill="#F0F0F5"/><path d="M317.162 82.4741V89.9158H24.8145V82.4741C24.8145 81.7967 25.084 81.147 25.5639 80.668C26.0438 80.189 26.6946 79.9199 27.3732 79.9199H314.604C315.282 79.9199 315.933 80.189 316.413 80.668C316.893 81.147 317.162 81.7967 317.162 82.4741Z" fill="#EDEDF4"/><path opacity="0.8" d="M29.4476 86.0336C30.108 86.0336 30.6433 85.4992 30.6433 84.84C30.6433 84.1809 30.108 83.6465 29.4476 83.6465C28.7873 83.6465 28.252 84.1809 28.252 84.84C28.252 85.4992 28.7873 86.0336 29.4476 86.0336Z" fill="#FA5959"/><path opacity="0.8" d="M32.7348 86.0336C33.3951 86.0336 33.9305 85.4992 33.9305 84.84C33.9305 84.1809 33.3951 83.6465 32.7348 83.6465C32.0744 83.6465 31.5391 84.1809 31.5391 84.84C31.5391 85.4992 32.0744 86.0336 32.7348 86.0336Z" fill="#FED253"/><path opacity="0.8" d="M36.0238 86.0336C36.6842 86.0336 37.2195 85.4992 37.2195 84.84C37.2195 84.1809 36.6842 83.6465 36.0238 83.6465C35.3635 83.6465 34.8281 84.1809 34.8281 84.84C34.8281 85.4992 35.3635 86.0336 36.0238 86.0336Z" fill="#8CCF4D"/><path d="M268 105H312V114H268V105Z" fill="white"/><path d="M268 124H312V133H268V124Z" fill="white"/><path d="M268 143H312V153H268V143Z" fill="white"/><path d="M268 163H312V172H268V163Z" fill="white"/><path d="M268 182H312V191H268V182Z" fill="white"/><path d="M188 75.6506V74.457H186.206V75.6506H188Z" fill="url(#paint1_linear)"/><path opacity="0.1" d="M67.0273 210.016C67.1284 209.995 67.2329 209.996 67.3333 210.02C67.4337 210.045 67.5274 210.091 67.6073 210.156C67.7839 210.338 67.9132 210.561 67.9839 210.804C68.2904 211.564 68.7445 212.255 69.3201 212.839" fill="black"/><path d="M82 118H239V130H82V118Z" fill="#F0F0F5"/><path d="M82 155H239V167H82V155Z" fill="#F0F0F5"/><rect x="38" y="239" width="221" height="5" fill="#F0F0F5"/><path fill-rule="evenodd" clip-rule="evenodd" d="M184.678 192C184.678 190.343 183.335 189 181.678 189H116C114.343 189 113 190.343 113 192V226.959C113 228.616 114.343 229.959 116 229.959H142.581C143.377 229.959 144.14 230.275 144.702 230.838L147.744 233.879C148.915 235.051 150.815 235.051 151.986 233.879L155.028 230.838C155.591 230.275 156.354 229.959 157.149 229.959H181.678C183.335 229.959 184.678 228.616 184.678 226.959V192Z" fill="#F0F0F5"/><rect x="45.7" y="110.7" width="25.6" height="25.6" rx="12.8" stroke="#F0F0F5" stroke-width="1.4"/><path d="M53 129C53 129 59.25 126.749 60.5002 125.5C61.7505 124.25 64 118 64 118C64 118 57.75 120.251 56.5005 121.5C55.2509 122.75 53 129 53 129ZM57.5004 122.5L59.5003 124.5C60.0003 125 55.0006 127 55.0006 127C55.0006 127 57.0005 122 57.5004 122.5Z" fill="#F0F0F5"/><path d="M53 166C53 166 59.25 163.749 60.5002 162.5C61.7505 161.25 64 155 64 155C64 155 57.75 157.251 56.5005 158.5C55.2509 159.75 53 166 53 166ZM57.5004 159.5L59.5003 161.5C60.0003 162 55.0006 164 55.0006 164C55.0006 164 57.0005 159 57.5004 159.5Z" fill="#F0F0F5"/><path d="M143 215C143 215 149.25 212.749 150.5 211.5C151.75 210.25 154 204 154 204C154 204 147.75 206.251 146.5 207.5C145.251 208.75 143 215 143 215ZM147.5 208.5L149.5 210.5C150 211 145.001 213 145.001 213C145.001 213 147 208 147.5 208.5Z" fill="white"/><rect x="45.7" y="147.7" width="25.6" height="25.6" rx="12.8" stroke="#F0F0F5" stroke-width="1.4"/><rect x="135.7" y="196.7" width="25.6" height="25.6" rx="12.8" stroke="white" stroke-width="1.4"/><defs><linearGradient class="paint0_linear" x1="170.963" y1="263.633" x2="170.963" y2="78.9326" gradientUnits="userSpaceOnUse"><stop stop-color="#808080" stop-opacity="0.25"/><stop offset="0.54" stop-color="#808080" stop-opacity="0.12"/><stop offset="1" stop-color="#808080" stop-opacity="0.1"/></linearGradient><linearGradient class="paint1_linear" x1="-1628.22" y1="775.14" x2="-1617.45" y2="775.14" gradientUnits="userSpaceOnUse"><stop stop-color="#808080" stop-opacity="0.25"/><stop offset="0.54" stop-color="#808080" stop-opacity="0.12"/><stop offset="1" stop-color="#808080" stop-opacity="0.1"/></linearGradient><clipPath class="clip0"><rect x="106" y="13" width="32" height="32" fill="white"/></clipPath><clipPath class="clip1"><rect x="236" width="22" height="22" fill="white"/></clipPath></defs></svg>',fullscreen:'<svg version="1.1" class="Capa_1" x="0px" y="0px" viewBox="0 0 28.361 28.361" style="enable-background:new 0 0 28.361 28.361;" xml:space="preserve"><g><g class="c115_arrows"><path d="M28.36,19.595c0-0.868-0.665-1.57-1.491-1.57c-0.819,0.002-1.492,0.702-1.492,1.57v3.25l-6.018-6.021c-0.582-0.583-1.524-0.583-2.106,0c-0.582,0.582-0.582,1.527,0,2.109l5.989,5.987h-3.235c-0.881,0.002-1.591,0.669-1.591,1.491c0,0.824,0.71,1.49,1.591,1.49h6.761c0.881,0,1.59-0.665,1.593-1.49c-0.003-0.022-0.006-0.039-0.009-0.061c0.003-0.028,0.009-0.058,0.009-0.087v-6.668H28.36z"/><path d="M9,16.824l-6.015,6.021v-3.25c0-0.868-0.672-1.568-1.493-1.57c-0.824,0-1.49,0.702-1.49,1.57L0,26.264c0,0.029,0.008,0.059,0.01,0.087c-0.002,0.021-0.006,0.038-0.008,0.061c0.002,0.825,0.712,1.49,1.592,1.49h6.762c0.879,0,1.59-0.666,1.59-1.49c0-0.822-0.711-1.489-1.59-1.491H5.121l5.989-5.987c0.58-0.582,0.58-1.527,0-2.109C10.527,16.241,9.584,16.241,9,16.824z"/><path d="M19.359,11.535l6.018-6.017v3.25c0,0.865,0.673,1.565,1.492,1.568c0.826,0,1.491-0.703,1.491-1.568V2.097c0-0.029-0.006-0.059-0.009-0.085c0.003-0.021,0.006-0.041,0.009-0.062c-0.003-0.826-0.712-1.491-1.592-1.491h-6.761c-0.881,0-1.591,0.665-1.591,1.491c0,0.821,0.71,1.49,1.591,1.492h3.235l-5.989,5.987c-0.582,0.581-0.582,1.524,0,2.105C17.835,12.12,18.777,12.12,19.359,11.535z"/><path d="M5.121,3.442h3.234c0.879-0.002,1.59-0.671,1.59-1.492c0-0.826-0.711-1.491-1.59-1.491H1.594c-0.88,0-1.59,0.665-1.592,1.491C0.004,1.971,0.008,1.991,0.01,2.012C0.008,2.038,0,2.067,0,2.097l0.002,6.672c0,0.865,0.666,1.568,1.49,1.568c0.821-0.003,1.493-0.703,1.493-1.568v-3.25L9,11.535c0.584,0.585,1.527,0.585,2.11,0c0.58-0.581,0.58-1.524,0-2.105L5.121,3.442z"/></g><g class="Capa_1_253_"></g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>',smallscreenIcon:'<svg version="1.1" class="Capa_1" x="0px" y="0px" viewBox="0 0 28.359 28.359" style="enable-background:new 0 0 28.359 28.359;" xml:space="preserve"><g><g class="c116_arrows"><path d="M21.935,19.368h3.235c0.878-0.003,1.589-0.67,1.589-1.492c0-0.824-0.711-1.492-1.589-1.492h-6.764c-0.879,0-1.59,0.668-1.591,1.492c0.001,0.019,0.007,0.041,0.007,0.061c0,0.027-0.007,0.057-0.007,0.086v6.673c0,0.864,0.666,1.566,1.49,1.566c0.822-0.002,1.492-0.702,1.492-1.566v-3.252l6.018,6.02c0.582,0.583,1.525,0.583,2.108,0c0.58-0.582,0.58-1.526,0-2.108L21.935,19.368z"/><path d="M11.543,17.876c-0.002-0.824-0.712-1.492-1.592-1.492H3.189c-0.877,0-1.593,0.668-1.593,1.492c0,0.822,0.716,1.489,1.593,1.492h3.235l-5.991,5.986c-0.577,0.582-0.577,1.526,0,2.108c0.584,0.583,1.527,0.583,2.108,0l6.019-6.02v3.252c0,0.864,0.67,1.564,1.491,1.566c0.826,0,1.491-0.702,1.491-1.566v-6.673c0-0.029-0.008-0.059-0.008-0.086C11.535,17.917,11.541,17.895,11.543,17.876z"/><path d="M16.815,10.479c0.001,0.824,0.712,1.491,1.591,1.491h6.764c0.878,0,1.589-0.667,1.589-1.491c0-0.822-0.711-1.487-1.589-1.489h-3.235l5.989-5.987c0.58-0.584,0.58-1.528,0-2.109c-0.583-0.582-1.526-0.582-2.108,0l-6.018,6.02V3.662c0-0.867-0.67-1.568-1.492-1.568c-0.824,0-1.49,0.701-1.49,1.568v6.671c0,0.03,0.007,0.057,0.007,0.087C16.822,10.44,16.816,10.456,16.815,10.479z"/><path d="M10.052,2.094c-0.821,0-1.491,0.701-1.491,1.568v3.251l-6.019-6.02c-0.581-0.582-1.524-0.582-2.108,0c-0.577,0.581-0.577,1.525,0,2.109l5.991,5.987H3.189c-0.876,0.003-1.592,0.668-1.592,1.49c0,0.824,0.716,1.491,1.593,1.491h6.761c0.88,0,1.59-0.667,1.592-1.491c-0.002-0.023-0.008-0.039-0.008-0.06c0-0.03,0.008-0.057,0.008-0.087v-6.67C11.543,2.795,10.878,2.094,10.052,2.094z"/></g><g class="Capa_1_156_"></g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>',myGuide:'<svg  width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M0 15.555C0 15.555 8.838 12.372 10.606 10.606C12.374 8.838 15.555 0 15.555 0C15.555 0 6.717 3.183 4.95 4.95C3.183 6.717 0 15.555 0 15.555ZM6.364 6.364L9.192 9.192C9.899 9.899 2.829 12.727 2.829 12.727C2.829 12.727 5.657 5.657 6.364 6.364Z" fill="#6f708b" /></svg>',myShow:'<svg  width="20" height="11" viewBox="0 0 20 11" fill="none"><path d="M13.0465 1.05294L13.0896 1.09273H13.1482H15.1375C17.731 1.09273 19.8499 3.27659 19.85 5.97134C19.85 8.66605 17.7312 10.85 15.1377 10.85C12.5442 10.85 10.4253 8.66604 10.4253 5.97134C10.4253 5.93554 10.4256 5.89996 10.4264 5.86449L10.4299 5.71111H10.2764H9.72347H9.57026L9.5735 5.86429C9.57426 5.90007 9.57464 5.93568 9.57464 5.97134C9.57464 8.66605 7.45583 10.85 4.86234 10.85C2.26881 10.85 0.15 8.66605 0.15 5.97134C0.15 3.27659 2.2688 1.09273 4.86234 1.09273H6.85159H6.91026L6.95335 1.05293C7.5463 0.50539 8.69319 0.15 9.9999 0.15C11.3066 0.15 12.4535 0.505438 13.0465 1.05294ZM1.82725 5.97134C1.82725 7.69467 3.18397 9.10517 4.86234 9.10517C6.54076 9.10517 7.89749 7.69467 7.89749 5.97134C7.89749 4.24802 6.54077 2.83746 4.86234 2.83746C3.18392 2.83746 1.82725 4.24802 1.82725 5.97134ZM8.69265 3.04H11.3065C11.705 3.04 12.0195 2.70646 12.0195 2.30772C12.0195 1.90897 11.705 1.57544 11.3065 1.57544H8.69265C8.29462 1.57544 7.98026 1.9091 7.98026 2.30772C7.98026 2.70639 8.29463 3.04 8.69265 3.04ZM12.1023 5.97134C12.1023 7.69467 13.459 9.10517 15.1375 9.10517C16.8159 9.10517 18.1726 7.69466 18.1726 5.97134C18.1726 4.24802 16.8157 2.83746 15.1375 2.83746C13.459 2.83746 12.1023 4.24802 12.1023 5.97134Z" fill="#6f708b" stroke="#cfd0dd" stroke-width="0.3" /></svg>',myBot:'<svg  width="22" height="23" viewBox="0 0 22 23" fill="none"><path d="M5.14433 17.2464C3.32333 17.2464 1.84711 18.722 1.84711 20.5422V23H3.53993V21.2977C3.53993 19.9325 4.6471 18.8258 6.01285 18.8258H15.4006C16.7663 18.8258 17.8735 19.9325 17.8735 21.2977V23H19.5665V20.5422C19.5665 18.722 18.0903 17.2464 16.2693 17.2464H5.14433Z" fill="#6f708b" /><path d="M0 9.98398C0 9.08054 0.73269 8.34815 1.63651 8.34815H2.25725V11.6198H1.63651C0.732691 11.6198 0 10.8874 0 9.98398Z" fill="#6f708b" /><path d="M21.4118 9.98398C21.4118 9.08054 20.6791 8.34815 19.7753 8.34815H19.1545V11.6198H19.7753C20.6791 11.6198 21.4118 10.8874 21.4118 9.98398Z" fill="#6f708b" /><path d="M10.4232 9.98398C10.4232 10.8874 9.69048 11.6198 8.78666 11.6198C7.88285 11.6198 7.15016 10.8874 7.15016 9.98398C7.15016 9.08054 7.88285 8.34815 8.78666 8.34815C9.69048 8.34815 10.4232 9.08054 10.4232 9.98398Z" fill="#6f708b" /><path d="M14.3746 9.98398C14.3746 10.8874 13.6419 11.6198 12.7381 11.6198C11.8342 11.6198 11.1016 10.8874 11.1016 9.98398C11.1016 9.08054 11.8342 8.34815 12.7381 8.34815C13.6419 8.34815 14.3746 9.08054 14.3746 9.98398Z" fill="#6f708b" /><path d="M10.0287 2.76082C10.0287 2.6698 10.1025 2.59602 10.1936 2.59602H11.6697C11.7607 2.59602 11.8345 2.6698 11.8345 2.76082V5.98051H10.0287V2.76082Z" fill="#6f708b" /><path d="M8.69162 4.62529H7.06454C5.24354 4.62529 3.76732 6.1009 3.76732 7.92116V12.1598C3.76732 13.98 5.24354 15.4557 7.06455 15.4557H14.3522C16.1732 15.4557 17.6494 13.98 17.6494 12.1598V7.92116C17.6494 6.1009 16.1732 4.62529 14.3522 4.62529H13.1746V5.86756H13.6535C15.0192 5.86756 16.1264 6.97427 16.1264 8.33946V11.7441C16.1264 13.1093 15.0192 14.216 13.6535 14.216H7.7645C6.39874 14.216 5.29158 13.1093 5.29158 11.7441V8.33946C5.29158 6.97426 6.39874 5.86756 7.7645 5.86756H8.69162V4.62529Z" fill="#6f708b" /><path d="M11.8345 0.90253C11.8345 1.40098 11.4303 1.80506 10.9316 1.80506C10.433 1.80506 10.0287 1.40098 10.0287 0.90253C10.0287 0.404077 10.433 0 10.9316 0C11.4303 0 11.8345 0.404077 11.8345 0.90253Z" fill="#6f708b" /></svg>',myTest:'<svg  width="20" height="26" viewBox="0 0 20 26" fill="none"><path d="M1.54651 21.1221V5.72034H3.75581V6.61319C3.75581 7.05962 4.08721 7.39444 4.52907 7.39444H12.0407C12.4826 7.39444 12.814 7.05962 12.814 6.61319V5.72034H15.0233V12.0819V14.3141H16.5698V12.64V5.05069C16.5698 4.60426 16.2384 4.26944 15.7965 4.26944H12.814V3.37659C12.814 2.93016 12.4826 2.59534 12.0407 2.59534H11.157C10.936 0.921228 9.5 -0.194843 7.84302 0.0283712C6.51744 0.139978 5.52326 1.25605 5.30232 2.59534H4.52907C4.08721 2.59534 3.75581 2.93016 3.75581 3.37659V4.26944H0.773256C0.331395 4.26944 0 4.60426 0 5.05069V21.9034C0 22.3498 0.331395 22.6846 0.773256 22.6846H9.38953V21.1221H6.73837H1.54651ZM8.28488 1.47926C8.94767 1.47926 9.5 1.92569 9.72093 2.59534H6.84884C6.9593 1.92569 7.62209 1.47926 8.28488 1.47926ZM5.19186 4.15784H11.2674V5.83194H5.19186V4.15784Z" fill="#6f708b" /><circle cx="12.5" cy="18.5" r="6.7" fill="white" stroke="#6f708b" stroke-width="1.6" /><path d="M11.6804 20.9037C11.6136 20.9655 11.5224 21 11.4277 21C11.333 21 11.2419 20.9655 11.1751 20.9037L9.15707 19.047C8.94764 18.8544 8.94764 18.542 9.15707 18.3497L9.40975 18.1172C9.61924 17.9246 9.95844 17.9246 10.1679 18.1172L11.4277 19.2762L14.8321 16.1445C15.0416 15.9518 15.3812 15.9518 15.5902 16.1445L15.8429 16.377C16.0524 16.5696 16.0524 16.882 15.8429 17.0743L11.6804 20.9037Z" fill="#6f708b" /></svg>',vlab:'<svg  width="27" height="27" viewBox="0 0 27 27" fill="none"><path d="M2.2613 3.68801C2.2613 4.32028 2.44879 4.93835 2.80006 5.46406C3.15133 5.98977 3.6506 6.39951 4.23474 6.64147C4.81888 6.88343 5.46165 6.94673 6.08177 6.82338C6.70188 6.70004 7.2715 6.39557 7.71858 5.94849C8.16566 5.50141 8.47013 4.93179 8.59347 4.31168C8.71682 3.69156 8.65352 3.04879 8.41156 2.46465C8.1696 1.88051 7.75986 1.38124 7.23415 1.02997C6.70844 0.6787 6.09037 0.491211 5.4581 0.491211C4.61048 0.491926 3.79777 0.82896 3.19841 1.42832C2.59905 2.02768 2.26202 2.84039 2.2613 3.68801ZM7.3049 3.68801C7.3049 4.05327 7.19659 4.41033 6.99366 4.71404C6.79073 5.01774 6.5023 5.25445 6.16484 5.39423C5.82738 5.53401 5.45605 5.57058 5.09781 5.49933C4.73956 5.42807 4.4105 5.25218 4.15222 4.9939C3.89394 4.73562 3.71805 4.40655 3.64679 4.0483C3.57553 3.69006 3.6121 3.31873 3.75188 2.98127C3.89166 2.64381 4.12837 2.35538 4.43207 2.15245C4.73578 1.94952 5.09284 1.84121 5.4581 1.84121C5.94768 1.84193 6.41701 2.03673 6.7632 2.38291C7.10938 2.7291 7.30419 3.19843 7.3049 3.68801Z" fill="#6f708b" /><path d="M0.673538 15.4681C0.718389 15.8743 0.859332 16.2639 1.0847 16.6048C1.31007 16.9457 1.61339 17.2279 1.96954 17.4283L3.02254 25.1341C3.06563 25.5122 3.24629 25.8611 3.5301 26.1146C3.81391 26.368 4.18104 26.5082 4.56154 26.5084H6.31114C6.69205 26.5081 7.05953 26.3676 7.3434 26.1136C7.62727 25.8596 7.80767 25.5099 7.85014 25.1314L8.36854 20.4091L9.39994 12.5251L10.5555 13.4782C10.8832 13.7488 11.2936 13.899 11.7185 13.9039C12.1434 13.9088 12.5572 13.7681 12.891 13.5052L16.374 10.7593C16.7394 10.4776 16.9892 10.072 17.0762 9.61895C17.1633 9.16587 17.0816 8.6966 16.8465 8.29959C16.7095 8.07538 16.5264 7.88275 16.3095 7.7344C16.0926 7.58605 15.8467 7.48534 15.588 7.43892C15.3294 7.39249 15.0638 7.4014 14.8088 7.46504C14.5538 7.52869 14.3152 7.64564 14.1087 7.80819L11.7651 9.65499L9.39994 7.70289C9.06707 7.42796 8.64906 7.27717 8.21734 7.27629H7.13734C7.01742 7.27254 6.89823 7.29612 6.78877 7.34524C6.67931 7.39435 6.58246 7.46772 6.50554 7.55979L5.42554 8.89359L4.37254 7.57329C4.29919 7.48032 4.20565 7.40526 4.09899 7.3538C3.99233 7.30234 3.87536 7.27584 3.75694 7.27629H2.92804C2.51451 7.2765 2.10572 7.36425 1.72854 7.53377C1.35136 7.7033 1.01435 7.95076 0.739666 8.25987C0.464983 8.56899 0.258855 8.93275 0.13484 9.32724C0.0108257 9.72173 -0.0282655 10.138 0.0201379 10.5487L0.673538 15.4681ZM1.75354 9.15549C1.89996 8.98611 2.08112 8.85022 2.2847 8.75705C2.48829 8.66387 2.70954 8.61559 2.93344 8.61549H3.48964L4.69924 10.1248C4.788 10.2362 4.90073 10.3261 5.02905 10.3879C5.15736 10.4498 5.29796 10.4819 5.44039 10.4819C5.58282 10.4819 5.72342 10.4498 5.85173 10.3879C5.98004 10.3261 6.09277 10.2362 6.18154 10.1248L7.39384 8.61279H8.22004C8.33834 8.61212 8.45309 8.65324 8.54404 8.72889L11.3385 11.0428C11.4586 11.1397 11.6082 11.1925 11.7624 11.1925C11.9167 11.1925 12.0663 11.1397 12.1863 11.0428L14.9592 8.85849C15.0492 8.78771 15.1606 8.74963 15.2751 8.75049C15.363 8.75057 15.4493 8.7732 15.5259 8.81623C15.6025 8.85925 15.6668 8.92121 15.7125 8.99619C15.7747 9.1115 15.7927 9.24546 15.7634 9.37311C15.7341 9.50077 15.6594 9.61342 15.5532 9.69009L12.054 12.4441C11.9626 12.5152 11.85 12.5539 11.7341 12.5539C11.6182 12.5539 11.5056 12.5152 11.4141 12.4441L9.31894 10.7134C9.22602 10.6367 9.11426 10.5862 8.99527 10.5673C8.87628 10.5484 8.75438 10.5616 8.64225 10.6057C8.53011 10.6498 8.43182 10.7231 8.35758 10.818C8.28333 10.9129 8.23584 11.0259 8.22004 11.1454L7.01854 20.2498L6.51094 24.9829C6.50564 25.0316 6.48264 25.0767 6.4463 25.1095C6.40997 25.1424 6.36282 25.1607 6.31384 25.1611H4.56154C4.51031 25.1599 4.46141 25.1395 4.42443 25.104C4.38746 25.0686 4.36509 25.0205 4.36174 24.9694L3.25744 16.8829C3.24058 16.762 3.19125 16.6479 3.11471 16.5528C3.03816 16.4577 2.93725 16.3852 2.82274 16.3429C2.60401 16.2635 2.41204 16.1242 2.26879 15.9409C2.12554 15.7575 2.03681 15.5375 2.01274 15.3061L1.34854 10.384C1.32354 10.1619 1.34652 9.93709 1.41592 9.72468C1.48533 9.51227 1.59954 9.31725 1.75084 9.15279L1.75354 9.15549Z" fill="#6f708b" /><path d="M10.237 1.34977V6.20977C10.237 6.38879 10.3081 6.56048 10.4347 6.68706C10.5613 6.81365 10.733 6.88477 10.912 6.88477C11.091 6.88477 11.2627 6.81365 11.3893 6.68706C11.5159 6.56048 11.587 6.38879 11.587 6.20977V2.02207H25.1086V15.2764H10.912C10.733 15.2764 10.5613 15.3475 10.4347 15.4741C10.3081 15.6007 10.237 15.7723 10.237 15.9514C10.237 16.1304 10.3081 16.3021 10.4347 16.4287C10.5613 16.5553 10.733 16.6264 10.912 16.6264H17.662V21.1192H13.4446C13.2651 21.1192 13.089 21.1682 12.9353 21.261C12.7816 21.3538 12.6561 21.4868 12.5725 21.6457L11.0686 24.4591C11.0271 24.5374 11.0015 24.6232 10.9931 24.7115C10.9848 24.7997 10.9939 24.8888 11.02 24.9735C11.0461 25.0583 11.0886 25.137 11.1451 25.2054C11.2016 25.2737 11.2711 25.3302 11.3494 25.3717C11.4278 25.4132 11.5135 25.4388 11.6018 25.4471C11.6901 25.4555 11.7791 25.4463 11.8639 25.4203C11.9486 25.3942 12.0274 25.3517 12.0957 25.2952C12.164 25.2386 12.2205 25.1692 12.262 25.0909L13.6498 22.4719H23.0323L24.4201 25.0909C24.4616 25.1692 24.5181 25.2386 24.5864 25.2952C24.6547 25.3517 24.7335 25.3942 24.8183 25.4203C24.903 25.4463 24.992 25.4555 25.0803 25.4471C25.1686 25.4388 25.2544 25.4132 25.3327 25.3717C25.4111 25.3302 25.4805 25.2737 25.537 25.2054C25.5935 25.137 25.636 25.0583 25.6621 24.9735C25.6882 24.8888 25.6973 24.7997 25.689 24.7115C25.6806 24.6232 25.655 24.5374 25.6135 24.4591L24.1231 21.6457C24.0395 21.4868 23.9141 21.3538 23.7604 21.261C23.6067 21.1682 23.4305 21.1192 23.251 21.1192H19.0228V16.6264H25.7728C25.9518 16.6264 26.1235 16.5553 26.2501 16.4287C26.3767 16.3021 26.4478 16.1304 26.4478 15.9514V1.34977C26.4478 1.17074 26.3767 0.999056 26.2501 0.872469C26.1235 0.745881 25.9518 0.674766 25.7728 0.674766H10.912C10.733 0.674766 10.5613 0.745881 10.4347 0.872469C10.3081 0.999056 10.237 1.17074 10.237 1.34977Z" fill="#6f708b" /></svg>',copyGuideIcon:'<svg version="1.2" overflow="visible" preserveAspectRatio="none" viewBox="0 0 450 514" width="14" height="16"><g transform="translate(1, 1)"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM352 32.491a15.88 15.88 0 0 1 7.431 4.195l51.882 51.883A15.885 15.885 0 0 1 415.508 96H352V32.491zM288 464c0 8.822-7.178 16-16 16H48c-8.822 0-16-7.178-16-16V144c0-8.822 7.178-16 16-16h80v240c0 26.51 21.49 48 48 48h112v48zm128-96c0 8.822-7.178 16-16 16H176c-8.822 0-16-7.178-16-16V48c0-8.822 7.178-16 16-16h144v72c0 13.2 10.8 24 24 24h72v240z" vector-effect="non-scaling-stroke" /></g></svg>',historyIcon:'<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1"  ><g class="3.-Style" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g class="UI-Icons" transform="translate(-571.000000, -535.000000)" fill="#4D4D4D"><g class="Group" transform="translate(571.000000, 535.000000)"><path d="M7.66676667,0 C4.76476667,0 2.06576667,1.60966667 0.666766667,4.13233333 L0.666766667,0.666666667 C0.666766667,0.482333333 0.517766667,0.333333333 0.333433333,0.333333333 C0.1491,0.333333333 0.0001,0.482333333 0.0001,0.666666667 L0.0001,5 C0.0001,5.18433333 0.1491,5.33333333 0.333433333,5.33333333 L4.66676667,5.33333333 C4.8511,5.33333333 5.0001,5.18433333 5.0001,5 C5.0001,4.81566667 4.8511,4.66666667 4.66676667,4.66666667 L1.1381,4.66666667 C2.3841,2.23266667 4.92643333,0.666666667 7.66676667,0.666666667 C11.7104333,0.666666667 15.0001,3.95633333 15.0001,8 C15.0001,12.0436667 11.7104333,15.3333333 7.66676667,15.3333333 C4.57776667,15.3333333 1.6281,13.009 0.652433333,9.80666667 C0.598766667,9.63066667 0.4131,9.53133333 0.236433333,9.58466667 C0.0604333333,9.63833333 -0.0389,9.82466667 0.0144333333,10.0006667 C1.07376667,13.477 4.29176667,16 7.66676667,16 C12.0777667,16 15.6667667,12.411 15.6667667,8 C15.6667667,3.589 12.0777667,0 7.66676667,0" class="Fill-6"></path><path d="M7.64922281,2.33333333 C7.47459123,2.33333333 7.33343333,2.47449123 7.33343333,2.64912281 L7.33343333,8.01754386 C7.33343333,8.19217544 7.47459123,8.33333333 7.64922281,8.33333333 L11.4386965,8.33333333 C11.6133281,8.33333333 11.754486,8.19217544 11.754486,8.01754386 C11.754486,7.84291228 11.6133281,7.70175439 11.4386965,7.70175439 L7.96501228,7.70175439 L7.96501228,2.64912281 C7.96501228,2.47449123 7.82385439,2.33333333 7.64922281,2.33333333" class="Fill-8"></path></g></g></g></svg>',pdfIcon:'<svg class="Layer_1" data-name="Layer 1"  viewBox="0 0 200 200"><defs><style>.cls-1,.cls-3,.cls-4{fill:#005BF0;}.cls-1{opacity:0.3;}.cls-2{fill:#218e79;}.cls-4{font-size:31.1px;font-family:NotoSerif-Bold, Noto Serif;font-weight:700;}</style></defs><path class="cls-1" d="M44.73,184.74H155.27a7.37,7.37,0,0,0,7.37-7.37V52.1L125.79,15.26H44.73a7.37,7.37,0,0,0-7.37,7.37V177.37A7.37,7.37,0,0,0,44.73,184.74Z"/><path class="cls-2" d="M125.79,15.26V44.73a7.37,7.37,0,0,0,7.37,7.37h29.48Z"/><path class="cls-3" d="M163.51,52.05a.85.85,0,0,0,0-.23l0-.09a.87.87,0,0,0-.18-.26L126.42,14.63a.83.83,0,0,0-.26-.17l-.08,0a1,1,0,0,0-.23,0H44.73a8.26,8.26,0,0,0-8.25,8.26V177.37a8.26,8.26,0,0,0,8.25,8.26H155.27a8.26,8.26,0,0,0,8.25-8.26V52.1A.09.09,0,0,0,163.51,52.05ZM126.68,17.4l33.81,33.81H133.16a6.48,6.48,0,0,1-6.48-6.48Zm-82-1.25H124.9V44.73A8.27,8.27,0,0,0,133.16,53h28.59V161.73a.87.87,0,0,0-.39-.1H38.25v-139A6.48,6.48,0,0,1,44.73,16.15Zm110.54,167.7H44.73a6.48,6.48,0,0,1-6.48-6.48v-14H161.36a.87.87,0,0,0,.39-.1v14.07A6.48,6.48,0,0,1,155.27,183.85Z"/><text class="cls-4" transform="translate(69.78 109.96)">PDF</text></svg>',guidePlayIconShowme:'<svg  width="9" height="13" viewBox="0 0 9 13" fill="none"><path opacity="0.3" d="M0 0L9 6.5L0 13V0Z" fill="black" /></svg>',dragStep:'<svg  width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M18.9534 9.77099L18.825 9.57658L16.425 7.17658C16.191 6.94257 15.8094 6.94257 15.5766 7.17658C15.3426 7.4106 15.3426 7.791 15.5766 8.02497L16.9518 9.40018H10.6002V3.04861L11.9754 4.42382C12.2082 4.65783 12.5898 4.65783 12.8238 4.42382C13.0566 4.1898 13.0566 3.8094 12.8238 3.57543L10.4238 1.17539L10.4178 1.1718L10.2294 1.04701L10.0002 1.00019H9.99778L9.77098 1.04701L9.58257 1.1718L9.57536 1.17539L7.17536 3.57539C6.94134 3.8094 6.94134 4.1898 7.17536 4.42378C7.40938 4.65776 7.78977 4.6578 8.02375 4.42378L9.40017 3.04857V9.40018H3.04859L4.42381 8.02497C4.65782 7.79096 4.65782 7.41056 4.42381 7.17658C4.18979 6.9426 3.80939 6.94257 3.57541 7.17658L1.17537 9.57658L1.17179 9.58259L1.047 9.77099L1.00018 10.0002V10.0026L1.047 10.2294L1.17179 10.4166L1.17537 10.4238L3.57538 12.8238C3.80939 13.0579 4.18979 13.0579 4.42377 12.8238C4.65778 12.591 4.65778 12.2094 4.42377 11.9755L3.04859 10.6002H9.40021V16.9518L8.025 15.5766C7.79098 15.3438 7.41058 15.3438 7.17661 15.5766C6.94259 15.8106 6.94259 16.1922 7.17661 16.425L9.57661 18.825L9.77102 18.9546L9.99782 19.0002H10.0002L10.2294 18.9534L10.4238 18.825L12.8238 16.425C13.0566 16.1909 13.0566 15.8094 12.8238 15.5766C12.5898 15.3426 12.2082 15.3426 11.9754 15.5766L10.6002 16.9518V10.6002H16.9518L15.5766 11.9754C15.3438 12.2082 15.3438 12.5898 15.5766 12.8238C15.8106 13.0566 16.1922 13.0566 16.425 12.8238L18.825 10.4238L18.9546 10.2294L19.0002 10.0026V10.0002L18.9534 9.77099Z" fill="#6F708B"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.2357 9.65408L19.3002 9.96985V10.0325L19.2371 10.3466L19.0582 10.6149L16.6372 13.0359C16.2869 13.3862 15.7158 13.3854 15.3651 13.0365L15.364 13.0354C15.015 12.6847 15.0143 12.1135 15.3645 11.7633L16.2276 10.9002H10.9002V16.2275L11.7628 15.365C11.7628 15.3649 11.7627 15.3651 11.7628 15.365C12.1132 15.013 12.6852 15.0136 13.036 15.3644C13.3862 15.7147 13.3855 16.2858 13.0365 16.6365L10.6145 19.0586L10.3463 19.2357L10.0306 19.3002H9.96797L9.65388 19.237L9.3855 19.0581L6.96504 16.6377C6.96494 16.6376 6.96514 16.6378 6.96504 16.6377C6.61313 16.2873 6.61372 15.7152 6.96449 15.3645C7.31551 15.0152 7.88556 15.0147 8.23659 15.3639L9.10022 16.2276V10.9002H3.77284L4.6359 11.7633C4.6359 11.7633 4.63589 11.7633 4.6359 11.7633C4.98668 12.1141 4.98756 12.6858 4.63565 13.0362C4.28447 13.3872 3.71433 13.387 3.36326 13.036L0.928601 10.6013L0.911644 10.5672L0.76501 10.3473L0.700195 10.0333V9.96989L0.764737 9.65389L0.917835 9.42274L0.93694 9.39077L3.36328 6.96447C3.36328 6.96446 3.36327 6.96447 3.36328 6.96447C3.71445 6.61326 4.2848 6.61336 4.63593 6.96443C4.98714 7.31558 4.98711 7.88594 4.63595 8.23711L3.77287 9.10019H9.10018V3.77239L8.23591 4.6359C8.23588 4.63593 8.23595 4.63586 8.23591 4.6359C7.88473 4.98701 7.31436 4.98697 6.96326 4.63593C6.61205 4.28478 6.61208 3.71442 6.96324 3.36326L9.3979 0.928601L9.43239 0.911446L9.65362 0.764917L9.96716 0.700195H10.0305L10.3465 0.76474L10.5776 0.917835L10.6096 0.93694L13.0359 3.3633C13.3852 3.71432 13.3857 4.28436 13.0365 4.6354C12.6857 4.9862 12.1134 4.9876 11.763 4.63571C11.7629 4.6356 11.7631 4.63581 11.763 4.63571L10.9002 3.77287V9.10019H16.2276L15.3645 8.23712C15.3645 8.23712 15.3645 8.23713 15.3645 8.23712C15.0134 7.88606 15.0133 7.3159 15.3642 6.96472C15.7146 6.61279 16.2864 6.61367 16.6371 6.96445L19.0586 9.38592L19.2357 9.65408ZM15.5766 7.17658C15.3426 7.4106 15.3426 7.791 15.5766 8.02497L16.9518 9.40018H10.6002V3.04861L11.9754 4.42382C12.2082 4.65783 12.5898 4.65783 12.8238 4.42382C13.0566 4.1898 13.0566 3.8094 12.8238 3.57543L10.4238 1.17539L10.4178 1.1718L10.2294 1.04701L10.0002 1.00019H9.99778L9.77098 1.04701L9.58257 1.1718L9.57536 1.17539L7.17536 3.57539C6.94134 3.8094 6.94134 4.1898 7.17536 4.42378C7.40938 4.65776 7.78977 4.6578 8.02375 4.42378L9.40017 3.04857V9.40018H3.04859L4.42381 8.02497C4.65782 7.79096 4.65782 7.41056 4.42381 7.17658C4.18979 6.9426 3.80939 6.94257 3.57541 7.17658L1.17537 9.57658L1.17179 9.58259L1.047 9.77099L1.00018 10.0002V10.0026L1.047 10.2294L1.17179 10.4166L1.17537 10.4238L3.57538 12.8238C3.80939 13.0579 4.18979 13.0579 4.42377 12.8238C4.65778 12.591 4.65778 12.2094 4.42377 11.9755L3.04859 10.6002H9.40021V16.9518L8.025 15.5766C7.79098 15.3438 7.41058 15.3438 7.17661 15.5766C6.94259 15.8106 6.94259 16.1922 7.17661 16.425L9.57661 18.825L9.77102 18.9546L9.99782 19.0002H10.0002L10.2294 18.9534L10.4238 18.825L12.8238 16.425C13.0566 16.1909 13.0566 15.8094 12.8238 15.5766C12.5898 15.3426 12.2082 15.3426 11.9754 15.5766L10.6002 16.9518V10.6002H16.9518L15.5766 11.9754C15.3438 12.2082 15.3438 12.5898 15.5766 12.8238C15.8106 13.0566 16.1922 13.0566 16.425 12.8238L18.825 10.4238L18.9546 10.2294L19.0002 10.0026V10.0002L18.9534 9.77099L18.825 9.57658L16.425 7.17658C16.191 6.94257 15.8094 6.94257 15.5766 7.17658Z" fill="#6F708B"/></svg>',startPoint:'<svg version="1.2" overflow="visible" preserveAspectRatio="none" viewBox="0 0 16.00001480672206 30.000002376293313" width="16.00001480672206" height="20.000002376293313" style="padding-right:5px;"><g transform="translate(0, 0)"><g transform="translate(0.000007403361028701504, 0.000002376293311883793) rotate(0)"><path d="M8,18.21576c-0.67536,0 -1.33571,-0.08038 -1.99605,-0.25723v10.96433c0.01501,0.59484 0.45024,1.06106 1.00553,1.07714h1.99605c0.55529,-0.01608 0.99052,-0.4823 1.00553,-1.07714v-10.96433c-0.66035,0.17684 -1.33571,0.25723 -2.01106,0.25723zM8,0.00083c-2.13113,-0.03215 -4.1722,0.86814 -5.65799,2.50797c-1.53081,1.5916 -2.37125,3.77803 -2.34124,6.06093c-0.03002,2.28289 0.81043,4.46933 2.34124,6.06093c1.48578,1.63983 3.52686,2.54012 5.65799,2.50797c2.13113,0.03215 4.1722,-0.86814 5.65799,-2.50797c1.53081,-1.5916 2.37125,-3.77803 2.34124,-6.06093c0.03002,-2.28289 -0.81043,-4.46933 -2.34124,-6.06093c-1.48578,-1.63983 -3.52686,-2.54012 -5.65799,-2.50797zM8,3.74671c-2.49132,0 -4.50238,2.15428 -4.50238,4.82302c0,0.30546 -0.22512,0.54661 -0.51027,0.54661c-0.28515,0 -0.49526,-0.24115 -0.49526,-0.54661c0,-3.2475 2.4613,-5.88408 5.4929,-5.88408h0.01501c0.27014,0 0.49526,0.24115 0.49526,0.53053c0,0.28938 -0.22512,0.53053 -0.49526,0.53053z" style="stroke-width: 0; stroke-linecap: butt; stroke-linejoin: miter; fill: rgb(122, 98, 171);" vector-effect="non-scaling-stroke"/></g><defs><path class="path-1636604223336103" d="M8,18.21576c-0.67536,0 -1.33571,-0.08038 -1.99605,-0.25723v10.96433c0.01501,0.59484 0.45024,1.06106 1.00553,1.07714h1.99605c0.55529,-0.01608 0.99052,-0.4823 1.00553,-1.07714v-10.96433c-0.66035,0.17684 -1.33571,0.25723 -2.01106,0.25723zM8,0.00083c-2.13113,-0.03215 -4.1722,0.86814 -5.65799,2.50797c-1.53081,1.5916 -2.37125,3.77803 -2.34124,6.06093c-0.03002,2.28289 0.81043,4.46933 2.34124,6.06093c1.48578,1.63983 3.52686,2.54012 5.65799,2.50797c2.13113,0.03215 4.1722,-0.86814 5.65799,-2.50797c1.53081,-1.5916 2.37125,-3.77803 2.34124,-6.06093c0.03002,-2.28289 -0.81043,-4.46933 -2.34124,-6.06093c-1.48578,-1.63983 -3.52686,-2.54012 -5.65799,-2.50797zM8,3.74671c-2.49132,0 -4.50238,2.15428 -4.50238,4.82302c0,0.30546 -0.22512,0.54661 -0.51027,0.54661c-0.28515,0 -0.49526,-0.24115 -0.49526,-0.54661c0,-3.2475 2.4613,-5.88408 5.4929,-5.88408h0.01501c0.27014,0 0.49526,0.24115 0.49526,0.53053c0,0.28938 -0.22512,0.53053 -0.49526,0.53053z" vector-effect="non-scaling-stroke"/></defs></g></svg>',guide:'<svg class="mgPlayerJSPreview_guide-icon-{{tour.tour_id}}" width="40" height="40" viewBox="0 0 40 40" fill="none" ng-bind-html="createSvgElmnt() | unsafe"></svg>',mobileGuide:'<svg width="40" height="40" viewBox="0 0 40 40" fill="none" ><rect x="0.7" y="0.7" width="38.6" height="38.6" rx="19.3" fill="#F8F8FB" stroke="#ACADC1" stroke-width="1.4"/><rect x="13.8" y="10.8" width="12.4" height="20.4" rx="1.2" fill="#F8F8FB" stroke="#ACADC1" stroke-width="1.6"/><rect x="14" y="25" width="12" height="0.5" fill="#ACADC1" stroke="#ACADC1"/><circle class="mgPlayerJSPreview_mobile-circle" cx="20" cy="28.5" r="1" fill="#ACADC1"/></svg>',insight:'<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><defs><style>.cls-1 { fill: #ffffff; stroke: #ACADC1; stroke-miterlimit: 10; stroke-width: 1.4;}.cls-2 { fill: #8e8fa6; stroke-width: 0; } </style></defs><circle class="cls-1" cx="24" cy="24" r="22.75" /><path class="cls-2" d="M31.15,14.74a9.73,9.73,0,0,1,1.35,5.18c0,2.13-.82,3.72-2.65,5.95-.16.19-.32.37-.54.59l-.47.48a3.21,3.21,0,0,0-.5.62,6.39,6.39,0,0,0-.41.91,10.62,10.62,0,0,0-.41,1.62c0-.08-.16,1-.21,1.11a.62.62,0,0,1-.1.22.67.67,0,0,1-.6.33h-5a.68.68,0,0,1-.66-.5h0v0l0-.11-.11-.38c-.13-.41-.26-.83-.39-1.23a12,12,0,0,0-.81-2.09,13,13,0,0,0-1.46-1.77l-.38-.43c-.2-.23-.37-.44-.54-.66a7.67,7.67,0,0,1-1.68-5.61,9,9,0,0,1,2.19-5.24A7.8,7.8,0,0,1,23.77,11a9,9,0,0,1,5.62,1.76l-1.05,1a7.77,7.77,0,0,0-4.57-1.31,6.43,6.43,0,0,0-5,2.22A7.57,7.57,0,0,0,16.91,19a6.29,6.29,0,0,0,1.39,4.64c.15.2.3.38.48.59l.36.4a14.73,14.73,0,0,1,1.58,1.92,11.66,11.66,0,0,1,1,2.46c.14.41.27.84.4,1.25v.05h3.95l.09-.51A12.19,12.19,0,0,1,26.63,28a9,9,0,0,1,.51-1.13,5.24,5.24,0,0,1,.71-.9l.49-.5a6,6,0,0,0,.45-.49c1.64-2,2.33-3.33,2.33-5a8.5,8.5,0,0,0-1-4.22Zm-7.89-1.62.26.93a5.64,5.64,0,0,0-2.14.61l-.63-.72A6.4,6.4,0,0,1,23.26,13.12Zm.95,0a7.39,7.39,0,0,1,2.64.59l-.36.87a6.74,6.74,0,0,0-2-.5ZM20,14.47l.62.7-.35.29a5.82,5.82,0,0,0-1.48,2l-.86-.32a6.46,6.46,0,0,1,1.73-2.41C19.74,14.66,19.85,14.56,20,14.47Zm-2.36,3.6.87.32A6.13,6.13,0,0,0,18.36,20l-.92,0a6.81,6.81,0,0,1,.17-2Zm3.5,15h6a.79.79,0,0,1,0,1.57h-6a.79.79,0,0,1,0-1.57Zm.47,2.36H26.8v.31A1.24,1.24,0,0,1,25.57,37H22.81a1.24,1.24,0,0,1-1.23-1.26ZM24.29,18.6h.07q.41,0,7.23-6.88l-6.37,7.74a1.12,1.12,0,0,1,0,.32,1.15,1.15,0,1,1-1.15-1.18Z" /></svg>',wb:'<svg width="30px" height="30px" viewBox="0 0 30 30" version="1.1"  ><g class="All-layouts" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g class="Snooze-push-notification-Copy" transform="translate(-537.000000, -266.000000)"><g class="desktop-monitor-(1)" transform="translate(537.000000, 266.000000)"><rect style="stroke: transparent !important;fill: transparent !important;" class="Rectangle" x="0" y="0" width="30" height="30"></rect><path style="fill: #7AAA16 !important;stroke: transparent !important;" d="M27.8741391,3.67452958 C27.4246035,3.22499396 26.8844069,3 26.2528458,3 L3.29572239,3 C2.66441255,3 2.12411546,3.22499396 1.67427831,3.67452958 C1.22469243,4.12421597 1,4.66446281 1,5.2958229 L1,20.9068457 C1,21.5383566 1.22469243,22.0785531 1.67427831,22.52834 C2.12411546,22.9778757 2.66441255,23.2024676 3.29572239,23.2024676 L11.1013092,23.2024676 C11.1013092,23.5658652 11.0247198,23.9392638 10.8716415,24.3216078 C10.7186637,24.7042533 10.5655853,25.0389048 10.412507,25.3257633 C10.2596297,25.6129736 10.1830906,25.8231422 10.1830906,25.9569726 C10.1830906,26.2056369 10.2739023,26.4213336 10.4556765,26.6026053 C10.6373502,26.7845805 10.8525946,26.875744 11.1013092,26.875744 L18.4476108,26.875744 C18.6963253,26.875744 18.91162,26.7846308 19.0932937,26.6026053 C19.2752187,26.4213839 19.3660304,26.2056872 19.3660304,25.9569726 C19.3660304,25.832942 19.2893405,25.6247334 19.1363124,25.3330503 C18.9832341,25.0415181 18.8301558,24.7015395 18.6772785,24.3145217 C18.5242002,23.9270517 18.447661,23.5564172 18.447661,23.2024676 L26.2532478,23.2024676 C26.8844571,23.2024676 27.4246537,22.9778757 27.8741893,22.52834 C28.323926,22.0786034 28.5487189,21.5384068 28.5487189,20.9068457 L28.5487189,5.2958229 C28.5488697,4.66446281 28.3238757,4.12421597 27.8741391,3.67452958 Z M26.7120807,17.2336195 C26.7120807,17.3580019 26.6667,17.4654482 26.575838,17.556461 C26.4848755,17.6471219 26.3772282,17.6925027 26.2528458,17.6925027 L3.29572239,17.6925027 C3.17144049,17.6925027 3.06379317,17.6471219 2.97293119,17.556461 C2.88211946,17.4651467 2.83663822,17.3580019 2.83663822,17.2336195 L2.83663822,5.2958229 C2.83663822,5.17144049 2.8819687,5.06389368 2.97293119,4.9730317 C3.06384342,4.88232049 3.17149074,4.83673873 3.29572239,4.83673873 L26.2531976,4.83673873 C26.3773789,4.83673873 26.4852273,4.88216972 26.575838,4.9730317 C26.6667,5.06394393 26.7120807,5.17149074 26.7120807,5.2958229 L26.7120807,17.2336195 L26.7120807,17.2336195 Z" class="shape" fill="#7AAA15" fill-rule="nonzero"></path></g></g></g></svg>',tooltipIcon:'<svg width="40" height="40" viewBox="0 0 40 40" fill="none" ><rect x="0.7" y="0.7" width="38.6" height="38.6" rx="19.3" fill="#F8F8FB" stroke="#ACADC1" stroke-width="1.4" /><path d="M21.625 30.75C21.625 31.6475 20.8975 32.375 20 32.375C19.1025 32.375 18.375 31.6475 18.375 30.75C18.375 29.8525 19.1025 29.125 20 29.125C20.8975 29.125 21.625 29.8525 21.625 30.75Z" fill="#ACADC1" stroke="#ACADC1" stroke-width="0.5" /><path d="M21.4375 23.5681L21.25 23.6165V23.8102V26.25C21.25 26.9404 20.6904 27.5 20 27.5C19.3096 27.5 18.75 26.9404 18.75 26.25V22.5C18.75 21.8096 19.3096 21.25 20 21.25C21.7923 21.25 23.25 19.7923 23.25 18C23.25 16.2077 21.7923 14.75 20 14.75C18.2077 14.75 16.75 16.2077 16.75 18C16.75 18.6904 16.1904 19.25 15.5 19.25C14.8096 19.25 14.25 18.6904 14.25 18C14.25 14.8297 16.8297 12.25 20 12.25C23.1703 12.25 25.75 14.8297 25.75 18C25.75 20.6737 23.915 22.9281 21.4375 23.5681Z" fill="#ACADC1" stroke="#ACADC1" stroke-width="0.5" /></svg>',guidePlayIcon:'<svg class="mgPlayerJSPreview_position-center" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M0 15.555C0 15.555 8.838 12.372 10.606 10.606C12.374 8.838 15.555 0 15.555 0C15.555 0 6.717 3.183 4.95 4.95C3.183 6.717 0 15.555 0 15.555ZM6.364 6.364L9.192 9.192C9.899 9.899 2.829 12.727 2.829 12.727C2.829 12.727 5.657 5.657 6.364 6.364Z" fill="#6f708b"/></svg>',doItForMeIcon:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" viewBox="0 0 16 18"><path d="M3.84412 13.4972C2.48336 13.4972 1.38026 14.652 1.38026 16.0765V18H2.64522V16.6678C2.64522 15.5993 3.47256 14.7332 4.49312 14.7332H11.5081C12.5287 14.7332 13.356 15.5993 13.356 16.6678V18H14.6211V16.0765C14.6211 14.652 13.518 13.4972 12.1573 13.4972H3.84412Z" fill="#005BF0" /><path d="M0 7.81355C0 7.10651 0.547505 6.53333 1.22289 6.53333H1.68674V9.09377H1.22289C0.547505 9.09377 0 8.5206 0 7.81355Z" fill="#005BF0" /><path d="M16 7.81355C16 7.10651 15.4525 6.53333 14.7771 6.53333H14.3133V9.09377H14.7771C15.4525 9.09377 16 8.5206 16 7.81355Z" fill="#005BF0" /><path d="M7.78874 7.81355C7.78874 8.5206 7.24124 9.09377 6.56586 9.09377C5.89048 9.09377 5.34297 8.5206 5.34297 7.81355C5.34297 7.10651 5.89048 6.53333 6.56586 6.53333C7.24124 6.53333 7.78874 7.10651 7.78874 7.81355Z" fill="#005BF0" /><path d="M10.7414 7.81355C10.7414 8.5206 10.1939 9.09377 9.51855 9.09377C8.84317 9.09377 8.29567 8.5206 8.29567 7.81355C8.29567 7.10651 8.84317 6.53333 9.51855 6.53333C10.1939 6.53333 10.7414 7.10651 10.7414 7.81355Z" fill="#005BF0" /><path d="M7.494 2.16064C7.494 2.08941 7.54915 2.03167 7.61719 2.03167H8.72019C8.78823 2.03167 8.84339 2.08941 8.84339 2.16064V4.6804H7.494V2.16064Z" fill="#005BF0" /><path d="M6.49483 3.61979H5.279C3.91825 3.61979 2.81514 4.77462 2.81514 6.19917V9.51635C2.81514 10.9409 3.91825 12.0957 5.279 12.0957H10.7247C12.0855 12.0957 13.1886 10.9409 13.1886 9.51635V6.19917C13.1886 4.77462 12.0855 3.61979 10.7247 3.61979H9.84475V4.592H10.2026C11.2232 4.592 12.0505 5.45812 12.0505 6.52654V9.191C12.0505 10.2594 11.2232 11.1255 10.2026 11.1255H5.80204C4.78148 11.1255 3.95415 10.2594 3.95415 9.191V6.52653C3.95415 5.45812 4.78148 4.592 5.80204 4.592H6.49483V3.61979Z" fill="#005BF0" /><path d="M8.84339 0.706328C8.84339 1.09642 8.54131 1.41266 8.16869 1.41266C7.79607 1.41266 7.494 1.09642 7.494 0.706328C7.494 0.316234 7.79607 0 8.16869 0C8.54131 0 8.84339 0.316234 8.84339 0.706328Z" fill="#005BF0" /></svg>',navBar:'<svg width="24" height="16" viewBox="0 0 24 16" fill="none"><path d="M22.935 13.717H10.452C10.1868 13.717 9.9324 13.8223 9.74487 14.0099C9.55733 14.1974 9.45197 14.4517 9.45197 14.717C9.45197 14.9822 9.55733 15.2365 9.74487 15.4241C9.9324 15.6116 10.1868 15.717 10.452 15.717H22.935C23.2002 15.717 23.4545 15.6116 23.6421 15.4241C23.8296 15.2365 23.935 14.9822 23.935 14.717C23.935 14.4517 23.8296 14.1974 23.6421 14.0099C23.4545 13.8223 23.2002 13.717 22.935 13.717ZM22.935 7.24996H10.452C10.1868 7.24996 9.9324 7.35532 9.74487 7.54285C9.55733 7.73039 9.45197 7.98474 9.45197 8.24996C9.45197 8.51518 9.55733 8.76953 9.74487 8.95707C9.9324 9.1446 10.1868 9.24996 10.452 9.24996H22.935C23.2002 9.24996 23.4545 9.1446 23.6421 8.95707C23.8296 8.76953 23.935 8.51518 23.935 8.24996C23.935 7.98474 23.8296 7.73039 23.6421 7.54285C23.4545 7.35532 23.2002 7.24996 22.935 7.24996ZM10.452 2.78296H22.935C23.2002 2.78296 23.4545 2.6776 23.6421 2.49007C23.8296 2.30253 23.935 2.04818 23.935 1.78296C23.935 1.51774 23.8296 1.26339 23.6421 1.07585C23.4545 0.888316 23.2002 0.782959 22.935 0.782959H10.452C10.1868 0.782959 9.9324 0.888316 9.74487 1.07585C9.55733 1.26339 9.45197 1.51774 9.45197 1.78296C9.45197 2.04818 9.55733 2.30253 9.74487 2.49007C9.9324 2.6776 10.1868 2.78296 10.452 2.78296ZM5.73897 3.57496C5.55144 3.38749 5.29714 3.28217 5.03197 3.28217C4.76681 3.28217 4.5125 3.38749 4.32497 3.57496L0.357972 7.54296C0.170501 7.73049 0.0651855 7.98479 0.0651855 8.24996C0.0651855 8.51512 0.170501 8.76943 0.357972 8.95696L4.32497 12.925C4.51357 13.1071 4.76618 13.2079 5.02837 13.2056C5.29057 13.2034 5.54138 13.0982 5.72679 12.9128C5.9122 12.7274 6.01737 12.4766 6.01965 12.2144C6.02192 11.9522 5.92113 11.6996 5.73897 11.511L2.47897 8.24996L5.73897 4.98896C5.92644 4.80143 6.03176 4.54712 6.03176 4.28196C6.03176 4.01679 5.92644 3.76249 5.73897 3.57496Z" fill="#555555"/></svg>',settings:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" viewBox="4 3 20 20" fill="none"><g clip-path="url(#clip0_3195_94)"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.608 14.08C18.4413 14.7777 18.1645 15.4444 17.788 16.055C18.0254 16.3613 18.1432 16.7437 18.1192 17.1305C18.0953 17.5173 17.9314 17.8822 17.658 18.157C17.3834 18.4305 17.0185 18.5947 16.6317 18.6188C16.2449 18.6429 15.8625 18.5253 15.556 18.288C14.9449 18.6649 14.2775 18.9417 13.579 19.108C13.5297 19.4922 13.3423 19.8453 13.0517 20.1015C12.7612 20.3576 12.3873 20.4993 12 20.5C11.6125 20.4995 11.2384 20.358 10.9476 20.1018C10.6569 19.8456 10.4693 19.4924 10.42 19.108C9.72228 18.9413 9.05558 18.6645 8.445 18.288C8.13865 18.5254 7.75633 18.6432 7.36949 18.6192C6.98265 18.5953 6.61776 18.4314 6.343 18.158C6.06949 17.8834 5.90535 17.5185 5.88124 17.1317C5.85713 16.7449 5.97471 16.3625 6.212 16.056C5.83522 15.4448 5.5584 14.7774 5.392 14.079C5.00781 14.0297 4.65469 13.8423 4.39854 13.5517C4.1424 13.2612 4.00074 12.8873 4 12.5C4 11.688 4.608 11.024 5.392 10.92C5.55866 10.222 5.83547 9.55494 6.212 8.944C5.97513 8.6378 5.85771 8.25591 5.88163 7.86952C5.90555 7.48314 6.06918 7.11865 6.342 6.844C6.61651 6.57035 6.98127 6.40602 7.36811 6.38172C7.75496 6.35743 8.13742 6.47484 8.444 6.712C9.05481 6.33521 9.72188 6.05839 10.42 5.892C10.4695 5.50773 10.6571 5.15459 10.9479 4.89846C11.2386 4.64233 11.6125 4.50071 12 4.5C12.812 4.5 13.476 5.108 13.579 5.892C14.288 6.061 14.952 6.34 15.555 6.712C15.8615 6.47471 16.2439 6.35713 16.6307 6.38124C17.0175 6.40535 17.3824 6.56949 17.657 6.843C18.232 7.418 18.271 8.318 17.788 8.945C18.16 9.548 18.439 10.212 18.608 10.921C18.9922 10.9703 19.3453 11.1577 19.6015 11.4483C19.8576 11.7388 19.9993 12.1127 20 12.5C20 13.312 19.392 13.976 18.608 14.08ZM17.6 11.7H17.134C17.0068 10.8809 16.6844 10.1043 16.194 9.436L16.525 9.106C16.6024 9.03245 16.6643 8.94415 16.7071 8.8463C16.7498 8.74845 16.7725 8.64303 16.7739 8.53626C16.7753 8.42949 16.7553 8.32352 16.715 8.22461C16.6748 8.1257 16.6152 8.03584 16.5397 7.96033C16.4642 7.88483 16.3743 7.8252 16.2754 7.78497C16.1765 7.74474 16.0705 7.72472 15.9637 7.72608C15.857 7.72745 15.7515 7.75018 15.6537 7.79293C15.5559 7.83568 15.4675 7.89759 15.394 7.975L15.064 8.305C14.3952 7.8159 13.6188 7.49456 12.8 7.368V6.9C12.8 6.68783 12.7157 6.48434 12.5657 6.33431C12.4157 6.18429 12.2122 6.1 12 6.1C11.7878 6.1 11.5843 6.18429 11.4343 6.33431C11.2843 6.48434 11.2 6.68783 11.2 6.9V7.368C10.3812 7.49441 9.60468 7.81576 8.936 8.305L8.606 7.975C8.45488 7.83117 8.25355 7.75206 8.04493 7.75454C7.83632 7.75703 7.63693 7.84091 7.48928 7.9883C7.34162 8.13569 7.25739 8.33493 7.25454 8.54354C7.25168 8.75215 7.33043 8.95362 7.474 9.105L7.804 9.436C7.31458 10.1047 6.99289 10.8811 6.866 11.7H6.4C6.18783 11.7 5.98434 11.7843 5.83431 11.9343C5.68429 12.0843 5.6 12.2878 5.6 12.5C5.6 12.7122 5.68429 12.9157 5.83431 13.0657C5.98434 13.2157 6.18783 13.3 6.4 13.3H6.866C6.996 14.138 7.326 14.909 7.805 15.564L7.475 15.894C7.39759 15.9675 7.33568 16.0559 7.29293 16.1537C7.25018 16.2515 7.22745 16.357 7.22608 16.4637C7.22472 16.5705 7.24474 16.6765 7.28497 16.7754C7.3252 16.8743 7.38483 16.9642 7.46033 17.0397C7.53584 17.1152 7.6257 17.1748 7.72461 17.215C7.82352 17.2553 7.92949 17.2753 8.03626 17.2739C8.14303 17.2725 8.24845 17.2498 8.3463 17.2071C8.44415 17.1643 8.53245 17.1024 8.606 17.025L8.936 16.695C9.60474 17.1841 10.3812 17.5055 11.2 17.632V18.1C11.2 18.3122 11.2843 18.5157 11.4343 18.6657C11.5843 18.8157 11.7878 18.9 12 18.9C12.2122 18.9 12.4157 18.8157 12.5657 18.6657C12.7157 18.5157 12.8 18.3122 12.8 18.1V17.632C13.6189 17.5056 14.3953 17.1843 15.064 16.695L15.394 17.025C15.4675 17.1025 15.5557 17.1645 15.6535 17.2073C15.7514 17.2501 15.8567 17.273 15.9635 17.2744C16.0703 17.2759 16.1763 17.2559 16.2752 17.2158C16.3742 17.1757 16.4641 17.1161 16.5396 17.0407C16.6152 16.9652 16.6749 16.8754 16.7152 16.7766C16.7556 16.6777 16.7757 16.5717 16.7744 16.465C16.7731 16.3582 16.7505 16.2527 16.7078 16.1549C16.6652 16.057 16.6033 15.9686 16.526 15.895L16.196 15.564C16.674 14.909 17.004 14.138 17.134 13.3H17.6C17.8122 13.3 18.0157 13.2157 18.1657 13.0657C18.3157 12.9157 18.4 12.7122 18.4 12.5C18.4 12.2878 18.3157 12.0843 18.1657 11.9343C18.0157 11.7843 17.8122 11.7 17.6 11.7ZM12 15.7C11.1513 15.7 10.3374 15.3629 9.73726 14.7627C9.13714 14.1626 8.8 13.3487 8.8 12.5C8.8 11.6513 9.13714 10.8374 9.73726 10.2373C10.3374 9.63714 11.1513 9.3 12 9.3C12.8487 9.3 13.6626 9.63714 14.2627 10.2373C14.8629 10.8374 15.2 11.6513 15.2 12.5C15.2 13.3487 14.8629 14.1626 14.2627 14.7627C13.6626 15.3629 12.8487 15.7 12 15.7ZM12 10.9C11.7899 10.9 11.5818 10.9414 11.3877 11.0218C11.1936 11.1022 11.0172 11.2201 10.8686 11.3686C10.7201 11.5172 10.6022 11.6936 10.5218 11.8877C10.4414 12.0818 10.4 12.2899 10.4 12.5C10.4 12.7101 10.4414 12.9182 10.5218 13.1123C10.6022 13.3064 10.7201 13.4828 10.8686 13.6314C11.0172 13.7799 11.1936 13.8978 11.3877 13.9782C11.5818 14.0586 11.7899 14.1 12 14.1C12.4243 14.1 12.8313 13.9314 13.1314 13.6314C13.4314 13.3313 13.6 12.9243 13.6 12.5C13.6 12.0757 13.4314 11.6687 13.1314 11.3686C12.8313 11.0686 12.4243 10.9 12 10.9Z" fill="#555555"/></g><defs><clipPath id="clip0_3195_94"><rect width="24" height="24" fill="white" transform="translate(0 0.5)"/></clipPath></defs></svg>',edit:'<svg version="1.1" x="0px" y="0px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve"><g><g><g><path d="M43.1,29c-1.1,0-2,0.9-2,2v12.1c0,1.4-1.1,2.5-2.5,2.5H6.9c-1.4,0-2.5-1.1-2.5-2.5V11.5c0-1.4,1.1-2.5,2.5-2.5H19c1.1,0,2-0.9,2-2s-0.9-2-2-2H6.9c-3.6,0-6.5,2.9-6.5,6.5v31.6c0,3.6,2.9,6.5,6.5,6.5h31.6c3.6,0,6.5-2.9,6.5-6.5V31C45.1,29.9,44.2,29,43.1,29z"/></g></g><g><g><path d="M49,10l-9-9c-0.8-0.8-2-0.8-2.8,0L14.6,23.6C14.2,24,14,24.5,14,25v9c0,1.1,0.9,2,2,2h9c0.5,0,1-0.2,1.4-0.6L49,12.9c0.4-0.4,0.6-0.9,0.6-1.4C49.6,10.9,49.4,10.4,49,10z M24.2,32H18v-6.2L38.5,5.2l6.2,6.2L24.2,32z"/></g></g></g></svg>',playStore:'<svg width="30" height="30" viewBox="0 0 30 30" fill="none" ><path opacity="0.802967" d="M15 30C23.2843 30 30 23.2843 30 15C30 6.71573 23.2843 0 15 0C6.71573 0 0 6.71573 0 15C0 23.2843 6.71573 30 15 30Z" fill="#666666"/><path d="M11.874 7.19116C11.4876 6.95854 11.0271 6.93774 10.6254 7.1314L17.3599 13.8803L19.5619 11.6681L11.874 7.19116ZM10.0066 7.75601C9.92168 7.9359 9.87598 8.136 9.87598 8.34196V20.6872C9.87598 20.894 9.92197 21.0912 10.0078 21.2673L16.7397 14.5034L10.0066 7.75601ZM17.3608 15.1257L10.6371 21.8813C10.8156 21.964 11.0054 22 11.195 22C11.429 22 11.6625 21.944 11.8741 21.8169L19.5634 17.3333L17.3608 15.1257ZM22.4899 13.3732C22.4873 13.3714 22.4843 13.3696 22.4817 13.3682L20.3471 12.1251L17.9808 14.5026L20.3486 16.8753C20.3486 16.8753 22.4873 15.6285 22.4899 15.627C22.8869 15.3859 23.1239 14.9646 23.1239 14.4999C23.1239 14.0353 22.8869 13.614 22.4899 13.3732Z" fill="white"/></svg>',desktop:'<svg width="30" height="30" viewBox="0 0 30 30" fill="none" ><path opacity="0.802967" d="M15 30C23.2843 30 30 23.2843 30 15C30 6.71573 23.2843 0 15 0C6.71573 0 0 6.71573 0 15C0 23.2843 6.71573 30 15 30Z" fill="#666666"/><path d="M20.239 9.30719C20.0343 9.10247 19.7883 9 19.5007 9H9.04552C8.75801 9 8.51195 9.10247 8.30708 9.30719C8.10233 9.51199 8 9.75803 8 10.0456V18.2816C8 18.5692 8.10233 18.8153 8.30708 19.0201C8.51195 19.2248 8.75801 19.3271 9.04552 19.3271H12.6003C12.6003 19.4926 12.5655 19.6627 12.4958 19.8368C12.4261 20.0111 12.3564 20.1635 12.2867 20.2941C12.217 20.4249 12.1822 20.5206 12.1822 20.5816C12.1822 20.6948 12.2235 20.7931 12.3063 20.8756C12.3891 20.9585 12.4871 21 12.6003 21H15.946C16.0593 21 16.1573 20.9585 16.2401 20.8756C16.3229 20.7931 16.3643 20.6948 16.3643 20.5816C16.3643 20.5251 16.3293 20.4303 16.2597 20.2974C16.1899 20.1647 16.1202 20.0098 16.0506 19.8336C15.9809 19.6571 15.946 19.4883 15.946 19.3271H19.5009C19.7883 19.3271 20.0343 19.2248 20.2391 19.0201C20.4439 18.8153 20.5463 18.5693 20.5463 18.2816V10.0456C20.5463 9.75803 20.4439 9.51199 20.239 9.30719ZM19.7098 16.6088C19.7098 16.6654 19.6892 16.7144 19.6478 16.7558C19.6063 16.7971 19.5573 16.8178 19.5007 16.8178H9.04552C8.98892 16.8178 8.93989 16.7971 8.89851 16.7558C8.85716 16.7142 8.83644 16.6654 8.83644 16.6088V10.0456C8.83644 9.98892 8.85709 9.93994 8.89851 9.89856C8.93992 9.85725 8.98894 9.83649 9.04552 9.83649H19.5008C19.5574 9.83649 19.6065 9.85718 19.6478 9.89856C19.6892 9.93996 19.7098 9.98894 19.7098 10.0456V16.6088Z" fill="white" stroke="white" stroke-width="0.5"/></svg>',apple:'<svg width="30" height="30" viewBox="0 0 30 30" fill="none" ><path opacity="0.802967" d="M15 30C23.2843 30 30 23.2843 30 15C30 6.71573 23.2843 0 15 0C6.71573 0 0 6.71573 0 15C0 23.2843 6.71573 30 15 30Z" fill="#666666"/><path fill-rule="evenodd" clip-rule="evenodd" d="M20.9686 17.6609C20.8849 17.9033 20.7972 18.1347 20.7041 18.3566C20.4766 18.881 20.2081 19.3635 19.897 19.8065C19.4737 20.4114 19.1263 20.8299 18.8585 21.0621C18.444 21.4435 17.9994 21.6394 17.5232 21.6496C17.1812 21.6496 16.7698 21.5525 16.2897 21.3559C15.8087 21.1592 15.3665 21.0621 14.9622 21.0621C14.5381 21.0621 14.0833 21.1592 13.5968 21.3559C13.1096 21.5525 12.7171 21.6559 12.417 21.6654C11.9606 21.6852 11.5057 21.4846 11.0516 21.0621C10.7618 20.8094 10.3993 20.3758 9.96501 19.7623C9.49909 19.1068 9.11608 18.3463 8.816 17.4792C8.49459 16.5435 8.3335 15.6369 8.3335 14.7595C8.3335 13.7543 8.55066 12.8872 8.98578 12.1607C9.32772 11.5771 9.78259 11.1167 10.352 10.7787C10.9213 10.4407 11.5365 10.2685 12.1991 10.2575C12.5615 10.2575 13.0369 10.3696 13.6276 10.59C14.2167 10.8111 14.595 10.9232 14.7608 10.9232C14.8848 10.9232 15.3049 10.7921 16.0172 10.5307C16.6908 10.2883 17.2594 10.188 17.7253 10.2275C18.9873 10.3294 19.9349 10.8269 20.5659 11.7232C19.4374 12.407 18.8791 13.3649 18.8901 14.5937C18.9004 15.5508 19.2471 16.3476 19.9294 16.9802C20.2389 17.2731 20.5848 17.4998 20.9686 17.6609ZM17.794 6.66675C17.8043 6.76704 17.809 6.86733 17.809 6.96683C17.809 7.71704 17.535 8.4175 16.9893 9.06584C16.3299 9.83658 15.5324 10.282 14.6676 10.2117C14.6566 10.1217 14.6503 10.0269 14.6503 9.9274C14.6503 9.2072 14.9638 8.43645 15.5205 7.80628C15.7985 7.48724 16.1523 7.2219 16.5803 7.01027C17.0083 6.80179 17.4134 6.68649 17.794 6.66675Z" fill="white"/></svg>',langExpand:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" viewBox="0 0 15 10" fill="none" ><path d="M0.557617 2.5576L2.20262 0.912598L7.55762 6.25593L12.9126 0.912598L14.5576 2.5576L7.55762 9.5576L0.557617 2.5576Z" fill="black" fill-opacity="0.7"/></svg>',langSelect:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" viewBox="0 0 16 12" fill="none" ><path d="M5.45455 9.36111L2.14899 6.05555L2.11364 6.0202L2.07828 6.05555L0.964645 7.16919L0.929289 7.20455L0.964645 7.2399L5.41919 11.6944L5.45455 11.7298L5.4899 11.6944L15.0354 2.14899L15.0707 2.11364L15.0354 2.07828L13.9217 0.964645L13.8864 0.929289L13.851 0.964645L5.45455 9.36111Z" fill="#005BF0" stroke="#005BF0" stroke-width="0.1"/></svg>',manageAccount:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" viewBox="0 0 24 20" fill="none" ><path fill-rule="evenodd" clip-rule="evenodd" d="M14.8939 9.14809C14.8939 9.14809 15.9901 7.67638 15.9901 6.06451C15.9901 4.97077 15.9901 3.60968 15.378 2.39577C14.8261 1.3025 13.5928 0 10.8519 0C8.11032 0 6.87704 1.3025 6.3258 2.39562C5.71283 3.60968 5.71283 4.97061 5.71283 6.06436C5.71283 7.67685 6.48205 9.51778 7.80923 11.1479C7.49173 11.4476 6.18533 12.1007 5.40033 12.4925C3.84362 13.2712 2.85581 13.7864 2.26503 14.3767C0.957376 15.6853 0.858471 17.8807 0.851752 18.3079C0.845033 18.7535 1.01722 19.1843 1.33097 19.5029C1.64347 19.8202 2.07206 19.9998 2.51768 19.9998H14.1847V18.7499H2.51768C2.40722 18.7499 2.29925 18.7048 2.22159 18.6254C2.14409 18.5467 2.10019 18.4381 2.10128 18.327C2.10487 18.1176 2.16237 16.2481 3.14893 15.2612C3.6044 14.8059 4.55783 14.3121 5.95955 13.6107C7.45579 12.8631 8.28548 12.4175 8.66766 12.0562L9.51125 11.2586L8.77876 10.3589C7.62501 8.94169 6.96267 7.37607 6.96267 6.06451C6.96267 5.05311 6.96267 3.90749 7.44126 2.95905C8.01438 1.82499 9.16079 1.25 10.8519 1.25C12.5416 1.25 13.6892 1.82499 14.2619 2.95843C14.7405 3.90749 14.7405 5.05311 14.7405 6.06451C14.6742 6.4601 14.6529 6.7087 14.6374 6.88973C14.5966 7.36559 14.5958 7.37448 13.9236 8.35887L13.1911 9.25918L14.0348 10.0564C14.8939 9.5 14.8939 9.14809 14.8939 9.14809ZM22.5496 13.8889H23.4852C23.7691 13.8889 24 14.1198 24 14.4037V15.5961C24 15.88 23.7691 16.1111 23.4852 16.1111H22.5496C22.3993 16.1111 22.2752 16.1939 22.2178 16.3328C22.1604 16.4717 22.1894 16.618 22.2956 16.7243L22.957 17.3856C23.0543 17.483 23.1078 17.6122 23.1078 17.7496C23.1078 17.8872 23.0543 18.0167 22.957 18.1139L22.1139 18.957C21.9194 19.1515 21.5804 19.1519 21.3856 18.957L20.7243 18.2957C20.6363 18.208 20.5394 18.1894 20.4739 18.1894C20.2956 18.1894 20.1109 18.3241 20.1109 18.5496V19.485C20.1109 19.7689 19.88 20 19.5961 20H18.4037C18.1198 20 17.8889 19.7689 17.8891 19.485V18.5496C17.8891 18.3243 17.7044 18.1894 17.5261 18.1894C17.4604 18.1894 17.3637 18.2078 17.2757 18.2957L16.6144 18.957C16.4196 19.152 16.0807 19.1517 15.8861 18.957L15.043 18.1139C14.9457 18.0165 14.8922 17.8872 14.8922 17.7496C14.8922 17.6122 14.9457 17.4828 15.043 17.3856L15.7044 16.7243C15.8106 16.618 15.8398 16.4717 15.7822 16.3328C15.7246 16.1939 15.6007 16.1111 15.4504 16.1111H14.5148C14.2309 16.1111 14 15.88 14 15.5959V14.4037C14 14.1198 14.2309 13.8889 14.5148 13.8889H15.4504C15.6007 13.8889 15.7246 13.8061 15.782 13.6672C15.8394 13.5283 15.8104 13.382 15.7043 13.2757L15.0428 12.6144C14.9456 12.517 14.892 12.3878 14.892 12.2504C14.892 12.1128 14.9456 11.9833 15.0428 11.8861L15.8859 11.043C16.0804 10.8485 16.4194 10.8481 16.6143 11.043L17.2756 11.7043C17.3635 11.792 17.4602 11.8106 17.5257 11.8106C17.7043 11.8106 17.8889 11.6759 17.8889 11.4504V10.5148C17.8889 10.2309 18.1198 10 18.4037 10H19.5963C19.8802 10 20.1111 10.2309 20.1111 10.5148V11.4504C20.1111 11.5804 20.1711 11.6637 20.2213 11.7107C20.2893 11.7743 20.3813 11.8106 20.4739 11.8106C20.5396 11.8106 20.6363 11.7922 20.7243 11.7043L21.3856 11.043C21.5804 10.8481 21.9194 10.8485 22.1139 11.043L22.957 11.8861C23.0543 11.9835 23.1078 12.1128 23.1078 12.2504C23.1078 12.3878 23.0543 12.5172 22.957 12.6144L22.2956 13.2757C22.1894 13.382 22.1602 13.5283 22.2178 13.6672C22.2754 13.8061 22.3993 13.8889 22.5496 13.8889ZM19 16.2963C19.7146 16.2963 20.2963 15.7146 20.2963 15C20.2963 14.2854 19.7146 13.7037 19 13.7037C18.2854 13.7037 17.7037 14.2854 17.7037 15C17.7037 15.7146 18.2854 16.2963 19 16.2963Z" fill="#666666" /></svg>',externalLink:'<svg class="mgPlayerJSPreview_position-center mgPlayerJSPreview_width-height-100" viewBox="0 0 24 25" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M19.3521 5.68455C19.3891 5.77155 19.4091 5.91455 19.4091 5.91455H19.3901V10.8506C19.3901 11.2506 19.0761 11.4736 18.6751 11.4736H18.6851C18.2841 11.4736 17.9411 11.2506 17.9411 10.8506V7.76755L11.6751 14.0686C11.3921 14.3526 10.9331 14.3456 10.6921 14.0626V14.0496C10.4501 13.7666 10.3851 13.2816 10.6691 12.9996L16.9531 6.63955H13.8701C13.4701 6.63955 13.1081 6.34155 13.1081 5.94055V5.96655C13.1081 5.56655 13.4701 5.19055 13.8701 5.19055H18.7021H18.6661V5.24055C18.9071 5.24055 19.2421 5.42355 19.3521 5.68455ZM16.1901 12.3766L17.6401 13.8266V18.3996C17.6401 19.1996 17.0101 19.8096 16.2101 19.8096H6.05906C5.25906 19.8096 4.59106 19.1996 4.59106 18.3996V8.25055C4.59106 7.45055 5.25906 6.76055 6.06006 6.76055H10.6321L12.0821 8.21055H6.04206V18.3605H16.1901V12.3766Z" fill="#555555"/></svg>',iconMore:'<svg width="25" height="18" viewBox="0 0 25 18" fill="none" ><path d="M17.3473 0.85H2.41024C1.77929 0.85 1.26862 1.36067 1.26862 1.99162V15.9328C1.26862 16.5638 1.77929 17.0744 2.41024 17.0744H17.2825C17.6663 17.0744 18.0181 16.8742 18.2305 16.5634L23.2966 8.95722L18.2305 1.35106C18.0048 1.02022 17.7088 0.85 17.3473 0.85Z" stroke="#666666" stroke-width="1.7"/><circle cx="8" cy="9" r="2" fill="#666666"/><circle cx="14" cy="9" r="2" fill="#666666"/></svg>',urlSetting:'<svg class="mgPlayerJSPreview_matching-algorithm-icon" overflow="visible" preserveAspectRatio="none" viewBox="0 0 21 18" width="21" height="21"><g class="mgPlayerJSPreview_rule-engine-variable" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g class="mgPlayerJSPreview_matching-algorithm-svg" transform="translate(0, 0) rotate(0)" fill="#7A7A7A" stroke="#7A7A7A"><path d="M13.01895,14.39189c-0.01254,-0.12894 -0.01895,-0.25966 -0.01895,-0.39189c0,-2.20914 1.79086,-4 4,-4c0.11772,0 0.23426,0.00509 0.3494,0.01505v-6.77181h-16.6988v10.13514c0,0.55975 0.48547,1.01351 1.08434,1.01351zM13.01895,14.39189c0.0202,0.20777 0.0563,0.41088 0.10706,0.60811zM18.00006,10.12603c1.7252,0.44406 2.99994,2.01015 2.99994,3.87397c0,2.20914 -1.79086,4 -4,4c-1.86382,0 -3.42991,-1.27475 -3.87397,-2.99995l-11.39109,-0.00005c-0.95818,0 -1.73494,-0.72602 -1.73494,-1.62162v-11.75676c0,-0.8956 0.77676,-1.62162 1.73494,-1.62162h14.53012c0.95818,0 1.73494,0.72602 1.73494,1.62162v8.5044zM0.6506,2.43243h16.6988v-0.81081c0,-0.55975 -0.48547,-1.01351 -1.08434,-1.01351h-14.53012c-0.59886,0 -1.08434,0.45377 -1.08434,1.01351zM9.08352,6.79157c0.67617,0.2842 1.54621,1.0281 2.66291,2.24836c0.82275,0.73575 1.25358,1.44229 1.25358,2.13334c0,1.03887 -0.96457,1.82674 -2.0587,1.82674c-0.64928,0 -1.43267,-0.35416 -2.40568,-1.04146c-0.22538,-0.1592 -0.26271,-0.45046 -0.08337,-0.65054c0.17934,-0.20008 0.50743,-0.23321 0.73282,-0.07401c0.80277,0.56705 1.40668,0.84007 1.75623,0.84007c0.53657,0 1.01566,-0.39132 1.01566,-0.9008c0,-0.40792 -0.30927,-0.91127 -0.96761,-1.49602l-0.01914,-0.017l-0.01705,-0.01866c-1.03076,-1.12826 -1.82061,-1.80494 -2.31598,-2.01315c-0.39136,-0.16449 -0.86744,-0.07696 -1.48189,0.32473c-0.23193,0.15162 -0.5584,0.10762 -0.72919,-0.09826c-0.17079,-0.20589 -0.12124,-0.4957 0.11069,-0.64732c0.89637,-0.58598 1.76316,-0.74536 2.54673,-0.41602zM6.84152,10.30997c-0.67197,-0.29927 -1.52993,-1.06688 -2.62644,-2.32062c-0.81076,-0.75854 -1.22963,-1.4807 -1.21743,-2.17966c0.01834,-1.05076 0.99799,-1.83078 2.09345,-1.81166c0.65007,0.01135 1.42816,0.38325 2.39021,1.09542c0.22285,0.16496 0.25508,0.46021 0.07199,0.65944c-0.18309,0.19923 -0.51217,0.22701 -0.73501,0.06205c-0.79374,-0.58757 -1.39356,-0.87427 -1.74353,-0.88038c-0.53722,-0.00938 -1.0238,0.37804 -1.03279,0.89335c-0.0072,0.41259 0.29355,0.92711 0.94238,1.53004l0.01886,0.01752l0.01674,0.01917c1.01209,1.15918 1.79096,1.85741 2.28325,2.07665c0.38893,0.17321 0.86713,0.093 1.48942,-0.30255c0.23489,-0.1493 0.56097,-0.0991 0.72834,0.11213c0.16737,0.21123 0.11263,0.50349 -0.12225,0.65279c-0.9078,0.57702 -1.77846,0.72307 -2.55717,0.37627zM17,17.31429c1.83043,0 3.31429,-1.48386 3.31429,-3.31429c0,-1.83043 -1.48386,-3.31429 -3.31429,-3.31429c-1.83043,0 -3.31429,1.48386 -3.31429,3.31429c0,1.83043 1.48386,3.31429 3.31429,3.31429zM16.81064,14.86317c-0.18135,0.18244 -0.47561,0.18244 -0.65688,0l-1.01775,-1.02383c-0.18135,-0.18235 -0.18135,-0.47837 0,-0.66072c0.18127,-0.18244 0.47553,-0.18244 0.65688,0l0.60638,0.60991c0.04578,0.04596 0.12008,0.04596 0.16595,0l1.64189,-1.65171c0.18127,-0.18244 0.47553,-0.18244 0.65688,0c0.08709,0.08761 0.13601,0.20647 0.13601,0.33036c0,0.12388 -0.04893,0.24275 -0.13601,0.33036z" style="stroke-width: 0; stroke-linecap: butt; stroke-linejoin: miter; fill: rgb(115, 115, 148);" vector-effect="non-scaling-stroke" /></g></g></svg>'},creatorUpdate={};function checkParentCat(e,t){var r=get_store_value(Gm.parent).category_id;r&&(rootScope.isUpdateNeeded(r,"category")?commonUpdate.updateCat({category_id:r}).then(function(e){commonUpdate.categoryUpdateCb(e),rootScope.setCurrentPage("allguides")}):e&&(rootScope.catUpdatePending=!0),-1!==rootScope.serverDeletes.categories.indexOf(r))&&rootScope.goBack()}function checkCatUpdates(e,t,r){var i=!1;return e.forEach(function(e){rootScope.isUpdateNeeded(e.category_id,"category")&&(i=!0,commonUpdate.updateCat(e).then(function(e){rootScope.setCurrentPage("allguides")}))}),i}creatorUpdate.updateTour=commonUpdate.updateTour,creatorUpdate.updateCat=commonUpdate.updateCat,creatorUpdate.addTourList=function(r,e){e.forEach(function(e){var t="cat_"+(r||e.category_id);rootScope.allTourList[t]||(rootScope.allTourList[t]={}),rootScope.allTourList[t]["tour_"+e.tour_id]=e}),storage.allTourList.set(rootScope.allTourList)},creatorUpdate.setTour=function(e,t){var r="cat_"+e.category_id,i="tour_"+e.tour_id;rootScope.allTourList[r]||(rootScope.allTourList[r]={}),GmCXt.FT.creatorApp&&(e.modification_date=GmCXt.getCurrentTimeInSec(),t||creatorUpdate.updateServerUpdateList(e.tour_id,"tour")),rootScope.allTourList[r][i]=e,GmCXt.inPlayer||storage.allTourList.set(rootScope.allTourList)},creatorUpdate.deleteTourServerUpdate=function(e){for(var t in rootScope.allTourList){var r,i;for(r in rootScope.allTourList[t])"tour_"+e===r&&(i=t.split("_")[1],rootScope.removeTour(i,e))}},creatorUpdate.checkCurrentViewForUpdate=function(e){var t;GmCXt.isPlayer()||(t=get_store_value(Gm.CurrentPage))&&("stepview"===t?(rootScope.catUpdatePending=!0,rootScope.isUpdateNeeded(get_store_value(Gm.currentTour).tour_id,"tour")&&rootScope.routeToStepContainer("refreshView",!0),0<=rootScope.serverDeletes.tours.indexOf(get_store_value(Gm.currentTour).tour_id)&&rootScope.backHandler()):"allguides"!==t||GmCXt.isEmpty(get_store_value(Gm.categoryTours))?"allguides"!==t||GmCXt.isEmpty(get_store_value(Gm.childCategories))?"allguides"===t&&(t=get_store_value(Gm.allCategories),rootScope.catUpdatePending=!0,checkCatUpdates(t)):(t=get_store_value(Gm.childCategories),get_store_value(Gm.parent).category_id,rootScope.catUpdatePending=!0,checkCatUpdates(t),checkParentCat(e)):(get_store_value(Gm.categoryTours).forEach(function(e){rootScope.isUpdateNeeded(e.tour_id,"tour")&&commonUpdate.updateTour(e)}),checkParentCat(e)))};var getEntity=function(e,t){var r={};return"category"===e?r=rootScope.getCategory(t):"tour"===e&&(r=rootScope.getTourFromId(t)),r};creatorUpdate.isUpdateNeeded=function(e,t){var r,i;return!GmCXt.isEmpty(rootScope.serverUpdates)&&(r=getEntity(t,e),!GmCXt.isEmpty(r))&&(r=parseInt(r.modification_date)||0,i=!1,e="isUpdateNeeded: "+t+"_"+e+" .....?"+(i=2<(t=(rootScope.serverUpdates[t+"_"+e]||0)-r)?!0:i)+"...time difference..."+t,GmCXt.log(61,e),i)},creatorUpdate.deleteCategoryServerUpdate=function(e){var t=rootScope.getCategory(e).parent_id;rootScope.removeCategory({category_id:e}),rootScope.refreshAllGuides=!1,"0"===t&&(rootScope.refreshAllGuides=!0)},creatorUpdate.updateServerUpdateList=function(e,t){delete rootScope.serverUpdates[t+"_"+e],storage.serverUpdates.set(rootScope.serverUpdates)},creatorUpdate.updateTourProperty=function(e,t,r){GmCXt.isEmpty(e)||(rootScope.allTourList["cat_"+e.category_id]&&rootScope.allTourList["cat_"+e.category_id]["tour_"+e.tour_id]&&(rootScope.allTourList["cat_"+e.category_id]["tour_"+e.tour_id][r]=t),storage.allTourList.set(rootScope.allTourList))},GmCXt.stopCapture=stopCapture,service.main(),GmCXt.logAll=logAll,GmCXt.logLog=logLog,rootScope.playVideoTour="video",rootScope.playSlideshow="slideshow",rootScope.playGiphy="giphy",rootScope.playVLab="vLab",rootScope.playAuto="doitforme",rootScope.playGuideMe="guideMe",rootScope.playTestMe="testMe",rootScope.isClientJs=!1,rootScope.contextTours=[],rootScope.FT=GmCXt.FT,rootScope.showCaptchaError=!1,rootScope.config=GmCXt.conf,rootScope.staticContentPath=GmCXt.conf.staticContentPath,rootScope.webPortalUrl=GmCXt.conf.webPortalUrl,rootScope.analyticsPortalUrl=GmCXt.conf.analyticsPortalUrl,rootScope.appConfig=GmCXt.conf.appConfig,rootScope.appName=GmCXt.conf.appName,rootScope.appType=GmCXt.conf.appType,rootScope.brandName="MyGuide",rootScope.appVersion=GmCXt.conf.version,rootScope.ssoRedirectionUrl=GmCXt.conf.ssoRedirectionUrl,rootScope.ssoApiUrl=GmCXt.conf.ssoApiUrl,rootScope.ssoConfigUrl=GmCXt.conf.ssoConfigUrl,rootScope.ssoId="",rootScope.isLXP=GmCXt.isLXP(),rootScope.isWestpac=GmCXt.isWestpac(),rootScope.isMyGuide=GmCXt.isMyGuide(),rootScope.onPrem=GmCXt.onPrem(),rootScope.isWB=GmCXt.isWB(),rootScope.isMicroPlayer=GmCXt.isMicroPlayer(),rootScope.isClientJs=GmCXt.isClientJs(),rootScope.isElectron=GmCXt.isElectron(),rootScope.isWBMicroPlayer=GmCXt.isWBMicroPlayer(),rootScope.isWBC=GmCXt.isWBC(),rootScope.checkInsightEnabled=GmCXt.checkInsightEnabled,rootScope.isScreenRecorderClose=!1,rootScope.taskListApiCalled=!1,rootScope.countLimit=99,rootScope.languages=[],rootScope.selectedLanguage="",rootScope.userPrefLang=!1,rootScope.tourVideoInProgressArr=[],rootScope.ssoHitCount=0,rootScope.thirtyMinutesInSeconds=1800,rootScope.thirtyDaysInSeconds=2592e3,rootScope.thirtyDaysInMSeconds=2592e6,rootScope.lastCheckBrandLogo=0,rootScope.browserApp=GmCXt.browserApp,rootScope.allowedImageExtensions=["image/png","image/jpeg","image/jpg"],rootScope.appDomainLimit=500,rootScope.showPlayer=!1,rootScope.playerMode=!1,rootScope.isPlayer=GmCXt.isPlayer,rootScope.browserLang=GmCXt.browserLang,rootScope.defaultLang={},rootScope.maintenance=!1,rootScope.appEnvs=[],rootScope.categoryDataForAutomation=[],rootScope.jsonEditor=!1,rootScope.searchFilterDropDownVisible=!1,rootScope.isRefresh=!1,rootScope.isApiCallOn=!1,rootScope.isTaskListActive=!1,rootScope.isAppJsonCalling=!1,rootScope.pendingStepCount=-1,rootScope.botTourPlayList=[],rootScope.labels=GmCXt.getAllLabels(),rootScope.allCategories=[],rootScope.chatLabels={},rootScope.toursModifiedTime=0,rootScope.refreshTime=0,rootScope.botGuideCount=0,rootScope.isTaskListVisible=!1,rootScope.taskListCount=0,rootScope.languageList=[],rootScope.languages=[],rootScope.svgs=playerSvgConst,rootScope.isForwardListenerAttached=!1,rootScope.isBackwardListenerAttached=!1,rootScope.userList={},GmCXt.isSidePanelApp=!0;let storageAll=[storage.user.get(),storage.userList.get(),storage.accessibility.get(),storage.organization.get(),storage.activeAppId.get(),storage.activeTourId.get(),storage.activeScreenCastTourId.get(),storage.activeTab.get(),storage.activeView.get(),storage.activeLang.get(),storage.activeVoice.get(),storage.userPrefLang.get(),storage.videosInProgress.get(),storage.breadCrumbItems.get(),storage.currentTour.get(),storage.testAuto.get(),storage.loginTime.get(),storage.trackerSecrets.get(),storage.edcastLogin.get(),storage.allTourList.get(),storage.refreshTime.get(),storage.lastTimeStampSync.get(),storage.activeSortFilter.get(),storage.refreshCache.get(),storage.segmentGroupData.get(),storage.currentStep.get(),storage.appData.get(),storage.toursModifiedTime.get(),storage.stepsPlayed.get(),storage.currentPage.get(),storage.breadCrumb.get()],sendMessage=(GmCXt.FT.creatorApp&&(storageAll.push(storage.showPlayer.get()),storageAll.push(storage.serverUpdates.get()),storageAll.push(storage.serverDeletes.get()),storage.category.get()),rootScope.navBarVisible=!1,rootScope.jsonEditor=!1,rootScope.botGuideCount=0,rootScope.orgSecrret=GmCXt.conf.orgSecrret,rootScope.myGuideOrgKey="",rootScope.taskListApiInProcess=!1,function(e){GmCXt.sendToParentWindow(e),GmCXt.sendMessageToBackgroundService(e)});function readStorage(){return Promise.all(storageAll)}function updateCatList(r,e,t){let i;e?(rootScope.subCategoryStore["cat_"+e]||(rootScope.subCategoryStore["cat_"+e]=[]),rootScope.subCategoryStore["cat_"+e].forEach(function(e,t){e.category_id===r.category_id&&(i=t)}),0<=i?t?rootScope.subCategoryStore["cat_"+e].splice(i,1):rootScope.subCategoryStore["cat_"+e].splice(i,1,r):t||rootScope.subCategoryStore["cat_"+e].push(r)):(rootScope.categoryStore.forEach(function(e,t){e.category_id===r.category_id&&(i=t)}),0<=i?t?rootScope.categoryStore.splice(i,1):rootScope.categoryStore.splice(i,1,r):t||rootScope.categoryStore.push(r))}function updateNotificationTours(e){Object.keys(e).forEach(function(e){parseInt(e)&&rootScope.notiTourIds.push(parseInt(e))})}function sortNotifTours(r,i){if(rootScope.resetNotificationData(),r)for(let e=0,t=(r=GmCXt.sortToursByModifcationDate(r)).length;e<t;e++){var a=rootScope.notDefaultLang()?rootScope.getTranslatedTourAndSteps(r[e],rootScope.language):r[e];a&&!a.tour_settings.oneTimeNotification&&(i[a.tour_id]?rootScope.notifications.doNotShowTour.push({tour_id:a.tour_id,tour_title:a.tour_title}):GmCXt.inArray(a.tour_id,rootScope.notiTourIds)&&rootScope.notifications.snoozeTour.push({tour_id:a.tour_id,tour_title:a.tour_title}))}}function updateSettingOnAppSwitch(){var e=GmCXt.organization;GmCXt.isEmpty(e)||(rootScope.updateCustomLabels(e.settings),rootScope.enableOrgFeatures(e))}function getAllLanguagesArr(r){var i=[];if(i.push(GmCXt.defaultLang),r.translations)for(let e=0,t=r.translations.length;e<t;e++)GmCXt.isEmpty(r.translations[e].language)||i.push(r.translations[e]);else for(let e=0,t=r.length;e<t;e++)GmCXt.isEmpty(r[e].language)||i.push(r[e]);return GmCXt.removeDuplicates(i)}function setDefaultOrgFeatures(){rootScope.currentPageBeacon=!1,rootScope.fqdn=!1,rootScope.guideSegmentation=!1,rootScope.mediafileCreation=!1,rootScope.createTooltipMediaFile=!1,GmCXt.trackerUtil.trackPI=!1,rootScope.enableGuidemeMode=!1}function setDefaultAdminFeature(){rootScope.lms=!1,rootScope.chatBot=!1,rootScope.enableMyteacher=!1,rootScope._doitforme=!1,rootScope.maintenance=!1,rootScope.currentPageOnly=!1,rootScope.showAppSwitcher=!1,GmCXt.trackerUtil.enableTracking=!1,GmCXt.trackerUtil.trackPI=!1,rootScope.FT.analytics=!1,rootScope.ruleCheck=!1,rootScope.displayAcceptCookiePopup=!0,rootScope.featureTracking=!1,rootScope.pageTracking=!1,rootScope.allGuideView=!1,setDefaultOrgFeatures()}function checkForSubCategories(e,o,n,s){e.forEach(function(a){var e;a.sub_categories?(e=o.length,checkForSubCategories(a.sub_categories,o,n,a),e<o.length&&!o.includes(a)&&(a.sub_categories=n["cat_"+a.category_id],o.push(a),n["cat_"+s.category_id]||(n["cat_"+s.category_id]=[]),n["cat_"+s.category_id].push(a))):a.tours&&0<a.tours.length&&GmCXt.checkGuidesBasedOnSegment(a.tours,function(e){var t,r,i;!GmCXt.isEmpty(e)&&(t=e.tour_settings.app_publish_env,GmCXt.checkDomainInPublishedEnv(t)||rootScope.isDesktopGuide(e))&&(n["cat_"+s.category_id]||(n["cat_"+s.category_id]=[]),r=a,i=!1,0<(t=n["cat_"+s.category_id]).length&&t.forEach(function(e){e.category_id===r.category_id&&(i=!0)}),i||(n["cat_"+s.category_id].push(a),o.push(a)))})})}function getCurrentAppObj(a){return new Promise(function(t,e){Gm.loading.set(!0);function r(e){if(0<e.length){var r=GmCXt.urlParts;let t=GmCXt.checkDomainInApps(r.fullUrl);GmCXt.onPrem()&&t.appId!==rootScope.activeAppId&&storage.activeAppId.set(t.appId),i=e.filter(function(e){return parseInt(e.application_id)===parseInt(rootScope.activeAppId)})[0]||{},GmCXt.isEmpty(i)&&(t.domainMatch?(GmCXt.log(21,"GET APP by domain: "+t.appName),i=e.filter(function(e){return parseInt(e.application_id)===parseInt(t.appId)})[0]):GmCXt.FT.creatorApp&&(i=e[0]))}GmCXt.isEmpty(i)?(rootScope.goToNoApp(),Gm.loading.set(!1),t()):(rootScope.initAppDetails(i),Gm.loading.set(!1),t(i))}let i={};a?r(a):rootScope.checkAppList().then(function(){var e,t=[];for(e in rootScope.appList)t.push(rootScope.appList[e]);r(t)})})}function gotApps(e){return new Promise(function(t,r){Gm.loading.set(!0),GmCXt.log(21,"FETCHED apps.",e),getCurrentAppObj(e).then(function(e){GmCXt.isEmpty(e)||GmCXt.isExcludeDomain()?GmCXt.isExcludeDomain()&&(modal.open(rootScope.labels.badDomain,"warning",function(e){rootScope.goToNoApp()}),r()):rootScope.FT.isPlayer||(rootScope.resetOffset=!0,rootScope.refreshPageView()),Gm.loading.set(!1),t()})})}function updateUserLabels(e){for(var t in e)rootScope.labels.hasOwnProperty(t)&&(rootScope.labels[t]=e[t]||rootScope.labels[t]);return e}function updateChatLabels(e){for(var t in e)rootScope.labels.hasOwnProperty(t)&&(rootScope.labels[t]=e[t]||rootScope.labels[t]);return e}function clearCache(){storage.allTourList.remove(),storage.storageSyncTime.remove()}function filterAppsBasedOnAccess(i){let a=[];return rootScope.isOwner()?i:(mg$$1.each(GmCXt.user.app_access,function(e,t){var r=i.filter(function(e){return parseInt(e.application_id)===parseInt(t)});r.length&&a.push(r[0])}),a)}function resetAll(){rootScope.contextTours=[],storage.activeLang.remove()}function showCloseBtn(){GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:show-panel-close-btn"})}function hideCloseBtn(){GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:hide-panel-close-btn"})}function isMicroPlayerMode(){return GmCXt.getAppSetting("isMiniPlayer")?(Gm.miniPlayer.set(!0),!0):(Gm.miniPlayer.set(!1),!1)}function updateAppFeatures(e){var t;rootScope.showPlayer?(t=isMicroPlayerMode(),rootScope.isMicroPlayer=t,window.matchMedia("(max-width: 480px)").matches&&(rootScope.isMicroPlayer=!1),t&&hideCloseBtn()):(rootScope.isMicroPlayer=!1,showCloseBtn()),GmCXt.initPlayerModeFeatures(rootScope.showPlayer,rootScope.isMicroPlayer,rootScope.playerMode),e||rootScope.enableOrgFeatures(rootScope.organization),rootScope.FT=GmCXt.FT,rootScope.updateLabels()}function checkGuideMeMode(e){return("Default"===e||""===e)&&GmCXt.getAppSetting("defaultPlayAction")===rootScope.playGuideMe||e===rootScope.playGuideMe}function getLastPlayedStep(e){var t=GmCXt.tourActivity["t:"+e.tour_id];return rootScope.getStepFromTour(t,e)}function restartGuide(){GmCXt.log(33,"RESTART tour play"+GmCXt.tourLog(rootScope.contTour.tour)),continuePlay("",null,rootScope.contTour.tour,rootScope.contTour.source)}function resumeGuide(){GmCXt.log(33,"RESUME tour play"+GmCXt.tourLog(rootScope.contTour.tour)),continuePlay("",rootScope.contTour.step,rootScope.contTour.tour,rootScope.contTour.source)}function listenTourPlay(e){var t,e=GmCXt.parseMsg(e);e&&e.action&&0===e.action.indexOf("mgPlayerJSPreview_action:")&&("mgPlayerJSPreview_action:next_step_found_app"===(e=GmCXt.convertMgdata(e)).action&&(rootScope.stepFound=!0,t=rootScope.contTour.step,GmCXt.log(33,"FOUND next step"+GmCXt.stepLog(t.step_id,t.tour_id)),resumeGuide(),window.removeEventListener("message",listenTourPlay)),"mgPlayerJSPreview_action:start_point_found_app"===e.action&&(rootScope.contTour.step=e.data.step,resumeGuide(),window.removeEventListener("message",listenTourPlay),delete rootScope.startPoints,delete rootScope.searching_sp),"mgPlayerJSPreview_action:start_point_not_found"===e.action)&&(rootScope.searching_sp<rootScope.startPoints.length-1?(rootScope.searching_sp+=1,GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:search_start_point",data:{tour_id:rootScope.contTour.tour_id,startPoint:rootScope.startPoints[rootScope.searching_sp]}})):"inline"!==rootScope.contTour.tour.steps[0].step_type&&continuePlay("",null,rootScope.contTour.tour,rootScope.contTour.source,rootScope.contTour.tour.category_title))}function tourCb(i,a,o,n,s,l){if(o=GmCXt.checkAndCorrectPS(o),i===GmCXt.TOUR_PLAYER_SLIDESHOW){if(rootScope.isOnlySurveyGuide(o))return;o.steps=GmCXt.filterOutAutomationSteps(o.steps)}if("doitforme"===i&&rootScope.checkStepsForDoItForMeMode(o)){let e=new Modal({target:document.body,props:{popupType:"warning",msg:labels.doitForMeWarning,onConfirm:()=>e.$destroy()}})}else o.tour_settings=GmCXt.parseJSON(o.tour_settings),o.tour_settings.play_structure=GmCXt.getGuidePlayStructure(o,i),o.tour_settings.valid_segments=GmCXt.getTourSegments(o),GmCXt.FT.isPlayer&&(o=rootScope.isGuideInOriginalLang(o)?o:rootScope.getTranslatedTourAndSteps(o,rootScope.language)),storage.appData.get().then(function(e){let r=e;GmCXt.appList=e,storage.activeAppId.get().then(e=>{var t=e,e=(GmCXt.activeAppId=e,r["app:"+t]),t=(GmCXt.activeAppData=e).settings,e=(t&&t.domains?o.allDomains=t.domains:o.allDomains=!1,1<GmCXt.urlParts.pathname.length&&GmCXt.urlParts.pathname.toLowerCase(),o.tour_settings.rules),t=!(rootScope.resumeFromStartPoint=!1);if(GmCXt.isEmpty(o.tour_settings.start_point_info)||(t=0<e.length?GmCXt.ruleEngine.evaluateRules(e):t)&&(rootScope.resumeFromStartPoint=!0),!a&&(rootScope.isResumeGuide||rootScope.resumeFromStartPoint)&&rootScope.isPlayer()&&("home"===n||"currentpage"===n||"tour-list"===n||"stepview"===n||"tour-view"===n&&rootScope.resumeFromStartPoint)&&checkGuideMeMode(i)){let t;if(rootScope.resumeFromStartPoint&&!rootScope.isResumeGuide)for(let e=0;e<o.tour_settings.start_point_info.length;e++){t=GmCXt.getStepFromSteps(o.tour_settings.start_point_info[e].step_id,o.steps);break}else t=getLastPlayedStep(o);if(rootScope.contTour={tour:o,step:t,source:n},t){GmCXt.log(33,"Tour was Played "+GmCXt.stepLog(t.step_id,t.tour_id)),rootScope.startPoints=[];for(let e=o.steps.length-1;-1<e;e--)o.steps[e].step_settings.startPoint&&(rootScope.resumeFromStartPoint=!0,rootScope.startPoints.push(o.steps[e]));return void(rootScope.startPoints.length&&!rootScope.isResumeGuide?("inline"===o.steps[0].step_type&&rootScope.startPoints.unshift(o.steps[0]),rootScope.searching_sp=0,window.addEventListener("message",listenTourPlay),GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:search_start_point",data:{tour_id:o.tour_id,startPoint:rootScope.startPoints[0]}})):"inline"===t.step_type?(rootScope.stepFound=!1,window.addEventListener("message",listenTourPlay),GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:search_next_step",data:{tour_id:o.tour_id,requestId:t.step_id,settings:t.step_settings,windowHost:GmCXt.getPageDomain(),task:"findStep",findOnly:!0,noOutline:!0,timeout:Date.now()+1e3,log_stepInfo:GmCXt.getStepInfoLog(t)}}),GmCXt.timeout(function(){var e;rootScope.stepFound||(e=rootScope.contTour.step,GmCXt.log(33,"NOT FOUND next step "+GmCXt.stepLog(e.step_id,e.tour_id)),window.removeEventListener("message",listenTourPlay),restartGuide())},1e3)):resumeGuide())}}GmCXt.log(33,"PLAYING "+GmCXt.tourLog(o)),continuePlay(i,a,o,n,s,l)})})}function continuePlay(e,t,r,i,a,o){t||(n=r.tour_settings.play_structure[0].id,t=rootScope.getStepFromTour(n,r));var n=t.step_id,n=(GmCXt.log(33,"PLAY TOUR from "+GmCXt.stepLog(t.step_id,t.tour_id)),{data:{tour:r,currentStepId:n,language:rootScope.getTourLangInfo(r),isDefaultLang:GmCXt.checkDefaultLangForTour(r,rootScope.language),source:i,automate:!1,taskObj:o,activeAppId:GmCXt.activeAppId,orgData:GmCXt.organization,user:GmCXt.user},action:"mgPlayerJSPreview_action:play_tour"});a&&(n.data.tour.category_name=a),rootScope.startGuideAction(n,e,t,r)}function checkIfCSV(r){return new Promise(function(o,e){var t=GmCXt.createDeepCopy(r.steps);rootScope.checkLinkedGuideStep(t,function(e,t,r){if(0===t){clearInterval(r);for(var i=0;i<e.length;i++){var a=e[i].step_settings.automation;a&&"csv"===a.inputType&&a.csvParam&&(GmCXt.log(33,"CSV input expected"),o(!0))}o(!1)}})})}function containsCategoryWithId(t){var r=get_store_value(Gm.breadCrumb);for(let e=1;e<r.length;e++)if("object"==typeof r[e]&&r[e].id===t)return!0;return!1}function getKeysForTracking(){GmCXt.isDefined(rootScope.trackerSecrets)||(rootScope.trackerSecrets={}),rootScope.trackerSecrets&&GmCXt.isEmpty(rootScope.trackerSecrets.secrets)&&rootScope.registerClientInsights()}function checkAppData(){return new Promise(function(t,e){rootScope.checkAppList().then(function(){var e=GmCXt.urlParts;GmCXt.checkDomainInApps(e.fullUrl).domainMatch?(rootScope.activeAppId&&rootScope.activeAppId!==GmCXt.checkDomainInApps(e.fullUrl).appId&&resetData(),rootScope.FT.creatorApp&&autoSwitchApp(),rootScope.activeAppId=GmCXt.checkDomainInApps(e.fullUrl).appId,(e=rootScope.appList["app:"+rootScope.activeAppId])&&rootScope.initAppDetails(e)):GmCXt.FT.creatorApp||storage.activeAppId.remove(),t()})})}function goToApp(){getCurrentAppObj().then(function(e){GmCXt.isEmpty(e)||rootScope.switchApp(e)})}function autoSwitchApp(e){let t=!0;var r=GmCXt.checkDomainInApps(GmCXt.urlParts.fullUrl);return updateSettingOnAppSwitch(),!!r.appId&&(r.appId!==GmCXt.activeAppId?(rootScope.resetCreatorData(!0),r.domainMatch?(GmCXt.log(21,"SWITCH app for the current domain: "+r.appName),storage.activeAppId.set(r.appId),GmCXt.inPlayer&&resetData(),rootScope.initAppDetails(GmCXt.appList["app:"+r.appId]),rootScope.FT.isPlayer?rootScope.setCurrentPage("currentpage"):goToApp()):GmCXt.isPlayer()?(rootScope.goToNoApp(),t=!1):GmCXt.isPlayer()||goToApp()):t=!1,t)}function initCommon(){checkAppData().then(function(){var e=autoSwitchApp();rootScope.syncUser(),e&&(rootScope.processedAppData=!0),rootScope.setMode(),rootScope.setNotifTours(),rootScope.initPlayerMode(),rootScope.showWidget(),rootScope.sendUserInfo()})}function initPlayer(){GmCXt.log(21,"LOADED side panel. Initialising Player"),GmCXt.isEmpty(GmCXt.user)?(GmCXt.conf.appConfig.login.SSO||GmCXt.myGuideInternalCustomers()||GmCXt.isMcKesson())&&rootScope.isAllowedDomain()?GmCXt.urlParts?rootScope.signInWithSso():setTimeout(function(){rootScope.signInWithSso()},1e3):rootScope.clearSession():initCommon()}function initCreator(){GmCXt.log(21,"LOADED side panel. Initialising Creator"),GmCXt.isEmpty(GmCXt.user)?rootScope.clearSession():initCommon()}function getSubCat(e,t){let r=e.find(function(e){return parseInt(e.category_id)===parseInt(t)});return r||e.forEach(function(e){e.sub_categories&&(r=getSubCat(e.sub_categories,t))}),r}function updateContextualTourSteps(o){if(!GmCXt.isEmpty(rootScope.contextTours)){let a=!1;Object.keys(rootScope.contextTours).forEach(function(i){a||Object.keys(rootScope.contextTours[i]).forEach(function(t){if(!a){var r=rootScope.contextTours[i][t];for(let e=0;e<r.length;e++)if(parseInt(rootScope.contextTours[i][t][e].tour_id)===parseInt(o.tour_id)){a=!0,rootScope.contextTours[i][t][e]=o;break}}})})}}function resetData(){rootScope.contextTours={},rootScope.applicationDropdown=!1,rootScope.automationDropdown=!1,rootScope.FT.creatorApp&&storage.segmentData.remove(),rootScope.resetCreatorData(!0),storage.allTourList.set({}),rootScope.cancelAutomationSelection()}function redirectToView(){GmCXt.user&&GmCXt.organization.organization_id&&rootScope.fetchApps().then(function(){rootScope.sendSidePanelInitEvent(!0)})}function onRefreshSettings(e){rootScope.saveOrganization(e),storage.refreshTime.set(GmCXt.getCurrentTimeInSec()),rootScope.guideSegmentation&&(Gm.loading.set(!0),"westpac"!==GmCXt.conf.appConfig.customer)?rootScope.getAllSegments().then(function(){redirectToView()}):redirectToView()}function gotAccessToken(){GmCXt.inPlayer?rootScope.loadJsonPlayer().then(function(){rootScope.sendSidePanelInitEvent(!0)}):api.getOrganization(onRefreshSettings,!0)}function initOnPremPlayer(e){GmCXt.log(21,"LOADED side panel. Initialising On Prem Player"),rootScope.getOnPremOrg(e).then(function(){rootScope.processActiveRequests()})}function getSSOWindowOpt(){var e="width=350,height=300,";return(e+="top="+(screen.width-100)+",")+("left="+(screen.height-100))}function getSsoIdUrl(e){return GmCXt.isEmpty(rootScope.myGuideOrgKey)&&(GmCXt.myGuideInternalCustomers()||GmCXt.isMcKesson())?e+""+rootScope.ssoId:e}function closeTabForSso(){rootScope.ssoTab&&rootScope.ssoTab.close()}rootScope.isUserLoggedIn=function(){var e=GmCXt.user;return!(!e||!e.accesstoken)},rootScope.incrementPendingStepCount=function(){rootScope.pendingStepCount<0&&(rootScope.pendingStepCount=0),rootScope.pendingStepCount++,Gm.statusBar.set("incrementPendingStepCount")},rootScope.decrementPendingStepCount=function(){rootScope.pendingStepCount--,rootScope.pendingStepCount=0<rootScope.pendingStepCount?rootScope.pendingStepCount:0,Gm.statusBar.set("decrementPendingStepCount")},rootScope.setStepPendinCount=function(e){e?rootScope.incrementPendingStepCount():rootScope.decrementPendingStepCount()},rootScope.handleError=function(e){e&&e.name&&("PermissionDeniedError"===e.name||"NotAllowedError"===e.name?rootScope.showPopup(rootScope.labels.userDeniedMessage):"CameraNotFound"===e.name?(rootScope.cameraDisabled=!0,rootScope.showPopup(rootScope.labels.noCamera)):mgError$1.on({code:2200,info:e}))},rootScope.reportInitialization=function(){GmCXt.log(21,"LOADING side panel, globals initialised");var e=GmCXt.organization,e={action:"mgPlayerJSPreview_action:initialization:side_panel_loaded",organization:e=GmCXt.isEmpty(e)?!1:e};sendMessage(e)},rootScope.hideUserImageDropDown=function(){mg$$1(".ege-login-logout-wrapper").slideUp(200),mg$$1(".ege-user-image-wrapper").removeClass("active")},rootScope.hideStepViewActionDropdown=function(){mg$$1(".detail-view-action-options-dropdown").slideUp(200)},rootScope.hideStepActionDropdown=function(){mg$$1(".step-action-menu-options-dropdown").slideUp(200)},rootScope.hideStepDownloadActionDropdown=function(){mg$$1(".detail-download-action-options-dropdown").slideUp(200),rootScope.isMediaFileDropdown=!1,mg$$1(".tour-item").removeClass("mgPlayerJSPreview_z-index mgPlayerJSPreview_z-index-10"),mg$$1(".header-detail-view-tour-download-wrapper").removeClass("mgPlayerJSPreview_dropdown-active")},rootScope.hideLanguDropdown=function(e){e.stopPropagation(),rootScope.lanDropDownVisible=!1,Gm.lanDropDownVisible.set(!1),mg$$1(".mgPlayerJSPreview_lang-dropdown-wrapper").slideUp(100)},rootScope.onBodyClick=function(e){var t;GmCXt.failedStepId&&(t=mg$$1("#step-"+GmCXt.failedStepId))&&t.hasClass("step-highlight")&&(t.removeClass("step-highlight"),mg$$1(".step-not-found").remove(),mg$$1(".guide-not-followed").remove(),GmCXt.failedStepId=0),mg$$1(e.target).hasClass("ege-user-image")||mg$$1(e.target).hasClass("ege-user-image-wrapper")||rootScope.hideUserImageDropDown(),!mg$$1(".category-action-dropdown").is(":visible")||mg$$1(e.target).hasClass("category-action-dropdown")||mg$$1(e.target).hasClass("category-pencil-icon")||rootScope.hideActionDropdown(),!mg$$1(".tour-action-dropdown").is(":visible")||mg$$1(e.target).hasClass("tour-action-dropdown")||mg$$1(e.target).hasClass("tour-pencil-icon")||rootScope.hideTourActionDropdown(),mg$$1(".mgPlayerJSPreview_checkbox-dropdown-wrapper").is(":visible")&&!mg$$1(e.target).hasClass("mgPlayerJSPreview_checkbox-dropdown-wrapper")&&mg$$1(".mgPlayerJSPreview_checkbox-dropdown-wrapper").slideUp(200),mg$$1(".mgPlayerJSPreview_questions-type-dropdown").is(":visible")&&mg$$1(".mgPlayerJSPreview_questions-type-dropdown").slideUp(200),!mg$$1(".ege-header-action-dropdown").is(":visible")||mg$$1(e.target).hasClass("ege-header-action-dropdown")||mg$$1(e.target).hasClass("tour-pencil-icon")||rootScope.hideTourActionDropdown(),!mg$$1(".step-action-menu-options-dropdown").is(":visible")||mg$$1(e.target).hasClass("step-action-menu-options-dropdown")||mg$$1(e.target).hasClass("step-pencil-icon")||mg$$1(e.target).parents(".step-pencil-icon").length||rootScope.hideStepActionDropdown(),!mg$$1(".detail-download-action-options-dropdown").is(":visible")||mg$$1(e.target).hasClass("detail-download-action-options-dropdown")||mg$$1(e.target).hasClass("header-detail-view-tour-download-wrapper")||rootScope.hideStepDownloadActionDropdown(),!mg$$1(".detail-view-action-options-dropdown").is(":visible")||mg$$1(e.target).hasClass("detail-view-action-options-dropdown")||mg$$1(e.target).hasClass("header-detail-view-tour-options-wrapper")||rootScope.hideStepViewActionDropdown(),mg$$1(".download-list").length&&mg$$1(".download-list").is(":visible")&&mg$$1(".download-list").slideToggle(),!rootScope.hideFiltersDropdown||mg$$1(e.target).hasClass("mgPlayerJSPreview_all-guides-search-filters-dropdown-user")&&mg$$1(e.target).hasClass("mgPlayerJSPreview_all-guides-search-filters-dropdown-published")&&mg$$1(e.target).hasClass("mgPlayerJSPreview_all-guides-search-filters-dropdown-assignee")&&mg$$1(e.target).hasClass("mgPlayerJSPreview_all-guides-search-filters-dropdown-sort")||mg$$1(e.target).hasClass("mgPlayerJSPreview_all-guides-search-filters")||rootScope.hideFiltersDropdown(),!mg$$1(".filter-list").is(":visible")||mg$$1(e.target).hasClass("filter-list")||mg$$1(e.target).hasClass("filter-wrapper")||mg$$1(e.target).hasClass("selected-filter")||rootScope.hideFilterList(),!mg$$1(".mgPlayerJSPreview_lang-dropdown-wrapper").is(":visible")||mg$$1(e.target).hasClass("mgPlayerJSPreview_selected-lang-wrapper")||mg$$1(e.target).hasClass("mgPlayerJSPreview_lang-dropdown-wrapper")||rootScope.hideLanguDropdown(e),mg$$1(".mgPlayerJSPreview_setting-dropdown-userPref").is(":visible")&&!mg$$1(e.target).hasClass("mgPlayerJSPreview_user-pref-scope")&&rootScope.hideUserPrefDropdown(e),mg$$1(".mgPlayerJSPreview_dropdown-list-wrapper").is(":visible")&&!mg$$1(e.target).hasClass("mgPlayerJSPreview_filter-dropdown-wrapper")&&rootScope.hideFiltersDropdownList(),mg$$1(".mgPlayerJSPreview_branch-dropdown-list-wrapper").is(":visible")&&!mg$$1(e.target).hasClass("mgPlayerJSPreview_branch-dropdown-wrapper")&&mg$$1(".mgPlayerJSPreview_branch-dropdown-list-wrapper").slideUp(200)},rootScope.subscribeEvents=function(){mg$$1(document.body).off("click"),mg$$1(document.body).click(rootScope.onBodyClick),window.onkeyup=function(e){e&&e.keyCode&&27===e.keyCode&&(GmCXt.playerI&&"live"===GmCXt.playerI.mode&&GmCXt.playerI.linkGuidePlayMode&&"PDF"===GmCXt.playerI.linkGuidePlayMode||rootScope.closeAppPanel())}},rootScope.hideActionDropdown=function(){mg$$1(".category-action-dropdown").slideUp(200)},rootScope.isRawChromeBlob=function(e){return 0===e.indexOf("blob:")},GmCXt.isExtension()&&chrome.storage.sync.get({onPrem_appKey:"",onPrem_apiUrl:"",onPrem_insightsUrl:"",onPrem_cdnUrl:"",onPrem_adminPortal:"",onPrem_insightsPortal:""},function(e){GmCXt.onPremise={appKey:e.onPrem_appKey,apiUrl:e.onPrem_apiUrl,analyticsUrl:e.onPrem_insightsUrl,cdnUrl:e.onPrem_cdnUrl,webPortal:e.onPrem_adminPortal,analyticsPortal:e.onPrem_insightsPortal}}),rootScope.saveUser=function(e){e.organization&&delete e.organization,GmCXt.user=e,storage.user.set(e),rootScope.syncUser()},rootScope.saveOrganization=function(e){GmCXt.log(21,"SAVE organization"),storage.organization.set(e),GmCXt.orgBucket=e.bucket,GmCXt.organization=e,rootScope.enableOrgFeatures(e),GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:save_org",data:e})},rootScope.updateVideoInProgressList=function(i,a){storage.videosInProgress.get().then(function(e){var t=e;switch(i){case"add":t?t.push(a):t=[a];break;case"remove":var r=t.indexOf(a);t.splice(r,1)}rootScope.tourVideoInProgressArr=t,storage.videosInProgress.set(t)})},rootScope.setAccessibility=function(){rootScope.accessibility=!rootScope.accessibility,Gm.accessibility.set(rootScope.accessibility),storage.accessibility.set(rootScope.accessibility)},rootScope.syncAccessibility=function(e){GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:update_accessibility",data:e})},rootScope.syncUser=function(){var e=GmCXt.user;GmCXt.sendMessageToBackgroundService({action:"mgPlayerJSPreview_action:sync_user",data:{user:e}})},rootScope.syncAppId=function(){var e={action:"mgPlayerJSPreview_action:init_app_id",data:{activeAppId:rootScope.activeAppId}};GmCXt.sendToParentWindow(e)},rootScope.hideTourActionDropdown=function(){var e=mg$$1(".step-image-wrapper");mg$$1(e).removeClass("active"),mg$$1(".tour-action-dropdown").slideUp(200),mg$$1(".ege-header-action-dropdown").slideUp(200),mg$$1(".tour-action-dropdown-embed-menu").slideUp(100),mg$$1(".tour-action-dropdown-video-step-menu").slideUp(100),mg$$1(".tour-action-dropdown-image-step-menu").slideUp(100),mg$$1(".tour-action-menu-active").removeClass("tour-action-menu-active"),mg$$1(".tour-item").removeClass("mgPlayerJSPreview_z-index mgPlayerJSPreview_z-index-max")},rootScope.updateLabels=function(){var e=GmCXt.organization,t=(!rootScope.language&&e&&e.admin_settings&&e.admin_settings.language_settings&&e.admin_settings.language_settings.default&&(rootScope.language=e.admin_settings.language_settings.default.language,GmCXt.browserLang&&GmCXt.browserLang!==rootScope.language&&GmCXt.checkLangExist(e.admin_settings.language_settings.translations,GmCXt.browserLang)&&(rootScope.language=GmCXt.browserLang),storage.activeLang.set(rootScope.language)),!rootScope.language&&e&&e.admin_settings&&e.admin_settings.language_settings&&e.admin_settings.language_settings.default&&(rootScope.language=e.admin_settings.language_settings.default.language),rootScope.labels=GmCXt.getAllLabels(rootScope.language),Gm.selectedLang.set(rootScope.language),{action:"mgPlayerJSPreview_action:set_lang_content_script",data:{lang:rootScope.language}});GmCXt.sendToParentWindow(t),e&&e.settings&&rootScope.updateCustomLabels(e.settings)},rootScope.updateAppLang=function(t){var r="";rootScope.languages.filter(function(e){e.language===t&&(r=e)}),r=r||rootScope.defaultLang,GmCXt.isDefined(r)&&(rootScope.selectedLanguage=r.name,GmCXt.mgActiveLang=r.language,storage.activeLang.set(r.language),rootScope.updateLabels())},rootScope.processCategories=function(){for(var e in rootScope.allCategories){e=rootScope.allCategories[e];updateCatList(e,parseInt(e.parent_id))}},rootScope.syncSegmentData=function(){GmCXt.allSegments=rootScope.allSegments;var e={action:"mgPlayerJSPreview_action:update_segment_group_data",data:{allSegments:rootScope.allSegments}};GmCXt.sendToParentWindow(e)},rootScope.updatePageUrl=function(e){rootScope.pageUrl=e.url,rootScope.urlParts=e.urlParts,GmCXt.urlParts=e.urlParts,GmCXt.pageTitle=e.title,GmCXt.elAppName=e.elAppName,GmCXt.log(1,"Updated urls and page info in side panel")},rootScope.syncTaskList=function(e){var t=e.time+GmCXt.t_.hr24;return Date.now()<t?(rootScope.taskList=e.list,e):(rootScope.taskList=null,storage.taskList.remove(),null)},rootScope.setMode=function(){GmCXt.isPlayer()?rootScope.showPlayer=!0:rootScope.playerMode=!0},rootScope.showLangErrorPopup=function(e,t){e=e.name||e.language,e=rootScope.labels.stepWarningForLanguage.replaceAll("{GUIDE_LANG}",e);t?(rootScope.alertMessage=e,mg$$1(".mgPlayerJSPreview_icon-play-popup").show()):modal.open(e,"warning")},rootScope.getTourCreationLang=function(e){let t={};e=e.tour_settings;return t=GmCXt.isDefined(e.language_settings)?e.language_settings:t},rootScope.prepSingCatLang=function(e,t){var r;if(!GmCXt.isEmpty(e))return(r=e.language_data)&&r[t]&&(r[t].category_title&&(e.category_title=r[t].category_title),r[t].category_description)&&(e.category_description=r[t].category_description),e},rootScope.prepCatLangJson=function(e,t){if(GmCXt.isEmpty(e))return[];let r=structuredClone(e),i=0;return r.forEach(e=>{e=rootScope.prepSingCatLang(e,t),r[i]=e,i++}),r},rootScope.isGuideInOriginalLang=function(e,t,r){e=rootScope.getTourCreationLang(e);return!(rootScope.language&&rootScope.enableTranslation&&e.language&&e.name&&e.language!==rootScope.language)||-1!==e.language.indexOf("en-")&&e.language.substring(0,3)===rootScope.language.substring(0,3)||(t&&rootScope.showLangErrorPopup(e,r),!1)},rootScope.notDefaultLang=function(){return!(!rootScope.language||!rootScope.defaultLang||rootScope.defaultLang.language===rootScope.language)},rootScope.getTranslatedTourAndSteps=function(e,r){let i={...e};var e=i.language_data;return!i.tour_settings.translationEnable&&GmCXt.isGuide(i)&&(r=rootScope.defaultLang),e&&e[r]&&!rootScope.isGuideInOriginalLang(i)&&((e=e[r]).tour_title&&(i.tour_title=e.tour_title,i.tour_description=e.tour_description),mg$$1.each(i.steps,function(e,t){var t=t.language_data;t&&t[r]&&(t[r].step_title||t[r].step_description)&&(t=t[r],i.steps[e].step_title=t.step_title,i.steps[e].step_description=t.step_description||"",i.steps[e].step_audio=t.step_audio,i.steps[e].step_audio_text=t.step_audio_text,t.step_settings=GmCXt.parseJSON(t.step_settings),i.steps[e].step_settings=GmCXt.validateDataModel(t.step_settings,GmCXt.model.stepSettings))})),i},rootScope.setNotifTours=function(){storage.notifTours.get().then(function(e){rootScope.notiTourIds=[];var t=GmCXt.user;updateNotificationTours(GmCXt.parseJSON(e.toursClosed));let r={};r=GmCXt.isAnonymousUser()?e.tourIdArray||{}:t?.settings?.viewed_guide_notifications||{},GmCXt.isEmpty(r)||updateNotificationTours(r),rootScope.processNotificationTours(r)})},rootScope.notiTourIds=[],rootScope.resetNotificationData=function(){rootScope.notifications={snoozeTour:[],doNotShowTour:[]}},rootScope.processNotificationTours=function(t){if(0===rootScope.notiTourIds.length)return!1;var e={tour_ids:"["+rootScope.notiTourIds.toString()+"]"};GmCXt.inPlayer?sortNotifTours(rootScope.publishedTours,t):api.getTours(e,function(e){sortNotifTours(e,t)})},rootScope.checkAppList=function(){return new Promise(function(t,e){Gm.loading.set(!0);var r=rootScope.appList;GmCXt.isEmpty(r)?storage.appData.get().then(function(e){GmCXt.appList=e,rootScope.syncApps(e),Gm.loading.set(!1),t()}):(Gm.loading.set(!1),t())})},rootScope.selectLanguage=function(e){if(rootScope.userPrefLang){if(rootScope.selectedLanguage===e)return!0}else if(!e)return!0},rootScope.getAppOrgLanguage=function(e){if(rootScope.enableTranslation&&rootScope.organization){var r=rootScope.organization.admin_settings.language_settings;rootScope.defaultLang=r.default,GmCXt.defaultLang=r.default;let t=rootScope.language;t=t||r.default.language,rootScope.languages=getAllLanguagesArr(e||r),rootScope.languages.filter(function(e){e.language===t&&(rootScope.selectedLanguage=e.name)})}else rootScope.languages=[]},rootScope.initAppDetails=function(t,e){GmCXt.log(21,"INIT APP:  ["+t.title+", "+t.application_id+"]"),storage.activeAppId.set(t.application_id);var r=GmCXt.activeAppId,r=(GmCXt.externalAppId=GmCXt.appList["app:"+r].external_id,updateSettingOnAppSwitch(),{action:"mgPlayerJSPreview_action:app_info_to_background",data:{activeAppId:r,externalAppId:t.external_id}});if(GmCXt.sendMessageToBackgroundService(r),rootScope.appEnvs=[],GmCXt.isDefined(t.settings.app_env)){for(var i in t.settings.app_env)t.settings.app_env[i].checked&&(t.settings.app_env[i].key=i,rootScope.appEnvs.push(t.settings.app_env[i]));rootScope.appEnvs=rootScope.appEnvs.sort(function(e,t){return e.order<t.order?-1:t.order<e.order?1:0}).map(function(e){return e.key})}rootScope.highestEnv=rootScope.appEnvs[rootScope.appEnvs.length-1],(GmCXt.inPlayer||GmCXt.onPrem())&&(t.categories&&t.categories.length?rootScope.processAppDataActiveApp(t):(r=t.application_id,rootScope.isAppJsonCalling=!0,api.getAppJson(r).then(function(e){rootScope.isAppJsonCalling=!1,GmCXt.onPrem()||GmCXt.cdnPlayer?t.categories=e.categories:t.categories=e.data.categories,rootScope.processAppDataActiveApp(t)}))),rootScope.getLanguageList(),t.settings.enable_application_language_settings&&GmCXt.isDefined(t.settings.app_languages)&&0<t.settings.app_languages.length?rootScope.getAppOrgLanguage(t.settings.app_languages):rootScope.getAppOrgLanguage(),mg$$1("#mgPlayerJSPreview_header-brand-logo").attr("src",GmCXt.brandLogo())},rootScope.getLanguageList=function(){try{var t=function(e){rootScope.languageList=e,GmCXt.isEmpty(e)||storage.languageList.set(e)};storage.languageList.get().then(function(e){GmCXt.isEmpty(e)?api.getAllLanguages().then(t):rootScope.languageList=e})}catch(e){console.error(e)}},rootScope.isDesktopGuide=function(e){return!!(e&&e.tour_settings&&e.tour_settings.tour_type&&-1!==e.tour_settings.tour_type.indexOf("desktop"))},rootScope.isDefaultGuide=function(e){return!!(e&&e.tour_settings&&e.tour_settings.tour_type&&-1!==e.tour_settings.tour_type.indexOf("default"))},rootScope.isUploadTutorial=function(e){return!(!GmCXt.isOnboarding(e)||"upload"!==e.tour_settings.tutorial_tour_type)},rootScope.getCategory=function(e){e="cat_"+e;return rootScope.allCategories[e]||!1},rootScope.removeCategory=function(e){delete rootScope.allCategories["cat_"+e.category_id],updateCatList(e,parseInt(e.parent_id),!0),GmCXt.inPlayer||storage.category.reset(rootScope.allCategories)},rootScope.addCategory=function(e){var t;e.category_title&&(t="cat_"+e.category_id,updateCatList(rootScope.allCategories[t]=e,parseInt(e.parent_id)),GmCXt.inPlayer||storage.category.reset(rootScope.allCategories))},rootScope.addMultiCategory=function(e){mg$$1.each(e,function(e,t){var r="cat_"+(t=t[0]?t[0]:t).category_id;rootScope.allCategories[r]=t,GmCXt.inPlayer||updateCatList(t,parseInt(t.parent_id))}),GmCXt.inPlayer||storage.category.reset(rootScope.allCategories)},rootScope.draftExists=function(t,r,i){var e=rootScope.allTourList["cat_"+r];if(e){for(var a in e)if(e[a].parent_tour_id===t)return e[a].tour_id}else if(i&&i.length)for(let e=0;e<i.length;e++)if(i[e].parent_tour_id===t&&i[e].category_id===r)return i[e].tour_id;return!1},rootScope.filterGuideByEnv=function(o){if(!GmCXt.isFQDN())return GmCXt.log(1,"SKIP filtering guides to this domain",o),o;let n=GmCXt.getAppEnvByDomain(),s=[];return(!rootScope.appEnvs.length||-1!==rootScope.appEnvs.indexOf(n))&&o&&0<o.length&&o.forEach(function(e){var t,r,i=e.tour_settings.app_publish_env;let a=!1;i&&(a=-1!==i.indexOf(n),rootScope.draftExists(e.tour_id,e.category_id,o)||a||i.length&&0===i[0].indexOf("env_")&&(t=rootScope.appEnvs.indexOf(n),t=t,r=i,rootScope.appEnvs.slice(t).some(function(e){return 0<=r.indexOf(e)}))&&(a=!0)),e.is_published&&(void 0===n||void 0===i||0===i.length||a)&&s.push(e)}),GmCXt.log(21,"FILTER GUIDES published to this domain env ["+n+"]. Filtered guides ",s),s},rootScope.getAllPublishedTours=function(e){let r=[];function t(e,t){r.push(t)}for(var i in e){var a=e[i];a.length||deleteEmpty(i),mg$$1.each(a,t)}var o=rootScope.filterGuideByEnv(r);rootScope.publishedTours=o,rootScope.getContextToursAfterLogin&&(GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:get_context_guides"}),rootScope.getContextToursAfterLogin=!1),Gm.publishedTours.set(o),GmCXt.log(21,"ALL PUBLISHED guides",o)},rootScope.addTourList=function(r,e){e.forEach(function(e){var t="cat_"+(r||e.category_id);rootScope.allTourList[t]||(rootScope.allTourList[t]={}),rootScope.allTourList[t]["tour_"+e.tour_id]=e}),storage.allTourList.set(rootScope.allTourList)},rootScope.processAppDataActiveApp=function(e){function s(e,t,r){e=GmCXt.validateDataModel(e,GmCXt.model.category);let i=t||e.category_order;var a,o,n;e.sub_categories&&0<e.sub_categories.length?(c["cat_"+e.category_id]=e.sub_categories,mg$$1.each(e.sub_categories,function(e,t){s(t,i,t.category_order)})):e.tours&&0<e.tours.length?p["cat_"+e.category_id]=(t=e.tours,a=e.category_id,o=i,n=r,t.forEach(function(e){(e=GmCXt.validateDataModel(e,GmCXt.model.guide)).category_order=parseInt(o),e.subCategory_order=parseInt(n)}),rootScope.addTourList(a,t),t):parseInt(e.parent_id)&&(c["cat_"+e.parent_id]||(c["cat_"+e.parent_id]=[]),c["cat_"+e.parent_id].push(e)),e.is_published&&!GmCXt.convertType(e.parent_id)&&l.push(e),GmCXt.convertType(e.parent_id)}let l=[],c={},p={};clearCache(),GmCXt.log(21,"PROCESS app data",e);e.categories&&0<e.categories.length&&e.categories.forEach(function(e){s(e)});var i=[],t=[],a={};l.forEach(function(r){var e;r.tours?GmCXt.checkGuidesBasedOnSegment(r.tours,function(e){var t;GmCXt.isEmpty(e)||(t=e.tour_settings.app_publish_env,(rootScope.isDesktopGuide(e)||GmCXt.checkDomainInPublishedEnv(t))&&-1===mg$$1.inArray(r,i)&&i.push(r))}):r.sub_categories&&(e=t.length,checkForSubCategories(r.sub_categories,t,a,r),e<t.length)&&!i.includes(r)&&(r.sub_categories=a["cat_"+r.category_id],i.push(r))}),Gm.allCategories.set(i);e=function t(e,r=[]){return e.forEach(e=>{e.sub_categories&&0<e.sub_categories.length&&t(e.sub_categories,r),r.push(e)}),r}(l),rootScope.categoryStore=l,rootScope.subCategoryStore=a,Gm.subCategories.set(e),rootScope.addMultiCategory(rootScope.categoryStore),rootScope.addMultiCategory(e),rootScope.getAllPublishedTours(p),e=(new Date).getTime();storage.storageSyncTime.set(e),storage.appData.set(GmCXt.appList),rootScope.setActivePage("home")},rootScope.enableOrgFeatures=function(e){var t,r;!GmCXt.isEmpty(e)&&GmCXt.isDefined(e)&&(t=e.admin_settings||{},r=e.settings||{},GmCXt.log(21,"ENABLE org features",e),setDefaultAdminFeature(),GmCXt.isEmpty(e.bucket)||(GmCXt.orgBucket=e.bucket),t.lms&&(rootScope.lms=!0),GmCXt.isChatEnable()&&(rootScope.chatBot=!0),GmCXt.getAppSetting("vLab")&&(rootScope.enableMyteacher=!0),GmCXt.getAppSetting("doitforme")&&(rootScope._doitforme=!0),GmCXt.getAppSetting("all_guide")&&GmCXt.isPlayer()&&(rootScope.currentPageOnly=!0),GmCXt.getAppSetting("defaultGuideView")&&!GmCXt.getAppSetting("all_guide")&&(rootScope.allGuideView=!0),GmCXt.getAppSetting("isMiniPlayer")&&GmCXt.isPlayer()&&(rootScope.isMicroPlayer=!0,Gm.miniPlayer.set(!0)),t.app_switcher&&(rootScope.showAppSwitcher=t.app_switcher),t.display_accept_cookie_popup||(rootScope.displayAcceptCookiePopup=!1),t.maintenance_mode&&rootScope.goToMaintenance(),t.current_page_beacon&&(rootScope.currentPageBeacon=!0),t.guide_segmentation&&(rootScope.guideSegmentation=!0),t.mediafile_creation&&(rootScope.mediafileCreation=!0),t.create_tooltip_media_file&&(rootScope.createTooltipMediaFile=!0),r.fqdn&&(rootScope.fqdn=!0,rootScope.showAppSwitcher=!r.fqdn),t.language_settings&&t.language_settings.translations.length&&t.guide_translation?(rootScope.enableTranslation=!0,GmCXt.enableTranslation=!0):(rootScope.enableTranslation=!1,GmCXt.enableTranslation=!1,storage.activeLang.remove(),storage.activeVoice.remove(),rootScope.isDefaultLang=!0),t.insights&&t.insights.enabled&&(t.insights.guide&&(GmCXt.FT.analytics=!0,GmCXt.trackerUtil.enableTracking=!0),t.insights.app)&&((e=t.insights.app[GmCXt.activeAppId])&&e.enable_feature_tracking&&(GmCXt.trackerUtil.featureTracking=!0,rootScope.featureTracking=!0),e)&&e.enable_page_tracking&&(GmCXt.trackerUtil.pageTracking=!0,rootScope.pageTracking=!0),t.isPITrackingEnabled&&(GmCXt.trackerUtil.trackPI=!0),rootScope.isGuideAutomationEnabled=t.myBotEnabled&&!rootScope.currentPageOnly,t.efficient_rule_mode&&(rootScope.ruleCheck=!0),GmCXt.isTrue(t.enable_guideme_as_secondary_option)&&(rootScope.enableGuidemeMode=!0),r={action:"mgPlayerJSPreview_action:update_tracking_info",data:{enableTracking:GmCXt.trackerUtil.enableTracking,trackPI:GmCXt.trackerUtil.trackPI,featureTracking:GmCXt.trackerUtil.featureTracking,pageTracking:GmCXt.trackerUtil.pageTracking}},GmCXt.sendToParentWindow(r),GmCXt.sendMessageToBackgroundService(r))},rootScope.removeChatIcon=function(){GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:remove_chat_icon"})},rootScope.showChatIcon=function(){GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:show_chat_icon"})},rootScope.getBotGuideCount=function(e){e=rootScope.filterBotGuides(e);e&&e.length?rootScope.botGuideCount=e.length:rootScope.botGuideCount=0},rootScope.displayChatIcon=function(){0===rootScope.botGuideCount?rootScope.removeChatIcon():rootScope.showChatIcon()},rootScope.refreshCurrentPage=function(t){if("currentpage"!==get_store_value(Gm.CurrentPage)||t&&!rootScope.isSidePanelOpen){if(GmCXt.isDomainInActiveApp()){var e=GmCXt.getAppSetting("guide_count_on_widget"),r=GmCXt.getAppSetting("hide_widget_if_noguide");if(e&&!rootScope.isWestpac||r){GmCXt.log(30,"REFRESH CURRENT PAGE guide indicator. Event: "+t);let r=rootScope.readLocalCT(GmCXt.urlParts.fullUrl,GmCXt.pageTitle);if(r&&r.length)GmCXt.log(30,"FETCHED tours from CACHE"),i(r);else{let t={url:GmCXt.urlParts.fullUrl};GmCXt.log(30,"NOT FOUND IN CACHE. FETCHING tours from API"),api.getContextualTour(t,function(e){GmCXt.log(30,"FETCHED tours from API"),i(r=rootScope.processContextualGuide(e,t.url))})}}else rootScope.showWidget()}}else GmCXt.log(30,"REFRESH CURRENT PAGE guides list. Event: ",t),rootScope.setCurrentPage("currentpage");function i(e){var e=rootScope.filterCurrentPageTourTypes(e);rootScope.getBotGuideCount(e),rootScope.displayChatIcon(),GmCXt.isEmpty(e)?GmCXt.log(30,"NO GUIDES"):(e=rootScope.validateAllRulesExceptSelectEl(e,!0)).hasURLMatch||e.hasValidRule?(GmCXt.log(30,"URLMATCH: "+e.hasURLMatch+", ValidRule: "+e.hasValidRule),a()):rootScope.validateSelectElRules(e.tours,t).then(function(e){e&&a()})}function a(){rootScope.showWidget()}},rootScope.showCurrentPageGuidesIndicator=function(e){GmCXt.isPlayer()&&(GmCXt.log(30,"SHOW current page indicator"),rootScope.msgSentCurrentPageCount=!0,GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:show_current_page_guide_indicator",data:{clearRulesJobs:e}}))},rootScope.hideCurrentPageGuidesIndicator=function(){GmCXt.isPlayer()&&(GmCXt.log(30,"HIDE current page indicator"),GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:hide_current_page_guide_indicator"}))},rootScope.validateAllRulesExceptSelectEl=function(i,a,e){var o={tours:[],hasURLMatch:!1,hasValidRule:!1};let n=GmCXt.urlParts;if(e&&(n=new URL(e)),i){let e="/"===n.pathname?"":n.pathname,r=(e&&0!==e.indexOf("/")&&(e="/"+e),GmCXt.getHostnameFromUrl(n.fullUrl)+e);r=r.toLowerCase();var s=[],l=[],c=[];for(let e=0;e<i.length;e++){var p=i[e],d=p.tour_settings,u=d.rules.length&&d.rules[0].condition;let t=!1;if(p.tour_url&&!u){var g=p.tour_url.toLowerCase();if(g===r&&p.is_published&&(s.push(p),o.hasURLMatch=!0,a))return o}else if(u){if(GmCXt.ruleEngine.hasRuleType(d.rules,["Select Element","Select Table","Get Validity","Variables"]))t=!0;else{let e=!1;if(GmCXt.legacyWildChar(d.version)&&(e=!0),(t=GmCXt.ruleEngine.evaluateRules(d.rules,e,n))&&(p.ruleValidated=o.hasValidRule=!0,a))return o}t&&l.push(p)}var m=p.tour_settings.start_point_info;if(p.is_published&&m&&m.length)for(let e=0;e<m.length;e++)if(0<=m[e].step_url.toLowerCase().indexOf(r)){c.push(p);break}}o.tours=GmCXt.arrayMerge(c,GmCXt.arrayMerge(s,l))}return o},rootScope.validateSelectElRules=function(o,n){return new Promise(function(t,e){rootScope.msgSentCurrentPageCount=!1;let r=0;for(let e=0;e<o.length&&!rootScope.msgSentCurrentPageCount;e++){var i=o[e];rootScope.queueRuleForCP(i,e,a,n,"currentPageIndicator")}function a(e){rootScope.msgSentCurrentPageCount||(r++,e.valid?t(!0):r===o.length&&t(!1))}})},rootScope.queueRuleForCP=function(e,t,r,i,a){var o=e.tour_settings,o=o.rules&&o.rules.length?o.rules:[];"page_click"===i&&!rootScope.reEvalRules(e)||e.ruleValidated?(GmCXt.log(30,"SKIP RULE CHECK "+a+": "+e),GmCXt.log(30,"SKIP RULE CHECK "+a+": "+GmCXt.tourLog(e)),r({tour:e,valid:!0}),GmCXt.log(30,"RULE CHECK "+a+" :"+GmCXt.tourLog(e))):(GmCXt.log(30,"RULE CHECK "+a+" :"+e),i={tour:e,rules:o,cb:r,index:t,timeoutVal:GmCXt.t.ruleTimeOut15ms,timeout:GmCXt.t.ruleTimeOut15ms,isTour:!0,initiator:a},GmCXt.ruleEngine.queue(i))},rootScope.reEvalRules=function(e){return!rootScope.ruleCheck||!(!e.tour_settings.ruleCheckOnClick&&!GmCXt.isEmpty(rootScope.cTours)&&0<=rootScope.cTours.indexOf(e.tour_id))},rootScope.refreshPageView=function(){rootScope.refreshAllGuides=!0,rootScope.allGuideView=!0;var e=get_store_value(Gm.CurrentPage);e&&!1!==e?rootScope.setCurrentPage(e):rootScope.setActivePage("home")},rootScope.goToSignIn=function(){Gm.activeView.set("signin")},rootScope.fetchApps=function(){return new Promise(function(t,e){GmCXt.log(21,"FETCH apps");api.getAllApps({limit:50,offset:0},function(e){0<e.length?(e=filterAppsBasedOnAccess(e=e.sort(function(e,t){return parseInt(e.application_id)-parseInt(t.application_id)})),rootScope.saveApps(e),storage.storageSyncTime.set(Date.now()),GmCXt.timeout(function(){gotApps(e).then(function(){t()})},0)):rootScope.goToNoApp()})})},rootScope.setDefaultChatLabels=function(){rootScope.chatLabels={greetingMessage:rootScope.labels.defaultGreetingMessage,botEndingMessage:rootScope.labels.defaultBotEndingMessage,errorMessage:rootScope.labels.defaultErrorMessage}},rootScope.getChatLabels=function(e){for(var t in e){var r="default"+GmCXt.capitalizeFirstLetter(t);""!==e[t]?rootScope.chatLabels[t]=e[t]:rootScope.chatLabels[t]=rootScope.labels[r]}},rootScope.updateCustomLabels=function(e){let t=e.userLabels;var r=GmCXt.organization,i=rootScope.appList["app:"+rootScope.activeAppId];let a=[];i&&i.settings?(t=i.settings.userLabels,a=i.settings.chatLabels,mg$$1.extend(t,{userNotFollowingGuideMessage:e.userLabels.userNotFollowingGuideMessage,maintenanceMessage:e.userLabels.maintenanceMessage,serviceErrorMessage:e.userLabels.serviceErrorMessage,resumeGuideMessage:e.userLabels.resumeGuideMessage})):t=r.settings.userLabels,t=updateUserLabels(t),a=updateChatLabels(a),GmCXt.label=rootScope.labels;i={data:{userLabels:t,chatLabels:a},action:"mgPlayerJSPreview_action:update_custom_labels"};GmCXt.sendToParentWindow(i)},rootScope.isMgAdmin=function(){return"mg_admin"===rootScope.user.role},rootScope.isSuperAdmin=function(){return"superadmin"===rootScope.user.role},rootScope.isOwner=function(){return!!("owner"===rootScope.user.role||rootScope.isSuperAdmin()||rootScope.isMgAdmin()||rootScope.isPartnerAdmin())},rootScope.isCreator=function(){return"creator"===rootScope.user.role},rootScope.isPartnerAdmin=function(){return"partner_admin"===rootScope.user.role},rootScope.getCdnSign=GmCXt.getCdnSign,rootScope.removeCatFromApplist=function(e){let t=JSON.parse(JSON.stringify(e));return GmCXt.isEmpty(t)||Object.keys(t).forEach(function(e){delete t[e].categories}),t},rootScope.syncApps=function(e){e=rootScope.removeCatFromApplist(e);GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:sync_app_list",data:{appList:e||{}}})},rootScope.saveApps=function(e){rootScope.appList={},e.forEach(function(e){window.matchMedia("(max-width: 480px)").matches&&!GmCXt.isMiniPlayer&&"guide"!==e.type?"mobile_web"===e.type&&(rootScope.appList["app:"+e.application_id]=e):"guide"!==e.type&&"electron"!==e.type||(rootScope.appList["app:"+e.application_id]=e)}),GmCXt.appList=rootScope.appList,storage.appData.set(rootScope.appList),rootScope.syncApps(GmCXt.createDeepCopy(rootScope.appList)),GmCXt.log(21,"CACHED app details",rootScope.appList)},rootScope.loadJsonPlayer=function(){return new Promise(function(t,e){Gm.loading.set(!0);let r=GmCXt.organization;function i(e){rootScope.updateCustomLabels(r.settings),gotApps(e).then(function(){Gm.loading.set(!1),t()})}GmCXt.orgBucket=r.bucket,GmCXt.log(21,"REFRESHING org JSON"),0<GmCXt.user.app_access.length||rootScope.isOwner()?api.getOrgJson().then(function(e){storage.refreshTime.set(GmCXt.getCurrentTimeInSec()),storage.lastTimeStampSync.set(GmCXt.getCurrentTimeInSec()),clearCache();var t="",t=GmCXt.onPrem()||GmCXt.cdnPlayer?e:e.data;GmCXt.organization=t,t=GmCXt.validateDataModel(t,GmCXt.model.organization),GmCXt.organization=t;let r=GmCXt.createDeepCopy(GmCXt.validateModelArray(t.applications,GmCXt.model.applications._obj));r=filterAppsBasedOnAccess(r),rootScope.saveApps(r),storage.storageSyncTime.set(Date.now()),delete t.applications,rootScope.saveOrganization(t),rootScope.guideSegmentation?rootScope.getSegmentGroupList().then(function(){i(r)}):i(r)}):(GmCXt.log(21,"NO ACCESS to any apps"),rootScope.goToNoApp())})},rootScope.initializeApp=function(){return GmCXt.log(21,"INITIALISE App"),new Promise(function(e,t){function r(){rootScope.fetchApps().then(function(){e(!0)})}var i;GmCXt.isPlayer()?rootScope.loadJsonPlayer().then(function(){e()}):(i=GmCXt.organization)&&i.organization_id?(rootScope.saveOrgSettings(i.settings),rootScope.guideSegmentation?rootScope.getSegmentGroupList().then(function(){r()}):r()):e()})},rootScope.saveOrgSettings=function(e){e&&(GmCXt.organization&&(GmCXt.organization.settings=e,rootScope.saveOrganization(GmCXt.organization)),mg$$1(".ege-logo-image").attr("src",GmCXt.brandLogo()),rootScope.webUrl=e.web_url,rootScope.updateCustomLabels(e),rootScope.showWidget())},rootScope.sortOrderCategory=function(){GmCXt.isPlayer()||(rootScope.sortType="",rootScope.descOrder=!1)},rootScope.filterPublished=function(e){return e.filter(function(e){return e.is_published})},rootScope.filterUnpublished=function(e){return e.filter(function(e){return!e.is_published})},rootScope.getPlayedStepsInfo=function(){storage.stepsPlayed.get().then(function(e){GmCXt.isAnonymousUser()?rootScope.playedSteps=e.stepsPlayed||[]:(e=GmCXt.user,GmCXt.isEmpty(e)||(rootScope.playedSteps=e&&e.settings.guide_view&&e.settings.guide_view.playedSteps?e.settings.guide_view.playedSteps:[]))})},rootScope.initPlayerMode=function(e){updateAppFeatures(e),rootScope.getPlayedStepsInfo();e={action:"mgPlayerJSPreview_action:update:player_mode",data:{showPlayer:rootScope.showPlayer,isMiniPlayer:rootScope.isMicroPlayer,playerMode:rootScope.playerMode}};sendMessage(e)},rootScope.onMinMaxChaticon=function(){rootScope.chatBotMin=!0},rootScope.onUserSignin=function(e,t,r){rootScope.user=e,GmCXt.user=e,GmCXt.log(21,"USER login",e),GmCXt.storage().set({login_state:!0}),GmCXt.updateGlobalUser(e),storage.loginTime.set((new Date).getTime()),e.signedInWithSso=t,e.ssoSignInTrue=r,e.region="US",resetAll(),t&&storage.lastSsoRedirectTime.set(""),rootScope.setMode(),rootScope.saveUser(e),rootScope.setNotifTours(),rootScope.registerClientInsights(),GmCXt.lastTooltipSync=GmCXt.getCurrentTimeInSec(),GmCXt.storage().set({lastTooltipSync:GmCXt.lastTooltipSync}),rootScope.getContextToursAfterLogin=!0,rootScope.initializeApp().then(function(){rootScope.initPlayerMode(),rootScope.sendSidePanelInitEvent(),GmCXt.inPlayer&&GmCXt.onPrem()||storage.refreshTime.set(GmCXt.getCurrentTimeInSec()),rootScope.showWidget()}),rootScope.onMinMaxChaticon()},rootScope.isTrackingGuide=GmCXt.isFeatureTags,rootScope.getDefaultPlayAction=function(e){var t=GmCXt.getAppSetting("defaultPlayAction");return GmCXt.isFalse(t)||("Default"!==e.tour_settings.defaultPlayAction&&(t=e.tour_settings.defaultPlayAction),rootScope.organization&&!GmCXt.getAppSetting(t)&&(t=GmCXt.model.organization.settings._obj.defaultPlayAction._default)),t},rootScope.isCADGuide=function(e){return!(!e||!e.tour_type||-1===e.tour_type.indexOf("desktop")&&-1===e.tour_type.indexOf("mobile"))},rootScope.isDesktopApp=function(){var e=rootScope.appList["app:"+rootScope.activeAppId];return!(!e||"electron"!==e.type)},rootScope.clearSession=function(e){logoutServ.clearSession(e)},rootScope.handleSignIn=function(){rootScope.clearSession("1003: Access token invalid")},rootScope.showPlayOption=function(e,t){if(GmCXt.user){var r=!1,i=rootScope.getDefaultPlayAction(t);if(!rootScope.isDesktopApp())switch(e){case rootScope.playGuideMe:GmCXt.getAppSetting("guideMeSetting")&&i===rootScope.playSlideshow&&rootScope.enableGuidemeMode&&!GmCXt.isOnboarding(t)&&(r=!0);break;case rootScope.playSlideshow:(GmCXt.getAppSetting("showMeSetting")&&i===rootScope.playGuideMe&&GmCXt.FT.showMe||GmCXt.isOnboarding(t))&&(r=!0);break;case rootScope.playTestMe:GmCXt.getAppSetting("testMeSetting")&&i===rootScope.playGuideMe&&GmCXt.FT.testme&&!GmCXt.isOnboarding(t)&&(r=!0);break;case rootScope.playVLab:GmCXt.getAppSetting("vLab")&&i===rootScope.playGuideMe&&rootScope.enableMyteacher&&!GmCXt.isOnboarding(t)&&(r=!0)}return r}},rootScope.showDomainRedirect=function(e){var t=!1,r=rootScope.labels.guideNotExist,i=GmCXt.checkDomainInApps(e.tour_url);i.domainMatch?t=(t=(t=rootScope.labels.belongToOtherApp).replace(/{TOURURL}/g,"<strong>"+GmCXt.getHostnameFromUrl(e.tour_url)+"</strong>")).replace(/{APPNAME}/g,"<strong>"+i.appName+"</strong>"):GmCXt.FT.creatorApp&&(t=(t=rootScope.labels.setDomain).replace(/{TOURURL}/g,"<strong>"+GmCXt.getHostnameFromUrl(GmCXt.urlParts.host)+"</strong>")),rootScope.showPopup(r,null,"warning",t)},rootScope.guideAction=function(t,r,i,a,o,n){return!!rootScope.isTooltip(i)||(n=n||!1,GmCXt.isOnboarding(i,n)?(rootScope.previewNotification(i,n,r),!0):void rootScope.checkAppList().then(async function(){var e;return GmCXt.isDomainInActiveApp()||t===rootScope.playSlideshow||i.tour_settings.redirectionUrl?"0"!==i.step_count&&i.step_count?(e={tour_id:i.tour_id,category_id:i.category_id},GmCXt.checkDefaultLangForTour(i,rootScope.language)||(e.language=rootScope.language),void(i.steps.length?tourCb(t,r,i,a,o,n):(Gm.loading.set(!0),api.getTour(e,function(e){Gm.loading.set(!1),tourCb(t,r,e,a,o,n)},function(){Gm.showModal.set(!0),Gm.dialogBox.set({msg:labels.tourPlayError,popupType:"error",onConfirm:()=>{GS.showModal.set(!1)},showCancelButton:!1})})))):(Gm.showModal.set(!0),Gm.dialogBox.set({msg:"There are no steps to play",popupType:"info",onConfirm:()=>{GmCXt.showModal.set(!1)},showCancelButton:!1}),!0):(rootScope.showDomainRedirect(i),!0)}))},rootScope.play=function(t,e){if(rootScope.trackSearchActivity(!0),rootScope.isResumeGuide=e,GmCXt.log(33,"Play tour"+GmCXt.tourLog(t)),t&&"help_article"===t.tour_type)window.open(t.tour_settings.articleUrl,"_blank");else if(rootScope.FT.creatorApp)rootScope.goToTourView(t);else if(GmCXt.isWBMicroPlayer()||rootScope.isDesktopApp())rootScope.guideAction(rootScope.playSlideshow,null,t);else{let e=rootScope.getDefaultPlayAction(t);"Default"===e&&(e=rootScope.getAppSetting("defaultPlayAction")),rootScope.guideAction(e,null,t,get_store_value(Gm.CurrentPage))}},rootScope.previewNotification=function(e,t,r){var i=[];i.push(e),GmCXt.loadGuideNotifications(i,!0,t,r)},rootScope.isOnlySurveyGuide=function(t){let r=!0;if(t&&0<t.steps.length){for(let e=0;e<t.steps.length;e++)if(t.steps[e]&&t.steps[e].step_type!==GmCXt.STEP_TYPE_SURVEY){r=!1;break}}else r=!1;return r},rootScope.displayTaskListWidget=function(e){GmCXt.isEmpty(rootScope.taskList)?(rootScope.isTaskListVisible=!1,Gm.isTaskListVisible.set(rootScope.isTaskListVisible)):(e(rootScope.taskList),rootScope.processTaskListByRules(rootScope.taskList))},rootScope.filterCompleatedTasks=function(e){let t=[];return rootScope.taskList&&rootScope.taskList.filter(function(e){e.completed||t.push(e)}),t},rootScope.closeAppPopup=function(){rootScope.navBarVisible||mg$$1(".ege-panel-overlay")&&mg$$1(".ege-panel-overlay").is(":visible")&&(rootScope.guideViewFullScreen=!1,rootScope.toggleGuideViewFullScreen(),mg$$1(".ege-panel-overlay").css({display:"none"}))},rootScope.toggleGuideViewFullScreen=function(){var e;rootScope.guideViewFullScreen?(e={action:"mgPlayerJSPreview_action:increase_side_panel_width"},GmCXt.sendToParentWindow(e),mg$$1(".ege-panel").css({width:"90%","max-width":"90%",transition:"width 0s"})):(e={action:"mgPlayerJSPreview_action:reduce_side_panel_width"},GmCXt.sendToParentWindow(e),mg$$1(".ege-panel").css({width:"500px","max-width":"500px",transition:"width 0s"}))},rootScope.closeAppPanel=function(){rootScope.closeAppPopup(),rootScope.applicationDropdown=!1,rootScope.automationDropdown=!1;GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:close_app_panel"}),"no-app"===rootScope.currentView&&GmCXt.FT.isPlayer&&rootScope.hideWidget(),mg$$1(".ege-panel").removeAttr("style")},rootScope.getTranslatedTaskList=function(e,i,a){let o=e;return o.forEach((e,t)=>{var r=GmCXt.parseJSON(e.language_data);r&&i&&r[i]&&((r=r[i]).title&&("taskList"===a?o[t].task_list_title=r.title:"folders"===a&&(o[t].folder_title=r.title)),"guides"===a)&&r.tour_title&&(o[t].tour_title=r.tour_title,o[t].tour_description=r.tour_description),GmCXt.isEmpty(e.guides)||(o[t].guides=rootScope.getTranslatedTaskList(e.guides,i,"guides")),GmCXt.isEmpty(e.folders)||(o[t].folders=rootScope.getTranslatedTaskList(e.folders,i,"folders"))}),o},rootScope.getTaskListData=function(t,e){rootScope.taskList?(rootScope.language&&(rootScope.taskList=rootScope.getTranslatedTaskList(rootScope.taskList,rootScope.language,"taskList")),rootScope.taskList=rootScope.filterCompleatedTasks(rootScope.taskList),rootScope.guideSegmentation&&GmCXt.inPlayer?rootScope.checkTaskSegmentation(rootScope.taskList,t):rootScope.displayTaskListWidget(t)):GmCXt.onPrem()||rootScope.taskListApiInProcess||!(0===e||parseInt(GmCXt.appList["app:"+GmCXt.activeAppId].modification_date)>parseInt(e))||(rootScope.taskListApiInProcess=!0,api.getTaskList().then(function(e){rootScope.taskList=rootScope.notDefaultLang()?rootScope.getTranslatedTaskList(e.task_list,rootScope.language,"taskList"):e.task_list,GmCXt.isEmpty(rootScope.taskList)||api.getTaskListDetails().then(function(e){e=e.data.task_lists;rootScope.updateDetailInMainTaskList(e),rootScope.taskList=rootScope.filterCompleatedTasks(rootScope.taskList),storage.taskList.set(rootScope.taskList),rootScope.taskListApiInProcess=!1,rootScope.guideSegmentation&&GmCXt.inPlayer?rootScope.checkTaskSegmentation(rootScope.taskList,t):(t(rootScope.taskList),rootScope.processTaskListByRules(rootScope.taskList))})}).catch(function(){}))},rootScope.checkTaskSegmentation=function(e,t){var r=[],i=[];function a(e){GmCXt.isEmpty(e)||(r.includes(e.task)||r.push(e.task),rootScope.taskList=r,rootScope.displayTaskListWidget(t))}if(0<e.length){for(var o,n=0;n<e.length;n++)GmCXt.isEmpty(e[n].task_list_setting)||(o=GmCXt.parseJSON(e[n].task_list_setting),GmCXt.isEmpty(o.segment_groups))?r.push(e[n]):(o={tour_id:e[n].task_list_id,tour_title:e[n].task_list_title,tour_settings:o,task:e[n]},i.push(o));GmCXt.isEmpty(i)?rootScope.displayTaskListWidget(t):GmCXt.timeout(function(){GmCXt.checkGuidesBasedOnSegment(i,a,"taskListSeg"),rootScope.taskList=r,rootScope.displayTaskListWidget(t)},0)}else rootScope.processTaskListByRules(e)},rootScope.getTaskListIndexById=function(t){var e=-1;return e=rootScope.taskList?rootScope.taskList.findIndex(function(e){return e.task_list_id===t}):e},rootScope.updateDetailInMainTaskList=function(t){var r=rootScope.taskList;if(!GmCXt.isEmpty(t))for(let e=0;e<t.length;e++){var i=rootScope.getTaskListIndexById(t[e].id);-1!==i&&(r[i].user_completed_guide_count=parseInt(t[e].user_completed_guide_count),r[i].guide_count=parseInt(t[e].guide_count),r[i].completed=t[e].completed)}rootScope.taskList=r},rootScope.displyTaskList=function(){var e=GmCXt.activeAppId,t=GmCXt.appList;return!!(GmCXt.isPlayer()&&!GmCXt.inPlayer||GmCXt.inPlayer&&e&&!GmCXt.isEmpty(t)&&!GmCXt.isEmpty(t["app:"+e])&&!GmCXt.isEmpty(t["app:"+e].task_list_count)&&0<parseInt(t["app:"+e].task_list_count))},rootScope.refreshTaskList=function(e){document.getElementsByClassName("mgPlayerJSPreview_task-list-container").length?rootScope.setActivePage("taskList"):rootScope.sendMessageToShowTaskListWidget()},rootScope.sendMessageToShowTaskListWidget=function(){var r;rootScope.displyTaskList()&&(r=function(e){rootScope.processTaskListByRules(e)},GmCXt.isEmpty(GmCXt.user)||!GmCXt.isPlayer()||rootScope.taskListApiInProcess||storage.taskList.get().then(function(e){rootScope.taskList=null;var t=0;GmCXt.isEmpty(e)||GmCXt.isEmpty(e.list)||(rootScope.taskList=e.list),GmCXt.isEmpty(e)||GmCXt.isEmpty(e.time)||(t=e.time),rootScope.getTaskListData(r,t)}))},rootScope.openTaskList=function(){rootScope.displyTaskList()&&(mg$$1(".mgPlayerJSPreview_push-notification-container").is(":visible")?mg$$1(".ege-panel").css({width:"500px",right:"-9550px"}):(mg$$1(".ege-panel").css({width:"100%"}),Gm.activeView.set("taskList")))},rootScope.guideHideForPlayer=function(e){var t=!1;return t=e&&e.guideHideForP&&rootScope.FT.isPlayer?!0:t},rootScope.markTaskGuideComplete=function(r){var e={task_id:r.taskListId,guide_id:r.tourId};function i(){rootScope.taskList=rootScope.filterCompleatedTasks(rootScope.taskList),rootScope.taskListGuidesCount(rootScope.taskList),Gm.loading.set(!1)}Gm.loading.set(!0),api.markTaskGuideComplete(e,function(){var e=rootScope.taskList,t=rootScope.getTaskListIndexById(r.taskListId);-1!==t&&(GmCXt.isEmpty(r.complete_count)||GmCXt.isEmpty(r.total_count)||r.complete_count+1!==r.total_count?e[t].user_completed_guide_count=e[t].user_completed_guide_count+1:(e[t].user_completed_guide_count=e[t].guide_count,e[t].completed=!0),rootScope.updateTaskList(e).then(i))})},rootScope.updateTaskList=function(r){return new Promise(function(t,e){storage.taskList.get().then(function(e){GmCXt.isEmpty(e)||GmCXt.isEmpty(e.list)||(storage.taskList.remove(),e.list=r,rootScope.taskList=r,storage.taskList.set(r,e.time),t())})})},rootScope.markTaskGuideCompletePlayedOutside=function(t){var e;rootScope.taskList&&0<rootScope.taskList.length&&0<(e=rootScope.taskList.filter(function(e){return!(!e.guides||!e.guides.some(function(e){return e.tour_id.toString()===t.tourId}))||!!e.folders&&0<e.folders.filter(function(e){return e.guides&&e.guides.some(function(e){return e.tour_id.toString()===t.tourId})}).length})).length&&e.forEach(function(e){e={taskListId:e.task_list_id,tourId:t.tourId,complete_count:e.user_completed_guide_count,total_count:e.guide_count};rootScope.markTaskGuideComplete(e)})},rootScope.processTaskListByRules=function(e){for(var t=[],r=0;r<e.length;r++){var i,a=e[r];a.task_list_setting&&(a.task_list_setting=GmCXt.parseJSON(a.task_list_setting),i=a.task_list_setting.rules)&&0<i.length&&!GmCXt.ruleEngine.evaluateRules(i)||t.push(a)}return rootScope.taskListGuidesCount(t),t},rootScope.taskListGuidesCount=function(e){var t;GmCXt.FT.isPlayer&&(!(t=e.length)||t<=0?(GmCXt.taskListCount=0,rootScope.taskListCount=0,rootScope.isTaskListVisible=!1):(rootScope.taskListCount=t<100?t:"99+",rootScope.isTaskListVisible=!0),Gm.allTaskList.set(e),Gm.isTaskListVisible.set(rootScope.isTaskListVisible),Gm.taskListCount.set(t),GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:inform_task_list_guide_count",data:{count:t}}))},rootScope.getSegmentGroupList=function(){var i={organization_id:GmCXt.organization.organization_id},a={list:[],time:Date.now()};return new Promise(function(t,e){function r(e){a.list=e,storage.segmentGroupData.set(a),t(a.list)}GmCXt.inPlayer?(a.list=GmCXt.organization.segment_groups,storage.segmentGroupData.set(a),t(a.list)):GmCXt.api.getSegmentGroupList(i).then(function(e){GmCXt.validateApiResp(r,"segment/group/list?organization_id=",e.data.groups,GmCXt.model.segmentGroups)}).catch(function(){t(a.list)})})},rootScope.startGuideAction=function(t,e,r,i){if(r&&rootScope.lastVideoStepCreated){var a=(new Date).getTime()-rootScope.lastVideoStepCreated.time;if(rootScope.lastVideoStepCreated.id===r.step_id&&a<6e4)return void rootScope.showPopup(rootScope.labels.processingVideo)}if(i.is_published)switch(e){case rootScope.playVideoTour:if(i.media_files&&"0"===i.media_files[0].video)return void rootScope.showPopup(rootScope.labels.msgVideoNotFound);t.data.type=rootScope.playVideoTour,t.data.mode=t.data.type;break;case rootScope.playGiphy:if("0"===i.media_files[0].gify)return void rootScope.showPopup(rootScope.labels.msgGiphyNotFound);t.data.type=rootScope.playGiphy,t.data.mode=t.data.type}e===rootScope.playSlideshow?(t.data.type=rootScope.playSlideshow,t.data.mode=t.data.type):e===rootScope.playVLab&&(t.data.type=rootScope.playVLab,t.data.mode=t.data.type);function o(e){e&&(e=sortUserData(e),t.data.loops=e.length-1,t.data.currentLoop=0,t.data.csvData=e),GmCXt.sendToParentWindow(t)}t.data.origin=rootScope.activeTab,t.data.taskObj&&t.data.taskObj.taskId&&(t.data.origin="task_list"),t.data.guideOpened="tour-view"===rootScope.currentView,e===rootScope.playAuto?(t.data.automate=!0,t.data.initiator="doitforme",Gm.loading.set(!0),checkIfCSV(i).then(function(e){Gm.loading.set(!1),e?modal.openDoItPopup(o,"Upload CSV"):o()})):o()},rootScope.getTourLangInfo=function(e){let t="";e=e.tour_settings;return GmCXt.isDefined(e.language_settings)&&(t=e.language_settings.language+"-"+e.language_settings.voice),t=rootScope.enableTranslation&&rootScope.language?rootScope.language+"-"+rootScope.languageVoice:t},rootScope.getStepFromTour=function(t,r){if(!t)return!1;for(let e=0;e<r.steps.length;e++)if(parseInt(r.steps[e].step_id)===parseInt(t))return r.steps[e]},rootScope.existsOrUndefined=function(e){return!(!e&&void 0!==e)},rootScope.updateStatusProgressBar=function(e){mg$$1(".mgPlayerJSPreview_video-upload-progress-bar-wrapper").find(".mgPlayerJSPreview_progress-bar-percentage").html(e.data.percentComplete+"%"),mg$$1(".mgPlayerJSPreview_video-upload-progress-bar-wrapper").find(".mgPlayerJSPreview_progress-bar-percentage").css("width",e.data.percentComplete+"%")},rootScope.updatedInProgressVariable=function(e){e=!(!e.data||!e.data.status);(rootScope.uploadInProgress=e)&&(rootScope.uploadProgressBar=!0)},rootScope.hideProgressBar=function(){rootScope.uploadProgressBar=!1,mg$$1(".mgPlayerJSPreview_video-upload-progress-bar-wrapper").hide()},rootScope.checkLinkedGuideStep=function(e,t){var i=e,a=0;function o(e){e=e.steps;a--,i=GmCXt.arrayMerge(i,e)}e.forEach(function(t){var e,r;t.step_settings.tour_id&&(i=i.filter(function(e){return e.step_id!==t.step_id}),e={tour_id:t.step_settings.tour_id},a++,r=!1,GmCXt.apiPlayer&&(r=!0),api.getTour(e,o,o,r))});var r=setInterval(function(){t(i,a,r)},500)},rootScope.checkStepsForDoItForMeMode=function(e){let t=0;var r=[GmCXt.STEP_TYPE_SURVEY,GmCXt.STEP_TYPE_IMAGE,GmCXt.STEP_TYPE_VIDEO],i={...e.steps};if(!(e&&0<i.length))return!1;for(let e=0;e<i.length;e++)r.includes(i[e].step_type)&&t++;return t===i.length},rootScope.isBeacon=function(e){return!(!e||!e.tour_type||-1===e.tour_type.indexOf("beacon_tour"))},rootScope.checkTourType=function(e){return!(rootScope.isTooltip(e)||GmCXt.isBotGuide(e)||GmCXt.isFeatureTags(e)||rootScope.isBeacon(e)&&!rootScope.currentPageBeacon)},rootScope.readLocalCT=function(e,t){return!(!rootScope.contextTours||!rootScope.contextTours[e])&&rootScope.contextTours[e][t]},rootScope.filterCurrentPageTourTypes=function(e){return e=e.filter(function(e){if(rootScope.checkTourType(e))return e}),GmCXt.log(30,"FILTERED current page tours",e),e},rootScope.breadCrumbItemsUpdate=function(e){let t=get_store_value(Gm.breadCrumb);var r;Gm.breadCrumb.subscribe(e=>{t=e}),e.category_id,e.parent_id&&"0"!==e.parent_id?(-1!==(r=t.indexOf("All Guides"))&&t.splice(r,1),t.unshift(e),-1!==r&&t.unshift("All Guides"),rootScope.getCategoryApi(e.parent_id,rootScope.breadCrumbItemsUpdate)):(-1!==(r=t.indexOf("All Guides"))&&t.splice(r,1),t.unshift(e),-1!==r&&t.unshift("All Guides")),Gm.breadCrumb.set(t)},rootScope.getBreadcrumsCategories=function(e,t){"allguidesSearchPage"!==get_store_value(Gm.CurrentPage)||containsCategoryWithId(e.category_id)||(Gm.breadCrumb.set(["All Guides"]),rootScope.getCategoryApi(e.category_id,rootScope.breadCrumbItemsUpdate),get_store_value(Gm.breadCrumb),Gm.breadCrumb.subscribe(e=>{}))},rootScope.getCategoryApi=function(e,t,r,i){var a;e&&(e={category_id:e},rootScope.language&&!GmCXt.isFalse(rootScope.language)&&(e.language=rootScope.language),GmCXt.getLXPLang()&&(e.language=GmCXt.getLXPLang()),a=GmCXt.user,GmCXt.isEmpty(a)&&!GmCXt.onPrem()||api.getCategoryDetails(e,t,r,i))},rootScope.setTour=creatorUpdate.setTour,rootScope.addTourList=creatorUpdate.addTourList,rootScope.deleteCategoryServerUpdate=creatorUpdate.deleteCategoryServerUpdate,rootScope.isUpdateNeeded=creatorUpdate.isUpdateNeeded,rootScope.checkCurrentViewForUpdate=creatorUpdate.checkCurrentViewForUpdate,rootScope.updateServerUpdateList=creatorUpdate.updateServerUpdateList,rootScope.updateTourProperty=creatorUpdate.updateTourProperty,rootScope.deleteTourServerUpdate=creatorUpdate.deleteTourServerUpdate,rootScope.getTourFromId=function(e,t){let r={};if(t&&rootScope.allTourList["cat_"+t])r=rootScope.allTourList["cat_"+t]["tour_"+e];else for(var i in rootScope.allTourList)if(rootScope.allTourList[i]["tour_"+e]){r=rootScope.allTourList[i]["tour_"+e];break}return r},rootScope.getTranslatedTours=function(e,i){let a=[...e];return i=rootScope.language,a.forEach((e,t)=>{var r=e.language_data,r=(i=!e.tour_settings.translationEnable&&GmCXt.isGuide(e)?rootScope.defaultLang:rootScope.language,r&&r[i]&&!rootScope.isGuideInOriginalLang(e)&&(r[i].tour_title&&(e.tour_title=r[i].tour_title),r[i].tour_description&&(e.tour_description=r[i].tour_description),r=r[i].tour_settings)&&(r.beacon&&(e.tour_settings.beacon=r.beacon),r.rules)&&(e.tour_settings.rules=r.rules),rootScope.allCategories["cat_"+e.category_id]);r&&r.language_data&&r.language_data[i]&&(e.category_title=r.language_data[i].category_title),e.steps&&(a[t]=rootScope.getTranslatedTourAndSteps(e,i))}),a},rootScope.filterKeyInputGuides=function(e){rootScope.keyInputGuides=e.filter(function(e){if(e&&e.tour_settings&&!GmCXt.isEmpty(e.tour_settings.keyboardKeyInput))return e});e={action:"mgPlayerJSPreview_action:get_key_input_guides",data:{tours:rootScope.keyInputGuides}};GmCXt.sendToParentWindow(e)},rootScope.processContextualGuide=function(e,t){let r=e;return e.data&&(r=e.data.data.tours),rootScope.filterKeyInputGuides(r),GmCXt.isPlayer()&&(r=GmCXt.filterScheduleTours(r)),GmCXt.inPlayer&&rootScope.notDefaultLang()&&(r=structuredClone(r),r=rootScope.getTranslatedTours(r)),rootScope.contextTours&&!rootScope.contextTours[t]&&(rootScope.contextTours[t]=[]),rootScope.contextTours[t][GmCXt.pageTitle]=r},rootScope.isUserLogin=function(){return new Promise(function(t,e){storage.user.get().then(function(e){e&&!GmCXt.isEmpty(e)&&(GmCXt.user=e)&&e.accesstoken&&t(!0),t(!1)})})},rootScope.goToTourView=function(e){storage.currentTour.set(e),Gm.currentTour.set(e),rootScope.setCurrentPage("stepview")},rootScope.trackSearchEvent=function(e){rootScope.trackSearch&&rootScope.trackSearch.track&&(rootScope.trackSearch.track=!1,e={search_text:rootScope.trackSearch.keyword,results_returned:rootScope.trackSearch.results_returned,search_result_clicked:e,startTime:rootScope.trackSearch.startTime},GmCXt.trackerV1.trackGuideSearch(e),rootScope.trackSearch={})},rootScope.trackCurrentPageSearchEvent=function(e){rootScope.trackCurrentPageSearch&&rootScope.trackCurrentPageSearch.track&&(rootScope.trackCurrentPageSearch.track=!1,e={search_text:rootScope.trackCurrentPageSearch.keyword,results_returned:rootScope.trackCurrentPageSearch.results_returned,search_result_clicked:e,startTime:rootScope.trackCurrentPageSearch.startTime},GmCXt.trackerV1.trackGuideSearch(e,rootScope.pageUrl))},rootScope.trackSearchActivity=function(e){rootScope.searchKeyword&&rootScope.trackSearchEvent(e),rootScope.search&&rootScope.trackCurrentPageSearchEvent(e)},rootScope.isRefreshView=function(){return"home"===get_store_value(Gm.activeView)},rootScope.updateCdnSignature=function(){var e;(e={action:"mgPlayerJSPreview_action:update_cdn_signature",data:{}}).data.user=rootScope.user,GmCXt.user=rootScope.user,GmCXt.sendToParentWindow(e),GmCXt.reloadFailedImages()},rootScope.fetchOrgFromAPI=function(){return new Promise(function(t,e){api.getOrganization(function(e){rootScope.saveOrganization(e),rootScope.showWidget(),t(!0)})})},rootScope.isFetchingCdn=!1,rootScope.ongoingCdnPromise=null,rootScope.getNewCdnSignature=function(){return rootScope.isFetchingCdn||(rootScope.isFetchingCdn=!0,rootScope.ongoingCdnPromise=new Promise(function(r,t){var e,i=GmCXt.organization;function a(){api.getCdnSignature(e,function(e){var t;(e=e)&&(e=e.data)&&e.cdn_signature&&e.cdn_signature_expiry&&(t=GmCXt.user)&&(t.cdn_signature=e.cdn_signature,t.cdn_signature_expiry=e.cdn_signature_expiry,rootScope.saveUser(t),rootScope.updateCdnSignature()),rootScope.isFetchingCdn=!1,r()})}GmCXt.onPrem()?r():i&&!GmCXt.isEmpty(i)?(e={},i.organization_id?(e.organization_id=i.organization_id,a()):rootScope.fetchOrgFromAPI().then(function(e){a()}).catch(function(e){t(e)})):rootScope.fetchOrgFromAPI().then(function(e){a()})})),rootScope.ongoingCdnPromise},rootScope.checkCdnSignature=function(){return new Promise(function(t,r){var i=GmCXt.user;if(i&&!GmCXt.isEmpty(i)){if(!i.cdn_signature||!i.cdn_signature_expiry)return void rootScope.getNewCdnSignature().then(t).catch(r);let e=parseInt(i.cdn_signature_expiry);(e=e?1e3*e:0)&&(e-=12e4);i=(new Date).getTime();if(e-i<=0)return void rootScope.getNewCdnSignature().then(t).catch(r)}t()})},rootScope.setInsightsClientKey=function(t,r){GmCXt.api.getClientSecretInsight(t).then(function(e){GmCXt.log(21,"Insights client key is set"),e={registerClientId:t,app_client_secret:e.data.app_client_secret,app_client_timestamp:r},storage.trackerSecrets.set(e)}).catch(function(e){GmCXt.log(1,"ERROR: failed to get insights client key"),e&&"006-001-002"===e.errorCode&&(rootScope.trackerSecrets={},rootScope.registerClientInsights())})},rootScope.registerClientInsights=function(){var e,t=(new Date).getTime();e=GmCXt.isEmpty(rootScope.trackerSecrets)?parseInt(t/1e3):parseInt((t-rootScope.trackerSecrets.app_client_timestamp)/1e3),GmCXt.isEmpty(rootScope.trackerSecrets)||!rootScope.trackerSecrets.registerClientId?GmCXt.api.registerClientInsight().then(function(e){rootScope.setInsightsClientKey(e.data.app_client_id,t)}).catch(function(){}):3600<e&&rootScope.setInsightsClientKey(rootScope.trackerSecrets.registerClientId,t)},rootScope.sendUserInfo=function(){rootScope.checkCdnSignature().then(function(){var e=GmCXt.organization;GmCXt.inPlayer&&(GmCXt.orgBucket=e.bucket),rootScope.sendSidePanelInitEvent(),getKeysForTracking()})},rootScope.sendSidePanelInitEvent=function(e){var t,r,i,a;!rootScope.maintenance&&rootScope.activeAppId&&(GmCXt.log(21,"Side panel intialisation completed"),i=GmCXt.appList,a=GmCXt.user,t=GmCXt.organization,r=GmCXt.urlParts,i=rootScope.removeCatFromApplist(i),a={action:"mgPlayerJSPreview_action:on_side_panel_init",data:{user:a,activeAppId:rootScope.activeAppId,organization:t,userPrefLang:rootScope.userPrefLang,appList:i,refreshTime:rootScope.refreshTime,lastTimeStampSync:rootScope.lastTimeStampSync,url:r.fullUrl,reset:e}},Gm.activeView.update(e=>"home"===e?"":"home"),GmCXt.onPrem(),sendMessage(a))},rootScope.isAllowedDomain=function(){let t=!0;if(GmCXt.conf.allowedDomains&&GmCXt.conf.allowedDomains.length){t=!1;for(let e=0;e<GmCXt.conf.allowedDomains.length;e++)if(0<=GmCXt.urlParts.host.indexOf(GmCXt.conf.allowedDomains[e])){t=!0;break}}return t},rootScope.initApp=function(){(GmCXt.onPrem()?initOnPremPlayer:GmCXt.isPlayer()?initPlayer:initCreator)()},rootScope.hideWidget=function(){GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:hide_widget"})},rootScope.showWidget=function(){GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:show_widget"})},rootScope.goToNoApp=function(){GmCXt.isPlayer()&&rootScope.hideWidget(),Gm.activeView.update(e=>"home"===e?"":"home"),Gm.activeView.set("home"),rootScope.setCurrentPage("noapp")},rootScope.validateAndMigrateTour=function(e){e=GmCXt.validateDataModel(e,GmCXt.model.guide);return GmCXt.migrateTour(e)},rootScope.updateGuideInPublishedTour=function(r,i){let a=!1;rootScope.publishedTours.forEach(function(e,t){parseInt(e.tour_id)===parseInt(r.tour_id)&&(a=!0,i?rootScope.publishedTours.splice(t,1):rootScope.publishedTours[t]=r)}),a||i||rootScope.publishedTours.push(r)},rootScope.updateTourToStorage=function(e,r,i){GmCXt.log(70,"UPDATE TOUR: "+GmCXt.tourLog(e)),r||i||(rootScope.setTour(e),GmCXt.log(70,"UPDATE TOUR: Global updated"+GmCXt.tourLog(e)));var t=i||rootScope.activeAppId;let a=e.category_id;var o=e.tour_id;let n=!1;if(updateContextualTourSteps(e),GmCXt.appList["app:"+t]&&!(n=GmCXt.appList["app:"+t].categories?GmCXt.appList["app:"+t].categories.filter(function(e){return parseInt(e.category_id)===parseInt(a)})[0]:n)&&GmCXt.appList["app:"+t].categories){var s=GmCXt.appList["app:"+t].categories;for(let e=0;e<s.length&&!(n=s[e].sub_categories?getSubCat(s[e].sub_categories,a):n);e++);}if(n){let t;if(n.tours)for(let e=0;e<n.tours.length;e++)if(parseInt(n.tours[e].tour_id)===parseInt(o)){t=e;break}0<=t?r?(n.tours.splice(t,1),GmCXt.log(70,"UPDATE TOUR: tour REMOVED"+GmCXt.tourLog(e))):(n.tours.splice(t,1,e),GmCXt.log(70,"UPDATE TOUR: tour UPDATED"+GmCXt.tourLog(e))):r||(n.tours||(n.tours=[]),n.tours.push(e),GmCXt.log(70,"UPDATE TOUR: tour ADDED"+GmCXt.tourLog(e))),storage.appData.set(GmCXt.appList),i||rootScope.updateGuideInPublishedTour(e,r)}else GmCXt.log(70,"UPDATE TOUR: category not found"+GmCXt.tourLog(e))},GmCXt.storage().get(["screen_recorder_close"]).then(function(e){e.screen_recorder_close?(rootScope.isScreenRecorderClose=e.screen_recorder_close,GmCXt.sendMessageToBackgroundService({action:"mgPlayerJSPreview_action:show_recording_off"})):rootScope.isScreenRecorderClose=!1}),rootScope.getSteps=function(r){return new Promise(function(t,e){api.getTour(r,function(e){rootScope.notDefaultLang()&&(e=rootScope.getTranslatedTourAndSteps(e,rootScope.language),t(e)),t(e)})})},rootScope.isTooltip=function(e){return!(!e||!e.tour_type||-1===e.tour_type.indexOf("smartTip"))},rootScope.isHelpArticle=function(e){return!(!e||!e.tour_type||-1===e.tour_type.indexOf("help_article"))},rootScope.isMobileGuide=function(e){return!!(e&&e.tour_settings&&e.tour_settings.tour_type&&-1!==e.tour_settings.tour_type.indexOf("mobile"))},rootScope.isPlayedTour=function(e){var t=get_store_value(Gm.playedTour);return!(!GmCXt.isPlayer()||GmCXt.isEmpty(t)||-1===t.indexOf(e))},rootScope.branchGuideDownloadOpts=function(e){e.video_file=!1,e.gif_file=!1,e.text_file=!1,e.word_file=!1,e.blog_file=!1},rootScope.loader=function(){return GmCXt.loader()},rootScope.addPanelOverlay=function(){mg$$1(".ege-panel-overlay").remove(),mg$$1(".ege-panel").append("<div class='ege-panel-overlay'></div>")},rootScope.showPanelOverlay=function(){mg$$1(".ege-panel-overlay").css({display:"block"})},rootScope.hidePanelOverlay=function(){mg$$1(".ege-panel-overlay")&&mg$$1(".ege-panel-overlay").is(":visible")&&mg$$1(".ege-panel-overlay").css({display:"none"})},rootScope.updateAccessToken=function(){var e={action:"mgPlayerJSPreview_action:update_access_token",data:{user:GmCXt.user}};GmCXt.sendToParentWindow(e)},rootScope.updateAccessTokenCallBack=function(e,t,r){var i;e?((i=GmCXt.user).accesstoken=e.accesstoken,i.refreshtoken=e.refreshtoken,GmCXt.isDefined(e.app_access)&&(i.app_access=e.app_access),rootScope.saveUser(i),t&&t(r||i.accesstoken),rootScope.updateAccessToken(),rootScope.updateWidgetIconSendMsg(),rootScope.updateLabels()):GmCXt.log(1,"ERROR: failed to get a new accesstoken")},rootScope.getAccessTokenFromRefreshToken=function(t,r){api.getAccessToken(function(e){rootScope.updateAccessTokenCallBack(e,t,r)})},rootScope.getAllSegments=function(r){return new Promise(function(t,e){r?rootScope.getSegmentGroupList().then(function(e){t(e)}):storage.segmentGroupData.get().then(function(e){e.length?t(e):rootScope.getSegmentGroupList().then(function(e){t(e)})})})},rootScope.resetCreatorData=function(e){rootScope.allCategories={},GmCXt.inPlayer||(rootScope.categoryStore=[]),rootScope.subCategoryStore={},rootScope.allTourList={},e&&(GmCXt.inPlayer||storage.category.remove(),storage.allTourList.remove(),storage.serverUpdates.remove(),storage.serverDeletes.remove(),storage.refreshCache.remove())},rootScope.resetCreatorData(),rootScope.cancelAutomationSelection=function(){rootScope.automationSelectionMode=!1,rootScope.myGuidesFilter=!0,rootScope.categoryDataForAutomation=[]},rootScope.processActiveRequests=function(){rootScope.maintenance||GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:process_active_requests"})},rootScope.getOnPremOrg=function(a){return new Promise(function(t,e){var r=GmCXt.organization;function i(e){rootScope.saveOrgSettings(e.settings),rootScope.enableOrgFeatures(e),getCurrentAppObj().then(function(){rootScope.sendSidePanelInitEvent(),t()})}GmCXt.isEmpty(r)||a?api.getOrgJson().then(function(e){GmCXt.getJsonTimeStamp(GmCXt.getOnPremJsonURL()).then(function(e){storage.refreshTime.set(e.last_updated_time)}),Gm.loading.set(!1);var t=(e=e.data).applications,e=GmCXt.validateDataModel(e,GmCXt.model.organization);rootScope.saveOrganization(GmCXt.organization),t=GmCXt.validateModelArray(t,GmCXt.model.applications._obj),rootScope.saveApps(t),i(e)}):i(r)})},rootScope.refreshAllData=function(e){GmCXt.log(21,"REFRESH event"),Gm.loading.set(!0),rootScope.isRefresh=!0,storage.taskList.remove(),storage.languageList.remove(),storage.segmentGroupData.remove(),resetData(),GmCXt.onPrem()?initOnPremPlayer(!0):e?gotAccessToken():rootScope.getAccessTokenFromRefreshToken(gotAccessToken),Gm.loading.set(!1)},rootScope.showLogoutBtn=function(){var e=GmCXt.user;return!(GmCXt.isEmpty(e)||GmCXt.conf.autologin||GmCXt.isLXP()||GmCXt.conf.appConfig.login.SSO)},rootScope.updateWidgetIconSendMsg=function(){GmCXt.sendToParentWindow({action:"mgPlayerJSPreview_action:update_widget_icon"})},rootScope.resetAppData=function(){rootScope.appList={},storage.activeAppId.remove()},rootScope.clearStorage=function(){return Promise.all([storage.user.remove(),storage.userList.remove(),storage.organization.remove(),storage.appData.remove(),storage.activeAppId.remove(),storage.segmentGroupData.remove(),storage.taskList.remove(),storage.currentPage.remove(),storage.breadCrumb.remove()])},readStorage().then(function(){window.addEventListener("error",function(e){e&&e.target&&GmCXt.onImageLoadError(mg$$1(e.target))},!0),rootScope.subscribeEvents(),rootScope.updateLabels(),rootScope.reportInitialization()}),rootScope.triggerSsoInterval=function(){clearInterval(rootScope.ssoLoginCheck),rootScope.ssoLoginCheck=setInterval(function(){!rootScope.ssoSuccess&&rootScope.ssoHitCount<30?(rootScope.ssoHitCount++,rootScope.signInWithSso()):rootScope.clearSsoInterval()},2e3)},rootScope.getSsoUserInfo=function(){rootScope.ssoHitCount<30&&(rootScope.ssoHitCount++,setTimeout(function(){rootScope.signInWithSso()},2e3))},rootScope.openSsoTab=function(){var e;GmCXt.isEmpty(rootScope.ssoId)&&!rootScope.appConfig.login.SSO||(e=(new Date).getTime(),storage.lastSsoRedirectTime.set(e),e=getSSOWindowOpt(),rootScope.ssoTab=window.open(getSsoIdUrl(rootScope.ssoRedirectionUrl),"",e),rootScope.getSsoUserInfo())},rootScope.clearSsoInterval=function(){clearInterval(rootScope.ssoLoginCheck),closeTabForSso(),rootScope.ssoLoginCheck=""},rootScope.getUserInfoWithSSO=function(){return new Promise(async(e,t)=>{try{var r=GmCXt.trimAndLowerCaseURL(GmCXt.urlParts.host),i=getSsoIdUrl(rootScope.ssoApiUrl),a=await fetch(i,{method:"GET",credentials:"include",headers:{"x-mg-host":r,"x-mg-source":GmCXt.conf.appName,"x-mg-orgId":"","Content-Type":"application/json"}});if(!a.ok)throw new Error("Network response was not ok");var o=await a.json();e(GmCXt.parseJSON(o))}catch(e){console.error("Error fetching SSO info:",e),t(e)}})},rootScope.getSsoId=function(){return new Promise(async(e,t)=>{try{var r,i,a=GmCXt.trimAndLowerCaseURL(GmCXt.urlParts.host),o=""+GmCXt.conf.ssoConfigUrl+GmCXt.getMd5(a)+".json",n=await fetch(o,{method:"GET",credentials:"omit",headers:{"Content-Type":"application/json"}});n.ok?(r=await n.json(),i=GmCXt.parseJSON(r),rootScope.ssoId=i.id,e(i)):t(new Error("Network response was not ok"))}catch(e){console.error("Error fetching SSO ID:",e),t(e)}})},rootScope.shouldOpenSsoTab=function(){var i=(new Date).getTime();return new Promise(function(r,e){storage.lastSsoRedirectTime.get().then(function(e){var t=i>e+GmCXt.t.openSso;r(!e||t)})})},rootScope.goToMaintenance=function(){Gm.loading.set(!1),rootScope.maintenance=!0,rootScope.chatBot=!1,GmCXt.redirect("#/maintenance")},rootScope.signInWithSso=function(e){function t(){var e=GmCXt.user;GmCXt.isEmpty(e)?rootScope.shouldOpenSsoTab().then(function(e){e?rootScope.openSsoTab():rootScope.getSsoUserInfo()}):closeTabForSso()}function r(){rootScope.getUserInfoWithSSO().then(i).catch(function(e){t()})}function i(e){!1===e.error?(closeTabForSso(),rootScope.onUserSignin(e.data.user,!0,!0)):1001===e.code?t():1002===e.code?(closeTabForSso(),rootScope.hideWidget()):1014===e.code&&(closeTabForSso(),rootScope.goToMaintenance())}GmCXt.isEmpty(rootScope.myGuideOrgKey)&&GmCXt.myGuideInternalCustomers()||e?rootScope.getSsoId().then(function(e){e&&e.id&&r()}).catch(function(){GmCXt.log(1,"ERROR: failed to get SSO Id"),rootScope.clearSession()}):r()},rootScope.goToLogin=function(){Gm.activeView.set("signin")},rootScope.showPopup=function(e,t,r,i){r=r||"info",Gm.loading.set(!1),modal.close(),modal.open(e,r,t,!1,i)},rootScope.sortTourSteps=function(e,r){var i=[];return e.forEach(function(e){for(var t=0;t<r.length;t++)e.step_id===r[t].step_id&&(r[t].step_order=e.step_order.toString(),i.push(r[t]))}),i},rootScope.sortDataByActiveFilter=function(e,r,i){return!GmCXt.isEmpty(e)&&e.length?i||"currentpage"===get_store_value(Gm.CurrentPage)?!r||"atoz"!==i&&"ztoa"!==i?e.sort((e,t)=>"older"===i?e.modification_date-t.modification_date:t.modification_date-e.modification_date):"atoz"===i?e.sort((e,t)=>e[r].toLowerCase()>t[r].toLowerCase()?1:-1):"ztoa"===i?e.sort((e,t)=>t[r].toLowerCase()>e[r].toLowerCase()?1:-1):e:e.sort((e,t)=>"category_title"===r?e.category_order-t.category_order:e.tour_order-t.tour_order):[]},rootScope.isBotTourPlayed=function(t){let r=!1;for(let e=0;e<rootScope.botTourPlayList.length;e++)if(rootScope.botTourPlayList[e].tour_id===t.tour_id){r=!0;break}return r},rootScope.filterBotGuides=function(e){return e=e.filter(function(e){if(GmCXt.isBotGuide(e))return e;if(rootScope.botTourPlayList&&rootScope.botTourPlayList.length){if(e.tour_settings.enableBot&&!rootScope.isBotTourPlayed(e))return e}else if(e.tour_settings.enableBot)return e})},rootScope.setPlayedStepsInfo=function(e){if(rootScope.playedSteps=rootScope.playedSteps||[],GmCXt.isValueInArray(rootScope.playedSteps,"tId",e.tour_id)){for(var t=0;t<rootScope.playedSteps.length;t++)if(rootScope.playedSteps[t].tId===e.tour_id){rootScope.playedSteps[t].lastStepid=e.step_id;break}}else rootScope.playedSteps.push({tId:e.tour_id,lastStepid:e.step_id});storage.stepsPlayed.set(rootScope.playedSteps);var r={playedSteps:rootScope.playedSteps},i=GmCXt.user;i&&i.settings&&(i.settings.guide_view=r,rootScope.saveUser(i)),GmCXt.apiUpdateUserGuidevView(r)},rootScope.getPlayedStepCount=function(e){var t="";if(rootScope.playedSteps)for(var r=0;r<rootScope.playedSteps.length;r++)if(rootScope.playedSteps[r].tId===e.tour_id){t=rootScope.playedSteps[r].lastStepid;break}return GmCXt.getStepPosFromPs(e,t)},rootScope.hideMirrorAppCtrl=function(){let e=!1;var t;return e=GmCXt.isMirrorApp()&&!GmCXt.isEmpty(rootScope.appList)&&rootScope.activeAppId&&(t=rootScope.appList["app:"+rootScope.activeAppId])&&t.base_app_id&&0!==parseInt(t.base_app_id)?!0:e},rootScope.triggerError=function(e){mgError$1.on({code:e.code,url:e.url,params:e.params,method_type:e.method_type,message:e.errMessage})},rootScope.loginFromConsole=function(t){var e={email_id:t.email,password:t.password,keep_login:1};api.userSignIn(e,function(e){rootScope.onUserSignin(e,t.sso)},function(){rootScope.clearSession()})},rootScope.updateCategoryInStorgae=function(r,i,a){if(GmCXt.log(70,"UPDATE CATEGORY IN STORAGE: "+GmCXt.categoryLog(r)),a=a||rootScope.activeAppId){var o,n=GmCXt.appList["app:"+a].categories;let t,e=!1;if(n.length&&!parseInt(r.parent_id)){for(let e=0;e<n.length;e++)if(n[e].category_id===r.category_id){t=e;break}}else n.length||(GmCXt.appList["app:"+a].categories=[]);if(0<=t)GmCXt.log(70,"UPDATE CATEGORY IN STORAGE: category FOUND"+GmCXt.categoryLog(r)),e=!0,i?(GmCXt.appList["app:"+a].categories.splice(t,1),GmCXt.log(70,"UPDATE CATEGORY IN STORAGE: category REMOVED"+GmCXt.categoryLog(r))):((o=GmCXt.appList["app:"+a].categories[t].tours)&&!r.tours&&r.has_tour?(GmCXt.log(70,"UPDATE CATEGORY IN STORAGE: keep category tours"+GmCXt.categoryLog(r)),r.tours=o):(o=GmCXt.appList["app:"+a].categories[t].categories)&&r.has_child&&!r.categories&&(GmCXt.log(70,"UPDATE CATEGORY IN STORAGE: keep category subcats"+GmCXt.categoryLog(r)),r.categories=o),GmCXt.appList["app:"+a].categories.splice(t,1,r),GmCXt.log(70,"UPDATE CATEGORY IN STORAGE: category UPDATED"+GmCXt.categoryLog(r)));else if(parseInt(r.parent_id))for(var s,l,c=GmCXt.appList["app:"+a].categories,p=0;p<c.length;p++)if(s=c[p].sub_categories?getSubCat(c[p].sub_categories,r.category_id):s){GmCXt.log(70,"UPDATE TOURS in STORGAE: sub category found. "+r.category_id),e=!0,i||(s.has_tour&&s.tours?(l=GmCXt.createDeepCopy(s.tours),r.tours=l,s=r):s.has_child&&s.categories&&(l=GmCXt.createDeepCopy(s.categories),r.categories=l,s=r));break}e||i||0!==parseInt(r.parent_id)||(GmCXt.appList["app:"+a].categories.push(r),GmCXt.log(70,"UPDATE CATEGORY IN STORAGE: category ADD"+GmCXt.categoryLog(r))),storage.appData.set(GmCXt.appList)}},rootScope.updateCategory=function(e,t,r,i){var a="cat_"+e.category_id,o=rootScope.allCategories;!GmCXt.isEmpty(o)&&o[a]?(o[a][t]=r,i&&(o[a].modification_date=GmCXt.getCurrentTimeInSec()),GmCXt.inPlayer||storage.category.reset(o)):(e[t]=r,i&&(e.modification_date=GmCXt.getCurrentTimeInSec()),rootScope.addCategory(e)),updateCatList(e,parseInt(e.parent_id))},rootScope.updateEnvNames=function(e){var t;return"qa"===e?rootScope.labels.qa:"stage"===e?rootScope.labels.stage:"prod"===e?rootScope.labels.production:(t=rootScope.appList["app:"+rootScope.activeAppId])&&t.settings&&t.settings.app_env&&t.settings.app_env[e]?t.settings.app_env[e].name:void 0},rootScope.removeTour=function(e,t,r){if(!r){if(!rootScope.allTourList["cat_"+e]["tour_"+t])return;delete rootScope.allTourList["cat_"+e]["tour_"+t]}GmCXt.inPlayer&&rootScope.updateTourToStorage({tour_id:t,category_id:e,application_id:r},!0,r),r||(storage.allTourList.set(rootScope.allTourList),(t=rootScope.getCategory(e))&&GmCXt.FT.creatorApp&&(r=parseInt(t.total_unpublish_tour),r=0<=--r?r:0,rootScope.updateCategory(t,"total_unpublish_tour",r.toString()),0===parseInt(t.total_unpublish_tour))&&0===parseInt(t.total_publish_tour)&&rootScope.updateCategory(t,"has_tour",!1))},rootScope.fetchToursForCategory=function(e,t,r,i){e={limit:100,offset:0,category_id:e,organization_id:rootScope.organization.organization_id};r&&(e.published_guides="1"),api.getTourList(e,function(e){t(e)},i)},rootScope.updateToursInCategoryStorage=function(r,e,i,a){if(GmCXt.log(70,"UPDATE TOURS in STORAGE: ",e),a||rootScope.getCategory(r)){a=a||GmCXt.activeAppId;let t=GmCXt.appList["app:"+a].categories.filter(function(e){return e.category_id===r})[0];if(t)GmCXt.log(70,"UPDATE TOURS in STORGAE: category found. "+r);else{var o=GmCXt.appList["app:"+a].categories;for(let e=0;e<o.length;e++)if(t=o[e].sub_categories?getSubCat(o[e].sub_categories,r):t){GmCXt.log(70,"UPDATE TOURS in STORGAE: sub category found. "+r);break}}i?(GmCXt.log(70,"UPDATE TOURS in STORGAE: REMOVED "+r),t.tours=[]):(GmCXt.log(70,"UPDATE TOURS in STORGAE: UPDATED "+r),t.tours=e),e.forEach(function(e){rootScope.updateGuideInPublishedTour(e,i)}),storage.appData.set(GmCXt.appList)}else GmCXt.log(70,"UPDATE TOURS in STORGAE: category not found. "+r)},rootScope.processAppData=function(e){function r(e){var t;(i["cat_"+e.category_id]=e).sub_categories&&0<e.sub_categories.length?mg$$1.each(e.sub_categories,function(e,t){r(t)}):e.tours&&0<e.tours.length&&(a=(e=e.tours,t=a,e.forEach(function(e){t["tour_"+e.tour_id]=e}),t))}let i={},a={};GmCXt.log(21,"PROCESS NON ACTIVE app data",e);return e.categories&&0<e.categories.length&&e.categories.forEach(function(e){r(e)}),{categories:i,tours:a}},rootScope.getBasePath=function(e){return GmCXt.isExtension()?GmCXt.getBrowserUrl(e):GmCXt.isDefined(GmCXt.conf.baseUrl)?GmCXt.conf.baseUrl+e:GmCXt.conf.clientJsBaseUrl+e},rootScope.getImageURL=function(e,t,r){if(e)return r?e.split(".png")[0]+t:e.split(".png")[0]+t+rootScope.getCdnSign()},rootScope.getApiLimit=function(e){return 50*(Math.ceil(e/50)||1)},rootScope.isAppAdmin=function(){return"app_admin"===rootScope.user.role},rootScope.isOwnerOrAppAdmin=function(){return!(!rootScope.isOwner()&&!rootScope.isAppAdmin())},rootScope.hasCreatorAccess=function(){var e=rootScope.user.role;return!(!rootScope.FT.creatorApp||"creator"!==e&&"app_admin"!==e&&!rootScope.isOwner())},rootScope.clearSearchInput=function(){mg$$1("#search-text-input").val(""),rootScope.searchKeyword=""},rootScope.goToLevel=function(e,t){rootScope.clearSearchInput(),Gm.loading.set(!0);function r(e){for(var t=[];e.parent_id;){var r=GmCXt.createDeepCopy(e);t.unshift(r),e=rootScope.getCategory(e.parent_id)}t.unshift("All Guides"),Gm.breadCrumb.set(t),rootScope.setActivePage("home"),rootScope.setCurrentPage("allguides")}var i=rootScope.getCategory(e.category_id);!i||t?(e.category_id,rootScope.getCategoryApi(e.category_id,function(e){r(e)})):r(i)},rootScope.filterDefaultGuides=function(e){return e=e.filter(function(e){if(window.matchMedia("(max-width: 480px)").matches&&!GmCXt.isMiniPlayer){if(rootScope.isDesktopGuide(e))return e}else if(rootScope.isDefaultGuide(e)||rootScope.isDesktopGuide(e))return e})},rootScope.getCategoryListApi=function(e,t){rootScope.language&&!GmCXt.isFalse(rootScope.language)&&(e.language=rootScope.language),GmCXt.getLXPLang()&&(e.language=GmCXt.getLXPLang()),(rootScope.isUserLoggedIn()||GmCXt.onPrem())&&api.getCategoryList(e,t)},rootScope.dispatchEvent=function(e){document.dispatchEvent(e)},rootScope.isUserRole=function(){return"user"===rootScope.user.role},rootScope.hasTourAccess=function(e){return!!(e&&!e.is_locked||e&&rootScope.lockedByUser(e))},rootScope.isLocked=function(e){return!(!e.is_locked||e.user_id===rootScope.user.user_id)},rootScope.lockedByUser=function(e){return!(!e||!e.is_locked||e.user_id!==rootScope.user.user_id)},rootScope.getNode=function(t,e){var r=e;for(let e=0;e<r.length;e++)if(r[e].id===t)return r[e]},rootScope.focusAccessibilityBtn=function(){GmCXt.timeout(function(){rootScope.isSidePanelOpen&&mg$$1(".mgPlayerJSPreview_accessibility-btn-wrapper button.mgPlayerJSPreview_custom-slider")&&mg$$1(".mgPlayerJSPreview_accessibility-btn-wrapper button.mgPlayerJSPreview_custom-slider").length&&mg$$1(".mgPlayerJSPreview_accessibility-btn-wrapper button.mgPlayerJSPreview_custom-slider")[0].focus()},500)},rootScope.routeToStepContainer=function(e,t){Gm.routeAction.set({action:e,data:t}),"stepview"!==get_store_value(Gm.CurrentPage)&&rootScope.setCurrentPage("stepview")},rootScope.getDefaultSurveyStepIcon=function(){return GmCXt.conf.staticContentPath+"survey_step.png"},rootScope.getAutomationSteps=function(e,t){var r=[];let i=0;if(e[i=t?parseInt(t.step_order):i])for(;GmCXt.isAutomationStep(e[i]);)r.push(e[i]),i++;return r},rootScope.getUserList=function(t){var r={limit:100,offset:0,owner_creator_filter:1};function i(e){e=e.data.users;storage.userList.set(e),t(e)}storage.userList.get().then(function(e){GmCXt.isEmpty(e)?api.getUserList(r,i):t(e)})},rootScope.checkKeywordLimit=function(e,t){if(24<e.length)return GmCXt.toastMsg(rootScope.labels.keywordLimit).show(),t.preventDefault(),0===e.length},rootScope.setCurrentPage=function(t){Gm.CurrentPage.update(e=>e===t?"":t),Gm.CurrentPage.set(t)},rootScope.setActivePage=function(t){Gm.activeView.update(e=>e===t?"":t),Gm.activeView.set(t)},rootScope.goToActiveView=function(){var e=get_store_value(Gm.activeView);"home"!==e&&"signin"!=e&&Gm.activeView.set("home")},rootScope.redirectToActiveview=function(){rootScope.checkCdnSignature().then(function(){GmCXt.isPlayer()?getCurrentAppObj().then(function(e){GmCXt.isEmpty(e)||rootScope.goToActiveView()}):rootScope.goToActiveView()})},GmCXt.updateNotificationContentScript=function(e,t){GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:update_notification_data_content_script",{toursClosedByUser:e,tourIdArray:t})},GmCXt.closeNotificationPopupSidePanel=function(e){mg$$1(".mgPlayerJSPreview_micro-player-resize").removeClass("mgPlayerJSPreview_micro-player-resize"),mg$$1(".mgPlayerJSPreview_overlay-tours-popup").length&&(GmCXt.removeNotif(),GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:show_beacon_smarttip",{}),e?GmCXt.openSidePanelNotificaton():(GmCXt.openSidePanelNotificaton(),GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:close_app_panel",{})))},GmCXt.openSidePanelNotificaton=function(){GmCXt.reduceSidePanel(),mg$$1(".ege-panel").css({width:"100%",transition:"width 0s",right:"0px"})},GmCXt.showNotificationHtml=function(e,t){GmCXt.increaseSidePanel(),mg$$1(".mgPlayerJSPreview_micro-player-container").addClass("mgPlayerJSPreview_micro-player-resize"),(!GmCXt.getAppSetting("keep_player_panel_open")||e||t||GmCXt.FT.creatorApp)&&mg$$1(".ege-panel").css({width:"500px",right:"-9550px"})},GmCXt.getOverlayToursHtml=function(e,t,r){var i,a="",o="mgPlayerJSPreview_push-notification-guide-info-overlay mgPlayerJSPreview_single-guide-play-icon",n="";return r&&(o+=" mgPlayerJSPreview_forbidden",n="<div class='mgPlayerJSPreview_push-preview-tooltip'>"+rootScope.labels.notifGuidePlayWarning+"</div>"),e&&(200<(r=e.title||e.tour_title).length&&(r=r.substr(0,200)+" ..."),e.thumbnail_url&&(0<=e.thumbnail_url.indexOf("default_icon")?GmCXt.getDefaultGuideIcon():e.thumbnail_url.indexOf("default")<0&&(e.thumbnail_url,GmCXt.getCdnSign())),"Default"===(e=e.tour_settings.defaultPlayAction)&&(e=GmCXt.getAppSetting("defaultPlayAction")),i=rootScope.labels.guideMe,"doitforme"===e?i=rootScope.labels.doItForMe:"slideshow"===e?i=rootScope.labels.showMe:"vLab"===e&&(i=rootScope.labels.vLab),GmCXt.isWB()?(a="",a=(a+='<div class="mgPlayerJSPreview_overlay-guide-box">')+'<div class="mgPlayerJSPreview_overlay-guide-title">'+GmCXt.escapeHtml(r)+'</div><div class="mgPlayerJSPreview_overlay-single-guide-play-icon"><div id="mgPlayerJSPreview_single-guide-play-icon-svg" tourIndex="'+t+'" class="mgPlayerJSPreview_single-guide-play-icon"></div></div></div>'):(a="",a+="<div class='mgPlayerJSPreview_push-notification-guide-info-wrapper'><button class='"+o+" mgPlayerJSPreview_lbl-btn' tourIndex='"+t+"'>"+n+"<div class='mgPlayerJSPreview_push-play-icon mgPlayerJSPreview_position-center mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-center mgPlayerJSPreview_font-size-16'>"+i+"<div id='mgPlayerJSPreview_push-not-play-icon-svg' class='mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_margin-lr-10'> </div> </div></button><div class='mgPlayerJSPreview_push-notification-guide-title' aria-label='"+GmCXt.escapeHtml(r)+"' tabindex='0'>"+GmCXt.escapeHtml(r)+"</div></div>")),a},GmCXt.loadGuideNotifications=function(n,l,e,D,F,s){var c,p,t,a,o;function r(e){GmCXt.log(10,"VALIDATING GUIDE RULES");for(var t=0,r=e.length;t<r;t++){var i=e[t],a=i.tour_settings,o=a&&a.rules&&a.rules.length?a.rules:[],n=a.ruleDelayTime||0,s=GmCXt.t.ruleTimeOut25ms;GmCXt.checkTourCreatedBefore(a,2021013001)&&(s=GmCXt.t.ruleTimeOut10s),i.ruleValidated?((e,t)=>{GmCXt.timeout(function(){m({tour:e,valid:!0})},t)})(i,n):(a={tour:i,rules:o,timeoutVal:s,timeout:s,cb:m,isTour:!0,initiator:"notif"},GmCXt.log(37,"QUEUED",a),((e,t)=>{GmCXt.timeout(function(){GmCXt.ruleEngine.queue(e)},t)})(a,n))}}function O(e){GmCXt.isEmpty(e)||r([e])}function d(e){mg$$1(e).css({display:"none"})}function u(e){mg$$1(e).css({display:"block"})}function g(e,t){for(var r=0,i=0;i<e.steps.length;i++)if(e.steps[i].step_id===t.step_id){r=i;break}return r}function i(t,e,r,i){"tutorial"===e.tour_settings.tutorial_tour_type&&GmCXt.storage().set({tutorial_steps:[]});var a,o=0;0===e.steps.length?(a={tour_id:e.tour_id,category_id:e.category_id,isPublic:e.isPublic},rootScope.getSteps(a).then(function(e){GmCXt.log(39,"visible OnBoarding guide details ",e.steps),n[0].steps=e.steps,r&&(o=g(e,r)),v(t,o,i)})):(GmCXt.isLastStepPlayedOnCreateTutGuide=!1,GmCXt.pdfPlayedOnUploadTut=!1,GmCXt.fullPdfPlayedOnUploadTutGuide=!1,GmCXt.pdfPlayedOnUploadTutNewTab=!1,r&&(o=g(e,r)),v(t,o,i))}function m(e){e.valid&&(delete(e=e.tour).ruleValidated,c.push(e),GmCXt.alreadyLoadedNotif.push(e),h(),GmCXt.trackerV1.trackPushNotification(e,"display"))}function h(){var e=0;GmCXt.log(10,"SHOWING notifications",c);var t,r=c[e],r=GmCXt.getOverlayToursHtml(r,e,l),i=!1;1===c.length&&(t=c[0].tour_settings,o||(i=t.isAutolaunch),GmCXt.log(10,"IS AUTO LAUNCH? "+i)),a||(localStorage.setItem(GmCXt.storagePrefix+"autoLaunchTour",0),i?(GmCXt.log(10,"AUTO LAUNCH guide"),localStorage.setItem(GmCXt.storagePrefix+"autoLaunchTour",c[0].tour_id),a=!0,w(null,0)):(_(r,e,0),o&&GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:track_notification_for_automation",{tours:c,isVisible:!0}))),1===c.length&&(d(".mgPlayerJSPreview_btn-next"),d(".mgPlayerJSPreview_btn-prev")),1<c.length&&(u(".mgPlayerJSPreview_btn-next"),u(".mgPlayerJSPreview_btn-prev"),b(".mgPlayerJSPreview_btn-prev"))}function _(t,r,i){var e,a;GmCXt.parseJSON(c[r].tour_settings).videoNotification&&c[r].video_url||c[r].videoNotification&&l?(e=(a=c[r].video_url)+GmCXt.getCdnSign(),a=GmCXt.getUrlWithLang(a),GmCXt.checkAssetUrl(a,e,function(e){f(t,r,i,e)})):f(t,r,i),GmCXt.timeout(function(){mg$$1("#mgPlayerJSPreview_btn-single-notif-dont-show-again").focus()},500)}function f(e,t,r,i){GmCXt.showNotificationHtml(s);var a,e=((e,t,r)=>{var i=GmCXt.parseJSON(c[t].tour_settings);return GmCXt.isWB()?((e,t)=>{var r=GmCXt.parseJSON(c[0].tour_settings);return r=GmCXt.isWB()&&r.videoNotification&&c[0].video_url?(e=>{e=e||"";return"<div class='mgPlayerJSPreview_overlay-container'></div><div class='mgPlayerJSPreview_overlay-tours-popup mgPlayerJSPreview_overlay-single-tour-popup'><div class='mgPlayerJSPreview_close-button mgPlayerJSPreview_icons-hover-effect mgPlayerJSPreview_inline-block-vm'><button id='mgPlayerJSPreview_push-not-overlay-close' class='mgPlayerJSPreview_lbl-btn' aria-label='push notification overlay close'></button><div class='mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-left'><button class='mgPlayerJSPreview_tooltip-title mgPlayerJSPreview_lbl-btn'>"+rootScope.labels.close+"</button></div></div><div class='mgPlayerJSPreview_overlay-single-guide-content-wrapper'><div class='mgPlayerJSPreview_overlay-thumbnails-wrapper mgPlayerJSPreview_wb-overlay-single-thumbnail-wrapper'><button class='mgPlayerJSPreview_wb-never-show-again mgPlayerJSPreview_never-show-again-button mgPlayerJSPreview_wb-theme-text-color mgPlayerJSPreview_lbl-btn' aria-label='"+rootScope.labels.dontShowAgain+"'>"+rootScope.labels.dontShowAgain+"</button></div></div><div class='mgPlayerJSPreview_overlay-guide-content-wrapper'><div class='mgPlayerJSPreview_overlay-guide-box'><div class='mgPlayerJSPreview_overlay-guide-title'>"+GmCXt.escapeHtml(c[0].tour_title)+"</div></div><div class='mgPlayerJSPreview_guide-video-wrapper mgPlayerJSPreview_no-padding'><video width='450' controls controlsList='nodownload' disablePictureInPicture autoplay ><source src='"+e+"' type='video/mp4' /></video></div><div class='mgPlayerJSPreview_wb-footer-wrapper mgPlayerJSPreview_inline-block-vm'><div class='mgPlayerJSPreview_wb-overlay-container-logo mgPlayerJSPreview_inline-block-vm'><img class='mgPlayerJSPreview_custom-image' alt='brand logo' src='"+GmCXt.brandLogo()+"' /></div><div class='mgPlayerJSPreview_clear'></div></div></div></div></div>"})(t):(e=>"<div class='mgPlayerJSPreview_overlay-container'></div><div class='mgPlayerJSPreview_overlay-tours-popup mgPlayerJSPreview_overlay-single-tour-popup'><div class='mgPlayerJSPreview_close-button mgPlayerJSPreview_icons-hover-effect mgPlayerJSPreview_inline-block-vm'><button id='mgPlayerJSPreview_push-not-overlay-close' class='mgPlayerJSPreview_lbl-btn' aria-label='push notification overlay close'></button><div class='mgPlayerJSPreview_title-tooltip-wrapper mgPlayerJSPreview_position-bottom-left'><div class='mgPlayerJSPreview_tooltip-title'>"+rootScope.labels.close+"</div></div></div><div class='mgPlayerJSPreview_overlay-single-guide-content-wrapper'><div class='mgPlayerJSPreview_overlay-thumbnails-wrapper mgPlayerJSPreview_overlay-single-thumbnail-wrapper'><div class='mgPlayerJSPreview_overlay-container-logo'>"+GmCXt.getPopupLogo()+"</div></div><div class='mgPlayerJSPreview_overlay-guide-content-wrapper'>"+e+"</div><div class='mgPlayerJSPreview_popup-button-wrapper'><button class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_never-show-again-button' aria-label='push notification never show again'>"+rootScope.labels.dontShowAgain+"</button></div></div></div>")(e)})(e,r):i.videoNotification&&c[t].video_url||c[t].videoNotification&&l?((e,t)=>{var r="",i="",a="",o="";return l&&(r=" mgPlayerJSPreview_forbidden",i="<button id='mgPlayerJSPreview_push-not-overlay-close' class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_close-preview-btn' aria-label='push notification overlay close'></button>",a=GmCXt.getDefaultGuideIcon()),t&&(o=t),t="<div class='mgPlayerJSPreview_overlay-container'></div><div class='mgPlayerJSPreview_overlay-tours-popup mgPlayerJSPreview_push-notification-container mgPlayerJSPreview_push-notification-video-container'>"+i+"<button id='mgPlayerJSPreview_btn-single-vid-notif-prev' class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_btn-prev' aria-label='push notification previous button'></button><button id='mgPlayerJSPreview_btn-single-vid-notif-next' class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_btn-next' aria-label='push notification next button'></button><div class='mgPlayerJSPreview_push-notification-header'><h3 class='mgPlayerJSPreview_push-notification-title mgPlayerJSPreview_no-margin mgPlayerJSPreview_font-weight-normal' tabindex='0'>"+rootScope.labels.notificationHeader+"</h3><div class='mgPlayerJSPreview_push-notification-brand-logo mgPlayerJSPreview_push-notification-guide-info-overlay' ' tourIndex='"+e+"'>"+GmCXt.getPopupLogo()+"</div></div><div class='mgPlayerJSPreview_push-notification-content-wrapper mgPlayerJSPreview_position-relative mgPlayerJSPreview_video-content-wrapper mgPlayerJSPreview_position-center'><div class='mgPlayerJSPreview_push-notification-guide-info-wrapper mgPlayerJSPreview_video-info-wrapper'><video controls autoplay controlsList='nodownload' disablePictureInPicture poster="+a+"><source src='"+o+"' type='video/mp4'></video></div><div class='mgPlayerJSPreview_push-notification-video-title mgPlayerJSPreview_inline-block-vm'>"+GmCXt.escapeHtml(c[e].tour_title)+"</div></div><div class='mgPlayerJSPreview_push-notification-btn-wrapper'>",c[e].tour_settings.displayFrequency&&!l?t+="<button id='mgPlayerJSPreview_btn-close' class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_notification-common-btn mgPlayerJSPreview_btn-watch-close' aria-label='push notification close button' tourIndex='"+e+"'>"+rootScope.labels.close+"</button></div>":t+="<button id='mgPlayerJSPreview_btn-single-vid-notif-dont-show-again' class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_notification-common-btn mgPlayerJSPreview_btn-dont-show-again mgPlayerJSPreview_never-show-again-button"+r+"' aria-label='"+rootScope.labels.dontShowAgain+"'>"+rootScope.labels.dontShowAgain+"</button><button id='mgPlayerJSPreview_btn-single-vid-notif-watch-later' class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_notification-common-btn mgPlayerJSPreview_btn-watch-later"+r+"' aria-label='"+rootScope.labels.watchLater+"'>"+rootScope.labels.watchLater+"</button></div>",t+="</div>"})(t,r):((e,t)=>{var r="",i="";return l&&(r=" mgPlayerJSPreview_forbidden",i="<button id='mgPlayerJSPreview_push-not-overlay-close' class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_notification-common-btn mgPlayerJSPreview_close-preview-btn' aria-label='push notification overlay close'></button>"),i="<div class='mgPlayerJSPreview_overlay-container'></div><div class='mgPlayerJSPreview_overlay-tours-popup mgPlayerJSPreview_push-notification-container mgPlayerJSPreview_push-notification-multi-guides' role='dialog' aria-labelledby='"+rootScope.labels.notificationHeader+"'>"+i+"<button id='mgPlayerJSPreview_btn-single-notif-prev' class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_btn-prev' aria-label='push notification previous button' ></button><button id='mgPlayerJSPreview_btn-single-notif-next' class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_btn-next' aria-label='push notification next button'></button><div class='mgPlayerJSPreview_push-notification-header'><h3 class='mgPlayerJSPreview_push-notification-title mgPlayerJSPreview_no-margin mgPlayerJSPreview_font-weight-normal' aria-label='"+rootScope.labels.notificationHeader+"' tabindex='0'>"+rootScope.labels.notificationHeader+"</h3><div class='mgPlayerJSPreview_push-notification-brand-logo' tabindex='0'>"+GmCXt.getPopupLogo()+"</div></div><div class='mgPlayerJSPreview_push-notification-content-wrapper mgPlayerJSPreview_position-relative mgPlayerJSPreview_position-center'>"+e+"<div class='mgPlayerJSPreview_multi-push-carousels-wrapper'></div></div><div class='mgPlayerJSPreview_push-notification-btn-wrapper'>",c[t].tour_settings.displayFrequency&&!l?i+="<button id='mgPlayerJSPreview_btn-single-close' class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_notification-common-btn mgPlayerJSPreview_btn-watch-close' tourIndex='"+t+"' aria-label='push notification close button'>"+rootScope.labels.close+"</button></div>":i+="<button id='mgPlayerJSPreview_btn-single-notif-dont-show-again' class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_notification-common-btn mgPlayerJSPreview_btn-dont-show-again mgPlayerJSPreview_never-show-again-button"+r+"' aria-label='"+rootScope.labels.dontShowAgain+"'>"+rootScope.labels.dontShowAgain+"</button><button id='mgPlayerJSPreview_btn-single-notif-watch-later' class='mgPlayerJSPreview_lbl-btn mgPlayerJSPreview_notification-common-btn mgPlayerJSPreview_btn-watch-later"+r+"' aria-label='"+rootScope.labels.watchLater+"'>"+rootScope.labels.watchLater+"</button></div>",i+="</div>"})(e,t)})(e,t,i);GmCXt.stopNotification(l)&&!o||(GmCXt.removeNotif(),mg$$1("body").append(e),(a=GmCXt.getAppSetting("notificationTheme"))&&(l&&GmCXt.timeout(function(){mg$$1(".mgPlayerJSPreview_push-notification-container .mgPlayerJSPreview_close-preview-btn svg polygon").each(function(){a.body.fill&&this.style.setProperty("fill",a.body.fill,"important")})},100),mg$$1(".mgPlayerJSPreview_push-notification-container").each(function(){a.width&&this.style.setProperty("width",a.width+"px","important"),a.height&&this.style.setProperty("height",a.height+"px","important")}),mg$$1(".mgPlayerJSPreview_push-notification-container .mgPlayerJSPreview_push-notification-header").each(function(){a.header.background&&this.style.setProperty("background",a.header.background,"important")}),mg$$1(".mgPlayerJSPreview_push-notification-container .mgPlayerJSPreview_push-notification-header .mgPlayerJSPreview_push-notification-title").each(function(){a.header.color&&this.style.setProperty("color",a.header.color,"important"),a.header.font&&this.style.setProperty("font-family",a.header.font,"important")}),mg$$1(".mgPlayerJSPreview_push-notification-container .mgPlayerJSPreview_push-notification-content-wrapper").each(function(){a.body.padding_top&&this.style.setProperty("padding-top",a.body.padding_top+"px","important"),a.body.padding_right&&this.style.setProperty("padding-right",a.body.padding_right+"px","important"),a.body.padding_bottom&&this.style.setProperty("padding-bottom",a.body.padding_bottom+"px","important"),a.body.padding_left&&this.style.setProperty("padding-left",a.body.padding_left+"px","important"),a.body.background_color&&this.style.setProperty("background",a.body.background_color,"important")}),mg$$1(".mgPlayerJSPreview_push-notification-container .mgPlayerJSPreview_push-notification-content-wrapper .mgPlayerJSPreview_push-notification-guide-info-wrapper .mgPlayerJSPreview_push-notification-guide-title").each(function(){a.body.title_color&&this.style.setProperty("color",a.body.title_color,"important"),a.body.title_font_family&&this.style.setProperty("font-family",a.body.title_font_family,"important"),a.body.title_font_size&&this.style.setProperty("font-size",a.body.title_font_size,"important")}),mg$$1(".mgPlayerJSPreview_push-notification-container .mgPlayerJSPreview_push-notification-content-wrapper .mgPlayerJSPreview_push-notification-video-title").each(function(){a.body.title_color&&this.style.setProperty("color",a.body.title_color,"important"),a.body.title_font_family&&this.style.setProperty("font-family",a.body.title_font_family,"important"),a.body.title_font_size&&this.style.setProperty("font-size",a.body.title_font_size,"important")}),mg$$1(".mgPlayerJSPreview_push-notification-container .mgPlayerJSPreview_push-notification-content-wrapper .mgPlayerJSPreview_push-notification-guide-info-wrapper .mgPlayerJSPreview_single-guide-play-icon .mgPlayerJSPreview_push-play-icon").each(function(){a.body.fill&&this.style.setProperty("background",a.body.fill,"important")}),mg$$1(".mgPlayerJSPreview_push-notification-container .mgPlayerJSPreview_push-notification-btn-wrapper .mgPlayerJSPreview_btn-dont-show-again").each(function(){a.footer.primaryBtnBackground&&this.style.setProperty("background",a.footer.primaryBtnBackground,"important"),a.footer.primaryBtnBorderColor&&this.style.setProperty("border","2px outset "+a.footer.primaryBtnBorderColor,"important"),a.footer.primaryBtnFont&&this.style.setProperty("font-family",a.footer.primaryBtnFont,"important"),a.footer.primaryBtnTextColor&&this.style.setProperty("color",a.footer.primaryBtnTextColor,"important"),a.footer.primaryBtnTextSize&&this.style.setProperty("font-size",a.footer.primaryBtnTextSize,"important")}),mg$$1(".mgPlayerJSPreview_push-notification-container .mgPlayerJSPreview_push-notification-btn-wrapper .mgPlayerJSPreview_btn-watch-later").each(function(){a.footer.secondaryBtnBackground&&this.style.setProperty("background",a.footer.secondaryBtnBackground,"important"),a.footer.secondaryBtnBorderColor&&this.style.setProperty("border","2px outset "+a.footer.secondaryBtnBorderColor,"important"),a.footer.secondaryBtnFont&&this.style.setProperty("font-family",a.footer.secondaryBtnFont,"important"),a.footer.secondaryBtnTextColor&&this.style.setProperty("color",a.footer.secondaryBtnTextColor,"important"),a.footer.secondaryBtnTextSize&&this.style.setProperty("font-size",a.footer.secondaryBtnTextSize,"important")}),mg$$1(".mgPlayerJSPreview_push-notification-container .mgPlayerJSPreview_push-notification-btn-wrapper .mgPlayerJSPreview_btn-watch-close").each(function(){a.footer.primaryBtnBackground&&this.style.setProperty("background",a.footer.primaryBtnBackground,"important"),a.footer.primaryBtnBorderColor&&this.style.setProperty("border","2px outset "+a.footer.primaryBtnBorderColor,"important"),a.footer.primaryBtnFont&&this.style.setProperty("font-family",a.footer.primaryBtnFont,"important"),a.footer.primaryBtnTextColor&&this.style.setProperty("color",a.footer.primaryBtnTextColor,"important"),a.footer.primaryBtnTextSize&&this.style.setProperty("font-size",a.footer.primaryBtnTextSize,"important")}),GmCXt.timeout(function(){mg$$1(".mgPlayerJSPreview_push-notification-container .mgPlayerJSPreview_btn-next path.st0").each(function(){a.body.fill&&this.style.setProperty("fill",a.body.fill,"important")}),mg$$1(".mgPlayerJSPreview_push-notification-container .mgPlayerJSPreview_btn-prev path.st0").each(function(){a.body.fill&&this.style.setProperty("fill",a.body.fill,"important")})},100)),S(),mg$$1("#mgPlayerJSPreview_single-guide-play-icon-svg").html(GmCXt.svgs.notification_guide_play),mg$$1("#mgPlayerJSPreview_push-not-play-icon-svg").html(GmCXt.svgs.push_not_single_play),mg$$1(".mgPlayerJSPreview_btn-prev").html(GmCXt.svgs.push_prev),mg$$1(".mgPlayerJSPreview_btn-next").html(GmCXt.svgs.push_prev),mg$$1("#mgPlayerJSPreview_push-not-overlay-close").html(GmCXt.svgs.overlay_tour_popup_close),y(t,r),GmCXt.timeout(function(){mg$$1(".mgPlayerJSPreview_btn-next").focus(),GmCXt.accessibility&&(mg$$1(".mgPlayerJSPreview_push-notification-btn-wrapper").addClass("mgPlayerJSPreview_accessibility-theme"),mg$$1(".mgPlayerJSPreview_single-guide-play-icon").addClass("mgPlayerJSPreview_accessibility-theme"),mg$$1(".mgPlayerJSPreview_push-play-icon").addClass("mgPlayerJSPreview_ass-default-btn"))},500))}function v(e,t,r){var i,a=c[e],o=c[e].steps[t].step_settings;GmCXt.stopNotification(l)||("upload"===a.tour_settings.tutorial_tour_type?("new_tab"===o.tutorialUploadMode||"pdf"!==GmCXt.getURLMediaType(o.tutorialUploadUrl)?(-1!==(i=o.tutorialUploadUrl).indexOf(GmCXt.conf.cdnStorage)&&(i=o.tutorialUploadUrl+GmCXt.getCdnSign()),i=i,window.open(i,"_blank"),GmCXt.showSurveyForTutorial(a),GmCXt.closeNotificationPopupSidePanel(),I(r),i="push_notification",r&&r.taskId&&(GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:close_app_panel",{}),i="task_list"),GmCXt.pdfPlayedOnUploadTutNewTab=!0,GmCXt.trackerV1.trackTutGuide(a,"upload_tutorial_guide_new_tab",i,r.taskId)):(GmCXt.pdfPlayedOnUploadTut=!0,GmCXt.openPdf(o.tutorialUploadUrl+GmCXt.getCdnSign(),a,r),mg$$1(".mgPlayerJSPreview_media-player-panel").attr("style","width: "+o.tutorialWidth+"% !important; height: "+o.tutorialHeight+"% !important;"),r&&r.taskId&&mg$$1(".mgPlayerJSPreview_media-player-panel").addClass("mgPlayerJSPreview_play-from-task-player")),X(r)):(GmCXt.showNotificationHtml(s,!0),i=((e,t)=>{var r="",i=c[e],a=i.steps[t],o=((e,t)=>{var r="";return 0<e.step_video&&e&&e.step_video_url?r="<div class='mgPlayerJSPreview_push-notification-guide-info-wrapper mgPlayerJSPreview_video-info-wrapper' style='width: -webkit-fill-available;'><video controls autoplay controlsList='nodownload' disablePictureInPicture poster="+t+"><source src='"+e.step_video_url+GmCXt.getCdnSign()+"' type='video/mp4'></video></div>":e.image_url.indexOf("default")<0&&(r="<div class='mgPlayerJSPreview_push-notification-guide-info-wrapper mgPlayerJSPreview_img-info-wrapper' style='width:-webkit-fill-available;'><img class='mgPlayerJSPreview_push-notif-tg-image' style='width:90%;height:90%' alt='"+e.step_title+"' src='"+e.image_url+GmCXt.getCdnSign()+"' /></div>"),r})(a,""),n=GmCXt.replaceVariableWithValue(GmCXt.updateOrgAndAddSignature(a.step_description));return o&&(r="mgPlayerJSPreview_min-content-wrapper"),GmCXt.isEmpty(a.step_title)||(n=a.step_title+a.step_description),45<(a=i.tour_title).length&&(a=a.substr(0,45)+" ..."),"<div class='mgPlayerJSPreview_overlay-container'></div><div class='mgPlayerJSPreview_overlay-tours-popup mgPlayerJSPreview_push-notification-container mgPlayerJSPreview_push-notification-video-container mgPlayerJSPreview_push-notification-tg-container'><div class='mgPlayerJSPreview_push-notification-header mgPlayerJSPreview_tutotial-notif-header'><div class='mgPlayerJSPreview_push-notification-title mgPlayerJSPreview_push-notification-guide-info-overlay' ' tourIndex='"+e+"' ' stepIndex='"+t+"'><span id='mgPlayerJSPreview_push-notification-tutorial' ></span>"+GmCXt.escapeHtml(a)+"</div><button class='mgPlayerJSPreview_tg-close-btn mgPlayerJSPreview_lbl-btn' aria-label='tutorial guide close button'></button></div><div class='mgPlayerJSPreview_push-notification-content-wrapper mgPlayerJSPreview_position-relative mgPlayerJSPreview_video-content-wrapper mgPlayerJSPreview_height-auto mgPlayerJSPreview_push-notif-tg-bg'>"+o+"<div class='mgPlayerJSPreview_push-notif-tg-content-wrapper mgPlayerJSPreview_inline-block-vm "+r+"'>"+n+"</div></div><div class='mgPlayerJSPreview_push-notif-tg-btn-wrapper mgPlayerJSPreview_display-flex mgPlayerJSPreview_align-items-center mgPlayerJSPreview_justify-content-space-around mgPlayerJSPreview_push-notif-tg-bg'><div class='mgPlayerJSPreview_step-count-wrapper'>"+parseInt(t+1)+"/"+i.steps.length+"</div><div class='mgPlayerJSPreview_common-btn-wrapper mgPlayerJSPreview_display-flex'><button class='mgPlayerJSPreview_btn-prev-step' aria-label='tutorial guide previous button'>"+rootScope.labels.btnPrevious+"</button><button class='mgPlayerJSPreview_btn-next-step' aria-label='tutorial guide next button'>"+rootScope.labels.defaultNext+"</button></div></div></div>"})(e,t),GmCXt.removeNotif(),mg$$1("body").append(i),(o=c[e].steps[t].step_settings).tutorialHeight&&o.tutorialWidth&&mg$$1(".mgPlayerJSPreview_overlay-tours-popup").attr("style","width: "+o.tutorialWidth+"% !important; height: "+o.tutorialHeight+"% !important;"),mg$$1(".mgPlayerJSPreview_push-notif-tg-bg").css("background",GmCXt.getAppSetting("tutorialBgColor")),(a=GmCXt.getAppSetting("tutorial_guide"))&&(mg$$1(".mgPlayerJSPreview_overlay-tours-popup.mgPlayerJSPreview_push-notification-tg-container").css({background:GmCXt.getAppSetting("tutorialBgColor"),"border-color":a.outerBox.border_color,"border-radius":a.outerBox.border_radius+"px ","border-width":a.outerBox.border_width+"px "}),a.outerBox.shadow.inset?mg$$1(".mgPlayerJSPreview_push-notif-tg-bg").css({"box-shadow":a.outerBox.shadow.color+" "+a.outerBox.shadow.horizontal+"px "+a.outerBox.shadow.vertical+"px "+a.outerBox.shadow.blur+"px "+a.outerBox.shadow.spreadRadius+"px"+(a.outerBox.shadow.inset?" inset":"")}):mg$$1(".mgPlayerJSPreview_overlay-tours-popup.mgPlayerJSPreview_push-notification-tg-container").css({"box-shadow":a.outerBox.shadow.color+" "+a.outerBox.shadow.horizontal+"px "+a.outerBox.shadow.vertical+"px "+a.outerBox.shadow.blur+"px "+a.outerBox.shadow.spreadRadius+"px"}),mg$$1(".mgPlayerJSPreview_push-notification-header").attr("style","background:"+a.titleBgColor+" !important;border-top-right-radius:"+a.outerBox.border_radius+"px !important;border-top-left-radius:"+a.outerBox.border_radius+"px !important;padding:5px 20px;"),mg$$1(".mgPlayerJSPreview_push-notif-tg-btn-wrapper").attr("style","border-bottom-right-radius:"+a.outerBox.border_radius+"px !important;border-bottom-left-radius:"+a.outerBox.border_radius+"px !important;padding:5px 0px;"),mg$$1(".mgPlayerJSPreview_btn-next-step").attr("style","background:"+a.nextBtn.bgColor+" !important;border-color:"+a.nextBtn.border_color+" !important;border-radius:"+a.nextBtn.border_radius+"px !important;border-width:"+a.nextBtn.border_width+"px !important;color:"+a.nextBtn.color+" !important;font-size:"+a.nextBtn.font_size+" !important;padding-bottom:"+a.nextBtn.padding.bottom+"px !important;padding-left:"+a.nextBtn.padding.left+"px !important;padding-right:"+a.nextBtn.padding.right+"px !important;padding-top:"+a.nextBtn.padding.top+"px !important;"),mg$$1(".mgPlayerJSPreview_btn-prev-step").attr("style","background:"+a.prevBtn.bgColor+" !important;border-color:"+a.prevBtn.border_color+" !important;border-radius:"+a.prevBtn.border_radius+"px !important;border-width:"+a.prevBtn.border_width+"px !important;color:"+a.prevBtn.color+" !important;font-size:"+a.prevBtn.font_size+" !important;padding-bottom:"+a.prevBtn.padding.bottom+"px !important;padding-left:"+a.prevBtn.padding.left+"px !important;padding-right:"+a.prevBtn.padding.right+"px !important;padding-top:"+a.prevBtn.padding.top+"px !important;")),mg$$1(".mgPlayerJSPreview_tg-close-btn").html(GmCXt.svgs.overlay_tour_popup_close),mg$$1(".mgPlayerJSPreview_push-notification-tutorial").html(GmCXt.svgs.tutorial),S(r),y(e,t),GmCXt.timeout(function(){mg$$1(".mgPlayerJSPreview_tg-close-btn").focus()},500)))}function y(e,t){var e=c[e];GmCXt.isOnboarding(e)&&(1===(e=e.steps.length)&&(d(".mgPlayerJSPreview_btn-prev-step"),u(".mgPlayerJSPreview_btn-next-step")),1<e&&(u(".mgPlayerJSPreview_btn-next-step"),u(".mgPlayerJSPreview_btn-prev-step"),mg$$1(".mgPlayerJSPreview_btn-prev-step").css({"pointer-events":"none",opacity:".5"})),0<t&&mg$$1(".mgPlayerJSPreview_btn-prev-step").css({"pointer-events":"",opacity:"1"}),e===t+1)&&(GmCXt.isLastStepPlayedOnCreateTutGuide=!0,mg$$1(".mgPlayerJSPreview_btn-next-step").text(rootScope.labels.close))}function P(){mg$$1(".mgPlayerJSPreview_overlay-tours-popup").hide(),mg$$1(".mgPlayerJSPreview_overlay-container").hide()}function S(s){mg$$1(".mgPlayerJSPreview_never-show-again-button").on("click",A),mg$$1(".mgPlayerJSPreview_overlay-tour-box").on("click",w),mg$$1(".mgPlayerJSPreview_overlay-tour-box-small-thumbnails").on("click",w),mg$$1(".mgPlayerJSPreview_single-guide-play-icon").on("click",w),mg$$1(".mgPlayerJSPreview_overlay-tours-popup .mgPlayerJSPreview_close-button").on("click",L),mg$$1(".mgPlayerJSPreview_btn-watch-later").on("click",L),mg$$1(".mgPlayerJSPreview_btn-prev").on("click",N),mg$$1(".mgPlayerJSPreview_btn-next").on("click",R),mg$$1(".mgPlayerJSPreview_btn-prev-step").on("click",function(e){var t,r,i;t=s,r=$(),i=E()-1,v(r,i,t)}),mg$$1(".mgPlayerJSPreview_btn-next-step").on("click",function(e){var t,r,i=s,a=$(),o=E()+1,n=c[a];n&&(n.steps.length===o?(X(i),GmCXt.closeNotificationPopupSidePanel(),GmCXt.isPlayer()&&-1!==n.tour_type.indexOf("onboarding_tour")&&n.tour_settings.sentiment&&n.tour_settings.sentiment.sentimentCode&&(t={tour:n,guideNotCompleted:!1},GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:close_app_panel",{}),GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:getSurveyScreen",t)),r="push_notification",i&&i.taskId&&(r="task_list"),T(n.steps[n.steps.length-1]).then(function(){GmCXt.trackerV1.trackTutGuide(n,"create_tutorial_guide",r,i.taskId)})):(v(a,o,i),T(n.steps[o-1]).then(function(){})))}),mg$$1(".mgPlayerJSPreview_tg-close-btn").on("click",function(e){M(s)});var e=mg$$1(".mgPlayerJSPreview_push-notif-tg-content-wrapper").html();e&&-1!==e.indexOf("<a ")&&mg$$1(".mgPlayerJSPreview_push-notif-tg-content-wrapper a").each(function(){mg$$1(".mgPlayerJSPreview_push-notif-tg-content-wrapper a").on("click",function(e){e.currentTarget.target&&"_blank"!==e.currentTarget.target&&(e.preventDefault(),e.stopPropagation(),P(),GmCXt.isTutorialLink=!0,GmCXt.openPdf(e.currentTarget.href))})}),l&&mg$$1(".mgPlayerJSPreview_close-preview-btn").on("click",M),mg$$1(".mgPlayerJSPreview_btn-watch-close").on("click",H)}function w(e,t){var r;o?GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:stop_automation"):l||(0!==t&&(e.stopPropagation(),t=this.attributes.tourIndex.value),t<c.length&&((r=c[t]).tour_settings.displayFrequency&&J(r),GmCXt.isOnboarding(r)||GmCXt.trackerV1.trackPushNotification(r,"click"),e={tour_id:r.tour_id,category_id:r.category_id},rootScope.getSteps(e).then(function(e){P(),GmCXt.stopNotification(l)||(r.tour_settings.displayFrequency||G(r),GmCXt.isOnboarding(e)?(c[t].steps=e.steps,i(t,e)):GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:play_guide_from_notification",{tour:e,isAutolaunchTriggered:a}))})))}function b(e){mg$$1(e).css({"pointer-events":"none",opacity:".5"})}function C(e){mg$$1(e).css({"pointer-events":"",opacity:"1"})}function k(e,t){var r=c[e];_(GmCXt.getOverlayToursHtml(r,e,l),e,t)}function R(e){var t=$()+1;k(t,0);c.length===t+1&&(b(".mgPlayerJSPreview_btn-next"),mg$$1(".mgPlayerJSPreview_btn-prev").focus()),C(".mgPlayerJSPreview_btn-prev"),mg$$1(".mgPlayerJSPreview_btn-next").focus()}function N(e){var t=$()-1;k(t,0),0===t&&(b(".mgPlayerJSPreview_btn-prev"),1<c.length)&&C(".mgPlayerJSPreview_btn-next")}function T(r){return new Promise(function(t,e){GmCXt.storage().get(["tutorial_steps"]).then(function(e){r&&(e.tutorial_steps.push(r),GmCXt.storage().set({tutorial_steps:e.tutorial_steps})),t()})})}function x(e){c.splice(e,1),0===c.length?GmCXt.closeNotificationPopupSidePanel(!0):h()}function A(){var e;o?GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:stop_automation"):l||(e=$(),(c[e].tour_settings.displayFrequency?J:G)(c[e]),x(e))}function J(e){e&&(GmCXt.displayFrequencyGuides[e.tour_id]&&parseInt(e.version)===parseInt(GmCXt.displayFrequencyGuides[e.tour_id].version)?GmCXt.displayFrequencyGuides[e.tour_id].playedCount++:(GmCXt.displayFrequencyGuides[e.tour_id]={},GmCXt.displayFrequencyGuides[e.tour_id].version=parseInt(e.version),GmCXt.displayFrequencyGuides[e.tour_id].playedCount=1),GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:update_notification_data_content_script_display_frequency",{tours:GmCXt.displayFrequencyGuides}),(e=>{if(!GmCXt.isEmpty(GmCXt.displayFrequencyGuides)){var t=GmCXt.displayFrequencyGuides[parseInt(e.tour_id)];if(GmCXt.isDefined(t)&&parseInt(t.version)===parseInt(e.version)&&t.playedCount>=e.tour_settings.displayFrequencyTimes)return 1}})(e))&&G(e)}function G(e){e&&(GmCXt.doNotShowTours[e.tour_id]=parseInt(e.version),e={tours:GmCXt.doNotShowTours},GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:update_notification_data_content_script_donot_show",e))}function $(){return parseInt(mg$$1(".mgPlayerJSPreview_push-notification-guide-info-overlay").attr("tourIndex"))||0}function E(){return parseInt(mg$$1(".mgPlayerJSPreview_push-notification-guide-info-overlay").attr("stepIndex"))||0}function L(){var e,t,r;o?GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:stop_automation"):l||(e=$(),(t=c[e]).tour_settings.oneTimeNotification?A():(t.tour_settings.displayFrequency?J(t):(r=rootScope.labels.pushSnoozeMsg+" ",GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:update_notification_data_content_script_snooze_tours",{tour:t,msg:r})),x(e)))}function M(e){var t,r=$(),i=E()+1,a=c[r],o=(I(e),GmCXt.removeNotif(),GmCXt.openSidePanelNotificaton(),"push_notification"),r=(e&&e.taskId&&(o="task_list"),T(a.steps[i-1]).then(function(){GmCXt.trackerV1.trackTutGuide(a,"create_tutorial_guide",o,e.taskId)}),GmCXt.getOrgSettings());GmCXt.isPlayer()&&i<a.steps.length?r&&r.exitSentiment&&(t={tour:a,guideNotCompleted:!0},GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:close_app_panel",{}),GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:showSurveyScreen",t)):GmCXt.isPlayer()&&i===a.steps.length&&-1!==a.tour_type.indexOf("onboarding_tour")&&a.tour_settings.sentiment&&a.tour_settings.sentiment.sentimentCode&&(t={tour:a,guideNotCompleted:!1},GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:close_app_panel",{}),GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:getSurveyScreen",t))}function I(e){var t,r;e&&"0"===e.isComplete&&(t=$(),r=E()+1,c[t].steps.length===r)&&X(e)}function X(e){var t;e&&!e.isComplete&&(t=$(),t=c[t],t={taskListId:e.taskId,tourId:t.tour_id,complete_count:e.complete_count,total_count:e.total_count},rootScope.markTaskGuideComplete(t))}function H(e){e.stopPropagation();var e=this.attributes.tourIndex.value,t=c[e];t.tour_settings.displayFrequency&&J(t),x(e)}GmCXt.log(37,"LOAD NOTIFICATIONS",{tours:n}),GmCXt.user&&(F&&(GmCXt.alreadyLoadedNotif=[]),c=[],p={},a=!(t={}),o=!(GmCXt.filterDontShowSnoozeTour=[]),l?(c=n,GmCXt.isOnboarding(n[0])?i(0,n[0],D,e):h()):GmCXt.storage().get(["toursClosed","tourIdArray","testAuto"]).then(function(e){t=e.tourIdArray,p=GmCXt.parseJSON(e.toursClosed),e.testAuto&&(o=e.testAuto.automationInProgress),GmCXt.log(37,"STORAGE NOTIFICATIONS DATA",e),GmCXt.getDoNotShowTours(!1).then(function(e){GmCXt.doNotShowTours=e,!(e=n)||e.length<1||(n=n.filter(function(e){var t;return!GmCXt.doNotShowTours[e.tour_id]||(t=GmCXt.doNotShowTours[e.tour_id],parseInt(e.version)>t&&!e.tour_settings.oneTimeNotification)?e:void 0}),GmCXt.log(10,"DO NOT SHOW filter: "+e.length,e),e=n.filter(function(e){var t,r,i,a,o,n;return p[e.tour_id]?(r=1,i=p[e.tour_id].toString().split(":"),GmCXt.isDefined(i[1])?(t=parseInt(i[0]),r=parseInt(i[1])):t=parseInt(p[e.tour_id]),i=(new Date).getTime(),n=GmCXt.t.notifExp24,(a=GmCXt.getAppSetting("notificationsTime"))&&(".5"===a&&(a="0.5"),o=parseFloat(a),n=(o="number"!=typeof a&&a.includes("week")?GmCXt.convertWeeksToHours(o):o)*GmCXt.t.snoozeNotif),t+n-i<=0||parseInt(e.version)>r?(delete p[e.tour_id],e):void GmCXt.filterDontShowSnoozeTour.push(parseInt(e.tour_id))):e}),GmCXt.log(10,"SNOOZED TOURS ",e),e=(e=>(GmCXt.log(10,"ALREADY SHOWN TOURS ",GmCXt.alreadyLoadedNotif),e=0<GmCXt.alreadyLoadedNotif.length?e.filter(function(e){if(!(e=>{for(var t=!1,r=0;r<GmCXt.alreadyLoadedNotif.length;r++)if(parseInt(GmCXt.alreadyLoadedNotif[r].tour_id)===parseInt(e.tour_id)){t=!0;break}return t})(e))return e}):e))(e),GmCXt.log(10,"AFTER FILTERING ALREADY SHOWN TOURS ",e),o&&GmCXt.formatAndSendToParentWindowNoti("mgPlayerJSPreview_action:track_notification_for_automation",{tours:p,doNotShowTours:GmCXt.doNotShowTours,isVisible:!1}),GmCXt.updateNotificationContentScript(p,t),e=(e=>{for(var t=[],r=[],i=0;i<e.length;i++)(e[i].tour_settings.isAutolaunch?t:r).push(e[i]);return t.concat(r)})(e=GmCXt.inPlayer?GmCXt.sortToursByModifcationDate(e):e),GmCXt.log(10,"SORTING BY auto launch first",e),GmCXt.log(10,"SNOOZE filter: "+e.length,e),e.length&&(e=e,GmCXt.organization.admin_settings.guide_segmentation?(GmCXt.log(10,"VALIDATING GUIDE SEGMENTATION RULES"),GmCXt.checkGuidesBasedOnSegment(e,O,"notiSeg")):r(e)))}),GmCXt.displayFrequencyGuides=GmCXt.user.settings.display_frequency_guides||{}}))},GmCXt.formatAndSendToParentWindowNoti=function(e,t){var r={};r.action=e,r.data=t||{},GmCXt.sendToParentWindow(r)};let app,slideshow;function updateAccessibilityTheme(e){e?mg$$1(".ege-panel").addClass("mgPlayerJSPreview_accessibility-theme"):mg$$1(".ege-panel").removeClass("mgPlayerJSPreview_accessibility-theme")}function updatePlayerTheme(e){GmCXt.FT.isPlayer&&!e?mg$$1(".ege-panel").addClass("mgPlayerJSPreview_player-theme"):mg$$1(".ege-panel").removeClass("mgPlayerJSPreview_player-theme")}function updateMobileView(e){e?mg$$1(".mgPlayerJSPreview_panel-body").removeClass("mgPlayerJSPreview_mobile-view"):mg$$1(".mgPlayerJSPreview_panel-body").addClass("mgPlayerJSPreview_mobile-view")}function updateMiniPlayerTheme(e){e?mg$$1(".ege-panel").addClass("mgPlayerJSPreview_micro-player-container mgPlayerJSPreview_no-border mgPlayerJSPreview_no-border-all"):mg$$1(".ege-panel").removeClass("mgPlayerJSPreview_micro-player-container mgPlayerJSPreview_no-border mgPlayerJSPreview_no-border-all")}Gm.accessibility.subscribe(e=>{updateAccessibilityTheme(e),updatePlayerTheme(e)}),Gm.miniPlayer.subscribe(e=>{updateMiniPlayerTheme(e),updateMobileView(e)}),GmCXt.startMsgChannel("Guide:sidePanel"),readStorage().then(()=>{app=new App({target:document.getElementById("ege-panel")}),slideshow=new SlideShow({target:document.getElementById("mgPlayerJSPreview_slideshow-panel")}),Gm.slideshowInstance.set(slideshow)}).catch(e=>{console.error("Initialization error:",e)}),Gm.activeView.set("signin");var app$1=app;export{app$1 as default};