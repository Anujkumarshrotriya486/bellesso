var GmPXtTest;(GmPXtTest=void 0===GmPXtTest?{}:GmPXtTest).conf={},GmPXtTest.conf.version="2024.5.0",GmPXtTest.conf.env="Test",GmPXtTest.conf.creatorApp="mgExt",GmPXtTest.conf.playerApp="mgPlayer",GmPXtTest.conf.creatorJS="mgCreator",GmPXtTest.conf.appName="mgPlayer",GmPXtTest.conf.allowedDomains=[],GmPXtTest.conf.autologin=!1,GmPXtTest.conf.appTypeExt="Extension",GmPXtTest.conf.appTypeScript="JScript",GmPXtTest.conf.appTypeElectron="electron",GmPXtTest.conf.Premise="Premise",GmPXtTest.conf.runEnv="browser",GmPXtTest.conf.msgPrefix="mgPlayerExtChromeTest_",GmPXtTest.conf.showWidget=!1,GmPXtTest.conf.playerExtension=GmPXtTest.conf.playerApp+GmPXtTest.conf.appTypeExt,GmPXtTest.conf.playerJS=GmPXtTest.conf.playerApp+GmPXtTest.conf.appTypeScript,GmPXtTest.conf.websiteUrl="https://myguide.org",GmPXtTest.conf.privacyPolicyUrl="https://www.edcast.com/corp/privacy-policy/",GmPXtTest.conf.termsURL="https://www.edcast.com/corp/terms-of-service/",GmPXtTest.conf.feedbackDetails="mailto:support@csod.com?Subject=MyGuide Feedback",GmPXtTest.conf.adminEmail="<a href='mailto:admin@edcast.com' target='_top'>admin@edcast.com</a>",GmPXtTest.conf.hideCaptcha="";try{chrome.runtime.onMessage.addListener(function(){return!0}),GmPXtTest.conf.appType=GmPXtTest.conf.appTypeExt}catch(e){try{var uri=safari.extension.baseURI;null!==uri&&(GmPXtTest.conf.appType=GmPXtTest.conf.appTypeExt)}catch(t){GmPXtTest.conf.appType=GmPXtTest.conf.appTypeScript}}function SHA256(t){function X(t,e){var s=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(s>>16)<<16|65535&s}function g(t,e){return t>>>e|t<<32-e}for(var e=function(t,e){var s,n=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),r=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),a=new Array(64);t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var o,i=0;i<t.length;i+=16){for(var m=r[0],c=r[1],T=r[2],l=r[3],P=r[4],u=r[5],p=r[6],d=r[7],G=0;G<64;G++)a[G]=G<16?t[G+i]:X(X(X(g(o=a[G-2],17)^g(o,19)^o>>>10,a[G-7]),g(o=a[G-15],7)^g(o,18)^o>>>3),a[G-16]),o=X(X(X(X(d,g(P,6)^g(P,11)^g(P,25)),P&u^~P&p),n[G]),a[G]),s=X(g(m,2)^g(m,13)^g(m,22),m&c^m&T^c&T),d=p,p=u,u=P,P=X(l,o),l=T,T=c,c=m,m=X(o,s);r[0]=X(m,r[0]),r[1]=X(c,r[1]),r[2]=X(T,r[2]),r[3]=X(l,r[3]),r[4]=X(P,r[4]),r[5]=X(u,r[5]),r[6]=X(p,r[6]),r[7]=X(d,r[7])}return r}(function(t){for(var e=Array(),s=0;s<8*t.length;s+=8)e[s>>5]|=(255&t.charCodeAt(s/8))<<24-s%32;return e}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",s=0;s<t.length;s++){var n=t.charCodeAt(s);n<128?e+=String.fromCharCode(n):e=127<n&&n<2048?(e+=String.fromCharCode(n>>6|192))+String.fromCharCode(63&n|128):(e=(e+=String.fromCharCode(n>>12|224))+String.fromCharCode(n>>6&63|128))+String.fromCharCode(63&n|128)}return e}(t)),8*t.length),s="0123456789abcdef",n="",r=0;r<4*e.length;r++)n+=s.charAt(e[r>>2]>>8*(3-r%4)+4&15)+s.charAt(e[r>>2]>>8*(3-r%4)&15);return n}GmPXtTest.conf.allUrls=!0,GmPXtTest.conf.provider="Cdn",GmPXtTest.conf.storageUrl="",GmPXtTest.setOnPremise=function(){function e(t){t.apiSecrret&&(GmPXtTest.conf.apiSecrret=t.apiSecrret),t.apiUrl&&(GmPXtTest.conf.webServiceUrl=t.apiUrl),t.analyticsUrl&&(GmPXtTest.conf.analyticsPath=t.analyticsUrl),t.cdnUrl&&(GmPXtTest.conf.staticContentPath=t.cdnUrl),t.webPortal&&(GmPXtTest.conf.webPortalUrl=t.webPortal),t.analyticsPortal&&(GmPXtTest.conf.analyticsPortalUrl=t.analyticsPortal),t.assetPath&&(GmPXtTest.conf.staticContentPath=t.assetPath)}GmPXtTest.conf.appName===GmPXtTest.conf.creatorApp&&(GmPXtTest.onPremise?e(GmPXtTest.onPremise):chrome.storage.sync.get({onPrem_appKey:"",onPrem_apiUrl:"",onPrem_insightsUrl:"",onPrem_cdnUrl:"",onPrem_adminPortal:"",onPrem_insightsPortal:"",onPrem_assetPath:""},function(t){e({appKey:t.onPrem_appKey,apiUrl:t.onPrem_apiUrl,analyticsUrl:t.onPrem_insightsUrl,cdnUrl:t.onPrem_cdnUrl,webPortal:t.onPrem_adminPortal,analyticsPortal:t.onPrem_insightsPortal,assetPath:t.onPrem_assetPath})}))},GmPXtTest.setConfig=function(){GmPXtTest.conf.apiSecrret="TESTAUTHKEY",GmPXtTest.conf.orgSecrret="",GmPXtTest.conf.clientJsBaseUrl="//stagecdn.guideme.io/guideme-player/ent/",GmPXtTest.conf.chromeExtensionUrl="",GmPXtTest.conf.webServiceUrl="https://qa-api.guideme.io/v3/",GmPXtTest.conf.staticContentPath="https://stagecdn.guideme.io/guideme-assests/",GmPXtTest.conf.webPortalUrl="https://qa-admin.myguide.org/",GmPXtTest.conf.analyticsPath="https://analytics-qa.guideme.io/",GmPXtTest.conf.analyticsPortalUrl="https://analytics-qa.myguide.org/",GmPXtTest.conf.cdnStorage="https://stagecdn.guideme.io/",GmPXtTest.conf.jsonStorageUrl="https://stage-mycdn.guideme.io/",GmPXtTest.conf.ssoRedirectionUrl="https://qa-sso.guideme.io/saml2/sp/sso/",GmPXtTest.conf.ssoApiUrl="https://qa-sso.guideme.io/saml2/sp/session/",GmPXtTest.conf.ssoConfigUrl="https://stagecdn.guideme.io/guideme-auth-qa/objects/",GmPXtTest.conf.paymentEndPoint="",GmPXtTest.setOnPremise()},GmPXtTest.setConfig(),GmPXtTest.conf.appType===GmPXtTest.conf.appTypeExt&&("Safari"===GmPXtTest.browserApp?safari.extension.baseURI:("firefox"===GmPXtTest.browserApp?chrome.extension:chrome.runtime).getURL("")),GmPXtTest.conf.appConfig={login:{guideme:1,forgotPass:1},requireLogin:!0,tourViewOptions:{showMe:1,testme:1,audio:1},defaultIcon:"myguide.png",isLXP:!1,customer:"myguide",desktopCommunication:!1,iframeInjection:!0},function(t){"use strict";function l(t,e){var s=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(s>>16)<<16|65535&s}function i(t,e,s,n,r,a){return l((e=l(l(e,t),l(n,a)))<<r|e>>>32-r,s)}function P(t,e,s,n,r,a,o){return i(e&s|~e&n,t,e,r,a,o)}function u(t,e,s,n,r,a,o){return i(e&n|s&~n,t,e,r,a,o)}function p(t,e,s,n,r,a,o){return i(e^s^n,t,e,r,a,o)}function d(t,e,s,n,r,a,o){return i(s^(e|~n),t,e,r,a,o)}function o(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var s,n,r,a,o=1732584193,i=-271733879,m=-1732584194,c=271733878,T=0;T<t.length;T+=16)o=P(s=o,n=i,r=m,a=c,t[T],7,-680876936),c=P(c,o,i,m,t[T+1],12,-389564586),m=P(m,c,o,i,t[T+2],17,606105819),i=P(i,m,c,o,t[T+3],22,-1044525330),o=P(o,i,m,c,t[T+4],7,-176418897),c=P(c,o,i,m,t[T+5],12,1200080426),m=P(m,c,o,i,t[T+6],17,-1473231341),i=P(i,m,c,o,t[T+7],22,-45705983),o=P(o,i,m,c,t[T+8],7,1770035416),c=P(c,o,i,m,t[T+9],12,-1958414417),m=P(m,c,o,i,t[T+10],17,-42063),i=P(i,m,c,o,t[T+11],22,-1990404162),o=P(o,i,m,c,t[T+12],7,1804603682),c=P(c,o,i,m,t[T+13],12,-40341101),m=P(m,c,o,i,t[T+14],17,-1502002290),o=u(o,i=P(i,m,c,o,t[T+15],22,1236535329),m,c,t[T+1],5,-165796510),c=u(c,o,i,m,t[T+6],9,-1069501632),m=u(m,c,o,i,t[T+11],14,643717713),i=u(i,m,c,o,t[T],20,-373897302),o=u(o,i,m,c,t[T+5],5,-701558691),c=u(c,o,i,m,t[T+10],9,38016083),m=u(m,c,o,i,t[T+15],14,-660478335),i=u(i,m,c,o,t[T+4],20,-405537848),o=u(o,i,m,c,t[T+9],5,568446438),c=u(c,o,i,m,t[T+14],9,-1019803690),m=u(m,c,o,i,t[T+3],14,-187363961),i=u(i,m,c,o,t[T+8],20,1163531501),o=u(o,i,m,c,t[T+13],5,-1444681467),c=u(c,o,i,m,t[T+2],9,-51403784),m=u(m,c,o,i,t[T+7],14,1735328473),o=p(o,i=u(i,m,c,o,t[T+12],20,-1926607734),m,c,t[T+5],4,-378558),c=p(c,o,i,m,t[T+8],11,-2022574463),m=p(m,c,o,i,t[T+11],16,1839030562),i=p(i,m,c,o,t[T+14],23,-35309556),o=p(o,i,m,c,t[T+1],4,-1530992060),c=p(c,o,i,m,t[T+4],11,1272893353),m=p(m,c,o,i,t[T+7],16,-155497632),i=p(i,m,c,o,t[T+10],23,-1094730640),o=p(o,i,m,c,t[T+13],4,681279174),c=p(c,o,i,m,t[T],11,-358537222),m=p(m,c,o,i,t[T+3],16,-722521979),i=p(i,m,c,o,t[T+6],23,76029189),o=p(o,i,m,c,t[T+9],4,-640364487),c=p(c,o,i,m,t[T+12],11,-421815835),m=p(m,c,o,i,t[T+15],16,530742520),o=d(o,i=p(i,m,c,o,t[T+2],23,-995338651),m,c,t[T],6,-198630844),c=d(c,o,i,m,t[T+7],10,1126891415),m=d(m,c,o,i,t[T+14],15,-1416354905),i=d(i,m,c,o,t[T+5],21,-57434055),o=d(o,i,m,c,t[T+12],6,1700485571),c=d(c,o,i,m,t[T+3],10,-1894986606),m=d(m,c,o,i,t[T+10],15,-1051523),i=d(i,m,c,o,t[T+1],21,-2054922799),o=d(o,i,m,c,t[T+8],6,1873313359),c=d(c,o,i,m,t[T+15],10,-30611744),m=d(m,c,o,i,t[T+6],15,-1560198380),i=d(i,m,c,o,t[T+13],21,1309151649),o=d(o,i,m,c,t[T+4],6,-145523070),c=d(c,o,i,m,t[T+11],10,-1120210379),m=d(m,c,o,i,t[T+2],15,718787259),i=d(i,m,c,o,t[T+9],21,-343485551),o=l(o,s),i=l(i,n),m=l(m,r),c=l(c,a);return[o,i,m,c]}function m(t){for(var e="",s=32*t.length,n=0;n<s;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e}function c(t){var e=[];for(e[(t.length>>2)-1]=void 0,n=0;n<e.length;n+=1)e[n]=0;for(var s=8*t.length,n=0;n<s;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e}function n(t){for(var e,s="0123456789abcdef",n="",r=0;r<t.length;r+=1)e=t.charCodeAt(r),n+=s.charAt(e>>>4&15)+s.charAt(15&e);return n}function T(t){return unescape(encodeURIComponent(t))}function r(t){return m(o(c(t=T(t)),8*t.length))}function a(t,e){var s,t=T(t),e=T(e),n=c(t),r=[],a=[];for(r[15]=a[15]=void 0,16<n.length&&(n=o(n,8*t.length)),s=0;s<16;s+=1)r[s]=909522486^n[s],a[s]=1549556828^n[s];return t=o(r.concat(c(e)),512+8*e.length),m(o(a.concat(t),640))}function e(t,e,s){return e?s?a(e,t):n(a(e,t)):s?r(t):n(r(t))}"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:t.md5=e}(this),GmPXtTest.getCreatorAppFeatures=function(){return{quickFilters:!0,hasEmbedMenu:!0,tourDownload:!0,publish:!0,copyTour:!0,toolTips:!0,branchStep:!0,inlineStep:!0,messageStep:!0,imageStep:!0,creatorApp:!0,guideApp:!0,onboardingGuide:!0,showMe:GmPXtTest.conf.appConfig.tourViewOptions.showMe,audio:GmPXtTest.conf.appConfig.tourViewOptions.audio,testme:GmPXtTest.conf.appConfig.tourViewOptions.testme,addSubCat:!0,addTour:!0,importTour:!0,uploadTour:!0,advancedFilter:!0,tourUserInfo:!0,manageAccount:!0,analytics:!0,userSettings:!0,taskStatus:!0,userDetails:!0,defaultDomain:!0}},GmPXtTest.getPlayerFeatures=function(){return{publishedGuides:!0,publishedCat:!0,isPlayer:!0,showMe:GmPXtTest.conf.appConfig.tourViewOptions.showMe,audio:GmPXtTest.conf.appConfig.tourViewOptions.audio,testme:GmPXtTest.conf.appConfig.tourViewOptions.testme}},GmPXtTest.isWB=function(){return!(!GmPXtTest.FT.isPlayer||"wb"!==GmPXtTest.conf.appConfig.customer)},GmPXtTest.isWestpac=function(){return"westpac"===GmPXtTest.conf.appConfig.customer},GmPXtTest.isMyGuide=function(){return"myguide"===GmPXtTest.conf.appConfig.customer},GmPXtTest.isPlayer=function(){return!(GmPXtTest.conf.appName!==GmPXtTest.conf.playerApp&&!GmPXtTest.showPlayer)},GmPXtTest.isExtension=function(){return GmPXtTest.conf.appType===GmPXtTest.conf.appTypeExt},GmPXtTest.isClientJs=function(){return GmPXtTest.conf.appType===GmPXtTest.conf.appTypeScript},GmPXtTest.isMicroPlayer=function(){return!(!GmPXtTest.isPlayer()||GmPXtTest.isWB()||!GmPXtTest.isMiniPlayer)},GmPXtTest.isWBMicroPlayer=function(){return!!(GmPXtTest.isPlayer()&&GmPXtTest.isWB()&&GmPXtTest.isMiniPlayer)},GmPXtTest.isWBC=function(){return!(!GmPXtTest.isPlayer()||"wbc"!==GmPXtTest.conf.appConfig.customer)},GmPXtTest.isEnt=function(){return GmPXtTest.conf.appName===GmPXtTest.conf.creatorApp},GmPXtTest.onPrem=function(){return GmPXtTest.conf.provider===GmPXtTest.conf.Premise},GmPXtTest.isCreatorJS=function(){return GmPXtTest.conf.appName===GmPXtTest.conf.creatorJS},GmPXtTest.isElectron=function(){return GmPXtTest.conf.runEnv===GmPXtTest.conf.appTypeElectron},GmPXtTest.isHumana=function(){return!(!GmPXtTest.isPlayer()||"humana"!==GmPXtTest.conf.appConfig.customer)},GmPXtTest.isMcKesson=function(){return"mckesson"===GmPXtTest.conf.appConfig.customer},GmPXtTest.isMcKessonClientJS=function(){return!(!GmPXtTest.isClientJs()||"mckesson"!==GmPXtTest.conf.appConfig.customer)},GmPXtTest.isSalesForcePopOutSide=function(){var t=GmPXtTest.getUrl();return!(!GmPXtTest.checkSalesForceSite()||-1===t.indexOf("lightning/popout"))},GmPXtTest.isEnt()||GmPXtTest.isCreatorJS()?GmPXtTest.FT=GmPXtTest.getCreatorAppFeatures():GmPXtTest.FT=GmPXtTest.getPlayerFeatures(),GmPXtTest.isAbbvie=function(){return"abbvie"===GmPXtTest.conf.appConfig.customer},GmPXtTest.isSumtotal=function(){return"sumtotal"===GmPXtTest.conf.appConfig.customer},GmPXtTest.isSbx=function(){return"sbx"===GmPXtTest.conf.appConfig.customer},GmPXtTest.isDesktop=function(){return!(!GmPXtTest.playerI||GmPXtTest.playerI.source!==GmPXtTest.sourceDesktop)},(GmPXtTest=void 0===GmPXtTest?{}:GmPXtTest).l||(GmPXtTest.l={}),GmPXtTest.l.resetAll=function(){GmPXtTest.l.logStack={},GmPXtTest.l.currentStack=[],GmPXtTest.l.primaryInfo=[]},GmPXtTest.l.reset=function(){GmPXtTest.l.currentStack=[],GmPXtTest.l.logStack[GmPXtTest.id]=GmPXtTest.l.currentStack,GmPXtTest.l.primaryInfo=[]},GmPXtTest.l.resetAll(),GmPXtTest.l.addRCA=function(t,e){var s=e.selectorAttributes;if(t.precision_type===GmPXtTest.DOM_CRITERIA_DEFAULT&&s){var n,r=[];for(n in s)r=r.concat(s[n]);var a="[RCA] HTML structure appears to have changed since element selection. Check for presence and/or values of HTML attributes: "+(r=r.filter(function(t,e,s){return s.indexOf(t)===e}).sort()).join(", ");t.ignoreText&&(a+="\nAlso, could not find text: "+e.textPropertyValue),GmPXtTest.l.add(a,!0)}else t.precision_type===GmPXtTest.DOM_CRITERIA_CUSTOM&&GmPXtTest.l.add("[RCA] Could not find element by the user provided jQuery selector",!0)},GmPXtTest.l.start=function(t,e,s,n){obj={calls:[],identifier:t+"_"+e},s&&(obj.params=s),GmPXtTest.l.currentStack.length&&(GmPXtTest.l.add("START: "+t+" – "+e,n),GmPXtTest.l.currentStack[GmPXtTest.l.currentStack.length-1].calls.push(obj)),GmPXtTest.l.currentStack.push(obj)},GmPXtTest.l.end=function(t){t&&(GmPXtTest.l.currentStack[GmPXtTest.l.currentStack.length-1].returnValue=t),(null===t||"object"==typeof t&&null===t.he)&&GmPXtTest.l.add("null value returned by: "+GmPXtTest.l.currentStack[GmPXtTest.l.currentStack.length-1].identifier),1<GmPXtTest.l.currentStack.length&&GmPXtTest.l.currentStack.pop()},GmPXtTest.l.return=function(t){return GmPXtTest.l.end(t),t},GmPXtTest.l.add=function(t,e){GmPXtTest.isEmpty(GmPXtTest.l.currentStack)||(GmPXtTest.l.currentStack[GmPXtTest.l.currentStack.length-1]&&(GmPXtTest.l.currentStack[GmPXtTest.l.currentStack.length-1].log?GmPXtTest.l.currentStack[GmPXtTest.l.currentStack.length-1].log.push(t):GmPXtTest.l.currentStack[GmPXtTest.l.currentStack.length-1].log=[t]),e&&GmPXtTest.l.primaryInfo.push(t))},GmPXtTest.l.getPrimaryLogs=function(){return GmPXtTest.l.primaryInfo},GmPXtTest.l.getLogStack=function(){return 1===Object.keys(GmPXtTest.l.logStack).length?GmPXtTest.l.currentStack[0]:GmPXtTest.l.logStack},GmPXtTest.getDebugOptions=function(){return{1:"Global",2:"Page tracking",3:"Messages",5:"Rules engine",6:"Rules engine (Detailed)",8:"MyGuide widget",10:"Notification",12:"Matching algorithm",15:"API",16:"Features tags",17:"Features tags matching",21:"Initialisation",24:"LXP",27:"Workflow Insights",28:"Workflow Insights (Detailed)",30:"Current Page",33:"Workflow guide player",36:"Test automation",37:"Test automation (Detailed)",38:"QA Automator",39:"Onboarding guide",42:"Tooltips",43:"Tooltips (Detailed)",45:"Analytics",48:"Beacons",49:"Beacons (Detailed)",51:"Export tasks",54:"Step create/edit",57:"Click tracking",58:"Test Me",61:"Creator background sync",63:"Precedence",67:"Variables",68:"Segment Validation",70:"Player Background Sync",74:"Desktop Creator"}},GmPXtTest.getDebugColor=function(t){var e={1:"",2:"#fd5e53",3:"#ff0066",5:"#21bf73",6:"#192965",8:"#faafff",10:"#d15a7c",12:"#af460f",15:"#ffb677",21:"#40bfc1",24:"#0f4c75",27:"#3029f2",30:"#52de97",33:"#07b513",36:"#8cba51",39:"#fe8761",42:"#1c819e",45:"#d89cf6",48:"#eb8242",51:"#9dab86",54:"#5f6caf",57:"#4681ec",58:"#0097a7",63:"#ff1a8c",67:"#e3564f",61:"#ff0066",70:"#ff0066",74:"#6600cc"};return e[t]||e[t-1]||"#010038"},GmPXtTest.debugHelp=function(){console.log("Debug logs are feature wise. You can enable logs for upto 3 features at a time. Every feature logs come in different colors. E.g. Workflow guide logs are colored in blue, while Rules engine logs are colored in yellow. "),console.log("Call 'GmPXtTest.debug(op1, op2, op3)' to enable. Where op1, op2, op3 are debug options. E.g. Call 'GmPXtTest.debug(1)' for global logs. 'GmPXtTest.debug(33, 27, 54)' for Workflow guide and Rules engine and Matching algo."),console.log("Call 'GmPXtTest.debugStop()' to disable."),console.log("Call 'GmPXtTest.logElTracker()' – To log matching algo calls counter."),console.log("Call 'GmPXtTest.resetElTracker()' – To reset counter to zero."),console.log("Filter logs using 'Gm' to see only MyGuide logs."),console.log("Debug features list",GmPXtTest.getDebugOptions()),console.log("ALWAYS remember to disable after use.")},GmPXtTest.getDebugKey=function(){return GmPXtTest.storagePrefix+"debugMode"},GmPXtTest.initDebugMode=function(){GmPXtTest.debugMode=localStorage.getItem(GmPXtTest.getDebugKey()),GmPXtTest.debugMode&&(GmPXtTest.debugMode=GmPXtTest.debugMode.split('"').join("")),GmPXtTest.updateDebugMode(GmPXtTest.debugMode)},GmPXtTest.updateDebugMode=function(t){GmPXtTest.debugMode=t,GmPXtTest.isBackgroundPage||(t={debugMode:GmPXtTest.debugMode},GmPXtTest.isDefined(GmPXtTest.sendMessageToAllWindows)&&GmPXtTest.sendMessageToAllWindows("mgPlayerExtChromeTest_action:update_debug_mode",t),GmPXtTest.isSidePanelApp||GmPXtTest.sendMessageToApp("mgPlayerExtChromeTest_action:update_debug_mode",t),GmPXtTest.sendMessageToBackgroundService({action:"mgPlayerExtChromeTest_action:update_debug_mode",data:t}),GmPXtTest.isDefined(GmPXtTest.sendMessageToStepFrame)&&GmPXtTest.sendMessageToStepFrame("mgPlayerExtChromeTest_action:update_debug_mode",t))},GmPXtTest.debugStop=function(){return GmPXtTest.isBackgroundPage||localStorage.removeItem(GmPXtTest.storagePrefix+"debugMode"),GmPXtTest.updateDebugMode(""),"Logs disabled"},GmPXtTest.debug=function(t,e,s){var n=GmPXtTest.getDebugOptions(),r="",a="",o="";return t&&(n.hasOwnProperty(t)?(a+=t,r+=n[t]):o+=t),e&&(n.hasOwnProperty(e)?(a+=":"+e,r+=", "+n[e]):o+=","+e),s&&(n.hasOwnProperty(s)?(a+=":"+s,r+=", "+n[s]):o+=","+s),o?"Invalid debug mode: "+o:a?(GmPXtTest.isBackgroundPage||localStorage.setItem(GmPXtTest.storagePrefix+"debugMode",a),GmPXtTest.updateDebugMode(a),"Logs enabled: "+r):"Please provide debug mode"},GmPXtTest.showLogs=function(t){var e,s;return!!GmPXtTest.debugMode&&(1===t||(s=t+1,-1!==(e=(GmPXtTest.debugMode+"").split(":")).indexOf(t+""))||-1!==e.indexOf(s+""))},GmPXtTest.updateLogMetadata=function(t){return(t=GmPXtTest.id?t+" ["+GmPXtTest.id+"]":t)+"["+GmPXtTest.logtime()+"]"},GmPXtTest.log=function(t,e,s){GmPXtTest.showLogs(t)&&(12!==t&&(GmPXtTest.isSidePanelApp||GmPXtTest.isStepFrame)?GmPXtTest.sendMessageToPrintLog(t,e,s):GmPXtTest.printLog(t,e,s))},GmPXtTest.sendMessageToPrintLog=function(t,e,s){GmPXtTest.sendToParentWindow({action:"mgPlayerExtChromeTest_action:print_debug_log",data:{mode:t,str:e,opt:s}})},GmPXtTest.printLog=function(t,e,s){var n="color:"+GmPXtTest.getDebugColor(t)+";",r=null;1!==t&&1!==s||(n+="font-weight: bold;"),1!==s&&(r=s),e="%c"+(e=GmPXtTest.updateLogMetadata(e)),r?console.log(e,n,GmPXtTest.createDeepCopy(r)):console.log(e,n)},GmPXtTest.logArrayProp=function(t,e,s){if(GmPXtTest.showLogs(t))for(var n=0,r=e.length;n<r;n++){var a=n+1+") "+e[n][s],o=(a="%c"+GmPXtTest.updateLogMetadata(a),"color:"+GmPXtTest.getDebugColor(t)+";");console.log(a,o)}},GmPXtTest.logtime=function(){return(Date.now()+"").substring(7)},GmPXtTest.printMatchingAlgoLogs=function(){GmPXtTest.log(12,"Detailed logs",GmPXtTest.l.getLogStack()),GmPXtTest.log(12,"Primary debug info",{logs:GmPXtTest.l.getPrimaryLogs()})},GmPXtTest.primaryErrorReport=function(){return GmPXtTest.l.primaryInfo.join("<br>")},GmPXtTest.debugErrorReport=function(){},(GmPXtTest=void 0===GmPXtTest?{}:GmPXtTest).getAppStorage=function(a){return GmPXtTest.isBackgroundPage||window.top!==window.self?new Promise(function(t,e){for(var s={},n=0;n<a.length;n++){var r=GmPXtTest.addStoragePrefix(a[n]),r=localStorage.getItem(r);r&&"undefined"!==r&&(r=GmPXtTest.parseJSON(r),s[a[n]]=r)}t(s)}):new Promise(function(s,t){var n="id"+Math.random();window.addEventListener("message",function t(e){e=GmPXtTest.parseMsg(e);(e=GmPXtTest.convertMgdata(e)).data&&n===e.data.id&&e.action&&"mgPlayerExtChromeTest_action:get_local_storage_response"===e.action&&(window.removeEventListener("message",t),s(e.data.items))}),GmPXtTest.sendMessageToApp("mgPlayerExtChromeTest_action:get_local_storage",{id:n,keys:a})})},GmPXtTest.setAppStorage=function(n){return GmPXtTest.isBackgroundPage||window.top!==window.self?new Promise(function(t,e){mg$.each(n,function(t,e){t=GmPXtTest.addStoragePrefix(t),localStorage.setItem(t,JSON.stringify(e))}),t()}):new Promise(function(s,t){window.addEventListener("message",function t(e){e=GmPXtTest.parseMsg(e);(e=GmPXtTest.convertMgdata(e)).action&&"mgPlayerExtChromeTest_action:set_local_storage_response"===e.action&&(window.removeEventListener("message",t),s())}),GmPXtTest.sendMessageToApp("mgPlayerExtChromeTest_action:set_local_storage",n)})},GmPXtTest.removeAppStorage=function(n){return GmPXtTest.isBackgroundPage||window.top!==window.self?new Promise(function(t,e){for(var s=0;s<n.length;s++)n[s]=GmPXtTest.addStoragePrefix(n[s]),localStorage.removeItem(n[s]);t()}):new Promise(function(s,t){window.addEventListener("message",function t(e){e=GmPXtTest.parseMsg(e);(e=GmPXtTest.convertMgdata(e)).action&&"mgPlayerExtChromeTest_action:remove_local_storage_response"===e.action&&(window.removeEventListener("message",t),s())}),GmPXtTest.sendMessageToApp("mgPlayerExtChromeTest_action:remove_local_storage",n)})},GmPXtTest.getLocalStorage=function(a){return new Promise(function(t,e){for(var s={},n=0;n<a.length;n++){var r="mgLxp"+a[n],r=localStorage.getItem(r);r&&"undefined"!==r&&(r=GmPXtTest.parseJSON(r),s[a[n]]=r)}t(s)})},GmPXtTest.setLocalStorage=function(s){return new Promise(function(t,e){mg$.each(s,function(t,e){t="mgLxp"+t,localStorage.setItem(t,JSON.stringify(e))}),t()})},GmPXtTest.removeLocalStorage=function(r){return new Promise(function(t,e){for(var s=0;s<r.length;s++){var n="mgLxp"+r[s];localStorage.removeItem(n)}t()})},GmPXtTest.getChromeStorage=function(s){return new Promise(function(n,t){try{for(var e=0;e<s.length;e++)s[e]=GmPXtTest.addStoragePrefix(s[e]);chrome.storage.local.get(s,function(t){var e,s={};for(e in t)s[GmPXtTest.removeStoragePrefix(e)]=t[e];n(s)})}catch(t){}})},GmPXtTest.setChromeStorage=function(r){return new Promise(function(t,e){if(r){var s,n={};for(s in r)n[GmPXtTest.addStoragePrefix(s)]=r[s];try{chrome.storage.local.set(n,function(){t()})}catch(t){}}})},GmPXtTest.removeChromeStorage=function(n){return new Promise(function(t,e){try{if(n){for(var s=0;s<n.length;s++)n[s]=GmPXtTest.addStoragePrefix(n[s]);chrome.storage.local.remove(n,function(){t()})}}catch(t){}})},GmPXtTest.storage=function(t){var e={};return GmPXtTest.conf&&GmPXtTest.isExtension()&&"Safari"!==GmPXtTest.browserApp?(e.get=GmPXtTest.getChromeStorage,e.set=GmPXtTest.setChromeStorage,e.remove=GmPXtTest.removeChromeStorage):GmPXtTest.isLXP()?(e.get=GmPXtTest.getLocalStorage,e.set=GmPXtTest.setLocalStorage,e.remove=GmPXtTest.removeLocalStorage):(e.get=GmPXtTest.getAppStorage,e.set=GmPXtTest.setAppStorage,e.remove=GmPXtTest.removeAppStorage),e},GmPXtTest.lastUserAction=0,GmPXtTest.iframeCount=0,GmPXtTest.prevEnv=[],GmPXtTest.storagePrefix=GmPXtTest.conf.appName+"_",GmPXtTest.ruleOpsUILabels={},GmPXtTest.timeout=function(t,e){return setTimeout(t,e)},GmPXtTest.trackerUtil={guidePayload:[],trackPI:!1,enableTracking:!1,ePayload:{},ttPayload:{},page_url:"",featureTracking:!1,pageTracking:!1},GmPXtTest.guidePlayTracker={},GmPXtTest.STEP_TYPE_INLINE="inline",GmPXtTest.STEP_TYPE_WEB_INLINE="web_inline",GmPXtTest.STEP_TYPE_MESSAGE="message",GmPXtTest.STEP_TYPE_IMAGE="image",GmPXtTest.STEP_BEACON_TYPE="BEACON",GmPXtTest.STEP_TYPE_EXTERNAL_AUTOMATION="external_automation_step",GmPXtTest.CAPTURE_SCREEN_STEP="capture-screen-step",GmPXtTest.UPLOAD_IMAGE_STEP="upload-image-step",GmPXtTest.STEP_TYPE_VIDEO="video",GmPXtTest.STEP_TYPE_SMART_TIP="smartTip",GmPXtTest.STEP_TYPE_AUTOMATION="automation",GmPXtTest.STEP_TYPE_GUIDE="guide",GmPXtTest.STEP_TYPE_BRANCH="branch",GmPXtTest.STEP_TYPE_SURVEY="survey",GmPXtTest.STEP_TYPE_TRANSPORT="transport",GmPXtTest.ANALYTICS_EVENT_CHAIN_ID="",GmPXtTest.INSIGHTS_EVENT_CHAIN_ID="",GmPXtTest.STEP_TEXT_SLIDE_TYPE="textSlide",GmPXtTest.STEP_TYPE_ERROR_HANDLER="errorHandler",GmPXtTest.isLogoutTrackApi=!1,GmPXtTest.STEP_TYPE_TAG="tag",GmPXtTest.t_={hr1:36e5,hr8:288e5,hr24:864e5,hr24inSec:86400,hr12inSec:43200,min30:18e5,min15:9e5,min10_s:600,min5_s:300,min5:3e5,min4:24e4,min2_s:120,min1_s:60,min1:6e4,sec15:15e3,sec10:1e4,sec5:5e3,sec4:4e3,sec3:3e3,sec2:2e3,sec1:1e3,ms25:2500,ms15:1500,ms8:800,ms5:500,ms3:300,ms2:200,ms1:100},GmPXtTest.t={sync24:GmPXtTest.t_.hr24,notifExp24:GmPXtTest.t_.hr24,syncSegment:GmPXtTest.t_.hr24,tracking24hr:GmPXtTest.t_.hr24inSec,tracking12hr:GmPXtTest.t_.hr12inSec,tracking8hr:GmPXtTest.t_.hr8,cdnExp:GmPXtTest.t_.hr1,openSso:GmPXtTest.t_.hr1,snoozeNotif:GmPXtTest.t_.hr1,refreshBrandLogo:GmPXtTest.t_.hr1,refreshWidget:GmPXtTest.t_.hr1,pageTrackWait:GmPXtTest.t_.min30,workflowIdle:GmPXtTest.t_.min15,workflowSync:GmPXtTest.t_.min15,clickSync:GmPXtTest.t_.min15,playerSync:GmPXtTest.t_.min5_s,fileStackExp:GmPXtTest.t_.min5,elLookupTime5m:GmPXtTest.t_.min5,autoRelogin:GmPXtTest.t_.min5,autoWaitTime:GmPXtTest.t_.min4,createStepTimeout:GmPXtTest.t_.min4,trackerSync:GmPXtTest.t_.min2_s,creatorSync:GmPXtTest.t_.min1_s,trackerInt:GmPXtTest.t_.min1,autoEndTime:GmPXtTest.t_.min1,trackerInt2:GmPXtTest.t_.sec15,highlighterDefautWT:GmPXtTest.t_.sec15,tooltipTimeout:GmPXtTest.t_.sec15,elLookupTime15s:GmPXtTest.t_.sec15,elLookupTime10s:GmPXtTest.t_.sec10,stepMTimeout:GmPXtTest.t_.sec15,waitForNotifications:GmPXtTest.t_.sec10,guideAutoWatch:GmPXtTest.t_.sec10,ruleTimeOut10s:GmPXtTest.t_.sec10,stepITimeout:GmPXtTest.t_.sec10,findElTimeout:GmPXtTest.t_.sec10,branchDecision_domRule:GmPXtTest.t_.sec10,branchDecision_domRule_quickBranch:GmPXtTest.t_.sec4,branchDecision:GmPXtTest.t_.sec2,branchDecision_errorHandler:GmPXtTest.t_.sec1,stepComplition:GmPXtTest.t_.sec4,drag:GmPXtTest.t_.sec2,checkVariable:GmPXtTest.t_.sec2,loginEdCast:GmPXtTest.t_.sec2,branchDecisionInterval_domRule:GmPXtTest.t_.sec1,plsWaitMsg:GmPXtTest.t_.sec1,stopRecorder:GmPXtTest.t_.sec1,toastMsg:GmPXtTest.t_.ms25,variableTimeout:GmPXtTest.t_.ms25,ruleTimeOut25ms:GmPXtTest.t_.ms25,eventGuideCompleteAuto:GmPXtTest.t_.ms15,tragetFrameWT:GmPXtTest.t_.ms15,ruleTimeOut15ms:GmPXtTest.t_.ms15,currentPageSpinner:GmPXtTest.t_.ms15,bgmsg:GmPXtTest.t_.ms15,screenrecording:GmPXtTest.t_.ms8,branchDecisionInterval:GmPXtTest.t_.ms5,msgToframes:GmPXtTest.t_.ms5,desktopCapture:GmPXtTest.t_.ms5,appPanel:GmPXtTest.t_.ms3,hiteTooltip:GmPXtTest.t_.ms2,addTooltipEvent:GmPXtTest.t_.ms1},GmPXtTest._location=function(){return window&&window.location},GmPXtTest.isWestpacOneUI=function(){return!!(window&&window.location&&-1!==window.location.href.indexOf("about:blank")&&parent.window&&parent.window.location&&-1!==parent.window.location.href.indexOf("ui.westpac.com.au"))},GmPXtTest.parseJSON__=function(t){try{var e;return"object"==typeof t?t:""===t||"AS"===t||"na"===t||"[object Object]"===t||void 0===t||"undefined"===t?{}:e="string"==typeof(e=JSON.parse(t))?JSON.parse(e):e}catch(t){return null}},GmPXtTest.isEmpty=function(t){return"boolean"!=typeof t&&"number"!=typeof t&&!(t&&("object"==typeof t&&t.constructor===Object?Object.keys(t).length:"object"==typeof t&&t.constructor===Array?t.length:"string"!=typeof t||t.trim()))},GmPXtTest.isDefined=function(t){return void 0!==t&&"undefined"!==t},GmPXtTest.updateGlobalUser=function(t){t&&(GmPXtTest.isBackgroundPage?GmPXtTest.user=t:GmPXtTest.user=GmPXtTest.validateDataModel(t,GmPXtTest.model.user),t.organization)&&GmPXtTest.updateGlobalOrg(t.organization)},GmPXtTest.updateGlobalOrg=function(t){t&&(GmPXtTest.isBackgroundPage?GmPXtTest.organization=t:GmPXtTest.organization=GmPXtTest.validateDataModel(t,GmPXtTest.model.organization),delete GmPXtTest.organization.applications)},GmPXtTest.playerIntervalValidator=function(t){GmPXtTest.log(70,"GET TIMESTAMP at "+new Date),GmPXtTest.getJsonTimeStamp(t).then(function(t){var e=t.last_updated_time;GmPXtTest.log(70,"LAST REFRESH from server "+e),e!=GmPXtTest.refreshTime?(GmPXtTest.log(70,"START PLAYER DATA REFRESH"),GmPXtTest.msgToApp("mgPlayerExtChromeTest_action:refresh_player",t,senderTabId)):(GmPXtTest.msgToApp("mgPlayerExtChromeTest_action:update_timestamp_sync_time",t,senderTabId),GmPXtTest.log(70,"NO UPDATE FOUND "+new Date)),GmPXtTest.refreshTime=t.last_updated_time,GmPXtTest.lastTimeStampSync=GmPXtTest.getCurrentTimeInSec()})},GmPXtTest.creatorIntervalValidator=function(t){GmPXtTest.log(70,"GET TIMESTAMP at "+new Date),GmPXtTest.getModifiedObjects().then(function(t){t.length&&GmPXtTest.msgToApp("mgPlayerExtChromeTest_action:creator_updates",{updates:t,refreshTime:GmPXtTest.creatorRefreshTime},senderTabId)}).catch(function(t){GmPXtTest.log(1,"ERROR: Creator sync failed",t)})},GmPXtTest.processLastActionTime=function(t){var e=GmPXtTest.getCurrentTimeInSec(),t=GmPXtTest.onPrem()?t||GmPXtTest.getOnPremJsonURL():"";GmPXtTest.inPlayer&&e-GmPXtTest.lastTimeStampSync>GmPXtTest.t.playerSync&&(GmPXtTest.log(70,"TRIGGER PLAYER UPDATE "+new Date),GmPXtTest.playerIntervalValidator(t)),GmPXtTest.isEnt()&&e-GmPXtTest.creatorRefreshTime>GmPXtTest.t.creatorSync&&(GmPXtTest.log(70,"TRIGGER CREATOR UPDATE "+new Date),GmPXtTest.creatorIntervalValidator(t)),GmPXtTest.log(45,"SEND Traker event "+new Date),GmPXtTest.trackerV1.sendEvents(),GmPXtTest.log(70,"LAST USER ACTION TIME: "+new Date)},GmPXtTest.startCreatorUpdateInterval=function(){GmPXtTest.creatorRefreshTime=GmPXtTest.refreshTime||GmPXtTest.getCurrentTimeInSec(),GmPXtTest.creatorInterval||(GmPXtTest.creatorInterval=setInterval(function(){GmPXtTest.getModifiedObjects().then(function(t){t.length&&GmPXtTest.msgToApp("mgPlayerExtChromeTest_action:creator_updates",{updates:t,refreshTime:GmPXtTest.creatorRefreshTime},senderTabId)}).catch(function(t){GmPXtTest.log(1,"ERROR: Creator sync failed",t)})},GmPXtTest.t.creatorSync))},GmPXtTest.sendMessageToApp=function(t,e){(e=e||{}).config=GmPXtTest.conf,GmPXtTest.playerI&&(e.playerInstance=GmPXtTest.playerI),GmPXtTest.initialization&&!0===GmPXtTest.initialization.sidePanel||-1<t.indexOf("receive_lxp_storage")?GmPXtTest.sendMessageToAppIn(t,e):GmPXtTest.timeout(function(){GmPXtTest.sendMessageToApp(t,e)},GmPXtTest.t_.sec1)},GmPXtTest.sendMessageToAppIn=function(t,e){var s=mg$(".mgPlayerExtChromeTest_app");s.length&&(t=GmPXtTest.formatMsg(t={action:t,data:e}),s.get(0).contentWindow.postMessage(t,"*"))},GmPXtTest.msgToApp=function(t,e,s){!0===GmPXtTest.isBackgroundPage?GmPXtTest.sendMessageToPanel(t,e,s):GmPXtTest.isSidePanelApp?GmPXtTest.msgToThisWin({action:t,data:e}):window.top===window.self?GmPXtTest.sendMessageToApp(t,e):GmPXtTest.isStepFrame&&GmPXtTest.sendToParentWindow({action:t,data:e})},GmPXtTest.sendMessageToPanel=function(t,e,r){var a={action:t,data:e=null!=e&&e?e:{}};chrome.tabs.query({active:!0,highlighted:!0},function(t){for(var e,s=!1,n=0;n<t.length;n++)(e=t[n]).id===r&&(s=!0);!s&&r&&GmPXtTest.msgToTab(r,a),GmPXtTest.FT.creatorApp&&t.length&&!s&&(e=t[0],r=e.id,GmPXtTest.updateVideoUploadStatus(r,{data:{operation:"get"}})),GmPXtTest.FT.isPlayer&&t.length&&!s&&(e=t[0],r=e.id),GmPXtTest.msgToTab(r,a)})},GmPXtTest.getCdnSignature=function(t){if(GmPXtTest.waitForCdnSignature)return!0;GmPXtTest.waitForCdnSignature=!0,t?GmPXtTest.msgToApp("mgPlayerExtChromeTest_action:get_cdn_signature_from_app"):GmPXtTest.callGetCdnSignature({organization_id:GmPXtTest.organization.organization_id}).then(function(t){t=t.data;t&&t.cdn_signature&&t.cdn_signature_expiry&&GmPXtTest.user&&(GmPXtTest.user.cdn_signature=t.cdn_signature,GmPXtTest.user.cdn_signature_expiry=t.cdn_signature_expiry)})},GmPXtTest.getCurrentTimeInMilSec=function(){return(new Date).getTime()},GmPXtTest.getCurrentTimeInSec=function(){return Math.floor((new Date).getTime()/1e3)},GmPXtTest.getModifiedObjects=function(t){return new Promise(function(e,s){var n=GmPXtTest.creatorRefreshTime,t=GmPXtTest.conf.webServiceUrl+"organization/modified/objects?",r=(GmPXtTest.log(61,"Check for updates. From timestamp: "+n),{timestamp:n,organization_id:GmPXtTest.organization.organization_id}),a={accesstoken:GmPXtTest.user.accesstoken,"Content-Type":"application/json"};GmPXtTest.creatorRefreshTime=GmPXtTest.getCurrentTimeInSec(),fetch(t+new URLSearchParams(r),{headers:a}).then(function(t){200===t.status?t.json().then(function(t){t.error?(GmPXtTest.creatorRefreshTime=n,1003===t.code||2004===t.code?GmPXtTest.msgToApp("mgPlayerExtChromeTest_action:logout_user"):1007===t.code&&GmPXtTest.getAccessToken().then(function(t){GmPXtTest.saveToken(t)}),s(t)):t.data&&t.data.objects?(t=t.data.objects,e(t)):s()}).catch(function(t){s()}):s()}).catch(function(t){GmPXtTest.log(1,"Creator could not refresh",t)})})},GmPXtTest.getJsonTimeStamp=function(n){return new Promise(function(e,t){var s="";GmPXtTest.onPrem()?s=n+"/json/timestamp.json":GmPXtTest.organization&&!GmPXtTest.isEmpty(GmPXtTest.organization)&&(s=GmPXtTest.conf.cdnStorage+GmPXtTest.organization.bucket+"/json/timestamp.json"+GmPXtTest.user.cdn_signature),GmPXtTest.isEmpty(s)||fetch(s).then(function(t){200===t.status?t.json().then(function(t){e(t)}).catch(function(t){GmPXtTest.log(1,"ERROR: Timestamp fetch failed",t)}):(GmPXtTest.log(1,"ERROR: Timestamp fetch failed"+t.status),GmPXtTest.waitForCdnSignature=!1,GmPXtTest.getCdnSignature())})})},GmPXtTest.encode=function(t){var e="";if(t){var s,n=0;for(s in t)t.hasOwnProperty(s)&&(n++&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]))}return e},GmPXtTest.getOrgKeyFromJwToken=function(t){try{var e=t.split(".")[1],s=atob(e);return s?GmPXtTest.parseJSON(s).org_key:""}catch(t){return{}}},GmPXtTest.parseJSON=function(t){try{return"object"==typeof t?t:""===t||"AS"===t||"na"===t||"[object Object]"===t||void 0===t||"undefined"===t?{}:JSON.parse(t)}catch(t){return{}}},GmPXtTest.sendMessageToTabs=function(e){chrome.tabs.query({},function(t){t.forEach(function(t){GmPXtTest.msgToTab(t.id,e)})})},GmPXtTest.msgToTab=function(t,e){chrome.tabs.sendMessage(t,GmPXtTest.formatMsg(e))},GmPXtTest.formatMsg=function(t){return GmPXtTest.isWestpac()&&-1!==t.action.indexOf("MyGuideReporting")?t:(t.data&&(t.mgdata=t.data,delete t.data),JSON.stringify(t))},GmPXtTest.getStepFromSteps=function(t,e){var s=!1;if(t)for(var n=0;n<e.length;n++)if(parseInt(e[n].step_id)===parseInt(t)){s=e[n];break}return s},GmPXtTest.getStartpointStepFromSteps=function(t,e){var s=!1;if(t)for(var n=0;n<e.length;n++)if(parseInt(e[n].step_id)===parseInt(t)&&e[n].step_settings.startPoint){s=e[n];break}return s},GmPXtTest.removePSStepId=function(t,e,s){for(var n=0;n<e.length;n++)if(e[n].tail===t){e[n].tail=e[s].tail;break}return e.splice(s,1),e},GmPXtTest.repairPlayStructure=function(t,e){for(var s=0;s<t.length;s++){var n=GmPXtTest.getStepFromSteps(t[s].id,e);if(!n){t=GmPXtTest.removePSStepId(t[s].id,t,s),t=GmPXtTest.repairPlayStructure(t,e);break}}return t},GmPXtTest.isAutomationRunning=function(){return GmPXtTest.auto&&GmPXtTest.auto.isAutomationRunning()},GmPXtTest.getAutomatedCurrentTour=function(){return GmPXtTest.auto&&GmPXtTest.auto.getAutomatedCurrentTour()},GmPXtTest.isAutomationStepRunning=function(){var t;return!!GmPXtTest.playerI&&(t=GmPXtTest.getStepFromPlayerI(GmPXtTest.playerI.currentStepId),GmPXtTest.isAutomationStep(t))},GmPXtTest.callApi=function(i,m){return new Promise(function(e,t){var s="id"+Math.random();function n(t){t&&"mgPlayerExtChromeTest_action:call_api_response"===t.action&&t.data&&t.data.id===s&&(window.removeEventListener("message",r),window.removeEventListener("message",a),e(t.data.items))}function r(t){t=GmPXtTest.parseMsg(t);n(GmPXtTest.convertMgdata(t))}function a(t){t=GmPXtTest.parseJSON(t);return n(GmPXtTest.convertMgdata(t)),!0}var o={id:s,option:i,api:m};!0===GmPXtTest.isBackgroundPage?(chrome.runtime.onMessage.addListener(a),GmPXtTest.sendMessageToPanel("mgPlayerExtChromeTest_action:call_api",o,senderTabId)):GmPXtTest.isSidePanelApp?GmPXtTest.msgToThisWin({action:"mgPlayerExtChromeTest_action:call_api",data:o}):(window.addEventListener("message",r),GmPXtTest.sendMessageToApp("mgPlayerExtChromeTest_action:call_api",o))})},GmPXtTest.cdnPlayer="Cdn"===GmPXtTest.conf.provider,GmPXtTest.apiPlayer="playerApi"===GmPXtTest.conf.provider,GmPXtTest.inPlayer=GmPXtTest.apiPlayer||GmPXtTest.cdnPlayer,GmPXtTest.convertMgdata=function(t){return t.action&&-1!==t.action.indexOf("init_sfdc_env")||GmPXtTest.isWestpac()&&t.action&&-1!==t.action.indexOf("MyGuideReporting")||(t.data=t.mgdata),t},GmPXtTest.inArray=function(t,e){return-1!==e.indexOf(parseInt(t))},GmPXtTest.inArrayString=function(t,e){return-1!==e.indexOf(t)},GmPXtTest.createDeepCopy=function(t){if(GmPXtTest.isDefined(t)&&!GmPXtTest.isEmpty(t))return JSON.parse(JSON.stringify(t))},GmPXtTest.getBrowserUrl=function(t){return"Safari"===GmPXtTest.browserApp?safari.extension.baseURI+t:("firefox"===GmPXtTest.browserApp||GmPXtTest.isClientJs()?chrome.extension:chrome.runtime).getURL(t)},GmPXtTest.getAccessToken=function(){var t={url:"user/token?",headers:{"Content-Type":"application/json",RefreshToken:GmPXtTest.user.refreshtoken},data:{force_update:!0,mg_source_name:GmPXtTest.conf.appConfig.customer},method:"GET"};return GmPXtTest.xhr(t)},GmPXtTest.saveToken=function(t){t&&t.accesstoken&&(GmPXtTest.user.accesstoken=t.accesstoken,GmPXtTest.user.refreshtoken=t.refreshtoken,GmPXtTest.isDefined(t.app_access)&&(GmPXtTest.user.app_access=t.app_access),GmPXtTest.isDefined(t.profile)&&(GmPXtTest.user.profile=t.profile),GmPXtTest.isBackgroundPage||GmPXtTest.getWidgetIcon().then(function(t){mg$(".mgPlayerExtChromeTest_start-button img").attr("src",t)}),GmPXtTest.msgToApp("mgPlayerExtChromeTest_action:update_access_token",t,senderTabId))},GmPXtTest.addStoragePrefix=function(t){return t=-1===t.indexOf(GmPXtTest.storagePrefix)?GmPXtTest.storagePrefix+t:t},GmPXtTest.removeStoragePrefix=function(t){return t=-1!==t.indexOf(GmPXtTest.storagePrefix)?t.split(GmPXtTest.storagePrefix)[1]:t},GmPXtTest.getUUID=function(){var s=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(s+16*Math.random())%16|0;return s=Math.floor(s/16),("x"==t?e:3&e|8).toString(16)})},GmPXtTest.categoryLog=function(t){return"APP: "+t.application_id+" : ["+t.category_id+", "+t.category_title+"] "},GmPXtTest.tourLog=function(t){return" ["+t.tour_id+", "+t.tour_title+"] "},GmPXtTest.stepLog=function(t,e){return" [ step: "+t+", tour: "+e+"] "},GmPXtTest.isTrue=function(t){return 1===parseInt(t)||!0===t},GmPXtTest.updateTourPlayStructure=function(t){var e=t.step,s=t.prevStepData;if(GmPXtTest.log(54,"GmPXtTest.updateTourPlayStructure ",t),s&&s.tour&&s.tour.tour_settings&&s.tour.tour_settings.play_structure){GmPXtTest.log(54,"GmPXtTest.updateTourPlayStructure check 1");var n=null,r=s.tour.tour_settings.play_structure;if(0<r.length)if(s.step_id){for(var a=0;a<r.length;a++)if(r[a].id===s.step_id){if(!GmPXtTest.checkForBranchVariationSteps(s)){r[a].tail&&(n=r[a].tail),r[a].tail=e.step_id;break}r[a].branch||(r[a].branch=[]);var o=s.branch_index;if(r[a].branch[o].tail&&-1!==r[a].branch[o].tail)n=r[a].branch[o].tail;else if(-1===r[a].branch[o].tail)for(var i=0;i<r[a].branch.length;i++)-1===r[a].branch[i].tail&&(r[a].branch[i].tail=e.step_id);r[a].branch[o].tail=e.step_id}}else n=r[0].id;var m={id:e.step_id,tail:n},c=e.step_settings;if(e.step_type===GmPXtTest.STEP_TYPE_BRANCH){m.branch=[],m.tail=null;for(a=0;a<c.branch.length;a++)c.branch[a].tail?m.branch.push({tail:c.branch[a].tail}):m.branch.push({tail:null})}else!GmPXtTest.isTrue(e.step_settings.inlineBranch)&&e.step_type!==GmPXtTest.STEP_TYPE_ERROR_HANDLER||(m.branch=[],m.branch.push({tail:n},{tail:null}),m.tail=null);return s.step_id?r.push(m):r.splice(0,0,m),s.tour.tour_settings.play_structure=r,t.prevStepData=s,t}return!1},GmPXtTest.engLbls={px:"px",Guide:"Guide",wbTitle:"Welcome to the iGuide Content Panel",wbDescription:"This panel provides users with an alternate way to view applicable iGuide learning tools such as step-by-step walk-throughs, slide demos, videos, etc",wbViewiGuideInfo:"View iGuide info",wbiGuideTools:"iGuide Tools",wbWalkThrus:"Walk-thrus & demos",wbTooltips:"Tooltips",wbVideos:"Videos",wbPopupNotification:"Pop-up notifications &",wbMessages:"messages",defaultTestMe:"TestMe",defaultShowMe:"ShowMe",defaultGuideMe:"GuideMe",defaultVLab:"TeachMe",defaultDoItForMe:"DoItForMe",testMe:"TestMe",showMe:"ShowMe",guideMe:"GuideMe",vLab:"TeachMe",doItForMe:"DoItForMe",microPlayer:"Mini Player",myGuides:"My Guides",powerHTML:"Power HTML",defaultNext:"Next",defaultBtnPrev:"Prev"},GmPXtTest.getPlayerLabels=function(t){var e=GmPXtTest.playerLbls.en_US;return t&&(t=t.replace("-","_"),GmPXtTest.playerLbls[t])&&(e=GmPXtTest.playerLbls[t]),e=GmPXtTest.mergeLabels(e,GmPXtTest.engLbls)},GmPXtTest.getCreatorLabels=function(t){var e=GmPXtTest.creatorLbls.en_US;return e=t&&(t=t.replace("-","_"),GmPXtTest.creatorLbls[t])?GmPXtTest.creatorLbls[t]:e},GmPXtTest.mergeLabels=function(t,e){for(var s in e)t[s]=e[s];return t},GmPXtTest.setRuleOpsUILabels=function(){GmPXtTest.ruleOpsUILabels[GmPXtTest.EXISTS]=GmPXtTest.label.opExists,GmPXtTest.ruleOpsUILabels[GmPXtTest.NOT_EXISTS]=GmPXtTest.label.opNotExists,GmPXtTest.ruleOpsUILabels[GmPXtTest.EQUALS]=GmPXtTest.label.opEquals,GmPXtTest.ruleOpsUILabels[GmPXtTest.NOT_EQUAL]=GmPXtTest.label.opNotEquals,GmPXtTest.ruleOpsUILabels[GmPXtTest.TXT_EQUALS]=GmPXtTest.label.opTxEquals,GmPXtTest.ruleOpsUILabels[GmPXtTest.NOT_TXT]=GmPXtTest.label.opTxNotEquals,GmPXtTest.ruleOpsUILabels[GmPXtTest.CONTAINS]=GmPXtTest.label.opContains,GmPXtTest.ruleOpsUILabels[GmPXtTest.NOT_CONTAINS]=GmPXtTest.label.opNotContains,GmPXtTest.ruleOpsUILabels[GmPXtTest.STARTS_WITH]=GmPXtTest.label.opStWith,GmPXtTest.ruleOpsUILabels[GmPXtTest.ENDS_WITH]=GmPXtTest.label.opEndWith,GmPXtTest.ruleOpsUILabels[GmPXtTest.GREAT_THAN]=GmPXtTest.label.opGrThan,GmPXtTest.ruleOpsUILabels[GmPXtTest.LESS_THAN]=GmPXtTest.label.opLeThan,GmPXtTest.ruleOpsUILabels[GmPXtTest.TXT_MATCHES]=GmPXtTest.label.opTxMatch,GmPXtTest.ruleOpsUILabels[GmPXtTest.TXT_CONTAINS]=GmPXtTest.label.opTxContains,GmPXtTest.ruleOpsUILabels[GmPXtTest.ATTRIBUTES]=GmPXtTest.label.opAttrs,GmPXtTest.ruleOpsUILabels[GmPXtTest.NOT_ATTRIBUTES]=GmPXtTest.label.opNoAttrs,GmPXtTest.ruleOpsUILabels[GmPXtTest.CLASSES]=GmPXtTest.label.opClasses,GmPXtTest.ruleOpsUILabels[GmPXtTest.NOT_CLASSES]=GmPXtTest.label.opNoClasses,GmPXtTest.ruleOpsUILabels[GmPXtTest.SELECTED]=GmPXtTest.label.opSelect,GmPXtTest.ruleOpsUILabels[GmPXtTest.NOT_SELECTED]=GmPXtTest.label.opNoSelect,GmPXtTest.ruleOpsUILabels[GmPXtTest.CHECKED]=GmPXtTest.label.opChecked,GmPXtTest.ruleOpsUILabels[GmPXtTest.NOT_CHECKED]=GmPXtTest.label.opNoChecked,GmPXtTest.ruleOpsUILabels[GmPXtTest.DISABLED]=GmPXtTest.label.opDisabled,GmPXtTest.ruleOpsUILabels[GmPXtTest.NOT_DISABLED]=GmPXtTest.label.opNoDisable,GmPXtTest.ruleOpsUILabels[GmPXtTest.DAY_OF_WEEK]=GmPXtTest.label.opDayOfWeek,GmPXtTest.ruleOpsUILabels[GmPXtTest.FIX_TIME]=GmPXtTest.label.opFixTime,GmPXtTest.ruleOpsUILabels[GmPXtTest.DATE_RANGE]=GmPXtTest.label.opDateRange,GmPXtTest.ruleOpsUILabels[GmPXtTest.IS_VALID]=GmPXtTest.label.opIsValid,GmPXtTest.ruleOpsUILabels[GmPXtTest.VISIBLE]=GmPXtTest.label.opVisible,GmPXtTest.ruleOpsUILabels[GmPXtTest.NOT_VISIBLE]=GmPXtTest.label.opNotVisible},GmPXtTest.getAllLabels=function(t){return GmPXtTest.label=GmPXtTest.getPlayerLabels(t),GmPXtTest.FT.creatorApp&&(GmPXtTest.label=GmPXtTest.mergeLabels(GmPXtTest.label,GmPXtTest.getCreatorLabels(t))),"en_US"!==t&&"en-US"!==t&&(t=GmPXtTest.getEngLabels(),t=Object.assign({},t,GmPXtTest.label),GmPXtTest.label=t),GmPXtTest.setRuleOpsUILabels(),GmPXtTest.label},GmPXtTest.getEngLabels=function(){var t=GmPXtTest.getPlayerLabels("en_US");return t=GmPXtTest.FT.creatorApp?GmPXtTest.mergeLabels(t,GmPXtTest.getCreatorLabels("en_US")):t},GmPXtTest.checkForBranchVariationSteps=function(t){return!(!t||t.step_type!==GmPXtTest.STEP_TYPE_BRANCH&&t.step_type!==GmPXtTest.STEP_TYPE_ERROR_HANDLER&&!GmPXtTest.isTrue(t.step_settings&&t.step_settings.inlineBranch))},GmPXtTest.convertWeeksToHours=function(t){return 7*parseFloat(t)*24},GmPXtTest.getDatafromPanel=function(){return new Promise(function(e,t){function s(t){var t=GmPXtTest.parseJSON(t),t=GmPXtTest.convertMgdata(t);(t=t)&&"mgPlayerExtChromeTest_action:get_data_from_panel_response"===t.action&&(removeEventListener("message",s),e(t.data))}!0===GmPXtTest.isBackgroundPage?(chrome.runtime.onMessage.addListener(s),GmPXtTest.sendMessageToPanel("mgPlayerExtChromeTest_action:get_data_from_panel")):e(!1)})},GmPXtTest.startPageTracker=function(){if(GmPXtTest.pageVisit){if(GmPXtTest.pageVisit.url===GmPXtTest.urlParts.fullUrl)return void GmPXtTest.log(2,"Return on same page");GmPXtTest.trackerV1.trackPageVisit()}GmPXtTest.pageVisit={url:GmPXtTest.urlParts.fullUrl,timeStarted:(new Date).getTime(),userKey:GmPXtTest.user.user_key,pageLoadTime:GmPXtTest.pageLoadTime};var t=GmPXtTest.getDocTitle();t&&(GmPXtTest.pageVisit.title=t.trim()),GmPXtTest.log(2,"Start new page",GmPXtTest.pageVisit)},GmPXtTest.tooltipTrackingList={},GmPXtTest.setTooltipRenderInfo=function(t,e,s,n,r){var a="step_"+s,s={tooltip_id:s,tooltip_type:GmPXtTest.getTooltipName(n.type),rendered:!0,action_type:"",tooltip_play_instances:[],play_instance_id:GmPXtTest.getUUID()};GmPXtTest.tooltipTrackingList[a]={track:!1,tourId:e,url:GmPXtTest.urlParts.fullUrl,ttDetails:s,startTime:(new Date).getTime(),screen_size:GmPXtTest.trackerV1.getScreenSize(),tour:t}},GmPXtTest.updateTooltipActionInfo=function(t,e,s,n){var r,a,o;window.self===window.top?(o=GmPXtTest.tooltipTrackingList[a="step_"+e].ttDetails,r=GmPXtTest.tooltipTrackingList[a].tour,"power_html"===o.tooltip_type?("cancel"===n&&0===o.action_type.length&&(o.action_type=["cancel"],GmPXtTest.tooltipTrackingList[a].track=!0),"submit"===n&&(o.action_type=["submit"],GmPXtTest.tooltipTrackingList[a].track=!0)):n&&(o.action_type=[n],GmPXtTest.tooltipTrackingList[a].track=!0),o.tooltip_play_instances=[],o.tooltip_play_instances.push({event_start_time:GmPXtTest.getCurrentTimeInMilSec(),event_end_time:GmPXtTest.getCurrentTimeInMilSec()}),r&&r.tour_settings.segment_groups&&(o.segment_details=GmPXtTest.getTourSegmentDetail(r)),GmPXtTest.trackerV1.trackTooltips(o)):(a={tourId:t,stepId:e,smartTip:s,actionName:n,tour:r},o="mgPlayerExtChromeTest_action:update_tooltip_action_info",GmPXtTest.isSidePanelApp?GmPXtTest.sendToParentWindow({action:o,data:a}):GmPXtTest.sendMessageToTheTopWindow(o,a))},GmPXtTest.resetTooltipTrackingInfo=function(){for(var t in GmPXtTest.tooltipTrackingList)GmPXtTest.tooltipTrackingList[t].track=!1},GmPXtTest.trackGuide=function(){GmPXtTest.log(33,"Track Guide Play"),GmPXtTest.trackerV1.trackGuidePlayEvent(),GmPXtTest.guidePlayTracker={},GmPXtTest.storage().set({guide_play_event:{}})},GmPXtTest.getSource=function(t){var e;switch(t){case"overlayTourPopup":e="push_notification";break;case"beaconTour":e="beacon";break;case"urlTour":e="url";break;case"task_list":e="task_list";break;default:e="panel"}return e},GmPXtTest.setGuidePlayTracker=function(t){var e="mi_guide_play",e=(GmPXtTest.playerI.automate&&"bot"!==GmPXtTest.playerI.source?e="mi_do_it_for_me":"bot"===GmPXtTest.playerI.source&&(e="mi_bot_play"),{trigger_source:GmPXtTest.getSource(GmPXtTest.playerI.origin),play_instance_id:GmPXtTest.getUUID(),is_new_user:!1,event_start_time:(new Date).getTime(),event_end_time:"",url:GmPXtTest.urlParts.fullUrl,steps_details:[],mode:e});e.guide_id=t,e.guide_complete=0,e.guide_open=GmPXtTest.playerI.guideOpened?1:0,GmPXtTest.playerI&&GmPXtTest.playerI.taskObj&&GmPXtTest.playerI.taskObj.taskId&&(e.task_list_id=GmPXtTest.playerI.taskObj.taskId),GmPXtTest.playerI&&GmPXtTest.playerI.tour.tour_settings.segment_groups&&(e.segment_details=GmPXtTest.getTourSegmentDetail(GmPXtTest.playerI.tour)),GmPXtTest.guidePlayTracker["tour:"+t]=e},GmPXtTest.isStepExists=function(s,t){var n;return t.forEach(function(t,e){parseInt(t.step_id)===parseInt(s)&&(n=e)}),n},GmPXtTest.trackStepEvent=function(t,e){GmPXtTest.guidePlayTracker["tour:"+t.tour_id]||GmPXtTest.setGuidePlayTracker(t.tour_id);var s=GmPXtTest.guidePlayTracker["tour:"+t.tour_id],n=GmPXtTest.isStepExists(t.step_id,s.steps_details),n=(0<=n&&s.steps_details.splice(n,1),s.steps_details.length&&(n=s.steps_details.length,s.steps_details[n-1].event_end_time=(new Date).getTime()),{step_id:t.step_id,step_index:parseInt(t.step_order),step_title:t.step_title,event_start_time:(new Date).getTime(),event_end_time:(new Date).getTime(),page_url:GmPXtTest.urlParts.fullUrl,error_type:e||"",audio_muted:GmPXtTest.stepAudioRunningStatus?0:1});"mi_do_it_for_me"===s.mode&&(t.step_settings.automation.hasHumanInteraction?n.requires_human_intervention=1:n.requires_human_intervention=0,n.step_skipped=0),"mi_bot_play"===s.mode&&t.step_settings.automation.enableBot&&t.step_settings.automation.botQuestion&&(n.requires_human_intervention=1,n.step_skipped=0,n.defaultData&&!GmPXtTest.isEmpty(n.defaultData)?n.isAnswered=1:n.isAnswered=0,n.botQuestion=t.step_settings.automation.botQuestion),GmPXtTest.guidePlayTracker["tour:"+t.tour_id].steps_details.push(n),GmPXtTest.storage().set({guide_play_event:GmPXtTest.guidePlayTracker})},GmPXtTest.updateAudioStatusForTracking=function(){if(!GmPXtTest.isEmpty(GmPXtTest.playerI))for(var t=GmPXtTest.guidePlayTracker["tour:"+GmPXtTest.playerI.tour.tour_id].steps_details,e=0;e<t.length;e++){var s=t[e];s.step_id===GmPXtTest.playerI.currentStepId&&(s.audio_muted=GmPXtTest.stepAudioRunningStatus?0:1)}},GmPXtTest.checkSkipStepForTracking=function(){var t,e,s;GmPXtTest.isEmpty(GmPXtTest.playerI)||(t=GmPXtTest.playerI.currentStepId,e=GmPXtTest.playerI.tour.tour_id,s=-1,0<=(s=(e=GmPXtTest.guidePlayTracker["tour:"+e])?GmPXtTest.isStepExists(t,e.steps_details):s)&&(e.steps_details[s].step_skipped=1))},GmPXtTest.getTourSegments=function(t){return t.tour_settings.valid_segments||t.tour_settings.segment_groups.filter(function(t){return GmPXtTest.validatedSegments[t]})},GmPXtTest.concatLinkGuideStepsForTracking=function(t,e,s,n){t=t.filter(function(t,e){return t.step_id!==s});e=[e,0].concat(n);return t.splice(e)},GmPXtTest.userActionEvents=function(t){var t=t.step_settings,e=!1;return e=t.clickNext||t.onRightClickNext||t.onKeyupNext||t.onChangeNext?!0:e},GmPXtTest.limitStepAttributes=function(t){for(var e=0;e<t.length;e++)t[e]={step_id:t[e].step_id,step_title:t[e].step_title,step_url:t[e].step_url,step_settings:{element:t[e].step_settings.element,highlightedArea:t[e].step_settings.highlightedArea}};return t},GmPXtTest.filterInlineSteps=function(t){return t.filter(function(t){return GmPXtTest.limitStepAttributes("inline"===t.step_type&&GmPXtTest.userActionEvents(t))})},GmPXtTest.isSvgTag=function(t){return"svg"===t||"use"===t||"path"===t||"g"===t},GmPXtTest.clickedElSelector=function(t,e){var s=GmPXtTest.getAttributeValues(t);if(e.attributes=[],!GmPXtTest.isEmpty(s))for(var n in s){s[n];switch(n){case"text":e.isRoot&&(e.text=s.text||t.value.trim());break;case"class":var r=s.class.split(" ").filter(Boolean);e.class=r;break;case"id":e.id=s.id;break;case"tagName":e.tagName=s.tagName.toLowerCase();break;default:r={};r[n]=s[n],e.attributes.push(r)}}return e.index=mg$(t).index(),e},GmPXtTest.getDOMElementClicked=function(t){if(!t)return{};if(t=GmPXtTest.skipTags(t)){for(var e=t,s=["A","BUTTON","INPUT"];e.parentElement&&1===e.parentElement.childElementCount&&"BODY"!==e.tagName&&!s.includes(e.tagName)&&!(e.parentElement&&1<e.parentElement.childElementCount)&&e.parentElement;)t=e=e.parentElement;var n=GmPXtTest.clickedElSelector(t,{isRoot:!0}),r=n.text;if(n.isUniqueText=GmPXtTest.isUniqueText(t,r),GmPXtTest.selectorTool=GmPXtTest.selector({cb:null,frame:{}}),-1<n.index)return{element_object:n,element_label:r,element_step_obj:"",event_start_time:(new Date).getTime(),url:GmPXtTest.urlParts.fullUrl}}},GmPXtTest.isUniqueText=function(t,e){if(!e||300<e.length)return!1;e=e.replace(/\'/g,"\\'").replace(/\"/g,'\\"');try{var s=mg$(t.tagName+":contains('"+e+"')")}catch(t){return!1}return 1===(s=t.value&&t.value.trim()?s:GmPXtTest.filterParentNodes(s,e)).length},GmPXtTest.isVisibilityMutated=function(t){return!("style"!==t.attributeName||!t.oldValue||!t.oldValue.includes("display: none")&&!t.oldValue.includes("visibility: hidden"))||!("aria-expanded"!==t.attributeName||!t.oldValue||!t.oldValue.includes("false"))||!("aria-hidden"!==t.attributeName||!t.oldValue||!t.oldValue.includes("true"))},GmPXtTest.checkMutation=function(t,e){var s;if(t.length&&!GmPXtTest.mutationOccured)for(var n=t.length,r=0;r<n;r++){var a=t[r];"attributes"!==a.type||0===(s=a).attributeName.indexOf("gm")||("class"===s.attributeName?GmPXtTest.checkMyGuideClass(s.target.className)!==GmPXtTest.checkMyGuideClass(s.oldValue):"style"===s.attributeName&&GmPXtTest.checkMyGuideClass(s.target.className))?"childList"!==a.type||(s=a,GmPXtTest.hasMyGuideEl(s.removedNodes))||GmPXtTest.hasMyGuideEl(s.addedNodes)||(GmPXtTest.mutationOccured=!0):(GmPXtTest.isVisibilityMutated(a)&&(GmPXtTest.mutationOccured=!0),a.oldValue!==a.target.getAttribute(a.attributeName)&&(GmPXtTest.mutationOccured=!0))}},GmPXtTest.isInputElement=function(t){return!!["INPUT","SELECT","TEXTAREA"].includes(t.tagName)},GmPXtTest.mutationObserver=function(t){GmPXtTest.getDOMElementClicked(t);GmPXtTest.mutationOccured=!1;var e,s=document.body;1===s.nodeType&&((e=new MutationObserver(GmPXtTest.checkMutation)).observe(s,{attributes:!0,characterData:!0,childList:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),s=20,window.top!==window.self&&(s=1e3),GmPXtTest.timeout(function(){e.disconnect(),(GmPXtTest.mutationOccured||GmPXtTest.isInputElement(t))&&GmPXtTest.isGmElement(mg$(t))},s))},GmPXtTest.userApiKeySignin=function(t){var e=t.myGuideOrgKey;delete t.myGuideOrgKey;e={url:"user/sso/login?mg_source_name="+GmPXtTest.conf.appConfig.customer,method:"POST",headers:{"Content-Type":"application/json",Authorization:e},data:JSON.stringify(t)};return GmPXtTest.xhr(e)},GmPXtTest.getAnonymousUserPrefrence=function(t,e){e={url:"user/preference",method:"POST",headers:{"Content-Type":"application/json",AccessToken:e},data:JSON.stringify(t)};return GmPXtTest.xhr(e)},GmPXtTest.setAnonymousUserPrefrence=function(t){t={url:"user/preference",method:"PUT",headers:{"Content-Type":"application/json",AccessToken:GmPXtTest.user.accesstoken},data:JSON.stringify(t)};return GmPXtTest.xhr(t)},GmPXtTest.apiGetHandOffToken=function(){var t={url:"accounts/v1/handoff-token/generate/",method:"GET",headers:{"Content-Type":"application/json",AccessToken:GmPXtTest.user.accesstoken,AppKey:GmPXtTest.conf.apiSecrret,RefreshToken:GmPXtTest.user.refreshtoken},data:""};return GmPXtTest.xhrAnalytics(t)},GmPXtTest.apiRegisterClientInsight=function(){var t={url:"event/v1/client/register/?org_id="+GmPXtTest.organization.organization_id,method:"POST",headers:{"Content-Type":"application/json",AccessToken:GmPXtTest.user.accesstoken,AppKey:GmPXtTest.conf.apiSecrret},data:""};return GmPXtTest.xhrAnalytics(t,!0)},GmPXtTest.apiGetClientSecretInsight=function(t){t={url:"event/v1/client/secret/?org_id="+GmPXtTest.organization.organization_id,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({app_client_id:t})};return GmPXtTest.xhrAnalytics(t,!0)},GmPXtTest.apiTrackEventV3=function(t){t={url:"v3/push_events/",method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};return GmPXtTest.xhrAnalytics(t)},GmPXtTest.apiTrackEventV1=function(t){t={url:"event/v1/push/?org_id="+t.payload[0].org_id+"&app_code="+t.payload[0].app_code+"&event_type="+t.payload[0].event_type,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};return GmPXtTest.xhrAnalytics(t)},GmPXtTest.apitrackSentiment=function(t){t={url:"register/v1/sentiment/report/",method:"POST",headers:{"Content-Type":"application/json",accesstoken:GmPXtTest.user.accesstoken,appkey:GmPXtTest.conf.apiSecrret},data:JSON.stringify(t)};return GmPXtTest.xhrAnalytics(t)},GmPXtTest.apitrackConversation=function(t){t={url:"register/v1/conversation/report/",method:"POST",headers:{"Content-Type":"application/json",accesstoken:GmPXtTest.user.accesstoken,appkey:GmPXtTest.conf.apiSecrret},data:JSON.stringify(t)};return GmPXtTest.xhrAnalytics(t)},GmPXtTest.apiUpdateSentiment=function(t){t={url:"sentiments/v1/questionaire/",method:"PUT",headers:{"Content-Type":"application/json",accesstoken:GmPXtTest.user.accesstoken,key:GmPXtTest.trackerUtil.clientKey,appkey:GmPXtTest.conf.apiSecrret},data:JSON.stringify(t)};return GmPXtTest.xhrAnalytics(t)},GmPXtTest.apiDeleteSentiment=function(t){t={url:t.app_code?"sentiments/v1/questionaire/?app_code="+t.app_code+"&sentiment_code="+t.sentiment_code+"&time_zone=utc+0530":"sentiments/v1/questionaire/?sentiment_code="+t.sentiment_code+"&time_zone=utc+0530",method:"DELETE",headers:{"Content-Type":"application/json",accesstoken:GmPXtTest.user.accesstoken,appkey:GmPXtTest.conf.apiSecrret},data:""};return GmPXtTest.xhrAnalytics(t)},GmPXtTest.apiGetSentiment=function(t){t={url:t.app_code?"sentiments/v1/questionaire/?app_code="+t.app_code+"&sentiment_code="+t.sentiment_code+"&time_zone=utc+0530":"sentiments/v1/questionaire/?sentiment_code="+t.sentiment_code+"&time_zone=utc+0530",method:"GET",headers:{"Content-Type":"application/json",accesstoken:GmPXtTest.user.accesstoken,appkey:GmPXtTest.conf.apiSecrret},data:""};return GmPXtTest.xhrAnalytics(t)},GmPXtTest.apiGetBotConv=function(t){t={url:t.app_code?"conversations/v1/questionaire/?app_code="+t.app_code+"&conversation_code="+t.conversation_code+"&time_zone=utc+0530":"conversations/v1/questionaire/?conversation_code="+t.conversation_code+"&time_zone=utc+0530",method:"GET",headers:{"Content-Type":"application/json",accesstoken:GmPXtTest.user.accesstoken,appkey:GmPXtTest.conf.apiSecrret},data:""};return GmPXtTest.xhrAnalytics(t)},GmPXtTest.apiGetSentiments=function(t){t={url:t.app_code?"sentiments/v1/list/?app_code="+t.app_code+"&sort_by=sentiment_title&order=asc&page_index="+t.pageIndex+"&page_size="+t.pageSize:"sentiments/v1/list/?sort_by=sentiment_title&order=asc&page_index="+t.pageIndex+"&page_size="+t.pageSize,method:"GET",headers:{"Content-Type":"application/json",accesstoken:GmPXtTest.user.accesstoken,appkey:GmPXtTest.conf.apiSecrret},data:""};return GmPXtTest.xhrAnalytics(t)},GmPXtTest.apiGetBotConvList=function(t){t={url:t.app_code?"conversations/v1/list/?app_code="+t.app_code+"&sort_by=conversation_title&order=asc&page_index="+t.pageIndex+"&page_size="+t.pageSize:"conversations/v1/list/?sort_by=conversation_title&order=asc&page_index="+t.pageIndex+"&page_size="+t.pageSize,method:"GET",headers:{"Content-Type":"application/json",accesstoken:GmPXtTest.user.accesstoken,appkey:GmPXtTest.conf.apiSecrret},data:""};return GmPXtTest.xhrAnalytics(t)},GmPXtTest.apiPostSurvey=function(t,e){e={url:"v3/survey/questionnaire/"+t.guide_id+"/",method:"POST",headers:{"Content-Type":"application/json",accesstoken:e.accesstoken,key:GmPXtTest.trackerUtil.clientKey,appkey:GmPXtTest.conf.apiSecrret},data:JSON.stringify(t)};return GmPXtTest.xhrAnalytics(e)},GmPXtTest.apiPostSentiment=function(t){t={url:"sentiments/v1/questionaire/",method:"POST",headers:{"Content-Type":"application/json",accesstoken:GmPXtTest.user.accesstoken,key:GmPXtTest.trackerUtil.clientKey,appkey:GmPXtTest.conf.apiSecrret},data:JSON.stringify(t)};return GmPXtTest.xhrAnalytics(t)},GmPXtTest.apiUpdateUserProfile=function(t){t.settings=JSON.stringify(t.settings);t={url:"user",method:"PUT",data:JSON.stringify(t)};return GmPXtTest.xhr(t)},GmPXtTest.apiUpdateUserGuidevView=function(t){t={guide_view:JSON.stringify(t)},t={url:"user/guide_view",method:"PUT",data:JSON.stringify(t)};return GmPXtTest.xhr(t)},GmPXtTest.logoutUser=function(){GmPXtTest.msgToApp("mgPlayerExtChromeTest_action:to_signin_page",{},senderTabId)},GmPXtTest.loginFromConsole=function(t,e){GmPXtTest.isBackgroundPage||GmPXtTest.msgToApp("mgPlayerExtChromeTest_action:signin_from_console",{email:t,password:e},senderTabId)},GmPXtTest.saveMyBotReport=function(t){t={url:"register/v1/mybot/report/",method:"POST",headers:{"Content-Type":"application/json",AccessToken:GmPXtTest.user.accesstoken,appkey:GmPXtTest.conf.apiSecrret},data:JSON.stringify(t)};return GmPXtTest.xhrAnalytics(t)},GmPXtTest.getElementsDetailInsights=function(t){t={url:"tracker/v1/element/metedata/contextual/?app_code="+t+"&url="+GmPXtTest.urlParts.host,method:"GET",headers:{"Content-Type":"application/json",AccessToken:GmPXtTest.user.accesstoken,appkey:GmPXtTest.conf.apiSecrret}};return GmPXtTest.xhrAnalytics(t)},GmPXtTest.createNewElTrackObject=function(t){t={url:"tracker/v1/element/metedata/",method:"POST",headers:{"Content-Type":"application/json",AccessToken:GmPXtTest.user.accesstoken,appkey:GmPXtTest.conf.apiSecrret},data:JSON.stringify(t)};return GmPXtTest.xhrAnalytics(t)},GmPXtTest.updateElTrackObject=function(t){t={url:"tracker/v1/element/metedata/",method:"PUT",headers:{"Content-Type":"application/json",AccessToken:GmPXtTest.user.accesstoken,appkey:GmPXtTest.conf.apiSecrret},data:JSON.stringify(t)};return GmPXtTest.xhrAnalytics(t)},GmPXtTest.apiGetSegmentGroupList=function(t){t={url:"segment/group/list?organization_id="+t.organization_id,method:"GET",headers:{"Content-Type":"application/json"},data:""};return GmPXtTest.xhr(t)},GmPXtTest.apiPostSegmentGroupList=function(t){t={url:"segment/group",method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};return GmPXtTest.xhr(t)},GmPXtTest.apiPutSegmentGroupList=function(t){t={url:"segment/group",method:"PUT",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};return GmPXtTest.xhr(t)},GmPXtTest.apiDeleteSegmentGroupList=function(t){t={url:"segment/group",method:"DELETE",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};return GmPXtTest.xhr(t)},GmPXtTest.callGetCdnSignature=function(t){t={url:"organization/signature?",method:"GET",headers:{"Content-Type":"application/json"},data:GmPXtTest.encode(t)};return GmPXtTest.xhr(t)},GmPXtTest.sendFeedbackEmail=function(t){t={url:"organization/feedback",method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};return GmPXtTest.xhr(t)},GmPXtTest.getSearchURL=function(t,e){var e=new URLSearchParams(e),s=e.toString();return s.length&&-1===s.indexOf("?")&&-1===t.indexOf("?")&&(e="?"+e.toString()),t+=e},GmPXtTest.xhr=function(c,T,l){return new Promise(function(s,n){function r(){!0===GmPXtTest.isBackgroundPage?GmPXtTest.sendMessageToPanel("mgPlayerExtChromeTest_action:maintenance"):GmPXtTest.sendMessageToApp("mgPlayerExtChromeTest_action:maintenance")}var t="",e={"x-mg-host":t=GmPXtTest.isEmpty(GmPXtTest.urlParts)?t:GmPXtTest.urlParts.host,"x-mg-source":GmPXtTest.conf.appName,"x-mg-orgId":""},a=function(t){var e;console.log(t),t?(t.url=c.url,t.paramsData=c.data,t.method=c.method,1003==(e=t.code)||2004===e||2036===e&&(0<t.url.indexOf("user/signout")||0<t.url.indexOf("user/token"))?(GmPXtTest.isBackgroundPage&&(GmPXtTest.createStepJobs=[]),GmPXtTest.logoutUser(),n(t)):1007==e?GmPXtTest.getAccessToken().then(function(t){GmPXtTest.saveToken(t),c.headers.AccessToken=GmPXtTest.user.accesstoken,ajax()}).catch(function(){GmPXtTest.logoutUser()}):(1014===e&&r(),n(t))):n()},o=function(t){var e;t.code=parseInt(t.code),T?s(t):(e=t.code,!1===t.error?(c.url&&-1!==c.url.indexOf("user/token")&&(t=GmPXtTest.validateDataModel(t.data,GmPXtTest.model.userToken)),c.onSuccess&&c.onSuccess(t),s(t)):1005===e||1018===e?s(t):1014===e?(r(),n(t)):1003==e||2004==e||2036===e&&(0<c.url.indexOf("user/signout")||0<c.url.indexOf("user/token"))?(GmPXtTest.isBackgroundPage&&(GmPXtTest.createStepJobs=[]),GmPXtTest.logoutUser(),n(t)):1007==e?GmPXtTest.getAccessToken().then(function(t){GmPXtTest.saveToken(t),c.headers.AccessToken=GmPXtTest.user.accesstoken,i()}).catch(function(){GmPXtTest.logoutUser()}):n(t))};function i(){for(var t in c.headers)c.headers.hasOwnProperty(t)&&(e[t]=c.headers[t]);GmPXtTest.user&&GmPXtTest.organization?(e.appType=GmPXtTest.conf.appType,e.orgId=GmPXtTest.organization.organization_id,e["x-mg-orgId"]=GmPXtTest.organization.organization_id,e.AccessToken=GmPXtTest.user.accesstoken,m()):GmPXtTest.getDatafromPanel().then(function(t){GmPXtTest.user=t.user,GmPXtTest.organization=t.organization,GmPXtTest.user&&(e.appType=GmPXtTest.conf.appType,e.orgId=GmPXtTest.organization.organization_id,e.AccessToken=GmPXtTest.user.accesstoken,e["x-mg-orgId"]=GmPXtTest.organization.organization_id),m()}).catch(function(t){console.log("Error while fetching user data",t)})}function m(){var t=GmPXtTest.conf.webServiceUrl+""+c.url;T&&(t=c.url),("GET"===c.method?fetch(GmPXtTest.getSearchURL(t,c.data),{headers:e,method:c.method}).then(function(t){T&&!l?(200===t.status?s:n)():t.json().then(o).catch(a)}):fetch(t,{headers:e,method:c.method,body:c.data}).then(function(t){t.json().then(o).catch(a)})).catch(a)}i()})},GmPXtTest.getDetailTour=function(r){return new Promise(function(e,t){var s={url:"tour",method:"GET",headers:{"Content-Type":"application/json"},data:GmPXtTest.encode(r)};function n(t){t=GmPXtTest.migrateTour(t),e(t)}GmPXtTest.xhr(s).then(function(t){t&&t.data?GmPXtTest.validateApiResp(n,"tour",t.data.tour,GmPXtTest.model.guide):e()})})},GmPXtTest.xhrAnalytics=function(i,m){return new Promise(function(e,s){function n(){GmPXtTest.getAccessToken().then(function(t){GmPXtTest.saveToken(t=t||{}),i.headers.accesstoken=GmPXtTest.user.accesstoken,o()}).catch(function(){GmPXtTest.logoutUser()})}function r(t){"success"===(t=GmPXtTest.parseJSON(t)).status?(t.data.event_chain_id&&(m?GmPXtTest.INSIGHTS_EVENT_CHAIN_ID=t.data.event_chain_id:GmPXtTest.ANALYTICS_EVENT_CHAIN_ID=t.data.event_chain_id),e(t)):!GmPXtTest.isEmpty(t)&&GmPXtTest.isDefined(t.status)&&"error"===t.status&&"Access token expired."===t.description?n():s(t)}function a(t){var e;console.log(t),t.responseJSON?"Access token expired."==t.responseJSON.description?n():((e=t.responseJSON).apiUrl=i.url,s(e)):s(e)}function o(){url=GmPXtTest.conf.analyticsPath+""+i.url,"GET"===i.method?fetch(GmPXtTest.getSearchURL(url,i.data),{headers:i.headers,method:i.method}).then(function(t){t.json().then(function(t){r(t)}).catch(a)}):fetch(url,{headers:i.headers,method:i.method,body:i.data}).then(function(t){t.json().then(r).catch(a)})}var t=GmPXtTest.organization;(!GmPXtTest.isEmpty(GmPXtTest.conf.analyticsPath)&&(t&&t.admin_settings.insights.enabled||-1!=i.url.indexOf("handoff-token")||GmPXtTest.isLogoutTrackApi)?o:s)()})},GmPXtTest.guideMeApiProvider=function(){var t={getUser:function(t){t={url:"user",method:"GET",headers:{"Content-Type":"application/json"},data:GmPXtTest.encode(t)};return GmPXtTest.xhr(t)},getOrganization:function(t){t={url:"organization",method:"GET",headers:{"Content-Type":"application/json"},data:GmPXtTest.encode(t)};return GmPXtTest.xhr(t)},getOrgSettings:function(t){t={url:"organization",method:"GET",headers:{"Content-Type":"application/json"},data:GmPXtTest.encode(t)};return GmPXtTest.xhr(t)},getTours:function(t){t={url:"tour/list",method:"GET",headers:{"Content-Type":"application/json"},data:GmPXtTest.encode(t)};return GmPXtTest.xhr(t)},getVideoUploadUrl:function(t){t.organization_id=GmPXtTest.organization.organization_id;t={url:"file/upload/url?",method:"GET",headers:{},data:GmPXtTest.encode(t)};return GmPXtTest.xhr(t)},getVideoUploadUrl_IBM:function(t){t.organization_id=GmPXtTest.organization.organization_id;t={url:"file/presigned/upload/url?",method:"GET",headers:{},data:GmPXtTest.encode(t)};return GmPXtTest.xhr(t)},videoUploadStatus:function(t){t.organization_id=GmPXtTest.organization.organization_id;t={url:"file/upload/status",method:"POST",headers:{},data:JSON.stringify(t)};return GmPXtTest.xhr(t)},getVideoLocator:function(t){t.organization_id=GmPXtTest.organization.organization_id;t={url:"file/upload/status",method:"GET",headers:{},data:GmPXtTest.encode(t)};return GmPXtTest.xhr(t)},uploadFTPFile:function(t,e,s){return t.organization_id=GmPXtTest.organization.organization_id,GmPXtTest.xhr({url:"file/upload/ftp",method:"POST",serviceType:"",data:t,fileInput:!0,onSuccess:e,onFail:s})},createStep:function(t){t={url:"step",method:"POST",headers:{},data:JSON.stringify(t.args)};return GmPXtTest.xhr(t)},deleteStep:function(t){t={url:"step",method:"DELETE",data:JSON.stringify(t)};return GmPXtTest.xhr(t)},updateTour:function(t){t={url:"tour",method:"PUT",headers:{},data:JSON.stringify(t)};return GmPXtTest.xhr(t)},updateStep:function(t){t={url:"step",method:"PUT",headers:{},data:JSON.stringify(t.args)};return GmPXtTest.xhr(t)},updateStepLang:function(t){t={url:"step/language/update",method:"PUT",headers:{},data:JSON.stringify(t.args)};return GmPXtTest.xhr(t)},uploadFileBase64:function(t){t={url:"file/base64image",method:"POST",headers:{},data:t.args};return GmPXtTest.xhr(t)},uploadBase64Image:function(t){t={url:"file/upload/base64image",method:"POST",headers:{},data:t.args};return GmPXtTest.xhr(t)},uploadFile:function(t){t.args.append("organization_id",GmPXtTest.organization.organization_id);t={url:"file/image",method:"POST",headers:{},data:t.args};return GmPXtTest.xhr(t)},uploadAudio:function(t){t={url:"file/audio",method:"POST",headers:{},data:t.args};return GmPXtTest.xhr(t)},getAudio:function(t){t={url:"file/audio",method:"GET",data:GmPXtTest.encode(t.args)};return GmPXtTest.xhr(t)},updateSurvey:function(t,e){e={url:"v3/survey/questionnaire/"+t.guide_id+"/",method:"PUT",headers:{"Content-Type":"application/json",accesstoken:e.accesstoken,key:GmPXtTest.trackerUtil.clientKey,appkey:GmPXtTest.conf.apiSecrret},data:JSON.stringify(t)};return GmPXtTest.xhrAnalytics(e)}};return t.updateUserProfile=GmPXtTest.apiUpdateUserProfile,t.getHandOffToken=GmPXtTest.apiGetHandOffToken,t.getSentiments=GmPXtTest.apiGetSentiments,t.getBotConvList=GmPXtTest.apiGetBotConvList,t.updateSentiment=GmPXtTest.apiUpdateSentiment,t.postSentiment=GmPXtTest.apiPostSentiment,t.deleteSentiment=GmPXtTest.apiDeleteSentiment,t.getSentiment=GmPXtTest.apiGetSentiment,t.getGetBotConv=GmPXtTest.apiGetBotConv,t.postSurvey=GmPXtTest.apiPostSurvey,t.getSegmentGroupList=GmPXtTest.apiGetSegmentGroupList,t.postSegmentGroupList=GmPXtTest.apiPostSegmentGroupList,t.putSegmentGroupList=GmPXtTest.apiPutSegmentGroupList,t.deleteSegmentGroupList=GmPXtTest.apiDeleteSegmentGroupList,t.userApiKeySignin=GmPXtTest.userApiKeySignin,t.registerClientInsight=GmPXtTest.apiRegisterClientInsight,t.getClientSecretInsight=GmPXtTest.apiGetClientSecretInsight,t.trackEventV1=GmPXtTest.apiTrackEventV1,t.trackEventV3=GmPXtTest.apiTrackEventV3,t.saveMyBotReport=GmPXtTest.saveMyBotReport,t.getOneTimeTokenInsights=GmPXtTest.getOneTimeTokenInsights,t.trackSentiment=GmPXtTest.apitrackSentiment,t.trackConversation=GmPXtTest.apitrackConversation,t.createNewElTrackObject=GmPXtTest.createNewElTrackObject,t.getElementsDetailInsights=GmPXtTest.getElementsDetailInsights,t.updateElTrackObject=GmPXtTest.updateElTrackObject,t.getCdnSignature=GmPXtTest.callGetCdnSignature,t.getTour=GmPXtTest.getDetailTour,t.sendFeedbackEmail=GmPXtTest.sendFeedbackEmail,t.getAnonymousUserPrefrence=GmPXtTest.getAnonymousUserPrefrence,t.setAnonymousUserPrefrence=GmPXtTest.setAnonymousUserPrefrence,t},"GuideMe"===GmPXtTest.conf.provider&&(GmPXtTest.api=GmPXtTest.guideMeApiProvider()),GmPXtTest.apiPlayerProvider=function(){var t={};return t.updateUserProfile=GmPXtTest.updateUserProfile,t.getSentiments=GmPXtTest.apiGetSentiments,t.getBotConvList=GmPXtTest.apiGetBotConvList,t.getSentiment=GmPXtTest.apiGetSentiment,t.getGetBotConv=GmPXtTest.apiGetBotConv,t.postSurvey=GmPXtTest.apiPostSurvey,t.getSegmentGroupList=GmPXtTest.apiGetSegmentGroupList,t.postSegmentGroupList=GmPXtTest.apiPostSegmentGroupList,t.putSegmentGroupList=GmPXtTest.apiPutSegmentGroupList,t.deleteSegmentGroupList=GmPXtTest.apiDeleteSegmentGroupList,t.userApiKeySignin=GmPXtTest.userApiKeySignin,t.registerClientInsight=GmPXtTest.apiRegisterClientInsight,t.getClientSecretInsight=GmPXtTest.apiGetClientSecretInsight,t.trackEventV1=GmPXtTest.apiTrackEventV1,t.trackEventV3=GmPXtTest.apiTrackEventV3,t.saveMyBotReport=GmPXtTest.saveMyBotReport,t.trackSentiment=GmPXtTest.apitrackSentiment,t.trackConversation=GmPXtTest.apitrackConversation,t.createNewElTrackObject=GmPXtTest.createNewElTrackObject,t.getElementsDetailInsights=GmPXtTest.getElementsDetailInsights,t.getHandOffToken=GmPXtTest.apiGetHandOffToken,t.updateElTrackObject=GmPXtTest.updateElTrackObject,t.getCdnSignature=GmPXtTest.callGetCdnSignature,t.getTour=GmPXtTest.getDetailTour,t.sendFeedbackEmail=GmPXtTest.sendFeedbackEmail,t.getAnonymousUserPrefrence=GmPXtTest.getAnonymousUserPrefrence,t.setAnonymousUserPrefrence=GmPXtTest.setAnonymousUserPrefrence,t},GmPXtTest.inPlayer&&(GmPXtTest.api=GmPXtTest.apiPlayerProvider()),GmPXtTest.isBackgroundPage=!0,GmPXtTest.refreshTime=null,GmPXtTest.lastTimeStampSync=null,chrome.runtime.onMessage.addListener(function(t,e,s){if(e.tab&&t){t=GmPXtTest.parseJSON(t),t=GmPXtTest.convertMgdata(t),senderTabId=e.tab.id;var n=!1;switch(t.action){case"mgPlayerExtChromeTest_action:mybot_results":GmPXtTest.trackerV1.trackMyBotEvents(t.data.p);break;case"mgPlayerExtChromeTest_action:update_secrets":GmPXtTest.trackerUtil.secrets=t.data.secrets,GmPXtTest.storage().set({tracker_secrets:JSON.stringify(GmPXtTest.trackerUtil.secrets)});break;case"mgPlayerExtChromeTest_action:update_tracking_info":GmPXtTest.trackerUtil.enableTracking=t.data.enableTracking,GmPXtTest.trackerUtil.trackPI=t.data.trackPI,GmPXtTest.trackerUtil.featureTracking=t.data.featureTracking,GmPXtTest.trackerUtil.pageTracking=t.data.pageTracking;break;case"mgPlayerExtChromeTest_action:app_info_to_background":GmPXtTest.externalAppId=t.data.externalAppId,GmPXtTest.activeAppId=t.data.activeAppId;break;case"mgPlayerExtChromeTest_action:get_current_tab_id":s(e.tab.id);break;case"mgPlayerExtChromeTest_action:save_user_info":GmPXtTest.updateGlobalUser(t.data);break;case"mgPlayerExtChromeTest_action:save_org":GmPXtTest.updateGlobalOrg(t.data);break;case"mgPlayerExtChromeTest_action:update_debug_mode":GmPXtTest.debugMode=t.data.debugMode,console.log("Logs enabled: "+GmPXtTest.debugMode);break;case"mgPlayerExtChromeTest_action:on_side_panel_init":GmPXtTest.updateGlobalUser(t.data.user),GmPXtTest.updateGlobalOrg(t.data.organization),GmPXtTest.refreshTime=t.data.refreshTime,GmPXtTest.lastTimeStampSync=t.data.lastTimeStampSync,GmPXtTest.creatorRefreshTime=GmPXtTest.getCurrentTimeInSec(),GmPXtTest.onPremJSONUrl=t.data.onPremUrl,GmPXtTest.trackerUtil.page_url=t.data.url;break;case"mgPlayerExtChromeTest_action:update_access_token":case"mgPlayerExtChromeTest_action:update_cdn_signature":GmPXtTest.updateGlobalUser(t.data.user);break;case"mgPlayerExtChromeTest_action:to_background;task:disable_browser_action_popup":GmPXtTest.requestHandler.disableBrowserActionPopUp(e.tab);break;case"mgPlayerExtChromeTest_action:to_background;task:show_cookie_disabled_popup":GmPXtTest.requestHandler.showCookiePopUp(e.tab);break;case"mgPlayerExtChromeTest_action:to_background;task:show_panel_disabled_popup":GmPXtTest.requestHandler.showPanelPopUp(e.tab);break;case"mgPlayerExtChromeTest_action:stop_sync_interval":GmPXtTest.requestHandler.onLogout(t.hadUser);break;case"mgPlayerExtChromeTest_action:sync_user":GmPXtTest.requestHandler.initGlobals(t.data);break;case"mgPlayerExtChromeTest_action:capture_browser_screen":n=!0,chrome.tabs.captureVisibleTab(null,{format:"png",quality:100},function(t){s({imgSrc:t})});break;case"mgPlayerExtChromeTest_action:record_user_activity":GmPXtTest.organization||GmPXtTest.updateGlobalOrg(t.data.organization),GmPXtTest.user||GmPXtTest.updateGlobalUser(t.data.user),GmPXtTest.processLastActionTime(GmPXtTest.onPremJSONUrl);break;case"mgPlayerExtChromeTest_action:update_player_sync_time":GmPXtTest.refreshTime=t.data.refreshTime,GmPXtTest.lastTimeStampSync=t.data.lastTimeStampSync;var r=new Date(1e3*GmPXtTest.refreshTime);GmPXtTest.log(70,"LAST REFRESH: "+r)}return GmPXtTest.isPlayer()&&!n&&s(),!0}}),void 0===GmPXtTest.requestHandler&&(GmPXtTest.requestHandler={}),"firefox"!==GmPXtTest.browserApp?(chrome.action.onClicked.addListener(function(){chrome.tabs.query({active:!0,currentWindow:!0},function(t){GmPXtTest.msgToTab(t[0].id,{action:"mgPlayerExtChromeTest_action:browser_action_icon_click"})})}),self.oninstall=function(){self.skipWaiting()}):chrome.browserAction.onClicked.addListener(function(){chrome.tabs.query({active:!0,currentWindow:!0},function(t){GmPXtTest.msgToTab(t[0].id,{action:"mgPlayerExtChromeTest_action:browser_action_icon_click"})})}),GmPXtTest.requestHandler.disableBrowserActionPopUp=function(t){""!=t.url&&("firefox"!==GmPXtTest.browserApp?chrome.action:chrome.browserAction).setPopup({tabId:t.id,popup:""})},GmPXtTest.requestHandler.showPanelPopUp=function(t){("firefox"!==GmPXtTest.browserApp?chrome.action:chrome.browserAction).setPopup({tabId:t.id,popup:"/browser_action/popup.html"})},GmPXtTest.requestHandler.showCookiePopUp=function(t){""!=t.url&&("firefox"!==GmPXtTest.browserApp?chrome.action:chrome.browserAction).setPopup({tabId:t.id,popup:"/browser_action/popup_cookie.html"})},GmPXtTest.requestHandler.onLogout=function(t){clearInterval(GmPXtTest.creatorInterval),t&&(GmPXtTest.trackerV1.sendEvents(!0),GmPXtTest.user=!1,GmPXtTest.organization=!1,GmPXtTest.activeAppId=!1,GmPXtTest.sendMessageToTabs({action:"mgPlayerExtChromeTest_action:user_logged_out"}))},GmPXtTest.requestHandler.initGlobals=function(t){t.user&&(GmPXtTest.updateGlobalUser(t.user),GmPXtTest.isEnt()?GmPXtTest.FT=GmPXtTest.getCreatorAppFeatures():GmPXtTest.FT=GmPXtTest.getPlayerFeatures())},GmPXtTest.AUTOMATION_SUITE_PLAY="mi_suite_play",GmPXtTest.lastTrakerSync=0,GmPXtTest.trackerV1={setUrl:function(t){GmPXtTest.urlParts.fullUrl=t},getScreenSize:function(){var t=window.screen;return{width:t&&t.width?t.width:"",height:t&&t.height?t.height:""}},v1Payload:function(t,e,s,n,r){var a=t.objectId;return"number"==typeof a&&(a=a.toString()),{user_id:n.user_id,org_id:n.organization_id,app_code:t.app_code,client_code:GmPXtTest.conf.appName+"_v"+GmPXtTest.conf.version,role_id:"",entity_code:a,event_time:r,event_type:t.eventName,url:s,user_agent:GmPXtTest.browserApp||"chrome",screen_size:t.screen_size,miscellaneous:t.miscellaneous}},track:function(e){function s(t){t&&t.registerClientId?(t={app_client_id:(GmPXtTest.trackerUtil.secrets=t).registerClientId,payload:[],signature:""},e.length&&(t.payload=e,GmPXtTest.trackerV1.sendPayload(t))):(t="mgPlayerExtChromeTest_action:update_registration_secret",GmPXtTest.isBackgroundPage?GmPXtTest.sendMessageToPanel(t):GmPXtTest.sendMessageToApp(t),GmPXtTest.log(45,"Secret keys are not present. Unable to track events"))}GmPXtTest.log(38,"Fn. Track"),GmPXtTest.onPrem()||(GmPXtTest.user?GmPXtTest.trackerUtil.secrets?s(GmPXtTest.trackerUtil.secrets):GmPXtTest.storage().get(["tracker_secrets"]).then(function(t){t=t.tracker_secrets;s(t=t.registerClientId?t:GmPXtTest.parseJSON(t))}):(GmPXtTest.isBackgroundPage&&GmPXtTest.sendMessageToPanel("mgPlayerExtChromeTest_action:fetch_user"),GmPXtTest.log(45,"Events not Sent, User not found")))},sendClientVisit:function(){GmPXtTest.trackerV1.trackClientVisit(),GmPXtTest.clientVisitSync=GmPXtTest.getCurrentTimeInSec(),GmPXtTest.storage().set({clientVisitSync:JSON.stringify(GmPXtTest.clientVisitSync)})},sendPayload:function(e){GmPXtTest.log(38,"Fn. SendPayload");var t=GmPXtTest.trackerUtil.secrets,s=(new Date).getTime(),n=(e.event_chain_id=GmPXtTest.ANALYTICS_EVENT_CHAIN_ID,s);t&&t.track_client_timestamp&&(n=parseInt(t.track_client_timestamp)),parseInt((s-n)/1e3);t.track_client_timestamp=s,t.registerClientId&&("mi_mybot_run"===e.payload[0].event_type?(e.signature=md5(md5(JSON.stringify(e.payload))+t.app_client_secret).toString(),GmPXtTest.trackerV1.sendGuideAutomationEvent(e)):((n=e.payload.filter(function(t){return t&&"mi_sentiment_response"===t.event_type})).length&&n.forEach(function(t){GmPXtTest.trackerV1.apiTrackSentiment(t);t=e.payload.indexOf(t);-1!==t&&e.payload.splice(t,1)}),e.payload.length&&(e.signature=md5(md5(JSON.stringify(e.payload))+t.app_client_secret).toString(),GmPXtTest.log(45,"SENDING events",e.payload),GmPXtTest.trackerV1.apiV1(e))))},apiV1:function(e){return GmPXtTest.api.trackEventV1(e).then(function(t){GmPXtTest.log(45,"SENT events")}).catch(function(t){GmPXtTest.trackerV1.updateTooltipTrackInfo(e)})},apiTrackSentiment:function(e){GmPXtTest.api.trackSentiment(e).then(function(t){GmPXtTest.log(45,"SENT events")}).catch(function(t){GmPXtTest.log(45,"ERROR, events restored",e),GmPXtTest.trackerV1.sendPayloadEventCall(e)})},apiTrackConversation:function(e){GmPXtTest.api.trackConversation(e).then(function(t){GmPXtTest.log(45,"SENT events")}).catch(function(t){GmPXtTest.log(45,"ERROR, events restored",e),GmPXtTest.trackerV1.sendPayloadEventCall(e)})},updateTooltipTrackInfo:function(t){t.payload.forEach(function(t){t&&"mi_tooltip_shown"===t.event_type&&(sid="step_"+t.miscellaneous.tooltips_details[0].tooltip_id,GmPXtTest.tooltipTrackingList[sid].track=!0)})},setPayLoad:function(t){var e,s,n,r;if(GmPXtTest.isAutomationRunning()&&"mi_mybot_run"!==t.eventName)GmPXtTest.log(45,"Tracker is currently stopped",t);else if(GmPXtTest.user){if(t.app_code)return e=(t=t||{}).url||t.miscellaneous.url,e=GmPXtTest.trackerUtil&&GmPXtTest.trackerUtil.page_url?e||(GmPXtTest.urlParts?GmPXtTest.urlParts.fullUrl:GmPXtTest.trackerUtil.page_url):e||(GmPXtTest.urlParts?GmPXtTest.urlParts.fullUrl:GmPXtTest._location().href),r=new Date,"mi_page_visit"===t.eventName&&(r=new Date(GmPXtTest.pageVisit.timeStarted),e=GmPXtTest.pageVisit.url),t.miscellaneous.env_code||"mi_tooltip_shown"===t.eventName||"mi_workflow_play"===t.eventName||(t.miscellaneous.env_code=GmPXtTest.trackerV1.getEnvCode(e)),s="",s="mi_user_pulse"===t.eventName?r.getUTCFullYear()+"-"+("0"+(r.getUTCMonth()+1)).slice(-2)+"-"+("0"+r.getUTCDate()).slice(-2)+" 00:00:00":r.getUTCFullYear()+"-"+("0"+(r.getUTCMonth()+1)).slice(-2)+"-"+("0"+r.getUTCDate()).slice(-2)+" "+("0"+r.getUTCHours()).slice(-2)+":"+("0"+r.getUTCMinutes()).slice(-2)+":"+("0"+r.getUTCSeconds()).slice(-2),n=!1,GmPXtTest.user&&(n=GmPXtTest.user),r=GmPXtTest.trackerV1.v1Payload(t,r,e,n,s),GmPXtTest.trackerUtil.trackPI&&(r.miscellaneous.unique_user_id=n.user_email,r.miscellaneous.display_name=n.first_name+" "+n.last_name),"mi_tooltip_shown"!==r.event_type&&"mi_workflow_play"!==r.event_type&&"mi_mybot_run"!==r.event_type&&(r.miscellaneous.env_code=GmPXtTest.trackerV1.getEnvCode(r.url)),r.miscellaneous.user_timezone=GmPXtTest.trackerV1.getTimeZone(),r}else GmPXtTest.log(45,"SKIP EVENT, no user found "+t.eventName)},sendGuideAutomationEvent:function(e){function s(){GmPXtTest.sendMessageToApp("mgPlayerExtChromeTest_action:myBot_report_saved"),GmPXtTest.log(37,"Automation Report saved. Init the tracker again."),GmPXtTest.storage().get(["desktopReq"]).then(function(t){t.desktopReq&&(GmPXtTest.deskReq=t.desktopReq,GmPXtTest.sendMessageToDesktopApp("task_complete",{entity_code:e.payload[0].entity_code}))})}GmPXtTest.api.saveMyBotReport(e).then(function(t){GmPXtTest.log(45,"SENT events"),s()}).catch(function(t){GmPXtTest.log(45,"ERROR, events restored"),GmPXtTest.trackerV1.apiV1(e).finally(s)})},getEnvCode:function(t){return GmPXtTest.checkDomainInApps(t).app_env||""},getTimeZone:function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},getAppCode:function(){return GmPXtTest.externalAppId||(GmPXtTest.appList&&GmPXtTest.activeAppId?GmPXtTest.appList["app:"+GmPXtTest.activeAppId].external_id:void 0)},getAppSettings:function(){if(GmPXtTest.appList&&GmPXtTest.activeAppId)return GmPXtTest.appList["app:"+GmPXtTest.activeAppId].settings},trackPanelOpen:function(t,e){GmPXtTest.trackingDisabled()||(e="chatbot"===e?"mi_bot_panel_open":"mi_panel_open",e={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:e,objectId:GmPXtTest.user.user_key,miscellaneous:{source:t,event_start_time:(new Date).getTime(),event_end_time:(new Date).getTime(),url:GmPXtTest.urlParts.fullUrl},screen_size:GmPXtTest.trackerV1.getScreenSize()},t=GmPXtTest.trackerV1.setPayLoad(e),GmPXtTest.trackerV1.sendPayloadEventCall(t))},getPayloadForPlayEvent:function(t){t=GmPXtTest.trackerV1.setPayLoad(t);t&&GmPXtTest.trackerV1.sendPayloadEventCall(t)},sendPayloadEventCall:function(t){t&&(GmPXtTest.isClientJs()||GmPXtTest.isCreatorJS(),GmPXtTest.sendToParentWindow({action:"mgPlayerExtChromeTest_action:payload_event_call",data:t}))},trackGuidePlayEvent:function(){if(GmPXtTest.log(38,"Fn. trackGuidePlayEvent"),!GmPXtTest.trackingDisabled())for(var t in GmPXtTest.guidePlayTracker){var e,t=GmPXtTest.guidePlayTracker[t];t.steps_details&&t.steps_details.length&&(t.event_end_time=(new Date).getTime(),e=t.steps_details.length,t.steps_details[e-1].event_end_time=(new Date).getTime(),e={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:t.mode,objectId:t.guide_id,miscellaneous:t,screen_size:GmPXtTest.trackerV1.getScreenSize()},GmPXtTest.trackerV1.getPayloadForPlayEvent(e))}},trackGuideSearch:function(t){GmPXtTest.trackingDisabled()||(t={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_search",objectType:"global",objectId:GmPXtTest.user.user_key,miscellaneous:{search_keyword:t.search_text,results_returned:t.results_returned,search_result_clicked:t.search_result_clicked,event_start_time:t.startTime,event_end_time:(new Date).getTime(),url:GmPXtTest.urlParts.fullUrl},screen_size:GmPXtTest.trackerV1.getScreenSize()},t=GmPXtTest.trackerV1.setPayLoad(t),GmPXtTest.trackerV1.sendPayloadEventCall(t))},trackGuideDownload:function(t,e){GmPXtTest.trackingDisabled()||(t={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_guide_download",objectId:t.tour_id,miscellaneous:{guide_id:t.tour_id,type:e,play_instance_id:GmPXtTest.getUUID(),event_start_time:(new Date).getTime(),event_end_time:(new Date).getTime(),url:GmPXtTest.urlParts.fullUrl},screen_size:GmPXtTest.trackerV1.getScreenSize()},e=GmPXtTest.trackerV1.setPayLoad(t),GmPXtTest.trackerV1.sendPayloadEventCall(e))},trackBotInteraction:function(t){if(!GmPXtTest.trackingDisabled()&&t&&t.length)for(var e=0;e<t.length;e++){for(var s={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_bot_interaction",objectId:t[e].tour_id,miscellaneous:{guide_id:t[e].tour_id,play_instance_id:GmPXtTest.getUUID(),event_start_time:(new Date).getTime(),event_end_time:(new Date).getTime(),url:GmPXtTest.urlParts.fullUrl},screen_size:GmPXtTest.trackerV1.getScreenSize()},n=[],r=0;r<t[e].steps.length;r++){var a,o={step_id:t[e].steps[r].step_id,step_index:parseInt(t[e].steps[r].step_order),step_title:t[e].steps[r].step_title,event_start_time:(new Date).getTime(),event_end_time:(new Date).getTime(),page_url:GmPXtTest.urlParts.fullUrl,error_type:"",audio_muted:GmPXtTest.stepAudioRunningStatus?0:1};t[e].steps[r].step_settings.automation.enableBot&&t[e].steps[r].step_settings.automation.botQuestion?(o.requires_human_intervention=1,o.step_skipped=0,a=t[e].steps[r].step_settings.automation.defaultData,o.isAnswered=!!a,o.botQuestion=t[e].steps[r].step_settings.automation.botQuestion):(o.requires_human_intervention=0,o.step_skipped=0),n.push(o)}s.miscellaneous.steps_details=n;s=GmPXtTest.trackerV1.setPayLoad(s);GmPXtTest.trackerV1.sendPayloadEventCall(s)}},trackGuideShowMe:function(t,e,s,n,r,a){var o;GmPXtTest.trackingDisabled()||(o=-1===t.tour_url.indexOf("://")?"https://"+t.tour_url:t.tour_url,e={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_showme_play",objectId:t.tour_id,miscellaneous:{guide_id:t.tour_id,type:e,event_start_time:(new Date).getTime(),event_end_time:(new Date).getTime(),url:o,trigger_source:GmPXtTest.getSource(s),audio_muted:n?0:1,segment_group_id:r},screen_size:GmPXtTest.trackerV1.getScreenSize()},a&&(e.miscellaneous.task_list_id=a),e.miscellaneous.play_instance_id=GmPXtTest.getUUID(t.tour_id),GmPXtTest.isLastStepPlayedOnShowme?e.miscellaneous.guide_complete=1:e.miscellaneous.guide_complete=0,GmPXtTest.isVideoEndedOnShowme&&(e.miscellaneous.guide_complete=1),GmPXtTest.isGiphyPlayedOnShowme&&(e.miscellaneous.guide_complete=1),GmPXtTest.trackerV1.getPayloadForPlayEvent(e))},trackTutGuide:function(s,t,n,e){var r,a,o;GmPXtTest.trackingDisabled()||(o=-1===s.tour_url.indexOf("://")?"https://"+s.tour_url:s.tour_url,r=[],GmPXtTest.isEmpty(s.tour_settings.segment_groups)||(r=GmPXtTest.getTourSegmentDetail(s)),a={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_tutorial_guide_play",objectId:s.tour_id,miscellaneous:{guide_id:s.tour_id,type:t,trigger_source:n,event_start_time:(new Date).getTime(),event_end_time:(new Date).getTime(),url:o,guide_open:1,segment_details:r},screen_size:GmPXtTest.trackerV1.getScreenSize()},"task_list"===n&&(a.miscellaneous.task_list_id=e),GmPXtTest.isLastStepPlayedOnCreateTutGuide?a.miscellaneous.guide_complete=1:a.miscellaneous.guide_complete=0,GmPXtTest.pdfPlayedOnUploadTut&&GmPXtTest.fullPdfPlayedOnUploadTutGuide&&(a.miscellaneous.guide_complete=1),GmPXtTest.pdfPlayedOnUploadTutNewTab&&(a.miscellaneous.guide_complete=1),a.miscellaneous.play_instance_id=GmPXtTest.getUUID(s.tour_id),"create_tutorial_guide"===t?GmPXtTest.storage().get(["tutorial_steps"]).then(function(t){var e=[];GmPXtTest.isEmpty(t)&&"bot"===n&&((t={}).tutorial_steps=s.steps),t.tutorial_steps.forEach(function(t){t={step_id:t.step_id,step_index:parseInt(t.step_order),step_title:t.step_description,event_start_time:(new Date).getTime(),event_end_time:(new Date).getTime(),page_url:GmPXtTest.urlParts.fullUrl,error_type:"",audio_muted:GmPXtTest.stepAudioRunningStatus?0:1};e.push(t)}),a.miscellaneous.steps_details=e,a.miscellaneous.tutorial_rendered="inline",GmPXtTest.trackerV1.getPayloadForPlayEvent(a)}):"upload_tutorial_guide_same_tab"!==t&&"upload_tutorial_guide_new_tab"!==t||(a.miscellaneous.tutorial_rendered="pdf",o=[{step_id:s.steps[0].step_id,step_index:parseInt(s.steps[0].step_order),step_title:s.steps[0].step_title,event_start_time:(new Date).getTime(),event_end_time:(new Date).getTime(),page_url:GmPXtTest.urlParts.fullUrl,error_type:"",audio_muted:GmPXtTest.stepAudioRunningStatus?0:1}],a.miscellaneous.steps_details=o,GmPXtTest.trackerV1.getPayloadForPlayEvent(a)))},trackClientVisit:function(){var t={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_client_visit",objectId:GmPXtTest.user.user_key,miscellaneous:{event_start_time:(new Date).getTime(),event_end_time:(new Date).getTime(),url:GmPXtTest.trackerUtil.page_url,is_new_user:!1},screen_size:GmPXtTest.trackerV1.getScreenSize()},t=GmPXtTest.trackerV1.setPayLoad(t);GmPXtTest.trackerV1.sendPayloadEventCall(t)},trackTestMe:function(t){GmPXtTest.trackingDisabled()||(t={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_test",objectId:t.tourId,miscellaneous:{guide_id:t.tourId,test_result:t.testResult.toLowerCase(),test_duration:t.userTime,test_effectiveness:t.testEffectiveness||0,test_expected_steps:t.stepCount,test_steps_performed:t.eventCount,test_expected_time:t.expectedTime,play_instance_id:GmPXtTest.getUUID(t.tourId),event_start_time:t.startTime,event_end_time:(new Date).getTime(),url:t.url},screen_size:GmPXtTest.trackerV1.getScreenSize()},t=GmPXtTest.trackerV1.setPayLoad(t),GmPXtTest.trackerV1.sendPayloadEventCall(t))},trackFeatureClick:function(t){GmPXtTest.trackerUtil.featureTracking&&(GmPXtTest.log(16,"TAG CLICK event ",t),t={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_feature_click",objectId:t.tour_id,miscellaneous:{step_id:t.step_id,tour_id:t.tour_id,group_id:t.group_id,event_start_time:(new Date).getTime(),event_end_time:(new Date).getTime(),page_url:GmPXtTest.urlParts.fullUrl,play_instance_id:GmPXtTest.getUUID()},screen_size:GmPXtTest.trackerV1.getScreenSize()},t=GmPXtTest.trackerV1.setPayLoad(t),GmPXtTest.trackerV1.sendPayloadEventCall(t))},trackPageVisit:function(t){var e;!GmPXtTest.trackerUtil.pageTracking||!GmPXtTest.pageVisit||(e=GmPXtTest.pageVisit.timeSpent||(new Date).getTime()-GmPXtTest.pageVisit.timeStarted)<GmPXtTest.t_.sec5||(e={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_page_visit",objectId:GmPXtTest.pageVisit.userKey,miscellaneous:{time_spend_on_page:e,page_url:GmPXtTest.urlParts.fullUrl,page_title:GmPXtTest.pageVisit.title,page_load_time:GmPXtTest.pageVisit.pageLoadTime,referrer_url:document.referrer,event_time:(new Date).getTime(),play_instance_id:GmPXtTest.getUUID()},screen_size:GmPXtTest.trackerV1.getScreenSize()},GmPXtTest.log(2,"Page track event saved",e),e=GmPXtTest.trackerV1.setPayLoad(e),t?GmPXtTest.storage().set({trackPageVisit:JSON.stringify(e)}):GmPXtTest.trackerV1.sendPayloadEventCall(e))},trackUserPulse:function(){var r,a,o;GmPXtTest.trackingDisabled()||GmPXtTest.isSumtotal()||GmPXtTest.isSbx()||GmPXtTest.isLXP()||(r=(new Date).getTime(),a={time:r,app_code:GmPXtTest.trackerV1.getAppCode()},o=function(){var t={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_user_pulse",objectId:GmPXtTest.user.user_key,miscellaneous:{},screen_size:GmPXtTest.trackerV1.getScreenSize()},t=GmPXtTest.trackerV1.setPayLoad(t);GmPXtTest.trackerV1.sendPayloadEventCall(t)},GmPXtTest.storage().get(["userPulsePayloadTime"]).then(function(t){var s,n,e=[];!GmPXtTest.isEmpty(t)&&!GmPXtTest.isEmpty(t)&&t.userPulsePayloadTime&&(e=GmPXtTest.parseJSON(t.userPulsePayloadTime),t=e,s=GmPXtTest.trackerV1.getAppCode(),n=-1,t.filter(function(t,e){if(s===t.app_code)return n=e}),-1!==(t=n))?e[t].app_code===GmPXtTest.trackerV1.getAppCode()&&r-e[t].time>GmPXtTest.t.tracking8hr&&(o(),e[t].time=r):(o(),e.push(a)),GmPXtTest.storage().set({userPulsePayloadTime:JSON.stringify(e)})}))},trackTooltips:function(n){var t,e,s,r,a,o,i,m,c;GmPXtTest.trackingDisabled()||GmPXtTest.isEmpty(GmPXtTest.tooltipTrackingList)||(t=function(t,e){var s;t.track&&(GmPXtTest.isEmpty(n.tooltip_play_instances)&&n.tooltip_play_instances.push({event_start_time:GmPXtTest.getCurrentTimeInMilSec(),event_end_time:GmPXtTest.getCurrentTimeInMilSec()}),s=[],n.segment_details&&(s=n.segment_details,delete n.segment_details),s={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_tooltip_shown",objectId:t.tourId,miscellaneous:{url:t.url,event_start_time:GmPXtTest.getCurrentTimeInMilSec(),event_end_time:GmPXtTest.getCurrentTimeInMilSec(),tooltips_details:[n],env_code:GmPXtTest.trackerV1.getEnvCode(t.url),segment_details:s},url:GmPXtTest.trackerUtil.page_url||GmPXtTest.urlParts.fullUrl||t.url,screen_size:t.screen_size},GmPXtTest.trackerUtil.ttPayload["tt_"+t.tourId]=s,t=GmPXtTest.trackerV1.setPayLoad(s),GmPXtTest.trackerV1.sendPayloadEventCall(t),GmPXtTest.tooltipTrackingList[e].ttDetails.tooltip_play_instances=[],GmPXtTest.tooltipTrackingList[e].track=!1)},i=[],m="step_"+n.tooltip_id,c={ttStepId:m,ttTime:GmPXtTest.getCurrentTimeInMilSec(),ttActionType:n.action_type[0]},GmPXtTest.tooltipTrackingList[m].track&&(GmPXtTest.tooltipTrackData&&!GmPXtTest.isEmpty(GmPXtTest.tooltipTrackData)&&(i=GmPXtTest.parseJSON(GmPXtTest.tooltipTrackData),s=i,r=m,a=n.action_type[0],o=-1,s.filter(function(t,e){if(r===t.ttStepId&&a===t.ttActionType)return o=e}),-1!==(s=o))?(e=GmPXtTest.getCurrentTimeInMilSec()-i[s].ttTime,i[s].ttStepId===m&&i[s].ttActionType===n.action_type[0]&&e>GmPXtTest.t.tracking8hr&&(t(GmPXtTest.tooltipTrackingList[m],m),i[s].ttTime=GmPXtTest.getCurrentTimeInMilSec())):(t(GmPXtTest.tooltipTrackingList[m],m),i.push(c)),GmPXtTest.tooltipTrackData=i,GmPXtTest.storage().set({tooltipTrackData:JSON.stringify(i)})))},trackBeacons:function(s,n){var r,a,o,i;function m(){e={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_beacon_shown",objectId:s.tour_id,miscellaneous:{env_code:GmPXtTest.trackerV1.getEnvCode(s.tour_url),url:i,play_instance_id:GmPXtTest.getUUID(),action_type:[n],segment_details:o,is_new_user:!1,event_start_time:GmPXtTest.getCurrentTimeInMilSec(),event_end_time:GmPXtTest.getCurrentTimeInMilSec()},url:GmPXtTest.trackerUtil.page_url||GmPXtTest.urlParts.fullUrl||s.tour_url,screen_size:GmPXtTest.trackerV1.getScreenSize()};var t=GmPXtTest.trackerV1.setPayLoad(e);GmPXtTest.trackerV1.sendPayloadEventCall(t),GmPXtTest.storage().set({beaconTrackData:JSON.stringify(r)})}GmPXtTest.trackingDisabled()||(r=[],a={beacon:s.tour_id+"_"+n,bTime:GmPXtTest.getCurrentTimeInMilSec()},o=[],GmPXtTest.isEmpty(s.tour_settings.segment_groups)||(o=GmPXtTest.getTourSegmentDetail(s)),i=-1===s.tour_url.indexOf("://")?"https://"+s.tour_url:s.tour_url,GmPXtTest.storage().get(["beaconTrackData"]).then(function(t){var e=[];GmPXtTest.isEmpty(t)||(e=GmPXtTest.parseJSON(t.beaconTrackData)),GmPXtTest.isEmpty(e)?(r.push(a),m()):-1===(t=e.findIndex(function(t){return t.beacon===a.beacon}))?((r=e).push(a),m()):GmPXtTest.getCurrentTimeInMilSec()-e[t].bTime>GmPXtTest.t.tracking8hr&&(e[t].bTime=GmPXtTest.getCurrentTimeInMilSec(),m())}))},trackPushNotification:function(t,s){var n,r;GmPXtTest.trackingDisabled()||(n=[],GmPXtTest.isEmpty(t.tour_settings.segment_groups)||(n=GmPXtTest.getTourSegmentDetail(t)),r=-1===t.tour_url.indexOf("://")?"https://"+t.tour_url:t.tour_url,e={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_push_notification_shown",objectId:t.tour_id,miscellaneous:{env_code:GmPXtTest.trackerV1.getEnvCode(t.tour_url),url:r,play_instance_id:GmPXtTest.getUUID(),action_type:[s],segment_details:n,is_new_user:!1,event_start_time:GmPXtTest.getCurrentTimeInMilSec(),event_end_time:GmPXtTest.getCurrentTimeInMilSec()},url:GmPXtTest.trackerUtil.page_url||GmPXtTest.urlParts.fullUrl||t.tour_url,screen_size:GmPXtTest.trackerV1.getScreenSize()},r=GmPXtTest.trackerV1.setPayLoad(e),GmPXtTest.trackerV1.sendPayloadEventCall(r))},trackSurveyInstantResponse:function(t,e){e={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_sentiment_response",objectType:"guide",objectId:e.sentimentCode,miscellaneous:{response_code:GmPXtTest.getUUID(),trigger_source_type:e.trigger_source_type,trigger_source_id:e.trigger_source_id,answers:t,source_url:GmPXtTest.urlParts.fullUrl,source_page_title:GmPXtTest.pageTitle},screen_size:GmPXtTest.trackerV1.getScreenSize()},t=GmPXtTest.trackerV1.setPayLoad(e);GmPXtTest.trackerV1.apiTrackSentiment(t)},trackConversationResponse:function(t,e){e={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_conversation_response",objectType:"bot",objectId:e.conversationCode,miscellaneous:{response_code:GmPXtTest.getUUID(),trigger_source_type:e.trigger_source_type,trigger_source_id:e.trigger_source_id,answers:t,source_url:GmPXtTest.urlParts.fullUrl,source_page_title:GmPXtTest.pageTitle},screen_size:GmPXtTest.trackerV1.getScreenSize()},t=GmPXtTest.trackerV1.setPayLoad(e);GmPXtTest.trackerV1.apiTrackConversation(t)},trackMyBotEvents:function(t){t&&(t={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_mybot_run",objectId:t.testCode,miscellaneous:{run_type:t.runType,status:t.status,resultStatus:t.resultStatus,result_sequence:t.resultSequence},screen_size:GmPXtTest.trackerV1.getScreenSize()},t=GmPXtTest.trackerV1.setPayLoad(t),GmPXtTest.trackerV1.sendGuideAutomationEvent(t))},trackElNotFound:function(t){var e;t&&(e={page_url:GmPXtTest.urlParts.fullUrl,page_title:GmPXtTest.pageTitle,event_start_time:GmPXtTest.getCurrentTimeInMilSec(),event_end_time:GmPXtTest.getCurrentTimeInMilSec(),step_id:t.step_id||null},e={app_code:GmPXtTest.trackerV1.getAppCode(),eventName:"mi_rule_enhancement",objectId:t.tour_id,miscellaneous:{source:t.source,play_instance_id:GmPXtTest.getUUID(),element_player_instance:[e]},url:GmPXtTest.urlParts.fullUrl,screen_size:GmPXtTest.trackerV1.getScreenSize()},GmPXtTest.trackerUtil.ePayload["el_"+t.tour_id]=e,t=GmPXtTest.trackerV1.setPayLoad(e),GmPXtTest.trackerV1.sendPayloadEventCall(t))},sendEvents:function(t){GmPXtTest.trackerUtil.guidePayload.length&&GmPXtTest.trackerV1.track(GmPXtTest.trackerUtil.guidePayload)}},GmPXtTest.trackingDisabled=function(){return!GmPXtTest.trackerUtil.enableTracking},GmPXtTest.trackerV1.startMyBotTracking=function(){GmPXtTest.log(37,"Stop tracking events"),clearInterval(GmPXtTest.trackerV1.interval),GmPXtTest.trackerV1.sendEvents()};